(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();function Jh(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xg={exports:{}},gh={};var I1;function bC(){if(I1)return gh;I1=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,r,a){var u=null;if(a!==void 0&&(u=""+a),r.key!==void 0&&(u=""+r.key),"key"in r){a={};for(var h in r)h!=="key"&&(a[h]=r[h])}else a=r;return r=a.ref,{$$typeof:n,type:s,key:u,ref:r!==void 0?r:null,props:a}}return gh.Fragment=t,gh.jsx=e,gh.jsxs=e,gh}var N1;function wC(){return N1||(N1=1,xg.exports=bC()),xg.exports}var Ct=wC(),Sg={exports:{}},re={};var P1;function xC(){if(P1)return re;P1=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),b=Symbol.iterator;function S(I){return I===null||typeof I!="object"?null:(I=b&&I[b]||I["@@iterator"],typeof I=="function"?I:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,E={};function R(I,Y,at){this.props=I,this.context=Y,this.refs=E,this.updater=at||x}R.prototype.isReactComponent={},R.prototype.setState=function(I,Y){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,Y,"setState")},R.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function z(){}z.prototype=R.prototype;function O(I,Y,at){this.props=I,this.context=Y,this.refs=E,this.updater=at||x}var $=O.prototype=new z;$.constructor=O,A($,R.prototype),$.isPureReactComponent=!0;var N=Array.isArray;function j(){}var F={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function q(I,Y,at){var mt=at.ref;return{$$typeof:n,type:I,key:Y,ref:mt!==void 0?mt:null,props:at}}function W(I,Y){return q(I.type,Y,I.props)}function Q(I){return typeof I=="object"&&I!==null&&I.$$typeof===n}function et(I){var Y={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(at){return Y[at]})}var k=/\/+/g;function X(I,Y){return typeof I=="object"&&I!==null&&I.key!=null?et(""+I.key):Y.toString(36)}function Z(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(j,j):(I.status="pending",I.then(function(Y){I.status==="pending"&&(I.status="fulfilled",I.value=Y)},function(Y){I.status==="pending"&&(I.status="rejected",I.reason=Y)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function P(I,Y,at,mt,gt){var yt=typeof I;(yt==="undefined"||yt==="boolean")&&(I=null);var kt=!1;if(I===null)kt=!0;else switch(yt){case"bigint":case"string":case"number":kt=!0;break;case"object":switch(I.$$typeof){case n:case t:kt=!0;break;case y:return kt=I._init,P(kt(I._payload),Y,at,mt,gt)}}if(kt)return gt=gt(I),kt=mt===""?"."+X(I,0):mt,N(gt)?(at="",kt!=null&&(at=kt.replace(k,"$&/")+"/"),P(gt,Y,at,"",function(Ne){return Ne})):gt!=null&&(Q(gt)&&(gt=W(gt,at+(gt.key==null||I&&I.key===gt.key?"":(""+gt.key).replace(k,"$&/")+"/")+kt)),Y.push(gt)),1;kt=0;var Mt=mt===""?".":mt+":";if(N(I))for(var oe=0;oe<I.length;oe++)mt=I[oe],yt=Mt+X(mt,oe),kt+=P(mt,Y,at,yt,gt);else if(oe=S(I),typeof oe=="function")for(I=oe.call(I),oe=0;!(mt=I.next()).done;)mt=mt.value,yt=Mt+X(mt,oe++),kt+=P(mt,Y,at,yt,gt);else if(yt==="object"){if(typeof I.then=="function")return P(Z(I),Y,at,mt,gt);throw Y=String(I),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return kt}function U(I,Y,at){if(I==null)return I;var mt=[],gt=0;return P(I,mt,"","",function(yt){return Y.call(at,yt,gt++)}),mt}function K(I){if(I._status===-1){var Y=I._result;Y=Y(),Y.then(function(at){(I._status===0||I._status===-1)&&(I._status=1,I._result=at)},function(at){(I._status===0||I._status===-1)&&(I._status=2,I._result=at)}),I._status===-1&&(I._status=0,I._result=Y)}if(I._status===1)return I._result.default;throw I._result}var D=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},V={map:U,forEach:function(I,Y,at){U(I,function(){Y.apply(this,arguments)},at)},count:function(I){var Y=0;return U(I,function(){Y++}),Y},toArray:function(I){return U(I,function(Y){return Y})||[]},only:function(I){if(!Q(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return re.Activity=_,re.Children=V,re.Component=R,re.Fragment=e,re.Profiler=r,re.PureComponent=O,re.StrictMode=s,re.Suspense=p,re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,re.__COMPILER_RUNTIME={__proto__:null,c:function(I){return F.H.useMemoCache(I)}},re.cache=function(I){return function(){return I.apply(null,arguments)}},re.cacheSignal=function(){return null},re.cloneElement=function(I,Y,at){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var mt=A({},I.props),gt=I.key;if(Y!=null)for(yt in Y.key!==void 0&&(gt=""+Y.key),Y)!G.call(Y,yt)||yt==="key"||yt==="__self"||yt==="__source"||yt==="ref"&&Y.ref===void 0||(mt[yt]=Y[yt]);var yt=arguments.length-2;if(yt===1)mt.children=at;else if(1<yt){for(var kt=Array(yt),Mt=0;Mt<yt;Mt++)kt[Mt]=arguments[Mt+2];mt.children=kt}return q(I.type,gt,mt)},re.createContext=function(I){return I={$$typeof:u,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:a,_context:I},I},re.createElement=function(I,Y,at){var mt,gt={},yt=null;if(Y!=null)for(mt in Y.key!==void 0&&(yt=""+Y.key),Y)G.call(Y,mt)&&mt!=="key"&&mt!=="__self"&&mt!=="__source"&&(gt[mt]=Y[mt]);var kt=arguments.length-2;if(kt===1)gt.children=at;else if(1<kt){for(var Mt=Array(kt),oe=0;oe<kt;oe++)Mt[oe]=arguments[oe+2];gt.children=Mt}if(I&&I.defaultProps)for(mt in kt=I.defaultProps,kt)gt[mt]===void 0&&(gt[mt]=kt[mt]);return q(I,yt,gt)},re.createRef=function(){return{current:null}},re.forwardRef=function(I){return{$$typeof:h,render:I}},re.isValidElement=Q,re.lazy=function(I){return{$$typeof:y,_payload:{_status:-1,_result:I},_init:K}},re.memo=function(I,Y){return{$$typeof:m,type:I,compare:Y===void 0?null:Y}},re.startTransition=function(I){var Y=F.T,at={};F.T=at;try{var mt=I(),gt=F.S;gt!==null&&gt(at,mt),typeof mt=="object"&&mt!==null&&typeof mt.then=="function"&&mt.then(j,D)}catch(yt){D(yt)}finally{Y!==null&&at.types!==null&&(Y.types=at.types),F.T=Y}},re.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},re.use=function(I){return F.H.use(I)},re.useActionState=function(I,Y,at){return F.H.useActionState(I,Y,at)},re.useCallback=function(I,Y){return F.H.useCallback(I,Y)},re.useContext=function(I){return F.H.useContext(I)},re.useDebugValue=function(){},re.useDeferredValue=function(I,Y){return F.H.useDeferredValue(I,Y)},re.useEffect=function(I,Y){return F.H.useEffect(I,Y)},re.useEffectEvent=function(I){return F.H.useEffectEvent(I)},re.useId=function(){return F.H.useId()},re.useImperativeHandle=function(I,Y,at){return F.H.useImperativeHandle(I,Y,at)},re.useInsertionEffect=function(I,Y){return F.H.useInsertionEffect(I,Y)},re.useLayoutEffect=function(I,Y){return F.H.useLayoutEffect(I,Y)},re.useMemo=function(I,Y){return F.H.useMemo(I,Y)},re.useOptimistic=function(I,Y){return F.H.useOptimistic(I,Y)},re.useReducer=function(I,Y,at){return F.H.useReducer(I,Y,at)},re.useRef=function(I){return F.H.useRef(I)},re.useState=function(I){return F.H.useState(I)},re.useSyncExternalStore=function(I,Y,at){return F.H.useSyncExternalStore(I,Y,at)},re.useTransition=function(){return F.H.useTransition()},re.version="19.2.4",re}var z1;function yy(){return z1||(z1=1,Sg.exports=xC()),Sg.exports}var Pt=yy(),Tg={exports:{}},yh={},Ag={exports:{}},Eg={};var U1;function SC(){return U1||(U1=1,(function(n){function t(P,U){var K=P.length;P.push(U);t:for(;0<K;){var D=K-1>>>1,V=P[D];if(0<r(V,U))P[D]=U,P[K]=V,K=D;else break t}}function e(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var U=P[0],K=P.pop();if(K!==U){P[0]=K;t:for(var D=0,V=P.length,I=V>>>1;D<I;){var Y=2*(D+1)-1,at=P[Y],mt=Y+1,gt=P[mt];if(0>r(at,K))mt<V&&0>r(gt,at)?(P[D]=gt,P[mt]=K,D=mt):(P[D]=at,P[Y]=K,D=Y);else if(mt<V&&0>r(gt,K))P[D]=gt,P[mt]=K,D=mt;else break t}}return U}function r(P,U){var K=P.sortIndex-U.sortIndex;return K!==0?K:P.id-U.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var p=[],m=[],y=1,_=null,b=3,S=!1,x=!1,A=!1,E=!1,R=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function $(P){for(var U=e(m);U!==null;){if(U.callback===null)s(m);else if(U.startTime<=P)s(m),U.sortIndex=U.expirationTime,t(p,U);else break;U=e(m)}}function N(P){if(A=!1,$(P),!x)if(e(p)!==null)x=!0,j||(j=!0,et());else{var U=e(m);U!==null&&Z(N,U.startTime-P)}}var j=!1,F=-1,G=5,q=-1;function W(){return E?!0:!(n.unstable_now()-q<G)}function Q(){if(E=!1,j){var P=n.unstable_now();q=P;var U=!0;try{t:{x=!1,A&&(A=!1,z(F),F=-1),S=!0;var K=b;try{e:{for($(P),_=e(p);_!==null&&!(_.expirationTime>P&&W());){var D=_.callback;if(typeof D=="function"){_.callback=null,b=_.priorityLevel;var V=D(_.expirationTime<=P);if(P=n.unstable_now(),typeof V=="function"){_.callback=V,$(P),U=!0;break e}_===e(p)&&s(p),$(P)}else s(p);_=e(p)}if(_!==null)U=!0;else{var I=e(m);I!==null&&Z(N,I.startTime-P),U=!1}}break t}finally{_=null,b=K,S=!1}U=void 0}}finally{U?et():j=!1}}}var et;if(typeof O=="function")et=function(){O(Q)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,X=k.port2;k.port1.onmessage=Q,et=function(){X.postMessage(null)}}else et=function(){R(Q,0)};function Z(P,U){F=R(function(){P(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(P){switch(b){case 1:case 2:case 3:var U=3;break;default:U=b}var K=b;b=U;try{return P()}finally{b=K}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(P,U){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var K=b;b=P;try{return U()}finally{b=K}},n.unstable_scheduleCallback=function(P,U,K){var D=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?D+K:D):K=D,P){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=K+V,P={id:y++,callback:U,priorityLevel:P,startTime:K,expirationTime:V,sortIndex:-1},K>D?(P.sortIndex=K,t(m,P),e(p)===null&&P===e(m)&&(A?(z(F),F=-1):A=!0,Z(N,K-D))):(P.sortIndex=V,t(p,P),x||S||(x=!0,j||(j=!0,et()))),P},n.unstable_shouldYield=W,n.unstable_wrapCallback=function(P){var U=b;return function(){var K=b;b=U;try{return P.apply(this,arguments)}finally{b=K}}}})(Eg)),Eg}var B1;function TC(){return B1||(B1=1,Ag.exports=SC()),Ag.exports}var Cg={exports:{}},fi={};var H1;function AC(){if(H1)return fi;H1=1;var n=yy();function t(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)m+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(p,m,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:p,containerInfo:m,implementation:y}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return fi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,fi.createPortal=function(p,m){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return a(p,m,null,y)},fi.flushSync=function(p){var m=u.T,y=s.p;try{if(u.T=null,s.p=2,p)return p()}finally{u.T=m,s.p=y,s.d.f()}},fi.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},fi.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},fi.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var y=m.as,_=h(y,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;y==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:S}):y==="script"&&s.d.X(p,{crossOrigin:_,integrity:b,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},fi.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var y=h(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},fi.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var y=m.as,_=h(y,m.crossOrigin);s.d.L(p,y,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},fi.preloadModule=function(p,m){if(typeof p=="string")if(m){var y=h(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},fi.requestFormReset=function(p){s.d.r(p)},fi.unstable_batchedUpdates=function(p,m){return p(m)},fi.useFormState=function(p,m,y){return u.H.useFormState(p,m,y)},fi.useFormStatus=function(){return u.H.useHostTransitionStatus()},fi.version="19.2.4",fi}var V1;function EC(){if(V1)return Cg.exports;V1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Cg.exports=AC(),Cg.exports}var j1;function CC(){if(j1)return yh;j1=1;var n=TC(),t=yy(),e=EC();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function u(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function h(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function p(i){if(a(i)!==i)throw Error(s(188))}function m(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(s(188));return o!==i?null:i}for(var c=i,d=o;;){var v=c.return;if(v===null)break;var w=v.alternate;if(w===null){if(d=v.return,d!==null){c=d;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===c)return p(v),i;if(w===d)return p(v),o;w=w.sibling}throw Error(s(188))}if(c.return!==d.return)c=v,d=w;else{for(var M=!1,H=v.child;H;){if(H===c){M=!0,c=v,d=w;break}if(H===d){M=!0,d=v,c=w;break}H=H.sibling}if(!M){for(H=w.child;H;){if(H===c){M=!0,c=w,d=v;break}if(H===d){M=!0,d=w,c=v;break}H=H.sibling}if(!M)throw Error(s(189))}}if(c.alternate!==d)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?i:o}function y(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=y(i),o!==null)return o;i=i.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),O=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),q=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function et(i){return i===null||typeof i!="object"?null:(i=Q&&i[Q]||i["@@iterator"],typeof i=="function"?i:null)}var k=Symbol.for("react.client.reference");function X(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===k?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case R:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case j:return"SuspenseList";case q:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case x:return"Portal";case O:return i.displayName||"Context";case z:return(i._context.displayName||"Context")+".Consumer";case $:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case F:return o=i.displayName||null,o!==null?o:X(i.type)||"Memo";case G:o=i._payload,i=i._init;try{return X(i(o))}catch{}}return null}var Z=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},D=[],V=-1;function I(i){return{current:i}}function Y(i){0>V||(i.current=D[V],D[V]=null,V--)}function at(i,o){V++,D[V]=i.current,i.current=o}var mt=I(null),gt=I(null),yt=I(null),kt=I(null);function Mt(i,o){switch(at(yt,o),at(gt,i),at(mt,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?i1(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=i1(o),i=s1(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Y(mt),at(mt,i)}function oe(){Y(mt),Y(gt),Y(yt)}function Ne(i){i.memoizedState!==null&&at(kt,i);var o=mt.current,c=s1(o,i.type);o!==c&&(at(gt,i),at(mt,c))}function Be(i){gt.current===i&&(Y(mt),Y(gt)),kt.current===i&&(Y(kt),dh._currentValue=K)}var sn,ni;function _i(i){if(sn===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);sn=o&&o[1]||"",ni=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sn+i+ni}var It=!1;function Qt(i,o){if(!i||It)return"";It=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var Tt=function(){throw Error()};if(Object.defineProperty(Tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Tt,[])}catch(pt){var dt=pt}Reflect.construct(i,[],Tt)}else{try{Tt.call()}catch(pt){dt=pt}i.call(Tt.prototype)}}else{try{throw Error()}catch(pt){dt=pt}(Tt=i())&&typeof Tt.catch=="function"&&Tt.catch(function(){})}}catch(pt){if(pt&&dt&&typeof pt.stack=="string")return[pt.stack,dt.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),M=w[0],H=w[1];if(M&&H){var tt=M.split(`
`),ht=H.split(`
`);for(v=d=0;d<tt.length&&!tt[d].includes("DetermineComponentFrameRoot");)d++;for(;v<ht.length&&!ht[v].includes("DetermineComponentFrameRoot");)v++;if(d===tt.length||v===ht.length)for(d=tt.length-1,v=ht.length-1;1<=d&&0<=v&&tt[d]!==ht[v];)v--;for(;1<=d&&0<=v;d--,v--)if(tt[d]!==ht[v]){if(d!==1||v!==1)do if(d--,v--,0>v||tt[d]!==ht[v]){var vt=`
`+tt[d].replace(" at new "," at ");return i.displayName&&vt.includes("<anonymous>")&&(vt=vt.replace("<anonymous>",i.displayName)),vt}while(1<=d&&0<=v);break}}}finally{It=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?_i(c):""}function He(i,o){switch(i.tag){case 26:case 27:case 5:return _i(i.type);case 16:return _i("Lazy");case 13:return i.child!==o&&o!==null?_i("Suspense Fallback"):_i("Suspense");case 19:return _i("SuspenseList");case 0:case 15:return Qt(i.type,!1);case 11:return Qt(i.type.render,!1);case 1:return Qt(i.type,!0);case 31:return _i("Activity");default:return""}}function Ee(i){try{var o="",c=null;do o+=He(i,c),c=i,i=i.return;while(i);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var ue=Object.prototype.hasOwnProperty,Le=n.unstable_scheduleCallback,un=n.unstable_cancelCallback,gi=n.unstable_shouldYield,Oi=n.unstable_requestPaint,xn=n.unstable_now,No=n.unstable_getCurrentPriorityLevel,yi=n.unstable_ImmediatePriority,Ba=n.unstable_UserBlockingPriority,dr=n.unstable_NormalPriority,pu=n.unstable_LowPriority,Ha=n.unstable_IdlePriority,Fl=n.log,mu=n.unstable_setDisableYieldValue,Zs=null,Un=null;function Ji(i){if(typeof Fl=="function"&&mu(i),Un&&typeof Un.setStrictMode=="function")try{Un.setStrictMode(Zs,i)}catch{}}var ii=Math.clz32?Math.clz32:gu,Yr=Math.log,_u=Math.LN2;function gu(i){return i>>>=0,i===0?32:31-(Yr(i)/_u|0)|0}var Xr=256,Qr=262144,Et=4194304;function Ot(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Zt(i,o,c){var d=i.pendingLanes;if(d===0)return 0;var v=0,w=i.suspendedLanes,M=i.pingedLanes;i=i.warmLanes;var H=d&134217727;return H!==0?(d=H&~w,d!==0?v=Ot(d):(M&=H,M!==0?v=Ot(M):c||(c=H&~i,c!==0&&(v=Ot(c))))):(H=d&~w,H!==0?v=Ot(H):M!==0?v=Ot(M):c||(c=d&~i,c!==0&&(v=Ot(c)))),v===0?0:o!==0&&o!==v&&(o&w)===0&&(w=v&-v,c=o&-o,w>=c||w===32&&(c&4194048)!==0)?o:v}function Dt(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function zt(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nt(){var i=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),i}function Ft(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function Yt(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function te(i,o,c,d,v,w){var M=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var H=i.entanglements,tt=i.expirationTimes,ht=i.hiddenUpdates;for(c=M&~c;0<c;){var vt=31-ii(c),Tt=1<<vt;H[vt]=0,tt[vt]=-1;var dt=ht[vt];if(dt!==null)for(ht[vt]=null,vt=0;vt<dt.length;vt++){var pt=dt[vt];pt!==null&&(pt.lane&=-536870913)}c&=~Tt}d!==0&&rn(i,d,0),w!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=w&~(M&~o))}function rn(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var d=31-ii(o);i.entangledLanes|=o,i.entanglements[d]=i.entanglements[d]|1073741824|c&261930}function on(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var d=31-ii(c),v=1<<d;v&o|i[d]&o&&(i[d]|=o),c&=~v}}function ts(i,o){var c=o&-o;return c=(c&42)!==0?1:Sn(c),(c&(i.suspendedLanes|o))!==0?0:c}function Sn(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ut(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function vi(){var i=U.p;return i!==0?i:(i=window.event,i===void 0?32:C1(i.type))}function Va(i,o){var c=U.p;try{return U.p=i,o()}finally{U.p=c}}var Ws=Math.random().toString(36).slice(2),Ln="__reactFiber$"+Ws,Fn="__reactProps$"+Ws,$r="__reactContainer$"+Ws,pr="__reactEvents$"+Ws,bf="__reactListeners$"+Ws,Om="__reactHandles$"+Ws,wf="__reactResources$"+Ws,ja="__reactMarker$"+Ws;function yu(i){delete i[Ln],delete i[Fn],delete i[pr],delete i[bf],delete i[Om]}function Kr(i){var o=i[Ln];if(o)return o;for(var c=i.parentNode;c;){if(o=c[$r]||c[Ln]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=h1(i);i!==null;){if(c=i[Ln])return c;i=h1(i)}return o}i=c,c=i.parentNode}return null}function Po(i){if(i=i[Ln]||i[$r]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function mr(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function zo(i){var o=i[wf];return o||(o=i[wf]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Mn(i){i[ja]=!0}var xf=new Set,Sf={};function Jr(i,o){_r(i,o),_r(i+"Capture",o)}function _r(i,o){for(Sf[i]=o,i=0;i<o.length;i++)xf.add(o[i])}var qa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vu={},bu={};function Ga(i){return ue.call(bu,i)?!0:ue.call(vu,i)?!1:qa.test(i)?bu[i]=!0:(vu[i]=!0,!1)}function fe(i,o,c){if(Ga(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function Ve(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function Di(i,o,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+d)}}function Bn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function to(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function wu(i,o,c){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,w=d.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return v.call(this)},set:function(M){c=""+M,w.call(this,M)}}),Object.defineProperty(i,o,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(M){c=""+M},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function se(i){if(!i._valueTracker){var o=to(i)?"checked":"value";i._valueTracker=wu(i,o,""+i[o])}}function an(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return i&&(d=to(i)?i.checked?"true":"false":i.value),i=d,i!==c?(o.setValue(i),!0):!1}function Uo(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Yl=/[\n"\\]/g;function Ke(i){return i.replace(Yl,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function xu(i,o,c,d,v,w,M,H){i.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?i.type=M:i.removeAttribute("type"),o!=null?M==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Bn(o)):i.value!==""+Bn(o)&&(i.value=""+Bn(o)):M!=="submit"&&M!=="reset"||i.removeAttribute("value"),o!=null?Fs(i,M,Bn(o)):c!=null?Fs(i,M,Bn(c)):d!=null&&i.removeAttribute("value"),v==null&&w!=null&&(i.defaultChecked=!!w),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?i.name=""+Bn(H):i.removeAttribute("name")}function Za(i,o,c,d,v,w,M,H){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.type=w),o!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||o!=null)){se(i);return}c=c!=null?""+Bn(c):"",o=o!=null?""+Bn(o):c,H||o===i.value||(i.value=o),i.defaultValue=o}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=H?i.checked:!!d,i.defaultChecked=!!d,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(i.name=M),se(i)}function Fs(i,o,c){o==="number"&&Uo(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function We(i,o,c,d){if(i=i.options,o){o={};for(var v=0;v<c.length;v++)o["$"+c[v]]=!0;for(c=0;c<i.length;c++)v=o.hasOwnProperty("$"+i[c].value),i[c].selected!==v&&(i[c].selected=v),v&&d&&(i[c].defaultSelected=!0)}else{for(c=""+Bn(c),o=null,v=0;v<i.length;v++){if(i[v].value===c){i[v].selected=!0,d&&(i[v].defaultSelected=!0);return}o!==null||i[v].disabled||(o=i[v])}o!==null&&(o.selected=!0)}}function gr(i,o,c){if(o!=null&&(o=""+Bn(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+Bn(c):""}function Bo(i,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(s(92));if(Z(d)){if(1<d.length)throw Error(s(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=Bn(o),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d),se(i)}function bs(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var Su=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ho(i,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":d?i.setProperty(o,c):typeof c!="number"||c===0||Su.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function Xl(i,o,c){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var v in o)d=o[v],o.hasOwnProperty(v)&&c[v]!==d&&Ho(i,v,d)}else for(var w in o)o.hasOwnProperty(w)&&Ho(i,w,o[w])}function Wa(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ql=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Vo(i){return Tu.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Ri(){}var $l=null;function Fa(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var jo=null,Jt=null;function es(i){var o=Po(i);if(o&&(i=o.stateNode)){var c=i[Fn]||null;t:switch(i=o.stateNode,o.type){case"input":if(xu(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Ke(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==i&&d.form===i.form){var v=d[Fn]||null;if(!v)throw Error(s(90));xu(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===i.form&&an(d)}break t;case"textarea":gr(i,c.value,c.defaultValue);break t;case"select":o=c.value,o!=null&&We(i,!!c.multiple,o,!1)}}}var Pe=!1;function Au(i,o,c){if(Pe)return i(o,c);Pe=!0;try{var d=i(o);return d}finally{if(Pe=!1,(jo!==null||Jt!==null)&&(vd(),jo&&(o=jo,i=Jt,Jt=jo=null,es(o),i)))for(o=0;o<i.length;o++)es(i[o])}}function eo(i,o){var c=i.stateNode;if(c===null)return null;var d=c[Fn]||null;if(d===null)return null;c=d[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break t;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(s(231,o,typeof c));return c}var ns=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ya=!1;if(ns)try{var is={};Object.defineProperty(is,"passive",{get:function(){Ya=!0}}),window.addEventListener("test",is,is),window.removeEventListener("test",is,is)}catch{Ya=!1}var ws=null,no=null,dn=null;function yr(){if(dn)return dn;var i,o=no,c=o.length,d,v="value"in ws?ws.value:ws.textContent,w=v.length;for(i=0;i<c&&o[i]===v[i];i++);var M=c-i;for(d=1;d<=M&&o[c-d]===v[w-d];d++);return dn=v.slice(i,1<d?1-d:void 0)}function Xa(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Qa(){return!0}function Tf(){return!1}function si(i){function o(c,d,v,w,M){this._reactName=c,this._targetInst=v,this.type=d,this.nativeEvent=w,this.target=M,this.currentTarget=null;for(var H in i)i.hasOwnProperty(H)&&(c=i[H],this[H]=c?c(w):w[H]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Qa:Tf,this.isPropagationStopped=Tf,this}return _(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Qa)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Qa)},persist:function(){},isPersistent:Qa}),o}var Ys={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kl=si(Ys),qo=_({},Ys,{view:0,detail:0}),_e=si(qo),Eu,bi,Xs,$a=_({},qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Du,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Xs&&(Xs&&i.type==="mousemove"?(Eu=i.screenX-Xs.screenX,bi=i.screenY-Xs.screenY):bi=Eu=0,Xs=i),Eu)},movementY:function(i){return"movementY"in i?i.movementY:bi}}),Af=si($a),Cu=_({},$a,{dataTransfer:0}),Dm=si(Cu),Ef=_({},qo,{relatedTarget:0}),Lu=si(Ef),Rm=_({},Ys,{animationName:0,elapsedTime:0,pseudoElement:0}),Mu=si(Rm),Im=_({},Ys,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),xs=si(Im),Nm=_({},Ys,{data:0}),ku=si(Nm),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ou(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Lf[i])?!!o[i]:!1}function Du(){return Ou}var Mf=_({},qo,{key:function(i){if(i.key){var o=vr[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Xa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Cf[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Du,charCode:function(i){return i.type==="keypress"?Xa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Xa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),kf=si(Mf),Pm=_({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Of=si(Pm),Ru=_({},qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Du}),zm=si(Ru),Df=_({},Ys,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rf=si(Df),Jl=_({},$a,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),io=si(Jl),Um=_({},Ys,{newState:0,oldState:0}),Ka=si(Um),Ii=[9,13,27,32],tc=ns&&"CompositionEvent"in window,Go=null;ns&&"documentMode"in document&&(Go=document.documentMode);var Bm=ns&&"TextEvent"in window&&!Go,ec=ns&&(!tc||Go&&8<Go&&11>=Go),nc=" ",If=!1;function Nf(i,o){switch(i){case"keyup":return Ii.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Iu(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Zo=!1;function ss(i,o){switch(i){case"compositionend":return Iu(o);case"keypress":return o.which!==32?null:(If=!0,nc);case"textInput":return i=o.data,i===nc&&If?null:i;default:return null}}function Wo(i,o){if(Zo)return i==="compositionend"||!tc&&Nf(i,o)?(i=yr(),dn=no=ws=null,Zo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ec&&o.locale!=="ko"?null:o.data;default:return null}}var Hm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ss(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Hm[i.type]:o==="textarea"}function Pf(i,o,c,d){jo?Jt?Jt.push(d):Jt=[d]:jo=d,o=Ed(o,"onChange"),0<o.length&&(c=new Kl("onChange","change",null,c,d),i.push({event:c,listeners:o}))}var Ts=null,Ja=null;function tl(i){$w(i,0)}function el(i){var o=mr(i);if(an(o))return i}function nl(i,o){if(i==="change")return o}var zf=!1;if(ns){var As;if(ns){var Fo="oninput"in document;if(!Fo){var Uf=document.createElement("div");Uf.setAttribute("oninput","return;"),Fo=typeof Uf.oninput=="function"}As=Fo}else As=!1;zf=As&&(!document.documentMode||9<document.documentMode)}function ic(){Ts&&(Ts.detachEvent("onpropertychange",Bf),Ja=Ts=null)}function Bf(i){if(i.propertyName==="value"&&el(Ja)){var o=[];Pf(o,Ja,i,Fa(i)),Au(tl,o)}}function Qs(i,o,c){i==="focusin"?(ic(),Ts=o,Ja=c,Ts.attachEvent("onpropertychange",Bf)):i==="focusout"&&ic()}function Vm(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return el(Ja)}function Yo(i,o){if(i==="click")return el(o)}function jm(i,o){if(i==="input"||i==="change")return el(o)}function $s(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Yn=typeof Object.is=="function"?Object.is:$s;function Xo(i,o){if(Yn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var v=c[d];if(!ue.call(o,v)||!Yn(i[v],o[v]))return!1}return!0}function sc(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function il(i,o){var c=sc(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=o&&d>=o)return{node:c,offset:o-i};i=d}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=sc(c)}}function rc(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?rc(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function sl(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Uo(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=Uo(i.document)}return o}function br(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var oc=ns&&"documentMode"in document&&11>=document.documentMode,wr=null,ac=null,rl=null,Qo=!1;function Hf(i,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Qo||wr==null||wr!==Uo(d)||(d=wr,"selectionStart"in d&&br(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),rl&&Xo(rl,d)||(rl=d,d=Ed(ac,"onSelect"),0<d.length&&(o=new Kl("onSelect","select",null,o,c),i.push({event:o,listeners:d}),o.target=wr)))}function xr(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var $o={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionrun:xr("Transition","TransitionRun"),transitionstart:xr("Transition","TransitionStart"),transitioncancel:xr("Transition","TransitionCancel"),transitionend:xr("Transition","TransitionEnd")},lc={},Vf={};ns&&(Vf=document.createElement("div").style,"AnimationEvent"in window||(delete $o.animationend.animation,delete $o.animationiteration.animation,delete $o.animationstart.animation),"TransitionEvent"in window||delete $o.transitionend.transition);function Xn(i){if(lc[i])return lc[i];if(!$o[i])return i;var o=$o[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in Vf)return lc[i]=o[c];return i}var ol=Xn("animationend"),jf=Xn("animationiteration"),al=Xn("animationstart"),qm=Xn("transitionrun"),qf=Xn("transitionstart"),Gm=Xn("transitioncancel"),Ko=Xn("transitionend"),Gf=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sr.push("scrollEnd");function Ni(i,o){Gf.set(i,o),Jr(o,[i])}var ll=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Pi=[],ui=0,cc=0;function cl(){for(var i=ui,o=cc=ui=0;o<i;){var c=Pi[o];Pi[o++]=null;var d=Pi[o];Pi[o++]=null;var v=Pi[o];Pi[o++]=null;var w=Pi[o];if(Pi[o++]=null,d!==null&&v!==null){var M=d.pending;M===null?v.next=v:(v.next=M.next,M.next=v),d.pending=v}w!==0&&Jo(c,v,w)}}function Tr(i,o,c,d){Pi[ui++]=i,Pi[ui++]=o,Pi[ui++]=c,Pi[ui++]=d,cc|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Nu(i,o,c,d){return Tr(i,o,c,d),ul(i)}function Es(i,o){return Tr(i,null,null,o),ul(i)}function Jo(i,o,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var v=!1,w=i.return;w!==null;)w.childLanes|=c,d=w.alternate,d!==null&&(d.childLanes|=c),w.tag===22&&(i=w.stateNode,i===null||i._visibility&1||(v=!0)),i=w,w=w.return;return i.tag===3?(w=i.stateNode,v&&o!==null&&(v=31-ii(c),i=w.hiddenUpdates,d=i[v],d===null?i[v]=[o]:d.push(o),o.lane=c|536870912),w):null}function ul(i){if(50<oh)throw oh=0,W_=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var so={};function Zm(i,o,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hi(i,o,c,d){return new Zm(i,o,c,d)}function uc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Cs(i,o){var c=i.alternate;return c===null?(c=hi(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function Pu(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function hl(i,o,c,d,v,w){var M=0;if(d=i,typeof i=="function")uc(i)&&(M=1);else if(typeof i=="string")M=lC(i,c,mt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case q:return i=hi(31,c,o,v),i.elementType=q,i.lanes=w,i;case A:return ro(c.children,v,w,o);case E:M=8,v|=24;break;case R:return i=hi(12,c,o,v|2),i.elementType=R,i.lanes=w,i;case N:return i=hi(13,c,o,v),i.elementType=N,i.lanes=w,i;case j:return i=hi(19,c,o,v),i.elementType=j,i.lanes=w,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:M=10;break t;case z:M=9;break t;case $:M=11;break t;case F:M=14;break t;case G:M=16,d=null;break t}M=29,c=Error(s(130,i===null?"null":typeof i,"")),d=null}return o=hi(M,c,o,v),o.elementType=i,o.type=d,o.lanes=w,o}function ro(i,o,c,d){return i=hi(7,i,d,o),i.lanes=c,i}function hc(i,o,c){return i=hi(6,i,null,o),i.lanes=c,i}function zu(i){var o=hi(18,null,null,0);return o.stateNode=i,o}function Uu(i,o,c){return o=hi(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var l=new WeakMap;function f(i,o){if(typeof i=="object"&&i!==null){var c=l.get(i);return c!==void 0?c:(o={value:i,source:o,stack:Ee(o)},l.set(i,o),o)}return{value:i,source:o,stack:Ee(o)}}var g=[],T=0,C=null,B=0,J=[],ot=0,ft=null,St=1,Rt="";function Xt(i,o){g[T++]=B,g[T++]=C,C=i,B=o}function le(i,o,c){J[ot++]=St,J[ot++]=Rt,J[ot++]=ft,ft=i;var d=St;i=Rt;var v=32-ii(d)-1;d&=~(1<<v),c+=1;var w=32-ii(o)+v;if(30<w){var M=v-v%5;w=(d&(1<<M)-1).toString(32),d>>=M,v-=M,St=1<<32-ii(o)+v|c<<v|d,Rt=w+i}else St=1<<w|c<<v|d,Rt=i}function Hn(i){i.return!==null&&(Xt(i,1),le(i,1,0))}function pn(i){for(;i===C;)C=g[--T],g[T]=null,B=g[--T],g[T]=null;for(;i===ft;)ft=J[--ot],J[ot]=null,Rt=J[--ot],J[ot]=null,St=J[--ot],J[ot]=null}function wi(i,o){J[ot++]=St,J[ot++]=Rt,J[ot++]=ft,St=o.id,Rt=o.overflow,ft=i}var Me=null,ke=null,de=!1,Ar=null,zi=!1,fc=Error(s(519));function Er(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fl(f(o,i)),fc}function Bu(i){var o=i.stateNode,c=i.type,d=i.memoizedProps;switch(o[Ln]=i,o[Fn]=d,c){case"dialog":me("cancel",o),me("close",o);break;case"iframe":case"object":case"embed":me("load",o);break;case"video":case"audio":for(c=0;c<lh.length;c++)me(lh[c],o);break;case"source":me("error",o);break;case"img":case"image":case"link":me("error",o),me("load",o);break;case"details":me("toggle",o);break;case"input":me("invalid",o),Za(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":me("invalid",o);break;case"textarea":me("invalid",o),Bo(o,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||e1(o.textContent,c)?(d.popover!=null&&(me("beforetoggle",o),me("toggle",o)),d.onScroll!=null&&me("scroll",o),d.onScrollEnd!=null&&me("scrollend",o),d.onClick!=null&&(o.onclick=Ri),o=!0):o=!1,o||Er(i,!0)}function hn(i){for(Me=i.return;Me;)switch(Me.tag){case 5:case 31:case 13:zi=!1;return;case 27:case 3:zi=!0;return;default:Me=Me.return}}function Ks(i){if(i!==Me)return!1;if(!de)return hn(i),de=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||ag(i.type,i.memoizedProps)),c=!c),c&&ke&&Er(i),hn(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ke=u1(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ke=u1(i)}else o===27?(o=ke,da(i.type)?(i=fg,fg=null,ke=i):ke=o):ke=Me?Ms(i.stateNode.nextSibling):null;return!0}function oo(){ke=Me=null,de=!1}function Hu(){var i=Ar;return i!==null&&(Vi===null?Vi=i:Vi.push.apply(Vi,i),Ar=null),i}function fl(i){Ar===null?Ar=[i]:Ar.push(i)}var dl=I(null),Cr=null,Js=null;function ta(i,o,c){at(dl,o._currentValue),o._currentValue=c}function ao(i){i._currentValue=dl.current,Y(dl)}function Wm(i,o,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===c)break;i=i.return}}function Fm(i,o,c,d){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var w=v.dependencies;if(w!==null){var M=v.child;w=w.firstContext;t:for(;w!==null;){var H=w;w=v;for(var tt=0;tt<o.length;tt++)if(H.context===o[tt]){w.lanes|=c,H=w.alternate,H!==null&&(H.lanes|=c),Wm(w.return,c,i),d||(M=null);break t}w=H.next}}else if(v.tag===18){if(M=v.return,M===null)throw Error(s(341));M.lanes|=c,w=M.alternate,w!==null&&(w.lanes|=c),Wm(M,c,i),M=null}else M=v.child;if(M!==null)M.return=v;else for(M=v;M!==null;){if(M===i){M=null;break}if(v=M.sibling,v!==null){v.return=M.return,M=v;break}M=M.return}v=M}}function dc(i,o,c,d){i=null;for(var v=o,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var M=v.alternate;if(M===null)throw Error(s(387));if(M=M.memoizedProps,M!==null){var H=v.type;Yn(v.pendingProps.value,M.value)||(i!==null?i.push(H):i=[H])}}else if(v===kt.current){if(M=v.alternate,M===null)throw Error(s(387));M.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(dh):i=[dh])}v=v.return}i!==null&&Fm(o,i,c,d),o.flags|=262144}function Zf(i){for(i=i.firstContext;i!==null;){if(!Yn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function pl(i){Cr=i,Js=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function ri(i){return Hv(Cr,i)}function Wf(i,o){return Cr===null&&pl(i),Hv(i,o)}function Hv(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Js===null){if(i===null)throw Error(s(308));Js=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Js=Js.next=o;return c}var sE=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},rE=n.unstable_scheduleCallback,oE=n.unstable_NormalPriority,kn={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ym(){return{controller:new sE,data:new Map,refCount:0}}function Vu(i){i.refCount--,i.refCount===0&&rE(oE,function(){i.controller.abort()})}var ju=null,Xm=0,pc=0,mc=null;function aE(i,o){if(ju===null){var c=ju=[];Xm=0,pc=K_(),mc={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Xm++,o.then(Vv,Vv),o}function Vv(){if(--Xm===0&&ju!==null){mc!==null&&(mc.status="fulfilled");var i=ju;ju=null,pc=0,mc=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function lE(i,o){var c=[],d={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return i.then(function(){d.status="fulfilled",d.value=o;for(var v=0;v<c.length;v++)(0,c[v])(o)},function(v){for(d.status="rejected",d.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),d}var jv=P.S;P.S=function(i,o){Aw=xn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&aE(i,o),jv!==null&&jv(i,o)};var ml=I(null);function Qm(){var i=ml.current;return i!==null?i:Fe.pooledCache}function Ff(i,o){o===null?at(ml,ml.current):at(ml,o.pool)}function qv(){var i=Qm();return i===null?null:{parent:kn._currentValue,pool:i}}var _c=Error(s(460)),$m=Error(s(474)),Yf=Error(s(542)),Xf={then:function(){}};function Gv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Zv(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(Ri,Ri),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Fv(i),i;default:if(typeof o.status=="string")o.then(Ri,Ri);else{if(i=Fe,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(d){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=d}},function(d){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Fv(i),i}throw gl=o,_c}}function _l(i){try{var o=i._init;return o(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(gl=c,_c):c}}var gl=null;function Wv(){if(gl===null)throw Error(s(459));var i=gl;return gl=null,i}function Fv(i){if(i===_c||i===Yf)throw Error(s(483))}var gc=null,qu=0;function Qf(i){var o=qu;return qu+=1,gc===null&&(gc=[]),Zv(gc,i,o)}function Gu(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function $f(i,o){throw o.$$typeof===b?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Yv(i){function o(rt,st){if(i){var lt=rt.deletions;lt===null?(rt.deletions=[st],rt.flags|=16):lt.push(st)}}function c(rt,st){if(!i)return null;for(;st!==null;)o(rt,st),st=st.sibling;return null}function d(rt){for(var st=new Map;rt!==null;)rt.key!==null?st.set(rt.key,rt):st.set(rt.index,rt),rt=rt.sibling;return st}function v(rt,st){return rt=Cs(rt,st),rt.index=0,rt.sibling=null,rt}function w(rt,st,lt){return rt.index=lt,i?(lt=rt.alternate,lt!==null?(lt=lt.index,lt<st?(rt.flags|=67108866,st):lt):(rt.flags|=67108866,st)):(rt.flags|=1048576,st)}function M(rt){return i&&rt.alternate===null&&(rt.flags|=67108866),rt}function H(rt,st,lt,xt){return st===null||st.tag!==6?(st=hc(lt,rt.mode,xt),st.return=rt,st):(st=v(st,lt),st.return=rt,st)}function tt(rt,st,lt,xt){var $t=lt.type;return $t===A?vt(rt,st,lt.props.children,xt,lt.key):st!==null&&(st.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===G&&_l($t)===st.type)?(st=v(st,lt.props),Gu(st,lt),st.return=rt,st):(st=hl(lt.type,lt.key,lt.props,null,rt.mode,xt),Gu(st,lt),st.return=rt,st)}function ht(rt,st,lt,xt){return st===null||st.tag!==4||st.stateNode.containerInfo!==lt.containerInfo||st.stateNode.implementation!==lt.implementation?(st=Uu(lt,rt.mode,xt),st.return=rt,st):(st=v(st,lt.children||[]),st.return=rt,st)}function vt(rt,st,lt,xt,$t){return st===null||st.tag!==7?(st=ro(lt,rt.mode,xt,$t),st.return=rt,st):(st=v(st,lt),st.return=rt,st)}function Tt(rt,st,lt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return st=hc(""+st,rt.mode,lt),st.return=rt,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case S:return lt=hl(st.type,st.key,st.props,null,rt.mode,lt),Gu(lt,st),lt.return=rt,lt;case x:return st=Uu(st,rt.mode,lt),st.return=rt,st;case G:return st=_l(st),Tt(rt,st,lt)}if(Z(st)||et(st))return st=ro(st,rt.mode,lt,null),st.return=rt,st;if(typeof st.then=="function")return Tt(rt,Qf(st),lt);if(st.$$typeof===O)return Tt(rt,Wf(rt,st),lt);$f(rt,st)}return null}function dt(rt,st,lt,xt){var $t=st!==null?st.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return $t!==null?null:H(rt,st,""+lt,xt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case S:return lt.key===$t?tt(rt,st,lt,xt):null;case x:return lt.key===$t?ht(rt,st,lt,xt):null;case G:return lt=_l(lt),dt(rt,st,lt,xt)}if(Z(lt)||et(lt))return $t!==null?null:vt(rt,st,lt,xt,null);if(typeof lt.then=="function")return dt(rt,st,Qf(lt),xt);if(lt.$$typeof===O)return dt(rt,st,Wf(rt,lt),xt);$f(rt,lt)}return null}function pt(rt,st,lt,xt,$t){if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return rt=rt.get(lt)||null,H(st,rt,""+xt,$t);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case S:return rt=rt.get(xt.key===null?lt:xt.key)||null,tt(st,rt,xt,$t);case x:return rt=rt.get(xt.key===null?lt:xt.key)||null,ht(st,rt,xt,$t);case G:return xt=_l(xt),pt(rt,st,lt,xt,$t)}if(Z(xt)||et(xt))return rt=rt.get(lt)||null,vt(st,rt,xt,$t,null);if(typeof xt.then=="function")return pt(rt,st,lt,Qf(xt),$t);if(xt.$$typeof===O)return pt(rt,st,lt,Wf(st,xt),$t);$f(st,xt)}return null}function Ht(rt,st,lt,xt){for(var $t=null,Oe=null,Wt=st,ce=st=0,ye=null;Wt!==null&&ce<lt.length;ce++){Wt.index>ce?(ye=Wt,Wt=null):ye=Wt.sibling;var De=dt(rt,Wt,lt[ce],xt);if(De===null){Wt===null&&(Wt=ye);break}i&&Wt&&De.alternate===null&&o(rt,Wt),st=w(De,st,ce),Oe===null?$t=De:Oe.sibling=De,Oe=De,Wt=ye}if(ce===lt.length)return c(rt,Wt),de&&Xt(rt,ce),$t;if(Wt===null){for(;ce<lt.length;ce++)Wt=Tt(rt,lt[ce],xt),Wt!==null&&(st=w(Wt,st,ce),Oe===null?$t=Wt:Oe.sibling=Wt,Oe=Wt);return de&&Xt(rt,ce),$t}for(Wt=d(Wt);ce<lt.length;ce++)ye=pt(Wt,rt,ce,lt[ce],xt),ye!==null&&(i&&ye.alternate!==null&&Wt.delete(ye.key===null?ce:ye.key),st=w(ye,st,ce),Oe===null?$t=ye:Oe.sibling=ye,Oe=ye);return i&&Wt.forEach(function(ya){return o(rt,ya)}),de&&Xt(rt,ce),$t}function Kt(rt,st,lt,xt){if(lt==null)throw Error(s(151));for(var $t=null,Oe=null,Wt=st,ce=st=0,ye=null,De=lt.next();Wt!==null&&!De.done;ce++,De=lt.next()){Wt.index>ce?(ye=Wt,Wt=null):ye=Wt.sibling;var ya=dt(rt,Wt,De.value,xt);if(ya===null){Wt===null&&(Wt=ye);break}i&&Wt&&ya.alternate===null&&o(rt,Wt),st=w(ya,st,ce),Oe===null?$t=ya:Oe.sibling=ya,Oe=ya,Wt=ye}if(De.done)return c(rt,Wt),de&&Xt(rt,ce),$t;if(Wt===null){for(;!De.done;ce++,De=lt.next())De=Tt(rt,De.value,xt),De!==null&&(st=w(De,st,ce),Oe===null?$t=De:Oe.sibling=De,Oe=De);return de&&Xt(rt,ce),$t}for(Wt=d(Wt);!De.done;ce++,De=lt.next())De=pt(Wt,rt,ce,De.value,xt),De!==null&&(i&&De.alternate!==null&&Wt.delete(De.key===null?ce:De.key),st=w(De,st,ce),Oe===null?$t=De:Oe.sibling=De,Oe=De);return i&&Wt.forEach(function(vC){return o(rt,vC)}),de&&Xt(rt,ce),$t}function Ge(rt,st,lt,xt){if(typeof lt=="object"&&lt!==null&&lt.type===A&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case S:t:{for(var $t=lt.key;st!==null;){if(st.key===$t){if($t=lt.type,$t===A){if(st.tag===7){c(rt,st.sibling),xt=v(st,lt.props.children),xt.return=rt,rt=xt;break t}}else if(st.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===G&&_l($t)===st.type){c(rt,st.sibling),xt=v(st,lt.props),Gu(xt,lt),xt.return=rt,rt=xt;break t}c(rt,st);break}else o(rt,st);st=st.sibling}lt.type===A?(xt=ro(lt.props.children,rt.mode,xt,lt.key),xt.return=rt,rt=xt):(xt=hl(lt.type,lt.key,lt.props,null,rt.mode,xt),Gu(xt,lt),xt.return=rt,rt=xt)}return M(rt);case x:t:{for($t=lt.key;st!==null;){if(st.key===$t)if(st.tag===4&&st.stateNode.containerInfo===lt.containerInfo&&st.stateNode.implementation===lt.implementation){c(rt,st.sibling),xt=v(st,lt.children||[]),xt.return=rt,rt=xt;break t}else{c(rt,st);break}else o(rt,st);st=st.sibling}xt=Uu(lt,rt.mode,xt),xt.return=rt,rt=xt}return M(rt);case G:return lt=_l(lt),Ge(rt,st,lt,xt)}if(Z(lt))return Ht(rt,st,lt,xt);if(et(lt)){if($t=et(lt),typeof $t!="function")throw Error(s(150));return lt=$t.call(lt),Kt(rt,st,lt,xt)}if(typeof lt.then=="function")return Ge(rt,st,Qf(lt),xt);if(lt.$$typeof===O)return Ge(rt,st,Wf(rt,lt),xt);$f(rt,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,st!==null&&st.tag===6?(c(rt,st.sibling),xt=v(st,lt),xt.return=rt,rt=xt):(c(rt,st),xt=hc(lt,rt.mode,xt),xt.return=rt,rt=xt),M(rt)):c(rt,st)}return function(rt,st,lt,xt){try{qu=0;var $t=Ge(rt,st,lt,xt);return gc=null,$t}catch(Wt){if(Wt===_c||Wt===Yf)throw Wt;var Oe=hi(29,Wt,null,rt.mode);return Oe.lanes=xt,Oe.return=rt,Oe}}}var yl=Yv(!0),Xv=Yv(!1),ea=!1;function Km(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jm(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function na(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ia(i,o,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Ie&2)!==0){var v=d.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),d.pending=o,o=ul(i),Jo(i,null,c),o}return Tr(i,d,o,c),ul(i)}function Zu(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=i.pendingLanes,c|=d,o.lanes=c,on(i,c)}}function t_(i,o){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var v=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var M={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?v=w=M:w=w.next=M,c=c.next}while(c!==null);w===null?v=w=o:w=w.next=o}else v=w=o;c={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var e_=!1;function Wu(){if(e_){var i=mc;if(i!==null)throw i}}function Fu(i,o,c,d){e_=!1;var v=i.updateQueue;ea=!1;var w=v.firstBaseUpdate,M=v.lastBaseUpdate,H=v.shared.pending;if(H!==null){v.shared.pending=null;var tt=H,ht=tt.next;tt.next=null,M===null?w=ht:M.next=ht,M=tt;var vt=i.alternate;vt!==null&&(vt=vt.updateQueue,H=vt.lastBaseUpdate,H!==M&&(H===null?vt.firstBaseUpdate=ht:H.next=ht,vt.lastBaseUpdate=tt))}if(w!==null){var Tt=v.baseState;M=0,vt=ht=tt=null,H=w;do{var dt=H.lane&-536870913,pt=dt!==H.lane;if(pt?(ge&dt)===dt:(d&dt)===dt){dt!==0&&dt===pc&&(e_=!0),vt!==null&&(vt=vt.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});t:{var Ht=i,Kt=H;dt=o;var Ge=c;switch(Kt.tag){case 1:if(Ht=Kt.payload,typeof Ht=="function"){Tt=Ht.call(Ge,Tt,dt);break t}Tt=Ht;break t;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=Kt.payload,dt=typeof Ht=="function"?Ht.call(Ge,Tt,dt):Ht,dt==null)break t;Tt=_({},Tt,dt);break t;case 2:ea=!0}}dt=H.callback,dt!==null&&(i.flags|=64,pt&&(i.flags|=8192),pt=v.callbacks,pt===null?v.callbacks=[dt]:pt.push(dt))}else pt={lane:dt,tag:H.tag,payload:H.payload,callback:H.callback,next:null},vt===null?(ht=vt=pt,tt=Tt):vt=vt.next=pt,M|=dt;if(H=H.next,H===null){if(H=v.shared.pending,H===null)break;pt=H,H=pt.next,pt.next=null,v.lastBaseUpdate=pt,v.shared.pending=null}}while(!0);vt===null&&(tt=Tt),v.baseState=tt,v.firstBaseUpdate=ht,v.lastBaseUpdate=vt,w===null&&(v.shared.lanes=0),la|=M,i.lanes=M,i.memoizedState=Tt}}function Qv(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function $v(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)Qv(c[i],o)}var yc=I(null),Kf=I(0);function Kv(i,o){i=go,at(Kf,i),at(yc,o),go=i|o.baseLanes}function n_(){at(Kf,go),at(yc,yc.current)}function i_(){go=Kf.current,Y(yc),Y(Kf)}var rs=I(null),Ls=null;function sa(i){var o=i.alternate;at(Tn,Tn.current&1),at(rs,i),Ls===null&&(o===null||yc.current!==null||o.memoizedState!==null)&&(Ls=i)}function s_(i){at(Tn,Tn.current),at(rs,i),Ls===null&&(Ls=i)}function Jv(i){i.tag===22?(at(Tn,Tn.current),at(rs,i),Ls===null&&(Ls=i)):ra()}function ra(){at(Tn,Tn.current),at(rs,rs.current)}function os(i){Y(rs),Ls===i&&(Ls=null),Y(Tn)}var Tn=I(0);function Jf(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||ug(c)||hg(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var lo=0,ae=null,je=null,On=null,td=!1,vc=!1,vl=!1,ed=0,Yu=0,bc=null,cE=0;function mn(){throw Error(s(321))}function r_(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Yn(i[c],o[c]))return!1;return!0}function o_(i,o,c,d,v,w){return lo=w,ae=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,P.H=i===null||i.memoizedState===null?Pb:w_,vl=!1,w=c(d,v),vl=!1,vc&&(w=eb(o,c,d,v)),tb(i),w}function tb(i){P.H=$u;var o=je!==null&&je.next!==null;if(lo=0,On=je=ae=null,td=!1,Yu=0,bc=null,o)throw Error(s(300));i===null||Dn||(i=i.dependencies,i!==null&&Zf(i)&&(Dn=!0))}function eb(i,o,c,d){ae=i;var v=0;do{if(vc&&(bc=null),Yu=0,vc=!1,25<=v)throw Error(s(301));if(v+=1,On=je=null,i.updateQueue!=null){var w=i.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}P.H=zb,w=o(c,d)}while(vc);return w}function uE(){var i=P.H,o=i.useState()[0];return o=typeof o.then=="function"?Xu(o):o,i=i.useState()[0],(je!==null?je.memoizedState:null)!==i&&(ae.flags|=1024),o}function a_(){var i=ed!==0;return ed=0,i}function l_(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function c_(i){if(td){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}td=!1}lo=0,On=je=ae=null,vc=!1,Yu=ed=0,bc=null}function xi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return On===null?ae.memoizedState=On=i:On=On.next=i,On}function An(){if(je===null){var i=ae.alternate;i=i!==null?i.memoizedState:null}else i=je.next;var o=On===null?ae.memoizedState:On.next;if(o!==null)On=o,je=i;else{if(i===null)throw ae.alternate===null?Error(s(467)):Error(s(310));je=i,i={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},On===null?ae.memoizedState=On=i:On=On.next=i}return On}function nd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xu(i){var o=Yu;return Yu+=1,bc===null&&(bc=[]),i=Zv(bc,i,o),o=ae,(On===null?o.memoizedState:On.next)===null&&(o=o.alternate,P.H=o===null||o.memoizedState===null?Pb:w_),i}function id(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Xu(i);if(i.$$typeof===O)return ri(i)}throw Error(s(438,String(i)))}function u_(i){var o=null,c=ae.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=ae.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=nd(),ae.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),d=0;d<i;d++)c[d]=W;return o.index++,c}function co(i,o){return typeof o=="function"?o(i):o}function sd(i){var o=An();return h_(o,je,i)}function h_(i,o,c){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=c;var v=i.baseQueue,w=d.pending;if(w!==null){if(v!==null){var M=v.next;v.next=w.next,w.next=M}o.baseQueue=v=w,d.pending=null}if(w=i.baseState,v===null)i.memoizedState=w;else{o=v.next;var H=M=null,tt=null,ht=o,vt=!1;do{var Tt=ht.lane&-536870913;if(Tt!==ht.lane?(ge&Tt)===Tt:(lo&Tt)===Tt){var dt=ht.revertLane;if(dt===0)tt!==null&&(tt=tt.next={lane:0,revertLane:0,gesture:null,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null}),Tt===pc&&(vt=!0);else if((lo&dt)===dt){ht=ht.next,dt===pc&&(vt=!0);continue}else Tt={lane:0,revertLane:ht.revertLane,gesture:null,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null},tt===null?(H=tt=Tt,M=w):tt=tt.next=Tt,ae.lanes|=dt,la|=dt;Tt=ht.action,vl&&c(w,Tt),w=ht.hasEagerState?ht.eagerState:c(w,Tt)}else dt={lane:Tt,revertLane:ht.revertLane,gesture:ht.gesture,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null},tt===null?(H=tt=dt,M=w):tt=tt.next=dt,ae.lanes|=Tt,la|=Tt;ht=ht.next}while(ht!==null&&ht!==o);if(tt===null?M=w:tt.next=H,!Yn(w,i.memoizedState)&&(Dn=!0,vt&&(c=mc,c!==null)))throw c;i.memoizedState=w,i.baseState=M,i.baseQueue=tt,d.lastRenderedState=w}return v===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function f_(i){var o=An(),c=o.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var d=c.dispatch,v=c.pending,w=o.memoizedState;if(v!==null){c.pending=null;var M=v=v.next;do w=i(w,M.action),M=M.next;while(M!==v);Yn(w,o.memoizedState)||(Dn=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),c.lastRenderedState=w}return[w,d]}function nb(i,o,c){var d=ae,v=An(),w=de;if(w){if(c===void 0)throw Error(s(407));c=c()}else c=o();var M=!Yn((je||v).memoizedState,c);if(M&&(v.memoizedState=c,Dn=!0),v=v.queue,m_(rb.bind(null,d,v,i),[i]),v.getSnapshot!==o||M||On!==null&&On.memoizedState.tag&1){if(d.flags|=2048,wc(9,{destroy:void 0},sb.bind(null,d,v,c,o),null),Fe===null)throw Error(s(349));w||(lo&127)!==0||ib(d,o,c)}return c}function ib(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=ae.updateQueue,o===null?(o=nd(),ae.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function sb(i,o,c,d){o.value=c,o.getSnapshot=d,ob(o)&&ab(i)}function rb(i,o,c){return c(function(){ob(o)&&ab(i)})}function ob(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Yn(i,c)}catch{return!0}}function ab(i){var o=Es(i,2);o!==null&&ji(o,i,2)}function d_(i){var o=xi();if(typeof i=="function"){var c=i;if(i=c(),vl){Ji(!0);try{c()}finally{Ji(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:i},o}function lb(i,o,c,d){return i.baseState=c,h_(i,je,typeof d=="function"?d:co)}function hE(i,o,c,d,v){if(ad(i))throw Error(s(485));if(i=o.action,i!==null){var w={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){w.listeners.push(M)}};P.T!==null?c(!0):w.isTransition=!1,d(w),c=o.pending,c===null?(w.next=o.pending=w,cb(o,w)):(w.next=c.next,o.pending=c.next=w)}}function cb(i,o){var c=o.action,d=o.payload,v=i.state;if(o.isTransition){var w=P.T,M={};P.T=M;try{var H=c(v,d),tt=P.S;tt!==null&&tt(M,H),ub(i,o,H)}catch(ht){p_(i,o,ht)}finally{w!==null&&M.types!==null&&(w.types=M.types),P.T=w}}else try{w=c(v,d),ub(i,o,w)}catch(ht){p_(i,o,ht)}}function ub(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){hb(i,o,d)},function(d){return p_(i,o,d)}):hb(i,o,c)}function hb(i,o,c){o.status="fulfilled",o.value=c,fb(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,cb(i,c)))}function p_(i,o,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,fb(o),o=o.next;while(o!==d)}i.action=null}function fb(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function db(i,o){return o}function pb(i,o){if(de){var c=Fe.formState;if(c!==null){t:{var d=ae;if(de){if(ke){e:{for(var v=ke,w=zi;v.nodeType!==8;){if(!w){v=null;break e}if(v=Ms(v.nextSibling),v===null){v=null;break e}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){ke=Ms(v.nextSibling),d=v.data==="F!";break t}}Er(d)}d=!1}d&&(o=c[0])}}return c=xi(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:db,lastRenderedState:o},c.queue=d,c=Rb.bind(null,ae,d),d.dispatch=c,d=d_(!1),w=b_.bind(null,ae,!1,d.queue),d=xi(),v={state:o,dispatch:null,action:i,pending:null},d.queue=v,c=hE.bind(null,ae,v,w,c),v.dispatch=c,d.memoizedState=i,[o,c,!1]}function mb(i){var o=An();return _b(o,je,i)}function _b(i,o,c){if(o=h_(i,o,db)[0],i=sd(co)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Xu(o)}catch(M){throw M===_c?Yf:M}else d=o;o=An();var v=o.queue,w=v.dispatch;return c!==o.memoizedState&&(ae.flags|=2048,wc(9,{destroy:void 0},fE.bind(null,v,c),null)),[d,w,i]}function fE(i,o){i.action=o}function gb(i){var o=An(),c=je;if(c!==null)return _b(o,c,i);An(),o=o.memoizedState,c=An();var d=c.queue.dispatch;return c.memoizedState=i,[o,d,!1]}function wc(i,o,c,d){return i={tag:i,create:c,deps:d,inst:o,next:null},o=ae.updateQueue,o===null&&(o=nd(),ae.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,o.lastEffect=i),i}function yb(){return An().memoizedState}function rd(i,o,c,d){var v=xi();ae.flags|=i,v.memoizedState=wc(1|o,{destroy:void 0},c,d===void 0?null:d)}function od(i,o,c,d){var v=An();d=d===void 0?null:d;var w=v.memoizedState.inst;je!==null&&d!==null&&r_(d,je.memoizedState.deps)?v.memoizedState=wc(o,w,c,d):(ae.flags|=i,v.memoizedState=wc(1|o,w,c,d))}function vb(i,o){rd(8390656,8,i,o)}function m_(i,o){od(2048,8,i,o)}function dE(i){ae.flags|=4;var o=ae.updateQueue;if(o===null)o=nd(),ae.updateQueue=o,o.events=[i];else{var c=o.events;c===null?o.events=[i]:c.push(i)}}function bb(i){var o=An().memoizedState;return dE({ref:o,nextImpl:i}),function(){if((Ie&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function wb(i,o){return od(4,2,i,o)}function xb(i,o){return od(4,4,i,o)}function Sb(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Tb(i,o,c){c=c!=null?c.concat([i]):null,od(4,4,Sb.bind(null,o,i),c)}function __(){}function Ab(i,o){var c=An();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&r_(o,d[1])?d[0]:(c.memoizedState=[i,o],i)}function Eb(i,o){var c=An();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&r_(o,d[1]))return d[0];if(d=i(),vl){Ji(!0);try{i()}finally{Ji(!1)}}return c.memoizedState=[d,o],d}function g_(i,o,c){return c===void 0||(lo&1073741824)!==0&&(ge&261930)===0?i.memoizedState=o:(i.memoizedState=c,i=Cw(),ae.lanes|=i,la|=i,c)}function Cb(i,o,c,d){return Yn(c,o)?c:yc.current!==null?(i=g_(i,c,d),Yn(i,o)||(Dn=!0),i):(lo&42)===0||(lo&1073741824)!==0&&(ge&261930)===0?(Dn=!0,i.memoizedState=c):(i=Cw(),ae.lanes|=i,la|=i,o)}function Lb(i,o,c,d,v){var w=U.p;U.p=w!==0&&8>w?w:8;var M=P.T,H={};P.T=H,b_(i,!1,o,c);try{var tt=v(),ht=P.S;if(ht!==null&&ht(H,tt),tt!==null&&typeof tt=="object"&&typeof tt.then=="function"){var vt=lE(tt,d);Qu(i,o,vt,cs(i))}else Qu(i,o,d,cs(i))}catch(Tt){Qu(i,o,{then:function(){},status:"rejected",reason:Tt},cs())}finally{U.p=w,M!==null&&H.types!==null&&(M.types=H.types),P.T=M}}function pE(){}function y_(i,o,c,d){if(i.tag!==5)throw Error(s(476));var v=Mb(i).queue;Lb(i,v,o,K,c===null?pE:function(){return kb(i),c(d)})}function Mb(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:K},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function kb(i){var o=Mb(i);o.next===null&&(o=i.alternate.memoizedState),Qu(i,o.next.queue,{},cs())}function v_(){return ri(dh)}function Ob(){return An().memoizedState}function Db(){return An().memoizedState}function mE(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=cs();i=na(c);var d=ia(o,i,c);d!==null&&(ji(d,o,c),Zu(d,o,c)),o={cache:Ym()},i.payload=o;return}o=o.return}}function _E(i,o,c){var d=cs();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ad(i)?Ib(o,c):(c=Nu(i,o,c,d),c!==null&&(ji(c,i,d),Nb(c,o,d)))}function Rb(i,o,c){var d=cs();Qu(i,o,c,d)}function Qu(i,o,c,d){var v={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(ad(i))Ib(o,v);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var M=o.lastRenderedState,H=w(M,c);if(v.hasEagerState=!0,v.eagerState=H,Yn(H,M))return Tr(i,o,v,0),Fe===null&&cl(),!1}catch{}if(c=Nu(i,o,v,d),c!==null)return ji(c,i,d),Nb(c,o,d),!0}return!1}function b_(i,o,c,d){if(d={lane:2,revertLane:K_(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},ad(i)){if(o)throw Error(s(479))}else o=Nu(i,c,d,2),o!==null&&ji(o,i,2)}function ad(i){var o=i.alternate;return i===ae||o!==null&&o===ae}function Ib(i,o){vc=td=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function Nb(i,o,c){if((c&4194048)!==0){var d=o.lanes;d&=i.pendingLanes,c|=d,o.lanes=c,on(i,c)}}var $u={readContext:ri,use:id,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useLayoutEffect:mn,useInsertionEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useSyncExternalStore:mn,useId:mn,useHostTransitionStatus:mn,useFormState:mn,useActionState:mn,useOptimistic:mn,useMemoCache:mn,useCacheRefresh:mn};$u.useEffectEvent=mn;var Pb={readContext:ri,use:id,useCallback:function(i,o){return xi().memoizedState=[i,o===void 0?null:o],i},useContext:ri,useEffect:vb,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,rd(4194308,4,Sb.bind(null,o,i),c)},useLayoutEffect:function(i,o){return rd(4194308,4,i,o)},useInsertionEffect:function(i,o){rd(4,2,i,o)},useMemo:function(i,o){var c=xi();o=o===void 0?null:o;var d=i();if(vl){Ji(!0);try{i()}finally{Ji(!1)}}return c.memoizedState=[d,o],d},useReducer:function(i,o,c){var d=xi();if(c!==void 0){var v=c(o);if(vl){Ji(!0);try{c(o)}finally{Ji(!1)}}}else v=o;return d.memoizedState=d.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},d.queue=i,i=i.dispatch=_E.bind(null,ae,i),[d.memoizedState,i]},useRef:function(i){var o=xi();return i={current:i},o.memoizedState=i},useState:function(i){i=d_(i);var o=i.queue,c=Rb.bind(null,ae,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:__,useDeferredValue:function(i,o){var c=xi();return g_(c,i,o)},useTransition:function(){var i=d_(!1);return i=Lb.bind(null,ae,i.queue,!0,!1),xi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var d=ae,v=xi();if(de){if(c===void 0)throw Error(s(407));c=c()}else{if(c=o(),Fe===null)throw Error(s(349));(ge&127)!==0||ib(d,o,c)}v.memoizedState=c;var w={value:c,getSnapshot:o};return v.queue=w,vb(rb.bind(null,d,w,i),[i]),d.flags|=2048,wc(9,{destroy:void 0},sb.bind(null,d,w,c,o),null),c},useId:function(){var i=xi(),o=Fe.identifierPrefix;if(de){var c=Rt,d=St;c=(d&~(1<<32-ii(d)-1)).toString(32)+c,o="_"+o+"R_"+c,c=ed++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=cE++,o="_"+o+"r_"+c.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:v_,useFormState:pb,useActionState:pb,useOptimistic:function(i){var o=xi();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=b_.bind(null,ae,!0,c),c.dispatch=o,[i,o]},useMemoCache:u_,useCacheRefresh:function(){return xi().memoizedState=mE.bind(null,ae)},useEffectEvent:function(i){var o=xi(),c={impl:i};return o.memoizedState=c,function(){if((Ie&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},w_={readContext:ri,use:id,useCallback:Ab,useContext:ri,useEffect:m_,useImperativeHandle:Tb,useInsertionEffect:wb,useLayoutEffect:xb,useMemo:Eb,useReducer:sd,useRef:yb,useState:function(){return sd(co)},useDebugValue:__,useDeferredValue:function(i,o){var c=An();return Cb(c,je.memoizedState,i,o)},useTransition:function(){var i=sd(co)[0],o=An().memoizedState;return[typeof i=="boolean"?i:Xu(i),o]},useSyncExternalStore:nb,useId:Ob,useHostTransitionStatus:v_,useFormState:mb,useActionState:mb,useOptimistic:function(i,o){var c=An();return lb(c,je,i,o)},useMemoCache:u_,useCacheRefresh:Db};w_.useEffectEvent=bb;var zb={readContext:ri,use:id,useCallback:Ab,useContext:ri,useEffect:m_,useImperativeHandle:Tb,useInsertionEffect:wb,useLayoutEffect:xb,useMemo:Eb,useReducer:f_,useRef:yb,useState:function(){return f_(co)},useDebugValue:__,useDeferredValue:function(i,o){var c=An();return je===null?g_(c,i,o):Cb(c,je.memoizedState,i,o)},useTransition:function(){var i=f_(co)[0],o=An().memoizedState;return[typeof i=="boolean"?i:Xu(i),o]},useSyncExternalStore:nb,useId:Ob,useHostTransitionStatus:v_,useFormState:gb,useActionState:gb,useOptimistic:function(i,o){var c=An();return je!==null?lb(c,je,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:u_,useCacheRefresh:Db};zb.useEffectEvent=bb;function x_(i,o,c,d){o=i.memoizedState,c=c(d,o),c=c==null?o:_({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var S_={enqueueSetState:function(i,o,c){i=i._reactInternals;var d=cs(),v=na(d);v.payload=o,c!=null&&(v.callback=c),o=ia(i,v,d),o!==null&&(ji(o,i,d),Zu(o,i,d))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var d=cs(),v=na(d);v.tag=1,v.payload=o,c!=null&&(v.callback=c),o=ia(i,v,d),o!==null&&(ji(o,i,d),Zu(o,i,d))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=cs(),d=na(c);d.tag=2,o!=null&&(d.callback=o),o=ia(i,d,c),o!==null&&(ji(o,i,c),Zu(o,i,c))}};function Ub(i,o,c,d,v,w,M){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,w,M):o.prototype&&o.prototype.isPureReactComponent?!Xo(c,d)||!Xo(v,w):!0}function Bb(i,o,c,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==i&&S_.enqueueReplaceState(o,o.state,null)}function bl(i,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(i=i.defaultProps){c===o&&(c=_({},c));for(var v in i)c[v]===void 0&&(c[v]=i[v])}return c}function Hb(i){ll(i)}function Vb(i){console.error(i)}function jb(i){ll(i)}function ld(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function qb(i,o,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function T_(i,o,c){return c=na(c),c.tag=3,c.payload={element:null},c.callback=function(){ld(i,o)},c}function Gb(i){return i=na(i),i.tag=3,i}function Zb(i,o,c,d){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var w=d.value;i.payload=function(){return v(w)},i.callback=function(){qb(o,c,d)}}var M=c.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(i.callback=function(){qb(o,c,d),typeof v!="function"&&(ca===null?ca=new Set([this]):ca.add(this));var H=d.stack;this.componentDidCatch(d.value,{componentStack:H!==null?H:""})})}function gE(i,o,c,d,v){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&dc(o,c,v,!0),c=rs.current,c!==null){switch(c.tag){case 31:case 13:return Ls===null?bd():c.alternate===null&&_n===0&&(_n=3),c.flags&=-257,c.flags|=65536,c.lanes=v,d===Xf?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),X_(i,d,v)),!1;case 22:return c.flags|=65536,d===Xf?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),X_(i,d,v)),!1}throw Error(s(435,c.tag))}return X_(i,d,v),bd(),!1}if(de)return o=rs.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,d!==fc&&(i=Error(s(422),{cause:d}),fl(f(i,c)))):(d!==fc&&(o=Error(s(423),{cause:d}),fl(f(o,c))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,d=f(d,c),v=T_(i.stateNode,d,v),t_(i,v),_n!==4&&(_n=2)),!1;var w=Error(s(520),{cause:d});if(w=f(w,c),rh===null?rh=[w]:rh.push(w),_n!==4&&(_n=2),o===null)return!0;d=f(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=v&-v,c.lanes|=i,i=T_(c.stateNode,d,i),t_(c,i),!1;case 1:if(o=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ca===null||!ca.has(w))))return c.flags|=65536,v&=-v,c.lanes|=v,v=Gb(v),Zb(v,i,c,d),t_(c,v),!1}c=c.return}while(c!==null);return!1}var A_=Error(s(461)),Dn=!1;function oi(i,o,c,d){o.child=i===null?Xv(o,null,c,d):yl(o,i.child,c,d)}function Wb(i,o,c,d,v){c=c.render;var w=o.ref;if("ref"in d){var M={};for(var H in d)H!=="ref"&&(M[H]=d[H])}else M=d;return pl(o),d=o_(i,o,c,M,w,v),H=a_(),i!==null&&!Dn?(l_(i,o,v),uo(i,o,v)):(de&&H&&Hn(o),o.flags|=1,oi(i,o,d,v),o.child)}function Fb(i,o,c,d,v){if(i===null){var w=c.type;return typeof w=="function"&&!uc(w)&&w.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=w,Yb(i,o,w,d,v)):(i=hl(c.type,null,d,o,o.mode,v),i.ref=o.ref,i.return=o,o.child=i)}if(w=i.child,!R_(i,v)){var M=w.memoizedProps;if(c=c.compare,c=c!==null?c:Xo,c(M,d)&&i.ref===o.ref)return uo(i,o,v)}return o.flags|=1,i=Cs(w,d),i.ref=o.ref,i.return=o,o.child=i}function Yb(i,o,c,d,v){if(i!==null){var w=i.memoizedProps;if(Xo(w,d)&&i.ref===o.ref)if(Dn=!1,o.pendingProps=d=w,R_(i,v))(i.flags&131072)!==0&&(Dn=!0);else return o.lanes=i.lanes,uo(i,o,v)}return E_(i,o,c,d,v)}function Xb(i,o,c,d){var v=d.children,w=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,i!==null){for(d=o.child=i.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~w}else d=0,o.child=null;return Qb(i,o,w,c,d)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Ff(o,w!==null?w.cachePool:null),w!==null?Kv(o,w):n_(),Jv(o);else return d=o.lanes=536870912,Qb(i,o,w!==null?w.baseLanes|c:c,c,d)}else w!==null?(Ff(o,w.cachePool),Kv(o,w),ra(),o.memoizedState=null):(i!==null&&Ff(o,null),n_(),ra());return oi(i,o,v,c),o.child}function Ku(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Qb(i,o,c,d,v){var w=Qm();return w=w===null?null:{parent:kn._currentValue,pool:w},o.memoizedState={baseLanes:c,cachePool:w},i!==null&&Ff(o,null),n_(),Jv(o),i!==null&&dc(i,o,d,!0),o.childLanes=v,null}function cd(i,o){return o=hd({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function $b(i,o,c){return yl(o,i.child,null,c),i=cd(o,o.pendingProps),i.flags|=2,os(o),o.memoizedState=null,i}function yE(i,o,c){var d=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(de){if(d.mode==="hidden")return i=cd(o,d),o.lanes=536870912,Ku(null,i);if(s_(o),(i=ke)?(i=c1(i,zi),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:ft!==null?{id:St,overflow:Rt}:null,retryLane:536870912,hydrationErrors:null},c=zu(i),c.return=o,o.child=c,Me=o,ke=null)):i=null,i===null)throw Er(o);return o.lanes=536870912,null}return cd(o,d)}var w=i.memoizedState;if(w!==null){var M=w.dehydrated;if(s_(o),v)if(o.flags&256)o.flags&=-257,o=$b(i,o,c);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(Dn||dc(i,o,c,!1),v=(c&i.childLanes)!==0,Dn||v){if(d=Fe,d!==null&&(M=ts(d,c),M!==0&&M!==w.retryLane))throw w.retryLane=M,Es(i,M),ji(d,i,M),A_;bd(),o=$b(i,o,c)}else i=w.treeContext,ke=Ms(M.nextSibling),Me=o,de=!0,Ar=null,zi=!1,i!==null&&wi(o,i),o=cd(o,d),o.flags|=4096;return o}return i=Cs(i.child,{mode:d.mode,children:d.children}),i.ref=o.ref,o.child=i,i.return=o,i}function ud(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function E_(i,o,c,d,v){return pl(o),c=o_(i,o,c,d,void 0,v),d=a_(),i!==null&&!Dn?(l_(i,o,v),uo(i,o,v)):(de&&d&&Hn(o),o.flags|=1,oi(i,o,c,v),o.child)}function Kb(i,o,c,d,v,w){return pl(o),o.updateQueue=null,c=eb(o,d,c,v),tb(i),d=a_(),i!==null&&!Dn?(l_(i,o,w),uo(i,o,w)):(de&&d&&Hn(o),o.flags|=1,oi(i,o,c,w),o.child)}function Jb(i,o,c,d,v){if(pl(o),o.stateNode===null){var w=so,M=c.contextType;typeof M=="object"&&M!==null&&(w=ri(M)),w=new c(d,w),o.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=S_,o.stateNode=w,w._reactInternals=o,w=o.stateNode,w.props=d,w.state=o.memoizedState,w.refs={},Km(o),M=c.contextType,w.context=typeof M=="object"&&M!==null?ri(M):so,w.state=o.memoizedState,M=c.getDerivedStateFromProps,typeof M=="function"&&(x_(o,c,M,d),w.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(M=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),M!==w.state&&S_.enqueueReplaceState(w,w.state,null),Fu(o,d,w,v),Wu(),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(i===null){w=o.stateNode;var H=o.memoizedProps,tt=bl(c,H);w.props=tt;var ht=w.context,vt=c.contextType;M=so,typeof vt=="object"&&vt!==null&&(M=ri(vt));var Tt=c.getDerivedStateFromProps;vt=typeof Tt=="function"||typeof w.getSnapshotBeforeUpdate=="function",H=o.pendingProps!==H,vt||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(H||ht!==M)&&Bb(o,w,d,M),ea=!1;var dt=o.memoizedState;w.state=dt,Fu(o,d,w,v),Wu(),ht=o.memoizedState,H||dt!==ht||ea?(typeof Tt=="function"&&(x_(o,c,Tt,d),ht=o.memoizedState),(tt=ea||Ub(o,c,tt,d,dt,ht,M))?(vt||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=ht),w.props=d,w.state=ht,w.context=M,d=tt):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{w=o.stateNode,Jm(i,o),M=o.memoizedProps,vt=bl(c,M),w.props=vt,Tt=o.pendingProps,dt=w.context,ht=c.contextType,tt=so,typeof ht=="object"&&ht!==null&&(tt=ri(ht)),H=c.getDerivedStateFromProps,(ht=typeof H=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(M!==Tt||dt!==tt)&&Bb(o,w,d,tt),ea=!1,dt=o.memoizedState,w.state=dt,Fu(o,d,w,v),Wu();var pt=o.memoizedState;M!==Tt||dt!==pt||ea||i!==null&&i.dependencies!==null&&Zf(i.dependencies)?(typeof H=="function"&&(x_(o,c,H,d),pt=o.memoizedState),(vt=ea||Ub(o,c,vt,d,dt,pt,tt)||i!==null&&i.dependencies!==null&&Zf(i.dependencies))?(ht||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,pt,tt),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,pt,tt)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||M===i.memoizedProps&&dt===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&dt===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=pt),w.props=d,w.state=pt,w.context=tt,d=vt):(typeof w.componentDidUpdate!="function"||M===i.memoizedProps&&dt===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&dt===i.memoizedState||(o.flags|=1024),d=!1)}return w=d,ud(i,o),d=(o.flags&128)!==0,w||d?(w=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:w.render(),o.flags|=1,i!==null&&d?(o.child=yl(o,i.child,null,v),o.child=yl(o,null,c,v)):oi(i,o,c,v),o.memoizedState=w.state,i=o.child):i=uo(i,o,v),i}function tw(i,o,c,d){return oo(),o.flags|=256,oi(i,o,c,d),o.child}var C_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function L_(i){return{baseLanes:i,cachePool:qv()}}function M_(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=ls),i}function ew(i,o,c){var d=o.pendingProps,v=!1,w=(o.flags&128)!==0,M;if((M=w)||(M=i!==null&&i.memoizedState===null?!1:(Tn.current&2)!==0),M&&(v=!0,o.flags&=-129),M=(o.flags&32)!==0,o.flags&=-33,i===null){if(de){if(v?sa(o):ra(),(i=ke)?(i=c1(i,zi),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:ft!==null?{id:St,overflow:Rt}:null,retryLane:536870912,hydrationErrors:null},c=zu(i),c.return=o,o.child=c,Me=o,ke=null)):i=null,i===null)throw Er(o);return hg(i)?o.lanes=32:o.lanes=536870912,null}var H=d.children;return d=d.fallback,v?(ra(),v=o.mode,H=hd({mode:"hidden",children:H},v),d=ro(d,v,c,null),H.return=o,d.return=o,H.sibling=d,o.child=H,d=o.child,d.memoizedState=L_(c),d.childLanes=M_(i,M,c),o.memoizedState=C_,Ku(null,d)):(sa(o),k_(o,H))}var tt=i.memoizedState;if(tt!==null&&(H=tt.dehydrated,H!==null)){if(w)o.flags&256?(sa(o),o.flags&=-257,o=O_(i,o,c)):o.memoizedState!==null?(ra(),o.child=i.child,o.flags|=128,o=null):(ra(),H=d.fallback,v=o.mode,d=hd({mode:"visible",children:d.children},v),H=ro(H,v,c,null),H.flags|=2,d.return=o,H.return=o,d.sibling=H,o.child=d,yl(o,i.child,null,c),d=o.child,d.memoizedState=L_(c),d.childLanes=M_(i,M,c),o.memoizedState=C_,o=Ku(null,d));else if(sa(o),hg(H)){if(M=H.nextSibling&&H.nextSibling.dataset,M)var ht=M.dgst;M=ht,d=Error(s(419)),d.stack="",d.digest=M,fl({value:d,source:null,stack:null}),o=O_(i,o,c)}else if(Dn||dc(i,o,c,!1),M=(c&i.childLanes)!==0,Dn||M){if(M=Fe,M!==null&&(d=ts(M,c),d!==0&&d!==tt.retryLane))throw tt.retryLane=d,Es(i,d),ji(M,i,d),A_;ug(H)||bd(),o=O_(i,o,c)}else ug(H)?(o.flags|=192,o.child=i.child,o=null):(i=tt.treeContext,ke=Ms(H.nextSibling),Me=o,de=!0,Ar=null,zi=!1,i!==null&&wi(o,i),o=k_(o,d.children),o.flags|=4096);return o}return v?(ra(),H=d.fallback,v=o.mode,tt=i.child,ht=tt.sibling,d=Cs(tt,{mode:"hidden",children:d.children}),d.subtreeFlags=tt.subtreeFlags&65011712,ht!==null?H=Cs(ht,H):(H=ro(H,v,c,null),H.flags|=2),H.return=o,d.return=o,d.sibling=H,o.child=d,Ku(null,d),d=o.child,H=i.child.memoizedState,H===null?H=L_(c):(v=H.cachePool,v!==null?(tt=kn._currentValue,v=v.parent!==tt?{parent:tt,pool:tt}:v):v=qv(),H={baseLanes:H.baseLanes|c,cachePool:v}),d.memoizedState=H,d.childLanes=M_(i,M,c),o.memoizedState=C_,Ku(i.child,d)):(sa(o),c=i.child,i=c.sibling,c=Cs(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,i!==null&&(M=o.deletions,M===null?(o.deletions=[i],o.flags|=16):M.push(i)),o.child=c,o.memoizedState=null,c)}function k_(i,o){return o=hd({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function hd(i,o){return i=hi(22,i,null,o),i.lanes=0,i}function O_(i,o,c){return yl(o,i.child,null,c),i=k_(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function nw(i,o,c){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),Wm(i.return,o,c)}function D_(i,o,c,d,v,w){var M=i.memoizedState;M===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:v,treeForkCount:w}:(M.isBackwards=o,M.rendering=null,M.renderingStartTime=0,M.last=d,M.tail=c,M.tailMode=v,M.treeForkCount=w)}function iw(i,o,c){var d=o.pendingProps,v=d.revealOrder,w=d.tail;d=d.children;var M=Tn.current,H=(M&2)!==0;if(H?(M=M&1|2,o.flags|=128):M&=1,at(Tn,M),oi(i,o,d,c),d=de?B:0,!H&&i!==null&&(i.flags&128)!==0)t:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&nw(i,c,o);else if(i.tag===19)nw(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break t;for(;i.sibling===null;){if(i.return===null||i.return===o)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(c=o.child,v=null;c!==null;)i=c.alternate,i!==null&&Jf(i)===null&&(v=c),c=c.sibling;c=v,c===null?(v=o.child,o.child=null):(v=c.sibling,c.sibling=null),D_(o,!1,v,c,w,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=o.child,o.child=null;v!==null;){if(i=v.alternate,i!==null&&Jf(i)===null){o.child=v;break}i=v.sibling,v.sibling=c,c=v,v=i}D_(o,!0,c,null,w,d);break;case"together":D_(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function uo(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),la|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(dc(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,c=Cs(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=Cs(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function R_(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Zf(i)))}function vE(i,o,c){switch(o.tag){case 3:Mt(o,o.stateNode.containerInfo),ta(o,kn,i.memoizedState.cache),oo();break;case 27:case 5:Ne(o);break;case 4:Mt(o,o.stateNode.containerInfo);break;case 10:ta(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,s_(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(sa(o),o.flags|=128,null):(c&o.child.childLanes)!==0?ew(i,o,c):(sa(o),i=uo(i,o,c),i!==null?i.sibling:null);sa(o);break;case 19:var v=(i.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(dc(i,o,c,!1),d=(c&o.childLanes)!==0),v){if(d)return iw(i,o,c);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),at(Tn,Tn.current),d)break;return null;case 22:return o.lanes=0,Xb(i,o,c,o.pendingProps);case 24:ta(o,kn,i.memoizedState.cache)}return uo(i,o,c)}function sw(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)Dn=!0;else{if(!R_(i,c)&&(o.flags&128)===0)return Dn=!1,vE(i,o,c);Dn=(i.flags&131072)!==0}else Dn=!1,de&&(o.flags&1048576)!==0&&le(o,B,o.index);switch(o.lanes=0,o.tag){case 16:t:{var d=o.pendingProps;if(i=_l(o.elementType),o.type=i,typeof i=="function")uc(i)?(d=bl(i,d),o.tag=1,o=Jb(null,o,i,d,c)):(o.tag=0,o=E_(null,o,i,d,c));else{if(i!=null){var v=i.$$typeof;if(v===$){o.tag=11,o=Wb(null,o,i,d,c);break t}else if(v===F){o.tag=14,o=Fb(null,o,i,d,c);break t}}throw o=X(i)||i,Error(s(306,o,""))}}return o;case 0:return E_(i,o,o.type,o.pendingProps,c);case 1:return d=o.type,v=bl(d,o.pendingProps),Jb(i,o,d,v,c);case 3:t:{if(Mt(o,o.stateNode.containerInfo),i===null)throw Error(s(387));d=o.pendingProps;var w=o.memoizedState;v=w.element,Jm(i,o),Fu(o,d,null,c);var M=o.memoizedState;if(d=M.cache,ta(o,kn,d),d!==w.cache&&Fm(o,[kn],c,!0),Wu(),d=M.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:M.cache},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){o=tw(i,o,d,c);break t}else if(d!==v){v=f(Error(s(424)),o),fl(v),o=tw(i,o,d,c);break t}else for(i=o.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,ke=Ms(i.firstChild),Me=o,de=!0,Ar=null,zi=!0,c=Xv(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(oo(),d===v){o=uo(i,o,c);break t}oi(i,o,d,c)}o=o.child}return o;case 26:return ud(i,o),i===null?(c=m1(o.type,null,o.pendingProps,null))?o.memoizedState=c:de||(c=o.type,i=o.pendingProps,d=Cd(yt.current).createElement(c),d[Ln]=o,d[Fn]=i,ai(d,c,i),Mn(d),o.stateNode=d):o.memoizedState=m1(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Ne(o),i===null&&de&&(d=o.stateNode=f1(o.type,o.pendingProps,yt.current),Me=o,zi=!0,v=ke,da(o.type)?(fg=v,ke=Ms(d.firstChild)):ke=v),oi(i,o,o.pendingProps.children,c),ud(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&de&&((v=d=ke)&&(d=XE(d,o.type,o.pendingProps,zi),d!==null?(o.stateNode=d,Me=o,ke=Ms(d.firstChild),zi=!1,v=!0):v=!1),v||Er(o)),Ne(o),v=o.type,w=o.pendingProps,M=i!==null?i.memoizedProps:null,d=w.children,ag(v,w)?d=null:M!==null&&ag(v,M)&&(o.flags|=32),o.memoizedState!==null&&(v=o_(i,o,uE,null,null,c),dh._currentValue=v),ud(i,o),oi(i,o,d,c),o.child;case 6:return i===null&&de&&((i=c=ke)&&(c=QE(c,o.pendingProps,zi),c!==null?(o.stateNode=c,Me=o,ke=null,i=!0):i=!1),i||Er(o)),null;case 13:return ew(i,o,c);case 4:return Mt(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=yl(o,null,d,c):oi(i,o,d,c),o.child;case 11:return Wb(i,o,o.type,o.pendingProps,c);case 7:return oi(i,o,o.pendingProps,c),o.child;case 8:return oi(i,o,o.pendingProps.children,c),o.child;case 12:return oi(i,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,ta(o,o.type,d.value),oi(i,o,d.children,c),o.child;case 9:return v=o.type._context,d=o.pendingProps.children,pl(o),v=ri(v),d=d(v),o.flags|=1,oi(i,o,d,c),o.child;case 14:return Fb(i,o,o.type,o.pendingProps,c);case 15:return Yb(i,o,o.type,o.pendingProps,c);case 19:return iw(i,o,c);case 31:return yE(i,o,c);case 22:return Xb(i,o,c,o.pendingProps);case 24:return pl(o),d=ri(kn),i===null?(v=Qm(),v===null&&(v=Fe,w=Ym(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=c),v=w),o.memoizedState={parent:d,cache:v},Km(o),ta(o,kn,v)):((i.lanes&c)!==0&&(Jm(i,o),Fu(o,null,null,c),Wu()),v=i.memoizedState,w=o.memoizedState,v.parent!==d?(v={parent:d,cache:d},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),ta(o,kn,d)):(d=w.cache,ta(o,kn,d),d!==v.cache&&Fm(o,[kn],c,!0))),oi(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function ho(i){i.flags|=4}function I_(i,o,c,d,v){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if(Ow())i.flags|=8192;else throw gl=Xf,$m}else i.flags&=-16777217}function rw(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!b1(o))if(Ow())i.flags|=8192;else throw gl=Xf,$m}function fd(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Nt():536870912,i.lanes|=o,Ac|=o)}function Ju(i,o){if(!de)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function Je(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(o)for(var v=i.child;v!==null;)c|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)c|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=d,i.childLanes=c,o}function bE(i,o,c){var d=o.pendingProps;switch(pn(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(o),null;case 1:return Je(o),null;case 3:return c=o.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),ao(kn),oe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(Ks(o)?ho(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Hu())),Je(o),null;case 26:var v=o.type,w=o.memoizedState;return i===null?(ho(o),w!==null?(Je(o),rw(o,w)):(Je(o),I_(o,v,null,d,c))):w?w!==i.memoizedState?(ho(o),Je(o),rw(o,w)):(Je(o),o.flags&=-16777217):(i=i.memoizedProps,i!==d&&ho(o),Je(o),I_(o,v,i,d,c)),null;case 27:if(Be(o),c=yt.current,v=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&ho(o);else{if(!d){if(o.stateNode===null)throw Error(s(166));return Je(o),null}i=mt.current,Ks(o)?Bu(o):(i=f1(v,d,c),o.stateNode=i,ho(o))}return Je(o),null;case 5:if(Be(o),v=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&ho(o);else{if(!d){if(o.stateNode===null)throw Error(s(166));return Je(o),null}if(w=mt.current,Ks(o))Bu(o);else{var M=Cd(yt.current);switch(w){case 1:w=M.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=M.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=M.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=M.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=M.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof d.is=="string"?M.createElement("select",{is:d.is}):M.createElement("select"),d.multiple?w.multiple=!0:d.size&&(w.size=d.size);break;default:w=typeof d.is=="string"?M.createElement(v,{is:d.is}):M.createElement(v)}}w[Ln]=o,w[Fn]=d;t:for(M=o.child;M!==null;){if(M.tag===5||M.tag===6)w.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===o)break t;for(;M.sibling===null;){if(M.return===null||M.return===o)break t;M=M.return}M.sibling.return=M.return,M=M.sibling}o.stateNode=w;t:switch(ai(w,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&ho(o)}}return Je(o),I_(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,c),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==d&&ho(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(s(166));if(i=yt.current,Ks(o)){if(i=o.stateNode,c=o.memoizedProps,d=null,v=Me,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}i[Ln]=o,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||e1(i.nodeValue,c)),i||Er(o,!0)}else i=Cd(i).createTextNode(d),i[Ln]=o,o.stateNode=i}return Je(o),null;case 31:if(c=o.memoizedState,i===null||i.memoizedState!==null){if(d=Ks(o),c!==null){if(i===null){if(!d)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[Ln]=o}else oo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Je(o),i=!1}else c=Hu(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return o.flags&256?(os(o),o):(os(o),null);if((o.flags&128)!==0)throw Error(s(558))}return Je(o),null;case 13:if(d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=Ks(o),d!==null&&d.dehydrated!==null){if(i===null){if(!v)throw Error(s(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[Ln]=o}else oo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Je(o),v=!1}else v=Hu(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(os(o),o):(os(o),null)}return os(o),(o.flags&128)!==0?(o.lanes=c,o):(c=d!==null,i=i!==null&&i.memoizedState!==null,c&&(d=o.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),w=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==v&&(d.flags|=2048)),c!==i&&c&&(o.child.flags|=8192),fd(o,o.updateQueue),Je(o),null);case 4:return oe(),i===null&&ng(o.stateNode.containerInfo),Je(o),null;case 10:return ao(o.type),Je(o),null;case 19:if(Y(Tn),d=o.memoizedState,d===null)return Je(o),null;if(v=(o.flags&128)!==0,w=d.rendering,w===null)if(v)Ju(d,!1);else{if(_n!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(w=Jf(i),w!==null){for(o.flags|=128,Ju(d,!1),i=w.updateQueue,o.updateQueue=i,fd(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)Pu(c,i),c=c.sibling;return at(Tn,Tn.current&1|2),de&&Xt(o,d.treeForkCount),o.child}i=i.sibling}d.tail!==null&&xn()>gd&&(o.flags|=128,v=!0,Ju(d,!1),o.lanes=4194304)}else{if(!v)if(i=Jf(w),i!==null){if(o.flags|=128,v=!0,i=i.updateQueue,o.updateQueue=i,fd(o,i),Ju(d,!0),d.tail===null&&d.tailMode==="hidden"&&!w.alternate&&!de)return Je(o),null}else 2*xn()-d.renderingStartTime>gd&&c!==536870912&&(o.flags|=128,v=!0,Ju(d,!1),o.lanes=4194304);d.isBackwards?(w.sibling=o.child,o.child=w):(i=d.last,i!==null?i.sibling=w:o.child=w,d.last=w)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=xn(),i.sibling=null,c=Tn.current,at(Tn,v?c&1|2:c&1),de&&Xt(o,d.treeForkCount),i):(Je(o),null);case 22:case 23:return os(o),i_(),d=o.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(Je(o),o.subtreeFlags&6&&(o.flags|=8192)):Je(o),c=o.updateQueue,c!==null&&fd(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),i!==null&&Y(ml),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),ao(kn),Je(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function wE(i,o){switch(pn(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ao(kn),oe(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Be(o),null;case 31:if(o.memoizedState!==null){if(os(o),o.alternate===null)throw Error(s(340));oo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(os(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));oo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Y(Tn),null;case 4:return oe(),null;case 10:return ao(o.type),null;case 22:case 23:return os(o),i_(),i!==null&&Y(ml),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return ao(kn),null;case 25:return null;default:return null}}function ow(i,o){switch(pn(o),o.tag){case 3:ao(kn),oe();break;case 26:case 27:case 5:Be(o);break;case 4:oe();break;case 31:o.memoizedState!==null&&os(o);break;case 13:os(o);break;case 19:Y(Tn);break;case 10:ao(o.type);break;case 22:case 23:os(o),i_(),i!==null&&Y(ml);break;case 24:ao(kn)}}function th(i,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var v=d.next;c=v;do{if((c.tag&i)===i){d=void 0;var w=c.create,M=c.inst;d=w(),M.destroy=d}c=c.next}while(c!==v)}}catch(H){Ue(o,o.return,H)}}function oa(i,o,c){try{var d=o.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var w=v.next;d=w;do{if((d.tag&i)===i){var M=d.inst,H=M.destroy;if(H!==void 0){M.destroy=void 0,v=o;var tt=c,ht=H;try{ht()}catch(vt){Ue(v,tt,vt)}}}d=d.next}while(d!==w)}}catch(vt){Ue(o,o.return,vt)}}function aw(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{$v(o,c)}catch(d){Ue(i,i.return,d)}}}function lw(i,o,c){c.props=bl(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){Ue(i,o,d)}}function eh(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(v){Ue(i,o,v)}}function Lr(i,o){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(v){Ue(i,o,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){Ue(i,o,v)}else c.current=null}function cw(i){var o=i.type,c=i.memoizedProps,d=i.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break t;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(v){Ue(i,i.return,v)}}function N_(i,o,c){try{var d=i.stateNode;qE(d,i.type,c,o),d[Fn]=o}catch(v){Ue(i,i.return,v)}}function uw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&da(i.type)||i.tag===4}function P_(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||uw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&da(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function z_(i,o,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Ri));else if(d!==4&&(d===27&&da(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for(z_(i,o,c),i=i.sibling;i!==null;)z_(i,o,c),i=i.sibling}function dd(i,o,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(d!==4&&(d===27&&da(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(dd(i,o,c),i=i.sibling;i!==null;)dd(i,o,c),i=i.sibling}function hw(i){var o=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);ai(o,d,c),o[Ln]=i,o[Fn]=c}catch(w){Ue(i,i.return,w)}}var fo=!1,Rn=!1,U_=!1,fw=typeof WeakSet=="function"?WeakSet:Set,Qn=null;function xE(i,o){if(i=i.containerInfo,rg=Id,i=sl(i),br(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else t:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var v=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break t}var M=0,H=-1,tt=-1,ht=0,vt=0,Tt=i,dt=null;e:for(;;){for(var pt;Tt!==c||v!==0&&Tt.nodeType!==3||(H=M+v),Tt!==w||d!==0&&Tt.nodeType!==3||(tt=M+d),Tt.nodeType===3&&(M+=Tt.nodeValue.length),(pt=Tt.firstChild)!==null;)dt=Tt,Tt=pt;for(;;){if(Tt===i)break e;if(dt===c&&++ht===v&&(H=M),dt===w&&++vt===d&&(tt=M),(pt=Tt.nextSibling)!==null)break;Tt=dt,dt=Tt.parentNode}Tt=pt}c=H===-1||tt===-1?null:{start:H,end:tt}}else c=null}c=c||{start:0,end:0}}else c=null;for(og={focusedElem:i,selectionRange:c},Id=!1,Qn=o;Qn!==null;)if(o=Qn,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Qn=i;else for(;Qn!==null;){switch(o=Qn,w=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)v=i[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&w!==null){i=void 0,c=o,v=w.memoizedProps,w=w.memoizedState,d=c.stateNode;try{var Ht=bl(c.type,v);i=d.getSnapshotBeforeUpdate(Ht,w),d.__reactInternalSnapshotBeforeUpdate=i}catch(Kt){Ue(c,c.return,Kt)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)cg(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":cg(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,Qn=i;break}Qn=o.return}}function dw(i,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:mo(i,c),d&4&&th(5,c);break;case 1:if(mo(i,c),d&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(M){Ue(c,c.return,M)}else{var v=bl(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(v,o,i.__reactInternalSnapshotBeforeUpdate)}catch(M){Ue(c,c.return,M)}}d&64&&aw(c),d&512&&eh(c,c.return);break;case 3:if(mo(i,c),d&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{$v(i,o)}catch(M){Ue(c,c.return,M)}}break;case 27:o===null&&d&4&&hw(c);case 26:case 5:mo(i,c),o===null&&d&4&&cw(c),d&512&&eh(c,c.return);break;case 12:mo(i,c);break;case 31:mo(i,c),d&4&&_w(i,c);break;case 13:mo(i,c),d&4&&gw(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=OE.bind(null,c),$E(i,c))));break;case 22:if(d=c.memoizedState!==null||fo,!d){o=o!==null&&o.memoizedState!==null||Rn,v=fo;var w=Rn;fo=d,(Rn=o)&&!w?_o(i,c,(c.subtreeFlags&8772)!==0):mo(i,c),fo=v,Rn=w}break;case 30:break;default:mo(i,c)}}function pw(i){var o=i.alternate;o!==null&&(i.alternate=null,pw(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&yu(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ln=null,Ui=!1;function po(i,o,c){for(c=c.child;c!==null;)mw(i,o,c),c=c.sibling}function mw(i,o,c){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(Zs,c)}catch{}switch(c.tag){case 26:Rn||Lr(c,o),po(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Rn||Lr(c,o);var d=ln,v=Ui;da(c.type)&&(ln=c.stateNode,Ui=!1),po(i,o,c),uh(c.stateNode),ln=d,Ui=v;break;case 5:Rn||Lr(c,o);case 6:if(d=ln,v=Ui,ln=null,po(i,o,c),ln=d,Ui=v,ln!==null)if(Ui)try{(ln.nodeType===9?ln.body:ln.nodeName==="HTML"?ln.ownerDocument.body:ln).removeChild(c.stateNode)}catch(w){Ue(c,o,w)}else try{ln.removeChild(c.stateNode)}catch(w){Ue(c,o,w)}break;case 18:ln!==null&&(Ui?(i=ln,a1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Rc(i)):a1(ln,c.stateNode));break;case 4:d=ln,v=Ui,ln=c.stateNode.containerInfo,Ui=!0,po(i,o,c),ln=d,Ui=v;break;case 0:case 11:case 14:case 15:oa(2,c,o),Rn||oa(4,c,o),po(i,o,c);break;case 1:Rn||(Lr(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&lw(c,o,d)),po(i,o,c);break;case 21:po(i,o,c);break;case 22:Rn=(d=Rn)||c.memoizedState!==null,po(i,o,c),Rn=d;break;default:po(i,o,c)}}function _w(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Rc(i)}catch(c){Ue(o,o.return,c)}}}function gw(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Rc(i)}catch(c){Ue(o,o.return,c)}}function SE(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new fw),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new fw),o;default:throw Error(s(435,i.tag))}}function pd(i,o){var c=SE(i);o.forEach(function(d){if(!c.has(d)){c.add(d);var v=DE.bind(null,i,d);d.then(v,v)}})}function Bi(i,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var v=c[d],w=i,M=o,H=M;t:for(;H!==null;){switch(H.tag){case 27:if(da(H.type)){ln=H.stateNode,Ui=!1;break t}break;case 5:ln=H.stateNode,Ui=!1;break t;case 3:case 4:ln=H.stateNode.containerInfo,Ui=!0;break t}H=H.return}if(ln===null)throw Error(s(160));mw(w,M,v),ln=null,Ui=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)yw(o,i),o=o.sibling}var tr=null;function yw(i,o){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Bi(o,i),Hi(i),d&4&&(oa(3,i,i.return),th(3,i),oa(5,i,i.return));break;case 1:Bi(o,i),Hi(i),d&512&&(Rn||c===null||Lr(c,c.return)),d&64&&fo&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var v=tr;if(Bi(o,i),Hi(i),d&512&&(Rn||c===null||Lr(c,c.return)),d&4){var w=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){t:{d=i.type,c=i.memoizedProps,v=v.ownerDocument||v;e:switch(d){case"title":w=v.getElementsByTagName("title")[0],(!w||w[ja]||w[Ln]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(d),v.head.insertBefore(w,v.querySelector("head > title"))),ai(w,d,c),w[Ln]=i,Mn(w),d=w;break t;case"link":var M=y1("link","href",v).get(d+(c.href||""));if(M){for(var H=0;H<M.length;H++)if(w=M[H],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){M.splice(H,1);break e}}w=v.createElement(d),ai(w,d,c),v.head.appendChild(w);break;case"meta":if(M=y1("meta","content",v).get(d+(c.content||""))){for(H=0;H<M.length;H++)if(w=M[H],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){M.splice(H,1);break e}}w=v.createElement(d),ai(w,d,c),v.head.appendChild(w);break;default:throw Error(s(468,d))}w[Ln]=i,Mn(w),d=w}i.stateNode=d}else v1(v,i.type,i.stateNode);else i.stateNode=g1(v,d,i.memoizedProps);else w!==d?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,d===null?v1(v,i.type,i.stateNode):g1(v,d,i.memoizedProps)):d===null&&i.stateNode!==null&&N_(i,i.memoizedProps,c.memoizedProps)}break;case 27:Bi(o,i),Hi(i),d&512&&(Rn||c===null||Lr(c,c.return)),c!==null&&d&4&&N_(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Bi(o,i),Hi(i),d&512&&(Rn||c===null||Lr(c,c.return)),i.flags&32){v=i.stateNode;try{bs(v,"")}catch(Ht){Ue(i,i.return,Ht)}}d&4&&i.stateNode!=null&&(v=i.memoizedProps,N_(i,v,c!==null?c.memoizedProps:v)),d&1024&&(U_=!0);break;case 6:if(Bi(o,i),Hi(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(Ht){Ue(i,i.return,Ht)}}break;case 3:if(kd=null,v=tr,tr=Ld(o.containerInfo),Bi(o,i),tr=v,Hi(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Rc(o.containerInfo)}catch(Ht){Ue(i,i.return,Ht)}U_&&(U_=!1,vw(i));break;case 4:d=tr,tr=Ld(i.stateNode.containerInfo),Bi(o,i),Hi(i),tr=d;break;case 12:Bi(o,i),Hi(i);break;case 31:Bi(o,i),Hi(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,pd(i,d)));break;case 13:Bi(o,i),Hi(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(_d=xn()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,pd(i,d)));break;case 22:v=i.memoizedState!==null;var tt=c!==null&&c.memoizedState!==null,ht=fo,vt=Rn;if(fo=ht||v,Rn=vt||tt,Bi(o,i),Rn=vt,fo=ht,Hi(i),d&8192)t:for(o=i.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(c===null||tt||fo||Rn||wl(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){tt=c=o;try{if(w=tt.stateNode,v)M=w.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{H=tt.stateNode;var Tt=tt.memoizedProps.style,dt=Tt!=null&&Tt.hasOwnProperty("display")?Tt.display:null;H.style.display=dt==null||typeof dt=="boolean"?"":(""+dt).trim()}}catch(Ht){Ue(tt,tt.return,Ht)}}}else if(o.tag===6){if(c===null){tt=o;try{tt.stateNode.nodeValue=v?"":tt.memoizedProps}catch(Ht){Ue(tt,tt.return,Ht)}}}else if(o.tag===18){if(c===null){tt=o;try{var pt=tt.stateNode;v?l1(pt,!0):l1(tt.stateNode,!1)}catch(Ht){Ue(tt,tt.return,Ht)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break t;for(;o.sibling===null;){if(o.return===null||o.return===i)break t;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,pd(i,c))));break;case 19:Bi(o,i),Hi(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,pd(i,d)));break;case 30:break;case 21:break;default:Bi(o,i),Hi(i)}}function Hi(i){var o=i.flags;if(o&2){try{for(var c,d=i.return;d!==null;){if(uw(d)){c=d;break}d=d.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var v=c.stateNode,w=P_(i);dd(i,w,v);break;case 5:var M=c.stateNode;c.flags&32&&(bs(M,""),c.flags&=-33);var H=P_(i);dd(i,H,M);break;case 3:case 4:var tt=c.stateNode.containerInfo,ht=P_(i);z_(i,ht,tt);break;default:throw Error(s(161))}}catch(vt){Ue(i,i.return,vt)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function vw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;vw(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function mo(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)dw(i,o.alternate,o),o=o.sibling}function wl(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:oa(4,o,o.return),wl(o);break;case 1:Lr(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&lw(o,o.return,c),wl(o);break;case 27:uh(o.stateNode);case 26:case 5:Lr(o,o.return),wl(o);break;case 22:o.memoizedState===null&&wl(o);break;case 30:wl(o);break;default:wl(o)}i=i.sibling}}function _o(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,v=i,w=o,M=w.flags;switch(w.tag){case 0:case 11:case 15:_o(v,w,c),th(4,w);break;case 1:if(_o(v,w,c),d=w,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ht){Ue(d,d.return,ht)}if(d=w,v=d.updateQueue,v!==null){var H=d.stateNode;try{var tt=v.shared.hiddenCallbacks;if(tt!==null)for(v.shared.hiddenCallbacks=null,v=0;v<tt.length;v++)Qv(tt[v],H)}catch(ht){Ue(d,d.return,ht)}}c&&M&64&&aw(w),eh(w,w.return);break;case 27:hw(w);case 26:case 5:_o(v,w,c),c&&d===null&&M&4&&cw(w),eh(w,w.return);break;case 12:_o(v,w,c);break;case 31:_o(v,w,c),c&&M&4&&_w(v,w);break;case 13:_o(v,w,c),c&&M&4&&gw(v,w);break;case 22:w.memoizedState===null&&_o(v,w,c),eh(w,w.return);break;case 30:break;default:_o(v,w,c)}o=o.sibling}}function B_(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Vu(c))}function H_(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Vu(i))}function er(i,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)bw(i,o,c,d),o=o.sibling}function bw(i,o,c,d){var v=o.flags;switch(o.tag){case 0:case 11:case 15:er(i,o,c,d),v&2048&&th(9,o);break;case 1:er(i,o,c,d);break;case 3:er(i,o,c,d),v&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Vu(i)));break;case 12:if(v&2048){er(i,o,c,d),i=o.stateNode;try{var w=o.memoizedProps,M=w.id,H=w.onPostCommit;typeof H=="function"&&H(M,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(tt){Ue(o,o.return,tt)}}else er(i,o,c,d);break;case 31:er(i,o,c,d);break;case 13:er(i,o,c,d);break;case 23:break;case 22:w=o.stateNode,M=o.alternate,o.memoizedState!==null?w._visibility&2?er(i,o,c,d):nh(i,o):w._visibility&2?er(i,o,c,d):(w._visibility|=2,xc(i,o,c,d,(o.subtreeFlags&10256)!==0||!1)),v&2048&&B_(M,o);break;case 24:er(i,o,c,d),v&2048&&H_(o.alternate,o);break;default:er(i,o,c,d)}}function xc(i,o,c,d,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var w=i,M=o,H=c,tt=d,ht=M.flags;switch(M.tag){case 0:case 11:case 15:xc(w,M,H,tt,v),th(8,M);break;case 23:break;case 22:var vt=M.stateNode;M.memoizedState!==null?vt._visibility&2?xc(w,M,H,tt,v):nh(w,M):(vt._visibility|=2,xc(w,M,H,tt,v)),v&&ht&2048&&B_(M.alternate,M);break;case 24:xc(w,M,H,tt,v),v&&ht&2048&&H_(M.alternate,M);break;default:xc(w,M,H,tt,v)}o=o.sibling}}function nh(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,d=o,v=d.flags;switch(d.tag){case 22:nh(c,d),v&2048&&B_(d.alternate,d);break;case 24:nh(c,d),v&2048&&H_(d.alternate,d);break;default:nh(c,d)}o=o.sibling}}var ih=8192;function Sc(i,o,c){if(i.subtreeFlags&ih)for(i=i.child;i!==null;)ww(i,o,c),i=i.sibling}function ww(i,o,c){switch(i.tag){case 26:Sc(i,o,c),i.flags&ih&&i.memoizedState!==null&&cC(c,tr,i.memoizedState,i.memoizedProps);break;case 5:Sc(i,o,c);break;case 3:case 4:var d=tr;tr=Ld(i.stateNode.containerInfo),Sc(i,o,c),tr=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=ih,ih=16777216,Sc(i,o,c),ih=d):Sc(i,o,c));break;default:Sc(i,o,c)}}function xw(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function sh(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Qn=d,Tw(d,i)}xw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Sw(i),i=i.sibling}function Sw(i){switch(i.tag){case 0:case 11:case 15:sh(i),i.flags&2048&&oa(9,i,i.return);break;case 3:sh(i);break;case 12:sh(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,md(i)):sh(i);break;default:sh(i)}}function md(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Qn=d,Tw(d,i)}xw(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:oa(8,o,o.return),md(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,md(o));break;default:md(o)}i=i.sibling}}function Tw(i,o){for(;Qn!==null;){var c=Qn;switch(c.tag){case 0:case 11:case 15:oa(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Vu(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Qn=d;else t:for(c=i;Qn!==null;){d=Qn;var v=d.sibling,w=d.return;if(pw(d),d===c){Qn=null;break t}if(v!==null){v.return=w,Qn=v;break t}Qn=w}}}var TE={getCacheForType:function(i){var o=ri(kn),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c},cacheSignal:function(){return ri(kn).controller.signal}},AE=typeof WeakMap=="function"?WeakMap:Map,Ie=0,Fe=null,pe=null,ge=0,ze=0,as=null,aa=!1,Tc=!1,V_=!1,go=0,_n=0,la=0,xl=0,j_=0,ls=0,Ac=0,rh=null,Vi=null,q_=!1,_d=0,Aw=0,gd=1/0,yd=null,ca=null,Vn=0,ua=null,Ec=null,yo=0,G_=0,Z_=null,Ew=null,oh=0,W_=null;function cs(){return(Ie&2)!==0&&ge!==0?ge&-ge:P.T!==null?K_():vi()}function Cw(){if(ls===0)if((ge&536870912)===0||de){var i=Qr;Qr<<=1,(Qr&3932160)===0&&(Qr=262144),ls=i}else ls=536870912;return i=rs.current,i!==null&&(i.flags|=32),ls}function ji(i,o,c){(i===Fe&&(ze===2||ze===9)||i.cancelPendingCommit!==null)&&(Cc(i,0),ha(i,ge,ls,!1)),Yt(i,c),((Ie&2)===0||i!==Fe)&&(i===Fe&&((Ie&2)===0&&(xl|=c),_n===4&&ha(i,ge,ls,!1)),Mr(i))}function Lw(i,o,c){if((Ie&6)!==0)throw Error(s(327));var d=!c&&(o&127)===0&&(o&i.expiredLanes)===0||Dt(i,o),v=d?LE(i,o):Y_(i,o,!0),w=d;do{if(v===0){Tc&&!d&&ha(i,o,0,!1);break}else{if(c=i.current.alternate,w&&!EE(c)){v=Y_(i,o,!1),w=!1;continue}if(v===2){if(w=o,i.errorRecoveryDisabledLanes&w)var M=0;else M=i.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){o=M;t:{var H=i;v=rh;var tt=H.current.memoizedState.isDehydrated;if(tt&&(Cc(H,M).flags|=256),M=Y_(H,M,!1),M!==2){if(V_&&!tt){H.errorRecoveryDisabledLanes|=w,xl|=w,v=4;break t}w=Vi,Vi=v,w!==null&&(Vi===null?Vi=w:Vi.push.apply(Vi,w))}v=M}if(w=!1,v!==2)continue}}if(v===1){Cc(i,0),ha(i,o,0,!0);break}t:{switch(d=i,w=v,w){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:ha(d,o,ls,!aa);break t;case 2:Vi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(v=_d+300-xn(),10<v)){if(ha(d,o,ls,!aa),Zt(d,0,!0)!==0)break t;yo=o,d.timeoutHandle=r1(Mw.bind(null,d,c,Vi,yd,q_,o,ls,xl,Ac,aa,w,"Throttled",-0,0),v);break t}Mw(d,c,Vi,yd,q_,o,ls,xl,Ac,aa,w,null,-0,0)}}break}while(!0);Mr(i)}function Mw(i,o,c,d,v,w,M,H,tt,ht,vt,Tt,dt,pt){if(i.timeoutHandle=-1,Tt=o.subtreeFlags,Tt&8192||(Tt&16785408)===16785408){Tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ri},ww(o,w,Tt);var Ht=(w&62914560)===w?_d-xn():(w&4194048)===w?Aw-xn():0;if(Ht=uC(Tt,Ht),Ht!==null){yo=w,i.cancelPendingCommit=Ht(zw.bind(null,i,o,w,c,d,v,M,H,tt,vt,Tt,null,dt,pt)),ha(i,w,M,!ht);return}}zw(i,o,w,c,d,v,M,H,tt)}function EE(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var v=c[d],w=v.getSnapshot;v=v.value;try{if(!Yn(w(),v))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ha(i,o,c,d){o&=~j_,o&=~xl,i.suspendedLanes|=o,i.pingedLanes&=~o,d&&(i.warmLanes|=o),d=i.expirationTimes;for(var v=o;0<v;){var w=31-ii(v),M=1<<w;d[w]=-1,v&=~M}c!==0&&rn(i,c,o)}function vd(){return(Ie&6)===0?(ah(0),!1):!0}function F_(){if(pe!==null){if(ze===0)var i=pe.return;else i=pe,Js=Cr=null,c_(i),gc=null,qu=0,i=pe;for(;i!==null;)ow(i.alternate,i),i=i.return;pe=null}}function Cc(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,WE(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),yo=0,F_(),Fe=i,pe=c=Cs(i.current,null),ge=o,ze=0,as=null,aa=!1,Tc=Dt(i,o),V_=!1,Ac=ls=j_=xl=la=_n=0,Vi=rh=null,q_=!1,(o&8)!==0&&(o|=o&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=o;0<d;){var v=31-ii(d),w=1<<v;o|=i[v],d&=~w}return go=o,cl(),c}function kw(i,o){ae=null,P.H=$u,o===_c||o===Yf?(o=Wv(),ze=3):o===$m?(o=Wv(),ze=4):ze=o===A_?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,as=o,pe===null&&(_n=1,ld(i,f(o,i.current)))}function Ow(){var i=rs.current;return i===null?!0:(ge&4194048)===ge?Ls===null:(ge&62914560)===ge||(ge&536870912)!==0?i===Ls:!1}function Dw(){var i=P.H;return P.H=$u,i===null?$u:i}function Rw(){var i=P.A;return P.A=TE,i}function bd(){_n=4,aa||(ge&4194048)!==ge&&rs.current!==null||(Tc=!0),(la&134217727)===0&&(xl&134217727)===0||Fe===null||ha(Fe,ge,ls,!1)}function Y_(i,o,c){var d=Ie;Ie|=2;var v=Dw(),w=Rw();(Fe!==i||ge!==o)&&(yd=null,Cc(i,o)),o=!1;var M=_n;t:do try{if(ze!==0&&pe!==null){var H=pe,tt=as;switch(ze){case 8:F_(),M=6;break t;case 3:case 2:case 9:case 6:rs.current===null&&(o=!0);var ht=ze;if(ze=0,as=null,Lc(i,H,tt,ht),c&&Tc){M=0;break t}break;default:ht=ze,ze=0,as=null,Lc(i,H,tt,ht)}}CE(),M=_n;break}catch(vt){kw(i,vt)}while(!0);return o&&i.shellSuspendCounter++,Js=Cr=null,Ie=d,P.H=v,P.A=w,pe===null&&(Fe=null,ge=0,cl()),M}function CE(){for(;pe!==null;)Iw(pe)}function LE(i,o){var c=Ie;Ie|=2;var d=Dw(),v=Rw();Fe!==i||ge!==o?(yd=null,gd=xn()+500,Cc(i,o)):Tc=Dt(i,o);t:do try{if(ze!==0&&pe!==null){o=pe;var w=as;e:switch(ze){case 1:ze=0,as=null,Lc(i,o,w,1);break;case 2:case 9:if(Gv(w)){ze=0,as=null,Nw(o);break}o=function(){ze!==2&&ze!==9||Fe!==i||(ze=7),Mr(i)},w.then(o,o);break t;case 3:ze=7;break t;case 4:ze=5;break t;case 7:Gv(w)?(ze=0,as=null,Nw(o)):(ze=0,as=null,Lc(i,o,w,7));break;case 5:var M=null;switch(pe.tag){case 26:M=pe.memoizedState;case 5:case 27:var H=pe;if(M?b1(M):H.stateNode.complete){ze=0,as=null;var tt=H.sibling;if(tt!==null)pe=tt;else{var ht=H.return;ht!==null?(pe=ht,wd(ht)):pe=null}break e}}ze=0,as=null,Lc(i,o,w,5);break;case 6:ze=0,as=null,Lc(i,o,w,6);break;case 8:F_(),_n=6;break t;default:throw Error(s(462))}}ME();break}catch(vt){kw(i,vt)}while(!0);return Js=Cr=null,P.H=d,P.A=v,Ie=c,pe!==null?0:(Fe=null,ge=0,cl(),_n)}function ME(){for(;pe!==null&&!gi();)Iw(pe)}function Iw(i){var o=sw(i.alternate,i,go);i.memoizedProps=i.pendingProps,o===null?wd(i):pe=o}function Nw(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=Kb(c,o,o.pendingProps,o.type,void 0,ge);break;case 11:o=Kb(c,o,o.pendingProps,o.type.render,o.ref,ge);break;case 5:c_(o);default:ow(c,o),o=pe=Pu(o,go),o=sw(c,o,go)}i.memoizedProps=i.pendingProps,o===null?wd(i):pe=o}function Lc(i,o,c,d){Js=Cr=null,c_(o),gc=null,qu=0;var v=o.return;try{if(gE(i,v,o,c,ge)){_n=1,ld(i,f(c,i.current)),pe=null;return}}catch(w){if(v!==null)throw pe=v,w;_n=1,ld(i,f(c,i.current)),pe=null;return}o.flags&32768?(de||d===1?i=!0:Tc||(ge&536870912)!==0?i=!1:(aa=i=!0,(d===2||d===9||d===3||d===6)&&(d=rs.current,d!==null&&d.tag===13&&(d.flags|=16384))),Pw(o,i)):wd(o)}function wd(i){var o=i;do{if((o.flags&32768)!==0){Pw(o,aa);return}i=o.return;var c=bE(o.alternate,o,go);if(c!==null){pe=c;return}if(o=o.sibling,o!==null){pe=o;return}pe=o=i}while(o!==null);_n===0&&(_n=5)}function Pw(i,o){do{var c=wE(i.alternate,i);if(c!==null){c.flags&=32767,pe=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){pe=i;return}pe=i=c}while(i!==null);_n=6,pe=null}function zw(i,o,c,d,v,w,M,H,tt){i.cancelPendingCommit=null;do xd();while(Vn!==0);if((Ie&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(w=o.lanes|o.childLanes,w|=cc,te(i,c,w,M,H,tt),i===Fe&&(pe=Fe=null,ge=0),Ec=o,ua=i,yo=c,G_=w,Z_=v,Ew=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,RE(dr,function(){return jw(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=P.T,P.T=null,v=U.p,U.p=2,M=Ie,Ie|=4;try{xE(i,o,c)}finally{Ie=M,U.p=v,P.T=d}}Vn=1,Uw(),Bw(),Hw()}}function Uw(){if(Vn===1){Vn=0;var i=ua,o=Ec,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=P.T,P.T=null;var d=U.p;U.p=2;var v=Ie;Ie|=4;try{yw(o,i);var w=og,M=sl(i.containerInfo),H=w.focusedElem,tt=w.selectionRange;if(M!==H&&H&&H.ownerDocument&&rc(H.ownerDocument.documentElement,H)){if(tt!==null&&br(H)){var ht=tt.start,vt=tt.end;if(vt===void 0&&(vt=ht),"selectionStart"in H)H.selectionStart=ht,H.selectionEnd=Math.min(vt,H.value.length);else{var Tt=H.ownerDocument||document,dt=Tt&&Tt.defaultView||window;if(dt.getSelection){var pt=dt.getSelection(),Ht=H.textContent.length,Kt=Math.min(tt.start,Ht),Ge=tt.end===void 0?Kt:Math.min(tt.end,Ht);!pt.extend&&Kt>Ge&&(M=Ge,Ge=Kt,Kt=M);var rt=il(H,Kt),st=il(H,Ge);if(rt&&st&&(pt.rangeCount!==1||pt.anchorNode!==rt.node||pt.anchorOffset!==rt.offset||pt.focusNode!==st.node||pt.focusOffset!==st.offset)){var lt=Tt.createRange();lt.setStart(rt.node,rt.offset),pt.removeAllRanges(),Kt>Ge?(pt.addRange(lt),pt.extend(st.node,st.offset)):(lt.setEnd(st.node,st.offset),pt.addRange(lt))}}}}for(Tt=[],pt=H;pt=pt.parentNode;)pt.nodeType===1&&Tt.push({element:pt,left:pt.scrollLeft,top:pt.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Tt.length;H++){var xt=Tt[H];xt.element.scrollLeft=xt.left,xt.element.scrollTop=xt.top}}Id=!!rg,og=rg=null}finally{Ie=v,U.p=d,P.T=c}}i.current=o,Vn=2}}function Bw(){if(Vn===2){Vn=0;var i=ua,o=Ec,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=P.T,P.T=null;var d=U.p;U.p=2;var v=Ie;Ie|=4;try{dw(i,o.alternate,o)}finally{Ie=v,U.p=d,P.T=c}}Vn=3}}function Hw(){if(Vn===4||Vn===3){Vn=0,Oi();var i=ua,o=Ec,c=yo,d=Ew;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Vn=5:(Vn=0,Ec=ua=null,Vw(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(ca=null),Ut(c),o=o.stateNode,Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(Zs,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=P.T,v=U.p,U.p=2,P.T=null;try{for(var w=i.onRecoverableError,M=0;M<d.length;M++){var H=d[M];w(H.value,{componentStack:H.stack})}}finally{P.T=o,U.p=v}}(yo&3)!==0&&xd(),Mr(i),v=i.pendingLanes,(c&261930)!==0&&(v&42)!==0?i===W_?oh++:(oh=0,W_=i):oh=0,ah(0)}}function Vw(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Vu(o)))}function xd(){return Uw(),Bw(),Hw(),jw()}function jw(){if(Vn!==5)return!1;var i=ua,o=G_;G_=0;var c=Ut(yo),d=P.T,v=U.p;try{U.p=32>c?32:c,P.T=null,c=Z_,Z_=null;var w=ua,M=yo;if(Vn=0,Ec=ua=null,yo=0,(Ie&6)!==0)throw Error(s(331));var H=Ie;if(Ie|=4,Sw(w.current),bw(w,w.current,M,c),Ie=H,ah(0,!1),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(Zs,w)}catch{}return!0}finally{U.p=v,P.T=d,Vw(i,o)}}function qw(i,o,c){o=f(c,o),o=T_(i.stateNode,o,2),i=ia(i,o,2),i!==null&&(Yt(i,2),Mr(i))}function Ue(i,o,c){if(i.tag===3)qw(i,i,c);else for(;o!==null;){if(o.tag===3){qw(o,i,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ca===null||!ca.has(d))){i=f(c,i),c=Gb(2),d=ia(o,c,2),d!==null&&(Zb(c,d,o,i),Yt(d,2),Mr(d));break}}o=o.return}}function X_(i,o,c){var d=i.pingCache;if(d===null){d=i.pingCache=new AE;var v=new Set;d.set(o,v)}else v=d.get(o),v===void 0&&(v=new Set,d.set(o,v));v.has(c)||(V_=!0,v.add(c),i=kE.bind(null,i,o,c),o.then(i,i))}function kE(i,o,c){var d=i.pingCache;d!==null&&d.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Fe===i&&(ge&c)===c&&(_n===4||_n===3&&(ge&62914560)===ge&&300>xn()-_d?(Ie&2)===0&&Cc(i,0):j_|=c,Ac===ge&&(Ac=0)),Mr(i)}function Gw(i,o){o===0&&(o=Nt()),i=Es(i,o),i!==null&&(Yt(i,o),Mr(i))}function OE(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),Gw(i,c)}function DE(i,o){var c=0;switch(i.tag){case 31:case 13:var d=i.stateNode,v=i.memoizedState;v!==null&&(c=v.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(o),Gw(i,c)}function RE(i,o){return Le(i,o)}var Sd=null,Mc=null,Q_=!1,Td=!1,$_=!1,fa=0;function Mr(i){i!==Mc&&i.next===null&&(Mc===null?Sd=Mc=i:Mc=Mc.next=i),Td=!0,Q_||(Q_=!0,NE())}function ah(i,o){if(!$_&&Td){$_=!0;do for(var c=!1,d=Sd;d!==null;){if(i!==0){var v=d.pendingLanes;if(v===0)var w=0;else{var M=d.suspendedLanes,H=d.pingedLanes;w=(1<<31-ii(42|i)+1)-1,w&=v&~(M&~H),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,Yw(d,w))}else w=ge,w=Zt(d,d===Fe?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||Dt(d,w)||(c=!0,Yw(d,w));d=d.next}while(c);$_=!1}}function IE(){Zw()}function Zw(){Td=Q_=!1;var i=0;fa!==0&&ZE()&&(i=fa);for(var o=xn(),c=null,d=Sd;d!==null;){var v=d.next,w=Ww(d,o);w===0?(d.next=null,c===null?Sd=v:c.next=v,v===null&&(Mc=c)):(c=d,(i!==0||(w&3)!==0)&&(Td=!0)),d=v}Vn!==0&&Vn!==5||ah(i),fa!==0&&(fa=0)}function Ww(i,o){for(var c=i.suspendedLanes,d=i.pingedLanes,v=i.expirationTimes,w=i.pendingLanes&-62914561;0<w;){var M=31-ii(w),H=1<<M,tt=v[M];tt===-1?((H&c)===0||(H&d)!==0)&&(v[M]=zt(H,o)):tt<=o&&(i.expiredLanes|=H),w&=~H}if(o=Fe,c=ge,c=Zt(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===o&&(ze===2||ze===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&un(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Dt(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(d!==null&&un(d),Ut(c)){case 2:case 8:c=Ba;break;case 32:c=dr;break;case 268435456:c=Ha;break;default:c=dr}return d=Fw.bind(null,i),c=Le(c,d),i.callbackPriority=o,i.callbackNode=c,o}return d!==null&&d!==null&&un(d),i.callbackPriority=2,i.callbackNode=null,2}function Fw(i,o){if(Vn!==0&&Vn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(xd()&&i.callbackNode!==c)return null;var d=ge;return d=Zt(i,i===Fe?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(Lw(i,d,o),Ww(i,xn()),i.callbackNode!=null&&i.callbackNode===c?Fw.bind(null,i):null)}function Yw(i,o){if(xd())return null;Lw(i,o,!0)}function NE(){FE(function(){(Ie&6)!==0?Le(yi,IE):Zw()})}function K_(){if(fa===0){var i=pc;i===0&&(i=Xr,Xr<<=1,(Xr&261888)===0&&(Xr=256)),fa=i}return fa}function Xw(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Vo(""+i)}function Qw(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function PE(i,o,c,d,v){if(o==="submit"&&c&&c.stateNode===v){var w=Xw((v[Fn]||null).action),M=d.submitter;M&&(o=(o=M[Fn]||null)?Xw(o.formAction):M.getAttribute("formAction"),o!==null&&(w=o,M=null));var H=new Kl("action","action",null,d,v);i.push({event:H,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(fa!==0){var tt=M?Qw(v,M):new FormData(v);y_(c,{pending:!0,data:tt,method:v.method,action:w},null,tt)}}else typeof w=="function"&&(H.preventDefault(),tt=M?Qw(v,M):new FormData(v),y_(c,{pending:!0,data:tt,method:v.method,action:w},w,tt))},currentTarget:v}]})}}for(var J_=0;J_<Sr.length;J_++){var tg=Sr[J_],zE=tg.toLowerCase(),UE=tg[0].toUpperCase()+tg.slice(1);Ni(zE,"on"+UE)}Ni(ol,"onAnimationEnd"),Ni(jf,"onAnimationIteration"),Ni(al,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(qm,"onTransitionRun"),Ni(qf,"onTransitionStart"),Ni(Gm,"onTransitionCancel"),Ni(Ko,"onTransitionEnd"),_r("onMouseEnter",["mouseout","mouseover"]),_r("onMouseLeave",["mouseout","mouseover"]),_r("onPointerEnter",["pointerout","pointerover"]),_r("onPointerLeave",["pointerout","pointerover"]),Jr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lh));function $w(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],v=d.event;d=d.listeners;t:{var w=void 0;if(o)for(var M=d.length-1;0<=M;M--){var H=d[M],tt=H.instance,ht=H.currentTarget;if(H=H.listener,tt!==w&&v.isPropagationStopped())break t;w=H,v.currentTarget=ht;try{w(v)}catch(vt){ll(vt)}v.currentTarget=null,w=tt}else for(M=0;M<d.length;M++){if(H=d[M],tt=H.instance,ht=H.currentTarget,H=H.listener,tt!==w&&v.isPropagationStopped())break t;w=H,v.currentTarget=ht;try{w(v)}catch(vt){ll(vt)}v.currentTarget=null,w=tt}}}}function me(i,o){var c=o[pr];c===void 0&&(c=o[pr]=new Set);var d=i+"__bubble";c.has(d)||(Kw(o,i,2,!1),c.add(d))}function eg(i,o,c){var d=0;o&&(d|=4),Kw(c,i,d,o)}var Ad="_reactListening"+Math.random().toString(36).slice(2);function ng(i){if(!i[Ad]){i[Ad]=!0,xf.forEach(function(c){c!=="selectionchange"&&(BE.has(c)||eg(c,!1,i),eg(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Ad]||(o[Ad]=!0,eg("selectionchange",!1,o))}}function Kw(i,o,c,d){switch(C1(o)){case 2:var v=dC;break;case 8:v=pC;break;default:v=gg}c=v.bind(null,o,c,i),v=void 0,!Ya||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),d?v!==void 0?i.addEventListener(o,c,{capture:!0,passive:v}):i.addEventListener(o,c,!0):v!==void 0?i.addEventListener(o,c,{passive:v}):i.addEventListener(o,c,!1)}function ig(i,o,c,d,v){var w=d;if((o&1)===0&&(o&2)===0&&d!==null)t:for(;;){if(d===null)return;var M=d.tag;if(M===3||M===4){var H=d.stateNode.containerInfo;if(H===v)break;if(M===4)for(M=d.return;M!==null;){var tt=M.tag;if((tt===3||tt===4)&&M.stateNode.containerInfo===v)return;M=M.return}for(;H!==null;){if(M=Kr(H),M===null)return;if(tt=M.tag,tt===5||tt===6||tt===26||tt===27){d=w=M;continue t}H=H.parentNode}}d=d.return}Au(function(){var ht=w,vt=Fa(c),Tt=[];t:{var dt=Gf.get(i);if(dt!==void 0){var pt=Kl,Ht=i;switch(i){case"keypress":if(Xa(c)===0)break t;case"keydown":case"keyup":pt=kf;break;case"focusin":Ht="focus",pt=Lu;break;case"focusout":Ht="blur",pt=Lu;break;case"beforeblur":case"afterblur":pt=Lu;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pt=Af;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pt=Dm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pt=zm;break;case ol:case jf:case al:pt=Mu;break;case Ko:pt=Rf;break;case"scroll":case"scrollend":pt=_e;break;case"wheel":pt=io;break;case"copy":case"cut":case"paste":pt=xs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pt=Of;break;case"toggle":case"beforetoggle":pt=Ka}var Kt=(o&4)!==0,Ge=!Kt&&(i==="scroll"||i==="scrollend"),rt=Kt?dt!==null?dt+"Capture":null:dt;Kt=[];for(var st=ht,lt;st!==null;){var xt=st;if(lt=xt.stateNode,xt=xt.tag,xt!==5&&xt!==26&&xt!==27||lt===null||rt===null||(xt=eo(st,rt),xt!=null&&Kt.push(ch(st,xt,lt))),Ge)break;st=st.return}0<Kt.length&&(dt=new pt(dt,Ht,null,c,vt),Tt.push({event:dt,listeners:Kt}))}}if((o&7)===0){t:{if(dt=i==="mouseover"||i==="pointerover",pt=i==="mouseout"||i==="pointerout",dt&&c!==$l&&(Ht=c.relatedTarget||c.fromElement)&&(Kr(Ht)||Ht[$r]))break t;if((pt||dt)&&(dt=vt.window===vt?vt:(dt=vt.ownerDocument)?dt.defaultView||dt.parentWindow:window,pt?(Ht=c.relatedTarget||c.toElement,pt=ht,Ht=Ht?Kr(Ht):null,Ht!==null&&(Ge=a(Ht),Kt=Ht.tag,Ht!==Ge||Kt!==5&&Kt!==27&&Kt!==6)&&(Ht=null)):(pt=null,Ht=ht),pt!==Ht)){if(Kt=Af,xt="onMouseLeave",rt="onMouseEnter",st="mouse",(i==="pointerout"||i==="pointerover")&&(Kt=Of,xt="onPointerLeave",rt="onPointerEnter",st="pointer"),Ge=pt==null?dt:mr(pt),lt=Ht==null?dt:mr(Ht),dt=new Kt(xt,st+"leave",pt,c,vt),dt.target=Ge,dt.relatedTarget=lt,xt=null,Kr(vt)===ht&&(Kt=new Kt(rt,st+"enter",Ht,c,vt),Kt.target=lt,Kt.relatedTarget=Ge,xt=Kt),Ge=xt,pt&&Ht)e:{for(Kt=HE,rt=pt,st=Ht,lt=0,xt=rt;xt;xt=Kt(xt))lt++;xt=0;for(var $t=st;$t;$t=Kt($t))xt++;for(;0<lt-xt;)rt=Kt(rt),lt--;for(;0<xt-lt;)st=Kt(st),xt--;for(;lt--;){if(rt===st||st!==null&&rt===st.alternate){Kt=rt;break e}rt=Kt(rt),st=Kt(st)}Kt=null}else Kt=null;pt!==null&&Jw(Tt,dt,pt,Kt,!1),Ht!==null&&Ge!==null&&Jw(Tt,Ge,Ht,Kt,!0)}}t:{if(dt=ht?mr(ht):window,pt=dt.nodeName&&dt.nodeName.toLowerCase(),pt==="select"||pt==="input"&&dt.type==="file")var Oe=nl;else if(Ss(dt))if(zf)Oe=jm;else{Oe=Vm;var Wt=Qs}else pt=dt.nodeName,!pt||pt.toLowerCase()!=="input"||dt.type!=="checkbox"&&dt.type!=="radio"?ht&&Wa(ht.elementType)&&(Oe=nl):Oe=Yo;if(Oe&&(Oe=Oe(i,ht))){Pf(Tt,Oe,c,vt);break t}Wt&&Wt(i,dt,ht),i==="focusout"&&ht&&dt.type==="number"&&ht.memoizedProps.value!=null&&Fs(dt,"number",dt.value)}switch(Wt=ht?mr(ht):window,i){case"focusin":(Ss(Wt)||Wt.contentEditable==="true")&&(wr=Wt,ac=ht,rl=null);break;case"focusout":rl=ac=wr=null;break;case"mousedown":Qo=!0;break;case"contextmenu":case"mouseup":case"dragend":Qo=!1,Hf(Tt,c,vt);break;case"selectionchange":if(oc)break;case"keydown":case"keyup":Hf(Tt,c,vt)}var ce;if(tc)t:{switch(i){case"compositionstart":var ye="onCompositionStart";break t;case"compositionend":ye="onCompositionEnd";break t;case"compositionupdate":ye="onCompositionUpdate";break t}ye=void 0}else Zo?Nf(i,c)&&(ye="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(ye="onCompositionStart");ye&&(ec&&c.locale!=="ko"&&(Zo||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Zo&&(ce=yr()):(ws=vt,no="value"in ws?ws.value:ws.textContent,Zo=!0)),Wt=Ed(ht,ye),0<Wt.length&&(ye=new ku(ye,i,null,c,vt),Tt.push({event:ye,listeners:Wt}),ce?ye.data=ce:(ce=Iu(c),ce!==null&&(ye.data=ce)))),(ce=Bm?ss(i,c):Wo(i,c))&&(ye=Ed(ht,"onBeforeInput"),0<ye.length&&(Wt=new ku("onBeforeInput","beforeinput",null,c,vt),Tt.push({event:Wt,listeners:ye}),Wt.data=ce)),PE(Tt,i,ht,c,vt)}$w(Tt,o)})}function ch(i,o,c){return{instance:i,listener:o,currentTarget:c}}function Ed(i,o){for(var c=o+"Capture",d=[];i!==null;){var v=i,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=eo(i,c),v!=null&&d.unshift(ch(i,v,w)),v=eo(i,o),v!=null&&d.push(ch(i,v,w))),i.tag===3)return d;i=i.return}return[]}function HE(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Jw(i,o,c,d,v){for(var w=o._reactName,M=[];c!==null&&c!==d;){var H=c,tt=H.alternate,ht=H.stateNode;if(H=H.tag,tt!==null&&tt===d)break;H!==5&&H!==26&&H!==27||ht===null||(tt=ht,v?(ht=eo(c,w),ht!=null&&M.unshift(ch(c,ht,tt))):v||(ht=eo(c,w),ht!=null&&M.push(ch(c,ht,tt)))),c=c.return}M.length!==0&&i.push({event:o,listeners:M})}var VE=/\r\n?/g,jE=/\u0000|\uFFFD/g;function t1(i){return(typeof i=="string"?i:""+i).replace(VE,`
`).replace(jE,"")}function e1(i,o){return o=t1(o),t1(i)===o}function qe(i,o,c,d,v,w){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||bs(i,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&bs(i,""+d);break;case"className":Ve(i,"class",d);break;case"tabIndex":Ve(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":Ve(i,c,d);break;case"style":Xl(i,d,w);break;case"data":if(o!=="object"){Ve(i,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=Vo(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(o!=="input"&&qe(i,o,"name",v.name,v,null),qe(i,o,"formEncType",v.formEncType,v,null),qe(i,o,"formMethod",v.formMethod,v,null),qe(i,o,"formTarget",v.formTarget,v,null)):(qe(i,o,"encType",v.encType,v,null),qe(i,o,"method",v.method,v,null),qe(i,o,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=Vo(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=Ri);break;case"onScroll":d!=null&&me("scroll",i);break;case"onScrollEnd":d!=null&&me("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(v.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=Vo(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":me("beforetoggle",i),me("toggle",i),fe(i,"popover",d);break;case"xlinkActuate":Di(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Di(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Di(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Di(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Di(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Di(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Di(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Di(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Di(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":fe(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Ql.get(c)||c,fe(i,c,d))}}function sg(i,o,c,d,v,w){switch(c){case"style":Xl(i,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(v.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"children":typeof d=="string"?bs(i,d):(typeof d=="number"||typeof d=="bigint")&&bs(i,""+d);break;case"onScroll":d!=null&&me("scroll",i);break;case"onScrollEnd":d!=null&&me("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Ri);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Sf.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),o=c.slice(2,v?c.length-7:void 0),w=i[Fn]||null,w=w!=null?w[c]:null,typeof w=="function"&&i.removeEventListener(o,w,v),typeof d=="function")){typeof w!="function"&&w!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,d,v);break t}c in i?i[c]=d:d===!0?i.setAttribute(c,""):fe(i,c,d)}}}function ai(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":me("error",i),me("load",i);var d=!1,v=!1,w;for(w in c)if(c.hasOwnProperty(w)){var M=c[w];if(M!=null)switch(w){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:qe(i,o,w,M,c,null)}}v&&qe(i,o,"srcSet",c.srcSet,c,null),d&&qe(i,o,"src",c.src,c,null);return;case"input":me("invalid",i);var H=w=M=v=null,tt=null,ht=null;for(d in c)if(c.hasOwnProperty(d)){var vt=c[d];if(vt!=null)switch(d){case"name":v=vt;break;case"type":M=vt;break;case"checked":tt=vt;break;case"defaultChecked":ht=vt;break;case"value":w=vt;break;case"defaultValue":H=vt;break;case"children":case"dangerouslySetInnerHTML":if(vt!=null)throw Error(s(137,o));break;default:qe(i,o,d,vt,c,null)}}Za(i,w,H,tt,ht,M,v,!1);return;case"select":me("invalid",i),d=M=w=null;for(v in c)if(c.hasOwnProperty(v)&&(H=c[v],H!=null))switch(v){case"value":w=H;break;case"defaultValue":M=H;break;case"multiple":d=H;default:qe(i,o,v,H,c,null)}o=w,c=M,i.multiple=!!d,o!=null?We(i,!!d,o,!1):c!=null&&We(i,!!d,c,!0);return;case"textarea":me("invalid",i),w=v=d=null;for(M in c)if(c.hasOwnProperty(M)&&(H=c[M],H!=null))switch(M){case"value":d=H;break;case"defaultValue":v=H;break;case"children":w=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(91));break;default:qe(i,o,M,H,c,null)}Bo(i,d,v,w);return;case"option":for(tt in c)c.hasOwnProperty(tt)&&(d=c[tt],d!=null)&&(tt==="selected"?i.selected=d&&typeof d!="function"&&typeof d!="symbol":qe(i,o,tt,d,c,null));return;case"dialog":me("beforetoggle",i),me("toggle",i),me("cancel",i),me("close",i);break;case"iframe":case"object":me("load",i);break;case"video":case"audio":for(d=0;d<lh.length;d++)me(lh[d],i);break;case"image":me("error",i),me("load",i);break;case"details":me("toggle",i);break;case"embed":case"source":case"link":me("error",i),me("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ht in c)if(c.hasOwnProperty(ht)&&(d=c[ht],d!=null))switch(ht){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:qe(i,o,ht,d,c,null)}return;default:if(Wa(o)){for(vt in c)c.hasOwnProperty(vt)&&(d=c[vt],d!==void 0&&sg(i,o,vt,d,c,void 0));return}}for(H in c)c.hasOwnProperty(H)&&(d=c[H],d!=null&&qe(i,o,H,d,c,null))}function qE(i,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,M=null,H=null,tt=null,ht=null,vt=null;for(pt in c){var Tt=c[pt];if(c.hasOwnProperty(pt)&&Tt!=null)switch(pt){case"checked":break;case"value":break;case"defaultValue":tt=Tt;default:d.hasOwnProperty(pt)||qe(i,o,pt,null,d,Tt)}}for(var dt in d){var pt=d[dt];if(Tt=c[dt],d.hasOwnProperty(dt)&&(pt!=null||Tt!=null))switch(dt){case"type":w=pt;break;case"name":v=pt;break;case"checked":ht=pt;break;case"defaultChecked":vt=pt;break;case"value":M=pt;break;case"defaultValue":H=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(s(137,o));break;default:pt!==Tt&&qe(i,o,dt,pt,d,Tt)}}xu(i,M,H,tt,ht,vt,w,v);return;case"select":pt=M=H=dt=null;for(w in c)if(tt=c[w],c.hasOwnProperty(w)&&tt!=null)switch(w){case"value":break;case"multiple":pt=tt;default:d.hasOwnProperty(w)||qe(i,o,w,null,d,tt)}for(v in d)if(w=d[v],tt=c[v],d.hasOwnProperty(v)&&(w!=null||tt!=null))switch(v){case"value":dt=w;break;case"defaultValue":H=w;break;case"multiple":M=w;default:w!==tt&&qe(i,o,v,w,d,tt)}o=H,c=M,d=pt,dt!=null?We(i,!!c,dt,!1):!!d!=!!c&&(o!=null?We(i,!!c,o,!0):We(i,!!c,c?[]:"",!1));return;case"textarea":pt=dt=null;for(H in c)if(v=c[H],c.hasOwnProperty(H)&&v!=null&&!d.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:qe(i,o,H,null,d,v)}for(M in d)if(v=d[M],w=c[M],d.hasOwnProperty(M)&&(v!=null||w!=null))switch(M){case"value":dt=v;break;case"defaultValue":pt=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==w&&qe(i,o,M,v,d,w)}gr(i,dt,pt);return;case"option":for(var Ht in c)dt=c[Ht],c.hasOwnProperty(Ht)&&dt!=null&&!d.hasOwnProperty(Ht)&&(Ht==="selected"?i.selected=!1:qe(i,o,Ht,null,d,dt));for(tt in d)dt=d[tt],pt=c[tt],d.hasOwnProperty(tt)&&dt!==pt&&(dt!=null||pt!=null)&&(tt==="selected"?i.selected=dt&&typeof dt!="function"&&typeof dt!="symbol":qe(i,o,tt,dt,d,pt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kt in c)dt=c[Kt],c.hasOwnProperty(Kt)&&dt!=null&&!d.hasOwnProperty(Kt)&&qe(i,o,Kt,null,d,dt);for(ht in d)if(dt=d[ht],pt=c[ht],d.hasOwnProperty(ht)&&dt!==pt&&(dt!=null||pt!=null))switch(ht){case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(s(137,o));break;default:qe(i,o,ht,dt,d,pt)}return;default:if(Wa(o)){for(var Ge in c)dt=c[Ge],c.hasOwnProperty(Ge)&&dt!==void 0&&!d.hasOwnProperty(Ge)&&sg(i,o,Ge,void 0,d,dt);for(vt in d)dt=d[vt],pt=c[vt],!d.hasOwnProperty(vt)||dt===pt||dt===void 0&&pt===void 0||sg(i,o,vt,dt,d,pt);return}}for(var rt in c)dt=c[rt],c.hasOwnProperty(rt)&&dt!=null&&!d.hasOwnProperty(rt)&&qe(i,o,rt,null,d,dt);for(Tt in d)dt=d[Tt],pt=c[Tt],!d.hasOwnProperty(Tt)||dt===pt||dt==null&&pt==null||qe(i,o,Tt,dt,d,pt)}function n1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function GE(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var v=c[d],w=v.transferSize,M=v.initiatorType,H=v.duration;if(w&&H&&n1(M)){for(M=0,H=v.responseEnd,d+=1;d<c.length;d++){var tt=c[d],ht=tt.startTime;if(ht>H)break;var vt=tt.transferSize,Tt=tt.initiatorType;vt&&n1(Tt)&&(tt=tt.responseEnd,M+=vt*(tt<H?1:(H-ht)/(tt-ht)))}if(--d,o+=8*(w+M)/(v.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var rg=null,og=null;function Cd(i){return i.nodeType===9?i:i.ownerDocument}function i1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function s1(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function ag(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var lg=null;function ZE(){var i=window.event;return i&&i.type==="popstate"?i===lg?!1:(lg=i,!0):(lg=null,!1)}var r1=typeof setTimeout=="function"?setTimeout:void 0,WE=typeof clearTimeout=="function"?clearTimeout:void 0,o1=typeof Promise=="function"?Promise:void 0,FE=typeof queueMicrotask=="function"?queueMicrotask:typeof o1<"u"?function(i){return o1.resolve(null).then(i).catch(YE)}:r1;function YE(i){setTimeout(function(){throw i})}function da(i){return i==="head"}function a1(i,o){var c=o,d=0;do{var v=c.nextSibling;if(i.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(d===0){i.removeChild(v),Rc(o);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")uh(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,uh(c);for(var w=c.firstChild;w;){var M=w.nextSibling,H=w.nodeName;w[ja]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=M}}else c==="body"&&uh(i.ownerDocument.body);c=v}while(c);Rc(o)}function l1(i,o){var c=i;i=0;do{var d=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=d}while(c)}function cg(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":cg(c),yu(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function XE(i,o,c,d){for(;i.nodeType===1;){var v=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[ja])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(w=i.getAttribute("rel"),w==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(w!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(w=i.getAttribute("src"),(w!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===w)return i}else return i;if(i=Ms(i.nextSibling),i===null)break}return null}function QE(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Ms(i.nextSibling),i===null))return null;return i}function c1(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Ms(i.nextSibling),i===null))return null;return i}function ug(i){return i.data==="$?"||i.data==="$~"}function hg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function $E(i,o){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||c.readyState!=="loading")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Ms(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var fg=null;function u1(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(o===0)return Ms(i.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}i=i.nextSibling}return null}function h1(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return i;o--}else c!=="/$"&&c!=="/&"||o++}i=i.previousSibling}return null}function f1(i,o,c){switch(o=Cd(c),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function uh(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);yu(i)}var ks=new Map,d1=new Set;function Ld(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var vo=U.d;U.d={f:KE,r:JE,D:tC,C:eC,L:nC,m:iC,X:rC,S:sC,M:oC};function KE(){var i=vo.f(),o=vd();return i||o}function JE(i){var o=Po(i);o!==null&&o.tag===5&&o.type==="form"?kb(o):vo.r(i)}var kc=typeof document>"u"?null:document;function p1(i,o,c){var d=kc;if(d&&typeof o=="string"&&o){var v=Ke(o);v='link[rel="'+i+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),d1.has(v)||(d1.add(v),i={rel:i,crossOrigin:c,href:o},d.querySelector(v)===null&&(o=d.createElement("link"),ai(o,"link",i),Mn(o),d.head.appendChild(o)))}}function tC(i){vo.D(i),p1("dns-prefetch",i,null)}function eC(i,o){vo.C(i,o),p1("preconnect",i,o)}function nC(i,o,c){vo.L(i,o,c);var d=kc;if(d&&i&&o){var v='link[rel="preload"][as="'+Ke(o)+'"]';o==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+Ke(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+Ke(c.imageSizes)+'"]')):v+='[href="'+Ke(i)+'"]';var w=v;switch(o){case"style":w=Oc(i);break;case"script":w=Dc(i)}ks.has(w)||(i=_({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),ks.set(w,i),d.querySelector(v)!==null||o==="style"&&d.querySelector(hh(w))||o==="script"&&d.querySelector(fh(w))||(o=d.createElement("link"),ai(o,"link",i),Mn(o),d.head.appendChild(o)))}}function iC(i,o){vo.m(i,o);var c=kc;if(c&&i){var d=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Ke(d)+'"][href="'+Ke(i)+'"]',w=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Dc(i)}if(!ks.has(w)&&(i=_({rel:"modulepreload",href:i},o),ks.set(w,i),c.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(fh(w)))return}d=c.createElement("link"),ai(d,"link",i),Mn(d),c.head.appendChild(d)}}}function sC(i,o,c){vo.S(i,o,c);var d=kc;if(d&&i){var v=zo(d).hoistableStyles,w=Oc(i);o=o||"default";var M=v.get(w);if(!M){var H={loading:0,preload:null};if(M=d.querySelector(hh(w)))H.loading=5;else{i=_({rel:"stylesheet",href:i,"data-precedence":o},c),(c=ks.get(w))&&dg(i,c);var tt=M=d.createElement("link");Mn(tt),ai(tt,"link",i),tt._p=new Promise(function(ht,vt){tt.onload=ht,tt.onerror=vt}),tt.addEventListener("load",function(){H.loading|=1}),tt.addEventListener("error",function(){H.loading|=2}),H.loading|=4,Md(M,o,d)}M={type:"stylesheet",instance:M,count:1,state:H},v.set(w,M)}}}function rC(i,o){vo.X(i,o);var c=kc;if(c&&i){var d=zo(c).hoistableScripts,v=Dc(i),w=d.get(v);w||(w=c.querySelector(fh(v)),w||(i=_({src:i,async:!0},o),(o=ks.get(v))&&pg(i,o),w=c.createElement("script"),Mn(w),ai(w,"link",i),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(v,w))}}function oC(i,o){vo.M(i,o);var c=kc;if(c&&i){var d=zo(c).hoistableScripts,v=Dc(i),w=d.get(v);w||(w=c.querySelector(fh(v)),w||(i=_({src:i,async:!0,type:"module"},o),(o=ks.get(v))&&pg(i,o),w=c.createElement("script"),Mn(w),ai(w,"link",i),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(v,w))}}function m1(i,o,c,d){var v=(v=yt.current)?Ld(v):null;if(!v)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Oc(c.href),c=zo(v).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Oc(c.href);var w=zo(v).hoistableStyles,M=w.get(i);if(M||(v=v.ownerDocument||v,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(i,M),(w=v.querySelector(hh(i)))&&!w._p&&(M.instance=w,M.state.loading=5),ks.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},ks.set(i,c),w||aC(v,i,c,M.state))),o&&d===null)throw Error(s(528,""));return M}if(o&&d!==null)throw Error(s(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Dc(c),c=zo(v).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Oc(i){return'href="'+Ke(i)+'"'}function hh(i){return'link[rel="stylesheet"]['+i+"]"}function _1(i){return _({},i,{"data-precedence":i.precedence,precedence:null})}function aC(i,o,c,d){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=i.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),ai(o,"link",c),Mn(o),i.head.appendChild(o))}function Dc(i){return'[src="'+Ke(i)+'"]'}function fh(i){return"script[async]"+i}function g1(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=i.querySelector('style[data-href~="'+Ke(c.href)+'"]');if(d)return o.instance=d,Mn(d),d;var v=_({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),Mn(d),ai(d,"style",v),Md(d,c.precedence,i),o.instance=d;case"stylesheet":v=Oc(c.href);var w=i.querySelector(hh(v));if(w)return o.state.loading|=4,o.instance=w,Mn(w),w;d=_1(c),(v=ks.get(v))&&dg(d,v),w=(i.ownerDocument||i).createElement("link"),Mn(w);var M=w;return M._p=new Promise(function(H,tt){M.onload=H,M.onerror=tt}),ai(w,"link",d),o.state.loading|=4,Md(w,c.precedence,i),o.instance=w;case"script":return w=Dc(c.src),(v=i.querySelector(fh(w)))?(o.instance=v,Mn(v),v):(d=c,(v=ks.get(w))&&(d=_({},c),pg(d,v)),i=i.ownerDocument||i,v=i.createElement("script"),Mn(v),ai(v,"link",d),i.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Md(d,c.precedence,i));return o.instance}function Md(i,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,w=v,M=0;M<d.length;M++){var H=d[M];if(H.dataset.precedence===o)w=H;else if(w!==v)break}w?w.parentNode.insertBefore(i,w.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function dg(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function pg(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var kd=null;function y1(i,o,c){if(kd===null){var d=new Map,v=kd=new Map;v.set(c,d)}else v=kd,d=v.get(c),d||(d=new Map,v.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),v=0;v<c.length;v++){var w=c[v];if(!(w[ja]||w[Ln]||i==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var M=w.getAttribute(o)||"";M=i+M;var H=d.get(M);H?H.push(w):d.set(M,[w])}}return d}function v1(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function lC(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(i=o.disabled,typeof o.precedence=="string"&&i==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function b1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function cC(i,o,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=Oc(d.href),w=o.querySelector(hh(v));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Od.bind(i),o.then(i,i)),c.state.loading|=4,c.instance=w,Mn(w);return}w=o.ownerDocument||o,d=_1(d),(v=ks.get(v))&&dg(d,v),w=w.createElement("link"),Mn(w);var M=w;M._p=new Promise(function(H,tt){M.onload=H,M.onerror=tt}),ai(w,"link",d),c.instance=w}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=Od.bind(i),o.addEventListener("load",c),o.addEventListener("error",c))}}var mg=0;function uC(i,o){return i.stylesheets&&i.count===0&&Rd(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var d=setTimeout(function(){if(i.stylesheets&&Rd(i,i.stylesheets),i.unsuspend){var w=i.unsuspend;i.unsuspend=null,w()}},6e4+o);0<i.imgBytes&&mg===0&&(mg=62500*GE());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Rd(i,i.stylesheets),i.unsuspend)){var w=i.unsuspend;i.unsuspend=null,w()}},(i.imgBytes>mg?50:800)+o);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function Od(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Dd=null;function Rd(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Dd=new Map,o.forEach(hC,i),Dd=null,Od.call(i))}function hC(i,o){if(!(o.state.loading&4)){var c=Dd.get(i);if(c)var d=c.get(null);else{c=new Map,Dd.set(i,c);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var M=v[w];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(c.set(M.dataset.precedence,M),d=M)}d&&c.set(null,d)}v=o.instance,M=v.getAttribute("data-precedence"),w=c.get(M)||d,w===d&&c.set(null,v),c.set(M,v),this.count++,d=Od.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),w?w.parentNode.insertBefore(v,w.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),o.state.loading|=4}}var dh={$$typeof:O,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function fC(i,o,c,d,v,w,M,H,tt){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ft(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ft(0),this.hiddenUpdates=Ft(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=tt,this.incompleteTransitions=new Map}function w1(i,o,c,d,v,w,M,H,tt,ht,vt,Tt){return i=new fC(i,o,c,M,tt,ht,vt,Tt,H),o=1,w===!0&&(o|=24),w=hi(3,null,null,o),i.current=w,w.stateNode=i,o=Ym(),o.refCount++,i.pooledCache=o,o.refCount++,w.memoizedState={element:d,isDehydrated:c,cache:o},Km(w),i}function x1(i){return i?(i=so,i):so}function S1(i,o,c,d,v,w){v=x1(v),d.context===null?d.context=v:d.pendingContext=v,d=na(o),d.payload={element:c},w=w===void 0?null:w,w!==null&&(d.callback=w),c=ia(i,d,o),c!==null&&(ji(c,i,o),Zu(c,i,o))}function T1(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function _g(i,o){T1(i,o),(i=i.alternate)&&T1(i,o)}function A1(i){if(i.tag===13||i.tag===31){var o=Es(i,67108864);o!==null&&ji(o,i,67108864),_g(i,67108864)}}function E1(i){if(i.tag===13||i.tag===31){var o=cs();o=Sn(o);var c=Es(i,o);c!==null&&ji(c,i,o),_g(i,o)}}var Id=!0;function dC(i,o,c,d){var v=P.T;P.T=null;var w=U.p;try{U.p=2,gg(i,o,c,d)}finally{U.p=w,P.T=v}}function pC(i,o,c,d){var v=P.T;P.T=null;var w=U.p;try{U.p=8,gg(i,o,c,d)}finally{U.p=w,P.T=v}}function gg(i,o,c,d){if(Id){var v=yg(d);if(v===null)ig(i,o,d,Nd,c),L1(i,d);else if(_C(v,i,o,c,d))d.stopPropagation();else if(L1(i,d),o&4&&-1<mC.indexOf(i)){for(;v!==null;){var w=Po(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var M=Ot(w.pendingLanes);if(M!==0){var H=w;for(H.pendingLanes|=2,H.entangledLanes|=2;M;){var tt=1<<31-ii(M);H.entanglements[1]|=tt,M&=~tt}Mr(w),(Ie&6)===0&&(gd=xn()+500,ah(0))}}break;case 31:case 13:H=Es(w,2),H!==null&&ji(H,w,2),vd(),_g(w,2)}if(w=yg(d),w===null&&ig(i,o,d,Nd,c),w===v)break;v=w}v!==null&&d.stopPropagation()}else ig(i,o,d,null,c)}}function yg(i){return i=Fa(i),vg(i)}var Nd=null;function vg(i){if(Nd=null,i=Kr(i),i!==null){var o=a(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=u(o),i!==null)return i;i=null}else if(c===31){if(i=h(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Nd=i,null}function C1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(No()){case yi:return 2;case Ba:return 8;case dr:case pu:return 32;case Ha:return 268435456;default:return 32}default:return 32}}var bg=!1,pa=null,ma=null,_a=null,ph=new Map,mh=new Map,ga=[],mC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function L1(i,o){switch(i){case"focusin":case"focusout":pa=null;break;case"dragenter":case"dragleave":ma=null;break;case"mouseover":case"mouseout":_a=null;break;case"pointerover":case"pointerout":ph.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":mh.delete(o.pointerId)}}function _h(i,o,c,d,v,w){return i===null||i.nativeEvent!==w?(i={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:w,targetContainers:[v]},o!==null&&(o=Po(o),o!==null&&A1(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),i)}function _C(i,o,c,d,v){switch(o){case"focusin":return pa=_h(pa,i,o,c,d,v),!0;case"dragenter":return ma=_h(ma,i,o,c,d,v),!0;case"mouseover":return _a=_h(_a,i,o,c,d,v),!0;case"pointerover":var w=v.pointerId;return ph.set(w,_h(ph.get(w)||null,i,o,c,d,v)),!0;case"gotpointercapture":return w=v.pointerId,mh.set(w,_h(mh.get(w)||null,i,o,c,d,v)),!0}return!1}function M1(i){var o=Kr(i.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=u(c),o!==null){i.blockedOn=o,Va(i.priority,function(){E1(c)});return}}else if(o===31){if(o=h(c),o!==null){i.blockedOn=o,Va(i.priority,function(){E1(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Pd(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=yg(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);$l=d,c.target.dispatchEvent(d),$l=null}else return o=Po(c),o!==null&&A1(o),i.blockedOn=c,!1;o.shift()}return!0}function k1(i,o,c){Pd(i)&&c.delete(o)}function gC(){bg=!1,pa!==null&&Pd(pa)&&(pa=null),ma!==null&&Pd(ma)&&(ma=null),_a!==null&&Pd(_a)&&(_a=null),ph.forEach(k1),mh.forEach(k1)}function zd(i,o){i.blockedOn===o&&(i.blockedOn=null,bg||(bg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,gC)))}var Ud=null;function O1(i){Ud!==i&&(Ud=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ud===i&&(Ud=null);for(var o=0;o<i.length;o+=3){var c=i[o],d=i[o+1],v=i[o+2];if(typeof d!="function"){if(vg(d||c)===null)continue;break}var w=Po(c);w!==null&&(i.splice(o,3),o-=3,y_(w,{pending:!0,data:v,method:c.method,action:d},d,v))}}))}function Rc(i){function o(tt){return zd(tt,i)}pa!==null&&zd(pa,i),ma!==null&&zd(ma,i),_a!==null&&zd(_a,i),ph.forEach(o),mh.forEach(o);for(var c=0;c<ga.length;c++){var d=ga[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<ga.length&&(c=ga[0],c.blockedOn===null);)M1(c),c.blockedOn===null&&ga.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var v=c[d],w=c[d+1],M=v[Fn]||null;if(typeof w=="function")M||O1(c);else if(M){var H=null;if(w&&w.hasAttribute("formAction")){if(v=w,M=w[Fn]||null)H=M.formAction;else if(vg(v)!==null)continue}else H=M.action;typeof H=="function"?c[d+1]=H:(c.splice(d,3),d-=3),O1(c)}}}function D1(){function i(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(M){return v=M})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function wg(i){this._internalRoot=i}Bd.prototype.render=wg.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var c=o.current,d=cs();S1(c,d,i,o,null,null)},Bd.prototype.unmount=wg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;S1(i.current,2,null,i,null,null),vd(),o[$r]=null}};function Bd(i){this._internalRoot=i}Bd.prototype.unstable_scheduleHydration=function(i){if(i){var o=vi();i={blockedOn:null,target:i,priority:o};for(var c=0;c<ga.length&&o!==0&&o<ga[c].priority;c++);ga.splice(c,0,i),c===0&&M1(i)}};var R1=t.version;if(R1!=="19.2.4")throw Error(s(527,R1,"19.2.4"));U.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(o),i=i!==null?y(i):null,i=i===null?null:i.stateNode,i};var yC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hd.isDisabled&&Hd.supportsFiber)try{Zs=Hd.inject(yC),Un=Hd}catch{}}return yh.createRoot=function(i,o){if(!r(i))throw Error(s(299));var c=!1,d="",v=Hb,w=Vb,M=jb;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError)),o=w1(i,1,!1,null,null,c,d,null,v,w,M,D1),i[$r]=o.current,ng(i),new wg(o)},yh.hydrateRoot=function(i,o,c){if(!r(i))throw Error(s(299));var d=!1,v="",w=Hb,M=Vb,H=jb,tt=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(M=c.onCaughtError),c.onRecoverableError!==void 0&&(H=c.onRecoverableError),c.formState!==void 0&&(tt=c.formState)),o=w1(i,1,!0,o,c??null,d,v,tt,w,M,H,D1),o.context=x1(null),c=o.current,d=cs(),d=Sn(d),v=na(d),v.callback=null,ia(c,v,d),c=d,o.current.lanes=c,Yt(o,c),Mr(o),i[$r]=o.current,ng(i),new Bd(o)},yh.version="19.2.4",yh}var q1;function LC(){if(q1)return Tg.exports;q1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Tg.exports=CC(),Tg.exports}var MC=LC(),kC={};function OC(n){let t="pending",e,s;const r=n.then(a=>{t="success",e=a},a=>{t="error",s=a});return{promise:n,read(){switch(t){case"pending":throw r;case"error":throw s;case"success":return e}}}}const m2=Pt.createContext(null);function DC(){const n=Pt.useContext(m2);if(!n)throw new Error("Repo was not found on RepoContext.");return n}const RC=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function vy(n){return typeof n=="string"&&RC.test(n)}function IC(n){if(!vy(n))throw TypeError("Invalid UUID");let t;const e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function by(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var nr={},Ye={},di={},Lg={},vh={},G1;function NC(){return G1||(G1=1,Object.defineProperty(vh,"__esModule",{value:!0}),vh.crypto=void 0,vh.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),vh}var Z1;function _2(){return Z1||(Z1=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.wrapXOFConstructorWithOpts=n.wrapConstructorWithOpts=n.wrapConstructor=n.Hash=n.nextTick=n.swap32IfBE=n.byteSwapIfBE=n.swap8IfBE=n.isLE=void 0,n.isBytes=e,n.anumber=s,n.abytes=r,n.ahash=a,n.aexists=u,n.aoutput=h,n.u8=p,n.u32=m,n.clean=y,n.createView=_,n.rotr=b,n.rotl=S,n.byteSwap=x,n.byteSwap32=A,n.bytesToHex=z,n.hexToBytes=N,n.asyncLoop=F,n.utf8ToBytes=G,n.bytesToUtf8=q,n.toBytes=W,n.kdfInputToBytes=Q,n.concatBytes=et,n.checkOpts=k,n.createHasher=Z,n.createOptHasher=P,n.createXOFer=U,n.randomBytes=K;const t=NC();function e(D){return D instanceof Uint8Array||ArrayBuffer.isView(D)&&D.constructor.name==="Uint8Array"}function s(D){if(!Number.isSafeInteger(D)||D<0)throw new Error("positive integer expected, got "+D)}function r(D,...V){if(!e(D))throw new Error("Uint8Array expected");if(V.length>0&&!V.includes(D.length))throw new Error("Uint8Array expected of length "+V+", got length="+D.length)}function a(D){if(typeof D!="function"||typeof D.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");s(D.outputLen),s(D.blockLen)}function u(D,V=!0){if(D.destroyed)throw new Error("Hash instance has been destroyed");if(V&&D.finished)throw new Error("Hash#digest() has already been called")}function h(D,V){r(D);const I=V.outputLen;if(D.length<I)throw new Error("digestInto() expects output buffer of length at least "+I)}function p(D){return new Uint8Array(D.buffer,D.byteOffset,D.byteLength)}function m(D){return new Uint32Array(D.buffer,D.byteOffset,Math.floor(D.byteLength/4))}function y(...D){for(let V=0;V<D.length;V++)D[V].fill(0)}function _(D){return new DataView(D.buffer,D.byteOffset,D.byteLength)}function b(D,V){return D<<32-V|D>>>V}function S(D,V){return D<<V|D>>>32-V>>>0}n.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function x(D){return D<<24&4278190080|D<<8&16711680|D>>>8&65280|D>>>24&255}n.swap8IfBE=n.isLE?D=>D:D=>x(D),n.byteSwapIfBE=n.swap8IfBE;function A(D){for(let V=0;V<D.length;V++)D[V]=x(D[V]);return D}n.swap32IfBE=n.isLE?D=>D:A;const E=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",R=Array.from({length:256},(D,V)=>V.toString(16).padStart(2,"0"));function z(D){if(r(D),E)return D.toHex();let V="";for(let I=0;I<D.length;I++)V+=R[D[I]];return V}const O={_0:48,_9:57,A:65,F:70,a:97,f:102};function $(D){if(D>=O._0&&D<=O._9)return D-O._0;if(D>=O.A&&D<=O.F)return D-(O.A-10);if(D>=O.a&&D<=O.f)return D-(O.a-10)}function N(D){if(typeof D!="string")throw new Error("hex string expected, got "+typeof D);if(E)return Uint8Array.fromHex(D);const V=D.length,I=V/2;if(V%2)throw new Error("hex string expected, got unpadded hex of length "+V);const Y=new Uint8Array(I);for(let at=0,mt=0;at<I;at++,mt+=2){const gt=$(D.charCodeAt(mt)),yt=$(D.charCodeAt(mt+1));if(gt===void 0||yt===void 0){const kt=D[mt]+D[mt+1];throw new Error('hex string expected, got non-hex character "'+kt+'" at index '+mt)}Y[at]=gt*16+yt}return Y}const j=async()=>{};n.nextTick=j;async function F(D,V,I){let Y=Date.now();for(let at=0;at<D;at++){I(at);const mt=Date.now()-Y;mt>=0&&mt<V||(await(0,n.nextTick)(),Y+=mt)}}function G(D){if(typeof D!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(D))}function q(D){return new TextDecoder().decode(D)}function W(D){return typeof D=="string"&&(D=G(D)),r(D),D}function Q(D){return typeof D=="string"&&(D=G(D)),r(D),D}function et(...D){let V=0;for(let Y=0;Y<D.length;Y++){const at=D[Y];r(at),V+=at.length}const I=new Uint8Array(V);for(let Y=0,at=0;Y<D.length;Y++){const mt=D[Y];I.set(mt,at),at+=mt.length}return I}function k(D,V){if(V!==void 0&&{}.toString.call(V)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(D,V)}class X{}n.Hash=X;function Z(D){const V=Y=>D().update(W(Y)).digest(),I=D();return V.outputLen=I.outputLen,V.blockLen=I.blockLen,V.create=()=>D(),V}function P(D){const V=(Y,at)=>D(at).update(W(Y)).digest(),I=D({});return V.outputLen=I.outputLen,V.blockLen=I.blockLen,V.create=Y=>D(Y),V}function U(D){const V=(Y,at)=>D(at).update(W(Y)).digest(),I=D({});return V.outputLen=I.outputLen,V.blockLen=I.blockLen,V.create=Y=>D(Y),V}n.wrapConstructor=Z,n.wrapConstructorWithOpts=P,n.wrapXOFConstructorWithOpts=U;function K(D=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(D));if(t.crypto&&typeof t.crypto.randomBytes=="function")return Uint8Array.from(t.crypto.randomBytes(D));throw new Error("crypto.getRandomValues must be defined")}})(Lg)),Lg}var W1;function PC(){if(W1)return di;W1=1,Object.defineProperty(di,"__esModule",{value:!0}),di.SHA512_IV=di.SHA384_IV=di.SHA224_IV=di.SHA256_IV=di.HashMD=void 0,di.setBigUint64=t,di.Chi=e,di.Maj=s;const n=_2();function t(a,u,h,p){if(typeof a.setBigUint64=="function")return a.setBigUint64(u,h,p);const m=BigInt(32),y=BigInt(4294967295),_=Number(h>>m&y),b=Number(h&y),S=p?4:0,x=p?0:4;a.setUint32(u+S,_,p),a.setUint32(u+x,b,p)}function e(a,u,h){return a&u^~a&h}function s(a,u,h){return a&u^a&h^u&h}class r extends n.Hash{constructor(u,h,p,m){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=u,this.outputLen=h,this.padOffset=p,this.isLE=m,this.buffer=new Uint8Array(u),this.view=(0,n.createView)(this.buffer)}update(u){(0,n.aexists)(this),u=(0,n.toBytes)(u),(0,n.abytes)(u);const{view:h,buffer:p,blockLen:m}=this,y=u.length;for(let _=0;_<y;){const b=Math.min(m-this.pos,y-_);if(b===m){const S=(0,n.createView)(u);for(;m<=y-_;_+=m)this.process(S,_);continue}p.set(u.subarray(_,_+b),this.pos),this.pos+=b,_+=b,this.pos===m&&(this.process(h,0),this.pos=0)}return this.length+=u.length,this.roundClean(),this}digestInto(u){(0,n.aexists)(this),(0,n.aoutput)(u,this),this.finished=!0;const{buffer:h,view:p,blockLen:m,isLE:y}=this;let{pos:_}=this;h[_++]=128,(0,n.clean)(this.buffer.subarray(_)),this.padOffset>m-_&&(this.process(p,0),_=0);for(let E=_;E<m;E++)h[E]=0;t(p,m-8,BigInt(this.length*8),y),this.process(p,0);const b=(0,n.createView)(u),S=this.outputLen;if(S%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const x=S/4,A=this.get();if(x>A.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<x;E++)b.setUint32(4*E,A[E],y)}digest(){const{buffer:u,outputLen:h}=this;this.digestInto(u);const p=u.slice(0,h);return this.destroy(),p}_cloneInto(u){u||(u=new this.constructor),u.set(...this.get());const{blockLen:h,buffer:p,length:m,finished:y,destroyed:_,pos:b}=this;return u.destroyed=_,u.finished=y,u.length=m,u.pos=b,m%h&&u.buffer.set(p),u}clone(){return this._cloneInto()}}return di.HashMD=r,di.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),di.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),di.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),di.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),di}var ee={},F1;function zC(){if(F1)return ee;F1=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.toBig=ee.shrSL=ee.shrSH=ee.rotrSL=ee.rotrSH=ee.rotrBL=ee.rotrBH=ee.rotr32L=ee.rotr32H=ee.rotlSL=ee.rotlSH=ee.rotlBL=ee.rotlBH=ee.add5L=ee.add5H=ee.add4L=ee.add4H=ee.add3L=ee.add3H=void 0,ee.add=R,ee.fromBig=e,ee.split=s;const n=BigInt(2**32-1),t=BigInt(32);function e(q,W=!1){return W?{h:Number(q&n),l:Number(q>>t&n)}:{h:Number(q>>t&n)|0,l:Number(q&n)|0}}function s(q,W=!1){const Q=q.length;let et=new Uint32Array(Q),k=new Uint32Array(Q);for(let X=0;X<Q;X++){const{h:Z,l:P}=e(q[X],W);[et[X],k[X]]=[Z,P]}return[et,k]}const r=(q,W)=>BigInt(q>>>0)<<t|BigInt(W>>>0);ee.toBig=r;const a=(q,W,Q)=>q>>>Q;ee.shrSH=a;const u=(q,W,Q)=>q<<32-Q|W>>>Q;ee.shrSL=u;const h=(q,W,Q)=>q>>>Q|W<<32-Q;ee.rotrSH=h;const p=(q,W,Q)=>q<<32-Q|W>>>Q;ee.rotrSL=p;const m=(q,W,Q)=>q<<64-Q|W>>>Q-32;ee.rotrBH=m;const y=(q,W,Q)=>q>>>Q-32|W<<64-Q;ee.rotrBL=y;const _=(q,W)=>W;ee.rotr32H=_;const b=(q,W)=>q;ee.rotr32L=b;const S=(q,W,Q)=>q<<Q|W>>>32-Q;ee.rotlSH=S;const x=(q,W,Q)=>W<<Q|q>>>32-Q;ee.rotlSL=x;const A=(q,W,Q)=>W<<Q-32|q>>>64-Q;ee.rotlBH=A;const E=(q,W,Q)=>q<<Q-32|W>>>64-Q;ee.rotlBL=E;function R(q,W,Q,et){const k=(W>>>0)+(et>>>0);return{h:q+Q+(k/2**32|0)|0,l:k|0}}const z=(q,W,Q)=>(q>>>0)+(W>>>0)+(Q>>>0);ee.add3L=z;const O=(q,W,Q,et)=>W+Q+et+(q/2**32|0)|0;ee.add3H=O;const $=(q,W,Q,et)=>(q>>>0)+(W>>>0)+(Q>>>0)+(et>>>0);ee.add4L=$;const N=(q,W,Q,et,k)=>W+Q+et+k+(q/2**32|0)|0;ee.add4H=N;const j=(q,W,Q,et,k)=>(q>>>0)+(W>>>0)+(Q>>>0)+(et>>>0)+(k>>>0);ee.add5L=j;const F=(q,W,Q,et,k,X)=>W+Q+et+k+X+(q/2**32|0)|0;ee.add5H=F;const G={fromBig:e,split:s,toBig:r,shrSH:a,shrSL:u,rotrSH:h,rotrSL:p,rotrBH:m,rotrBL:y,rotr32H:_,rotr32L:b,rotlSH:S,rotlSL:x,rotlBH:A,rotlBL:E,add:R,add3L:z,add3H:O,add4L:$,add4H:N,add5H:F,add5L:j};return ee.default=G,ee}var Y1;function UC(){if(Y1)return Ye;Y1=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.sha512_224=Ye.sha512_256=Ye.sha384=Ye.sha512=Ye.sha224=Ye.sha256=Ye.SHA512_256=Ye.SHA512_224=Ye.SHA384=Ye.SHA512=Ye.SHA224=Ye.SHA256=void 0;const n=PC(),t=zC(),e=_2(),s=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),r=new Uint32Array(64);class a extends n.HashMD{constructor(O=32){super(64,O,8,!1),this.A=n.SHA256_IV[0]|0,this.B=n.SHA256_IV[1]|0,this.C=n.SHA256_IV[2]|0,this.D=n.SHA256_IV[3]|0,this.E=n.SHA256_IV[4]|0,this.F=n.SHA256_IV[5]|0,this.G=n.SHA256_IV[6]|0,this.H=n.SHA256_IV[7]|0}get(){const{A:O,B:$,C:N,D:j,E:F,F:G,G:q,H:W}=this;return[O,$,N,j,F,G,q,W]}set(O,$,N,j,F,G,q,W){this.A=O|0,this.B=$|0,this.C=N|0,this.D=j|0,this.E=F|0,this.F=G|0,this.G=q|0,this.H=W|0}process(O,$){for(let k=0;k<16;k++,$+=4)r[k]=O.getUint32($,!1);for(let k=16;k<64;k++){const X=r[k-15],Z=r[k-2],P=(0,e.rotr)(X,7)^(0,e.rotr)(X,18)^X>>>3,U=(0,e.rotr)(Z,17)^(0,e.rotr)(Z,19)^Z>>>10;r[k]=U+r[k-7]+P+r[k-16]|0}let{A:N,B:j,C:F,D:G,E:q,F:W,G:Q,H:et}=this;for(let k=0;k<64;k++){const X=(0,e.rotr)(q,6)^(0,e.rotr)(q,11)^(0,e.rotr)(q,25),Z=et+X+(0,n.Chi)(q,W,Q)+s[k]+r[k]|0,U=((0,e.rotr)(N,2)^(0,e.rotr)(N,13)^(0,e.rotr)(N,22))+(0,n.Maj)(N,j,F)|0;et=Q,Q=W,W=q,q=G+Z|0,G=F,F=j,j=N,N=Z+U|0}N=N+this.A|0,j=j+this.B|0,F=F+this.C|0,G=G+this.D|0,q=q+this.E|0,W=W+this.F|0,Q=Q+this.G|0,et=et+this.H|0,this.set(N,j,F,G,q,W,Q,et)}roundClean(){(0,e.clean)(r)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,e.clean)(this.buffer)}}Ye.SHA256=a;class u extends a{constructor(){super(28),this.A=n.SHA224_IV[0]|0,this.B=n.SHA224_IV[1]|0,this.C=n.SHA224_IV[2]|0,this.D=n.SHA224_IV[3]|0,this.E=n.SHA224_IV[4]|0,this.F=n.SHA224_IV[5]|0,this.G=n.SHA224_IV[6]|0,this.H=n.SHA224_IV[7]|0}}Ye.SHA224=u;const h=t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(z=>BigInt(z))),p=h[0],m=h[1],y=new Uint32Array(80),_=new Uint32Array(80);class b extends n.HashMD{constructor(O=64){super(128,O,16,!1),this.Ah=n.SHA512_IV[0]|0,this.Al=n.SHA512_IV[1]|0,this.Bh=n.SHA512_IV[2]|0,this.Bl=n.SHA512_IV[3]|0,this.Ch=n.SHA512_IV[4]|0,this.Cl=n.SHA512_IV[5]|0,this.Dh=n.SHA512_IV[6]|0,this.Dl=n.SHA512_IV[7]|0,this.Eh=n.SHA512_IV[8]|0,this.El=n.SHA512_IV[9]|0,this.Fh=n.SHA512_IV[10]|0,this.Fl=n.SHA512_IV[11]|0,this.Gh=n.SHA512_IV[12]|0,this.Gl=n.SHA512_IV[13]|0,this.Hh=n.SHA512_IV[14]|0,this.Hl=n.SHA512_IV[15]|0}get(){const{Ah:O,Al:$,Bh:N,Bl:j,Ch:F,Cl:G,Dh:q,Dl:W,Eh:Q,El:et,Fh:k,Fl:X,Gh:Z,Gl:P,Hh:U,Hl:K}=this;return[O,$,N,j,F,G,q,W,Q,et,k,X,Z,P,U,K]}set(O,$,N,j,F,G,q,W,Q,et,k,X,Z,P,U,K){this.Ah=O|0,this.Al=$|0,this.Bh=N|0,this.Bl=j|0,this.Ch=F|0,this.Cl=G|0,this.Dh=q|0,this.Dl=W|0,this.Eh=Q|0,this.El=et|0,this.Fh=k|0,this.Fl=X|0,this.Gh=Z|0,this.Gl=P|0,this.Hh=U|0,this.Hl=K|0}process(O,$){for(let I=0;I<16;I++,$+=4)y[I]=O.getUint32($),_[I]=O.getUint32($+=4);for(let I=16;I<80;I++){const Y=y[I-15]|0,at=_[I-15]|0,mt=t.rotrSH(Y,at,1)^t.rotrSH(Y,at,8)^t.shrSH(Y,at,7),gt=t.rotrSL(Y,at,1)^t.rotrSL(Y,at,8)^t.shrSL(Y,at,7),yt=y[I-2]|0,kt=_[I-2]|0,Mt=t.rotrSH(yt,kt,19)^t.rotrBH(yt,kt,61)^t.shrSH(yt,kt,6),oe=t.rotrSL(yt,kt,19)^t.rotrBL(yt,kt,61)^t.shrSL(yt,kt,6),Ne=t.add4L(gt,oe,_[I-7],_[I-16]),Be=t.add4H(Ne,mt,Mt,y[I-7],y[I-16]);y[I]=Be|0,_[I]=Ne|0}let{Ah:N,Al:j,Bh:F,Bl:G,Ch:q,Cl:W,Dh:Q,Dl:et,Eh:k,El:X,Fh:Z,Fl:P,Gh:U,Gl:K,Hh:D,Hl:V}=this;for(let I=0;I<80;I++){const Y=t.rotrSH(k,X,14)^t.rotrSH(k,X,18)^t.rotrBH(k,X,41),at=t.rotrSL(k,X,14)^t.rotrSL(k,X,18)^t.rotrBL(k,X,41),mt=k&Z^~k&U,gt=X&P^~X&K,yt=t.add5L(V,at,gt,m[I],_[I]),kt=t.add5H(yt,D,Y,mt,p[I],y[I]),Mt=yt|0,oe=t.rotrSH(N,j,28)^t.rotrBH(N,j,34)^t.rotrBH(N,j,39),Ne=t.rotrSL(N,j,28)^t.rotrBL(N,j,34)^t.rotrBL(N,j,39),Be=N&F^N&q^F&q,sn=j&G^j&W^G&W;D=U|0,V=K|0,U=Z|0,K=P|0,Z=k|0,P=X|0,{h:k,l:X}=t.add(Q|0,et|0,kt|0,Mt|0),Q=q|0,et=W|0,q=F|0,W=G|0,F=N|0,G=j|0;const ni=t.add3L(Mt,Ne,sn);N=t.add3H(ni,kt,oe,Be),j=ni|0}({h:N,l:j}=t.add(this.Ah|0,this.Al|0,N|0,j|0)),{h:F,l:G}=t.add(this.Bh|0,this.Bl|0,F|0,G|0),{h:q,l:W}=t.add(this.Ch|0,this.Cl|0,q|0,W|0),{h:Q,l:et}=t.add(this.Dh|0,this.Dl|0,Q|0,et|0),{h:k,l:X}=t.add(this.Eh|0,this.El|0,k|0,X|0),{h:Z,l:P}=t.add(this.Fh|0,this.Fl|0,Z|0,P|0),{h:U,l:K}=t.add(this.Gh|0,this.Gl|0,U|0,K|0),{h:D,l:V}=t.add(this.Hh|0,this.Hl|0,D|0,V|0),this.set(N,j,F,G,q,W,Q,et,k,X,Z,P,U,K,D,V)}roundClean(){(0,e.clean)(y,_)}destroy(){(0,e.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Ye.SHA512=b;class S extends b{constructor(){super(48),this.Ah=n.SHA384_IV[0]|0,this.Al=n.SHA384_IV[1]|0,this.Bh=n.SHA384_IV[2]|0,this.Bl=n.SHA384_IV[3]|0,this.Ch=n.SHA384_IV[4]|0,this.Cl=n.SHA384_IV[5]|0,this.Dh=n.SHA384_IV[6]|0,this.Dl=n.SHA384_IV[7]|0,this.Eh=n.SHA384_IV[8]|0,this.El=n.SHA384_IV[9]|0,this.Fh=n.SHA384_IV[10]|0,this.Fl=n.SHA384_IV[11]|0,this.Gh=n.SHA384_IV[12]|0,this.Gl=n.SHA384_IV[13]|0,this.Hh=n.SHA384_IV[14]|0,this.Hl=n.SHA384_IV[15]|0}}Ye.SHA384=S;const x=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),A=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class E extends b{constructor(){super(28),this.Ah=x[0]|0,this.Al=x[1]|0,this.Bh=x[2]|0,this.Bl=x[3]|0,this.Ch=x[4]|0,this.Cl=x[5]|0,this.Dh=x[6]|0,this.Dl=x[7]|0,this.Eh=x[8]|0,this.El=x[9]|0,this.Fh=x[10]|0,this.Fl=x[11]|0,this.Gh=x[12]|0,this.Gl=x[13]|0,this.Hh=x[14]|0,this.Hl=x[15]|0}}Ye.SHA512_224=E;class R extends b{constructor(){super(32),this.Ah=A[0]|0,this.Al=A[1]|0,this.Bh=A[2]|0,this.Bl=A[3]|0,this.Ch=A[4]|0,this.Cl=A[5]|0,this.Dh=A[6]|0,this.Dl=A[7]|0,this.Eh=A[8]|0,this.El=A[9]|0,this.Fh=A[10]|0,this.Fl=A[11]|0,this.Gh=A[12]|0,this.Gl=A[13]|0,this.Hh=A[14]|0,this.Hl=A[15]|0}}return Ye.SHA512_256=R,Ye.sha256=(0,e.createHasher)(()=>new a),Ye.sha224=(0,e.createHasher)(()=>new u),Ye.sha512=(0,e.createHasher)(()=>new b),Ye.sha384=(0,e.createHasher)(()=>new S),Ye.sha512_256=(0,e.createHasher)(()=>new R),Ye.sha512_224=(0,e.createHasher)(()=>new E),Ye}var X1;function BC(){if(X1)return nr;X1=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.sha224=nr.SHA224=nr.sha256=nr.SHA256=void 0;const n=UC();return nr.SHA256=n.SHA256,nr.sha256=n.sha256,nr.SHA224=n.SHA224,nr.sha224=n.sha224,nr}var Mg,Q1;function HC(){if(Q1)return Mg;Q1=1;function n(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),s=0;s<e.length;s++)e[s]=255;for(var r=0;r<t.length;r++){var a=t.charAt(r),u=a.charCodeAt(0);if(e[u]!==255)throw new TypeError(a+" is ambiguous");e[u]=r}var h=t.length,p=t.charAt(0),m=Math.log(h)/Math.log(256),y=Math.log(256)/Math.log(h);function _(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var A=0,E=0,R=0,z=x.length;R!==z&&x[R]===0;)R++,A++;for(var O=(z-R)*y+1>>>0,$=new Uint8Array(O);R!==z;){for(var N=x[R],j=0,F=O-1;(N!==0||j<E)&&F!==-1;F--,j++)N+=256*$[F]>>>0,$[F]=N%h>>>0,N=N/h>>>0;if(N!==0)throw new Error("Non-zero carry");E=j,R++}for(var G=O-E;G!==O&&$[G]===0;)G++;for(var q=p.repeat(A);G<O;++G)q+=t.charAt($[G]);return q}function b(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;for(var A=0,E=0,R=0;x[A]===p;)E++,A++;for(var z=(x.length-A)*m+1>>>0,O=new Uint8Array(z);x[A];){var $=x.charCodeAt(A);if($>255)return;var N=e[$];if(N===255)return;for(var j=0,F=z-1;(N!==0||j<R)&&F!==-1;F--,j++)N+=h*O[F]>>>0,O[F]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");R=j,A++}for(var G=z-R;G!==z&&O[G]===0;)G++;for(var q=new Uint8Array(E+(z-G)),W=E;G!==z;)q[W++]=O[G++];return q}function S(x){var A=b(x);if(A)return A;throw new Error("Non-base"+h+" character")}return{encode:_,decodeUnsafe:b,decode:S}}return Mg=n,Mg}var kg,$1;function VC(){return $1||($1=1,kg=HC()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),kg}var Og,K1;function jC(){if(K1)return Og;K1=1;var n=VC();return Og=function(t){function e(u){var h=Uint8Array.from(u),p=t(h),m=h.length+4,y=new Uint8Array(m);return y.set(h,0),y.set(p.subarray(0,4),h.length),n.encode(y,m)}function s(u){var h=u.slice(0,-4),p=u.slice(-4),m=t(h);if(!(p[0]^m[0]|p[1]^m[1]|p[2]^m[2]|p[3]^m[3]))return h}function r(u){var h=n.decodeUnsafe(u);if(h)return s(h)}function a(u){var h=n.decode(u),p=s(h);if(!p)throw new Error("Invalid checksum");return p}return{encode:e,decode:a,decodeUnsafe:r}},Og}var Dg,J1;function qC(){if(J1)return Dg;J1=1;var{sha256:n}=BC(),t=jC();function e(s){return n(n(s))}return Dg=t(e),Dg}var GC=qC();const tf=by(GC),ZC=n=>Array.from(n,t=>t.toString(16).padStart(2,"0")).join(""),vp="automerge:",WC=n=>{const[t,e,...s]=n.split("#");if(s.length>0)throw new Error("Invalid URL: contains multiple heads sections");const r=new RegExp(`^${vp}(\\w+)$`),[,a]=t.match(r)||[],u=a,h=v2(u);if(!h)throw new Error("Invalid document URL: "+n);if(e===void 0)return{binaryDocumentId:h,documentId:u};const p=e===""?[]:e.split("|"),m=p.map(y=>{try{return ZC(tf.decode(y))}catch{throw new Error(`Invalid head in URL: ${y}`)}});return{binaryDocumentId:h,hexHeads:m,documentId:u,heads:p}},g2=n=>{if(n instanceof Uint8Array||typeof n=="string")return vp+(n instanceof Uint8Array?tx(n):n);const{documentId:t,heads:e=void 0}=n;if(t===void 0)throw new Error("Invalid documentId: "+t);const s=t instanceof Uint8Array?tx(t):t;let r=`${vp}${s}`;return e!==void 0&&(e.forEach(a=>{try{tf.decode(a)}catch{throw new Error(`Invalid head: ${a}`)}}),r+="#"+e.join("|")),r},FC=n=>YC(n)?n:y2(n)?g2({documentId:n}):XC(n)?QC(n):void 0,YC=n=>{if(typeof n!="string"||!n||!n.startsWith(vp))return!1;try{const{documentId:t,heads:e}=WC(n);return!(!y2(t)||e&&!e.every(s=>{try{return tf.decode(s),!0}catch{return!1}}))}catch{return!1}},y2=n=>typeof n!="string"?!1:v2(n)!==void 0,XC=n=>typeof n=="string"&&vy(n),v2=n=>tf.decodeUnsafe(n),tx=n=>tf.encode(n),QC=n=>{if(!vy(n))return;const t=IC(n);return g2({documentId:t})},ex=new Map;function $C(n,{suspense:t}={suspense:!1}){const e=DC(),s=Pt.useRef(),[r,a]=Pt.useState();let u=n&&r&&r.url===FC(n)?r:void 0;if(n&&!u){const p=e.findWithProgress(n);p.state==="ready"&&(u=p.handle)}let h=n?ex.get(n):void 0;if(!h&&n){s.current?.abort(),s.current=new AbortController;const p=e.find(n,{signal:s.current.signal});h=OC(p),ex.set(n,h)}return Pt.useEffect(()=>{u||t||!h||h.promise.then(p=>{a(p)}).catch(()=>{a(void 0)})},[u,t,h]),u||!t||!h?u:h.read()}function KC(n,t={suspense:!1}){const e=$C(n,t),[s,r]=Pt.useState(()=>e?.doc()),[a,u]=Pt.useState();Pt.useEffect(()=>{r(e?.doc())},[e]),Pt.useEffect(()=>{if(!e)return;const p=()=>r(e.doc()),m=()=>{u(new Error(`Document ${n} was deleted`))};return e.on("change",p),e.on("delete",m),()=>{e.removeListener("change",p),e.removeListener("delete",m)}},[e,n]);const h=Pt.useCallback((p,m)=>{e.change(p,m)},[e]);if(a)throw a;return s?[s,h]:[void 0,()=>{}]}var Rg={exports:{}},nx;function JC(){return nx||(nx=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function r(p,m,y){this.fn=p,this.context=m,this.once=y||!1}function a(p,m,y,_,b){if(typeof y!="function")throw new TypeError("The listener must be a function");var S=new r(y,_||p,b),x=e?e+m:m;return p._events[x]?p._events[x].fn?p._events[x]=[p._events[x],S]:p._events[x].push(S):(p._events[x]=S,p._eventsCount++),p}function u(p,m){--p._eventsCount===0?p._events=new s:delete p._events[m]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var m=[],y,_;if(this._eventsCount===0)return m;for(_ in y=this._events)t.call(y,_)&&m.push(e?_.slice(1):_);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(y)):m},h.prototype.listeners=function(m){var y=e?e+m:m,_=this._events[y];if(!_)return[];if(_.fn)return[_.fn];for(var b=0,S=_.length,x=new Array(S);b<S;b++)x[b]=_[b].fn;return x},h.prototype.listenerCount=function(m){var y=e?e+m:m,_=this._events[y];return _?_.fn?1:_.length:0},h.prototype.emit=function(m,y,_,b,S,x){var A=e?e+m:m;if(!this._events[A])return!1;var E=this._events[A],R=arguments.length,z,O;if(E.fn){switch(E.once&&this.removeListener(m,E.fn,void 0,!0),R){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,y),!0;case 3:return E.fn.call(E.context,y,_),!0;case 4:return E.fn.call(E.context,y,_,b),!0;case 5:return E.fn.call(E.context,y,_,b,S),!0;case 6:return E.fn.call(E.context,y,_,b,S,x),!0}for(O=1,z=new Array(R-1);O<R;O++)z[O-1]=arguments[O];E.fn.apply(E.context,z)}else{var $=E.length,N;for(O=0;O<$;O++)switch(E[O].once&&this.removeListener(m,E[O].fn,void 0,!0),R){case 1:E[O].fn.call(E[O].context);break;case 2:E[O].fn.call(E[O].context,y);break;case 3:E[O].fn.call(E[O].context,y,_);break;case 4:E[O].fn.call(E[O].context,y,_,b);break;default:if(!z)for(N=1,z=new Array(R-1);N<R;N++)z[N-1]=arguments[N];E[O].fn.apply(E[O].context,z)}}return!0},h.prototype.on=function(m,y,_){return a(this,m,y,_,!1)},h.prototype.once=function(m,y,_){return a(this,m,y,_,!0)},h.prototype.removeListener=function(m,y,_,b){var S=e?e+m:m;if(!this._events[S])return this;if(!y)return u(this,S),this;var x=this._events[S];if(x.fn)x.fn===y&&(!b||x.once)&&(!_||x.context===_)&&u(this,S);else{for(var A=0,E=[],R=x.length;A<R;A++)(x[A].fn!==y||b&&!x[A].once||_&&x[A].context!==_)&&E.push(x[A]);E.length?this._events[S]=E.length===1?E[0]:E:u(this,S)}return this},h.prototype.removeAllListeners=function(m){var y;return m?(y=e?e+m:m,this._events[y]&&u(this,y)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,n.exports=h})(Rg)),Rg.exports}var tL=JC();const eL=by(tL);new eL;const Fp=Symbol.for("_am_meta"),Nh=Symbol.for("_am_trace"),Ph=Symbol.for("_am_objectId"),wy=Symbol.for("_am_isProxy"),b2=Symbol.for("_am_clearCache"),nL=Symbol.for("_am_uint"),iL=Symbol.for("_am_int"),sL=Symbol.for("_am_f64"),w2=Symbol.for("_am_counter"),x2=Symbol.for("_am_immutableString");let rL=class{constructor(t){this.value=t||0,Reflect.defineProperty(this,w2,{value:!0})}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}increment(t){throw new Error("Counters should not be incremented outside of a change callback")}decrement(t){throw new Error("Counters should not be decremented outside of a change callback")}},oL=class extends rL{constructor(t,e,s,r,a){super(t),this.context=e,this.path=s,this.objectId=r,this.key=a}increment(t){return t=typeof t=="number"?t:1,this.context.increment(this.objectId,this.key,t),this.value+=t,this.value}decrement(t){return this.increment(typeof t=="number"?-t:-1)}};function aL(n,t,e,s,r){return new oL(n,t,e,s,r)}var S2;let lL=class{constructor(t){this[S2]=!0,this.val=t}toString(){return this.val}toJSON(){return this.val}};S2=x2;function zr(n){if(typeof n=="string"&&/^[0-9]+$/.test(n)&&(n=parseInt(n,10)),typeof n!="number")return n;if(n<0||isNaN(n)||n===1/0||n===-1/0)throw new RangeError("A list index must be positive, but you passed "+n);return n}function Gi(n,t){const{context:e,objectId:s,path:r}=n,a=e.getWithType(s,t);if(a===null)return;const u=a[0],h=a[1];switch(u){case void 0:return;case"map":return Xp(e,h,[...r,t]);case"list":return Qp(e,h,[...r,t]);case"text":return e.text(h);case"str":return new lL(h);case"uint":return h;case"int":return h;case"f64":return h;case"boolean":return h;case"null":return null;case"bytes":return h;case"timestamp":return h;case"counter":return aL(h,e,r,s,t);default:throw RangeError(`datatype ${u} unimplemented`)}}function bp(n,t,e){const s=typeof n;switch(s){case"object":if(n==null)return[null,"null"];if(n[nL])return[n.value,"uint"];if(n[iL])return[n.value,"int"];if(n[sL])return[n.value,"f64"];if(n[w2])return[n.value,"counter"];if(n instanceof Date)return[n.getTime(),"timestamp"];if(hL(n))return[n.toString(),"str"];if(n instanceof Uint8Array)return[n,"bytes"];if(n instanceof Array)return[n,"list"];if(Object.prototype.toString.call(n)==="[object Object]")return[n,"map"];throw Yp(n,e)?new RangeError("Cannot create a reference to an existing document object"):new RangeError(`Cannot assign unknown object: ${n}`);case"boolean":return[n,"boolean"];case"number":return Number.isInteger(n)?[n,"int"]:[n,"f64"];case"string":return[n,"text"];case"undefined":throw new RangeError([`Cannot assign undefined value at ${ix(t)}, `,"because `undefined` is not a valid JSON data type. ","You might consider setting the property's value to `null`, ","or using `delete` to remove it altogether."].join(""));default:throw new RangeError([`Cannot assign ${s} value at ${ix(t)}. `,"All JSON primitive datatypes (object, array, string, number, boolean, null) ",`are supported in an Automerge document; ${s} values are not. `].join(""))}}function Yp(n,t){var e,s;return n instanceof Date?!1:!!(n&&((s=(e=n[Fp])===null||e===void 0?void 0:e.handle)===null||s===void 0?void 0:s.__wbg_ptr)===t.__wbg_ptr)}const cL={get(n,t){const{context:e,objectId:s,cache:r}=n;return t===Symbol.toStringTag?n[Symbol.toStringTag]:t===Ph?s:t===wy?!0:t===Nh?n.trace:t===Fp?{handle:e}:(r[t]||(r[t]=Gi(n,t)),r[t])},set(n,t,e){const{context:s,objectId:r,path:a}=n;if(n.cache={},Yp(e,s))throw new RangeError("Cannot create a reference to an existing document object");if(t===Nh)return n.trace=e,!0;if(t===b2)return!0;const[u,h]=bp(e,[...a,t],s);switch(h){case"list":{const p=s.putObject(r,t,[]),m=Qp(s,p,[...a,t]);for(let y=0;y<u.length;y++)m[y]=u[y];break}case"text":{s.putObject(r,t,u);break}case"map":{const p=s.putObject(r,t,{}),m=Xp(s,p,[...a,t]);for(const y in u)m[y]=u[y];break}default:s.put(r,t,u,h)}return!0},deleteProperty(n,t){const{context:e,objectId:s}=n;return n.cache={},e.delete(s,t),!0},has(n,t){return this.get(n,t)!==void 0},getOwnPropertyDescriptor(n,t){const e=this.get(n,t);if(typeof e<"u")return{configurable:!0,enumerable:!0,value:e}},ownKeys(n){const{context:t,objectId:e}=n,s=t.keys(e);return[...new Set(s)]}},T2={get(n,t){const{context:e,objectId:s}=n;return t=zr(t),t===Symbol.hasInstance?r=>Array.isArray(r):t===Symbol.toStringTag?n[Symbol.toStringTag]:t===Ph?s:t===wy?!0:t===Nh?n.trace:t===Fp?{handle:e}:t==="length"?e.length(s):typeof t=="number"?Gi(n,t):xy(n)[t]},set(n,t,e){const{context:s,objectId:r,path:a}=n;if(t=zr(t),Yp(e,s))throw new RangeError("Cannot create a reference to an existing document object");if(t===b2)return!0;if(t===Nh)return n.trace=e,!0;if(typeof t=="string")throw new RangeError("list index must be a number");const[u,h]=bp(e,[...a,t],s);switch(h){case"list":{let p;t>=s.length(r)?p=s.insertObject(r,t,[]):p=s.putObject(r,t,[]),Qp(s,p,[...a,t]).splice(0,0,...u);break}case"text":{t>=s.length(r)?s.insertObject(r,t,u):s.putObject(r,t,u);break}case"map":{let p;t>=s.length(r)?p=s.insertObject(r,t,{}):p=s.putObject(r,t,{});const m=Xp(s,p,[...a,t]);for(const y in u)m[y]=u[y];break}default:t>=s.length(r)?s.insert(r,t,u,h):s.put(r,t,u,h)}return!0},deleteProperty(n,t){const{context:e,objectId:s}=n;t=zr(t);const r=e.get(s,t);if(r!=null&&r[0]=="counter")throw new TypeError("Unsupported operation: deleting a counter from a list");return e.delete(s,t),!0},has(n,t){const{context:e,objectId:s}=n;return t=zr(t),typeof t=="number"?t<e.length(s):t==="length"},getOwnPropertyDescriptor(n,t){const{context:e,objectId:s}=n;return t==="length"?{writable:!0,value:e.length(s)}:t===Ph?{configurable:!1,enumerable:!1,value:s}:(t=zr(t),{configurable:!0,enumerable:!0,value:Gi(n,t)})},getPrototypeOf(n){return Object.getPrototypeOf(n)},ownKeys(){const n=[];return n.push("length"),n}};Object.assign({},T2,{get(n,t){const{context:e,objectId:s}=n;return t=zr(t),t===Symbol.hasInstance?r=>Array.isArray(r):t===Symbol.toStringTag?n[Symbol.toStringTag]:t===Ph?s:t===wy?!0:t===Nh?n.trace:t===Fp?{handle:e}:t==="length"?e.length(s):typeof t=="number"?Gi(n,t):uL(n)[t]||xy(n)[t]},getPrototypeOf(){return Object.getPrototypeOf(new Text)}});function Xp(n,t,e){const s={context:n,objectId:t,path:e||[],cache:{}},r={};return Object.assign(r,s),new Proxy(r,cL)}function Qp(n,t,e){const s={context:n,objectId:t,path:e||[],cache:{}},r=[];return Object.assign(r,s),new Proxy(r,T2)}function xy(n){const{context:t,objectId:e,path:s}=n;return{at(a){return Gi(n,a)},deleteAt(a,u){return typeof u=="number"?t.splice(e,a,u):t.delete(e,a),this},fill(a,u,h){const[p,m]=bp(a,[...s,u],t),y=t.length(e);u=zr(u||0),h=zr(h||y);for(let _=u;_<Math.min(h,y);_++)m==="list"||m==="map"||m==="text"?t.putObject(e,_,p):t.put(e,_,p,m);return this},indexOf(a,u=0){const h=t.length(e);for(let p=u;p<h;p++){const m=t.getWithType(e,p);if(!m)continue;const[y,_]=m;if(!["map","list","text"].includes(y)){if(_===a)return p;continue}if(y==="text"&&typeof a=="string"&&a===Gi(n,p)||a[Ph]===_)return p}return-1},insertAt(a,...u){return this.splice(a,0,...u),this},pop(){const a=t.length(e);if(a==0)return;const u=Gi(n,a-1);return t.delete(e,a-1),u},push(...a){const u=t.length(e);return this.splice(u,0,...a),t.length(e)},shift(){if(t.length(e)==0)return;const a=Gi(n,0);return t.delete(e,0),a},splice(a,u,...h){a=zr(a),typeof u!="number"&&(u=t.length(e)-a),u=zr(u);for(const y of h)if(Yp(y,t))throw new RangeError("Cannot create a reference to an existing document object");const p=[];for(let y=0;y<u;y++){const _=Gi(n,a);_!==void 0&&p.push(_),t.delete(e,a)}const m=h.map((y,_)=>{try{return bp(y,[...s],t)}catch(b){throw b instanceof RangeError?new RangeError(`${b.message} (at index ${_} in the input)`):b}});for(const[y,_]of m){switch(_){case"list":{const b=t.insertObject(e,a,[]);Qp(t,b,[...s,a]).splice(0,0,...y);break}case"text":{t.insertObject(e,a,y);break}case"map":{const b=t.insertObject(e,a,{}),S=Xp(t,b,[...s,a]);for(const x in y)S[x]=y[x];break}default:t.insert(e,a,y,_)}a+=1}return p},unshift(...a){return this.splice(0,0,...a),t.length(e)},entries(){let a=0;return{next:()=>{const h=Gi(n,a);return h===void 0?{value:void 0,done:!0}:{value:[a++,h],done:!1}},[Symbol.iterator](){return this}}},keys(){let a=0;const u=t.length(e);return{next:()=>a<u?{value:a++,done:!1}:{value:void 0,done:!0},[Symbol.iterator](){return this}}},values(){let a=0;return{next:()=>{const h=Gi(n,a++);return h===void 0?{value:void 0,done:!0}:{value:h,done:!1}},[Symbol.iterator](){return this}}},toArray(){const a=[];let u;do u=Gi(n,a.length),u!==void 0&&a.push(u);while(u!==void 0);return a},map(a){return this.toArray().map(a)},toString(){return this.toArray().toString()},toLocaleString(){return this.toArray().toLocaleString()},forEach(a){return this.toArray().forEach(a)},concat(a){return this.toArray().concat(a)},every(a){return this.toArray().every(a)},filter(a){return this.toArray().filter(a)},find(a){let u=0;for(const h of this){if(a(h,u))return h;u+=1}},findIndex(a){let u=0;for(const h of this){if(a(h,u))return u;u+=1}return-1},includes(a){return this.find(u=>u===a)!==void 0},join(a){return this.toArray().join(a)},reduce(a,u){return this.toArray().reduce(a,u)},reduceRight(a,u){return this.toArray().reduceRight(a,u)},lastIndexOf(a,u=1/0){return this.toArray().lastIndexOf(a,u)},slice(a,u){return this.toArray().slice(a,u)},some(a){let u=0;for(const h of this){if(a(h,u))return!0;u+=1}return!1},[Symbol.iterator]:function*(){let a=0,u=Gi(n,a);for(;u!==void 0;)yield u,a+=1,u=Gi(n,a)}}}function uL(n){const{context:t,objectId:e}=n;return{set(r,a){return this[r]=a},get(r){return this[r]},toString(){return t.text(e).replace(//g,"")},toSpans(){const r=[];let a="";const u=t.length(e);for(let h=0;h<u;h++){const p=this[h];typeof p=="string"?a+=p:(a.length>0&&(r.push(a),a=""),r.push(p))}return a.length>0&&r.push(a),r},toJSON(){return this.toString()},indexOf(r,a=0){return t.text(e).indexOf(r,a)},insertAt(r,...a){a.every(u=>typeof u=="string")?t.splice(e,r,0,a.join("")):xy(n).insertAt(r,...a)}}}function ix(n){const t=n.map(e=>{if(typeof e=="number")return e.toString();if(typeof e=="string")return e.replace(/~/g,"~0").replace(/\//g,"~1")});return n.length===0?"":"/"+t.join("/")}function hL(n){return typeof n=="object"&&n!==null&&Object.prototype.hasOwnProperty.call(n,x2)}let A2;const Ig=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}};Ig.encodeInto;const fL=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&fL.decode();typeof FinalizationRegistry>"u"||new FinalizationRegistry(n=>A2.__wbg_automerge_free(n>>>0,1));typeof FinalizationRegistry>"u"||new FinalizationRegistry(n=>A2.__wbg_syncstate_free(n>>>0,1));var Vd={exports:{}},Ng,sx;function dL(){if(sx)return Ng;sx=1;var n=1e3,t=n*60,e=t*60,s=e*24,r=s*7,a=s*365.25;Ng=function(y,_){_=_||{};var b=typeof y;if(b==="string"&&y.length>0)return u(y);if(b==="number"&&isFinite(y))return _.long?p(y):h(y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(y))};function u(y){if(y=String(y),!(y.length>100)){var _=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(y);if(_){var b=parseFloat(_[1]),S=(_[2]||"ms").toLowerCase();switch(S){case"years":case"year":case"yrs":case"yr":case"y":return b*a;case"weeks":case"week":case"w":return b*r;case"days":case"day":case"d":return b*s;case"hours":case"hour":case"hrs":case"hr":case"h":return b*e;case"minutes":case"minute":case"mins":case"min":case"m":return b*t;case"seconds":case"second":case"secs":case"sec":case"s":return b*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function h(y){var _=Math.abs(y);return _>=s?Math.round(y/s)+"d":_>=e?Math.round(y/e)+"h":_>=t?Math.round(y/t)+"m":_>=n?Math.round(y/n)+"s":y+"ms"}function p(y){var _=Math.abs(y);return _>=s?m(y,_,s,"day"):_>=e?m(y,_,e,"hour"):_>=t?m(y,_,t,"minute"):_>=n?m(y,_,n,"second"):y+" ms"}function m(y,_,b,S){var x=_>=b*1.5;return Math.round(y/b)+" "+S+(x?"s":"")}return Ng}var Pg,rx;function pL(){if(rx)return Pg;rx=1;function n(t){s.debug=s,s.default=s,s.coerce=m,s.disable=h,s.enable=a,s.enabled=p,s.humanize=dL(),s.destroy=y,Object.keys(t).forEach(_=>{s[_]=t[_]}),s.names=[],s.skips=[],s.formatters={};function e(_){let b=0;for(let S=0;S<_.length;S++)b=(b<<5)-b+_.charCodeAt(S),b|=0;return s.colors[Math.abs(b)%s.colors.length]}s.selectColor=e;function s(_){let b,S=null,x,A;function E(...R){if(!E.enabled)return;const z=E,O=Number(new Date),$=O-(b||O);z.diff=$,z.prev=b,z.curr=O,b=O,R[0]=s.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let N=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(F,G)=>{if(F==="%%")return"%";N++;const q=s.formatters[G];if(typeof q=="function"){const W=R[N];F=q.call(z,W),R.splice(N,1),N--}return F}),s.formatArgs.call(z,R),(z.log||s.log).apply(z,R)}return E.namespace=_,E.useColors=s.useColors(),E.color=s.selectColor(_),E.extend=r,E.destroy=s.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>S!==null?S:(x!==s.namespaces&&(x=s.namespaces,A=s.enabled(_)),A),set:R=>{S=R}}),typeof s.init=="function"&&s.init(E),E}function r(_,b){const S=s(this.namespace+(typeof b>"u"?":":b)+_);return S.log=this.log,S}function a(_){s.save(_),s.namespaces=_,s.names=[],s.skips=[];const b=(typeof _=="string"?_:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const S of b)S[0]==="-"?s.skips.push(S.slice(1)):s.names.push(S)}function u(_,b){let S=0,x=0,A=-1,E=0;for(;S<_.length;)if(x<b.length&&(b[x]===_[S]||b[x]==="*"))b[x]==="*"?(A=x,E=S,x++):(S++,x++);else if(A!==-1)x=A+1,E++,S=E;else return!1;for(;x<b.length&&b[x]==="*";)x++;return x===b.length}function h(){const _=[...s.names,...s.skips.map(b=>"-"+b)].join(",");return s.enable(""),_}function p(_){for(const b of s.skips)if(u(_,b))return!1;for(const b of s.names)if(u(_,b))return!0;return!1}function m(_){return _ instanceof Error?_.stack||_.message:_}function y(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}return Pg=n,Pg}var ox;function mL(){return ox||(ox=1,(function(n,t){t.formatArgs=s,t.save=r,t.load=a,t.useColors=e,t.storage=u(),t.destroy=(()=>{let p=!1;return()=>{p||(p=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function e(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let p;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(p=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(p[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(p){if(p[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+p[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const m="color: "+this.color;p.splice(1,0,m,"color: inherit");let y=0,_=0;p[0].replace(/%[a-zA-Z%]/g,b=>{b!=="%%"&&(y++,b==="%c"&&(_=y))}),p.splice(_,0,m)}t.log=console.debug||console.log||(()=>{});function r(p){try{p?t.storage.setItem("debug",p):t.storage.removeItem("debug")}catch{}}function a(){let p;try{p=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!p&&typeof process<"u"&&"env"in process&&(p=kC.DEBUG),p}function u(){try{return localStorage}catch{}}n.exports=pL()(t);const{formatters:h}=n.exports;h.j=function(p){try{return JSON.stringify(p)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}})(Vd,Vd.exports)),Vd.exports}var _L=mL();const gL=by(_L);let D0;try{D0=new TextDecoder}catch{}let qt,Dl,bt=0;const yL=105,vL=57342,bL=57343,ax=57337,lx=6,Ic={};let bh=11281e4,bo=1681e4,ve={},yn,wp,xp=0,zh=0,Gn,Ds,Pn=[],R0=[],Fi,Ti,Ah,cx={useRecords:!1,mapsAsObjects:!0},Uh=!1,E2=2;try{new Function("")}catch{E2=1/0}let C2=class I0{constructor(t){if(t&&((t.keyMap||t._keyMap)&&!t.useRecords&&(t.useRecords=!1,t.mapsAsObjects=!0),t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.getStructures&&(t.getShared=t.getStructures),t.getShared&&!t.structures&&((t.structures=[]).uninitialized=!0),t.keyMap)){this.mapKey=new Map;for(let[e,s]of Object.entries(t.keyMap))this.mapKey.set(s,e)}Object.assign(this,t)}decodeKey(t){return this.keyMap&&this.mapKey.get(t)||t}encodeKey(t){return this.keyMap&&this.keyMap.hasOwnProperty(t)?this.keyMap[t]:t}encodeKeys(t){if(!this._keyMap)return t;let e=new Map;for(let[s,r]of Object.entries(t))e.set(this._keyMap.hasOwnProperty(s)?this._keyMap[s]:s,r);return e}decodeKeys(t){if(!this._keyMap||t.constructor.name!="Map")return t;if(!this._mapKey){this._mapKey=new Map;for(let[s,r]of Object.entries(this._keyMap))this._mapKey.set(r,s)}let e={};return t.forEach((s,r)=>e[Rs(this._mapKey.has(r)?this._mapKey.get(r):r)]=s),e}mapDecode(t,e){let s=this.decode(t);return this._keyMap&&s.constructor.name==="Array"?s.map(r=>this.decodeKeys(r)):s}decode(t,e){if(qt)return O2(()=>(U0(),this?this.decode(t,e):I0.prototype.decode.call(cx,t,e)));Dl=e>-1?e:t.length,bt=0,zh=0,wp=null,Gn=null,qt=t;try{Ti=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(s){throw qt=null,t instanceof Uint8Array?s:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof I0){if(ve=this,Fi=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return yn=this.structures,jd();(!yn||yn.length>0)&&(yn=[])}else ve=cx,(!yn||yn.length>0)&&(yn=[]),Fi=null;return jd()}decodeMultiple(t,e){let s,r=0;try{let a=t.length;Uh=!0;let u=this?this.decode(t,a):Ay.decode(t,a);if(e){if(e(u)===!1)return;for(;bt<a;)if(r=bt,e(jd())===!1)return}else{for(s=[u];bt<a;)r=bt,s.push(jd());return s}}catch(a){throw a.lastPosition=r,a.values=s,a}finally{Uh=!1,U0()}}};function jd(){try{let n=Se();if(Gn){if(bt>=Gn.postBundlePosition){let t=new Error("Unexpected bundle position");throw t.incomplete=!0,t}bt=Gn.postBundlePosition,Gn=null}if(bt==Dl)yn=null,qt=null,Ds&&(Ds=null);else if(bt>Dl){let t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}else if(!Uh)throw new Error("Data read, but end of buffer not reached");return n}catch(n){throw U0(),(n instanceof RangeError||n.message.startsWith("Unexpected end of buffer"))&&(n.incomplete=!0),n}}function Se(){let n=qt[bt++],t=n>>5;if(n=n&31,n>23)switch(n){case 24:n=qt[bt++];break;case 25:if(t==7)return TL();n=Ti.getUint16(bt),bt+=2;break;case 26:if(t==7){let e=Ti.getFloat32(bt);if(ve.useFloat32>2){let s=Ty[(qt[bt]&127)<<1|qt[bt+1]>>7];return bt+=4,(s*e+(e>0?.5:-.5)>>0)/s}return bt+=4,e}n=Ti.getUint32(bt),bt+=4;break;case 27:if(t==7){let e=Ti.getFloat64(bt);return bt+=8,e}if(t>1){if(Ti.getUint32(bt)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");n=Ti.getUint32(bt+4)}else ve.int64AsNumber?(n=Ti.getUint32(bt)*4294967296,n+=Ti.getUint32(bt+4)):n=Ti.getBigUint64(bt);bt+=8;break;case 31:switch(t){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let e=[],s,r=0;for(;(s=Se())!=Ic;){if(r>=bh)throw new Error(`Array length exceeds ${bh}`);e[r++]=s}return t==4?e:t==3?e.join(""):Buffer.concat(e);case 5:let a;if(ve.mapsAsObjects){let u={},h=0;if(ve.keyMap)for(;(a=Se())!=Ic;){if(h++>=bo)throw new Error(`Property count exceeds ${bo}`);u[Rs(ve.decodeKey(a))]=Se()}else for(;(a=Se())!=Ic;){if(h++>=bo)throw new Error(`Property count exceeds ${bo}`);u[Rs(a)]=Se()}return u}else{Ah&&(ve.mapsAsObjects=!0,Ah=!1);let u=new Map;if(ve.keyMap){let h=0;for(;(a=Se())!=Ic;){if(h++>=bo)throw new Error(`Map size exceeds ${bo}`);u.set(ve.decodeKey(a),Se())}}else{let h=0;for(;(a=Se())!=Ic;){if(h++>=bo)throw new Error(`Map size exceeds ${bo}`);u.set(a,Se())}}return u}case 7:return Ic;default:throw new Error("Invalid major type for indefinite length "+t)}default:throw new Error("Unknown token "+n)}switch(t){case 0:return n;case 1:return~n;case 2:return SL(n);case 3:if(zh>=bt)return wp.slice(bt-xp,(bt+=n)-xp);if(zh==0&&Dl<140&&n<32){let r=n<16?L2(n):xL(n);if(r!=null)return r}return wL(n);case 4:if(n>=bh)throw new Error(`Array length exceeds ${bh}`);let e=new Array(n);for(let r=0;r<n;r++)e[r]=Se();return e;case 5:if(n>=bo)throw new Error(`Map size exceeds ${bh}`);if(ve.mapsAsObjects){let r={};if(ve.keyMap)for(let a=0;a<n;a++)r[Rs(ve.decodeKey(Se()))]=Se();else for(let a=0;a<n;a++)r[Rs(Se())]=Se();return r}else{Ah&&(ve.mapsAsObjects=!0,Ah=!1);let r=new Map;if(ve.keyMap)for(let a=0;a<n;a++)r.set(ve.decodeKey(Se()),Se());else for(let a=0;a<n;a++)r.set(Se(),Se());return r}case 6:if(n>=ax){let r=yn[n&8191];if(r)return r.read||(r.read=N0(r)),r.read();if(n<65536){if(n==bL){let a=Wc(),u=Se(),h=Se();z0(u,h);let p={};if(ve.keyMap)for(let m=2;m<a;m++){let y=ve.decodeKey(h[m-2]);p[Rs(y)]=Se()}else for(let m=2;m<a;m++){let y=h[m-2];p[Rs(y)]=Se()}return p}else if(n==vL){let a=Wc(),u=Se();for(let h=2;h<a;h++)z0(u++,Se());return Se()}else if(n==ax)return kL();if(ve.getShared&&(Sy(),r=yn[n&8191],r))return r.read||(r.read=N0(r)),r.read()}}let s=Pn[n];if(s)return s.handlesRead?s(Se):s(Se());{let r=Se();for(let a=0;a<R0.length;a++){let u=R0[a](n,r);if(u!==void 0)return u}return new Pl(r,n)}case 7:switch(n){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:let r=(Fi||Sl())[n];if(r!==void 0)return r;throw new Error("Unknown token "+n)}default:if(isNaN(n)){let r=new Error("Unexpected end of CBOR data");throw r.incomplete=!0,r}throw new Error("Unknown CBOR token "+n)}}const ux=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function N0(n){if(!n)throw new Error("Structure is required in record definition");function t(){let e=qt[bt++];if(e=e&31,e>23)switch(e){case 24:e=qt[bt++];break;case 25:e=Ti.getUint16(bt),bt+=2;break;case 26:e=Ti.getUint32(bt),bt+=4;break;default:throw new Error("Expected array header, but got "+qt[bt-1])}let s=this.compiledReader;for(;s;){if(s.propertyCount===e)return s(Se);s=s.next}if(this.slowReads++>=E2){let a=this.length==e?this:this.slice(0,e);return s=ve.keyMap?new Function("r","return {"+a.map(u=>ve.decodeKey(u)).map(u=>ux.test(u)?Rs(u)+":r()":"["+JSON.stringify(u)+"]:r()").join(",")+"}"):new Function("r","return {"+a.map(u=>ux.test(u)?Rs(u)+":r()":"["+JSON.stringify(u)+"]:r()").join(",")+"}"),this.compiledReader&&(s.next=this.compiledReader),s.propertyCount=e,this.compiledReader=s,s(Se)}let r={};if(ve.keyMap)for(let a=0;a<e;a++)r[Rs(ve.decodeKey(this[a]))]=Se();else for(let a=0;a<e;a++)r[Rs(this[a])]=Se();return r}return n.slowReads=0,t}function Rs(n){if(typeof n=="string")return n==="__proto__"?"__proto_":n;if(typeof n=="number"||typeof n=="boolean"||typeof n=="bigint")return n.toString();if(n==null)return n+"";throw new Error("Invalid property name type "+typeof n)}let wL=P0;function P0(n){let t;if(n<16&&(t=L2(n)))return t;if(n>64&&D0)return D0.decode(qt.subarray(bt,bt+=n));const e=bt+n,s=[];for(t="";bt<e;){const r=qt[bt++];if((r&128)===0)s.push(r);else if((r&224)===192){const a=qt[bt++]&63;s.push((r&31)<<6|a)}else if((r&240)===224){const a=qt[bt++]&63,u=qt[bt++]&63;s.push((r&31)<<12|a<<6|u)}else if((r&248)===240){const a=qt[bt++]&63,u=qt[bt++]&63,h=qt[bt++]&63;let p=(r&7)<<18|a<<12|u<<6|h;p>65535&&(p-=65536,s.push(p>>>10&1023|55296),p=56320|p&1023),s.push(p)}else s.push(r);s.length>=4096&&(t+=$n.apply(String,s),s.length=0)}return s.length>0&&(t+=$n.apply(String,s)),t}let $n=String.fromCharCode;function xL(n){let t=bt,e=new Array(n);for(let s=0;s<n;s++){const r=qt[bt++];if((r&128)>0){bt=t;return}e[s]=r}return $n.apply(String,e)}function L2(n){if(n<4)if(n<2){if(n===0)return"";{let t=qt[bt++];if((t&128)>1){bt-=1;return}return $n(t)}}else{let t=qt[bt++],e=qt[bt++];if((t&128)>0||(e&128)>0){bt-=2;return}if(n<3)return $n(t,e);let s=qt[bt++];if((s&128)>0){bt-=3;return}return $n(t,e,s)}else{let t=qt[bt++],e=qt[bt++],s=qt[bt++],r=qt[bt++];if((t&128)>0||(e&128)>0||(s&128)>0||(r&128)>0){bt-=4;return}if(n<6){if(n===4)return $n(t,e,s,r);{let a=qt[bt++];if((a&128)>0){bt-=5;return}return $n(t,e,s,r,a)}}else if(n<8){let a=qt[bt++],u=qt[bt++];if((a&128)>0||(u&128)>0){bt-=6;return}if(n<7)return $n(t,e,s,r,a,u);let h=qt[bt++];if((h&128)>0){bt-=7;return}return $n(t,e,s,r,a,u,h)}else{let a=qt[bt++],u=qt[bt++],h=qt[bt++],p=qt[bt++];if((a&128)>0||(u&128)>0||(h&128)>0||(p&128)>0){bt-=8;return}if(n<10){if(n===8)return $n(t,e,s,r,a,u,h,p);{let m=qt[bt++];if((m&128)>0){bt-=9;return}return $n(t,e,s,r,a,u,h,p,m)}}else if(n<12){let m=qt[bt++],y=qt[bt++];if((m&128)>0||(y&128)>0){bt-=10;return}if(n<11)return $n(t,e,s,r,a,u,h,p,m,y);let _=qt[bt++];if((_&128)>0){bt-=11;return}return $n(t,e,s,r,a,u,h,p,m,y,_)}else{let m=qt[bt++],y=qt[bt++],_=qt[bt++],b=qt[bt++];if((m&128)>0||(y&128)>0||(_&128)>0||(b&128)>0){bt-=12;return}if(n<14){if(n===12)return $n(t,e,s,r,a,u,h,p,m,y,_,b);{let S=qt[bt++];if((S&128)>0){bt-=13;return}return $n(t,e,s,r,a,u,h,p,m,y,_,b,S)}}else{let S=qt[bt++],x=qt[bt++];if((S&128)>0||(x&128)>0){bt-=14;return}if(n<15)return $n(t,e,s,r,a,u,h,p,m,y,_,b,S,x);let A=qt[bt++];if((A&128)>0){bt-=15;return}return $n(t,e,s,r,a,u,h,p,m,y,_,b,S,x,A)}}}}}function SL(n){return ve.copyBuffers?Uint8Array.prototype.slice.call(qt,bt,bt+=n):qt.subarray(bt,bt+=n)}let M2=new Float32Array(1),qd=new Uint8Array(M2.buffer,0,4);function TL(){let n=qt[bt++],t=qt[bt++],e=(n&127)>>2;if(e===31)return t||n&3?NaN:n&128?-1/0:1/0;if(e===0){let s=((n&3)<<8|t)/16777216;return n&128?-s:s}return qd[3]=n&128|(e>>1)+56,qd[2]=(n&7)<<5|t>>3,qd[1]=t<<5,qd[0]=0,M2[0]}new Array(4096);let Pl=class{constructor(t,e){this.value=t,this.tag=e}};Pn[0]=n=>new Date(n);Pn[1]=n=>new Date(Math.round(n*1e3));Pn[2]=n=>{let t=BigInt(0);for(let e=0,s=n.byteLength;e<s;e++)t=BigInt(n[e])+(t<<BigInt(8));return t};Pn[3]=n=>BigInt(-1)-Pn[2](n);Pn[4]=n=>+(n[1]+"e"+n[0]);Pn[5]=n=>n[1]*Math.exp(n[0]*Math.log(2));const z0=(n,t)=>{n=n-57344;let e=yn[n];e&&e.isShared&&((yn.restoreStructures||(yn.restoreStructures=[]))[n]=e),yn[n]=t,t.read=N0(t)};Pn[yL]=n=>{let t=n.length,e=n[1];z0(n[0],e);let s={};for(let r=2;r<t;r++){let a=e[r-2];s[Rs(a)]=n[r]}return s};Pn[14]=n=>Gn?Gn[0].slice(Gn.position0,Gn.position0+=n):new Pl(n,14);Pn[15]=n=>Gn?Gn[1].slice(Gn.position1,Gn.position1+=n):new Pl(n,15);let AL={Error,RegExp};Pn[27]=n=>(AL[n[0]]||Error)(n[1],n[2]);const k2=n=>{if(qt[bt++]!=132){let e=new Error("Packed values structure must be followed by a 4 element array");throw qt.length<bt&&(e.incomplete=!0),e}let t=n();if(!t||!t.length){let e=new Error("Packed values structure must be followed by a 4 element array");throw e.incomplete=!0,e}return Fi=Fi?t.concat(Fi.slice(t.length)):t,Fi.prefixes=n(),Fi.suffixes=n(),n()};k2.handlesRead=!0;Pn[51]=k2;Pn[lx]=n=>{if(!Fi)if(ve.getShared)Sy();else return new Pl(n,lx);if(typeof n=="number")return Fi[16+(n>=0?2*n:-2*n-1)];let t=new Error("No support for non-integer packed references yet");throw n===void 0&&(t.incomplete=!0),t};Pn[28]=n=>{Ds||(Ds=new Map,Ds.id=0);let t=Ds.id++,e=bt,s=qt[bt],r;s>>5==4?r=[]:r={};let a={target:r};Ds.set(t,a);let u=n();return a.used?(Object.getPrototypeOf(r)!==Object.getPrototypeOf(u)&&(bt=e,r=u,Ds.set(t,{target:r}),u=n()),Object.assign(r,u)):(a.target=u,u)};Pn[28].handlesRead=!0;Pn[29]=n=>{let t=Ds.get(n);return t.used=!0,t.target};Pn[258]=n=>new Set(n);(Pn[259]=n=>(ve.mapsAsObjects&&(ve.mapsAsObjects=!1,Ah=!0),n())).handlesRead=!0;function Nc(n,t){return typeof n=="string"?n+t:n instanceof Array?n.concat(t):Object.assign({},n,t)}function Sl(){if(!Fi)if(ve.getShared)Sy();else throw new Error("No packed values available");return Fi}const EL=1399353956;R0.push((n,t)=>{if(n>=225&&n<=255)return Nc(Sl().prefixes[n-224],t);if(n>=28704&&n<=32767)return Nc(Sl().prefixes[n-28672],t);if(n>=1879052288&&n<=2147483647)return Nc(Sl().prefixes[n-1879048192],t);if(n>=216&&n<=223)return Nc(t,Sl().suffixes[n-216]);if(n>=27647&&n<=28671)return Nc(t,Sl().suffixes[n-27639]);if(n>=1811940352&&n<=1879048191)return Nc(t,Sl().suffixes[n-1811939328]);if(n==EL)return{packedValues:Fi,structures:yn.slice(0),version:t};if(n==55799)return t});const CL=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,hx=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],LL=[64,68,69,70,71,72,77,78,79,85,86];for(let n=0;n<hx.length;n++)ML(hx[n],LL[n]);function ML(n,t){let e="get"+n.name.slice(0,-5),s;typeof n=="function"?s=n.BYTES_PER_ELEMENT:n=null;for(let r=0;r<2;r++){if(!r&&s==1)continue;let a=s==2?1:s==4?2:s==8?3:0;Pn[r?t:t-4]=s==1||r==CL?u=>{if(!n)throw new Error("Could not find typed array for code "+t);return!ve.copyBuffers&&(s===1||s===2&&!(u.byteOffset&1)||s===4&&!(u.byteOffset&3)||s===8&&!(u.byteOffset&7))?new n(u.buffer,u.byteOffset,u.byteLength>>a):new n(Uint8Array.prototype.slice.call(u,0).buffer)}:u=>{if(!n)throw new Error("Could not find typed array for code "+t);let h=new DataView(u.buffer,u.byteOffset,u.byteLength),p=u.length>>a,m=new n(p),y=h[e];for(let _=0;_<p;_++)m[_]=y.call(h,_<<a,r);return m}}}function kL(){let n=Wc(),t=bt+Se();for(let s=2;s<n;s++){let r=Wc();bt+=r}let e=bt;return bt=t,Gn=[P0(Wc()),P0(Wc())],Gn.position0=0,Gn.position1=0,Gn.postBundlePosition=bt,bt=e,Se()}function Wc(){let n=qt[bt++]&31;if(n>23)switch(n){case 24:n=qt[bt++];break;case 25:n=Ti.getUint16(bt),bt+=2;break;case 26:n=Ti.getUint32(bt),bt+=4;break}return n}function Sy(){if(ve.getShared){let n=O2(()=>(qt=null,ve.getShared()))||{},t=n.structures||[];ve.sharedVersion=n.version,Fi=ve.sharedValues=n.packedValues,yn===!0?ve.structures=yn=t:yn.splice.apply(yn,[0,t.length].concat(t))}}function O2(n){let t=Dl,e=bt,s=xp,r=zh,a=wp,u=Ds,h=Gn,p=new Uint8Array(qt.slice(0,Dl)),m=yn,y=ve,_=Uh,b=n();return Dl=t,bt=e,xp=s,zh=r,wp=a,Ds=u,Gn=h,qt=p,Uh=_,yn=m,ve=y,Ti=new DataView(qt.buffer,qt.byteOffset,qt.byteLength),b}function U0(){qt=null,Ds=null,yn=null}const Ty=new Array(147);for(let n=0;n<256;n++)Ty[n]=+("1e"+Math.floor(45.15-n*.30103));let Ay=new C2({useRecords:!1});Ay.decode;Ay.decodeMultiple;let rp;try{rp=new TextEncoder}catch{}let B0,D2;const $p=typeof globalThis=="object"&&globalThis.Buffer,ef=typeof $p<"u",zg=ef?$p.allocUnsafeSlow:Uint8Array,fx=ef?$p:Uint8Array,dx=256,px=ef?4294967296:2144337920;let Ug,ct,tn,nt=0,va,jn=null;const OL=61440,DL=/[\u0080-\uFFFF]/,us=Symbol("record-id");let RL=class extends C2{constructor(t){super(t),this.offset=0;let e,s,r,a,u;t=t||{};let h=fx.prototype.utf8Write?function(k,X,Z){return ct.utf8Write(k,X,Z)}:rp&&rp.encodeInto?function(k,X){return rp.encodeInto(k,ct.subarray(X)).written}:!1,p=this,m=t.structures||t.saveStructures,y=t.maxSharedStructures;if(y==null&&(y=m?128:0),y>8190)throw new Error("Maximum maxSharedStructure is 8190");let _=t.sequential;_&&(y=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let b,S,x=t.sharedValues,A;if(x){A=Object.create(null);for(let k=0,X=x.length;k<X;k++)A[x[k]]=k}let E=[],R=0,z=0;this.mapEncode=function(k,X){return this._keyMap&&!this._mapped&&k.constructor.name==="Array"&&(k=k.map(Z=>this.encodeKeys(Z))),this.encode(k,X)},this.encode=function(k,X){if(ct||(ct=new zg(8192),tn=new DataView(ct.buffer,0,8192),nt=0),va=ct.length-10,va-nt<2048?(ct=new zg(ct.length),tn=new DataView(ct.buffer,0,ct.length),va=ct.length-10,nt=0):X===gx&&(nt=nt+7&2147483640),e=nt,p.useSelfDescribedHeader&&(tn.setUint32(nt,3654940416),nt+=3),u=p.structuredClone?new Map:null,p.bundleStrings&&typeof k!="string"?(jn=[],jn.size=1/0):jn=null,s=p.structures,s){if(s.uninitialized){let P=p.getShared()||{};p.structures=s=P.structures||[],p.sharedVersion=P.version;let U=p.sharedValues=P.packedValues;if(U){A={};for(let K=0,D=U.length;K<D;K++)A[U[K]]=K}}let Z=s.length;if(Z>y&&!_&&(Z=y),!s.transitions){s.transitions=Object.create(null);for(let P=0;P<Z;P++){let U=s[P];if(!U)continue;let K,D=s.transitions;for(let V=0,I=U.length;V<I;V++){D[us]===void 0&&(D[us]=P);let Y=U[V];K=D[Y],K||(K=D[Y]=Object.create(null)),D=K}D[us]=P|1048576}}_||(s.nextId=Z)}if(r&&(r=!1),a=s||[],S=A,t.pack){let Z=new Map;if(Z.values=[],Z.encoder=p,Z.maxValues=t.maxPrivatePackedValues||(A?16:1/0),Z.objectMap=A||!1,Z.samplingPackedValues=b,op(k,Z),Z.values.length>0){ct[nt++]=216,ct[nt++]=51,Ir(4);let P=Z.values;O(P),Ir(0),Ir(0),S=Object.create(A||null);for(let U=0,K=P.length;U<K;U++)S[P[U]]=U}}Ug=X&Hg;try{if(Ug)return;if(O(k),jn&&_x(e,O),p.offset=nt,u&&u.idsToInsert){nt+=u.idsToInsert.length*2,nt>va&&N(nt),p.offset=nt;let Z=PL(ct.subarray(e,nt),u.idsToInsert);return u=null,Z}return X&gx?(ct.start=e,ct.end=nt,ct):ct.subarray(e,nt)}finally{if(s){if(z<10&&z++,s.length>y&&(s.length=y),R>1e4)s.transitions=null,z=0,R=0,E.length>0&&(E=[]);else if(E.length>0&&!_){for(let Z=0,P=E.length;Z<P;Z++)E[Z][us]=void 0;E=[]}}if(r&&p.saveShared){p.structures.length>y&&(p.structures=p.structures.slice(0,y));let Z=ct.subarray(e,nt);return p.updateSharedData()===!1?p.encode(k):Z}X&zL&&(nt=e)}},this.findCommonStringsToPack=()=>(b=new Map,A||(A=Object.create(null)),k=>{let X=k&&k.threshold||4,Z=this.pack?k.maxPrivatePackedValues||16:0;x||(x=this.sharedValues=[]);for(let[P,U]of b)U.count>X&&(A[P]=Z++,x.push(P),r=!0);for(;this.saveShared&&this.updateSharedData()===!1;);b=null});const O=k=>{nt>va&&(ct=N(nt));var X=typeof k,Z;if(X==="string"){if(S){let D=S[k];if(D>=0){D<16?ct[nt++]=D+224:(ct[nt++]=198,D&1?O(15-D>>1):O(D-16>>1));return}else if(b&&!t.pack){let V=b.get(k);V?V.count++:b.set(k,{count:1})}}let P=k.length;if(jn&&P>=4&&P<1024){if((jn.size+=P)>OL){let V,I=(jn[0]?jn[0].length*3+jn[1].length:0)+10;nt+I>va&&(ct=N(nt+I)),ct[nt++]=217,ct[nt++]=223,ct[nt++]=249,ct[nt++]=jn.position?132:130,ct[nt++]=26,V=nt-e,nt+=4,jn.position&&_x(e,O),jn=["",""],jn.size=0,jn.position=V}let D=DL.test(k);jn[D?0:1]+=k,ct[nt++]=D?206:207,O(P);return}let U;P<32?U=1:P<256?U=2:P<65536?U=3:U=5;let K=P*3;if(nt+K>va&&(ct=N(nt+K)),P<64||!h){let D,V,I,Y=nt+U;for(D=0;D<P;D++)V=k.charCodeAt(D),V<128?ct[Y++]=V:V<2048?(ct[Y++]=V>>6|192,ct[Y++]=V&63|128):(V&64512)===55296&&((I=k.charCodeAt(D+1))&64512)===56320?(V=65536+((V&1023)<<10)+(I&1023),D++,ct[Y++]=V>>18|240,ct[Y++]=V>>12&63|128,ct[Y++]=V>>6&63|128,ct[Y++]=V&63|128):(ct[Y++]=V>>12|224,ct[Y++]=V>>6&63|128,ct[Y++]=V&63|128);Z=Y-nt-U}else Z=h(k,nt+U,K);Z<24?ct[nt++]=96|Z:Z<256?(U<2&&ct.copyWithin(nt+2,nt+1,nt+1+Z),ct[nt++]=120,ct[nt++]=Z):Z<65536?(U<3&&ct.copyWithin(nt+3,nt+2,nt+2+Z),ct[nt++]=121,ct[nt++]=Z>>8,ct[nt++]=Z&255):(U<5&&ct.copyWithin(nt+5,nt+3,nt+3+Z),ct[nt++]=122,tn.setUint32(nt,Z),nt+=4),nt+=Z}else if(X==="number")if(!this.alwaysUseFloat&&k>>>0===k)k<24?ct[nt++]=k:k<256?(ct[nt++]=24,ct[nt++]=k):k<65536?(ct[nt++]=25,ct[nt++]=k>>8,ct[nt++]=k&255):(ct[nt++]=26,tn.setUint32(nt,k),nt+=4);else if(!this.alwaysUseFloat&&k>>0===k)k>=-24?ct[nt++]=31-k:k>=-256?(ct[nt++]=56,ct[nt++]=~k):k>=-65536?(ct[nt++]=57,tn.setUint16(nt,~k),nt+=2):(ct[nt++]=58,tn.setUint32(nt,~k),nt+=4);else{let P;if((P=this.useFloat32)>0&&k<4294967296&&k>=-2147483648){ct[nt++]=250,tn.setFloat32(nt,k);let U;if(P<4||(U=k*Ty[(ct[nt]&127)<<1|ct[nt+1]>>7])>>0===U){nt+=4;return}else nt--}ct[nt++]=251,tn.setFloat64(nt,k),nt+=8}else if(X==="object")if(!k)ct[nt++]=246;else{if(u){let U=u.get(k);if(U){if(ct[nt++]=216,ct[nt++]=29,ct[nt++]=25,!U.references){let K=u.idsToInsert||(u.idsToInsert=[]);U.references=[],K.push(U)}U.references.push(nt-e),nt+=2;return}else u.set(k,{offset:nt-e})}let P=k.constructor;if(P===Object)$(k);else if(P===Array){Z=k.length,Z<24?ct[nt++]=128|Z:Ir(Z);for(let U=0;U<Z;U++)O(k[U])}else if(P===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(ct[nt++]=217,ct[nt++]=1,ct[nt++]=3),Z=k.size,Z<24?ct[nt++]=160|Z:Z<256?(ct[nt++]=184,ct[nt++]=Z):Z<65536?(ct[nt++]=185,ct[nt++]=Z>>8,ct[nt++]=Z&255):(ct[nt++]=186,tn.setUint32(nt,Z),nt+=4),p.keyMap)for(let[U,K]of k)O(p.encodeKey(U)),O(K);else for(let[U,K]of k)O(U),O(K);else{for(let U=0,K=B0.length;U<K;U++){let D=D2[U];if(k instanceof D){let V=B0[U],I=V.tag;I==null&&(I=V.getTag&&V.getTag.call(this,k)),I<24?ct[nt++]=192|I:I<256?(ct[nt++]=216,ct[nt++]=I):I<65536?(ct[nt++]=217,ct[nt++]=I>>8,ct[nt++]=I&255):I>-1&&(ct[nt++]=218,tn.setUint32(nt,I),nt+=4),V.encode.call(this,k,O,N);return}}if(k[Symbol.iterator]){if(Ug){let U=new Error("Iterable should be serialized as iterator");throw U.iteratorNotHandled=!0,U}ct[nt++]=159;for(let U of k)O(U);ct[nt++]=255;return}if(k[Symbol.asyncIterator]||Bg(k)){let U=new Error("Iterable/blob should be serialized as iterator");throw U.iteratorNotHandled=!0,U}if(this.useToJSON&&k.toJSON){const U=k.toJSON();if(U!==k)return O(U)}$(k)}}else if(X==="boolean")ct[nt++]=k?245:244;else if(X==="bigint"){if(k<BigInt(1)<<BigInt(64)&&k>=0)ct[nt++]=27,tn.setBigUint64(nt,k);else if(k>-(BigInt(1)<<BigInt(64))&&k<0)ct[nt++]=59,tn.setBigUint64(nt,-k-BigInt(1));else if(this.largeBigIntToFloat)ct[nt++]=251,tn.setFloat64(nt,Number(k));else{k>=BigInt(0)?ct[nt++]=194:(ct[nt++]=195,k=BigInt(-1)-k);let P=[];for(;k;)P.push(Number(k&BigInt(255))),k>>=BigInt(8);H0(new Uint8Array(P.reverse()),N);return}nt+=8}else if(X==="undefined")ct[nt++]=247;else throw new Error("Unknown type: "+X)},$=this.useRecords===!1?this.variableMapSize?k=>{let X=Object.keys(k),Z=Object.values(k),P=X.length;if(P<24?ct[nt++]=160|P:P<256?(ct[nt++]=184,ct[nt++]=P):P<65536?(ct[nt++]=185,ct[nt++]=P>>8,ct[nt++]=P&255):(ct[nt++]=186,tn.setUint32(nt,P),nt+=4),p.keyMap)for(let U=0;U<P;U++)O(p.encodeKey(X[U])),O(Z[U]);else for(let U=0;U<P;U++)O(X[U]),O(Z[U])}:k=>{ct[nt++]=185;let X=nt-e;nt+=2;let Z=0;if(p.keyMap)for(let P in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(P))&&(O(p.encodeKey(P)),O(k[P]),Z++);else for(let P in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(P))&&(O(P),O(k[P]),Z++);ct[X+++e]=Z>>8,ct[X+e]=Z&255}:(k,X)=>{let Z,P=a.transitions||(a.transitions=Object.create(null)),U=0,K=0,D,V;if(this.keyMap){V=Object.keys(k).map(Y=>this.encodeKey(Y)),K=V.length;for(let Y=0;Y<K;Y++){let at=V[Y];Z=P[at],Z||(Z=P[at]=Object.create(null),U++),P=Z}}else for(let Y in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(Y))&&(Z=P[Y],Z||(P[us]&1048576&&(D=P[us]&65535),Z=P[Y]=Object.create(null),U++),P=Z,K++);let I=P[us];if(I!==void 0)I&=65535,ct[nt++]=217,ct[nt++]=I>>8|224,ct[nt++]=I&255;else if(V||(V=P.__keys__||(P.__keys__=Object.keys(k))),D===void 0?(I=a.nextId++,I||(I=0,a.nextId=1),I>=dx&&(a.nextId=(I=y)+1)):I=D,a[I]=V,I<y){ct[nt++]=217,ct[nt++]=I>>8|224,ct[nt++]=I&255,P=a.transitions;for(let Y=0;Y<K;Y++)(P[us]===void 0||P[us]&1048576)&&(P[us]=I),P=P[V[Y]];P[us]=I|1048576,r=!0}else{if(P[us]=I,tn.setUint32(nt,3655335680),nt+=3,U&&(R+=z*U),E.length>=dx-y&&(E.shift()[us]=void 0),E.push(P),Ir(K+2),O(57344+I),O(V),X)return;for(let Y in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(Y))&&O(k[Y]);return}if(K<24?ct[nt++]=128|K:Ir(K),!X)for(let Y in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(Y))&&O(k[Y])},N=k=>{let X;if(k>16777216){if(k-e>px)throw new Error("Encoded buffer would be larger than maximum buffer size");X=Math.min(px,Math.round(Math.max((k-e)*(k>67108864?1.25:2),4194304)/4096)*4096)}else X=(Math.max(k-e<<2,ct.length-1)>>12)+1<<12;let Z=new zg(X);return tn=new DataView(Z.buffer,0,X),ct.copy?ct.copy(Z,0,e,k):Z.set(ct.slice(e,k)),nt-=e,e=0,va=Z.length-10,ct=Z};let j=100,F=1e3;this.encodeAsIterable=function(k,X){return Q(k,X,G)},this.encodeAsAsyncIterable=function(k,X){return Q(k,X,et)};function*G(k,X,Z){let P=k.constructor;if(P===Object){let U=p.useRecords!==!1;U?$(k,!0):mx(Object.keys(k).length,160);for(let K in k){let D=k[K];U||O(K),D&&typeof D=="object"?X[K]?yield*G(D,X[K]):yield*q(D,X,K):O(D)}}else if(P===Array){let U=k.length;Ir(U);for(let K=0;K<U;K++){let D=k[K];D&&(typeof D=="object"||nt-e>j)?X.element?yield*G(D,X.element):yield*q(D,X,"element"):O(D)}}else if(k[Symbol.iterator]&&!k.buffer){ct[nt++]=159;for(let U of k)U&&(typeof U=="object"||nt-e>j)?X.element?yield*G(U,X.element):yield*q(U,X,"element"):O(U);ct[nt++]=255}else Bg(k)?(mx(k.size,64),yield ct.subarray(e,nt),yield k,W()):k[Symbol.asyncIterator]?(ct[nt++]=159,yield ct.subarray(e,nt),yield k,W(),ct[nt++]=255):O(k);Z&&nt>e?yield ct.subarray(e,nt):nt-e>j&&(yield ct.subarray(e,nt),W())}function*q(k,X,Z){let P=nt-e;try{O(k),nt-e>j&&(yield ct.subarray(e,nt),W())}catch(U){if(U.iteratorNotHandled)X[Z]={},nt=e+P,yield*G.call(this,k,X[Z]);else throw U}}function W(){j=F,p.encode(null,Hg)}function Q(k,X,Z){return X&&X.chunkThreshold?j=F=X.chunkThreshold:j=100,k&&typeof k=="object"?(p.encode(null,Hg),Z(k,p.iterateProperties||(p.iterateProperties={}),!0)):[p.encode(k)]}async function*et(k,X){for(let Z of G(k,X,!0)){let P=Z.constructor;if(P===fx||P===Uint8Array)yield Z;else if(Bg(Z)){let U=Z.stream().getReader(),K;for(;!(K=await U.read()).done;)yield K.value}else if(Z[Symbol.asyncIterator])for await(let U of Z)W(),U?yield*et(U,X.async||(X.async={})):yield p.encode(U);else yield Z}}}useBuffer(t){ct=t,tn=new DataView(ct.buffer,ct.byteOffset,ct.byteLength),nt=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let t=this.sharedVersion||0;this.sharedVersion=t+1;let e=this.structures.slice(0),s=new R2(e,this.sharedValues,this.sharedVersion),r=this.saveShared(s,a=>(a&&a.version||0)==t);return r===!1?(s=this.getShared()||{},this.structures=s.structures||[],this.sharedValues=s.packedValues,this.sharedVersion=s.version,this.structures.nextId=this.structures.length):e.forEach((a,u)=>this.structures[u]=a),r}};function mx(n,t){n<24?ct[nt++]=t|n:n<256?(ct[nt++]=t|24,ct[nt++]=n):n<65536?(ct[nt++]=t|25,ct[nt++]=n>>8,ct[nt++]=n&255):(ct[nt++]=t|26,tn.setUint32(nt,n),nt+=4)}let R2=class{constructor(t,e,s){this.structures=t,this.packedValues=e,this.version=s}};function Ir(n){n<24?ct[nt++]=128|n:n<256?(ct[nt++]=152,ct[nt++]=n):n<65536?(ct[nt++]=153,ct[nt++]=n>>8,ct[nt++]=n&255):(ct[nt++]=154,tn.setUint32(nt,n),nt+=4)}const IL=typeof Blob>"u"?function(){}:Blob;function Bg(n){if(n instanceof IL)return!0;let t=n[Symbol.toStringTag];return t==="Blob"||t==="File"}function op(n,t){switch(typeof n){case"string":if(n.length>3){if(t.objectMap[n]>-1||t.values.length>=t.maxValues)return;let s=t.get(n);if(s)++s.count==2&&t.values.push(n);else if(t.set(n,{count:1}),t.samplingPackedValues){let r=t.samplingPackedValues.get(n);r?r.count++:t.samplingPackedValues.set(n,{count:1})}}break;case"object":if(n)if(n instanceof Array)for(let s=0,r=n.length;s<r;s++)op(n[s],t);else{let s=!t.encoder.useRecords;for(var e in n)n.hasOwnProperty(e)&&(s&&op(e,t),op(n[e],t))}break;case"function":console.log(n)}}const NL=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;D2=[Date,Set,Error,RegExp,Pl,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,R2];B0=[{tag:1,encode(n,t){let e=n.getTime()/1e3;(this.useTimestamp32||n.getMilliseconds()===0)&&e>=0&&e<4294967296?(ct[nt++]=26,tn.setUint32(nt,e),nt+=4):(ct[nt++]=251,tn.setFloat64(nt,e),nt+=8)}},{tag:258,encode(n,t){let e=Array.from(n);t(e)}},{tag:27,encode(n,t){t([n.name,n.message])}},{tag:27,encode(n,t){t(["RegExp",n.source,n.flags])}},{getTag(n){return n.tag},encode(n,t){t(n.value)}},{encode(n,t,e){H0(n,e)}},{getTag(n){if(n.constructor===Uint8Array&&(this.tagUint8Array||ef&&this.tagUint8Array!==!1))return 64},encode(n,t,e){H0(n,e)}},kr(68,1),kr(69,2),kr(70,4),kr(71,8),kr(72,1),kr(77,2),kr(78,4),kr(79,8),kr(85,4),kr(86,8),{encode(n,t){let e=n.packedValues||[],s=n.structures||[];if(e.values.length>0){ct[nt++]=216,ct[nt++]=51,Ir(4);let r=e.values;t(r),Ir(0),Ir(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let a=0,u=r.length;a<u;a++)packedObjectMap[r[a]]=a}if(s){tn.setUint32(nt,3655335424),nt+=3;let r=s.slice(0);r.unshift(57344),r.push(new Pl(n.version,1399353956)),t(r)}else t(new Pl(n.version,1399353956))}}];function kr(n,t){return!NL&&t>1&&(n-=4),{tag:n,encode:function(s,r){let a=s.byteLength,u=s.byteOffset||0,h=s.buffer||s;r(ef?$p.from(h,u,a):new Uint8Array(h,u,a))}}}function H0(n,t){let e=n.byteLength;e<24?ct[nt++]=64+e:e<256?(ct[nt++]=88,ct[nt++]=e):e<65536?(ct[nt++]=89,ct[nt++]=e>>8,ct[nt++]=e&255):(ct[nt++]=90,tn.setUint32(nt,e),nt+=4),nt+e>=ct.length&&t(nt+e),ct.set(n.buffer?n:new Uint8Array(n),nt),nt+=e}function PL(n,t){let e,s=t.length*2,r=n.length-s;t.sort((a,u)=>a.offset>u.offset?1:-1);for(let a=0;a<t.length;a++){let u=t[a];u.id=a;for(let h of u.references)n[h++]=a>>8,n[h]=a&255}for(;e=t.pop();){let a=e.offset;n.copyWithin(a+s,a,r),s-=2;let u=a+s;n[u++]=216,n[u++]=28,r=a}return n}function _x(n,t){tn.setUint32(jn.position+n,nt-jn.position-n+1);let e=jn;jn=null,t(e[0]),t(e[1])}let Ey=new RL({useRecords:!1});Ey.encode;Ey.encodeAsIterable;Ey.encodeAsAsyncIterable;const gx=512,zL=1024,Hg=2048;new FinalizationRegistry(n=>n());var ap={exports:{}},UL=ap.exports,yx;function BL(){return yx||(yx=1,(function(n){(function(t,e){var s={};e(s);var r=s.default;for(var a in s)r[a]=s[a];n.exports=r})(UL,function(t){t.__esModule=!0,t.digestLength=32,t.blockSize=64;var e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(b,S,x,A,E){for(var R,z,O,$,N,j,F,G,q,W,Q,et,k;E>=64;){for(R=S[0],z=S[1],O=S[2],$=S[3],N=S[4],j=S[5],F=S[6],G=S[7],W=0;W<16;W++)Q=A+W*4,b[W]=(x[Q]&255)<<24|(x[Q+1]&255)<<16|(x[Q+2]&255)<<8|x[Q+3]&255;for(W=16;W<64;W++)q=b[W-2],et=(q>>>17|q<<15)^(q>>>19|q<<13)^q>>>10,q=b[W-15],k=(q>>>7|q<<25)^(q>>>18|q<<14)^q>>>3,b[W]=(et+b[W-7]|0)+(k+b[W-16]|0);for(W=0;W<64;W++)et=(((N>>>6|N<<26)^(N>>>11|N<<21)^(N>>>25|N<<7))+(N&j^~N&F)|0)+(G+(e[W]+b[W]|0)|0)|0,k=((R>>>2|R<<30)^(R>>>13|R<<19)^(R>>>22|R<<10))+(R&z^R&O^z&O)|0,G=F,F=j,j=N,N=$+et|0,$=O,O=z,z=R,R=et+k|0;S[0]+=R,S[1]+=z,S[2]+=O,S[3]+=$,S[4]+=N,S[5]+=j,S[6]+=F,S[7]+=G,A+=64,E-=64}return A}var r=(function(){function b(){this.digestLength=t.digestLength,this.blockSize=t.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return b.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},b.prototype.clean=function(){for(var S=0;S<this.buffer.length;S++)this.buffer[S]=0;for(var S=0;S<this.temp.length;S++)this.temp[S]=0;this.reset()},b.prototype.update=function(S,x){if(x===void 0&&(x=S.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var A=0;if(this.bytesHashed+=x,this.bufferLength>0){for(;this.bufferLength<64&&x>0;)this.buffer[this.bufferLength++]=S[A++],x--;this.bufferLength===64&&(s(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(x>=64&&(A=s(this.temp,this.state,S,A,x),x%=64);x>0;)this.buffer[this.bufferLength++]=S[A++],x--;return this},b.prototype.finish=function(S){if(!this.finished){var x=this.bytesHashed,A=this.bufferLength,E=x/536870912|0,R=x<<3,z=x%64<56?64:128;this.buffer[A]=128;for(var O=A+1;O<z-8;O++)this.buffer[O]=0;this.buffer[z-8]=E>>>24&255,this.buffer[z-7]=E>>>16&255,this.buffer[z-6]=E>>>8&255,this.buffer[z-5]=E>>>0&255,this.buffer[z-4]=R>>>24&255,this.buffer[z-3]=R>>>16&255,this.buffer[z-2]=R>>>8&255,this.buffer[z-1]=R>>>0&255,s(this.temp,this.state,this.buffer,0,z),this.finished=!0}for(var O=0;O<8;O++)S[O*4+0]=this.state[O]>>>24&255,S[O*4+1]=this.state[O]>>>16&255,S[O*4+2]=this.state[O]>>>8&255,S[O*4+3]=this.state[O]>>>0&255;return this},b.prototype.digest=function(){var S=new Uint8Array(this.digestLength);return this.finish(S),S},b.prototype._saveState=function(S){for(var x=0;x<this.state.length;x++)S[x]=this.state[x]},b.prototype._restoreState=function(S,x){for(var A=0;A<this.state.length;A++)this.state[A]=S[A];this.bytesHashed=x,this.finished=!1,this.bufferLength=0},b})();t.Hash=r;var a=(function(){function b(S){this.inner=new r,this.outer=new r,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var x=new Uint8Array(this.blockSize);if(S.length>this.blockSize)new r().update(S).finish(x).clean();else for(var A=0;A<S.length;A++)x[A]=S[A];for(var A=0;A<x.length;A++)x[A]^=54;this.inner.update(x);for(var A=0;A<x.length;A++)x[A]^=106;this.outer.update(x),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var A=0;A<x.length;A++)x[A]=0}return b.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},b.prototype.clean=function(){for(var S=0;S<this.istate.length;S++)this.ostate[S]=this.istate[S]=0;this.inner.clean(),this.outer.clean()},b.prototype.update=function(S){return this.inner.update(S),this},b.prototype.finish=function(S){return this.outer.finished?this.outer.finish(S):(this.inner.finish(S),this.outer.update(S,this.digestLength).finish(S)),this},b.prototype.digest=function(){var S=new Uint8Array(this.digestLength);return this.finish(S),S},b})();t.HMAC=a;function u(b){var S=new r().update(b),x=S.digest();return S.clean(),x}t.hash=u,t.default=u;function h(b,S){var x=new a(b).update(S),A=x.digest();return x.clean(),A}t.hmac=h;function p(b,S,x,A){var E=A[0];if(E===0)throw new Error("hkdf: cannot expand more");S.reset(),E>1&&S.update(b),x&&S.update(x),S.update(A),S.finish(b),A[0]++}var m=new Uint8Array(t.digestLength);function y(b,S,x,A){S===void 0&&(S=m),A===void 0&&(A=32);for(var E=new Uint8Array([1]),R=h(S,b),z=new a(R),O=new Uint8Array(z.digestLength),$=O.length,N=new Uint8Array(A),j=0;j<A;j++)$===O.length&&(p(O,z,x,E),$=0),N[j]=O[$++];return z.clean(),O.fill(0),E.fill(0),N}t.hkdf=y;function _(b,S,x,A){for(var E=new a(b),R=E.digestLength,z=new Uint8Array(4),O=new Uint8Array(R),$=new Uint8Array(R),N=new Uint8Array(A),j=0;j*R<A;j++){var F=j+1;z[0]=F>>>24&255,z[1]=F>>>16&255,z[2]=F>>>8&255,z[3]=F>>>0&255,E.reset(),E.update(S),E.update(z),E.finish($);for(var G=0;G<R;G++)O[G]=$[G];for(var G=2;G<=x;G++){E.reset(),E.update($).finish($);for(var q=0;q<R;q++)O[q]^=$[q]}for(var G=0;G<R&&j*R+G<A;G++)N[j*R+G]=O[G]}for(var j=0;j<R;j++)O[j]=$[j]=0;for(var j=0;j<4;j++)z[j]=0;return E.clean(),N}t.pbkdf2=_})})(ap)),ap.exports}BL();gL("automerge-repo:collectionsync");var Eh={exports:{}};var HL=Eh.exports,vx;function VL(){return vx||(vx=1,(function(n,t){(function(e,s){s(t)})(HL,(function(e){var s="1.9.4";function r(l){var f,g,T,C;for(g=1,T=arguments.length;g<T;g++){C=arguments[g];for(f in C)l[f]=C[f]}return l}var a=Object.create||(function(){function l(){}return function(f){return l.prototype=f,new l}})();function u(l,f){var g=Array.prototype.slice;if(l.bind)return l.bind.apply(l,g.call(arguments,1));var T=g.call(arguments,2);return function(){return l.apply(f,T.length?T.concat(g.call(arguments)):arguments)}}var h=0;function p(l){return"_leaflet_id"in l||(l._leaflet_id=++h),l._leaflet_id}function m(l,f,g){var T,C,B,J;return J=function(){T=!1,C&&(B.apply(g,C),C=!1)},B=function(){T?C=arguments:(l.apply(g,arguments),setTimeout(J,f),T=!0)},B}function y(l,f,g){var T=f[1],C=f[0],B=T-C;return l===T&&g?l:((l-C)%B+B)%B+C}function _(){return!1}function b(l,f){if(f===!1)return l;var g=Math.pow(10,f===void 0?6:f);return Math.round(l*g)/g}function S(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function x(l){return S(l).split(/\s+/)}function A(l,f){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?a(l.options):{});for(var g in f)l.options[g]=f[g];return l.options}function E(l,f,g){var T=[];for(var C in l)T.push(encodeURIComponent(g?C.toUpperCase():C)+"="+encodeURIComponent(l[C]));return(!f||f.indexOf("?")===-1?"?":"&")+T.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function z(l,f){return l.replace(R,function(g,T){var C=f[T];if(C===void 0)throw new Error("No value provided for variable "+g);return typeof C=="function"&&(C=C(f)),C})}var O=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function $(l,f){for(var g=0;g<l.length;g++)if(l[g]===f)return g;return-1}var N="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function j(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var F=0;function G(l){var f=+new Date,g=Math.max(0,16-(f-F));return F=f+g,window.setTimeout(l,g)}var q=window.requestAnimationFrame||j("RequestAnimationFrame")||G,W=window.cancelAnimationFrame||j("CancelAnimationFrame")||j("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function Q(l,f,g){if(g&&q===G)l.call(f);else return q.call(window,u(l,f))}function et(l){l&&W.call(window,l)}var k={__proto__:null,extend:r,create:a,bind:u,get lastId(){return h},stamp:p,throttle:m,wrapNum:y,falseFn:_,formatNum:b,trim:S,splitWords:x,setOptions:A,getParamString:E,template:z,isArray:O,indexOf:$,emptyImageUrl:N,requestFn:q,cancelFn:W,requestAnimFrame:Q,cancelAnimFrame:et};function X(){}X.extend=function(l){var f=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},g=f.__super__=this.prototype,T=a(g);T.constructor=f,f.prototype=T;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(f[C]=this[C]);return l.statics&&r(f,l.statics),l.includes&&(Z(l.includes),r.apply(null,[T].concat(l.includes))),r(T,l),delete T.statics,delete T.includes,T.options&&(T.options=g.options?a(g.options):{},r(T.options,l.options)),T._initHooks=[],T.callInitHooks=function(){if(!this._initHooksCalled){g.callInitHooks&&g.callInitHooks.call(this),this._initHooksCalled=!0;for(var B=0,J=T._initHooks.length;B<J;B++)T._initHooks[B].call(this)}},f},X.include=function(l){var f=this.prototype.options;return r(this.prototype,l),l.options&&(this.prototype.options=f,this.mergeOptions(l.options)),this},X.mergeOptions=function(l){return r(this.prototype.options,l),this},X.addInitHook=function(l){var f=Array.prototype.slice.call(arguments,1),g=typeof l=="function"?l:function(){this[l].apply(this,f)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(g),this};function Z(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=O(l)?l:[l];for(var f=0;f<l.length;f++)l[f]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var P={on:function(l,f,g){if(typeof l=="object")for(var T in l)this._on(T,l[T],f);else{l=x(l);for(var C=0,B=l.length;C<B;C++)this._on(l[C],f,g)}return this},off:function(l,f,g){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var T in l)this._off(T,l[T],f);else{l=x(l);for(var C=arguments.length===1,B=0,J=l.length;B<J;B++)C?this._off(l[B]):this._off(l[B],f,g)}return this},_on:function(l,f,g,T){if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}if(this._listens(l,f,g)===!1){g===this&&(g=void 0);var C={fn:f,ctx:g};T&&(C.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(C)}},_off:function(l,f,g){var T,C,B;if(this._events&&(T=this._events[l],!!T)){if(arguments.length===1){if(this._firingCount)for(C=0,B=T.length;C<B;C++)T[C].fn=_;delete this._events[l];return}if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}var J=this._listens(l,f,g);if(J!==!1){var ot=T[J];this._firingCount&&(ot.fn=_,this._events[l]=T=T.slice()),T.splice(J,1)}}},fire:function(l,f,g){if(!this.listens(l,g))return this;var T=r({},f,{type:l,target:this,sourceTarget:f&&f.sourceTarget||this});if(this._events){var C=this._events[l];if(C){this._firingCount=this._firingCount+1||1;for(var B=0,J=C.length;B<J;B++){var ot=C[B],ft=ot.fn;ot.once&&this.off(l,ft,ot.ctx),ft.call(ot.ctx||this,T)}this._firingCount--}}return g&&this._propagateEvent(T),this},listens:function(l,f,g,T){typeof l!="string"&&console.warn('"string" type argument expected');var C=f;typeof f!="function"&&(T=!!f,C=void 0,g=void 0);var B=this._events&&this._events[l];if(B&&B.length&&this._listens(l,C,g)!==!1)return!0;if(T){for(var J in this._eventParents)if(this._eventParents[J].listens(l,f,g,T))return!0}return!1},_listens:function(l,f,g){if(!this._events)return!1;var T=this._events[l]||[];if(!f)return!!T.length;g===this&&(g=void 0);for(var C=0,B=T.length;C<B;C++)if(T[C].fn===f&&T[C].ctx===g)return C;return!1},once:function(l,f,g){if(typeof l=="object")for(var T in l)this._on(T,l[T],f,!0);else{l=x(l);for(var C=0,B=l.length;C<B;C++)this._on(l[C],f,g,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[p(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[p(l)],this},_propagateEvent:function(l){for(var f in this._eventParents)this._eventParents[f].fire(l.type,r({layer:l.target,propagatedFrom:l.target},l),!0)}};P.addEventListener=P.on,P.removeEventListener=P.clearAllEventListeners=P.off,P.addOneTimeEventListener=P.once,P.fireEvent=P.fire,P.hasEventListeners=P.listens;var U=X.extend(P);function K(l,f,g){this.x=g?Math.round(l):l,this.y=g?Math.round(f):f}var D=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(l){return this.clone()._add(V(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(V(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new K(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new K(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=D(this.x),this.y=D(this.y),this},distanceTo:function(l){l=V(l);var f=l.x-this.x,g=l.y-this.y;return Math.sqrt(f*f+g*g)},equals:function(l){return l=V(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=V(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function V(l,f,g){return l instanceof K?l:O(l)?new K(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new K(l.x,l.y):new K(l,f,g)}function I(l,f){if(l)for(var g=f?[l,f]:l,T=0,C=g.length;T<C;T++)this.extend(g[T])}I.prototype={extend:function(l){var f,g;if(!l)return this;if(l instanceof K||typeof l[0]=="number"||"x"in l)f=g=V(l);else if(l=Y(l),f=l.min,g=l.max,!f||!g)return this;return!this.min&&!this.max?(this.min=f.clone(),this.max=g.clone()):(this.min.x=Math.min(f.x,this.min.x),this.max.x=Math.max(g.x,this.max.x),this.min.y=Math.min(f.y,this.min.y),this.max.y=Math.max(g.y,this.max.y)),this},getCenter:function(l){return V((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return V(this.min.x,this.max.y)},getTopRight:function(){return V(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var f,g;return typeof l[0]=="number"||l instanceof K?l=V(l):l=Y(l),l instanceof I?(f=l.min,g=l.max):f=g=l,f.x>=this.min.x&&g.x<=this.max.x&&f.y>=this.min.y&&g.y<=this.max.y},intersects:function(l){l=Y(l);var f=this.min,g=this.max,T=l.min,C=l.max,B=C.x>=f.x&&T.x<=g.x,J=C.y>=f.y&&T.y<=g.y;return B&&J},overlaps:function(l){l=Y(l);var f=this.min,g=this.max,T=l.min,C=l.max,B=C.x>f.x&&T.x<g.x,J=C.y>f.y&&T.y<g.y;return B&&J},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var f=this.min,g=this.max,T=Math.abs(f.x-g.x)*l,C=Math.abs(f.y-g.y)*l;return Y(V(f.x-T,f.y-C),V(g.x+T,g.y+C))},equals:function(l){return l?(l=Y(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function Y(l,f){return!l||l instanceof I?l:new I(l,f)}function at(l,f){if(l)for(var g=f?[l,f]:l,T=0,C=g.length;T<C;T++)this.extend(g[T])}at.prototype={extend:function(l){var f=this._southWest,g=this._northEast,T,C;if(l instanceof gt)T=l,C=l;else if(l instanceof at){if(T=l._southWest,C=l._northEast,!T||!C)return this}else return l?this.extend(yt(l)||mt(l)):this;return!f&&!g?(this._southWest=new gt(T.lat,T.lng),this._northEast=new gt(C.lat,C.lng)):(f.lat=Math.min(T.lat,f.lat),f.lng=Math.min(T.lng,f.lng),g.lat=Math.max(C.lat,g.lat),g.lng=Math.max(C.lng,g.lng)),this},pad:function(l){var f=this._southWest,g=this._northEast,T=Math.abs(f.lat-g.lat)*l,C=Math.abs(f.lng-g.lng)*l;return new at(new gt(f.lat-T,f.lng-C),new gt(g.lat+T,g.lng+C))},getCenter:function(){return new gt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new gt(this.getNorth(),this.getWest())},getSouthEast:function(){return new gt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof gt||"lat"in l?l=yt(l):l=mt(l);var f=this._southWest,g=this._northEast,T,C;return l instanceof at?(T=l.getSouthWest(),C=l.getNorthEast()):T=C=l,T.lat>=f.lat&&C.lat<=g.lat&&T.lng>=f.lng&&C.lng<=g.lng},intersects:function(l){l=mt(l);var f=this._southWest,g=this._northEast,T=l.getSouthWest(),C=l.getNorthEast(),B=C.lat>=f.lat&&T.lat<=g.lat,J=C.lng>=f.lng&&T.lng<=g.lng;return B&&J},overlaps:function(l){l=mt(l);var f=this._southWest,g=this._northEast,T=l.getSouthWest(),C=l.getNorthEast(),B=C.lat>f.lat&&T.lat<g.lat,J=C.lng>f.lng&&T.lng<g.lng;return B&&J},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,f){return l?(l=mt(l),this._southWest.equals(l.getSouthWest(),f)&&this._northEast.equals(l.getNorthEast(),f)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function mt(l,f){return l instanceof at?l:new at(l,f)}function gt(l,f,g){if(isNaN(l)||isNaN(f))throw new Error("Invalid LatLng object: ("+l+", "+f+")");this.lat=+l,this.lng=+f,g!==void 0&&(this.alt=+g)}gt.prototype={equals:function(l,f){if(!l)return!1;l=yt(l);var g=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return g<=(f===void 0?1e-9:f)},toString:function(l){return"LatLng("+b(this.lat,l)+", "+b(this.lng,l)+")"},distanceTo:function(l){return Mt.distance(this,yt(l))},wrap:function(){return Mt.wrapLatLng(this)},toBounds:function(l){var f=180*l/40075017,g=f/Math.cos(Math.PI/180*this.lat);return mt([this.lat-f,this.lng-g],[this.lat+f,this.lng+g])},clone:function(){return new gt(this.lat,this.lng,this.alt)}};function yt(l,f,g){return l instanceof gt?l:O(l)&&typeof l[0]!="object"?l.length===3?new gt(l[0],l[1],l[2]):l.length===2?new gt(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new gt(l.lat,"lng"in l?l.lng:l.lon,l.alt):f===void 0?null:new gt(l,f,g)}var kt={latLngToPoint:function(l,f){var g=this.projection.project(l),T=this.scale(f);return this.transformation._transform(g,T)},pointToLatLng:function(l,f){var g=this.scale(f),T=this.transformation.untransform(l,g);return this.projection.unproject(T)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var f=this.projection.bounds,g=this.scale(l),T=this.transformation.transform(f.min,g),C=this.transformation.transform(f.max,g);return new I(T,C)},infinite:!1,wrapLatLng:function(l){var f=this.wrapLng?y(l.lng,this.wrapLng,!0):l.lng,g=this.wrapLat?y(l.lat,this.wrapLat,!0):l.lat,T=l.alt;return new gt(g,f,T)},wrapLatLngBounds:function(l){var f=l.getCenter(),g=this.wrapLatLng(f),T=f.lat-g.lat,C=f.lng-g.lng;if(T===0&&C===0)return l;var B=l.getSouthWest(),J=l.getNorthEast(),ot=new gt(B.lat-T,B.lng-C),ft=new gt(J.lat-T,J.lng-C);return new at(ot,ft)}},Mt=r({},kt,{wrapLng:[-180,180],R:6371e3,distance:function(l,f){var g=Math.PI/180,T=l.lat*g,C=f.lat*g,B=Math.sin((f.lat-l.lat)*g/2),J=Math.sin((f.lng-l.lng)*g/2),ot=B*B+Math.cos(T)*Math.cos(C)*J*J,ft=2*Math.atan2(Math.sqrt(ot),Math.sqrt(1-ot));return this.R*ft}}),oe=6378137,Ne={R:oe,MAX_LATITUDE:85.0511287798,project:function(l){var f=Math.PI/180,g=this.MAX_LATITUDE,T=Math.max(Math.min(g,l.lat),-g),C=Math.sin(T*f);return new K(this.R*l.lng*f,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(l){var f=180/Math.PI;return new gt((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*f,l.x*f/this.R)},bounds:(function(){var l=oe*Math.PI;return new I([-l,-l],[l,l])})()};function Be(l,f,g,T){if(O(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=f,this._c=g,this._d=T}Be.prototype={transform:function(l,f){return this._transform(l.clone(),f)},_transform:function(l,f){return f=f||1,l.x=f*(this._a*l.x+this._b),l.y=f*(this._c*l.y+this._d),l},untransform:function(l,f){return f=f||1,new K((l.x/f-this._b)/this._a,(l.y/f-this._d)/this._c)}};function sn(l,f,g,T){return new Be(l,f,g,T)}var ni=r({},Mt,{code:"EPSG:3857",projection:Ne,transformation:(function(){var l=.5/(Math.PI*Ne.R);return sn(l,.5,-l,.5)})()}),_i=r({},ni,{code:"EPSG:900913"});function It(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function Qt(l,f){var g="",T,C,B,J,ot,ft;for(T=0,B=l.length;T<B;T++){for(ot=l[T],C=0,J=ot.length;C<J;C++)ft=ot[C],g+=(C?"L":"M")+ft.x+" "+ft.y;g+=f?Ut.svg?"z":"x":""}return g||"M0 0"}var He=document.documentElement.style,Ee="ActiveXObject"in window,ue=Ee&&!document.addEventListener,Le="msLaunchUri"in navigator&&!("documentMode"in document),un=Sn("webkit"),gi=Sn("android"),Oi=Sn("android 2")||Sn("android 3"),xn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),No=gi&&Sn("Google")&&xn<537&&!("AudioNode"in window),yi=!!window.opera,Ba=!Le&&Sn("chrome"),dr=Sn("gecko")&&!un&&!yi&&!Ee,pu=!Ba&&Sn("safari"),Ha=Sn("phantom"),Fl="OTransition"in He,mu=navigator.platform.indexOf("Win")===0,Zs=Ee&&"transition"in He,Un="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Oi,Ji="MozPerspective"in He,ii=!window.L_DISABLE_3D&&(Zs||Un||Ji)&&!Fl&&!Ha,Yr=typeof orientation<"u"||Sn("mobile"),_u=Yr&&un,gu=Yr&&Un,Xr=!window.PointerEvent&&window.MSPointerEvent,Qr=!!(window.PointerEvent||Xr),Et="ontouchstart"in window||!!window.TouchEvent,Ot=!window.L_NO_TOUCH&&(Et||Qr),Zt=Yr&&yi,Dt=Yr&&dr,zt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Nt=(function(){var l=!1;try{var f=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",_,f),window.removeEventListener("testPassiveEventSupport",_,f)}catch{}return l})(),Ft=(function(){return!!document.createElement("canvas").getContext})(),Yt=!!(document.createElementNS&&It("svg").createSVGRect),te=!!Yt&&(function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),rn=!Yt&&(function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var f=l.firstChild;return f.style.behavior="url(#default#VML)",f&&typeof f.adj=="object"}catch{return!1}})(),on=navigator.platform.indexOf("Mac")===0,ts=navigator.platform.indexOf("Linux")===0;function Sn(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var Ut={ie:Ee,ielt9:ue,edge:Le,webkit:un,android:gi,android23:Oi,androidStock:No,opera:yi,chrome:Ba,gecko:dr,safari:pu,phantom:Ha,opera12:Fl,win:mu,ie3d:Zs,webkit3d:Un,gecko3d:Ji,any3d:ii,mobile:Yr,mobileWebkit:_u,mobileWebkit3d:gu,msPointer:Xr,pointer:Qr,touch:Ot,touchNative:Et,mobileOpera:Zt,mobileGecko:Dt,retina:zt,passiveEvents:Nt,canvas:Ft,svg:Yt,vml:rn,inlineSvg:te,mac:on,linux:ts},vi=Ut.msPointer?"MSPointerDown":"pointerdown",Va=Ut.msPointer?"MSPointerMove":"pointermove",Ws=Ut.msPointer?"MSPointerUp":"pointerup",Ln=Ut.msPointer?"MSPointerCancel":"pointercancel",Fn={touchstart:vi,touchmove:Va,touchend:Ws,touchcancel:Ln},$r={touchstart:zo,touchmove:mr,touchend:mr,touchcancel:mr},pr={},bf=!1;function Om(l,f,g){return f==="touchstart"&&Po(),$r[f]?(g=$r[f].bind(this,g),l.addEventListener(Fn[f],g,!1),g):(console.warn("wrong event specified:",f),_)}function wf(l,f,g){if(!Fn[f]){console.warn("wrong event specified:",f);return}l.removeEventListener(Fn[f],g,!1)}function ja(l){pr[l.pointerId]=l}function yu(l){pr[l.pointerId]&&(pr[l.pointerId]=l)}function Kr(l){delete pr[l.pointerId]}function Po(){bf||(document.addEventListener(vi,ja,!0),document.addEventListener(Va,yu,!0),document.addEventListener(Ws,Kr,!0),document.addEventListener(Ln,Kr,!0),bf=!0)}function mr(l,f){if(f.pointerType!==(f.MSPOINTER_TYPE_MOUSE||"mouse")){f.touches=[];for(var g in pr)f.touches.push(pr[g]);f.changedTouches=[f],l(f)}}function zo(l,f){f.MSPOINTER_TYPE_TOUCH&&f.pointerType===f.MSPOINTER_TYPE_TOUCH&&dn(f),mr(l,f)}function Mn(l){var f={},g,T;for(T in l)g=l[T],f[T]=g&&g.bind?g.bind(l):g;return l=f,f.type="dblclick",f.detail=2,f.isTrusted=!1,f._simulated=!0,f}var xf=200;function Sf(l,f){l.addEventListener("dblclick",f);var g=0,T;function C(B){if(B.detail!==1){T=B.detail;return}if(!(B.pointerType==="mouse"||B.sourceCapabilities&&!B.sourceCapabilities.firesTouchEvents)){var J=Xa(B);if(!(J.some(function(ft){return ft instanceof HTMLLabelElement&&ft.attributes.for})&&!J.some(function(ft){return ft instanceof HTMLInputElement||ft instanceof HTMLSelectElement}))){var ot=Date.now();ot-g<=xf?(T++,T===2&&f(Mn(B))):T=1,g=ot}}}return l.addEventListener("click",C),{dblclick:f,simDblclick:C}}function Jr(l,f){l.removeEventListener("dblclick",f.dblclick),l.removeEventListener("click",f.simDblclick)}var _r=Za(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),qa=Za(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),vu=qa==="webkitTransition"||qa==="OTransition"?qa+"End":"transitionend";function bu(l){return typeof l=="string"?document.getElementById(l):l}function Ga(l,f){var g=l.style[f]||l.currentStyle&&l.currentStyle[f];if((!g||g==="auto")&&document.defaultView){var T=document.defaultView.getComputedStyle(l,null);g=T?T[f]:null}return g==="auto"?null:g}function fe(l,f,g){var T=document.createElement(l);return T.className=f||"",g&&g.appendChild(T),T}function Ve(l){var f=l.parentNode;f&&f.removeChild(l)}function Di(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function Bn(l){var f=l.parentNode;f&&f.lastChild!==l&&f.appendChild(l)}function to(l){var f=l.parentNode;f&&f.firstChild!==l&&f.insertBefore(l,f.firstChild)}function wu(l,f){if(l.classList!==void 0)return l.classList.contains(f);var g=Yl(l);return g.length>0&&new RegExp("(^|\\s)"+f+"(\\s|$)").test(g)}function se(l,f){if(l.classList!==void 0)for(var g=x(f),T=0,C=g.length;T<C;T++)l.classList.add(g[T]);else if(!wu(l,f)){var B=Yl(l);Uo(l,(B?B+" ":"")+f)}}function an(l,f){l.classList!==void 0?l.classList.remove(f):Uo(l,S((" "+Yl(l)+" ").replace(" "+f+" "," ")))}function Uo(l,f){l.className.baseVal===void 0?l.className=f:l.className.baseVal=f}function Yl(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function Ke(l,f){"opacity"in l.style?l.style.opacity=f:"filter"in l.style&&xu(l,f)}function xu(l,f){var g=!1,T="DXImageTransform.Microsoft.Alpha";try{g=l.filters.item(T)}catch{if(f===1)return}f=Math.round(f*100),g?(g.Enabled=f!==100,g.Opacity=f):l.style.filter+=" progid:"+T+"(opacity="+f+")"}function Za(l){for(var f=document.documentElement.style,g=0;g<l.length;g++)if(l[g]in f)return l[g];return!1}function Fs(l,f,g){var T=f||new K(0,0);l.style[_r]=(Ut.ie3d?"translate("+T.x+"px,"+T.y+"px)":"translate3d("+T.x+"px,"+T.y+"px,0)")+(g?" scale("+g+")":"")}function We(l,f){l._leaflet_pos=f,Ut.any3d?Fs(l,f):(l.style.left=f.x+"px",l.style.top=f.y+"px")}function gr(l){return l._leaflet_pos||new K(0,0)}var Bo,bs,Su;if("onselectstart"in document)Bo=function(){Jt(window,"selectstart",dn)},bs=function(){Pe(window,"selectstart",dn)};else{var Ho=Za(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Bo=function(){if(Ho){var l=document.documentElement.style;Su=l[Ho],l[Ho]="none"}},bs=function(){Ho&&(document.documentElement.style[Ho]=Su,Su=void 0)}}function Xl(){Jt(window,"dragstart",dn)}function Wa(){Pe(window,"dragstart",dn)}var Ql,Tu;function Vo(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(Ri(),Ql=l,Tu=l.style.outlineStyle,l.style.outlineStyle="none",Jt(window,"keydown",Ri))}function Ri(){Ql&&(Ql.style.outlineStyle=Tu,Ql=void 0,Tu=void 0,Pe(window,"keydown",Ri))}function $l(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function Fa(l){var f=l.getBoundingClientRect();return{x:f.width/l.offsetWidth||1,y:f.height/l.offsetHeight||1,boundingClientRect:f}}var jo={__proto__:null,TRANSFORM:_r,TRANSITION:qa,TRANSITION_END:vu,get:bu,getStyle:Ga,create:fe,remove:Ve,empty:Di,toFront:Bn,toBack:to,hasClass:wu,addClass:se,removeClass:an,setClass:Uo,getClass:Yl,setOpacity:Ke,testProp:Za,setTransform:Fs,setPosition:We,getPosition:gr,get disableTextSelection(){return Bo},get enableTextSelection(){return bs},disableImageDrag:Xl,enableImageDrag:Wa,preventOutline:Vo,restoreOutline:Ri,getSizedParentNode:$l,getScale:Fa};function Jt(l,f,g,T){if(f&&typeof f=="object")for(var C in f)ns(l,C,f[C],g);else{f=x(f);for(var B=0,J=f.length;B<J;B++)ns(l,f[B],g,T)}return this}var es="_leaflet_events";function Pe(l,f,g,T){if(arguments.length===1)Au(l),delete l[es];else if(f&&typeof f=="object")for(var C in f)Ya(l,C,f[C],g);else if(f=x(f),arguments.length===2)Au(l,function(ot){return $(f,ot)!==-1});else for(var B=0,J=f.length;B<J;B++)Ya(l,f[B],g,T);return this}function Au(l,f){for(var g in l[es]){var T=g.split(/\d/)[0];(!f||f(T))&&Ya(l,T,null,null,g)}}var eo={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function ns(l,f,g,T){var C=f+p(g)+(T?"_"+p(T):"");if(l[es]&&l[es][C])return this;var B=function(ot){return g.call(T||l,ot||window.event)},J=B;!Ut.touchNative&&Ut.pointer&&f.indexOf("touch")===0?B=Om(l,f,B):Ut.touch&&f==="dblclick"?B=Sf(l,B):"addEventListener"in l?f==="touchstart"||f==="touchmove"||f==="wheel"||f==="mousewheel"?l.addEventListener(eo[f]||f,B,Ut.passiveEvents?{passive:!1}:!1):f==="mouseenter"||f==="mouseleave"?(B=function(ot){ot=ot||window.event,Ys(l,ot)&&J(ot)},l.addEventListener(eo[f],B,!1)):l.addEventListener(f,J,!1):l.attachEvent("on"+f,B),l[es]=l[es]||{},l[es][C]=B}function Ya(l,f,g,T,C){C=C||f+p(g)+(T?"_"+p(T):"");var B=l[es]&&l[es][C];if(!B)return this;!Ut.touchNative&&Ut.pointer&&f.indexOf("touch")===0?wf(l,f,B):Ut.touch&&f==="dblclick"?Jr(l,B):"removeEventListener"in l?l.removeEventListener(eo[f]||f,B,!1):l.detachEvent("on"+f,B),l[es][C]=null}function is(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function ws(l){return ns(l,"wheel",is),this}function no(l){return Jt(l,"mousedown touchstart dblclick contextmenu",is),l._leaflet_disable_click=!0,this}function dn(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function yr(l){return dn(l),is(l),this}function Xa(l){if(l.composedPath)return l.composedPath();for(var f=[],g=l.target;g;)f.push(g),g=g.parentNode;return f}function Qa(l,f){if(!f)return new K(l.clientX,l.clientY);var g=Fa(f),T=g.boundingClientRect;return new K((l.clientX-T.left)/g.x-f.clientLeft,(l.clientY-T.top)/g.y-f.clientTop)}var Tf=Ut.linux&&Ut.chrome?window.devicePixelRatio:Ut.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function si(l){return Ut.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/Tf:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Ys(l,f){var g=f.relatedTarget;if(!g)return!0;try{for(;g&&g!==l;)g=g.parentNode}catch{return!1}return g!==l}var Kl={__proto__:null,on:Jt,off:Pe,stopPropagation:is,disableScrollPropagation:ws,disableClickPropagation:no,preventDefault:dn,stop:yr,getPropagationPath:Xa,getMousePosition:Qa,getWheelDelta:si,isExternalTarget:Ys,addListener:Jt,removeListener:Pe},qo=U.extend({run:function(l,f,g,T){this.stop(),this._el=l,this._inProgress=!0,this._duration=g||.25,this._easeOutPower=1/Math.max(T||.5,.2),this._startPos=gr(l),this._offset=f.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Q(this._animate,this),this._step()},_step:function(l){var f=+new Date-this._startTime,g=this._duration*1e3;f<g?this._runFrame(this._easeOut(f/g),l):(this._runFrame(1),this._complete())},_runFrame:function(l,f){var g=this._startPos.add(this._offset.multiplyBy(l));f&&g._round(),We(this._el,g),this.fire("step")},_complete:function(){et(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),_e=U.extend({options:{crs:ni,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,f){f=A(this,f),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),f.maxBounds&&this.setMaxBounds(f.maxBounds),f.zoom!==void 0&&(this._zoom=this._limitZoom(f.zoom)),f.center&&f.zoom!==void 0&&this.setView(yt(f.center),f.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=qa&&Ut.any3d&&!Ut.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Jt(this._proxy,vu,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,f,g){if(f=f===void 0?this._zoom:this._limitZoom(f),l=this._limitCenter(yt(l),f,this.options.maxBounds),g=g||{},this._stop(),this._loaded&&!g.reset&&g!==!0){g.animate!==void 0&&(g.zoom=r({animate:g.animate},g.zoom),g.pan=r({animate:g.animate,duration:g.duration},g.pan));var T=this._zoom!==f?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,f,g.zoom):this._tryAnimatedPan(l,g.pan);if(T)return clearTimeout(this._sizeTimer),this}return this._resetView(l,f,g.pan&&g.pan.noMoveStart),this},setZoom:function(l,f){return this._loaded?this.setView(this.getCenter(),l,{zoom:f}):(this._zoom=l,this)},zoomIn:function(l,f){return l=l||(Ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,f)},zoomOut:function(l,f){return l=l||(Ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,f)},setZoomAround:function(l,f,g){var T=this.getZoomScale(f),C=this.getSize().divideBy(2),B=l instanceof K?l:this.latLngToContainerPoint(l),J=B.subtract(C).multiplyBy(1-1/T),ot=this.containerPointToLatLng(C.add(J));return this.setView(ot,f,{zoom:g})},_getBoundsCenterZoom:function(l,f){f=f||{},l=l.getBounds?l.getBounds():mt(l);var g=V(f.paddingTopLeft||f.padding||[0,0]),T=V(f.paddingBottomRight||f.padding||[0,0]),C=this.getBoundsZoom(l,!1,g.add(T));if(C=typeof f.maxZoom=="number"?Math.min(f.maxZoom,C):C,C===1/0)return{center:l.getCenter(),zoom:C};var B=T.subtract(g).divideBy(2),J=this.project(l.getSouthWest(),C),ot=this.project(l.getNorthEast(),C),ft=this.unproject(J.add(ot).divideBy(2).add(B),C);return{center:ft,zoom:C}},fitBounds:function(l,f){if(l=mt(l),!l.isValid())throw new Error("Bounds are not valid.");var g=this._getBoundsCenterZoom(l,f);return this.setView(g.center,g.zoom,f)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,f){return this.setView(l,this._zoom,{pan:f})},panBy:function(l,f){if(l=V(l).round(),f=f||{},!l.x&&!l.y)return this.fire("moveend");if(f.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new qo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),f.noMoveStart||this.fire("movestart"),f.animate!==!1){se(this._mapPane,"leaflet-pan-anim");var g=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,g,f.duration||.25,f.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,f,g){if(g=g||{},g.animate===!1||!Ut.any3d)return this.setView(l,f,g);this._stop();var T=this.project(this.getCenter()),C=this.project(l),B=this.getSize(),J=this._zoom;l=yt(l),f=f===void 0?J:f;var ot=Math.max(B.x,B.y),ft=ot*this.getZoomScale(J,f),St=C.distanceTo(T)||1,Rt=1.42,Xt=Rt*Rt;function le(hn){var Ks=hn?-1:1,oo=hn?ft:ot,Hu=ft*ft-ot*ot+Ks*Xt*Xt*St*St,fl=2*oo*Xt*St,dl=Hu/fl,Cr=Math.sqrt(dl*dl+1)-dl,Js=Cr<1e-9?-18:Math.log(Cr);return Js}function Hn(hn){return(Math.exp(hn)-Math.exp(-hn))/2}function pn(hn){return(Math.exp(hn)+Math.exp(-hn))/2}function wi(hn){return Hn(hn)/pn(hn)}var Me=le(0);function ke(hn){return ot*(pn(Me)/pn(Me+Rt*hn))}function de(hn){return ot*(pn(Me)*wi(Me+Rt*hn)-Hn(Me))/Xt}function Ar(hn){return 1-Math.pow(1-hn,1.5)}var zi=Date.now(),fc=(le(1)-Me)/Rt,Er=g.duration?1e3*g.duration:1e3*fc*.8;function Bu(){var hn=(Date.now()-zi)/Er,Ks=Ar(hn)*fc;hn<=1?(this._flyToFrame=Q(Bu,this),this._move(this.unproject(T.add(C.subtract(T).multiplyBy(de(Ks)/St)),J),this.getScaleZoom(ot/ke(Ks),J),{flyTo:!0})):this._move(l,f)._moveEnd(!0)}return this._moveStart(!0,g.noMoveStart),Bu.call(this),this},flyToBounds:function(l,f){var g=this._getBoundsCenterZoom(l,f);return this.flyTo(g.center,g.zoom,f)},setMaxBounds:function(l){return l=mt(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var f=this.options.minZoom;return this.options.minZoom=l,this._loaded&&f!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var f=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&f!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,f){this._enforcingBounds=!0;var g=this.getCenter(),T=this._limitCenter(g,this._zoom,mt(l));return g.equals(T)||this.panTo(T,f),this._enforcingBounds=!1,this},panInside:function(l,f){f=f||{};var g=V(f.paddingTopLeft||f.padding||[0,0]),T=V(f.paddingBottomRight||f.padding||[0,0]),C=this.project(this.getCenter()),B=this.project(l),J=this.getPixelBounds(),ot=Y([J.min.add(g),J.max.subtract(T)]),ft=ot.getSize();if(!ot.contains(B)){this._enforcingBounds=!0;var St=B.subtract(ot.getCenter()),Rt=ot.extend(B).getSize().subtract(ft);C.x+=St.x<0?-Rt.x:Rt.x,C.y+=St.y<0?-Rt.y:Rt.y,this.panTo(this.unproject(C),f),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=r({animate:!1,pan:!0},l===!0?{animate:!0}:l);var f=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var g=this.getSize(),T=f.divideBy(2).round(),C=g.divideBy(2).round(),B=T.subtract(C);return!B.x&&!B.y?this:(l.animate&&l.pan?this.panBy(B):(l.pan&&this._rawPanBy(B),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:f,newSize:g}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=r({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var f=u(this._handleGeolocationResponse,this),g=u(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(f,g,l):navigator.geolocation.getCurrentPosition(f,g,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var f=l.code,g=l.message||(f===1?"permission denied":f===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:f,message:"Geolocation error: "+g+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var f=l.coords.latitude,g=l.coords.longitude,T=new gt(f,g),C=T.toBounds(l.coords.accuracy*2),B=this._locateOptions;if(B.setView){var J=this.getBoundsZoom(C);this.setView(T,B.maxZoom?Math.min(J,B.maxZoom):J)}var ot={latlng:T,bounds:C,timestamp:l.timestamp};for(var ft in l.coords)typeof l.coords[ft]=="number"&&(ot[ft]=l.coords[ft]);this.fire("locationfound",ot)}},addHandler:function(l,f){if(!f)return this;var g=this[l]=new f(this);return this._handlers.push(g),this.options[l]&&g.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ve(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(et(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)Ve(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,f){var g="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),T=fe("div",g,f||this._mapPane);return l&&(this._panes[l]=T),T},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),f=this.unproject(l.getBottomLeft()),g=this.unproject(l.getTopRight());return new at(f,g)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,f,g){l=mt(l),g=V(g||[0,0]);var T=this.getZoom()||0,C=this.getMinZoom(),B=this.getMaxZoom(),J=l.getNorthWest(),ot=l.getSouthEast(),ft=this.getSize().subtract(g),St=Y(this.project(ot,T),this.project(J,T)).getSize(),Rt=Ut.any3d?this.options.zoomSnap:1,Xt=ft.x/St.x,le=ft.y/St.y,Hn=f?Math.max(Xt,le):Math.min(Xt,le);return T=this.getScaleZoom(Hn,T),Rt&&(T=Math.round(T/(Rt/100))*(Rt/100),T=f?Math.ceil(T/Rt)*Rt:Math.floor(T/Rt)*Rt),Math.max(C,Math.min(B,T))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,f){var g=this._getTopLeftPoint(l,f);return new I(g,g.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,f){var g=this.options.crs;return f=f===void 0?this._zoom:f,g.scale(l)/g.scale(f)},getScaleZoom:function(l,f){var g=this.options.crs;f=f===void 0?this._zoom:f;var T=g.zoom(l*g.scale(f));return isNaN(T)?1/0:T},project:function(l,f){return f=f===void 0?this._zoom:f,this.options.crs.latLngToPoint(yt(l),f)},unproject:function(l,f){return f=f===void 0?this._zoom:f,this.options.crs.pointToLatLng(V(l),f)},layerPointToLatLng:function(l){var f=V(l).add(this.getPixelOrigin());return this.unproject(f)},latLngToLayerPoint:function(l){var f=this.project(yt(l))._round();return f._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(yt(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(mt(l))},distance:function(l,f){return this.options.crs.distance(yt(l),yt(f))},containerPointToLayerPoint:function(l){return V(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return V(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var f=this.containerPointToLayerPoint(V(l));return this.layerPointToLatLng(f)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(yt(l)))},mouseEventToContainerPoint:function(l){return Qa(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var f=this._container=bu(l);if(f){if(f._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Jt(f,"scroll",this._onScroll,this),this._containerId=p(f)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ut.any3d,se(l,"leaflet-container"+(Ut.touch?" leaflet-touch":"")+(Ut.retina?" leaflet-retina":"")+(Ut.ielt9?" leaflet-oldie":"")+(Ut.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var f=Ga(l,"position");f!=="absolute"&&f!=="relative"&&f!=="fixed"&&f!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),We(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(l.markerPane,"leaflet-zoom-hide"),se(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,f,g){We(this._mapPane,new K(0,0));var T=!this._loaded;this._loaded=!0,f=this._limitZoom(f),this.fire("viewprereset");var C=this._zoom!==f;this._moveStart(C,g)._move(l,f)._moveEnd(C),this.fire("viewreset"),T&&this.fire("load")},_moveStart:function(l,f){return l&&this.fire("zoomstart"),f||this.fire("movestart"),this},_move:function(l,f,g,T){f===void 0&&(f=this._zoom);var C=this._zoom!==f;return this._zoom=f,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),T?g&&g.pinch&&this.fire("zoom",g):((C||g&&g.pinch)&&this.fire("zoom",g),this.fire("move",g)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return et(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){We(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[p(this._container)]=this;var f=l?Pe:Jt;f(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&f(window,"resize",this._onResize,this),Ut.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){et(this._resizeRequest),this._resizeRequest=Q(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,f){for(var g=[],T,C=f==="mouseout"||f==="mouseover",B=l.target||l.srcElement,J=!1;B;){if(T=this._targets[p(B)],T&&(f==="click"||f==="preclick")&&this._draggableMoved(T)){J=!0;break}if(T&&T.listens(f,!0)&&(C&&!Ys(B,l)||(g.push(T),C))||B===this._container)break;B=B.parentNode}return!g.length&&!J&&!C&&this.listens(f,!0)&&(g=[this]),g},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var f=l.target||l.srcElement;if(!(!this._loaded||f._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(f))){var g=l.type;g==="mousedown"&&Vo(f),this._fireDOMEvent(l,g)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,f,g){if(l.type==="click"){var T=r({},l);T.type="preclick",this._fireDOMEvent(T,T.type,g)}var C=this._findEventTargets(l,f);if(g){for(var B=[],J=0;J<g.length;J++)g[J].listens(f,!0)&&B.push(g[J]);C=B.concat(C)}if(C.length){f==="contextmenu"&&dn(l);var ot=C[0],ft={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var St=ot.getLatLng&&(!ot._radius||ot._radius<=10);ft.containerPoint=St?this.latLngToContainerPoint(ot.getLatLng()):this.mouseEventToContainerPoint(l),ft.layerPoint=this.containerPointToLayerPoint(ft.containerPoint),ft.latlng=St?ot.getLatLng():this.layerPointToLatLng(ft.layerPoint)}for(J=0;J<C.length;J++)if(C[J].fire(f,ft,!0),ft.originalEvent._stopped||C[J].options.bubblingMouseEvents===!1&&$(this._mouseEvents,f)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,f=this._handlers.length;l<f;l++)this._handlers[l].disable()},whenReady:function(l,f){return this._loaded?l.call(f||this,{target:this}):this.on("load",l,f),this},_getMapPanePos:function(){return gr(this._mapPane)||new K(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,f){var g=l&&f!==void 0?this._getNewPixelOrigin(l,f):this.getPixelOrigin();return g.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,f){var g=this.getSize()._divideBy(2);return this.project(l,f)._subtract(g)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,f,g){var T=this._getNewPixelOrigin(g,f);return this.project(l,f)._subtract(T)},_latLngBoundsToNewLayerBounds:function(l,f,g){var T=this._getNewPixelOrigin(g,f);return Y([this.project(l.getSouthWest(),f)._subtract(T),this.project(l.getNorthWest(),f)._subtract(T),this.project(l.getSouthEast(),f)._subtract(T),this.project(l.getNorthEast(),f)._subtract(T)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,f,g){if(!g)return l;var T=this.project(l,f),C=this.getSize().divideBy(2),B=new I(T.subtract(C),T.add(C)),J=this._getBoundsOffset(B,g,f);return Math.abs(J.x)<=1&&Math.abs(J.y)<=1?l:this.unproject(T.add(J),f)},_limitOffset:function(l,f){if(!f)return l;var g=this.getPixelBounds(),T=new I(g.min.add(l),g.max.add(l));return l.add(this._getBoundsOffset(T,f))},_getBoundsOffset:function(l,f,g){var T=Y(this.project(f.getNorthEast(),g),this.project(f.getSouthWest(),g)),C=T.min.subtract(l.min),B=T.max.subtract(l.max),J=this._rebound(C.x,-B.x),ot=this._rebound(C.y,-B.y);return new K(J,ot)},_rebound:function(l,f){return l+f>0?Math.round(l-f)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(f))},_limitZoom:function(l){var f=this.getMinZoom(),g=this.getMaxZoom(),T=Ut.any3d?this.options.zoomSnap:1;return T&&(l=Math.round(l/T)*T),Math.max(f,Math.min(g,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){an(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,f){var g=this._getCenterOffset(l)._trunc();return(f&&f.animate)!==!0&&!this.getSize().contains(g)?!1:(this.panBy(g,f),!0)},_createAnimProxy:function(){var l=this._proxy=fe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(f){var g=_r,T=this._proxy.style[g];Fs(this._proxy,this.project(f.center,f.zoom),this.getZoomScale(f.zoom,1)),T===this._proxy.style[g]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ve(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),f=this.getZoom();Fs(this._proxy,this.project(l,f),this.getZoomScale(f,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,f,g){if(this._animatingZoom)return!0;if(g=g||{},!this._zoomAnimated||g.animate===!1||this._nothingToAnimate()||Math.abs(f-this._zoom)>this.options.zoomAnimationThreshold)return!1;var T=this.getZoomScale(f),C=this._getCenterOffset(l)._divideBy(1-1/T);return g.animate!==!0&&!this.getSize().contains(C)?!1:(Q(function(){this._moveStart(!0,g.noMoveStart||!1)._animateZoom(l,f,!0)},this),!0)},_animateZoom:function(l,f,g,T){this._mapPane&&(g&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=f,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:f,noUpdate:T}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&an(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Eu(l,f){return new _e(l,f)}var bi=X.extend({options:{position:"topright"},initialize:function(l){A(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var f=this._map;return f&&f.removeControl(this),this.options.position=l,f&&f.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var f=this._container=this.onAdd(l),g=this.getPosition(),T=l._controlCorners[g];return se(f,"leaflet-control"),g.indexOf("bottom")!==-1?T.insertBefore(f,T.firstChild):T.appendChild(f),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ve(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),Xs=function(l){return new bi(l)};_e.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},f="leaflet-",g=this._controlContainer=fe("div",f+"control-container",this._container);function T(C,B){var J=f+C+" "+f+B;l[C+B]=fe("div",J,g)}T("top","left"),T("top","right"),T("bottom","left"),T("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)Ve(this._controlCorners[l]);Ve(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var $a=bi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,f,g,T){return g<T?-1:T<g?1:0}},initialize:function(l,f,g){A(this,g),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var T in l)this._addLayer(l[T],T);for(T in f)this._addLayer(f[T],T,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return bi.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,f){return this._addLayer(l,f),this._map?this._update():this},addOverlay:function(l,f){return this._addLayer(l,f,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var f=this._getLayer(p(l));return f&&this._layers.splice(this._layers.indexOf(f),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):an(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return an(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",f=this._container=fe("div",l),g=this.options.collapsed;f.setAttribute("aria-haspopup",!0),no(f),ws(f);var T=this._section=fe("section",l+"-list");g&&(this._map.on("click",this.collapse,this),Jt(f,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=fe("a",l+"-toggle",f);C.href="#",C.title="Layers",C.setAttribute("role","button"),Jt(C,{keydown:function(B){B.keyCode===13&&this._expandSafely()},click:function(B){dn(B),this._expandSafely()}},this),g||this.expand(),this._baseLayersList=fe("div",l+"-base",T),this._separator=fe("div",l+"-separator",T),this._overlaysList=fe("div",l+"-overlays",T),f.appendChild(T)},_getLayer:function(l){for(var f=0;f<this._layers.length;f++)if(this._layers[f]&&p(this._layers[f].layer)===l)return this._layers[f]},_addLayer:function(l,f,g){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:f,overlay:g}),this.options.sortLayers&&this._layers.sort(u(function(T,C){return this.options.sortFunction(T.layer,C.layer,T.name,C.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Di(this._baseLayersList),Di(this._overlaysList),this._layerControlInputs=[];var l,f,g,T,C=0;for(g=0;g<this._layers.length;g++)T=this._layers[g],this._addItem(T),f=f||T.overlay,l=l||!T.overlay,C+=T.overlay?0:1;return this.options.hideSingleBase&&(l=l&&C>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=f&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var f=this._getLayer(p(l.target)),g=f.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;g&&this._map.fire(g,f)},_createRadioElement:function(l,f){var g='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(f?' checked="checked"':"")+"/>",T=document.createElement("div");return T.innerHTML=g,T.firstChild},_addItem:function(l){var f=document.createElement("label"),g=this._map.hasLayer(l.layer),T;l.overlay?(T=document.createElement("input"),T.type="checkbox",T.className="leaflet-control-layers-selector",T.defaultChecked=g):T=this._createRadioElement("leaflet-base-layers_"+p(this),g),this._layerControlInputs.push(T),T.layerId=p(l.layer),Jt(T,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+l.name;var B=document.createElement("span");f.appendChild(B),B.appendChild(T),B.appendChild(C);var J=l.overlay?this._overlaysList:this._baseLayersList;return J.appendChild(f),this._checkDisabledLayers(),f},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,f,g,T=[],C=[];this._handlingClick=!0;for(var B=l.length-1;B>=0;B--)f=l[B],g=this._getLayer(f.layerId).layer,f.checked?T.push(g):f.checked||C.push(g);for(B=0;B<C.length;B++)this._map.hasLayer(C[B])&&this._map.removeLayer(C[B]);for(B=0;B<T.length;B++)this._map.hasLayer(T[B])||this._map.addLayer(T[B]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,f,g,T=this._map.getZoom(),C=l.length-1;C>=0;C--)f=l[C],g=this._getLayer(f.layerId).layer,f.disabled=g.options.minZoom!==void 0&&T<g.options.minZoom||g.options.maxZoom!==void 0&&T>g.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,Jt(l,"click",dn),this.expand();var f=this;setTimeout(function(){Pe(l,"click",dn),f._preventClick=!1})}}),Af=function(l,f,g){return new $a(l,f,g)},Cu=bi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var f="leaflet-control-zoom",g=fe("div",f+" leaflet-bar"),T=this.options;return this._zoomInButton=this._createButton(T.zoomInText,T.zoomInTitle,f+"-in",g,this._zoomIn),this._zoomOutButton=this._createButton(T.zoomOutText,T.zoomOutTitle,f+"-out",g,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),g},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,f,g,T,C){var B=fe("a",g,T);return B.innerHTML=l,B.href="#",B.title=f,B.setAttribute("role","button"),B.setAttribute("aria-label",f),no(B),Jt(B,"click",yr),Jt(B,"click",C,this),Jt(B,"click",this._refocusOnMap,this),B},_updateDisabled:function(){var l=this._map,f="leaflet-disabled";an(this._zoomInButton,f),an(this._zoomOutButton,f),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(se(this._zoomOutButton,f),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(se(this._zoomInButton,f),this._zoomInButton.setAttribute("aria-disabled","true"))}});_e.mergeOptions({zoomControl:!0}),_e.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Cu,this.addControl(this.zoomControl))});var Dm=function(l){return new Cu(l)},Ef=bi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var f="leaflet-control-scale",g=fe("div",f),T=this.options;return this._addScales(T,f+"-line",g),l.on(T.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),g},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,f,g){l.metric&&(this._mScale=fe("div",f,g)),l.imperial&&(this._iScale=fe("div",f,g))},_update:function(){var l=this._map,f=l.getSize().y/2,g=l.distance(l.containerPointToLatLng([0,f]),l.containerPointToLatLng([this.options.maxWidth,f]));this._updateScales(g)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var f=this._getRoundNum(l),g=f<1e3?f+" m":f/1e3+" km";this._updateScale(this._mScale,g,f/l)},_updateImperial:function(l){var f=l*3.2808399,g,T,C;f>5280?(g=f/5280,T=this._getRoundNum(g),this._updateScale(this._iScale,T+" mi",T/g)):(C=this._getRoundNum(f),this._updateScale(this._iScale,C+" ft",C/f))},_updateScale:function(l,f,g){l.style.width=Math.round(this.options.maxWidth*g)+"px",l.innerHTML=f},_getRoundNum:function(l){var f=Math.pow(10,(Math.floor(l)+"").length-1),g=l/f;return g=g>=10?10:g>=5?5:g>=3?3:g>=2?2:1,f*g}}),Lu=function(l){return new Ef(l)},Rm='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Mu=bi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ut.inlineSvg?Rm+" ":"")+"Leaflet</a>"},initialize:function(l){A(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=fe("div","leaflet-control-attribution"),no(this._container);for(var f in l._layers)l._layers[f].getAttribution&&this.addAttribution(l._layers[f].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var f in this._attributions)this._attributions[f]&&l.push(f);var g=[];this.options.prefix&&g.push(this.options.prefix),l.length&&g.push(l.join(", ")),this._container.innerHTML=g.join(' <span aria-hidden="true">|</span> ')}}});_e.mergeOptions({attributionControl:!0}),_e.addInitHook(function(){this.options.attributionControl&&new Mu().addTo(this)});var Im=function(l){return new Mu(l)};bi.Layers=$a,bi.Zoom=Cu,bi.Scale=Ef,bi.Attribution=Mu,Xs.layers=Af,Xs.zoom=Dm,Xs.scale=Lu,Xs.attribution=Im;var xs=X.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xs.addTo=function(l,f){return l.addHandler(f,this),this};var Nm={Events:P},ku=Ut.touch?"touchstart mousedown":"mousedown",vr=U.extend({options:{clickTolerance:3},initialize:function(l,f,g,T){A(this,T),this._element=l,this._dragStartTarget=f||l,this._preventOutline=g},enable:function(){this._enabled||(Jt(this._dragStartTarget,ku,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(vr._dragging===this&&this.finishDrag(!0),Pe(this._dragStartTarget,ku,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!wu(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){vr._dragging===this&&this.finishDrag();return}if(!(vr._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(vr._dragging=this,this._preventOutline&&Vo(this._element),Xl(),Bo(),!this._moving)){this.fire("down");var f=l.touches?l.touches[0]:l,g=$l(this._element);this._startPoint=new K(f.clientX,f.clientY),this._startPos=gr(this._element),this._parentScale=Fa(g);var T=l.type==="mousedown";Jt(document,T?"mousemove":"touchmove",this._onMove,this),Jt(document,T?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var f=l.touches&&l.touches.length===1?l.touches[0]:l,g=new K(f.clientX,f.clientY)._subtract(this._startPoint);!g.x&&!g.y||Math.abs(g.x)+Math.abs(g.y)<this.options.clickTolerance||(g.x/=this._parentScale.x,g.y/=this._parentScale.y,dn(l),this._moved||(this.fire("dragstart"),this._moved=!0,se(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(g),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),We(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){an(document.body,"leaflet-dragging"),this._lastTarget&&(an(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Pe(document,"mousemove touchmove",this._onMove,this),Pe(document,"mouseup touchend touchcancel",this._onUp,this),Wa(),bs();var f=this._moved&&this._moving;this._moving=!1,vr._dragging=!1,f&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function Cf(l,f,g){var T,C=[1,4,2,8],B,J,ot,ft,St,Rt,Xt,le;for(B=0,Rt=l.length;B<Rt;B++)l[B]._code=io(l[B],f);for(ot=0;ot<4;ot++){for(Xt=C[ot],T=[],B=0,Rt=l.length,J=Rt-1;B<Rt;J=B++)ft=l[B],St=l[J],ft._code&Xt?St._code&Xt||(le=Jl(St,ft,Xt,f,g),le._code=io(le,f),T.push(le)):(St._code&Xt&&(le=Jl(St,ft,Xt,f,g),le._code=io(le,f),T.push(le)),T.push(ft));l=T}return l}function Lf(l,f){var g,T,C,B,J,ot,ft,St,Rt;if(!l||l.length===0)throw new Error("latlngs not passed");Ii(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Xt=yt([0,0]),le=mt(l),Hn=le.getNorthWest().distanceTo(le.getSouthWest())*le.getNorthEast().distanceTo(le.getNorthWest());Hn<1700&&(Xt=Ou(l));var pn=l.length,wi=[];for(g=0;g<pn;g++){var Me=yt(l[g]);wi.push(f.project(yt([Me.lat-Xt.lat,Me.lng-Xt.lng])))}for(ot=ft=St=0,g=0,T=pn-1;g<pn;T=g++)C=wi[g],B=wi[T],J=C.y*B.x-B.y*C.x,ft+=(C.x+B.x)*J,St+=(C.y+B.y)*J,ot+=J*3;ot===0?Rt=wi[0]:Rt=[ft/ot,St/ot];var ke=f.unproject(V(Rt));return yt([ke.lat+Xt.lat,ke.lng+Xt.lng])}function Ou(l){for(var f=0,g=0,T=0,C=0;C<l.length;C++){var B=yt(l[C]);f+=B.lat,g+=B.lng,T++}return yt([f/T,g/T])}var Du={__proto__:null,clipPolygon:Cf,polygonCenter:Lf,centroid:Ou};function Mf(l,f){if(!f||!l.length)return l.slice();var g=f*f;return l=zm(l,g),l=Of(l,g),l}function kf(l,f,g){return Math.sqrt(Ka(l,f,g,!0))}function Pm(l,f,g){return Ka(l,f,g)}function Of(l,f){var g=l.length,T=typeof Uint8Array<"u"?Uint8Array:Array,C=new T(g);C[0]=C[g-1]=1,Ru(l,C,f,0,g-1);var B,J=[];for(B=0;B<g;B++)C[B]&&J.push(l[B]);return J}function Ru(l,f,g,T,C){var B=0,J,ot,ft;for(ot=T+1;ot<=C-1;ot++)ft=Ka(l[ot],l[T],l[C],!0),ft>B&&(J=ot,B=ft);B>g&&(f[J]=1,Ru(l,f,g,T,J),Ru(l,f,g,J,C))}function zm(l,f){for(var g=[l[0]],T=1,C=0,B=l.length;T<B;T++)Um(l[T],l[C])>f&&(g.push(l[T]),C=T);return C<B-1&&g.push(l[B-1]),g}var Df;function Rf(l,f,g,T,C){var B=T?Df:io(l,g),J=io(f,g),ot,ft,St;for(Df=J;;){if(!(B|J))return[l,f];if(B&J)return!1;ot=B||J,ft=Jl(l,f,ot,g,C),St=io(ft,g),ot===B?(l=ft,B=St):(f=ft,J=St)}}function Jl(l,f,g,T,C){var B=f.x-l.x,J=f.y-l.y,ot=T.min,ft=T.max,St,Rt;return g&8?(St=l.x+B*(ft.y-l.y)/J,Rt=ft.y):g&4?(St=l.x+B*(ot.y-l.y)/J,Rt=ot.y):g&2?(St=ft.x,Rt=l.y+J*(ft.x-l.x)/B):g&1&&(St=ot.x,Rt=l.y+J*(ot.x-l.x)/B),new K(St,Rt,C)}function io(l,f){var g=0;return l.x<f.min.x?g|=1:l.x>f.max.x&&(g|=2),l.y<f.min.y?g|=4:l.y>f.max.y&&(g|=8),g}function Um(l,f){var g=f.x-l.x,T=f.y-l.y;return g*g+T*T}function Ka(l,f,g,T){var C=f.x,B=f.y,J=g.x-C,ot=g.y-B,ft=J*J+ot*ot,St;return ft>0&&(St=((l.x-C)*J+(l.y-B)*ot)/ft,St>1?(C=g.x,B=g.y):St>0&&(C+=J*St,B+=ot*St)),J=l.x-C,ot=l.y-B,T?J*J+ot*ot:new K(C,B)}function Ii(l){return!O(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function tc(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ii(l)}function Go(l,f){var g,T,C,B,J,ot,ft,St;if(!l||l.length===0)throw new Error("latlngs not passed");Ii(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Rt=yt([0,0]),Xt=mt(l),le=Xt.getNorthWest().distanceTo(Xt.getSouthWest())*Xt.getNorthEast().distanceTo(Xt.getNorthWest());le<1700&&(Rt=Ou(l));var Hn=l.length,pn=[];for(g=0;g<Hn;g++){var wi=yt(l[g]);pn.push(f.project(yt([wi.lat-Rt.lat,wi.lng-Rt.lng])))}for(g=0,T=0;g<Hn-1;g++)T+=pn[g].distanceTo(pn[g+1])/2;if(T===0)St=pn[0];else for(g=0,B=0;g<Hn-1;g++)if(J=pn[g],ot=pn[g+1],C=J.distanceTo(ot),B+=C,B>T){ft=(B-T)/C,St=[ot.x-ft*(ot.x-J.x),ot.y-ft*(ot.y-J.y)];break}var Me=f.unproject(V(St));return yt([Me.lat+Rt.lat,Me.lng+Rt.lng])}var Bm={__proto__:null,simplify:Mf,pointToSegmentDistance:kf,closestPointOnSegment:Pm,clipSegment:Rf,_getEdgeIntersection:Jl,_getBitCode:io,_sqClosestPointOnSegment:Ka,isFlat:Ii,_flat:tc,polylineCenter:Go},ec={project:function(l){return new K(l.lng,l.lat)},unproject:function(l){return new gt(l.y,l.x)},bounds:new I([-180,-90],[180,90])},nc={R:6378137,R_MINOR:6356752314245179e-9,bounds:new I([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var f=Math.PI/180,g=this.R,T=l.lat*f,C=this.R_MINOR/g,B=Math.sqrt(1-C*C),J=B*Math.sin(T),ot=Math.tan(Math.PI/4-T/2)/Math.pow((1-J)/(1+J),B/2);return T=-g*Math.log(Math.max(ot,1e-10)),new K(l.lng*f*g,T)},unproject:function(l){for(var f=180/Math.PI,g=this.R,T=this.R_MINOR/g,C=Math.sqrt(1-T*T),B=Math.exp(-l.y/g),J=Math.PI/2-2*Math.atan(B),ot=0,ft=.1,St;ot<15&&Math.abs(ft)>1e-7;ot++)St=C*Math.sin(J),St=Math.pow((1-St)/(1+St),C/2),ft=Math.PI/2-2*Math.atan(B*St)-J,J+=ft;return new gt(J*f,l.x*f/g)}},If={__proto__:null,LonLat:ec,Mercator:nc,SphericalMercator:Ne},Nf=r({},Mt,{code:"EPSG:3395",projection:nc,transformation:(function(){var l=.5/(Math.PI*nc.R);return sn(l,.5,-l,.5)})()}),Iu=r({},Mt,{code:"EPSG:4326",projection:ec,transformation:sn(1/180,1,-1/180,.5)}),Zo=r({},kt,{projection:ec,transformation:sn(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,f){var g=f.lng-l.lng,T=f.lat-l.lat;return Math.sqrt(g*g+T*T)},infinite:!0});kt.Earth=Mt,kt.EPSG3395=Nf,kt.EPSG3857=ni,kt.EPSG900913=_i,kt.EPSG4326=Iu,kt.Simple=Zo;var ss=U.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[p(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[p(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var f=l.target;if(f.hasLayer(this)){if(this._map=f,this._zoomAnimated=f._zoomAnimated,this.getEvents){var g=this.getEvents();f.on(g,this),this.once("remove",function(){f.off(g,this)},this)}this.onAdd(f),this.fire("add"),f.fire("layeradd",{layer:this})}}});_e.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var f=p(l);return this._layers[f]?this:(this._layers[f]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var f=p(l);return this._layers[f]?(this._loaded&&l.onRemove(this),delete this._layers[f],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return p(l)in this._layers},eachLayer:function(l,f){for(var g in this._layers)l.call(f,this._layers[g]);return this},_addLayers:function(l){l=l?O(l)?l:[l]:[];for(var f=0,g=l.length;f<g;f++)this.addLayer(l[f])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[p(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var f=p(l);this._zoomBoundLayers[f]&&(delete this._zoomBoundLayers[f],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,f=-1/0,g=this._getZoomSpan();for(var T in this._zoomBoundLayers){var C=this._zoomBoundLayers[T].options;l=C.minZoom===void 0?l:Math.min(l,C.minZoom),f=C.maxZoom===void 0?f:Math.max(f,C.maxZoom)}this._layersMaxZoom=f===-1/0?void 0:f,this._layersMinZoom=l===1/0?void 0:l,g!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Wo=ss.extend({initialize:function(l,f){A(this,f),this._layers={};var g,T;if(l)for(g=0,T=l.length;g<T;g++)this.addLayer(l[g])},addLayer:function(l){var f=this.getLayerId(l);return this._layers[f]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var f=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[f]&&this._map.removeLayer(this._layers[f]),delete this._layers[f],this},hasLayer:function(l){var f=typeof l=="number"?l:this.getLayerId(l);return f in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var f=Array.prototype.slice.call(arguments,1),g,T;for(g in this._layers)T=this._layers[g],T[l]&&T[l].apply(T,f);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,f){for(var g in this._layers)l.call(f,this._layers[g]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return p(l)}}),Hm=function(l,f){return new Wo(l,f)},Ss=Wo.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),Wo.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),Wo.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new at;for(var f in this._layers){var g=this._layers[f];l.extend(g.getBounds?g.getBounds():g.getLatLng())}return l}}),Pf=function(l,f){return new Ss(l,f)},Ts=X.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){A(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,f){var g=this._getIconUrl(l);if(!g){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var T=this._createImg(g,f&&f.tagName==="IMG"?f:null);return this._setIconStyles(T,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),T},_setIconStyles:function(l,f){var g=this.options,T=g[f+"Size"];typeof T=="number"&&(T=[T,T]);var C=V(T),B=V(f==="shadow"&&g.shadowAnchor||g.iconAnchor||C&&C.divideBy(2,!0));l.className="leaflet-marker-"+f+" "+(g.className||""),B&&(l.style.marginLeft=-B.x+"px",l.style.marginTop=-B.y+"px"),C&&(l.style.width=C.x+"px",l.style.height=C.y+"px")},_createImg:function(l,f){return f=f||document.createElement("img"),f.src=l,f},_getIconUrl:function(l){return Ut.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function Ja(l){return new Ts(l)}var tl=Ts.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof tl.imagePath!="string"&&(tl.imagePath=this._detectIconPath()),(this.options.imagePath||tl.imagePath)+Ts.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var f=function(g,T,C){var B=T.exec(g);return B&&B[C]};return l=f(l,/^url\((['"])?(.+)\1\)$/,2),l&&f(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=fe("div","leaflet-default-icon-path",document.body),f=Ga(l,"background-image")||Ga(l,"backgroundImage");if(document.body.removeChild(l),f=this._stripUrl(f),f)return f;var g=document.querySelector('link[href$="leaflet.css"]');return g?g.href.substring(0,g.href.length-11-1):""}}),el=xs.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new vr(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&an(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var f=this._marker,g=f._map,T=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,B=gr(f._icon),J=g.getPixelBounds(),ot=g.getPixelOrigin(),ft=Y(J.min._subtract(ot).add(C),J.max._subtract(ot).subtract(C));if(!ft.contains(B)){var St=V((Math.max(ft.max.x,B.x)-ft.max.x)/(J.max.x-ft.max.x)-(Math.min(ft.min.x,B.x)-ft.min.x)/(J.min.x-ft.min.x),(Math.max(ft.max.y,B.y)-ft.max.y)/(J.max.y-ft.max.y)-(Math.min(ft.min.y,B.y)-ft.min.y)/(J.min.y-ft.min.y)).multiplyBy(T);g.panBy(St,{animate:!1}),this._draggable._newPos._add(St),this._draggable._startPos._add(St),We(f._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=Q(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(et(this._panRequest),this._panRequest=Q(this._adjustPan.bind(this,l)))},_onDrag:function(l){var f=this._marker,g=f._shadow,T=gr(f._icon),C=f._map.layerPointToLatLng(T);g&&We(g,T),f._latlng=C,l.latlng=C,l.oldLatLng=this._oldLatLng,f.fire("move",l).fire("drag",l)},_onDragEnd:function(l){et(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),nl=ss.extend({options:{icon:new tl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,f){A(this,f),this._latlng=yt(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var f=this._latlng;return this._latlng=yt(l),this.update(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,f="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),g=l.icon.createIcon(this._icon),T=!1;g!==this._icon&&(this._icon&&this._removeIcon(),T=!0,l.title&&(g.title=l.title),g.tagName==="IMG"&&(g.alt=l.alt||"")),se(g,f),l.keyboard&&(g.tabIndex="0",g.setAttribute("role","button")),this._icon=g,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Jt(g,"focus",this._panOnFocus,this);var C=l.icon.createShadow(this._shadow),B=!1;C!==this._shadow&&(this._removeShadow(),B=!0),C&&(se(C,f),C.alt=""),this._shadow=C,l.opacity<1&&this._updateOpacity(),T&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&B&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Pe(this._icon,"focus",this._panOnFocus,this),Ve(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ve(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&We(this._icon,l),this._shadow&&We(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(f)},_initInteraction:function(){if(this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),el)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new el(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&Ke(this._icon,l),this._shadow&&Ke(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var f=this.options.icon.options,g=f.iconSize?V(f.iconSize):V(0,0),T=f.iconAnchor?V(f.iconAnchor):V(0,0);l.panInside(this._latlng,{paddingTopLeft:T,paddingBottomRight:g.subtract(T)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function zf(l,f){return new nl(l,f)}var As=ss.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return A(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Fo=As.extend({options:{fill:!0,radius:10},initialize:function(l,f){A(this,f),this._latlng=yt(l),this._radius=this.options.radius},setLatLng:function(l){var f=this._latlng;return this._latlng=yt(l),this.redraw(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var f=l&&l.radius||this._radius;return As.prototype.setStyle.call(this,l),this.setRadius(f),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,f=this._radiusY||l,g=this._clickTolerance(),T=[l+g,f+g];this._pxBounds=new I(this._point.subtract(T),this._point.add(T))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Uf(l,f){return new Fo(l,f)}var ic=Fo.extend({initialize:function(l,f,g){if(typeof f=="number"&&(f=r({},g,{radius:f})),A(this,f),this._latlng=yt(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new at(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:As.prototype.setStyle,_project:function(){var l=this._latlng.lng,f=this._latlng.lat,g=this._map,T=g.options.crs;if(T.distance===Mt.distance){var C=Math.PI/180,B=this._mRadius/Mt.R/C,J=g.project([f+B,l]),ot=g.project([f-B,l]),ft=J.add(ot).divideBy(2),St=g.unproject(ft).lat,Rt=Math.acos((Math.cos(B*C)-Math.sin(f*C)*Math.sin(St*C))/(Math.cos(f*C)*Math.cos(St*C)))/C;(isNaN(Rt)||Rt===0)&&(Rt=B/Math.cos(Math.PI/180*f)),this._point=ft.subtract(g.getPixelOrigin()),this._radius=isNaN(Rt)?0:ft.x-g.project([St,l-Rt]).x,this._radiusY=ft.y-J.y}else{var Xt=T.unproject(T.project(this._latlng).subtract([this._mRadius,0]));this._point=g.latLngToLayerPoint(this._latlng),this._radius=this._point.x-g.latLngToLayerPoint(Xt).x}this._updateBounds()}});function Bf(l,f,g){return new ic(l,f,g)}var Qs=As.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,f){A(this,f),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var f=1/0,g=null,T=Ka,C,B,J=0,ot=this._parts.length;J<ot;J++)for(var ft=this._parts[J],St=1,Rt=ft.length;St<Rt;St++){C=ft[St-1],B=ft[St];var Xt=T(l,C,B,!0);Xt<f&&(f=Xt,g=T(l,C,B))}return g&&(g.distance=Math.sqrt(f)),g},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Go(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,f){return f=f||this._defaultShape(),l=yt(l),f.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new at,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return Ii(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var f=[],g=Ii(l),T=0,C=l.length;T<C;T++)g?(f[T]=yt(l[T]),this._bounds.extend(f[T])):f[T]=this._convertLatLngs(l[T]);return f},_project:function(){var l=new I;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),f=new K(l,l);this._rawPxBounds&&(this._pxBounds=new I([this._rawPxBounds.min.subtract(f),this._rawPxBounds.max.add(f)]))},_projectLatlngs:function(l,f,g){var T=l[0]instanceof gt,C=l.length,B,J;if(T){for(J=[],B=0;B<C;B++)J[B]=this._map.latLngToLayerPoint(l[B]),g.extend(J[B]);f.push(J)}else for(B=0;B<C;B++)this._projectLatlngs(l[B],f,g)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var f=this._parts,g,T,C,B,J,ot,ft;for(g=0,C=0,B=this._rings.length;g<B;g++)for(ft=this._rings[g],T=0,J=ft.length;T<J-1;T++)ot=Rf(ft[T],ft[T+1],l,T,!0),ot&&(f[C]=f[C]||[],f[C].push(ot[0]),(ot[1]!==ft[T+1]||T===J-2)&&(f[C].push(ot[1]),C++))}},_simplifyPoints:function(){for(var l=this._parts,f=this.options.smoothFactor,g=0,T=l.length;g<T;g++)l[g]=Mf(l[g],f)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,f){var g,T,C,B,J,ot,ft=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(g=0,B=this._parts.length;g<B;g++)for(ot=this._parts[g],T=0,J=ot.length,C=J-1;T<J;C=T++)if(!(!f&&T===0)&&kf(l,ot[C],ot[T])<=ft)return!0;return!1}});function Vm(l,f){return new Qs(l,f)}Qs._flat=tc;var Yo=Qs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Lf(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var f=Qs.prototype._convertLatLngs.call(this,l),g=f.length;return g>=2&&f[0]instanceof gt&&f[0].equals(f[g-1])&&f.pop(),f},_setLatLngs:function(l){Qs.prototype._setLatLngs.call(this,l),Ii(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ii(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,f=this.options.weight,g=new K(f,f);if(l=new I(l.min.subtract(g),l.max.add(g)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var T=0,C=this._rings.length,B;T<C;T++)B=Cf(this._rings[T],l,!0),B.length&&this._parts.push(B)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var f=!1,g,T,C,B,J,ot,ft,St;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(B=0,ft=this._parts.length;B<ft;B++)for(g=this._parts[B],J=0,St=g.length,ot=St-1;J<St;ot=J++)T=g[J],C=g[ot],T.y>l.y!=C.y>l.y&&l.x<(C.x-T.x)*(l.y-T.y)/(C.y-T.y)+T.x&&(f=!f);return f||Qs.prototype._containsPoint.call(this,l,!0)}});function jm(l,f){return new Yo(l,f)}var $s=Ss.extend({initialize:function(l,f){A(this,f),this._layers={},l&&this.addData(l)},addData:function(l){var f=O(l)?l:l.features,g,T,C;if(f){for(g=0,T=f.length;g<T;g++)C=f[g],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var B=this.options;if(B.filter&&!B.filter(l))return this;var J=Yn(l,B);return J?(J.feature=oc(l),J.defaultOptions=J.options,this.resetStyle(J),B.onEachFeature&&B.onEachFeature(l,J),this.addLayer(J)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=r({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(f){this._setLayerStyle(f,l)},this)},_setLayerStyle:function(l,f){l.setStyle&&(typeof f=="function"&&(f=f(l.feature)),l.setStyle(f))}});function Yn(l,f){var g=l.type==="Feature"?l.geometry:l,T=g?g.coordinates:null,C=[],B=f&&f.pointToLayer,J=f&&f.coordsToLatLng||sc,ot,ft,St,Rt;if(!T&&!g)return null;switch(g.type){case"Point":return ot=J(T),Xo(B,l,ot,f);case"MultiPoint":for(St=0,Rt=T.length;St<Rt;St++)ot=J(T[St]),C.push(Xo(B,l,ot,f));return new Ss(C);case"LineString":case"MultiLineString":return ft=il(T,g.type==="LineString"?0:1,J),new Qs(ft,f);case"Polygon":case"MultiPolygon":return ft=il(T,g.type==="Polygon"?1:2,J),new Yo(ft,f);case"GeometryCollection":for(St=0,Rt=g.geometries.length;St<Rt;St++){var Xt=Yn({geometry:g.geometries[St],type:"Feature",properties:l.properties},f);Xt&&C.push(Xt)}return new Ss(C);case"FeatureCollection":for(St=0,Rt=g.features.length;St<Rt;St++){var le=Yn(g.features[St],f);le&&C.push(le)}return new Ss(C);default:throw new Error("Invalid GeoJSON object.")}}function Xo(l,f,g,T){return l?l(f,g):new nl(g,T&&T.markersInheritOptions&&T)}function sc(l){return new gt(l[1],l[0],l[2])}function il(l,f,g){for(var T=[],C=0,B=l.length,J;C<B;C++)J=f?il(l[C],f-1,g):(g||sc)(l[C]),T.push(J);return T}function rc(l,f){return l=yt(l),l.alt!==void 0?[b(l.lng,f),b(l.lat,f),b(l.alt,f)]:[b(l.lng,f),b(l.lat,f)]}function sl(l,f,g,T){for(var C=[],B=0,J=l.length;B<J;B++)C.push(f?sl(l[B],Ii(l[B])?0:f-1,g,T):rc(l[B],T));return!f&&g&&C.length>0&&C.push(C[0].slice()),C}function br(l,f){return l.feature?r({},l.feature,{geometry:f}):oc(f)}function oc(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var wr={toGeoJSON:function(l){return br(this,{type:"Point",coordinates:rc(this.getLatLng(),l)})}};nl.include(wr),ic.include(wr),Fo.include(wr),Qs.include({toGeoJSON:function(l){var f=!Ii(this._latlngs),g=sl(this._latlngs,f?1:0,!1,l);return br(this,{type:(f?"Multi":"")+"LineString",coordinates:g})}}),Yo.include({toGeoJSON:function(l){var f=!Ii(this._latlngs),g=f&&!Ii(this._latlngs[0]),T=sl(this._latlngs,g?2:f?1:0,!0,l);return f||(T=[T]),br(this,{type:(g?"Multi":"")+"Polygon",coordinates:T})}}),Wo.include({toMultiPoint:function(l){var f=[];return this.eachLayer(function(g){f.push(g.toGeoJSON(l).geometry.coordinates)}),br(this,{type:"MultiPoint",coordinates:f})},toGeoJSON:function(l){var f=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(f==="MultiPoint")return this.toMultiPoint(l);var g=f==="GeometryCollection",T=[];return this.eachLayer(function(C){if(C.toGeoJSON){var B=C.toGeoJSON(l);if(g)T.push(B.geometry);else{var J=oc(B);J.type==="FeatureCollection"?T.push.apply(T,J.features):T.push(J)}}}),g?br(this,{geometries:T,type:"GeometryCollection"}):{type:"FeatureCollection",features:T}}});function ac(l,f){return new $s(l,f)}var rl=ac,Qo=ss.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,f,g){this._url=l,this._bounds=mt(f),A(this,g)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ve(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&Bn(this._image),this},bringToBack:function(){return this._map&&to(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=mt(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",f=this._image=l?this._url:fe("img");if(se(f,"leaflet-image-layer"),this._zoomAnimated&&se(f,"leaflet-zoom-animated"),this.options.className&&se(f,this.options.className),f.onselectstart=_,f.onmousemove=_,f.onload=u(this.fire,this,"load"),f.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=f.src;return}f.src=this._url,f.alt=this.options.alt},_animateZoom:function(l){var f=this._map.getZoomScale(l.zoom),g=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;Fs(this._image,g,f)},_reset:function(){var l=this._image,f=new I(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),g=f.getSize();We(l,f.min),l.style.width=g.x+"px",l.style.height=g.y+"px"},_updateOpacity:function(){Ke(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),Hf=function(l,f,g){return new Qo(l,f,g)},xr=Qo.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",f=this._image=l?this._url:fe("video");if(se(f,"leaflet-image-layer"),this._zoomAnimated&&se(f,"leaflet-zoom-animated"),this.options.className&&se(f,this.options.className),f.onselectstart=_,f.onmousemove=_,f.onloadeddata=u(this.fire,this,"load"),l){for(var g=f.getElementsByTagName("source"),T=[],C=0;C<g.length;C++)T.push(g[C].src);this._url=g.length>0?T:[f.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(f.style,"objectFit")&&(f.style.objectFit="fill"),f.autoplay=!!this.options.autoplay,f.loop=!!this.options.loop,f.muted=!!this.options.muted,f.playsInline=!!this.options.playsInline;for(var B=0;B<this._url.length;B++){var J=fe("source");J.src=this._url[B],f.appendChild(J)}}});function $o(l,f,g){return new xr(l,f,g)}var lc=Qo.extend({_initImage:function(){var l=this._image=this._url;se(l,"leaflet-image-layer"),this._zoomAnimated&&se(l,"leaflet-zoom-animated"),this.options.className&&se(l,this.options.className),l.onselectstart=_,l.onmousemove=_}});function Vf(l,f,g){return new lc(l,f,g)}var Xn=ss.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,f){l&&(l instanceof gt||O(l))?(this._latlng=yt(l),A(this,f)):(A(this,l),this._source=f),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&Ke(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&Ke(this._container,1),this.bringToFront(),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(Ke(this._container,0),this._removeTimeout=setTimeout(u(Ve,void 0,this._container),200)):Ve(this._container),this.options.interactive&&(an(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=yt(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Bn(this._container),this},bringToBack:function(){return this._map&&to(this._container),this},_prepareOpen:function(l){var f=this._source;if(!f._map)return!1;if(f instanceof Ss){f=null;var g=this._source._layers;for(var T in g)if(g[T]._map){f=g[T];break}if(!f)return!1;this._source=f}if(!l)if(f.getCenter)l=f.getCenter();else if(f.getLatLng)l=f.getLatLng();else if(f.getBounds)l=f.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,f=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof f=="string")l.innerHTML=f;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(f)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),f=V(this.options.offset),g=this._getAnchor();this._zoomAnimated?We(this._container,l.add(g)):f=f.add(l).add(g);var T=this._containerBottom=-f.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+f.x;this._container.style.bottom=T+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});_e.include({_initOverlay:function(l,f,g,T){var C=f;return C instanceof l||(C=new l(T).setContent(f)),g&&C.setLatLng(g),C}}),ss.include({_initOverlay:function(l,f,g,T){var C=g;return C instanceof l?(A(C,T),C._source=this):(C=f&&!T?f:new l(T,this),C.setContent(g)),C}});var ol=Xn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,Xn.prototype.openOn.call(this,l)},onAdd:function(l){Xn.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof As||this._source.on("preclick",is))},onRemove:function(l){Xn.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof As||this._source.off("preclick",is))},getEvents:function(){var l=Xn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",f=this._container=fe("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),g=this._wrapper=fe("div",l+"-content-wrapper",f);if(this._contentNode=fe("div",l+"-content",g),no(f),ws(this._contentNode),Jt(f,"contextmenu",is),this._tipContainer=fe("div",l+"-tip-container",f),this._tip=fe("div",l+"-tip",this._tipContainer),this.options.closeButton){var T=this._closeButton=fe("a",l+"-close-button",f);T.setAttribute("role","button"),T.setAttribute("aria-label","Close popup"),T.href="#close",T.innerHTML='<span aria-hidden="true">&#215;</span>',Jt(T,"click",function(C){dn(C),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,f=l.style;f.width="",f.whiteSpace="nowrap";var g=l.offsetWidth;g=Math.min(g,this.options.maxWidth),g=Math.max(g,this.options.minWidth),f.width=g+1+"px",f.whiteSpace="",f.height="";var T=l.offsetHeight,C=this.options.maxHeight,B="leaflet-popup-scrolled";C&&T>C?(f.height=C+"px",se(l,B)):an(l,B),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),g=this._getAnchor();We(this._container,f.add(g))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,f=parseInt(Ga(this._container,"marginBottom"),10)||0,g=this._container.offsetHeight+f,T=this._containerWidth,C=new K(this._containerLeft,-g-this._containerBottom);C._add(gr(this._container));var B=l.layerPointToContainerPoint(C),J=V(this.options.autoPanPadding),ot=V(this.options.autoPanPaddingTopLeft||J),ft=V(this.options.autoPanPaddingBottomRight||J),St=l.getSize(),Rt=0,Xt=0;B.x+T+ft.x>St.x&&(Rt=B.x+T-St.x+ft.x),B.x-Rt-ot.x<0&&(Rt=B.x-ot.x),B.y+g+ft.y>St.y&&(Xt=B.y+g-St.y+ft.y),B.y-Xt-ot.y<0&&(Xt=B.y-ot.y),(Rt||Xt)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([Rt,Xt]))}},_getAnchor:function(){return V(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),jf=function(l,f){return new ol(l,f)};_e.mergeOptions({closePopupOnClick:!0}),_e.include({openPopup:function(l,f,g){return this._initOverlay(ol,l,f,g).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),ss.include({bindPopup:function(l,f){return this._popup=this._initOverlay(ol,this._popup,l,f),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof Ss||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){yr(l);var f=l.layer||l.target;if(this._popup._source===f&&!(f instanceof As)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=f,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var al=Xn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){Xn.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){Xn.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=Xn.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",f=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=fe("div",f),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var f,g,T=this._map,C=this._container,B=T.latLngToContainerPoint(T.getCenter()),J=T.layerPointToContainerPoint(l),ot=this.options.direction,ft=C.offsetWidth,St=C.offsetHeight,Rt=V(this.options.offset),Xt=this._getAnchor();ot==="top"?(f=ft/2,g=St):ot==="bottom"?(f=ft/2,g=0):ot==="center"?(f=ft/2,g=St/2):ot==="right"?(f=0,g=St/2):ot==="left"?(f=ft,g=St/2):J.x<B.x?(ot="right",f=0,g=St/2):(ot="left",f=ft+(Rt.x+Xt.x)*2,g=St/2),l=l.subtract(V(f,g,!0)).add(Rt).add(Xt),an(C,"leaflet-tooltip-right"),an(C,"leaflet-tooltip-left"),an(C,"leaflet-tooltip-top"),an(C,"leaflet-tooltip-bottom"),se(C,"leaflet-tooltip-"+ot),We(C,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&Ke(this._container,l)},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(f)},_getAnchor:function(){return V(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),qm=function(l,f){return new al(l,f)};_e.include({openTooltip:function(l,f,g){return this._initOverlay(al,l,f,g).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),ss.include({bindTooltip:function(l,f){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(al,this._tooltip,l,f),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var f=l?"off":"on",g={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?g.add=this._openTooltip:(g.mouseover=this._openTooltip,g.mouseout=this.closeTooltip,g.click=this._openTooltip,this._map?this._addFocusListeners():g.add=this._addFocusListeners),this._tooltip.options.sticky&&(g.mousemove=this._moveTooltip),this[f](g),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof Ss||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var f=typeof l.getElement=="function"&&l.getElement();f&&(Jt(f,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),Jt(f,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var f=typeof l.getElement=="function"&&l.getElement();f&&f.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var f=this;this._map.once("moveend",function(){f._openOnceFlag=!1,f._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var f=l.latlng,g,T;this._tooltip.options.sticky&&l.originalEvent&&(g=this._map.mouseEventToContainerPoint(l.originalEvent),T=this._map.containerPointToLayerPoint(g),f=this._map.layerPointToLatLng(T)),this._tooltip.setLatLng(f)}});var qf=Ts.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var f=l&&l.tagName==="DIV"?l:document.createElement("div"),g=this.options;if(g.html instanceof Element?(Di(f),f.appendChild(g.html)):f.innerHTML=g.html!==!1?g.html:"",g.bgPos){var T=V(g.bgPos);f.style.backgroundPosition=-T.x+"px "+-T.y+"px"}return this._setIconStyles(f,"icon"),f},createShadow:function(){return null}});function Gm(l){return new qf(l)}Ts.Default=tl;var Ko=ss.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ut.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){A(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),Ve(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Bn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(to(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof K?l:new K(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var f=this.getPane().children,g=-l(-1/0,1/0),T=0,C=f.length,B;T<C;T++)B=f[T].style.zIndex,f[T]!==this._container&&B&&(g=l(g,+B));isFinite(g)&&(this.options.zIndex=g+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ut.ielt9){Ke(this._container,this.options.opacity);var l=+new Date,f=!1,g=!1;for(var T in this._tiles){var C=this._tiles[T];if(!(!C.current||!C.loaded)){var B=Math.min(1,(l-C.loaded)/200);Ke(C.el,B),B<1?f=!0:(C.active?g=!0:this._onOpaqueTile(C),C.active=!0)}}g&&!this._noPrune&&this._pruneTiles(),f&&(et(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=fe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,f=this.options.maxZoom;if(l!==void 0){for(var g in this._levels)g=Number(g),this._levels[g].el.children.length||g===l?(this._levels[g].el.style.zIndex=f-Math.abs(l-g),this._onUpdateLevel(g)):(Ve(this._levels[g].el),this._removeTilesAtZoom(g),this._onRemoveLevel(g),delete this._levels[g]);var T=this._levels[l],C=this._map;return T||(T=this._levels[l]={},T.el=fe("div","leaflet-tile-container leaflet-zoom-animated",this._container),T.el.style.zIndex=f,T.origin=C.project(C.unproject(C.getPixelOrigin()),l).round(),T.zoom=l,this._setZoomTransform(T,C.getCenter(),C.getZoom()),_(T.el.offsetWidth),this._onCreateLevel(T)),this._level=T,T}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var l,f,g=this._map.getZoom();if(g>this.options.maxZoom||g<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)f=this._tiles[l],f.retain=f.current;for(l in this._tiles)if(f=this._tiles[l],f.current&&!f.active){var T=f.coords;this._retainParent(T.x,T.y,T.z,T.z-5)||this._retainChildren(T.x,T.y,T.z,T.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var f in this._tiles)this._tiles[f].coords.z===l&&this._removeTile(f)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)Ve(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,f,g,T){var C=Math.floor(l/2),B=Math.floor(f/2),J=g-1,ot=new K(+C,+B);ot.z=+J;var ft=this._tileCoordsToKey(ot),St=this._tiles[ft];return St&&St.active?(St.retain=!0,!0):(St&&St.loaded&&(St.retain=!0),J>T?this._retainParent(C,B,J,T):!1)},_retainChildren:function(l,f,g,T){for(var C=2*l;C<2*l+2;C++)for(var B=2*f;B<2*f+2;B++){var J=new K(C,B);J.z=g+1;var ot=this._tileCoordsToKey(J),ft=this._tiles[ot];if(ft&&ft.active){ft.retain=!0;continue}else ft&&ft.loaded&&(ft.retain=!0);g+1<T&&this._retainChildren(C,B,g+1,T)}},_resetView:function(l){var f=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),f,f)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var f=this.options;return f.minNativeZoom!==void 0&&l<f.minNativeZoom?f.minNativeZoom:f.maxNativeZoom!==void 0&&f.maxNativeZoom<l?f.maxNativeZoom:l},_setView:function(l,f,g,T){var C=Math.round(f);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var B=this.options.updateWhenZooming&&C!==this._tileZoom;(!T||B)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(l),g||this._pruneTiles(),this._noPrune=!!g),this._setZoomTransforms(l,f)},_setZoomTransforms:function(l,f){for(var g in this._levels)this._setZoomTransform(this._levels[g],l,f)},_setZoomTransform:function(l,f,g){var T=this._map.getZoomScale(g,l.zoom),C=l.origin.multiplyBy(T).subtract(this._map._getNewPixelOrigin(f,g)).round();Ut.any3d?Fs(l.el,C,T):We(l.el,C)},_resetGrid:function(){var l=this._map,f=l.options.crs,g=this._tileSize=this.getTileSize(),T=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=f.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,f.wrapLng[0]],T).x/g.x),Math.ceil(l.project([0,f.wrapLng[1]],T).x/g.y)],this._wrapY=f.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([f.wrapLat[0],0],T).y/g.x),Math.ceil(l.project([f.wrapLat[1],0],T).y/g.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var f=this._map,g=f._animatingZoom?Math.max(f._animateToZoom,f.getZoom()):f.getZoom(),T=f.getZoomScale(g,this._tileZoom),C=f.project(l,this._tileZoom).floor(),B=f.getSize().divideBy(T*2);return new I(C.subtract(B),C.add(B))},_update:function(l){var f=this._map;if(f){var g=this._clampZoom(f.getZoom());if(l===void 0&&(l=f.getCenter()),this._tileZoom!==void 0){var T=this._getTiledPixelBounds(l),C=this._pxBoundsToTileRange(T),B=C.getCenter(),J=[],ot=this.options.keepBuffer,ft=new I(C.getBottomLeft().subtract([ot,-ot]),C.getTopRight().add([ot,-ot]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var St in this._tiles){var Rt=this._tiles[St].coords;(Rt.z!==this._tileZoom||!ft.contains(new K(Rt.x,Rt.y)))&&(this._tiles[St].current=!1)}if(Math.abs(g-this._tileZoom)>1){this._setView(l,g);return}for(var Xt=C.min.y;Xt<=C.max.y;Xt++)for(var le=C.min.x;le<=C.max.x;le++){var Hn=new K(le,Xt);if(Hn.z=this._tileZoom,!!this._isValidTile(Hn)){var pn=this._tiles[this._tileCoordsToKey(Hn)];pn?pn.current=!0:J.push(Hn)}}if(J.sort(function(Me,ke){return Me.distanceTo(B)-ke.distanceTo(B)}),J.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var wi=document.createDocumentFragment();for(le=0;le<J.length;le++)this._addTile(J[le],wi);this._level.el.appendChild(wi)}}}},_isValidTile:function(l){var f=this._map.options.crs;if(!f.infinite){var g=this._globalTileRange;if(!f.wrapLng&&(l.x<g.min.x||l.x>g.max.x)||!f.wrapLat&&(l.y<g.min.y||l.y>g.max.y))return!1}if(!this.options.bounds)return!0;var T=this._tileCoordsToBounds(l);return mt(this.options.bounds).overlaps(T)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var f=this._map,g=this.getTileSize(),T=l.scaleBy(g),C=T.add(g),B=f.unproject(T,l.z),J=f.unproject(C,l.z);return[B,J]},_tileCoordsToBounds:function(l){var f=this._tileCoordsToNwSe(l),g=new at(f[0],f[1]);return this.options.noWrap||(g=this._map.wrapLatLngBounds(g)),g},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var f=l.split(":"),g=new K(+f[0],+f[1]);return g.z=+f[2],g},_removeTile:function(l){var f=this._tiles[l];f&&(Ve(f.el),delete this._tiles[l],this.fire("tileunload",{tile:f.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){se(l,"leaflet-tile");var f=this.getTileSize();l.style.width=f.x+"px",l.style.height=f.y+"px",l.onselectstart=_,l.onmousemove=_,Ut.ielt9&&this.options.opacity<1&&Ke(l,this.options.opacity)},_addTile:function(l,f){var g=this._getTilePos(l),T=this._tileCoordsToKey(l),C=this.createTile(this._wrapCoords(l),u(this._tileReady,this,l));this._initTile(C),this.createTile.length<2&&Q(u(this._tileReady,this,l,null,C)),We(C,g),this._tiles[T]={el:C,coords:l,current:!0},f.appendChild(C),this.fire("tileloadstart",{tile:C,coords:l})},_tileReady:function(l,f,g){f&&this.fire("tileerror",{error:f,tile:g,coords:l});var T=this._tileCoordsToKey(l);g=this._tiles[T],g&&(g.loaded=+new Date,this._map._fadeAnimated?(Ke(g.el,0),et(this._fadeFrame),this._fadeFrame=Q(this._updateOpacity,this)):(g.active=!0,this._pruneTiles()),f||(se(g.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:g.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ut.ielt9||!this._map._fadeAnimated?Q(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var f=new K(this._wrapX?y(l.x,this._wrapX):l.x,this._wrapY?y(l.y,this._wrapY):l.y);return f.z=l.z,f},_pxBoundsToTileRange:function(l){var f=this.getTileSize();return new I(l.min.unscaleBy(f).floor(),l.max.unscaleBy(f).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function Gf(l){return new Ko(l)}var Sr=Ko.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,f){this._url=l,f=A(this,f),f.detectRetina&&Ut.retina&&f.maxZoom>0?(f.tileSize=Math.floor(f.tileSize/2),f.zoomReverse?(f.zoomOffset--,f.minZoom=Math.min(f.maxZoom,f.minZoom+1)):(f.zoomOffset++,f.maxZoom=Math.max(f.minZoom,f.maxZoom-1)),f.minZoom=Math.max(0,f.minZoom)):f.zoomReverse?f.minZoom=Math.min(f.maxZoom,f.minZoom):f.maxZoom=Math.max(f.minZoom,f.maxZoom),typeof f.subdomains=="string"&&(f.subdomains=f.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,f){return this._url===l&&f===void 0&&(f=!0),this._url=l,f||this.redraw(),this},createTile:function(l,f){var g=document.createElement("img");return Jt(g,"load",u(this._tileOnLoad,this,f,g)),Jt(g,"error",u(this._tileOnError,this,f,g)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(g.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(g.referrerPolicy=this.options.referrerPolicy),g.alt="",g.src=this.getTileUrl(l),g},getTileUrl:function(l){var f={r:Ut.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var g=this._globalTileRange.max.y-l.y;this.options.tms&&(f.y=g),f["-y"]=g}return z(this._url,r(f,this.options))},_tileOnLoad:function(l,f){Ut.ielt9?setTimeout(u(l,this,null,f),0):l(null,f)},_tileOnError:function(l,f,g){var T=this.options.errorTileUrl;T&&f.getAttribute("src")!==T&&(f.src=T),l(g,f)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,f=this.options.maxZoom,g=this.options.zoomReverse,T=this.options.zoomOffset;return g&&(l=f-l),l+T},_getSubdomain:function(l){var f=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[f]},_abortLoading:function(){var l,f;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(f=this._tiles[l].el,f.onload=_,f.onerror=_,!f.complete)){f.src=N;var g=this._tiles[l].coords;Ve(f),delete this._tiles[l],this.fire("tileabort",{tile:f,coords:g})}},_removeTile:function(l){var f=this._tiles[l];if(f)return f.el.setAttribute("src",N),Ko.prototype._removeTile.call(this,l)},_tileReady:function(l,f,g){if(!(!this._map||g&&g.getAttribute("src")===N))return Ko.prototype._tileReady.call(this,l,f,g)}});function Ni(l,f){return new Sr(l,f)}var ll=Sr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,f){this._url=l;var g=r({},this.defaultWmsParams);for(var T in f)T in this.options||(g[T]=f[T]);f=A(this,f);var C=f.detectRetina&&Ut.retina?2:1,B=this.getTileSize();g.width=B.x*C,g.height=B.y*C,this.wmsParams=g},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var f=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[f]=this._crs.code,Sr.prototype.onAdd.call(this,l)},getTileUrl:function(l){var f=this._tileCoordsToNwSe(l),g=this._crs,T=Y(g.project(f[0]),g.project(f[1])),C=T.min,B=T.max,J=(this._wmsVersion>=1.3&&this._crs===Iu?[C.y,C.x,B.y,B.x]:[C.x,C.y,B.x,B.y]).join(","),ot=Sr.prototype.getTileUrl.call(this,l);return ot+E(this.wmsParams,ot,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+J},setParams:function(l,f){return r(this.wmsParams,l),f||this.redraw(),this}});function Pi(l,f){return new ll(l,f)}Sr.WMS=ll,Ni.wms=Pi;var ui=ss.extend({options:{padding:.1},initialize:function(l){A(this,l),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,f){var g=this._map.getZoomScale(f,this._zoom),T=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,f),B=T.multiplyBy(-g).add(C).subtract(this._map._getNewPixelOrigin(l,f));Ut.any3d?Fs(this._container,B,g):We(this._container,B)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,f=this._map.getSize(),g=this._map.containerPointToLayerPoint(f.multiplyBy(-l)).round();this._bounds=new I(g,g.add(f.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),cc=ui.extend({options:{tolerance:0},getEvents:function(){var l=ui.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ui.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");Jt(l,"mousemove",this._onMouseMove,this),Jt(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Jt(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){et(this._redrawRequest),delete this._ctx,Ve(this._container),Pe(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var f in this._layers)l=this._layers[f],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ui.prototype._update.call(this);var l=this._bounds,f=this._container,g=l.getSize(),T=Ut.retina?2:1;We(f,l.min),f.width=T*g.x,f.height=T*g.y,f.style.width=g.x+"px",f.style.height=g.y+"px",Ut.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){ui.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[p(l)]=l;var f=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=f),this._drawLast=f,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var f=l._order,g=f.next,T=f.prev;g?g.prev=T:this._drawLast=T,T?T.next=g:this._drawFirst=g,delete l._order,delete this._layers[p(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var f=l.options.dashArray.split(/[, ]+/),g=[],T,C;for(C=0;C<f.length;C++){if(T=Number(f[C]),isNaN(T))return;g.push(T)}l.options._dashArray=g}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||Q(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var f=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new I,this._redrawBounds.extend(l._pxBounds.min.subtract([f,f])),this._redrawBounds.extend(l._pxBounds.max.add([f,f]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var f=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,f.x,f.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,f=this._redrawBounds;if(this._ctx.save(),f){var g=f.getSize();this._ctx.beginPath(),this._ctx.rect(f.min.x,f.min.y,g.x,g.y),this._ctx.clip()}this._drawing=!0;for(var T=this._drawFirst;T;T=T.next)l=T.layer,(!f||l._pxBounds&&l._pxBounds.intersects(f))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,f){if(this._drawing){var g,T,C,B,J=l._parts,ot=J.length,ft=this._ctx;if(ot){for(ft.beginPath(),g=0;g<ot;g++){for(T=0,C=J[g].length;T<C;T++)B=J[g][T],ft[T?"lineTo":"moveTo"](B.x,B.y);f&&ft.closePath()}this._fillStroke(ft,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var f=l._point,g=this._ctx,T=Math.max(Math.round(l._radius),1),C=(Math.max(Math.round(l._radiusY),1)||T)/T;C!==1&&(g.save(),g.scale(1,C)),g.beginPath(),g.arc(f.x,f.y/C,T,0,Math.PI*2,!1),C!==1&&g.restore(),this._fillStroke(g,l)}},_fillStroke:function(l,f){var g=f.options;g.fill&&(l.globalAlpha=g.fillOpacity,l.fillStyle=g.fillColor||g.color,l.fill(g.fillRule||"evenodd")),g.stroke&&g.weight!==0&&(l.setLineDash&&l.setLineDash(f.options&&f.options._dashArray||[]),l.globalAlpha=g.opacity,l.lineWidth=g.weight,l.strokeStyle=g.color,l.lineCap=g.lineCap,l.lineJoin=g.lineJoin,l.stroke())},_onClick:function(l){for(var f=this._map.mouseEventToLayerPoint(l),g,T,C=this._drawFirst;C;C=C.next)g=C.layer,g.options.interactive&&g._containsPoint(f)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(g))&&(T=g);this._fireEvent(T?[T]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var f=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,f)}},_handleMouseOut:function(l){var f=this._hoveredLayer;f&&(an(this._container,"leaflet-interactive"),this._fireEvent([f],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,f){if(!this._mouseHoverThrottled){for(var g,T,C=this._drawFirst;C;C=C.next)g=C.layer,g.options.interactive&&g._containsPoint(f)&&(T=g);T!==this._hoveredLayer&&(this._handleMouseOut(l),T&&(se(this._container,"leaflet-interactive"),this._fireEvent([T],l,"mouseover"),this._hoveredLayer=T)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,f,g){this._map._fireDOMEvent(f,g||f.type,l)},_bringToFront:function(l){var f=l._order;if(f){var g=f.next,T=f.prev;if(g)g.prev=T;else return;T?T.next=g:g&&(this._drawFirst=g),f.prev=this._drawLast,this._drawLast.next=f,f.next=null,this._drawLast=f,this._requestRedraw(l)}},_bringToBack:function(l){var f=l._order;if(f){var g=f.next,T=f.prev;if(T)T.next=g;else return;g?g.prev=T:T&&(this._drawLast=T),f.prev=null,f.next=this._drawFirst,this._drawFirst.prev=f,this._drawFirst=f,this._requestRedraw(l)}}});function cl(l){return Ut.canvas?new cc(l):null}var Tr=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Nu={_initContainer:function(){this._container=fe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ui.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var f=l._container=Tr("shape");se(f,"leaflet-vml-shape "+(this.options.className||"")),f.coordsize="1 1",l._path=Tr("path"),f.appendChild(l._path),this._updateStyle(l),this._layers[p(l)]=l},_addPath:function(l){var f=l._container;this._container.appendChild(f),l.options.interactive&&l.addInteractiveTarget(f)},_removePath:function(l){var f=l._container;Ve(f),l.removeInteractiveTarget(f),delete this._layers[p(l)]},_updateStyle:function(l){var f=l._stroke,g=l._fill,T=l.options,C=l._container;C.stroked=!!T.stroke,C.filled=!!T.fill,T.stroke?(f||(f=l._stroke=Tr("stroke")),C.appendChild(f),f.weight=T.weight+"px",f.color=T.color,f.opacity=T.opacity,T.dashArray?f.dashStyle=O(T.dashArray)?T.dashArray.join(" "):T.dashArray.replace(/( *, *)/g," "):f.dashStyle="",f.endcap=T.lineCap.replace("butt","flat"),f.joinstyle=T.lineJoin):f&&(C.removeChild(f),l._stroke=null),T.fill?(g||(g=l._fill=Tr("fill")),C.appendChild(g),g.color=T.fillColor||T.color,g.opacity=T.fillOpacity):g&&(C.removeChild(g),l._fill=null)},_updateCircle:function(l){var f=l._point.round(),g=Math.round(l._radius),T=Math.round(l._radiusY||g);this._setPath(l,l._empty()?"M0 0":"AL "+f.x+","+f.y+" "+g+","+T+" 0,"+65535*360)},_setPath:function(l,f){l._path.v=f},_bringToFront:function(l){Bn(l._container)},_bringToBack:function(l){to(l._container)}},Es=Ut.vml?Tr:It,Jo=ui.extend({_initContainer:function(){this._container=Es("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Es("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ve(this._container),Pe(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ui.prototype._update.call(this);var l=this._bounds,f=l.getSize(),g=this._container;(!this._svgSize||!this._svgSize.equals(f))&&(this._svgSize=f,g.setAttribute("width",f.x),g.setAttribute("height",f.y)),We(g,l.min),g.setAttribute("viewBox",[l.min.x,l.min.y,f.x,f.y].join(" ")),this.fire("update")}},_initPath:function(l){var f=l._path=Es("path");l.options.className&&se(f,l.options.className),l.options.interactive&&se(f,"leaflet-interactive"),this._updateStyle(l),this._layers[p(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){Ve(l._path),l.removeInteractiveTarget(l._path),delete this._layers[p(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var f=l._path,g=l.options;f&&(g.stroke?(f.setAttribute("stroke",g.color),f.setAttribute("stroke-opacity",g.opacity),f.setAttribute("stroke-width",g.weight),f.setAttribute("stroke-linecap",g.lineCap),f.setAttribute("stroke-linejoin",g.lineJoin),g.dashArray?f.setAttribute("stroke-dasharray",g.dashArray):f.removeAttribute("stroke-dasharray"),g.dashOffset?f.setAttribute("stroke-dashoffset",g.dashOffset):f.removeAttribute("stroke-dashoffset")):f.setAttribute("stroke","none"),g.fill?(f.setAttribute("fill",g.fillColor||g.color),f.setAttribute("fill-opacity",g.fillOpacity),f.setAttribute("fill-rule",g.fillRule||"evenodd")):f.setAttribute("fill","none"))},_updatePoly:function(l,f){this._setPath(l,Qt(l._parts,f))},_updateCircle:function(l){var f=l._point,g=Math.max(Math.round(l._radius),1),T=Math.max(Math.round(l._radiusY),1)||g,C="a"+g+","+T+" 0 1,0 ",B=l._empty()?"M0 0":"M"+(f.x-g)+","+f.y+C+g*2+",0 "+C+-g*2+",0 ";this._setPath(l,B)},_setPath:function(l,f){l._path.setAttribute("d",f)},_bringToFront:function(l){Bn(l._path)},_bringToBack:function(l){to(l._path)}});Ut.vml&&Jo.include(Nu);function ul(l){return Ut.svg||Ut.vml?new Jo(l):null}_e.include({getRenderer:function(l){var f=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return f||(f=this._renderer=this._createRenderer()),this.hasLayer(f)||this.addLayer(f),f},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var f=this._paneRenderers[l];return f===void 0&&(f=this._createRenderer({pane:l}),this._paneRenderers[l]=f),f},_createRenderer:function(l){return this.options.preferCanvas&&cl(l)||ul(l)}});var so=Yo.extend({initialize:function(l,f){Yo.prototype.initialize.call(this,this._boundsToLatLngs(l),f)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=mt(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function Zm(l,f){return new so(l,f)}Jo.create=Es,Jo.pointsToPath=Qt,$s.geometryToLayer=Yn,$s.coordsToLatLng=sc,$s.coordsToLatLngs=il,$s.latLngToCoords=rc,$s.latLngsToCoords=sl,$s.getFeature=br,$s.asFeature=oc,_e.mergeOptions({boxZoom:!0});var hi=xs.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){Jt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Pe(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ve(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Bo(),Xl(),this._startPoint=this._map.mouseEventToContainerPoint(l),Jt(document,{contextmenu:yr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=fe("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var f=new I(this._point,this._startPoint),g=f.getSize();We(this._box,f.min),this._box.style.width=g.x+"px",this._box.style.height=g.y+"px"},_finish:function(){this._moved&&(Ve(this._box),an(this._container,"leaflet-crosshair")),bs(),Wa(),Pe(document,{contextmenu:yr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var f=new at(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(f).fire("boxzoomend",{boxZoomBounds:f})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});_e.addInitHook("addHandler","boxZoom",hi),_e.mergeOptions({doubleClickZoom:!0});var uc=xs.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var f=this._map,g=f.getZoom(),T=f.options.zoomDelta,C=l.originalEvent.shiftKey?g-T:g+T;f.options.doubleClickZoom==="center"?f.setZoom(C):f.setZoomAround(l.containerPoint,C)}});_e.addInitHook("addHandler","doubleClickZoom",uc),_e.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Cs=xs.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new vr(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){an(this._map._container,"leaflet-grab"),an(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var f=mt(this._map.options.maxBounds);this._offsetLimit=Y(this._map.latLngToContainerPoint(f.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(f.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var f=this._lastTime=+new Date,g=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(g),this._times.push(f),this._prunePositions(f)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),f=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=f.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,f){return l-(l-f)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),f=this._offsetLimit;l.x<f.min.x&&(l.x=this._viscousLimit(l.x,f.min.x)),l.y<f.min.y&&(l.y=this._viscousLimit(l.y,f.min.y)),l.x>f.max.x&&(l.x=this._viscousLimit(l.x,f.max.x)),l.y>f.max.y&&(l.y=this._viscousLimit(l.y,f.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,f=Math.round(l/2),g=this._initialWorldOffset,T=this._draggable._newPos.x,C=(T-f+g)%l+f-g,B=(T+f+g)%l-f-g,J=Math.abs(C+g)<Math.abs(B+g)?C:B;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=J},_onDragEnd:function(l){var f=this._map,g=f.options,T=!g.inertia||l.noInertia||this._times.length<2;if(f.fire("dragend",l),T)f.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),B=(this._lastTime-this._times[0])/1e3,J=g.easeLinearity,ot=C.multiplyBy(J/B),ft=ot.distanceTo([0,0]),St=Math.min(g.inertiaMaxSpeed,ft),Rt=ot.multiplyBy(St/ft),Xt=St/(g.inertiaDeceleration*J),le=Rt.multiplyBy(-Xt/2).round();!le.x&&!le.y?f.fire("moveend"):(le=f._limitOffset(le,f.options.maxBounds),Q(function(){f.panBy(le,{duration:Xt,easeLinearity:J,noMoveStart:!0,animate:!0})}))}}});_e.addInitHook("addHandler","dragging",Cs),_e.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Pu=xs.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),Jt(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Pe(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,f=document.documentElement,g=l.scrollTop||f.scrollTop,T=l.scrollLeft||f.scrollLeft;this._map._container.focus(),window.scrollTo(T,g)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var f=this._panKeys={},g=this.keyCodes,T,C;for(T=0,C=g.left.length;T<C;T++)f[g.left[T]]=[-1*l,0];for(T=0,C=g.right.length;T<C;T++)f[g.right[T]]=[l,0];for(T=0,C=g.down.length;T<C;T++)f[g.down[T]]=[0,l];for(T=0,C=g.up.length;T<C;T++)f[g.up[T]]=[0,-1*l]},_setZoomDelta:function(l){var f=this._zoomKeys={},g=this.keyCodes,T,C;for(T=0,C=g.zoomIn.length;T<C;T++)f[g.zoomIn[T]]=l;for(T=0,C=g.zoomOut.length;T<C;T++)f[g.zoomOut[T]]=-l},_addHooks:function(){Jt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Pe(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var f=l.keyCode,g=this._map,T;if(f in this._panKeys){if(!g._panAnim||!g._panAnim._inProgress)if(T=this._panKeys[f],l.shiftKey&&(T=V(T).multiplyBy(3)),g.options.maxBounds&&(T=g._limitOffset(V(T),g.options.maxBounds)),g.options.worldCopyJump){var C=g.wrapLatLng(g.unproject(g.project(g.getCenter()).add(T)));g.panTo(C)}else g.panBy(T)}else if(f in this._zoomKeys)g.setZoom(g.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[f]);else if(f===27&&g._popup&&g._popup.options.closeOnEscapeKey)g.closePopup();else return;yr(l)}}});_e.addInitHook("addHandler","keyboard",Pu),_e.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var hl=xs.extend({addHooks:function(){Jt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Pe(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var f=si(l),g=this._map.options.wheelDebounceTime;this._delta+=f,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var T=Math.max(g-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),T),yr(l)},_performZoom:function(){var l=this._map,f=l.getZoom(),g=this._map.options.zoomSnap||0;l._stop();var T=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(T))))/Math.LN2,B=g?Math.ceil(C/g)*g:C,J=l._limitZoom(f+(this._delta>0?B:-B))-f;this._delta=0,this._startTime=null,J&&(l.options.scrollWheelZoom==="center"?l.setZoom(f+J):l.setZoomAround(this._lastMousePos,f+J))}});_e.addInitHook("addHandler","scrollWheelZoom",hl);var ro=600;_e.mergeOptions({tapHold:Ut.touchNative&&Ut.safari&&Ut.mobile,tapTolerance:15});var hc=xs.extend({addHooks:function(){Jt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Pe(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var f=l.touches[0];this._startPos=this._newPos=new K(f.clientX,f.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Jt(document,"touchend",dn),Jt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",f))},this),ro),Jt(document,"touchend touchcancel contextmenu",this._cancel,this),Jt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Pe(document,"touchend",dn),Pe(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Pe(document,"touchend touchcancel contextmenu",this._cancel,this),Pe(document,"touchmove",this._onMove,this)},_onMove:function(l){var f=l.touches[0];this._newPos=new K(f.clientX,f.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,f){var g=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY});g._simulated=!0,f.target.dispatchEvent(g)}});_e.addInitHook("addHandler","tapHold",hc),_e.mergeOptions({touchZoom:Ut.touch,bounceAtZoomLimits:!0});var zu=xs.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),Jt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){an(this._map._container,"leaflet-touch-zoom"),Pe(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var f=this._map;if(!(!l.touches||l.touches.length!==2||f._animatingZoom||this._zooming)){var g=f.mouseEventToContainerPoint(l.touches[0]),T=f.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=f.getSize()._divideBy(2),this._startLatLng=f.containerPointToLatLng(this._centerPoint),f.options.touchZoom!=="center"&&(this._pinchStartLatLng=f.containerPointToLatLng(g.add(T)._divideBy(2))),this._startDist=g.distanceTo(T),this._startZoom=f.getZoom(),this._moved=!1,this._zooming=!0,f._stop(),Jt(document,"touchmove",this._onTouchMove,this),Jt(document,"touchend touchcancel",this._onTouchEnd,this),dn(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var f=this._map,g=f.mouseEventToContainerPoint(l.touches[0]),T=f.mouseEventToContainerPoint(l.touches[1]),C=g.distanceTo(T)/this._startDist;if(this._zoom=f.getScaleZoom(C,this._startZoom),!f.options.bounceAtZoomLimits&&(this._zoom<f.getMinZoom()&&C<1||this._zoom>f.getMaxZoom()&&C>1)&&(this._zoom=f._limitZoom(this._zoom)),f.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var B=g._add(T)._divideBy(2)._subtract(this._centerPoint);if(C===1&&B.x===0&&B.y===0)return;this._center=f.unproject(f.project(this._pinchStartLatLng,this._zoom).subtract(B),this._zoom)}this._moved||(f._moveStart(!0,!1),this._moved=!0),et(this._animRequest);var J=u(f._move,f,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Q(J,this,!0),dn(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,et(this._animRequest),Pe(document,"touchmove",this._onTouchMove,this),Pe(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});_e.addInitHook("addHandler","touchZoom",zu),_e.BoxZoom=hi,_e.DoubleClickZoom=uc,_e.Drag=Cs,_e.Keyboard=Pu,_e.ScrollWheelZoom=hl,_e.TapHold=hc,_e.TouchZoom=zu,e.Bounds=I,e.Browser=Ut,e.CRS=kt,e.Canvas=cc,e.Circle=ic,e.CircleMarker=Fo,e.Class=X,e.Control=bi,e.DivIcon=qf,e.DivOverlay=Xn,e.DomEvent=Kl,e.DomUtil=jo,e.Draggable=vr,e.Evented=U,e.FeatureGroup=Ss,e.GeoJSON=$s,e.GridLayer=Ko,e.Handler=xs,e.Icon=Ts,e.ImageOverlay=Qo,e.LatLng=gt,e.LatLngBounds=at,e.Layer=ss,e.LayerGroup=Wo,e.LineUtil=Bm,e.Map=_e,e.Marker=nl,e.Mixin=Nm,e.Path=As,e.Point=K,e.PolyUtil=Du,e.Polygon=Yo,e.Polyline=Qs,e.Popup=ol,e.PosAnimation=qo,e.Projection=If,e.Rectangle=so,e.Renderer=ui,e.SVG=Jo,e.SVGOverlay=lc,e.TileLayer=Sr,e.Tooltip=al,e.Transformation=Be,e.Util=k,e.VideoOverlay=xr,e.bind=u,e.bounds=Y,e.canvas=cl,e.circle=Bf,e.circleMarker=Uf,e.control=Xs,e.divIcon=Gm,e.extend=r,e.featureGroup=Pf,e.geoJSON=ac,e.geoJson=rl,e.gridLayer=Gf,e.icon=Ja,e.imageOverlay=Hf,e.latLng=yt,e.latLngBounds=mt,e.layerGroup=Hm,e.map=Eu,e.marker=zf,e.point=V,e.polygon=jm,e.polyline=Vm,e.popup=jf,e.rectangle=Zm,e.setOptions=A,e.stamp=p,e.svg=ul,e.svgOverlay=Vf,e.tileLayer=Ni,e.tooltip=qm,e.transformation=sn,e.version=s,e.videoOverlay=$o;var Uu=window.L;e.noConflict=function(){return window.L=Uu,this},window.L=e}))})(Eh,Eh.exports)),Eh.exports}var jL=VL();const gn=Jh(jL);(function(n,t,e){function s(r,a){for(;(r=r.parentElement)&&!r.classList.contains(a););return r}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(r,a){this._map=r,this._container=r._container,this._overlayPane=r._panes.overlayPane,this._popupPane=r._panes.popupPane,a&&a.shapeOptions&&(a.shapeOptions=L.Util.extend({},this.options.shapeOptions,a.shapeOptions)),L.setOptions(this,a);var u=L.version.split(".");parseInt(u[0],10)===1&&parseInt(u[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(L.DomUtil.disableTextSelection(),r.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(r){L.setOptions(this,r)},_fireCreatedEvent:function(r){this._map.fire(L.Draw.Event.CREATED,{layer:r,layerType:this.type})},_cancelDrawing:function(r){r.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(r,a){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,a&&a.drawError&&(a.drawError=L.Util.extend({},this.options.drawError,a.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,r,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var r=this._markers.pop(),a=this._poly,u=a.getLatLngs(),h=u.splice(-1,1)[0];this._poly.setLatLngs(u),this._markerGroup.removeLayer(r),a.getLatLngs().length<2&&this._map.removeLayer(a),this._vertexChanged(h,!1)}},addVertex:function(r){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(r))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(r)),this._poly.addLatLng(r),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(r,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var r=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),a=this._poly.newLatLngIntersects(r[r.length-1]);if(!this.options.allowIntersection&&a||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(r){var a=this._map.mouseEventToLayerPoint(r.originalEvent),u=this._map.layerPointToLatLng(a);this._currentLatLng=u,this._updateTooltip(u),this._updateGuide(a),this._mouseMarker.setLatLng(u),L.DomEvent.preventDefault(r.originalEvent)},_vertexChanged:function(r,a){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(r,a),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(r){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(r),this._clickHandled=!0,this._disableNewMarkers();var a=r.originalEvent,u=a.clientX,h=a.clientY;this._startPoint.call(this,u,h)}},_startPoint:function(r,a){this._mouseDownOrigin=L.point(r,a)},_onMouseUp:function(r){var a=r.originalEvent,u=a.clientX,h=a.clientY;this._endPoint.call(this,u,h,r),this._clickHandled=null},_endPoint:function(r,a,u){if(this._mouseDownOrigin){var h=L.point(r,a).distanceTo(this._mouseDownOrigin),p=this._calculateFinishDistance(u.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(u.latlng),this._finishShape()):p<10&&L.Browser.touch?this._finishShape():Math.abs(h)<9*(n.devicePixelRatio||1)&&this.addVertex(u.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(r){var a,u,h=r.originalEvent;!h.touches||!h.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(a=h.touches[0].clientX,u=h.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,a,u),this._endPoint.call(this,a,u,r),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(r){var a;if(this._markers.length>0){var u;if(this.type===L.Draw.Polyline.TYPE)u=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;u=this._markers[0]}var h=this._map.latLngToContainerPoint(u.getLatLng()),p=new L.Marker(r,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),m=this._map.latLngToContainerPoint(p.getLatLng());a=h.distanceTo(m)}else a=1/0;return a},_updateFinishHandler:function(){var r=this._markers.length;r>1&&this._markers[r-1].on("click",this._finishShape,this),r>2&&this._markers[r-2].off("click",this._finishShape,this)},_createMarker:function(r){var a=new L.Marker(r,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(a),a},_updateGuide:function(r){var a=this._markers?this._markers.length:0;a>0&&(r=r||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[a-1].getLatLng()),r))},_updateTooltip:function(r){var a=this._getTooltipText();r&&this._tooltip.updatePosition(r),this._errorShown||this._tooltip.updateContent(a)},_drawGuide:function(r,a){var u,h,p,m=Math.floor(Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2))),y=this.options.guidelineDistance,_=this.options.maxGuideLineLength,b=m>_?m-_:y;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));b<m;b+=this.options.guidelineDistance)u=b/m,h={x:Math.floor(r.x*(1-u)+u*a.x),y:Math.floor(r.y*(1-u)+u*a.y)},p=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),p.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(p,h)},_updateGuideColor:function(r){if(this._guidesContainer)for(var a=0,u=this._guidesContainer.childNodes.length;a<u;a++)this._guidesContainer.childNodes[a].style.backgroundColor=r},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var r,a,u=this.options.showLength;return this._markers.length===0?r={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(a=u?this._getMeasurementString():"",r=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:a}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:a}),r},_updateRunningMeasure:function(r,a){var u,h,p=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(u=p-(a?2:1),h=L.GeometryUtil.isVersion07x()?r.distanceTo(this._markers[u].getLatLng())*(this.options.factor||1):this._map.distance(r,this._markers[u].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=h*(a?1:-1))},_getMeasurementString:function(){var r,a=this._currentLatLng,u=this._markers[this._markers.length-1].getLatLng();return r=L.GeometryUtil.isVersion07x()?u&&a&&a.distanceTo?this._measurementRunningTotal+a.distanceTo(u)*(this.options.factor||1):this._measurementRunningTotal||0:u&&a?this._measurementRunningTotal+this._map.distance(a,u)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(r,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var r=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(r,a){L.Draw.Polyline.prototype.initialize.call(this,r,a),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var r=this._markers.length;r===1&&this._markers[0].on("click",this._finishShape,this),r>2&&(this._markers[r-1].on("dblclick",this._finishShape,this),r>3&&this._markers[r-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var r,a;return this._markers.length===0?r=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(r=L.drawLocal.draw.handlers.polygon.tooltip.cont,a=this._getMeasurementString()):(r=L.drawLocal.draw.handlers.polygon.tooltip.end,a=this._getMeasurementString()),{text:r,subtext:a}},_getMeasurementString:function(){var r=this._area,a="";return r||this.options.showLength?(this.options.showLength&&(a=L.Draw.Polyline.prototype._getMeasurementString.call(this)),r&&(a+="<br>"+L.GeometryUtil.readableArea(r,this.options.metric,this.options.precision)),a):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(r,a){var u;!this.options.allowIntersection&&this.options.showArea&&(u=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(u)),L.Draw.Polyline.prototype._vertexChanged.call(this,r,a)},_cleanUpShape:function(){var r=this._markers.length;r>0&&(this._markers[0].off("click",this._finishShape,this),r>2&&this._markers[r-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(r,a){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,r,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),t.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(t,"mouseup",this._onMouseUp,this),L.DomEvent.off(t,"touchend",this._onMouseUp,this),t.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(r){this._isDrawing=!0,this._startLatLng=r.latlng,L.DomEvent.on(t,"mouseup",this._onMouseUp,this).on(t,"touchend",this._onMouseUp,this).preventDefault(r.originalEvent)},_onMouseMove:function(r){var a=r.latlng;this._tooltip.updatePosition(a),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(a))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(r,a){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,r,a)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(r){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!s(r.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(r){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,r)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,r),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var r=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,r)},_getTooltipText:function(){var r,a,u,h=L.Draw.SimpleShape.prototype._getTooltipText.call(this),p=this._shape,m=this.options.showArea;return p&&(r=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),a=L.GeometryUtil.geodesicArea(r),u=m?L.GeometryUtil.readableArea(a,this.options.metric):""),{text:h.text,subtext:u}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(r,a){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,r,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(r){var a=r.latlng;this._tooltip.updatePosition(a),this._mouseMarker.setLatLng(a),this._marker?(a=this._mouseMarker.getLatLng(),this._marker.setLatLng(a)):(this._marker=this._createMarker(a),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(r){return new L.Marker(r,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(r){this._onMouseMove(r),this._onClick()},_fireCreatedEvent:function(){var r=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(r,a){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,r,a)},_fireCreatedEvent:function(){var r=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)},_createMarker:function(r){return new L.CircleMarker(r,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(r,a){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,r,a)},_drawShape:function(r){if(L.GeometryUtil.isVersion07x())var a=this._startLatLng.distanceTo(r);else var a=this._map.distance(this._startLatLng,r);this._shape?this._shape.setRadius(a):(this._shape=new L.Circle(this._startLatLng,a,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var r=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,r)},_onMouseMove:function(r){var a,u=r.latlng,h=this.options.showRadius,p=this.options.metric;if(this._tooltip.updatePosition(u),this._isDrawing){this._drawShape(u),a=this._shape.getRadius().toFixed(1);var m="";h&&(m=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(a,p,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:m})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(r,a){this._marker=r,L.setOptions(this,a)},addHooks:function(){var r=this._marker;r.dragging.enable(),r.on("dragend",this._onDragEnd,r),this._toggleMarkerHighlight()},removeHooks:function(){var r=this._marker;r.dragging.disable(),r.off("dragend",this._onDragEnd,r),this._toggleMarkerHighlight()},_onDragEnd:function(r){var a=r.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_toggleMarkerHighlight:function(){var r=this._marker._icon;r&&(r.style.display="none",L.DomUtil.hasClass(r,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(r,"leaflet-edit-marker-selected"),this._offsetMarker(r,-4)):(L.DomUtil.addClass(r,"leaflet-edit-marker-selected"),this._offsetMarker(r,4)),r.style.display="")},_offsetMarker:function(r,a){var u=parseInt(r.style.marginTop,10)-a,h=parseInt(r.style.marginLeft,10)-a;r.style.marginTop=u+"px",r.style.marginLeft=h+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(r){this.latlngs=[r._latlngs],r._holes&&(this.latlngs=this.latlngs.concat(r._holes)),this._poly=r,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(r){for(var a=0;a<this._verticesHandlers.length;a++)r(this._verticesHandlers[a])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(r){r.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(r){r.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(r){r.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var r=0;r<this.latlngs.length;r++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[r],this._poly.options.poly))},_updateLatLngs:function(r){this.latlngs=[r.layer._latlngs],r.layer._holes&&(this.latlngs=this.latlngs.concat(r.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(r,a,u){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=r,u&&u.drawError&&(u.drawError=L.Util.extend({},this.options.drawError,u.drawError)),this._latlngs=a,L.setOptions(this,u)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var r=this._poly,a=r._path;r instanceof L.Polygon||(r.options.fill=!1,r.options.editing&&(r.options.editing.fill=!1)),a&&r.options.editing&&r.options.editing.className&&(r.options.original.className&&r.options.original.className.split(" ").forEach(function(u){L.DomUtil.removeClass(a,u)}),r.options.editing.className.split(" ").forEach(function(u){L.DomUtil.addClass(a,u)})),r.setStyle(r.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var r=this._poly,a=r._path;a&&r.options.editing&&r.options.editing.className&&(r.options.editing.className.split(" ").forEach(function(u){L.DomUtil.removeClass(a,u)}),r.options.original.className&&r.options.original.className.split(" ").forEach(function(u){L.DomUtil.addClass(a,u)})),r.setStyle(r.options.original),r._map&&(r._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var r,a,u,h,p=this._defaultShape();for(r=0,u=p.length;r<u;r++)h=this._createMarker(p[r],r),h.on("click",this._onMarkerClick,this),h.on("contextmenu",this._onContextMenu,this),this._markers.push(h);var m,y;for(r=0,a=u-1;r<u;a=r++)(r!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(m=this._markers[a],y=this._markers[r],this._createMiddleMarker(m,y),this._updatePrevNext(m,y))},_createMarker:function(r,a){var u=new L.Marker.Touch(r,{draggable:!0,icon:this.options.icon});return u._origLatLng=r,u._index=a,u.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(u),u},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var r=this._defaultShape(),a=[].splice.apply(r,arguments);return this._poly._convertLatLngs(r,!0),this._poly.redraw(),a},_removeMarker:function(r){var a=r._index;this._markerGroup.removeLayer(r),this._markers.splice(a,1),this._spliceLatLngs(a,1),this._updateIndexes(a,-1),r.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(r){var a=r.target,u=this._poly,h=L.LatLngUtil.cloneLatLng(a._origLatLng);if(L.extend(a._origLatLng,a._latlng),u.options.poly){var p=u._map._editTooltip;if(!u.options.poly.allowIntersection&&u.intersects()){L.extend(a._origLatLng,h),a.setLatLng(h);var m=u.options.color;u.setStyle({color:this.options.drawError.color}),p&&p.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){u.setStyle({color:m}),p&&p.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}a._middleLeft&&a._middleLeft.setLatLng(this._getMiddleLatLng(a._prev,a)),a._middleRight&&a._middleRight.setLatLng(this._getMiddleLatLng(a,a._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var y=this._poly.getLatLngs();this._poly._convertLatLngs(y,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(r){var a=L.Polygon&&this._poly instanceof L.Polygon?4:3,u=r.target;this._defaultShape().length<a||(this._removeMarker(u),this._updatePrevNext(u._prev,u._next),u._middleLeft&&this._markerGroup.removeLayer(u._middleLeft),u._middleRight&&this._markerGroup.removeLayer(u._middleRight),u._prev&&u._next?this._createMiddleMarker(u._prev,u._next):u._prev?u._next||(u._prev._middleRight=null):u._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(r){var a=r.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:a,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(r){var a=this._map.mouseEventToLayerPoint(r.originalEvent.touches[0]),u=this._map.layerPointToLatLng(a),h=r.target;L.extend(h._origLatLng,u),h._middleLeft&&h._middleLeft.setLatLng(this._getMiddleLatLng(h._prev,h)),h._middleRight&&h._middleRight.setLatLng(this._getMiddleLatLng(h,h._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(r,a){this._markerGroup.eachLayer(function(u){u._index>r&&(u._index+=a)})},_createMiddleMarker:function(r,a){var u,h,p,m=this._getMiddleLatLng(r,a),y=this._createMarker(m);y.setOpacity(.6),r._middleRight=a._middleLeft=y,h=function(){y.off("touchmove",h,this);var _=a._index;y._index=_,y.off("click",u,this).on("click",this._onMarkerClick,this),m.lat=y.getLatLng().lat,m.lng=y.getLatLng().lng,this._spliceLatLngs(_,0,m),this._markers.splice(_,0,y),y.setOpacity(1),this._updateIndexes(_,1),a._index++,this._updatePrevNext(r,y),this._updatePrevNext(y,a),this._poly.fire("editstart")},p=function(){y.off("dragstart",h,this),y.off("dragend",p,this),y.off("touchmove",h,this),this._createMiddleMarker(r,y),this._createMiddleMarker(y,a)},u=function(){h.call(this),p.call(this),this._fireEdit()},y.on("click",u,this).on("dragstart",h,this).on("dragend",p,this).on("touchmove",h,this),this._markerGroup.addLayer(y)},_updatePrevNext:function(r,a){r&&(r._next=a),a&&(a._prev=r)},_getMiddleLatLng:function(r,a){var u=this._poly._map,h=u.project(r.getLatLng()),p=u.project(a.getLatLng());return u.unproject(h._add(p)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(r,a){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=r,L.Util.setOptions(this,a)},addHooks:function(){var r=this._shape;this._shape._map&&(this._map=this._shape._map,r.setStyle(r.options.editing),r._map&&(this._map=r._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var r=this._shape;if(r.setStyle(r.options.original),r._map){this._unbindMarker(this._moveMarker);for(var a=0,u=this._resizeMarkers.length;a<u;a++)this._unbindMarker(this._resizeMarkers[a]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(r,a){var u=new L.Marker.Touch(r,{draggable:!0,icon:a,zIndexOffset:10});return this._bindMarker(u),this._markerGroup.addLayer(u),u},_bindMarker:function(r){r.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(r){r.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(r){r.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(r){var a=r.target,u=a.getLatLng();a===this._moveMarker?this._move(u):this._resize(u),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(r){r.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(r){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,r),typeof this._getCorners=="function"){var a=this._getCorners(),u=r.target,h=u._cornerIndex;u.setOpacity(0),this._oppositeCorner=a[(h+2)%4],this._toggleCornerMarkers(0,h)}this._shape.fire("editstart")},_onTouchMove:function(r){var a=this._map.mouseEventToLayerPoint(r.originalEvent.touches[0]),u=this._map.layerPointToLatLng(a);return r.target===this._moveMarker?this._move(u):this._resize(u),this._shape.redraw(),!1},_onTouchEnd:function(r){r.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var r=this._shape.getBounds(),a=r.getCenter();this._moveMarker=this._createMarker(a,this.options.moveIcon)},_createResizeMarker:function(){var r=this._getCorners();this._resizeMarkers=[];for(var a=0,u=r.length;a<u;a++)this._resizeMarkers.push(this._createMarker(r[a],this.options.resizeIcon)),this._resizeMarkers[a]._cornerIndex=a},_onMarkerDragStart:function(r){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,r);var a=this._getCorners(),u=r.target,h=u._cornerIndex;this._oppositeCorner=a[(h+2)%4],this._toggleCornerMarkers(0,h)},_onMarkerDragEnd:function(r){var a,u,h=r.target;h===this._moveMarker&&(a=this._shape.getBounds(),u=a.getCenter(),h.setLatLng(u)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,r)},_move:function(r){for(var a,u=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),h=this._shape.getBounds(),p=h.getCenter(),m=[],y=0,_=u.length;y<_;y++)a=[u[y].lat-p.lat,u[y].lng-p.lng],m.push([r.lat+a[0],r.lng+a[1]]);this._shape.setLatLngs(m),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(r){var a;this._shape.setBounds(L.latLngBounds(r,this._oppositeCorner)),a=this._shape.getBounds(),this._moveMarker.setLatLng(a.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var r=this._shape.getBounds();return[r.getNorthWest(),r.getNorthEast(),r.getSouthEast(),r.getSouthWest()]},_toggleCornerMarkers:function(r){for(var a=0,u=this._resizeMarkers.length;a<u;a++)this._resizeMarkers[a].setOpacity(r)},_repositionCornerMarkers:function(){for(var r=this._getCorners(),a=0,u=this._resizeMarkers.length;a<u;a++)this._resizeMarkers[a].setLatLng(r[a])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var r=this._shape.getLatLng();this._moveMarker=this._createMarker(r,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(r){if(this._resizeMarkers.length){var a=this._getResizeMarkerPoint(r);this._resizeMarkers[0].setLatLng(a)}this._shape.setLatLng(r),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var r=this._shape.getLatLng(),a=this._getResizeMarkerPoint(r);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(a,this.options.resizeIcon))},_getResizeMarkerPoint:function(r){var a=this._shape._radius*Math.cos(Math.PI/4),u=this._map.project(r);return this._map.unproject([u.x+a,u.y-a])},_resize:function(r){var a=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=a.distanceTo(r):radius=this._map.distance(a,r),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(r,a){var u={};if(r.touches!==void 0){if(!r.touches.length)return;u=r.touches[0]}else if(r.pointerType!=="touch"||(u=r,!this._filterClick(r)))return;var h=this._map.mouseEventToContainerPoint(u),p=this._map.mouseEventToLayerPoint(u),m=this._map.layerPointToLatLng(p);this._map.fire(a,{latlng:m,layerPoint:p,containerPoint:h,pageX:u.pageX,pageY:u.pageY,originalEvent:r})},_filterClick:function(r){var a=r.timeStamp||r.originalEvent.timeStamp,u=L.DomEvent._lastClick&&a-L.DomEvent._lastClick;return u&&u>100&&u<500||r.target._simulatedClick&&!r._simulated?(L.DomEvent.stop(r),!1):(L.DomEvent._lastClick=a,!0)},_onTouchStart:function(r){this._map._loaded&&this._touchEvent(r,"touchstart")},_onTouchEnd:function(r){this._map._loaded&&this._touchEvent(r,"touchend")},_onTouchCancel:function(r){if(this._map._loaded){var a="touchcancel";this._detectIE()&&(a="pointercancel"),this._touchEvent(r,a)}},_onTouchLeave:function(r){this._map._loaded&&this._touchEvent(r,"touchleave")},_onTouchMove:function(r){this._map._loaded&&this._touchEvent(r,"touchmove")},_detectIE:function(){var r=n.navigator.userAgent,a=r.indexOf("MSIE ");if(a>0)return parseInt(r.substring(a+5,r.indexOf(".",a)),10);if(r.indexOf("Trident/")>0){var u=r.indexOf("rv:");return parseInt(r.substring(u+3,r.indexOf(".",u)),10)}var h=r.indexOf("Edge/");return h>0&&parseInt(r.substring(h+5,r.indexOf(".",h)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var r=this._icon,a=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?a.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):a.concat(["touchcancel"]),L.DomUtil.addClass(r,"leaflet-clickable"),L.DomEvent.on(r,"click",this._onMouseClick,this),L.DomEvent.on(r,"keypress",this._onKeyPress,this);for(var u=0;u<a.length;u++)L.DomEvent.on(r,a[u],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var r=n.navigator.userAgent,a=r.indexOf("MSIE ");if(a>0)return parseInt(r.substring(a+5,r.indexOf(".",a)),10);if(r.indexOf("Trident/")>0){var u=r.indexOf("rv:");return parseInt(r.substring(u+3,r.indexOf(".",u)),10)}var h=r.indexOf("Edge/");return h>0&&parseInt(r.substring(h+5,r.indexOf(".",h)),10)}}),L.LatLngUtil={cloneLatLngs:function(r){for(var a=[],u=0,h=r.length;u<h;u++)Array.isArray(r[u])?a.push(L.LatLngUtil.cloneLatLngs(r[u])):a.push(this.cloneLatLng(r[u]));return a},cloneLatLng:function(r){return L.latLng(r.lat,r.lng)}},(function(){var r={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(a){var u,h,p=a.length,m=0,y=Math.PI/180;if(p>2){for(var _=0;_<p;_++)u=a[_],h=a[(_+1)%p],m+=(h.lng-u.lng)*y*(2+Math.sin(u.lat*y)+Math.sin(h.lat*y));m=6378137*m*6378137/2}return Math.abs(m)},formattedNumber:function(a,u){var h=parseFloat(a).toFixed(u),p=L.drawLocal.format&&L.drawLocal.format.numeric,m=p&&p.delimiters,y=m&&m.thousands,_=m&&m.decimal;if(y||_){var b=h.split(".");h=y?b[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+y):b[0],_=_||".",b.length>1&&(h=h+_+b[1])}return h},readableArea:function(a,u,y){var p,m,y=L.Util.extend({},r,y);return u?(m=["ha","m"],type=typeof u,type==="string"?m=[u]:type!=="boolean"&&(m=u),p=a>=1e6&&m.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*a,y.km)+" km":a>=1e4&&m.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*a,y.ha)+" ha":L.GeometryUtil.formattedNumber(a,y.m)+" m"):(a/=.836127,p=a>=3097600?L.GeometryUtil.formattedNumber(a/3097600,y.mi)+" mi":a>=4840?L.GeometryUtil.formattedNumber(a/4840,y.ac)+" acres":L.GeometryUtil.formattedNumber(a,y.yd)+" yd"),p},readableDistance:function(a,u,h,p,_){var y,_=L.Util.extend({},r,_);switch(u?typeof u=="string"?u:"metric":h?"feet":p?"nauticalMile":"yards"){case"metric":y=a>1e3?L.GeometryUtil.formattedNumber(a/1e3,_.km)+" km":L.GeometryUtil.formattedNumber(a,_.m)+" m";break;case"feet":a*=3.28083,y=L.GeometryUtil.formattedNumber(a,_.ft)+" ft";break;case"nauticalMile":a*=.53996,y=L.GeometryUtil.formattedNumber(a/1e3,_.nm)+" nm";break;default:a*=1.09361,y=a>1760?L.GeometryUtil.formattedNumber(a/1760,_.mi)+" miles":L.GeometryUtil.formattedNumber(a,_.yd)+" yd"}return y},isVersion07x:function(){var a=L.version.split(".");return parseInt(a[0],10)===0&&parseInt(a[1],10)===7}})})(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(r,a,u,h){return this._checkCounterclockwise(r,u,h)!==this._checkCounterclockwise(a,u,h)&&this._checkCounterclockwise(r,a,u)!==this._checkCounterclockwise(r,a,h)},_checkCounterclockwise:function(r,a,u){return(u.y-r.y)*(a.x-r.x)>(a.y-r.y)*(u.x-r.x)}}),L.Polyline.include({intersects:function(){var r,a,u,h=this._getProjectedPoints(),p=h?h.length:0;if(this._tooFewPointsForIntersection())return!1;for(r=p-1;r>=3;r--)if(a=h[r-1],u=h[r],this._lineSegmentsIntersectsRange(a,u,r-2))return!0;return!1},newLatLngIntersects:function(r,a){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(r),a)},newPointIntersects:function(r,a){var u=this._getProjectedPoints(),h=u?u.length:0,p=u?u[h-1]:null,m=h-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(p,r,m,a?1:0)},_tooFewPointsForIntersection:function(r){var a=this._getProjectedPoints(),u=a?a.length:0;return u+=r||0,!a||u<=3},_lineSegmentsIntersectsRange:function(r,a,u,h){var p,m,y=this._getProjectedPoints();h=h||0;for(var _=u;_>h;_--)if(p=y[_-1],m=y[_],L.LineUtil.segmentsIntersect(r,a,p,m))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var r=[],a=this._defaultShape(),u=0;u<a.length;u++)r.push(this._map.latLngToLayerPoint(a[u]));return r}}),L.Polygon.include({intersects:function(){var r,a,u,h,p=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(r=p.length,a=p[0],u=p[r-1],h=r-2,this._lineSegmentsIntersectsRange(u,a,h,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(r){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,r);var a;this._toolbars={},L.DrawToolbar&&this.options.draw&&(a=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=a,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(a=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=a,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(r){var a,u=L.DomUtil.create("div","leaflet-draw"),h=!1;for(var p in this._toolbars)this._toolbars.hasOwnProperty(p)&&(a=this._toolbars[p].addToolbar(r))&&(h||(L.DomUtil.hasClass(a,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(a.childNodes[0],"leaflet-draw-toolbar-top"),h=!0),u.appendChild(a));return u},onRemove:function(){for(var r in this._toolbars)this._toolbars.hasOwnProperty(r)&&this._toolbars[r].removeToolbar()},setDrawingOptions:function(r){for(var a in this._toolbars)this._toolbars[a]instanceof L.DrawToolbar&&this._toolbars[a].setOptions(r)},_toolbarEnabled:function(r){var a=r.target;for(var u in this._toolbars)this._toolbars[u]!==a&&this._toolbars[u].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(r){L.setOptions(this,r),this._modes={},this._actionButtons=[],this._activeMode=null;var a=L.version.split(".");parseInt(a[0],10)===1&&parseInt(a[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(r){var a,u=L.DomUtil.create("div","leaflet-draw-section"),h=0,p=this._toolbarClass||"",m=this.getModeHandlers(r);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=r,a=0;a<m.length;a++)m[a].enabled&&this._initModeHandler(m[a].handler,this._toolbarContainer,h++,p,m[a].title);if(h)return this._lastButtonIndex=--h,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),u.appendChild(this._toolbarContainer),u.appendChild(this._actionsContainer),u},removeToolbar:function(){for(var r in this._modes)this._modes.hasOwnProperty(r)&&(this._disposeButton(this._modes[r].button,this._modes[r].handler.enable,this._modes[r].handler),this._modes[r].handler.disable(),this._modes[r].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var a=0,u=this._actionButtons.length;a<u;a++)this._disposeButton(this._actionButtons[a].button,this._actionButtons[a].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(r,a,u,h,p){var m=r.type;this._modes[m]={},this._modes[m].handler=r,this._modes[m].button=this._createButton({type:m,title:p,className:h+"-"+m,container:a,callback:this._modes[m].handler.enable,context:this._modes[m].handler}),this._modes[m].buttonIndex=u,this._modes[m].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!n.MSStream},_createButton:function(r){var a=L.DomUtil.create("a",r.className||"",r.container),u=L.DomUtil.create("span","sr-only",r.container);a.href="#",a.appendChild(u),r.title&&(a.title=r.title,u.innerHTML=r.title),r.text&&(a.innerHTML=r.text,u.innerHTML=r.text);var h=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(a,"click",L.DomEvent.stopPropagation).on(a,"mousedown",L.DomEvent.stopPropagation).on(a,"dblclick",L.DomEvent.stopPropagation).on(a,"touchstart",L.DomEvent.stopPropagation).on(a,"click",L.DomEvent.preventDefault).on(a,h,r.callback,r.context),a},_disposeButton:function(r,a){var u=this._detectIOS()?"touchstart":"click";L.DomEvent.off(r,"click",L.DomEvent.stopPropagation).off(r,"mousedown",L.DomEvent.stopPropagation).off(r,"dblclick",L.DomEvent.stopPropagation).off(r,"touchstart",L.DomEvent.stopPropagation).off(r,"click",L.DomEvent.preventDefault).off(r,u,a)},_handlerActivated:function(r){this.disable(),this._activeMode=this._modes[r.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(r){var a,u,h,p,m=this._actionsContainer,y=this.getActions(r),_=y.length;for(u=0,h=this._actionButtons.length;u<h;u++)this._disposeButton(this._actionButtons[u].button,this._actionButtons[u].callback);for(this._actionButtons=[];m.firstChild;)m.removeChild(m.firstChild);for(var b=0;b<_;b++)"enabled"in y[b]&&!y[b].enabled||(a=L.DomUtil.create("li","",m),p=this._createButton({title:y[b].title,text:y[b].text,container:a,callback:y[b].callback,context:y[b].context}),this._actionButtons.push({button:p,callback:y[b].callback}))},_showActionsToolbar:function(){var r=this._activeMode.buttonIndex,a=this._lastButtonIndex,u=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=u+"px",r===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),r===a&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(r){this._map=r,this._popupPane=r._panes.popupPane,this._visible=!1,this._container=r.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(r){return this._container?(r.subtext=r.subtext||"",r.subtext.length!==0||this._singleLineLabel?r.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(r.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+r.subtext+"</span><br />":"")+"<span>"+r.text+"</span>",r.text||r.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(r){var a=this._map.latLngToLayerPoint(r),u=this._container;return this._container&&(this._visible&&(u.style.visibility="inherit"),L.DomUtil.setPosition(u,a)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(r){for(var a in this.options)this.options.hasOwnProperty(a)&&r[a]&&(r[a]=L.extend({},this.options[a],r[a]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,r)},getModeHandlers:function(r){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(r,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(r,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(r,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(r,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(r,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(r,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(r){return[{enabled:r.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:r.completeShape,context:r},{enabled:r.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:r.deleteLastVertex,context:r},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(r){L.setOptions(this,r);for(var a in this._modes)this._modes.hasOwnProperty(a)&&r.hasOwnProperty(a)&&this._modes[a].handler.setOptions(r[a])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(r){r.edit&&(r.edit.selectedPathOptions===void 0&&(r.edit.selectedPathOptions=this.options.edit.selectedPathOptions),r.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,r.edit.selectedPathOptions)),r.remove&&(r.remove=L.extend({},this.options.remove,r.remove)),r.poly&&(r.poly=L.extend({},this.options.poly,r.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,r),this._selectedFeatureCount=0},getModeHandlers:function(r){var a=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(r,{featureGroup:a,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(r,{featureGroup:a}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(r){var a=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return r.removeAllLayers&&a.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),a},addToolbar:function(r){var a=L.Toolbar.prototype.addToolbar.call(this,r);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),a},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var r,a=this.options.featureGroup,u=a.getLayers().length!==0;this.options.edit&&(r=this._modes[L.EditToolbar.Edit.TYPE].button,u?L.DomUtil.removeClass(r,"leaflet-disabled"):L.DomUtil.addClass(r,"leaflet-disabled"),r.setAttribute("title",u?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(r=this._modes[L.EditToolbar.Delete.TYPE].button,u?L.DomUtil.removeClass(r,"leaflet-disabled"):L.DomUtil.addClass(r,"leaflet-disabled"),r.setAttribute("title",u?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(r,a){if(L.Handler.prototype.initialize.call(this,r),L.setOptions(this,a),this._featureGroup=a.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var u=L.version.split(".");parseInt(u[0],10)===1&&parseInt(u[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(r.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),r._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(r){this._revertLayer(r)},this)},save:function(){var r=new L.LayerGroup;this._featureGroup.eachLayer(function(a){a.edited&&(r.addLayer(a),a.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:r})},_backupLayer:function(r){var a=L.Util.stamp(r);this._uneditedLayerProps[a]||(r instanceof L.Polyline||r instanceof L.Polygon||r instanceof L.Rectangle?this._uneditedLayerProps[a]={latlngs:L.LatLngUtil.cloneLatLngs(r.getLatLngs())}:r instanceof L.Circle?this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(r.getLatLng()),radius:r.getRadius()}:(r instanceof L.Marker||r instanceof L.CircleMarker)&&(this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(r.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(r){var a=L.Util.stamp(r);r.edited=!1,this._uneditedLayerProps.hasOwnProperty(a)&&(r instanceof L.Polyline||r instanceof L.Polygon||r instanceof L.Rectangle?r.setLatLngs(this._uneditedLayerProps[a].latlngs):r instanceof L.Circle?(r.setLatLng(this._uneditedLayerProps[a].latlng),r.setRadius(this._uneditedLayerProps[a].radius)):(r instanceof L.Marker||r instanceof L.CircleMarker)&&r.setLatLng(this._uneditedLayerProps[a].latlng),r.fire("revert-edited",{layer:r}))},_enableLayerEdit:function(r){var a,u,h=r.layer||r.target||r;this._backupLayer(h),this.options.poly&&(u=L.Util.extend({},this.options.poly),h.options.poly=u),this.options.selectedPathOptions&&(a=L.Util.extend({},this.options.selectedPathOptions),a.maintainColor&&(a.color=h.options.color,a.fillColor=h.options.fillColor),h.options.original=L.extend({},h.options),h.options.editing=a),h instanceof L.Marker?(h.editing&&h.editing.enable(),h.dragging.enable(),h.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):h.editing.enable()},_disableLayerEdit:function(r){var a=r.layer||r.target||r;a.edited=!1,a.editing&&a.editing.disable(),delete a.options.editing,delete a.options.original,this._selectedPathOptions&&(a instanceof L.Marker?this._toggleMarkerHighlight(a):(a.setStyle(a.options.previousOptions),delete a.options.previousOptions)),a instanceof L.Marker?(a.dragging.disable(),a.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):a.editing.disable()},_onMouseMove:function(r){this._tooltip.updatePosition(r.latlng)},_onMarkerDragEnd:function(r){var a=r.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_onTouchMove:function(r){var a=r.originalEvent.changedTouches[0],u=this._map.mouseEventToLayerPoint(a),h=this._map.layerPointToLatLng(u);r.target.setLatLng(h)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(r,a){if(L.Handler.prototype.initialize.call(this,r),L.Util.setOptions(this,a),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var u=L.version.split(".");parseInt(u[0],10)===1&&parseInt(u[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(r.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(r){this._deletableLayers.addLayer(r),r.fire("revert-deleted",{layer:r})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(r){this._removeLayer({layer:r})},this),this.save()},_enableLayerDelete:function(r){(r.layer||r.target||r).on("click",this._removeLayer,this)},_disableLayerDelete:function(r){var a=r.layer||r.target||r;a.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(a)},_removeLayer:function(r){var a=r.layer||r.target||r;this._deletableLayers.removeLayer(a),this._deletedLayers.addLayer(a),a.fire("deleted")},_onMouseMove:function(r){this._tooltip.updatePosition(r.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);var Vg,bx;function qL(){if(bx)return Vg;bx=1;const n=1e-6;return Vg={DP_TOL:n,EQ_0:function(t){return t<n&&t>-n},EQ:function(t,e){return t-e<n&&t-e>-n},GT:(t,e)=>t-e>n,GE:(t,e)=>t-e>-n,LT:(t,e)=>t-e<-n,LE:(t,e)=>t-e<n},Vg}var jg,wx;function GL(){return wx||(wx=1,jg={ILLEGAL_PARAMETERS:new ReferenceError("Illegal Parameters"),ZERO_DIVISION:new Error("Zero division")}),jg}var qg,xx;function ZL(){return xx||(xx=1,qg=function(n){n.Matrix=class Vc{constructor(e=1,s=0,r=0,a=1,u=0,h=0){this.a=e,this.b=s,this.c=r,this.d=a,this.tx=u,this.ty=h}clone(){return new Vc(this.a,this.b,this.c,this.d,this.tx,this.ty)}transform(e){return[e[0]*this.a+e[1]*this.c+this.tx,e[0]*this.b+e[1]*this.d+this.ty]}multiply(e){return new Vc(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.tx+this.c*e.ty+this.tx,this.b*e.tx+this.d*e.ty+this.ty)}translate(...e){let s,r;if(e.length==1&&e[0]instanceof n.Vector)s=e[0].x,r=e[0].y;else if(e.length==2&&typeof e[0]=="number"&&typeof e[1]=="number")s=e[0],r=e[1];else throw n.Errors.ILLEGAL_PARAMETERS;return this.multiply(new Vc(1,0,0,1,s,r))}rotate(e){let s=Math.cos(e),r=Math.sin(e);return this.multiply(new Vc(s,r,-r,s,0,0))}scale(e,s){return this.multiply(new Vc(e,0,0,s,0,0))}equalTo(e){return!(!n.Utils.EQ(this.tx,e.tx)||!n.Utils.EQ(this.ty,e.ty)||!n.Utils.EQ(this.a,e.a)||!n.Utils.EQ(this.b,e.b)||!n.Utils.EQ(this.c,e.c)||!n.Utils.EQ(this.d,e.d))}},n.matrix=(...t)=>new n.Matrix(...t)}),qg}var Gg,Sx;function WL(){return Sx||(Sx=1,Gg=class V0{constructor(e,s){this.low=e,this.high=s}get max(){return this.high}interval(e,s){return new V0(e,s)}clone(){return new V0(this.low,this.high)}less_than(e){return this.low<e.low||this.low==e.low&&this.high<e.high}equal_to(e){return this.low==e.low&&this.high==e.high}intersect(e){return!this.not_intersect(e)}not_intersect(e){return this.high<e.low||e.high<this.low}output(){return[this.low,this.high]}maximal_val(e,s){return Math.max(e,s)}val_less_than(e,s){return e<s}}),Gg}var Zg,Tx;function I2(){return Tx||(Tx=1,Zg={RB_TREE_COLOR_RED:0,RB_TREE_COLOR_BLACK:1}),Zg}var Wg,Ax;function FL(){if(Ax)return Wg;Ax=1;let n=WL(),{RB_TREE_COLOR_RED:t,RB_TREE_COLOR_BLACK:e}=I2();return Wg=class{constructor(a=void 0,u=void 0,h=null,p=null,m=null,y=e){this.left=h,this.right=p,this.parent=m,this.color=y,this.item={key:a,value:u},a&&a instanceof Array&&a.length==2&&!Number.isNaN(a[0])&&!Number.isNaN(a[1])&&(this.item.key=new n(Math.min(a[0],a[1]),Math.max(a[0],a[1]))),this.max=this.item.key?this.item.key.max:void 0}isNil(){return this.item.key===void 0&&this.item.value===void 0&&this.left===null&&this.right===null&&this.color===e}less_than(a){return this.item.key.less_than(a.item.key)}equal_to(a){let u=!0;return this.item.value&&a.item.value&&(u=this.item.value.equal_to?this.item.value.equal_to(a.item.value):this.item.value==a.item.value),this.item.key.equal_to(a.item.key)&&u}intersect(a){return this.item.key.intersect(a.item.key)}copy_data(a){this.item.key=a.item.key.clone(),this.item.value=a.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){let a=this.item.key.maximal_val;this.max=a(this.max,this.right.max)}if(this.left&&this.left.max){let a=this.item.key.maximal_val;this.max=a(this.max,this.left.max)}}not_intersect_left_subtree(a){let u=this.item.key.val_less_than,h=this.left.max.high?this.left.max.high:this.left.max;return u(h,a.item.key.low)}not_intersect_right_subtree(a){let u=this.item.key.val_less_than,h=this.right.max.low?this.right.max.low:this.right.item.key.low;return u(a.item.key.high,h)}},Wg}var Fg,Ex;function P2(){if(Ex)return Fg;Ex=1;let n=FL(),{RB_TREE_COLOR_RED:t,RB_TREE_COLOR_BLACK:e}=I2(),s=new n;return Fg=class N2{constructor(){this.root=null}get size(){let u=0;return this.tree_walk(this.root,()=>u++),u}get keys(){let u=[];return this.tree_walk(this.root,h=>u.push(h.item.key.output())),u}get values(){let u=[];return this.tree_walk(this.root,h=>u.push(h.item.value)),u}get items(){let u=[];return this.tree_walk(this.root,h=>u.push({key:h.item.key.output(),value:h.item.value})),u}get isEmpty(){return this.root==null||this.root==s}insert(u,h=u){if(u===void 0)return;let p=new n(u,h,s,s,null,t);return this.tree_insert(p),this.recalc_max(p),p}exist(u,h){let p=new n(u,h);return!!this.tree_search(this.root,p)}remove(u,h){let p=new n(u,h),m=this.tree_search(this.root,p);return m&&this.tree_delete(m),m}search(u){let h=new n(u),p=[];this.tree_search_interval(this.root,h,p);let m=[];return p.forEach(y=>{y.item.value?m.push(y.item.value):m.push(y.item.key.output())},[]),m}forEach(u){this.tree_walk(this.root,h=>u(h.item.key,h.item.value))}map(u){const h=new N2;return this.tree_walk(this.root,p=>h.insert(p.item.key,u(p.item.value,p.item.key))),h}recalc_max(u){let h=u;for(;h.parent!=null;)h.parent.update_max(),h=h.parent}tree_insert(u){let h=this.root,p=null;if(this.root==null||this.root==s)this.root=u;else{for(;h!=s;)p=h,u.less_than(h)?h=h.left:h=h.right;u.parent=p,u.less_than(p)?p.left=u:p.right=u}this.insert_fixup(u)}insert_fixup(u){let h,p;for(h=u;h!=this.root&&h.parent.color==t;)h.parent==h.parent.parent.left?(p=h.parent.parent.right,p.color==t?(h.parent.color=e,p.color=e,h.parent.parent.color=t,h=h.parent.parent):(h==h.parent.right&&(h=h.parent,this.rotate_left(h)),h.parent.color=e,h.parent.parent.color=t,this.rotate_right(h.parent.parent))):(p=h.parent.parent.left,p.color==t?(h.parent.color=e,p.color=e,h.parent.parent.color=t,h=h.parent.parent):(h==h.parent.left&&(h=h.parent,this.rotate_right(h)),h.parent.color=e,h.parent.parent.color=t,this.rotate_left(h.parent.parent)));this.root.color=e}tree_delete(u){let h,p;u.left==s||u.right==s?h=u:h=this.tree_successor(u),h.left!=s?p=h.left:p=h.right,p.parent=h.parent,h==this.root?this.root=p:(h==h.parent.left?h.parent.left=p:h.parent.right=p,h.parent.update_max()),this.recalc_max(p),h!=u&&(u.copy_data(h),u.update_max(),this.recalc_max(u)),h.color==e&&this.delete_fixup(p)}delete_fixup(u){let h=u,p;for(;h!=this.root&&h.parent!=null&&h.color==e;)h==h.parent.left?(p=h.parent.right,p.color==t&&(p.color=e,h.parent.color=t,this.rotate_left(h.parent),p=h.parent.right),p.left.color==e&&p.right.color==e?(p.color=t,h=h.parent):(p.right.color==e&&(p.color=t,p.left.color=e,this.rotate_right(p),p=h.parent.right),p.color=h.parent.color,h.parent.color=e,p.right.color=e,this.rotate_left(h.parent),h=this.root)):(p=h.parent.left,p.color==t&&(p.color=e,h.parent.color=t,this.rotate_right(h.parent),p=h.parent.left),p.left.color==e&&p.right.color==e?(p.color=t,h=h.parent):(p.left.color==e&&(p.color=t,p.right.color=e,this.rotate_left(p),p=h.parent.left),p.color=h.parent.color,h.parent.color=e,p.left.color=e,this.rotate_right(h.parent),h=this.root));h.color=e}tree_search(u,h){if(!(u==null||u==s))return h.equal_to(u)?u:h.less_than(u)?this.tree_search(u.left,h):this.tree_search(u.right,h)}tree_search_interval(u,h,p){u!=null&&u!=s&&(u.left!=s&&!u.not_intersect_left_subtree(h)&&this.tree_search_interval(u.left,h,p),u.intersect(h)&&p.push(u),u.right!=s&&!u.not_intersect_right_subtree(h)&&this.tree_search_interval(u.right,h,p))}local_minimum(u){let h=u;for(;h.left!=null&&h.left!=s;)h=h.left;return h}local_maximum(u){let h=u;for(;h.right!=null&&h.right!=s;)h=h.right;return h}tree_successor(u){let h,p,m;if(u.right!=s)h=this.local_minimum(u.right);else{for(p=u,m=u.parent;m!=null&&m.right==p;)p=m,m=m.parent;h=m}return h}rotate_left(u){let h=u.right;u.right=h.left,h.left!=s&&(h.left.parent=u),h.parent=u.parent,u==this.root?this.root=h:u==u.parent.left?u.parent.left=h:u.parent.right=h,h.left=u,u.parent=h,u!=null&&u!=s&&u.update_max(),h=u.parent,h!=null&&h!=s&&h.update_max()}rotate_right(u){let h=u.left;u.left=h.right,h.right!=s&&(h.right.parent=u),h.parent=u.parent,u==this.root?this.root=h:u==u.parent.left?u.parent.left=h:u.parent.right=h,h.right=u,u.parent=h,u!=null&&u!=s&&u.update_max(),h=u.parent,h!=null&&h!=s&&h.update_max()}tree_walk(u,h){u!=null&&u!=s&&(this.tree_walk(u.left,h),h(u),this.tree_walk(u.right,h))}testRedBlackProperty(){let u=!0;return this.tree_walk(this.root,function(h){h.color==t&&(h.left.color==e&&h.right.color==e||(u=!1))}),u}testBlackHeightProperty(u){let h=0,p=0,m=0;if(u.color==e&&h++,u.left!=s?p=this.testBlackHeightProperty(u.left):p=1,u.right!=s?m=this.testBlackHeightProperty(u.right):m=1,p!=m)throw new Error("Red-black height property violated");return h+=p,h}},Fg}var Yg,Cx;function YL(){if(Cx)return Yg;Cx=1;let n=P2();return Yg=function(t){t.PlanarSet=class extends Set{constructor(){super(),this.index=new n}add(s){let r=this.size;return super.add(s),this.size>r&&this.index.insert(s.box,s),this}delete(s){let r=super.delete(s);return r&&this.index.remove(s.box,s),r}clear(){super.clear(),this.index=new n}search(s){return this.index.search(s)}hit(s){let r=new t.Box(s.x-1,s.y-1,s.x+1,s.y+1);return this.index.search(r).filter(u=>s.on(u))}svg(){return[...this].reduce((r,a)=>r+a.svg(),"")}}},Yg}var Xg,Lx;function XL(){return Lx||(Lx=1,Xg=function(n){n.Point=class z2{constructor(...e){if(this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let s=e[0];if(typeof s[0]=="number"&&typeof s[1]=="number"){this.x=s[0],this.y=s[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="point"){let{x:s,y:r}=e[0];this.x=s,this.y=r;return}if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){this.x=e[0],this.y=e[1];return}throw n.Errors.ILLEGAL_PARAMETERS}}get box(){return new n.Box(this.x,this.y,this.x,this.y)}clone(){return new n.Point(this.x,this.y)}get vertices(){return[this.clone()]}equalTo(e){return n.Utils.EQ(this.x,e.x)&&n.Utils.EQ(this.y,e.y)}lessThan(e){return!!(n.Utils.LT(this.y,e.y)||n.Utils.EQ(this.y,e.y)&&n.Utils.LT(this.x,e.x))}rotate(e,s={x:0,y:0}){var r=s.x+(this.x-s.x)*Math.cos(e)-(this.y-s.y)*Math.sin(e),a=s.y+(this.x-s.x)*Math.sin(e)+(this.y-s.y)*Math.cos(e);return new n.Point(r,a)}translate(...e){if(e.length==1&&e[0]instanceof n.Vector)return new n.Point(this.x+e[0].x,this.y+e[0].y);if(e.length==2&&typeof e[0]=="number"&&typeof e[1]=="number")return new n.Point(this.x+e[0],this.y+e[1]);throw n.Errors.ILLEGAL_PARAMETERS}transform(e){return new n.Point(e.transform([this.x,this.y]))}projectionOn(e){if(this.equalTo(e.pt))return this.clone();let s=new n.Vector(this,e.pt);if(n.Utils.EQ_0(s.cross(e.norm)))return e.pt.clone();let r=s.dot(e.norm),a=e.norm.multiply(r);return this.translate(a)}leftTo(e){let s=new n.Vector(e.pt,this);return n.Utils.GT(s.dot(e.norm),0)}distanceTo(e){let{Distance:s}=n;if(e instanceof z2){let r=e.x-this.x,a=e.y-this.y;return[Math.sqrt(r*r+a*a),new n.Segment(this,e)]}if(e instanceof n.Line)return s.point2line(this,e);if(e instanceof n.Circle)return s.point2circle(this,e);if(e instanceof n.Segment)return s.point2segment(this,e);if(e instanceof n.Arc)return s.point2arc(this,e);if(e instanceof n.Polygon)return s.point2polygon(this,e);if(e instanceof n.PlanarSet)return s.shape2planarSet(this,e)}on(e){if(e instanceof n.Point)return this.equalTo(e);if(e instanceof n.Line)return e.contains(this);if(e instanceof n.Circle)return e.contains(this);if(e instanceof n.Segment)return e.contains(this);if(e instanceof n.Arc)return e.contains(this);if(e instanceof n.Polygon)return e.contains(this)}svg(e={}){let{r:s,stroke:r,strokeWidth:a,fill:u,id:h,className:p}=e,m=h&&h.length>0?`id="${h}"`:"",y=p&&p.length>0?`class="${p}"`:"";return`
<circle cx="${this.x}" cy="${this.y}" r="${s||3}" stroke="${r||"black"}" stroke-width="${a||1}" fill="${u||"red"}" ${m} ${y} />`}toJSON(){return Object.assign({},this,{name:"point"})}},n.point=(...t)=>new n.Point(...t)}),Xg}var Qg,Mx;function QL(){return Mx||(Mx=1,Qg=function(n){n.Vector=class lp{constructor(...e){if(this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let s=e[0];if(typeof s[0]=="number"&&typeof s[1]=="number"){this.x=s[0],this.y=s[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="vector"){let{x:s,y:r}=e[0];this.x=s,this.y=r;return}if(e.length===2){let s=e[0],r=e[1];if(typeof s=="number"&&typeof r=="number"){this.x=s,this.y=r;return}if(s instanceof n.Point&&r instanceof n.Point){this.x=r.x-s.x,this.y=r.y-s.y;return}}throw n.Errors.ILLEGAL_PARAMETERS}}clone(){return new lp(this.x,this.y)}get slope(){let e=Math.atan2(this.y,this.x);return e<0&&(e=2*Math.PI+e),e}get length(){return Math.sqrt(this.dot(this))}equalTo(e){return n.Utils.EQ(this.x,e.x)&&n.Utils.EQ(this.y,e.y)}multiply(e){return new lp(e*this.x,e*this.y)}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}normalize(){if(!n.Utils.EQ_0(this.length))return new lp(this.x/this.length,this.y/this.length);throw n.Errors.ZERO_DIVISION}rotate(e){let r=new n.Point(this.x,this.y).rotate(e);return new n.Vector(r.x,r.y)}rotate90CCW(){return new n.Vector(-this.y,this.x)}rotate90CW(){return new n.Vector(this.y,-this.x)}invert(){return new n.Vector(-this.x,-this.y)}add(e){return new n.Vector(this.x+e.x,this.y+e.y)}subtract(e){return new n.Vector(this.x-e.x,this.y-e.y)}angleTo(e){let s=this.normalize(),r=e.normalize(),a=Math.atan2(s.cross(r),s.dot(r));return a<0&&(a+=2*Math.PI),a}projectionOn(e){let s=e.normalize(),r=this.dot(s);return s.multiply(r)}toJSON(){return Object.assign({},this,{name:"vector"})}},n.vector=(...t)=>new n.Vector(...t)}),Qg}var $g,kx;function $L(){return kx||(kx=1,$g=function(n){n.Line=class Tl{constructor(...e){if(this.pt=new n.Point,this.norm=new n.Vector(0,1),e.length!=0){if(e.length==1&&e[0]instanceof Object&&e[0].name==="line"){let{pt:s,norm:r}=e[0];this.pt=new n.Point(s),this.norm=new n.Vector(r);return}if(e.length==2){let s=e[0],r=e[1];if(s instanceof n.Point&&r instanceof n.Point){this.pt=s,this.norm=Tl.points2norm(s,r);return}if(s instanceof n.Point&&r instanceof n.Vector){if(n.Utils.EQ_0(r.x)&&n.Utils.EQ_0(r.y))throw n.Errors.ILLEGAL_PARAMETERS;this.pt=s.clone(),this.norm=r.clone(),this.norm=this.norm.normalize();return}if(s instanceof n.Vector&&r instanceof n.Point){if(n.Utils.EQ_0(s.x)&&n.Utils.EQ_0(s.y))throw n.Errors.ILLEGAL_PARAMETERS;this.pt=r.clone(),this.norm=s.clone(),this.norm=this.norm.normalize();return}}throw n.Errors.ILLEGAL_PARAMETERS}}clone(){return new n.Line(this.pt,this.norm)}get slope(){return new n.Vector(this.norm.y,-this.norm.x).slope}get standard(){let e=this.norm.x,s=this.norm.y,r=this.norm.dot(this.pt);return[e,s,r]}parallelTo(e){return n.Utils.EQ_0(this.norm.cross(e.norm))}incidentTo(e){return this.parallelTo(e)&&this.pt.on(e)}contains(e){if(this.pt.equalTo(e))return!0;let s=new n.Vector(this.pt,e);return n.Utils.EQ_0(this.norm.dot(s))}intersect(e){if(e instanceof n.Point)return this.contains(e)?[e]:[];if(e instanceof n.Line)return Tl.intersectLine2Line(this,e);if(e instanceof n.Circle)return Tl.intersectLine2Circle(this,e);if(e instanceof n.Segment)return e.intersect(this);if(e instanceof n.Arc)return Tl.intersectLine2Arc(this,e);if(e instanceof n.Polygon)return n.Polygon.intersectLine2Polygon(this,e)}distanceTo(e){let{Distance:s}=n;if(e instanceof n.Point){let[r,a]=s.point2line(e,this);return a=a.reverse(),[r,a]}if(e instanceof n.Circle){let[r,a]=s.circle2line(e,this);return a=a.reverse(),[r,a]}if(e instanceof n.Segment){let[r,a]=s.segment2line(e,this);return[r,a.reverse()]}if(e instanceof n.Arc){let[r,a]=s.arc2line(e,this);return[r,a.reverse()]}if(e instanceof n.Polygon){let[r,a]=s.shape2polygon(this,e);return[r,a]}}svg(e,s={}){let r=Tl.intersectLine2Box(this,e);if(r.length===0)return"";let a=r[0],u=r.length==2?r[1]:r.find(p=>!p.equalTo(a));return u===void 0&&(u=a),new n.Segment(a,u).svg(s)}toJSON(){return Object.assign({},this,{name:"line"})}static points2norm(e,s){if(e.equalTo(s))throw n.Errors.ILLEGAL_PARAMETERS;return new n.Vector(e,s).normalize().rotate90CCW()}static intersectLine2Line(e,s){let r=[],[a,u,h]=e.standard,[p,m,y]=s.standard,_=a*m-u*p,b=h*m-u*y,S=a*y-h*p;if(!n.Utils.EQ_0(_)){let x=new n.Point(b/_,S/_);r.push(x)}return r}static intersectLine2Circle(e,s){let r=[],a=s.pc.projectionOn(e),u=s.pc.distanceTo(a)[0];if(n.Utils.EQ(u,s.r))r.push(a);else if(n.Utils.LT(u,s.r)){let h=Math.sqrt(s.r*s.r-u*u),p,m;p=e.norm.rotate90CCW().multiply(h),m=a.translate(p),r.push(m),p=e.norm.rotate90CW().multiply(h),m=a.translate(p),r.push(m)}return r}static intersectLine2Box(e,s){let r=[new n.Point(s.xmin,s.ymin),new n.Point(s.xmax,s.ymin),new n.Point(s.xmax,s.ymax),new n.Point(s.xmin,s.ymax)],a=[new n.Segment(r[0],r[1]),new n.Segment(r[1],r[2]),new n.Segment(r[2],r[3]),new n.Segment(r[3],r[0])],u=[];for(let h of a){let p=h.intersect(e);for(let m of p)u.push(m)}return u}static intersectLine2Arc(e,s){let r=[];if(Tl.intersectLine2Box(e,s.box).length==0)return r;let a=new n.Circle(s.pc,s.r),u=e.intersect(a);for(let h of u)h.on(s)&&r.push(h);return r}},n.line=(...t)=>new n.Line(...t)}),$g}var Kg,Ox;function KL(){return Ox||(Ox=1,Kg=function(n){let{Arc:t,vector:e}=n;n.Circle=class U2{constructor(...r){if(this.pc=new n.Point,this.r=1,r.length==1&&r[0]instanceof Object&&r[0].name==="circle"){let{pc:a,r:u}=r[0];this.pc=new n.Point(a),this.r=u;return}else{let[a,u]=[...r];a&&a instanceof n.Point&&(this.pc=a.clone()),u!==void 0&&(this.r=u);return}}clone(){return new n.Circle(this.pc.clone(),this.r)}get center(){return this.pc}get box(){return new n.Box(this.pc.x-this.r,this.pc.y-this.r,this.pc.x+this.r,this.pc.y+this.r)}contains(r){return n.Utils.LE(r.distanceTo(this.center)[0],this.r)}toArc(r=!0){return new n.Arc(this.center,this.r,Math.PI,-Math.PI,r)}intersect(r){if(r instanceof n.Point)return this.contains(r)?[r]:[];if(r instanceof n.Line)return r.intersect(this);if(r instanceof n.Segment)return r.intersect(this);if(r instanceof n.Circle)return U2.intersectCirle2Circle(this,r);if(r instanceof n.Arc)return r.intersect(this);if(r instanceof n.Polygon)return n.Polygon.intersectShape2Polygon(this,r)}distanceTo(r){let{Distance:a}=n,{point2circle:u,circle2circle:h,circle2line:p,segment2circle:m,arc2circle:y}=a;if(r instanceof n.Point){let[_,b]=u(r,this);return b=b.reverse(),[_,b]}if(r instanceof n.Circle){let[_,b]=h(this,r);return[_,b]}if(r instanceof n.Line){let[_,b]=p(this,r);return[_,b]}if(r instanceof n.Segment){let[_,b]=m(r,this);return b=b.reverse(),[_,b]}if(r instanceof n.Arc){let[_,b]=y(r,this);return b=b.reverse(),[_,b]}if(r instanceof n.Polygon){let[_,b]=a.shape2polygon(this,r);return[_,b]}if(r instanceof n.PlanarSet){let[_,b]=a.shape2planarSet(this,r);return[_,b]}}static intersectCirle2Circle(r,a){let u=[];if(r.box.not_intersect(a.box))return u;let h=new n.Vector(r.pc,a.pc),p=r.r,m=a.r;if(n.Utils.EQ_0(p)||n.Utils.EQ_0(m))return u;if(n.Utils.EQ_0(h.x)&&n.Utils.EQ_0(h.y)&&n.Utils.EQ(p,m))return u.push(r.pc.translate(-p,0)),u;let y=r.pc.distanceTo(a.pc)[0];if(n.Utils.GT(y,p+m)||n.Utils.LT(y,Math.abs(p-m)))return u;h.x/=y,h.y/=y;let _;if(n.Utils.EQ(y,p+m)||n.Utils.EQ(y,Math.abs(p-m)))return _=r.pc.translate(p*h.x,p*h.y),u.push(_),u;let b=p*p/(2*y)-m*m/(2*y)+y/2,S=r.pc.translate(b*h.x,b*h.y),x=Math.sqrt(p*p-b*b);return _=S.translate(h.rotate90CCW().multiply(x)),u.push(_),_=S.translate(h.rotate90CW().multiply(x)),u.push(_),u}svg(r={}){let{stroke:a,strokeWidth:u,fill:h,fillOpacity:p,id:m,className:y}=r,_=m&&m.length>0?`id="${m}"`:"",b=y&&y.length>0?`class="${y}"`:"";return`
<circle cx="${this.pc.x}" cy="${this.pc.y}" r="${this.r}" stroke="${a||"black"}" stroke-width="${u||1}" fill="${h||"none"}" fill-opacity="${p||1}" ${_} ${b} />`}toJSON(){return Object.assign({},this,{name:"circle"})}},n.circle=(...s)=>new n.Circle(...s)}),Kg}var Jg,Dx;function JL(){return Dx||(Dx=1,Jg=function(n){n.Segment=class Ta{constructor(...e){if(this.ps=new n.Point,this.pe=new n.Point,e.length!=0){if(e.length==1&&e[0]instanceof Array&&e[0].length==4){let s=e[0];this.ps=new n.Point(s[0],s[1]),this.pe=new n.Point(s[2],s[3]);return}if(e.length==1&&e[0]instanceof Object&&e[0].name==="segment"){let{ps:s,pe:r}=e[0];this.ps=new n.Point(s.x,s.y),this.pe=new n.Point(r.x,r.y);return}if(e.length==2&&e[0]instanceof n.Point&&e[1]instanceof n.Point){this.ps=e[0].clone(),this.pe=e[1].clone();return}if(e.length==4){this.ps=new n.Point(e[0],e[1]),this.pe=new n.Point(e[2],e[3]);return}throw n.Errors.ILLEGAL_PARAMETERS}}clone(){return new n.Segment(this.start,this.end)}get start(){return this.ps}get end(){return this.pe}get vertices(){return[this.ps.clone(),this.pe.clone()]}get length(){return this.start.distanceTo(this.end)[0]}get slope(){return new n.Vector(this.start,this.end).slope}get box(){return new n.Box(Math.min(this.start.x,this.end.x),Math.min(this.start.y,this.end.y),Math.max(this.start.x,this.end.x),Math.max(this.start.y,this.end.y))}equalTo(e){return this.ps.equalTo(e.ps)&&this.pe.equalTo(e.pe)}contains(e){return n.Utils.EQ_0(this.distanceToPoint(e))}intersect(e){if(e instanceof n.Point)return this.contains(e)?[e]:[];if(e instanceof n.Line)return Ta.intersectSegment2Line(this,e);if(e instanceof n.Segment)return Ta.intersectSegment2Segment(this,e);if(e instanceof n.Circle)return Ta.intersectSegment2Circle(this,e);if(e instanceof n.Arc)return Ta.intersectSegment2Arc(this,e);if(e instanceof n.Polygon)return n.Polygon.intersectShape2Polygon(this,e)}distanceTo(e){let{Distance:s}=n;if(e instanceof n.Point){let[r,a]=s.point2segment(e,this);return a=a.reverse(),[r,a]}if(e instanceof n.Circle){let[r,a]=s.segment2circle(this,e);return[r,a]}if(e instanceof n.Line){let[r,a]=s.segment2line(this,e);return[r,a]}if(e instanceof n.Segment){let[r,a]=s.segment2segment(this,e);return[r,a]}if(e instanceof n.Arc){let[r,a]=s.segment2arc(this,e);return[r,a]}if(e instanceof n.Polygon){let[r,a]=s.shape2polygon(this,e);return[r,a]}if(e instanceof n.PlanarSet){let[r,a]=s.shape2planarSet(this,e);return[r,a]}}tangentInStart(){return new n.Vector(this.start,this.end).normalize()}tangentInEnd(){return new n.Vector(this.end,this.start).normalize()}reverse(){return new Ta(this.end,this.start)}split(e){return this.contains(e)?this.start.equalTo(this.end)?[this.clone()]:this.start.equalTo(e)||this.end.equalTo(e)?[this]:[new n.Segment(this.start,e),new n.Segment(e,this.end)]:[]}middle(){return new n.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}distanceToPoint(e){let[s,...r]=n.Distance.point2segment(e,this);return s}definiteIntegral(e=0){let s=this.end.x-this.start.x,r=this.start.y-e,a=this.end.y-e;return s*(r+a)/2}translate(...e){return new Ta(this.ps.translate(...e),this.pe.translate(...e))}rotate(e=0,s=new n.Point){let r=new n.Matrix;return r=r.translate(s.x,s.y).rotate(e).translate(-s.x,-s.y),this.transform(r)}transform(e=new n.Matrix){return new Ta(this.ps.transform(e),this.pe.transform(e))}isZeroLength(){return this.ps.equalTo(this.pe)}static intersectSegment2Line(e,s){let r=[];return e.ps.on(s)&&r.push(e.ps),e.pe.on(s)&&!e.isZeroLength()&&r.push(e.pe),r.length>0||e.isZeroLength()||e.ps.leftTo(s)&&e.pe.leftTo(s)||!e.ps.leftTo(s)&&!e.pe.leftTo(s)?r:new n.Line(e.ps,e.pe).intersect(s)}static intersectSegment2Segment(e,s){let r=[];if(e.box.not_intersect(s.box))return r;if(e.isZeroLength())return e.ps.on(s)&&r.push(e.ps),r;if(s.isZeroLength())return s.ps.on(e)&&r.push(s.ps),r;let a=new n.Line(e.ps,e.pe),u=new n.Line(s.ps,s.pe);if(a.incidentTo(u))e.ps.on(s)&&r.push(e.ps),e.pe.on(s)&&r.push(e.pe),s.ps.on(e)&&!s.ps.equalTo(e.ps)&&!s.ps.equalTo(e.pe)&&r.push(s.ps),s.pe.on(e)&&!s.pe.equalTo(e.ps)&&!s.pe.equalTo(e.pe)&&r.push(s.pe);else{let h=a.intersect(u);h.length>0&&h[0].on(e)&&h[0].on(s)&&r.push(h[0])}return r}static intersectSegment2Circle(e,s){let r=[];if(e.box.not_intersect(s.box))return r;if(e.isZeroLength()){let[h,p]=e.ps.distanceTo(s.pc);return n.Utils.EQ(h,s.r)&&r.push(e.ps),r}let u=new n.Line(e.ps,e.pe).intersect(s);for(let h of u)h.on(e)&&r.push(h);return r}static intersectSegment2Arc(e,s){let r=[];if(e.box.not_intersect(s.box))return r;if(e.isZeroLength())return e.ps.on(s)&&r.push(e.ps),r;let a=new n.Line(e.ps,e.pe),u=new n.Circle(s.pc,s.r),h=a.intersect(u);for(let p of h)p.on(e)&&p.on(s)&&r.push(p);return r}svg(e={}){let{stroke:s,strokeWidth:r,id:a,className:u}=e,h=a&&a.length>0?`id="${a}"`:"",p=u&&u.length>0?`class="${u}"`:"";return`
<line x1="${this.start.x}" y1="${this.start.y}" x2="${this.end.x}" y2="${this.end.y}" stroke="${s||"black"}" stroke-width="${r||1}" ${h} ${p} />`}toJSON(){return Object.assign({},this,{name:"segment"})}},n.segment=(...t)=>new n.Segment(...t)}),Jg}var t0,Rx;function t3(){return Rx||(Rx=1,t0=function(n){n.Arc=class jc{constructor(...e){if(this.pc=new n.Point,this.r=1,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=n.CCW,e.length!=0)if(e.length==1&&e[0]instanceof Object&&e[0].name==="arc"){let{pc:s,r,startAngle:a,endAngle:u,counterClockwise:h}=e[0];this.pc=new n.Point(s.x,s.y),this.r=r,this.startAngle=a,this.endAngle=u,this.counterClockwise=h;return}else{let[s,r,a,u,h]=[...e];s&&s instanceof n.Point&&(this.pc=s.clone()),r!==void 0&&(this.r=r),a!==void 0&&(this.startAngle=a),u!==void 0&&(this.endAngle=u),h!==void 0&&(this.counterClockwise=h);return}}clone(){return new n.Arc(this.pc.clone(),this.r,this.startAngle,this.endAngle,this.counterClockwise)}get sweep(){if(n.Utils.EQ(this.startAngle,this.endAngle))return 0;if(n.Utils.EQ(Math.abs(this.startAngle-this.endAngle),n.PIx2))return n.PIx2;let e;return this.counterClockwise?e=n.Utils.GT(this.endAngle,this.startAngle)?this.endAngle-this.startAngle:this.endAngle-this.startAngle+n.PIx2:e=n.Utils.GT(this.startAngle,this.endAngle)?this.startAngle-this.endAngle:this.startAngle-this.endAngle+n.PIx2,n.Utils.GT(e,n.PIx2)&&(e-=n.PIx2),n.Utils.LT(e,0)&&(e+=n.PIx2),e}get start(){return new n.Point(this.pc.x+this.r,this.pc.y).rotate(this.startAngle,this.pc)}get end(){return new n.Point(this.pc.x+this.r,this.pc.y).rotate(this.endAngle,this.pc)}get center(){return this.pc.clone()}get vertices(){return[this.start.clone(),this.end.clone()]}get length(){return Math.abs(this.sweep*this.r)}get box(){let s=this.breakToFunctional().reduce((r,a)=>r.merge(a.start.box),new n.Box);return s=s.merge(this.end.box),s}contains(e){if(!n.Utils.EQ(this.pc.distanceTo(e)[0],this.r))return!1;if(e.equalTo(this.start))return!0;let s=new n.Vector(this.pc,e).slope,r=new n.Arc(this.pc,this.r,this.startAngle,s,this.counterClockwise);return n.Utils.LE(r.length,this.length)}split(e){if(!this.contains(e))return[];if(n.Utils.EQ_0(this.sweep))return[this.clone()];if(this.start.equalTo(e)||this.end.equalTo(e))return[this.clone()];let s=new n.Vector(this.pc,e).slope;return[new n.Arc(this.pc,this.r,this.startAngle,s,this.counterClockwise),new n.Arc(this.pc,this.r,s,this.endAngle,this.counterClockwise)]}middle(){let e=this.counterClockwise?this.startAngle+this.sweep/2:this.startAngle-this.sweep/2;return new n.Arc(this.pc,this.r,this.startAngle,e,this.counterClockwise).end}chordHeight(){return(1-Math.cos(Math.abs(this.sweep/2)))*this.r}intersect(e){if(e instanceof n.Point)return this.contains(e)?[e]:[];if(e instanceof n.Line)return e.intersect(this);if(e instanceof n.Circle)return jc.intersectArc2Circle(this,e);if(e instanceof n.Segment)return e.intersect(this);if(e instanceof n.Arc)return jc.intersectArc2Arc(this,e);if(e instanceof n.Polygon)return n.Polygon.intersectShape2Polygon(this,e)}distanceTo(e){let{Distance:s}=n;if(e instanceof n.Point){let[r,a]=s.point2arc(e,this);return a=a.reverse(),[r,a]}if(e instanceof n.Circle){let[r,a]=s.arc2circle(this,e);return[r,a]}if(e instanceof n.Line){let[r,a]=s.arc2line(this,e);return[r,a]}if(e instanceof n.Segment){let[r,a]=s.segment2arc(e,this);return a=a.reverse(),[r,a]}if(e instanceof n.Arc){let[r,a]=s.arc2arc(this,e);return[r,a]}if(e instanceof n.Polygon){let[r,a]=s.shape2polygon(this,e);return[r,a]}if(e instanceof n.PlanarSet){let[r,a]=s.shape2planarSet(this,e);return[r,a]}}breakToFunctional(){let e=[],s=[0,Math.PI/2,2*Math.PI/2,3*Math.PI/2],r=[this.pc.translate(this.r,0),this.pc.translate(0,this.r),this.pc.translate(-this.r,0),this.pc.translate(0,-this.r)],a=[];for(let u=0;u<4;u++)r[u].on(this)&&a.push(new n.Arc(this.pc,this.r,this.startAngle,s[u],this.counterClockwise));if(a.length==0)e.push(this.clone());else{a.sort((p,m)=>p.length-m.length);for(let p=0;p<a.length;p++){let m=e.length>0?e[e.length-1]:void 0,y;m?y=new n.Arc(this.pc,this.r,m.endAngle,a[p].endAngle,this.counterClockwise):y=new n.Arc(this.pc,this.r,this.startAngle,a[p].endAngle,this.counterClockwise),n.Utils.EQ_0(y.length)||e.push(y.clone())}let u=e.length>0?e[e.length-1]:void 0,h;u?h=new n.Arc(this.pc,this.r,u.endAngle,this.endAngle,this.counterClockwise):h=new n.Arc(this.pc,this.r,this.startAngle,this.endAngle,this.counterClockwise),n.Utils.EQ_0(h.length)||e.push(h.clone())}return e}tangentInStart(){let e=new n.Vector(this.pc,this.start),s=this.counterClockwise?Math.PI/2:-Math.PI/2;return e.rotate(s).normalize()}tangentInEnd(){let e=new n.Vector(this.pc,this.end),s=this.counterClockwise?-Math.PI/2:Math.PI/2;return e.rotate(s).normalize()}reverse(){return new jc(this.pc,this.r,this.endAngle,this.startAngle,!this.counterClockwise)}translate(...e){let s=this.clone();return s.pc=this.pc.translate(...e),s}rotate(e=0,s=new n.Point){let r=new n.Matrix;return r=r.translate(s.x,s.y).rotate(e).translate(-s.x,-s.y),this.transform(r)}transform(e=new n.Matrix){let s=this.start.transform(e),r=this.end.transform(e),a=this.pc.transform(e);return jc.arcSE(a,s,r,this.counterClockwise)}static arcSE(e,s,r,a){let{vector:u}=n,h=u(e,s).slope,p=u(e,r).slope;n.Utils.EQ(h,p)&&(p+=2*Math.PI,a=!0);let m=u(e,s).length;return new jc(e,m,h,p,a)}static intersectArc2Arc(e,s){var r=[];if(e.box.not_intersect(s.box))return r;if(e.pc.equalTo(s.pc)&&n.Utils.EQ(e.r,s.r)){let p;return p=e.start,p.on(s)&&r.push(p),p=e.end,p.on(s)&&r.push(p),p=s.start,p.on(e)&&r.push(p),p=s.end,p.on(e)&&r.push(p),r}let a=new n.Circle(e.pc,e.r),u=new n.Circle(s.pc,s.r),h=a.intersect(u);for(let p of h)p.on(e)&&p.on(s)&&r.push(p);return r}static intersectArc2Circle(e,s){let r=[];if(e.box.not_intersect(s.box))return r;if(s.pc.equalTo(e.pc)&&n.Utils.EQ(s.r,e.r))return r.push(e.start),r.push(e.end),r;let a=s,u=new n.Circle(e.pc,e.r),h=a.intersect(u);for(let p of h)p.on(e)&&r.push(p);return r}definiteIntegral(e=0){return this.breakToFunctional().reduce((a,u)=>a+u.circularSegmentDefiniteIntegral(e),0)}circularSegmentDefiniteIntegral(e){let s=new n.Line(this.start,this.end),r=this.pc.leftTo(s),u=new n.Segment(this.start,this.end).definiteIntegral(e),h=this.circularSegmentArea();return r?u-h:u+h}circularSegmentArea(){return .5*this.r*this.r*(this.sweep-Math.sin(this.sweep))}svg(e={}){let s=this.sweep<=Math.PI?"0":"1",r=this.counterClockwise?"1":"0",{stroke:a,strokeWidth:u,fill:h,id:p,className:m}=e,y=p&&p.length>0?`id="${p}"`:"",_=m&&m.length>0?`class="${m}"`:"";return n.Utils.EQ(this.sweep,2*Math.PI)?new n.Circle(this.pc,this.r).svg(e):`
<path d="M${this.start.x},${this.start.y}
                             A${this.r},${this.r} 0 ${s},${r} ${this.end.x},${this.end.y}"
                    stroke="${a||"black"}" stroke-width="${u||1}" fill="${h||"none"}" ${y} ${_} />`}toJSON(){return Object.assign({},this,{name:"arc"})}},n.arc=(...t)=>new n.Arc(...t)}),t0}var e0,Ix;function e3(){return Ix||(Ix=1,e0=function(n){n.Box=class j0{constructor(e=void 0,s=void 0,r=void 0,a=void 0){this.xmin=e,this.ymin=s,this.xmax=r,this.ymax=a}clone(){return new j0(this.xmin,this.ymin,this.xmax,this.ymax)}get low(){return new n.Point(this.xmin,this.ymin)}get high(){return new n.Point(this.xmax,this.ymax)}get max(){return this.clone()}get center(){return new n.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)}not_intersect(e){return this.xmax<e.xmin||this.xmin>e.xmax||this.ymax<e.ymin||this.ymin>e.ymax}intersect(e){return!this.not_intersect(e)}merge(e){return new j0(this.xmin===void 0?e.xmin:Math.min(this.xmin,e.xmin),this.ymin===void 0?e.ymin:Math.min(this.ymin,e.ymin),this.xmax===void 0?e.xmax:Math.max(this.xmax,e.xmax),this.ymax===void 0?e.ymax:Math.max(this.ymax,e.ymax))}less_than(e){return!!(this.low.lessThan(e.low)||this.low.equalTo(e.low)&&this.high.lessThan(e.high))}equal_to(e){return this.low.equalTo(e.low)&&this.high.equalTo(e.high)}output(){return this.clone()}maximal_val(e,s){return e.merge(s)}val_less_than(e,s){return e.lessThan(s)}set(e,s,r,a){this.xmin=e,this.ymin=s,this.xmax=r,this.ymax=a}svg(e={}){let{stroke:s,strokeWidth:r,fill:a,id:u,className:h}=e,p=u&&u.length>0?`id="${u}"`:"",m=h&&h.length>0?`class="${h}"`:"",y=this.xmax-this.xmin,_=this.ymax-this.ymin;return`
<rect x="${this.xmin}" y="${this.ymin}" width=${y} height=${_} stroke="${s||"black"}" stroke-width="${r||1}" fill="${a||"none"}" ${p} ${m} />`}},n.box=(...t)=>new n.Box(...t)}),e0}var n0,Nx;function n3(){return Nx||(Nx=1,n0=function(n){n.Edge=class{constructor(e){this.shape=e,this.next,this.prev,this.face,this.arc_length=0,this.bvStart=void 0,this.bvEnd=void 0,this.bv=void 0,this.overlap=void 0}get start(){return this.shape.start}get end(){return this.shape.end}get length(){return this.shape.length}get box(){return this.shape.box}isSegment(){return this.shape instanceof n.Segment}isArc(){return this.shape instanceof n.Arc}middle(){return this.shape.middle()}contains(e){return this.shape.contains(e)}setInclusion(e){if(this.bv!==void 0)return this.bv;if(this.bvStart===void 0&&(this.bvStart=n.ray_shoot(e,this.start)),this.bvEnd===void 0&&(this.bvEnd=n.ray_shoot(e,this.end)),this.bvStart===n.OUTSIDE||this.bvEnd==n.OUTSIDE)this.bv=n.OUTSIDE;else if(this.bvStart===n.INSIDE||this.bvEnd==n.INSIDE)this.bv=n.INSIDE;else{let s=n.ray_shoot(e,this.middle());this.bv=s}return this.bv}setOverlap(e){let s,r=this.shape,a=e.shape;r instanceof n.Segment&&a instanceof n.Segment?r.start.equalTo(a.start)&&r.end.equalTo(a.end)?s=n.OVERLAP_SAME:r.start.equalTo(a.end)&&r.end.equalTo(a.start)&&(s=n.OVERLAP_OPPOSITE):(r instanceof n.Arc&&a instanceof n.Arc||r instanceof n.Segment&&a instanceof n.Arc||r instanceof n.Arc&&a instanceof n.Segment)&&(r.start.equalTo(a.start)&&r.end.equalTo(a.end)&&r.middle().equalTo(a.middle())?s=n.OVERLAP_SAME:r.start.equalTo(a.end)&&r.end.equalTo(a.start)&&r.middle().equalTo(a.middle())&&(s=n.OVERLAP_OPPOSITE)),this.overlap===void 0&&(this.overlap=s),e.overlap===void 0&&(e.overlap=s)}svg(){if(this.shape instanceof n.Segment)return` L${this.shape.end.x},${this.shape.end.y}`;if(this.shape instanceof n.Arc){let e=this.shape,s,r=e.counterClockwise?"1":"0";if(n.Utils.EQ(e.sweep,2*Math.PI)){let a=e.counterClockwise?1:-1,u=new n.Arc(e.pc,e.r,e.startAngle,e.startAngle+a*Math.PI,e.counterClockwise),h=new n.Arc(e.pc,e.r,e.startAngle+a*Math.PI,e.endAngle,e.counterClockwise);return s="0",` A${u.r},${u.r} 0 ${s},${r} ${u.end.x},${u.end.y}
                    A${h.r},${h.r} 0 ${s},${r} ${h.end.x},${h.end.y}`}else return s=e.sweep<=Math.PI?"0":"1",` A${e.r},${e.r} 0 ${s},${r} ${e.end.x},${e.end.y}`}}toJSON(){return this.shape.toJSON()}}}),n0}var i0,Px;function i3(){return Px||(Px=1,i0=function(n){let{Point:t,point:e,Segment:s,segment:r,Arc:a,Box:u,Edge:h,Circle:p}=n;n.Face=class cp{constructor(y,..._){if(this.first,this.last,this._box=void 0,this._orientation=void 0,_.length!=0){if(_.length==1){if(_[0]instanceof Array){let b=_[0];if(b.length==0)return;if(b.every(S=>S instanceof t)){let S=cp.points2segments(b);this.shapes2face(y.edges,S)}else if(b.every(S=>S instanceof s||S instanceof a))this.shapes2face(y.edges,b);else if(b.every(S=>S.name==="segment"||S.name==="arc")){let S=[];for(let x of b){let A;x.name==="segment"?A=new s(x):A=new a(x),S.push(A)}this.shapes2face(y.edges,S)}}else if(_[0]instanceof cp){let b=_[0];this.first=b.first,this.last=b.last;for(let S of b)y.edges.add(S)}else if(_[0]instanceof p)this.shapes2face(y.edges,[_[0].toArc(n.CCW)]);else if(_[0]instanceof u){let b=_[0];this.shapes2face(y.edges,[r(e(b.xmin,b.ymin),e(b.xmax,b.ymin)),r(e(b.xmax,b.ymin),e(b.xmax,b.ymax)),r(e(b.xmax,b.ymax),e(b.xmin,b.ymax)),r(e(b.xmin,b.ymax),e(b.xmin,b.ymin))])}}_.length==2&&_[0]instanceof h&&_[1]instanceof h&&(this.first=_[0],this.last=_[1],this.last.next=this.first,this.first.prev=this.last,this.setArcLength())}}[Symbol.iterator](){let y;return{next:()=>{let _=y||this.first,b=this.first?y?y===this.first:!1:!0;return y=_?_.next:void 0,{value:_,done:b}}}}get edges(){let y=[];for(let _ of this)y.push(_);return y}get size(){let y=0;for(let _ of this)y++;return y}get box(){if(this._box===void 0){let y=new n.Box;for(let _ of this)y=y.merge(_.box);this._box=y}return this._box}static points2segments(y){let _=[];for(let b=0;b<y.length;b++)_.push(new s(y[b],y[(b+1)%y.length]));return _}shapes2face(y,_){for(let b of _){let S=new h(b);this.append(y,S)}}isEmpty(){return this.first===void 0&&this.last===void 0}append(y,_){this.first===void 0?(_.prev=_,_.next=_,this.first=_,this.last=_,_.arc_length=0):(_.prev=this.last,this.last.next=_,this.last=_,this.last.next=this.first,this.first.prev=this.last,_.arc_length=_.prev.arc_length+_.prev.length),_.face=this,y.add(_)}insert(y,_,b){if(this.first===void 0)_.prev=_,_.next=_,this.first=_,this.last=_;else{let S=b.next;b.next=_,S.prev=_,_.prev=b,_.next=S,this.last===b&&(this.first=_)}_.face=this,_.prev===this.last?_.arc_length=0:_.arc_length=_.prev.arc_length+_.prev.length,y.add(_)}remove(y,_){_===this.first&&_===this.last?(this.first=void 0,this.last=void 0):(_.prev.next=_.next,_.next.prev=_.prev,_===this.first&&(this.first=_.next),_===this.last&&(this.last=_.prev)),y.delete(_)}reverse(){let y=[],_=this.last;do _.shape=_.shape.reverse(),y.push(_),_=_.prev;while(_!==this.last);this.first=void 0,this.last=void 0;for(let b of y)this.first===void 0?(b.prev=b,b.next=b,this.first=b,this.last=b,b.arc_length=0):(b.prev=this.last,this.last.next=b,this.last=b,this.last.next=this.first,this.first.prev=this.last,b.arc_length=b.prev.arc_length+b.prev.length);this._orientation!==void 0&&(this._orientation=void 0,this._orientation=this.orientation())}setArcLength(){for(let y of this)y===this.first?y.arc_length=0:y.arc_length=y.prev.arc_length+y.prev.length,y.face=this}area(){return Math.abs(this.signedArea())}signedArea(){let y=0,_=this.box.ymin;for(let b of this)y+=b.shape.definiteIntegral(_);return y}orientation(){if(this._orientation===void 0){let y=this.signedArea();n.Utils.EQ_0(y)?this._orientation=n.ORIENTATION.NOT_ORIENTABLE:n.Utils.LT(y,0)?this._orientation=n.ORIENTATION.CCW:this._orientation=n.ORIENTATION.CW}return this._orientation}isSimple(y){return cp.getSelfIntersections(this,y,!0).length==0}static getSelfIntersections(y,_,b=!1){let S=[];for(let x of y){let A=_.search(x.box);for(let E of A){if(x===E||x.shape instanceof n.Segment&&E.shape instanceof n.Segment&&(x.next===E||x.prev===E))continue;let R=x.shape.intersect(E.shape);for(let z of R)if(!(z.equalTo(x.start)&&z.equalTo(E.end)&&E===x.prev)&&!(z.equalTo(x.end)&&z.equalTo(E.start)&&E===x.next)&&(S.push(z),b))break;if(S.length>0&&b)break}if(S.length>0&&b)break}return S}toJSON(){return this.edges.map(y=>y.toJSON())}svg(){let y=`
M${this.first.start.x},${this.first.start.y}`;for(let _ of this)y+=_.svg();return y+=" z",y}}}),i0}var s0,zx;function s3(){return zx||(zx=1,s0=function(n){let{Point:t,Segment:e,Line:s,Circle:r,Arc:a,Box:u,Vector:h}=n;n.Ray=class B2{constructor(...m){if(this.pt=new t,m.length!=0){if(m.length==1&&m[0]instanceof t){this.pt=m[0].clone();return}if(m.length==2&&typeof m[0]=="number"&&typeof m[1]=="number"){this.pt=new t(m[0],m[1]);return}throw n.Errors.ILLEGAL_PARAMETERS}}clone(){return new B2(this.pt)}get box(){return new u(this.pt.x,this.pt.y,Number.POSITIVE_INFINITY,this.pt.y)}get start(){return this.pt}get norm(){return new h(0,1)}intersect(m){if(m instanceof e)return this.intersectRay2Segment(this,m);if(m instanceof a)return this.intersectRay2Arc(this,m)}intersectRay2Segment(m,y){let _=[];if(m.box.not_intersect(y.box))return _;let b=new s(m.start,m.norm),S=b.intersect(y);for(let x of S)n.Utils.GE(x.x,m.start.x)&&_.push(x);return S.length==2&&_.length==1&&m.start.on(b)&&_.push(m.start),_}intersectRay2Arc(m,y){let _=[];if(m.box.not_intersect(y.box))return _;let S=new s(m.start,m.norm).intersect(y);for(let x of S)n.Utils.GE(x.x,m.start.x)&&_.push(x);return _}},n.ray=(...p)=>new n.Ray(...p)}),s0}var r0,Ux;function r3(){return Ux||(Ux=1,r0=function(n){let{Polygon:t,Point:e,Segment:s,Arc:r,Line:a,Ray:u}=n;n.ray_shoot=function(h,p){let m;if(h.box.not_intersect(p.box))return n.OUTSIDE;let y=new u(p),_=new a(y.pt,y.norm),b=h.edges.search(y.box);if(b.length==0)return n.OUTSIDE;let S=[];for(let A of b)for(let E of y.intersect(A.shape)){if(E.equalTo(p))return n.BOUNDARY;S.push({pt:E,edge:A})}S.sort((A,E)=>n.Utils.LT(A.pt.x,E.pt.x)?-1:n.Utils.GT(A.pt.x,E.pt.x)?1:0);let x=0;for(let A=0;A<S.length;A++){let E=S[A];if(E.pt.equalTo(E.edge.shape.start)){if(A>0&&E.pt.equalTo(S[A-1].pt)&&E.edge.prev===S[A-1].edge)continue;let R=E.edge.prev;for(;n.Utils.EQ_0(R.length);)R=R.prev;let z=R.shape.tangentInEnd(),O=E.pt.translate(z),$=E.edge.shape.tangentInStart(),N=E.pt.translate($),j=O.leftTo(_),F=N.leftTo(_);(j&&!F||!j&&F)&&x++}else if(E.pt.equalTo(E.edge.shape.end)){if(A>0&&E.pt.equalTo(S[A-1].pt)&&E.edge.next===S[A-1].edge)continue;let R=E.edge.next;for(;n.Utils.EQ_0(R.length);)R=R.next;let z=R.shape.tangentInStart(),O=E.pt.translate(z),$=E.edge.shape.tangentInEnd(),N=E.pt.translate($),j=O.leftTo(_),F=N.leftTo(_);(j&&!F||!j&&F)&&x++}else if(E.edge.shape instanceof s)x++;else{let R=E.edge.shape.box;n.Utils.EQ(E.pt.y,R.ymin)||n.Utils.EQ(E.pt.y,R.ymax)||x++}}return m=x%2==1?n.INSIDE:n.OUTSIDE,m}}),r0}var o0,Bx;function o3(){return Bx||(Bx=1,o0=function(n){let{Edge:t,Face:e,PlanarSet:s,Box:r}=n,{ray_shoot:a}=n;n.Polygon=class Ao{constructor(){this.faces=new s,this.edges=new s}get box(){return[...this.faces].reduce((h,p)=>h.merge(p.box),new r)}get vertices(){return[...this.edges].map(h=>h.start)}isEmpty(){return this.edges.size===0}addFace(...h){let p=new e(this,...h);return this.faces.add(p),p}deleteFace(h){for(let m of h)this.edges.delete(m);return this.faces.delete(h)}removeChain(h,p,m){if(m.next===p){this.deleteFace(h);return}for(let y=p;y!==m.next;y=y.next)if(h.remove(this.edges,y),h.isEmpty()){this.deleteFace(h);break}}addVertex(h,p){let m=p.shape.split(h);if(m.length<2)return;let y=new n.Edge(m[0]),_=p.prev;return p.face.insert(this.edges,y,_),this.edges.delete(p),p.shape=m[1],this.edges.add(p),y}reverse(){for(let h of this.faces)h.reverse();return this}clone(){let h=new Ao;for(let p of this.faces){let m=[];for(let y of p)m.push(y.shape.clone());h.addFace(m)}return h}area(){let h=[...this.faces].reduce((p,m)=>p+m.signedArea(),0);return Math.abs(h)}contains(h){let p=a(this,h);return p==n.INSIDE||p==n.BOUNDARY}distanceTo(h){let{Distance:p}=n;if(h instanceof n.Point){let[m,y]=p.point2polygon(h,this);return y=y.reverse(),[m,y]}if(h instanceof n.Circle||h instanceof n.Line||h instanceof n.Segment||h instanceof n.Arc){let[m,y]=p.shape2polygon(h,this);return y=y.reverse(),[m,y]}if(h instanceof n.Polygon){let m=[Number.POSITIVE_INFINITY,new n.Segment],y,_;for(let b of this.edges){let S=m[0];[y,_]=p.shape2planarSet(b.shape,h.edges,S),n.Utils.LT(y,S)&&(m=[y,_])}return m}}intersect(h){if(h instanceof n.Point)return this.contains(h)?[h]:[];if(h instanceof n.Line)return Ao.intersectLine2Polygon(h,this);if(h instanceof n.Circle||h instanceof n.Segment||h instanceof n.Arc)return Ao.intersectShape2Polygon(h,this);if(h instanceof n.Polygon)return Ao.intersectPolygon2Polygon(h,this)}isValid(){let h=!0;for(let p of this.faces)if(!p.isSimple(this.edges)){h=!1;break}return h}translate(h){let p=new Ao;for(let m of this.faces){let y=[];for(let _ of m)y.push(_.shape.translate(h));p.addFace(y)}return p}rotate(h=0,p=new n.Point){let m=new Ao;for(let y of this.faces){let _=[];for(let b of y)_.push(b.shape.rotate(h,p));m.addFace(_)}return m}transform(h=new n.Matrix){let p=new Ao;for(let m of this.faces){let y=[];for(let _ of m)y.push(_.shape.transform(h));p.addFace(y)}return p}static intersectShape2Polygon(h,p){let m=[];if(p.isEmpty()||h.box.not_intersect(p.box))return m;let y=p.edges.search(h.box);for(let _ of y)for(let b of h.intersect(_.shape))m.push(b);return m}static intersectLine2Polygon(h,p){let m=[];if(p.isEmpty())return m;for(let y of p.edges)for(let _ of h.intersect(y.shape))m.push(_);return m}static intersectPolygon2Polygon(h,p){let m=[];if(h.isEmpty()||p.isEmpty()||h.box.not_intersect(p.box))return m;for(let y of h.edges)for(let _ of Ao.intersectShape2Polygon(y.shape,p))m.push(_);return m}svg(h={}){let{stroke:p,strokeWidth:m,fill:y,fillRule:_,fillOpacity:b,id:S,className:x}=h,A=S&&S.length>0?`id="${S}"`:"",E=x&&x.length>0?`class="${x}"`:"",R=`
<path stroke="${p||"black"}" stroke-width="${m||1}" fill="${y||"lightcyan"}" fill-rule="${_||"evenodd"}" fill-opacity="${b||1}" ${A} ${E} d="`;for(let z of this.faces)R+=z.svg();return R+=`" >
</path>`,R}toJSON(){return[...this.faces].map(h=>h.toJSON())}}}),o0}var a0,Hx;function a3(){if(Hx)return a0;Hx=1;let n=P2();return a0=function(t){let{Polygon:e,Point:s,Segment:r,Arc:a,Circle:u,Line:h,Ray:p,Vector:m}=t,{vector:y}=t;t.Distance=class jt{static point2point(b,S){return b.distanceTo(S)}static point2line(b,S){let x=b.projectionOn(S);return[y(b,x).length,new r(b,x)]}static point2circle(b,S){let[x,A]=b.distanceTo(S.center);if(t.Utils.EQ_0(x))return[S.r,new r(b,S.toArc().start)];{let E=Math.abs(x-S.r),R=y(S.pc,b).normalize().multiply(S.r),z=S.pc.translate(R);return[E,new r(b,z)]}}static point2segment(b,S){if(S.start.equalTo(S.end))return jt.point2point(b,S.start);let x=new t.Vector(S.start,S.end),A=new t.Vector(S.start,b),E=new t.Vector(S.end,b),R=x.dot(A),z=-x.dot(E),O,$;if(t.Utils.GE(R,0)&&t.Utils.GE(z,0)){let N=S.tangentInStart();return O=Math.abs(N.cross(A)),$=S.start.translate(N.multiply(N.dot(A))),[O,new r(b,$)]}else return R<0?b.distanceTo(S.start):b.distanceTo(S.end)}static point2arc(b,S){let x=new t.Circle(S.pc,S.r),A=[],E,R;return[E,R]=jt.point2circle(b,x),R.end.on(S)&&A.push(jt.point2circle(b,x)),A.push(jt.point2point(b,S.start)),A.push(jt.point2point(b,S.end)),jt.sort(A),A[0]}static segment2line(b,S){let x=b.intersect(S);if(x.length>0)return[0,new r(x[0],x[0])];let A=[];return A.push(jt.point2line(b.start,S)),A.push(jt.point2line(b.end,S)),jt.sort(A),A[0]}static segment2segment(b,S){let x=r.intersectSegment2Segment(b,S);if(x.length>0)return[0,new r(x[0],x[0])];let A=[];return A.push(jt.point2segment(S.start,b)),A.push(jt.point2segment(S.end,b)),A.push(jt.point2segment(b.start,S)),A.push(jt.point2segment(b.end,S)),jt.sort(A),A[0]}static segment2circle(b,S){let x=b.intersect(S);if(x.length>0)return[0,new r(x[0],x[0])];let A=new t.Line(b.ps,b.pe),[E,R]=jt.point2line(S.center,A);if(t.Utils.GE(E,S.r)&&R.end.on(b))return jt.point2circle(R.end,S);{let[z,O]=jt.point2circle(b.start,S),[$,N]=jt.point2circle(b.end,S);return t.Utils.LT(z,$)?[z,O]:[$,N]}}static segment2arc(b,S){let x=b.intersect(S);if(x.length>0)return[0,new r(x[0],x[0])];let A=new t.Line(b.ps,b.pe),E=new t.Circle(S.pc,S.r),[R,z]=jt.point2line(E.center,A);if(t.Utils.GE(R,E.r)&&z.end.on(b)){let[j,F]=jt.point2circle(z.end,E);if(F.end.on(S))return[j,F]}let O=[];O.push(jt.point2arc(b.start,S)),O.push(jt.point2arc(b.end,S));let $,N;return[$,N]=jt.point2segment(S.start,b),O.push([$,N.reverse()]),[$,N]=jt.point2segment(S.end,b),O.push([$,N.reverse()]),jt.sort(O),O[0]}static circle2circle(b,S){let x=b.intersect(S);if(x.length>0)return[0,new r(x[0],x[0])];if(b.center.equalTo(S.center)){let A=b.toArc(),E=S.toArc();return jt.point2point(A.start,E.start)}else{let A=new h(b.center,S.center),E=A.intersect(b),R=A.intersect(S),z=[];return z.push(jt.point2point(E[0],R[0])),z.push(jt.point2point(E[0],R[1])),z.push(jt.point2point(E[1],R[0])),z.push(jt.point2point(E[1],R[1])),jt.sort(z),z[0]}}static circle2line(b,S){let x=b.intersect(S);if(x.length>0)return[0,new r(x[0],x[0])];let[A,E]=jt.point2line(b.center,S),[R,z]=jt.point2circle(E.end,b);return z=z.reverse(),[R,z]}static arc2line(b,S){let x=S.intersect(b);if(x.length>0)return[0,new r(x[0],x[0])];let A=new t.Circle(b.center,b.r),[E,R]=jt.point2line(A.center,S);if(t.Utils.GE(E,A.r)){let[z,O]=jt.point2circle(R.end,A);if(O.end.on(b))return[z,O]}else{let z=[];return z.push(jt.point2line(b.start,S)),z.push(jt.point2line(b.end,S)),jt.sort(z),z[0]}}static arc2circle(b,S){let x=b.intersect(S);if(x.length>0)return[0,new r(x[0],x[0])];let A=new t.Circle(b.center,b.r),[E,R]=jt.circle2circle(A,S);if(R.start.on(b))return[E,R];{let z=[];return z.push(jt.point2circle(b.start,S)),z.push(jt.point2circle(b.end,S)),jt.sort(z),z[0]}}static arc2arc(b,S){let x=b.intersect(S);if(x.length>0)return[0,new r(x[0],x[0])];let A=new t.Circle(b.center,b.r),E=new t.Circle(S.center,S.r),[R,z]=jt.circle2circle(A,E);if(z.start.on(b)&&z.end.on(S))return[R,z];{let O=[],$,N;return[$,N]=jt.point2arc(b.start,S),N.end.on(S)&&O.push([$,N]),[$,N]=jt.point2arc(b.end,S),N.end.on(S)&&O.push([$,N]),[$,N]=jt.point2arc(S.start,b),N.end.on(b)&&O.push([$,N.reverse()]),[$,N]=jt.point2arc(S.end,b),N.end.on(b)&&O.push([$,N.reverse()]),[$,N]=jt.point2point(b.start,S.start),O.push([$,N]),[$,N]=jt.point2point(b.start,S.end),O.push([$,N]),[$,N]=jt.point2point(b.end,S.start),O.push([$,N]),[$,N]=jt.point2point(b.end,S.end),O.push([$,N]),jt.sort(O),O[0]}}static point2polygon(b,S){let x=[Number.POSITIVE_INFINITY,new r];for(let A of S.edges){let[E,R]=A.shape instanceof r?jt.point2segment(b,A.shape):jt.point2arc(b,A.shape);t.Utils.LT(E,x[0])&&(x=[E,R])}return x}static shape2polygon(b,S){let x=[Number.POSITIVE_INFINITY,new r];for(let A of S.edges){let[E,R]=b.distanceTo(A.shape);t.Utils.LT(E,x[0])&&(x=[E,R])}return x}static polygon2polygon(b,S){let x=[Number.POSITIVE_INFINITY,new t.Segment];for(let A of b.edges)for(let E of S.edges){let[R,z]=A.shape.distanceTo(E.shape);t.Utils.LT(R,x[0])&&(x=[R,z])}return x}static box2box_minmax(b,S){let x=Math.max(Math.max(b.xmin-S.xmax,0),Math.max(S.xmin-b.xmax,0)),A=Math.max(Math.max(b.ymin-S.ymax,0),Math.max(S.ymin-b.ymax,0)),E=x*x+A*A,R=b.merge(S),z=R.xmax-R.xmin,O=R.ymax-R.ymin,$=z*z+O*O;return[E,$]}static minmax_tree_process_level(b,S,x,A){let E,R;for(let N of S)[E,R]=jt.box2box_minmax(b.box,N.item.key),N.item.value instanceof t.Edge?A.insert([E,R],N.item.value.shape):A.insert([E,R],N.item.value),t.Utils.LT(R,x)&&(x=R);if(S.length===0)return x;let z=S.map(N=>N.left.isNil()?void 0:N.left).filter(N=>N!==void 0),O=S.map(N=>N.right.isNil()?void 0:N.right).filter(N=>N!==void 0),$=[...z,...O].filter(N=>{let[j,F]=jt.box2box_minmax(b.box,N.max);return t.Utils.LE(j,x)});return x=jt.minmax_tree_process_level(b,$,x,A),x}static minmax_tree(b,S,x){let A=new n,E=[S.index.root],R=x<Number.POSITIVE_INFINITY?x*x:Number.POSITIVE_INFINITY;return R=jt.minmax_tree_process_level(b,E,R,A),A}static minmax_tree_calc_distance(b,S,x){let A,E;if(S!=null&&!S.isNil()){if([A,E]=jt.minmax_tree_calc_distance(b,S.left,x),E)return[A,E];if(t.Utils.LT(A[0],Math.sqrt(S.item.key.low)))return[A,!0];let[R,z]=jt.distance(b,S.item.value);return t.Utils.LT(R,A[0])&&(A=[R,z]),[A,E]=jt.minmax_tree_calc_distance(b,S.right,A),[A,E]}return[x,!1]}static shape2planarSet(b,S,x=Number.POSITIVE_INFINITY){let A=[x,new t.Segment],E=!1;if(S instanceof t.PlanarSet){let R=jt.minmax_tree(b,S,x);[A,E]=jt.minmax_tree_calc_distance(b,R.root,A)}return A}static sort(b){b.sort((S,x)=>t.Utils.LT(S[0],x[0])?-1:t.Utils.GT(S[0],x[0])?1:0)}static distance(b,S){return b.distanceTo(S)}}},a0}var l0,Vx;function l3(){if(Vx)return l0;Vx=1;let n=qL(),t=GL(),e=class{constructor(){this.DP_TOL=n.DP_TOL,this.CCW=!0,this.CW=!1,this.ORIENTATION={CCW:-1,CW:1,NOT_ORIENTABLE:0},this.PIx2=2*Math.PI,this.INSIDE=1,this.OUTSIDE=0,this.BOUNDARY=2,this.CONTAINS=3,this.INTERLACE=4,this.OVERLAP_SAME=1,this.OVERLAP_OPPOSITE=2,this.Utils=n,this.Errors=t}},s=new e;return ZL()(s),YL()(s),XL()(s),QL()(s),$L()(s),KL()(s),JL()(s),t3()(s),e3()(s),n3()(s),i3()(s),s3()(s),r3()(s),o3()(s),a3()(s),l0=s,l0}var c3=l3();const ba=Jh(c3),H2="15.1.22",jx=(n,t,e)=>({endTime:t,insertTime:e,type:"exponentialRampToValue",value:n}),qx=(n,t,e)=>({endTime:t,insertTime:e,type:"linearRampToValue",value:n}),q0=(n,t)=>({startTime:t,type:"setValue",value:n}),V2=(n,t,e)=>({duration:e,startTime:t,type:"setValueCurve",values:n}),j2=(n,t,{startTime:e,target:s,timeConstant:r})=>s+(t-s)*Math.exp((e-n)/r),Fc=n=>n.type==="exponentialRampToValue",Sp=n=>n.type==="linearRampToValue",Ea=n=>Fc(n)||Sp(n),Cy=n=>n.type==="setValue",Eo=n=>n.type==="setValueCurve",Tp=(n,t,e,s)=>{const r=n[t];return r===void 0?s:Ea(r)||Cy(r)?r.value:Eo(r)?r.values[r.values.length-1]:j2(e,Tp(n,t-1,r.startTime,s),r)},Gx=(n,t,e,s,r)=>e===void 0?[s.insertTime,r]:Ea(e)?[e.endTime,e.value]:Cy(e)?[e.startTime,e.value]:Eo(e)?[e.startTime+e.duration,e.values[e.values.length-1]]:[e.startTime,Tp(n,t-1,e.startTime,r)],G0=n=>n.type==="cancelAndHold",Z0=n=>n.type==="cancelScheduledValues",wa=n=>G0(n)||Z0(n)?n.cancelTime:Fc(n)||Sp(n)?n.endTime:n.startTime,Zx=(n,t,e,{endTime:s,value:r})=>e===r?r:0<e&&0<r||e<0&&r<0?e*(r/e)**((n-t)/(s-t)):0,Wx=(n,t,e,{endTime:s,value:r})=>e+(n-t)/(s-t)*(r-e),u3=(n,t)=>{const e=Math.floor(t),s=Math.ceil(t);return e===s?n[e]:(1-(t-e))*n[e]+(1-(s-t))*n[s]},h3=(n,{duration:t,startTime:e,values:s})=>{const r=(n-e)/t*(s.length-1);return u3(s,r)},Gd=n=>n.type==="setTarget";class f3{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const e=wa(t);if(G0(t)||Z0(t)){const s=this._automationEvents.findIndex(a=>Z0(t)&&Eo(a)?a.startTime+a.duration>=e:wa(a)>=e),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),G0(t)){const a=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&Ea(r)){if(a!==void 0&&Gd(a))throw new Error("The internal list is malformed.");const u=a===void 0?r.insertTime:Eo(a)?a.startTime+a.duration:wa(a),h=a===void 0?this._defaultValue:Eo(a)?a.values[a.values.length-1]:a.value,p=Fc(r)?Zx(e,u,h,r):Wx(e,u,h,r),m=Fc(r)?jx(p,e,this._currenTime):qx(p,e,this._currenTime);this._automationEvents.push(m)}if(a!==void 0&&Gd(a)&&this._automationEvents.push(q0(this.getValue(e),e)),a!==void 0&&Eo(a)&&a.startTime+a.duration>e){const u=e-a.startTime,h=(a.values.length-1)/a.duration,p=Math.max(2,1+Math.ceil(u*h)),m=u/(p-1)*h,y=a.values.slice(0,p);if(m<1)for(let _=1;_<p;_+=1){const b=m*_%1;y[_]=a.values[_-1]*(1-b)+a.values[_]*b}this._automationEvents[this._automationEvents.length-1]=V2(y,a.startTime,u)}}}else{const s=this._automationEvents.findIndex(u=>wa(u)>e),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&Eo(r)&&wa(r)+r.duration>e)return!1;const a=Fc(t)?jx(t.value,t.endTime,this._currenTime):Sp(t)?qx(t.value,e,this._currenTime):t;if(s===-1)this._automationEvents.push(a);else{if(Eo(t)&&e+t.duration>wa(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,a)}}return!0}flush(t){const e=this._automationEvents.findIndex(s=>wa(s)>t);if(e>1){const s=this._automationEvents.slice(e-1),r=s[0];Gd(r)&&s.unshift(q0(Tp(this._automationEvents,e-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const e=this._automationEvents.findIndex(u=>wa(u)>t),s=this._automationEvents[e],r=(e===-1?this._automationEvents.length:e)-1,a=this._automationEvents[r];if(a!==void 0&&Gd(a)&&(s===void 0||!Ea(s)||s.insertTime>t))return j2(t,Tp(this._automationEvents,r-1,a.startTime,this._defaultValue),a);if(a!==void 0&&Cy(a)&&(s===void 0||!Ea(s)))return a.value;if(a!==void 0&&Eo(a)&&(s===void 0||!Ea(s)||a.startTime+a.duration>t))return t<a.startTime+a.duration?h3(t,a):a.values[a.values.length-1];if(a!==void 0&&Ea(a)&&(s===void 0||!Ea(s)))return a.value;if(s!==void 0&&Fc(s)){const[u,h]=Gx(this._automationEvents,r,a,s,this._defaultValue);return Zx(t,u,h,s)}if(s!==void 0&&Sp(s)){const[u,h]=Gx(this._automationEvents,r,a,s,this._defaultValue);return Wx(t,u,h,s)}return this._defaultValue}}const d3=n=>({cancelTime:n,type:"cancelAndHold"}),p3=n=>({cancelTime:n,type:"cancelScheduledValues"}),m3=(n,t)=>({endTime:t,type:"exponentialRampToValue",value:n}),_3=(n,t)=>({endTime:t,type:"linearRampToValue",value:n}),g3=(n,t,e)=>({startTime:t,target:n,timeConstant:e,type:"setTarget"}),y3=()=>new DOMException("","AbortError"),v3=n=>(t,e,[s,r,a],u)=>{n(t[r],[e,s,a],h=>h[0]===e&&h[1]===s,u)},b3=n=>(t,e,s)=>{const r=[];for(let a=0;a<s.numberOfInputs;a+=1)r.push(new Set);n.set(t,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:e})},w3=n=>(t,e)=>{n.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})},Kc=new WeakSet,q2=new WeakMap,Ly=new WeakMap,G2=new WeakMap,My=new WeakMap,Kp=new WeakMap,Z2=new WeakMap,W0=new WeakMap,F0=new WeakMap,Y0=new WeakMap,W2={construct(){return W2}},x3=n=>{try{const t=new Proxy(n,W2);new t}catch{return!1}return!0},Fx=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Yx=(n,t)=>{const e=[];let s=n.replace(/^[\s]+/,""),r=s.match(Fx);for(;r!==null;){const a=r[1].slice(1,-1),u=r[0].replace(/([\s]+)?;?$/,"").replace(a,new URL(a,t).toString());e.push(u),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(Fx)}return[e.join(";"),s]},Xx=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Qx=n=>{if(!x3(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},S3=(n,t,e,s,r,a,u,h,p,m,y,_,b)=>{let S=0;return(x,A,E={credentials:"omit"})=>{const R=y.get(x);if(R!==void 0&&R.has(A))return Promise.resolve();const z=m.get(x);if(z!==void 0){const N=z.get(A);if(N!==void 0)return N}const O=a(x),$=O.audioWorklet===void 0?r(A).then(([N,j])=>{const[F,G]=Yx(N,j),q=`${F};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${G}
})})(window,'_AWGS')`;return e(q)}).then(()=>{const N=b._AWGS.pop();if(N===void 0)throw new SyntaxError;s(O.currentTime,O.sampleRate,()=>N(class{},void 0,(j,F)=>{if(j.trim()==="")throw t();const G=F0.get(O);if(G!==void 0){if(G.has(j))throw t();Qx(F),Xx(F.parameterDescriptors),G.set(j,F)}else Qx(F),Xx(F.parameterDescriptors),F0.set(O,new Map([[j,F]]))},O.sampleRate,void 0,void 0))}):Promise.all([r(A),Promise.resolve(n(_,_))]).then(([[N,j],F])=>{const G=S+1;S=G;const[q,W]=Yx(N,j),X=`${q};((AudioWorkletProcessor,registerProcessor)=>{${W}
})(${F?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${F?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${F?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${G}',class extends AudioWorkletProcessor{process(){return !1}})`,Z=new Blob([X],{type:"application/javascript; charset=utf-8"}),P=URL.createObjectURL(Z);return O.audioWorklet.addModule(P,E).then(()=>{if(h(O))return O;const U=u(O);return U.audioWorklet.addModule(P,E).then(()=>U)}).then(U=>{if(p===null)throw new SyntaxError;try{new p(U,`__sac${G}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(P))});return z===void 0?m.set(x,new Map([[A,$]])):z.set(A,$),$.then(()=>{const N=y.get(x);N===void 0?y.set(x,new Set([A])):N.add(A)}).finally(()=>{const N=m.get(x);N!==void 0&&N.delete(A)}),$}},lr=(n,t)=>{const e=n.get(t);if(e===void 0)throw new Error("A value with the given key could not be found.");return e},Jp=(n,t)=>{const e=Array.from(n).filter(t);if(e.length>1)throw Error("More than one element was found.");if(e.length===0)throw Error("No element was found.");const[s]=e;return n.delete(s),s},F2=(n,t,e,s)=>{const r=lr(n,t),a=Jp(r,u=>u[0]===e&&u[1]===s);return r.size===0&&n.delete(t),a},nf=n=>lr(Z2,n),Jc=n=>{if(Kc.has(n))throw new Error("The AudioNode is already stored.");Kc.add(n),nf(n).forEach(t=>t(!0))},Y2=n=>"port"in n,sf=n=>{if(!Kc.has(n))throw new Error("The AudioNode is not stored.");Kc.delete(n),nf(n).forEach(t=>t(!1))},X0=(n,t)=>{!Y2(n)&&t.every(e=>e.size===0)&&sf(n)},T3=(n,t,e,s,r,a,u,h,p,m,y,_,b)=>{const S=new WeakMap;return(x,A,E,R,z)=>{const{activeInputs:O,passiveInputs:$}=a(A),{outputs:N}=a(x),j=h(x),F=G=>{const q=p(A),W=p(x);if(G){const Q=F2($,x,E,R);n(O,x,Q,!1),!z&&!_(x)&&e(W,q,E,R),b(A)&&Jc(A)}else{const Q=s(O,x,E,R);t($,R,Q,!1),!z&&!_(x)&&r(W,q,E,R);const et=u(A);if(et===0)y(A)&&X0(A,O);else{const k=S.get(A);k!==void 0&&clearTimeout(k),S.set(A,setTimeout(()=>{y(A)&&X0(A,O)},et*1e3))}}};return m(N,[A,E,R],G=>G[0]===A&&G[1]===E&&G[2]===R,!0)?(j.add(F),y(x)?n(O,x,[E,R,F],!0):t($,R,[x,E,F],!0),!0):!1}},A3=n=>(t,e,[s,r,a],u)=>{const h=t.get(s);h===void 0?t.set(s,new Set([[r,e,a]])):n(h,[r,e,a],p=>p[0]===r&&p[1]===e,u)},E3=n=>(t,e)=>{const s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(s).connect(t.destination);const r=()=>{e.removeEventListener("ended",r),e.disconnect(s),s.disconnect()};e.addEventListener("ended",r)},C3=n=>(t,e)=>{n(t).add(e)},L3={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},M3=(n,t,e,s,r,a)=>class extends n{constructor(h,p){const m=r(h),y={...L3,...p},_=s(m,y),b=a(m)?t():null;super(h,!1,_,b),this._nativeAnalyserNode=_}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(h){this._nativeAnalyserNode.fftSize=h}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(h){const p=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=h,!(h>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=p,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(h){const p=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=h,!(this._nativeAnalyserNode.maxDecibels>h))throw this._nativeAnalyserNode.minDecibels=p,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(h){this._nativeAnalyserNode.smoothingTimeConstant=h}getByteFrequencyData(h){this._nativeAnalyserNode.getByteFrequencyData(h)}getByteTimeDomainData(h){this._nativeAnalyserNode.getByteTimeDomainData(h)}getFloatFrequencyData(h){this._nativeAnalyserNode.getFloatFrequencyData(h)}getFloatTimeDomainData(h){this._nativeAnalyserNode.getFloatTimeDomainData(h)}},mi=(n,t)=>n.context===t,k3=(n,t,e)=>()=>{const s=new WeakMap,r=async(a,u)=>{let h=t(a);if(!mi(h,u)){const m={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,fftSize:h.fftSize,maxDecibels:h.maxDecibels,minDecibels:h.minDecibels,smoothingTimeConstant:h.smoothingTimeConstant};h=n(u,m)}return s.set(u,h),await e(a,u,h),h};return{render(a,u){const h=s.get(u);return h!==void 0?Promise.resolve(h):r(a,u)}}},Ap=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Gr=()=>new DOMException("","IndexSizeError"),ky=n=>{n.getChannelData=(t=>e=>{try{return t.call(n,e)}catch(s){throw s.code===12?Gr():s}})(n.getChannelData)},O3={numberOfChannels:1},D3=(n,t,e,s,r,a,u,h)=>{let p=null;return class X2{constructor(y){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:_,numberOfChannels:b,sampleRate:S}={...O3,...y};p===null&&(p=new r(1,1,44100));const x=s!==null&&t(a,a)?new s({length:_,numberOfChannels:b,sampleRate:S}):p.createBuffer(b,_,S);if(x.numberOfChannels===0)throw e();return typeof x.copyFromChannel!="function"?(u(x),ky(x)):t(Ap,()=>Ap(x))||h(x),n.add(x),x}static[Symbol.hasInstance](y){return y!==null&&typeof y=="object"&&Object.getPrototypeOf(y)===X2.prototype||n.has(y)}}},Wi=-34028234663852886e22,Ei=-Wi,Mo=n=>Kc.has(n),R3={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},I3=(n,t,e,s,r,a,u,h)=>class extends n{constructor(m,y){const _=a(m),b={...R3,...y},S=r(_,b),x=u(_),A=x?t():null;super(m,!1,S,A),this._audioBufferSourceNodeRenderer=A,this._isBufferNullified=!1,this._isBufferSet=b.buffer!==null,this._nativeAudioBufferSourceNode=S,this._onended=null,this._playbackRate=e(this,x,S.playbackRate,Ei,Wi)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(m){if(this._nativeAudioBufferSourceNode.buffer=m,m!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(m){this._nativeAudioBufferSourceNode.loop=m}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(m){this._nativeAudioBufferSourceNode.loopEnd=m}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(m){this._nativeAudioBufferSourceNode.loopStart=m}get onended(){return this._onended}set onended(m){const y=typeof m=="function"?h(this,m):null;this._nativeAudioBufferSourceNode.onended=y;const _=this._nativeAudioBufferSourceNode.onended;this._onended=_!==null&&_===y?m:_}get playbackRate(){return this._playbackRate}start(m=0,y=0,_){if(this._nativeAudioBufferSourceNode.start(m,y,_),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=_===void 0?[m,y]:[m,y,_]),this.context.state!=="closed"){Jc(this);const b=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",b),Mo(this)&&sf(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",b)}}stop(m=0){this._nativeAudioBufferSourceNode.stop(m),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=m)}},N3=(n,t,e,s,r)=>()=>{const a=new WeakMap;let u=null,h=null;const p=async(m,y)=>{let _=e(m);const b=mi(_,y);if(!b){const S={buffer:_.buffer,channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,loop:_.loop,loopEnd:_.loopEnd,loopStart:_.loopStart,playbackRate:_.playbackRate.value};_=t(y,S),u!==null&&_.start(...u),h!==null&&_.stop(h)}return a.set(y,_),b?await n(y,m.playbackRate,_.playbackRate):await s(y,m.playbackRate,_.playbackRate),await r(m,y,_),_};return{set start(m){u=m},set stop(m){h=m},render(m,y){const _=a.get(y);return _!==void 0?Promise.resolve(_):p(m,y)}}},P3=n=>"playbackRate"in n,z3=n=>"frequency"in n&&"gain"in n,U3=n=>"offset"in n,B3=n=>!("frequency"in n)&&"gain"in n,H3=n=>"detune"in n&&"frequency"in n&&!("gain"in n),V3=n=>"pan"in n,Ci=n=>lr(q2,n),rf=n=>lr(G2,n),Q0=(n,t)=>{const{activeInputs:e}=Ci(n);e.forEach(r=>r.forEach(([a])=>{t.includes(n)||Q0(a,[...t,n])}));const s=P3(n)?[n.playbackRate]:Y2(n)?Array.from(n.parameters.values()):z3(n)?[n.Q,n.detune,n.frequency,n.gain]:U3(n)?[n.offset]:B3(n)?[n.gain]:H3(n)?[n.detune,n.frequency]:V3(n)?[n.pan]:[];for(const r of s){const a=rf(r);a!==void 0&&a.activeInputs.forEach(([u])=>Q0(u,t))}Mo(n)&&sf(n)},Q2=n=>{Q0(n.destination,[])},j3=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),q3=(n,t,e,s,r,a,u,h,p)=>class extends n{constructor(y={}){if(p===null)throw new Error("Missing the native AudioContext constructor.");let _;try{_=new p(y)}catch(x){throw x.code===12&&x.message==="sampleRate is not in range"?e():x}if(_===null)throw s();if(!j3(y.latencyHint))throw new TypeError(`The provided value '${y.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(y.sampleRate!==void 0&&_.sampleRate!==y.sampleRate)throw e();super(_,2);const{latencyHint:b}=y,{sampleRate:S}=_;if(this._baseLatency=typeof _.baseLatency=="number"?_.baseLatency:b==="balanced"?512/S:b==="interactive"||b===void 0?256/S:b==="playback"?1024/S:Math.max(2,Math.min(128,Math.round(b*S/128)))*128/S,this._nativeAudioContext=_,p.name==="webkitAudioContext"?(this._nativeGainNode=_.createGain(),this._nativeOscillatorNode=_.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(_.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,_.state==="running"){this._state="suspended";const x=()=>{this._state==="suspended"&&(this._state=null),_.removeEventListener("statechange",x)};_.addEventListener("statechange",x)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Q2(this)}))}createMediaElementSource(y){return new r(this,{mediaElement:y})}createMediaStreamDestination(){return new a(this)}createMediaStreamSource(y){return new u(this,{mediaStream:y})}createMediaStreamTrackSource(y){return new h(this,{mediaStreamTrack:y})}resume(){return this._state==="suspended"?new Promise((y,_)=>{const b=()=>{this._nativeAudioContext.removeEventListener("statechange",b),this._nativeAudioContext.state==="running"?y():this.resume().then(y,_)};this._nativeAudioContext.addEventListener("statechange",b)}):this._nativeAudioContext.resume().catch(y=>{throw y===void 0||y.code===15?t():y})}suspend(){return this._nativeAudioContext.suspend().catch(y=>{throw y===void 0?t():y})}},G3=(n,t,e,s,r,a,u,h)=>class extends n{constructor(m,y){const _=a(m),b=u(_),S=r(_,y,b),x=b?t(h):null;super(m,!1,S,x),this._isNodeOfNativeOfflineAudioContext=b,this._nativeAudioDestinationNode=S}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(m){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(m>this._nativeAudioDestinationNode.maxChannelCount)throw e();this._nativeAudioDestinationNode.channelCount=m}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(m){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=m}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Z3=n=>{const t=new WeakMap,e=async(s,r)=>{const a=r.destination;return t.set(r,a),await n(s,r,a),a};return{render(s,r){const a=t.get(r);return a!==void 0?Promise.resolve(a):e(s,r)}}},W3=(n,t,e,s,r,a,u,h)=>(p,m)=>{const y=m.listener,_=()=>{const N=new Float32Array(1),j=t(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),F=u(m);let G=!1,q=[0,0,-1,0,1,0],W=[0,0,0];const Q=()=>{if(G)return;G=!0;const Z=s(m,256,9,0);Z.onaudioprocess=({inputBuffer:P})=>{const U=[a(P,N,0),a(P,N,1),a(P,N,2),a(P,N,3),a(P,N,4),a(P,N,5)];U.some((D,V)=>D!==q[V])&&(y.setOrientation(...U),q=U);const K=[a(P,N,6),a(P,N,7),a(P,N,8)];K.some((D,V)=>D!==W[V])&&(y.setPosition(...K),W=K)},j.connect(Z)},et=Z=>P=>{P!==q[Z]&&(q[Z]=P,y.setOrientation(...q))},k=Z=>P=>{P!==W[Z]&&(W[Z]=P,y.setPosition(...W))},X=(Z,P,U)=>{const K=e(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:P});K.connect(j,0,Z),K.start(),Object.defineProperty(K.offset,"defaultValue",{get(){return P}});const D=n({context:p},F,K.offset,Ei,Wi);return h(D,"value",V=>()=>V.call(D),V=>I=>{try{V.call(D,I)}catch(Y){if(Y.code!==9)throw Y}Q(),F&&U(I)}),D.cancelAndHoldAtTime=(V=>F?()=>{throw r()}:(...I)=>{const Y=V.apply(D,I);return Q(),Y})(D.cancelAndHoldAtTime),D.cancelScheduledValues=(V=>F?()=>{throw r()}:(...I)=>{const Y=V.apply(D,I);return Q(),Y})(D.cancelScheduledValues),D.exponentialRampToValueAtTime=(V=>F?()=>{throw r()}:(...I)=>{const Y=V.apply(D,I);return Q(),Y})(D.exponentialRampToValueAtTime),D.linearRampToValueAtTime=(V=>F?()=>{throw r()}:(...I)=>{const Y=V.apply(D,I);return Q(),Y})(D.linearRampToValueAtTime),D.setTargetAtTime=(V=>F?()=>{throw r()}:(...I)=>{const Y=V.apply(D,I);return Q(),Y})(D.setTargetAtTime),D.setValueAtTime=(V=>F?()=>{throw r()}:(...I)=>{const Y=V.apply(D,I);return Q(),Y})(D.setValueAtTime),D.setValueCurveAtTime=(V=>F?()=>{throw r()}:(...I)=>{const Y=V.apply(D,I);return Q(),Y})(D.setValueCurveAtTime),D};return{forwardX:X(0,0,et(0)),forwardY:X(1,0,et(1)),forwardZ:X(2,-1,et(2)),positionX:X(6,0,k(0)),positionY:X(7,0,k(1)),positionZ:X(8,0,k(2)),upX:X(3,0,et(3)),upY:X(4,1,et(4)),upZ:X(5,0,et(5))}},{forwardX:b,forwardY:S,forwardZ:x,positionX:A,positionY:E,positionZ:R,upX:z,upY:O,upZ:$}=y.forwardX===void 0?_():y;return{get forwardX(){return b},get forwardY(){return S},get forwardZ(){return x},get positionX(){return A},get positionY(){return E},get positionZ(){return R},get upX(){return z},get upY(){return O},get upZ(){return $}}},Ep=n=>"context"in n,of=n=>Ep(n[0]),Vl=(n,t,e,s)=>{for(const r of n)if(e(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(t),!0},$x=(n,t,[e,s],r)=>{Vl(n,[t,e,s],a=>a[0]===t&&a[1]===e,r)},Kx=(n,[t,e,s],r)=>{const a=n.get(t);a===void 0?n.set(t,new Set([[e,s]])):Vl(a,[e,s],u=>u[0]===e,r)},ru=n=>"inputs"in n,Cp=(n,t,e,s)=>{if(ru(t)){const r=t.inputs[s];return n.connect(r,e,0),[r,e,0]}return n.connect(t,e,s),[t,e,s]},$2=(n,t,e)=>{for(const s of n)if(s[0]===t&&s[1]===e)return n.delete(s),s;return null},F3=(n,t,e)=>Jp(n,s=>s[0]===t&&s[1]===e),K2=(n,t)=>{if(!nf(n).delete(t))throw new Error("Missing the expected event listener.")},J2=(n,t,e)=>{const s=lr(n,t),r=Jp(s,a=>a[0]===e);return s.size===0&&n.delete(t),r},Lp=(n,t,e,s)=>{ru(t)?n.disconnect(t.inputs[s],e,0):n.disconnect(t,e,s)},nn=n=>lr(Ly,n),Bh=n=>lr(My,n),zl=n=>W0.has(n),up=n=>!Kc.has(n),Jx=(n,t)=>new Promise(e=>{if(t!==null)e(!0);else{const s=n.createScriptProcessor(256,1,1),r=n.createGain(),a=n.createBuffer(1,2,44100),u=a.getChannelData(0);u[0]=1,u[1]=1;const h=n.createBufferSource();h.buffer=a,h.loop=!0,h.connect(s).connect(n.destination),h.connect(r),h.disconnect(r),s.onaudioprocess=p=>{const m=p.inputBuffer.getChannelData(0);Array.prototype.some.call(m,y=>y===1)?e(!0):e(!1),h.stop(),s.onaudioprocess=null,h.disconnect(s),s.disconnect(n.destination)},h.start()}}),c0=(n,t)=>{const e=new Map;for(const s of n)for(const r of s){const a=e.get(r);e.set(r,a===void 0?1:a+1)}e.forEach((s,r)=>t(r,s))},Mp=n=>"context"in n,Y3=n=>{const t=new Map;n.connect=(e=>(s,r=0,a=0)=>{const u=Mp(s)?e(s,r,a):e(s,r),h=t.get(s);return h===void 0?t.set(s,[{input:a,output:r}]):h.every(p=>p.input!==a||p.output!==r)&&h.push({input:a,output:r}),u})(n.connect.bind(n)),n.disconnect=(e=>(s,r,a)=>{if(e.apply(n),s===void 0)t.clear();else if(typeof s=="number")for(const[u,h]of t){const p=h.filter(m=>m.output!==s);p.length===0?t.delete(u):t.set(u,p)}else if(t.has(s))if(r===void 0)t.delete(s);else{const u=t.get(s);if(u!==void 0){const h=u.filter(p=>p.output!==r&&(p.input!==a||a===void 0));h.length===0?t.delete(s):t.set(s,h)}}for(const[u,h]of t)h.forEach(p=>{Mp(u)?n.connect(u,p.output,p.input):n.connect(u,p.output)})})(n.disconnect)},X3=(n,t,e,s)=>{const{activeInputs:r,passiveInputs:a}=rf(t),{outputs:u}=Ci(n),h=nf(n),p=m=>{const y=nn(n),_=Bh(t);if(m){const b=J2(a,n,e);$x(r,n,b,!1),!s&&!zl(n)&&y.connect(_,e)}else{const b=F3(r,n,e);Kx(a,b,!1),!s&&!zl(n)&&y.disconnect(_,e)}};return Vl(u,[t,e],m=>m[0]===t&&m[1]===e,!0)?(h.add(p),Mo(n)?$x(r,n,[e,p],!0):Kx(a,[n,e,p],!0),!0):!1},Q3=(n,t,e,s)=>{const{activeInputs:r,passiveInputs:a}=Ci(t),u=$2(r[s],n,e);return u===null?[F2(a,n,e,s)[2],!1]:[u[2],!0]},$3=(n,t,e)=>{const{activeInputs:s,passiveInputs:r}=rf(t),a=$2(s,n,e);return a===null?[J2(r,n,e)[1],!1]:[a[2],!0]},Oy=(n,t,e,s,r)=>{const[a,u]=Q3(n,e,s,r);if(a!==null&&(K2(n,a),u&&!t&&!zl(n)&&Lp(nn(n),nn(e),s,r)),Mo(e)){const{activeInputs:h}=Ci(e);X0(e,h)}},Dy=(n,t,e,s)=>{const[r,a]=$3(n,e,s);r!==null&&(K2(n,r),a&&!t&&!zl(n)&&nn(n).disconnect(Bh(e),s))},K3=(n,t)=>{const e=Ci(n),s=[];for(const r of e.outputs)of(r)?Oy(n,t,...r):Dy(n,t,...r),s.push(r[0]);return e.outputs.clear(),s},J3=(n,t,e)=>{const s=Ci(n),r=[];for(const a of s.outputs)a[1]===e&&(of(a)?Oy(n,t,...a):Dy(n,t,...a),r.push(a[0]),s.outputs.delete(a));return r},tM=(n,t,e,s,r)=>{const a=Ci(n);return Array.from(a.outputs).filter(u=>u[0]===e&&(s===void 0||u[1]===s)&&(r===void 0||u[2]===r)).map(u=>(of(u)?Oy(n,t,...u):Dy(n,t,...u),a.outputs.delete(u),u[0]))},eM=(n,t,e,s,r,a,u,h,p,m,y,_,b,S,x,A)=>class extends m{constructor(R,z,O,$){super(O),this._context=R,this._nativeAudioNode=O;const N=y(R);_(N)&&e(Jx,()=>Jx(N,A))!==!0&&Y3(O),Ly.set(this,O),Z2.set(this,new Set),R.state!=="closed"&&z&&Jc(this),n(this,$,O)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(R){this._nativeAudioNode.channelCount=R}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(R){this._nativeAudioNode.channelCountMode=R}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(R){this._nativeAudioNode.channelInterpretation=R}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(R,z=0,O=0){if(z<0||z>=this._nativeAudioNode.numberOfOutputs)throw r();const $=y(this._context),N=x($);if(b(R)||S(R))throw a();if(Ep(R)){const G=nn(R);try{const W=Cp(this._nativeAudioNode,G,z,O),Q=up(this);(N||Q)&&this._nativeAudioNode.disconnect(...W),this.context.state!=="closed"&&!Q&&up(R)&&Jc(R)}catch(W){throw W.code===12?a():W}if(t(this,R,z,O,N)){const W=p([this],R);c0(W,s(N))}return R}const j=Bh(R);if(j.name==="playbackRate"&&j.maxValue===1024)throw u();try{this._nativeAudioNode.connect(j,z),(N||up(this))&&this._nativeAudioNode.disconnect(j,z)}catch(G){throw G.code===12?a():G}if(X3(this,R,z,N)){const G=p([this],R);c0(G,s(N))}}disconnect(R,z,O){let $;const N=y(this._context),j=x(N);if(R===void 0)$=K3(this,j);else if(typeof R=="number"){if(R<0||R>=this.numberOfOutputs)throw r();$=J3(this,j,R)}else{if(z!==void 0&&(z<0||z>=this.numberOfOutputs)||Ep(R)&&O!==void 0&&(O<0||O>=R.numberOfInputs))throw r();if($=tM(this,j,R,z,O),$.length===0)throw a()}for(const F of $){const G=p([this],F);c0(G,h)}}},nM=(n,t,e,s,r,a,u,h,p,m,y,_,b)=>(S,x,A,E=null,R=null)=>{const z=A.value,O=new f3(z),$=x?s(O):null,N={get defaultValue(){return z},get maxValue(){return E===null?A.maxValue:E},get minValue(){return R===null?A.minValue:R},get value(){return A.value},set value(j){A.value=j,N.setValueAtTime(j,S.context.currentTime)},cancelAndHoldAtTime(j){if(typeof A.cancelAndHoldAtTime=="function")$===null&&O.flush(S.context.currentTime),O.add(r(j)),A.cancelAndHoldAtTime(j);else{const F=Array.from(O).pop();$===null&&O.flush(S.context.currentTime),O.add(r(j));const G=Array.from(O).pop();A.cancelScheduledValues(j),F!==G&&G!==void 0&&(G.type==="exponentialRampToValue"?A.exponentialRampToValueAtTime(G.value,G.endTime):G.type==="linearRampToValue"?A.linearRampToValueAtTime(G.value,G.endTime):G.type==="setValue"?A.setValueAtTime(G.value,G.startTime):G.type==="setValueCurve"&&A.setValueCurveAtTime(G.values,G.startTime,G.duration))}return N},cancelScheduledValues(j){return $===null&&O.flush(S.context.currentTime),O.add(a(j)),A.cancelScheduledValues(j),N},exponentialRampToValueAtTime(j,F){if(j===0)throw new RangeError;if(!Number.isFinite(F)||F<0)throw new RangeError;const G=S.context.currentTime;return $===null&&O.flush(G),Array.from(O).length===0&&(O.add(m(z,G)),A.setValueAtTime(z,G)),O.add(u(j,F)),A.exponentialRampToValueAtTime(j,F),N},linearRampToValueAtTime(j,F){const G=S.context.currentTime;return $===null&&O.flush(G),Array.from(O).length===0&&(O.add(m(z,G)),A.setValueAtTime(z,G)),O.add(h(j,F)),A.linearRampToValueAtTime(j,F),N},setTargetAtTime(j,F,G){return $===null&&O.flush(S.context.currentTime),O.add(p(j,F,G)),A.setTargetAtTime(j,F,G),N},setValueAtTime(j,F){return $===null&&O.flush(S.context.currentTime),O.add(m(j,F)),A.setValueAtTime(j,F),N},setValueCurveAtTime(j,F,G){const q=j instanceof Float32Array?j:new Float32Array(j);if(_!==null&&_.name==="webkitAudioContext"){const W=F+G,Q=S.context.sampleRate,et=Math.ceil(F*Q),k=Math.floor(W*Q),X=k-et,Z=new Float32Array(X);for(let U=0;U<X;U+=1){const K=(q.length-1)/G*((et+U)/Q-F),D=Math.floor(K),V=Math.ceil(K);Z[U]=D===V?q[D]:(1-(K-D))*q[D]+(1-(V-K))*q[V]}$===null&&O.flush(S.context.currentTime),O.add(y(Z,F,G)),A.setValueCurveAtTime(Z,F,G);const P=k/Q;P<W&&b(N,Z[Z.length-1],P),b(N,q[q.length-1],W)}else $===null&&O.flush(S.context.currentTime),O.add(y(q,F,G)),A.setValueCurveAtTime(q,F,G);return N}};return e.set(N,A),t.set(N,S),n(N,$),N},iM=n=>({replay(t){for(const e of n)if(e.type==="exponentialRampToValue"){const{endTime:s,value:r}=e;t.exponentialRampToValueAtTime(r,s)}else if(e.type==="linearRampToValue"){const{endTime:s,value:r}=e;t.linearRampToValueAtTime(r,s)}else if(e.type==="setTarget"){const{startTime:s,target:r,timeConstant:a}=e;t.setTargetAtTime(r,s,a)}else if(e.type==="setValue"){const{startTime:s,value:r}=e;t.setValueAtTime(r,s)}else if(e.type==="setValueCurve"){const{duration:s,startTime:r,values:a}=e;t.setValueCurveAtTime(a,r,s)}else throw new Error("Can't apply an unknown automation.")}});class tT{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((s,r)=>t.call(e,s,r,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const sM={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},rM=(n,t,e,s,r,a,u,h,p,m,y,_,b,S)=>class extends t{constructor(A,E,R){var z;const O=h(A),$=p(O),N=y({...sM,...R});b(N);const j=F0.get(O),F=j?.get(E),G=$||O.state!=="closed"?O:(z=u(O))!==null&&z!==void 0?z:O,q=r(G,$?null:A.baseLatency,m,E,F,N),W=$?s(E,N,F):null;super(A,!0,q,W);const Q=[];q.parameters.forEach((k,X)=>{const Z=e(this,$,k);Q.push([X,Z])}),this._nativeAudioWorkletNode=q,this._onprocessorerror=null,this._parameters=new tT(Q),$&&n(O,this);const{activeInputs:et}=a(this);_(q,et)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(A){const E=typeof A=="function"?S(this,A):null;this._nativeAudioWorkletNode.onprocessorerror=E;const R=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=R!==null&&R===E?A:R}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function kp(n,t,e,s,r){if(typeof n.copyFromChannel=="function")t[e].byteLength===0&&(t[e]=new Float32Array(128)),n.copyFromChannel(t[e],s,r);else{const a=n.getChannelData(s);if(t[e].byteLength===0)t[e]=a.slice(r,r+128);else{const u=new Float32Array(a.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);t[e].set(u)}}}const eT=(n,t,e,s,r)=>{typeof n.copyToChannel=="function"?t[e].byteLength!==0&&n.copyToChannel(t[e],s,r):t[e].byteLength!==0&&n.getChannelData(s).set(t[e],r)},Op=(n,t)=>{const e=[];for(let s=0;s<n;s+=1){const r=[],a=typeof t=="number"?t:t[s];for(let u=0;u<a;u+=1)r.push(new Float32Array(128));e.push(r)}return e},oM=(n,t)=>{const e=lr(Y0,n),s=nn(t);return lr(e,s)},aM=async(n,t,e,s,r,a,u)=>{const h=t===null?Math.ceil(n.context.length/128)*128:t.length,p=s.channelCount*s.numberOfInputs,m=r.reduce((E,R)=>E+R,0),y=m===0?null:e.createBuffer(m,h,e.sampleRate);if(a===void 0)throw new Error("Missing the processor constructor.");const _=Ci(n),b=await oM(e,n),S=Op(s.numberOfInputs,s.channelCount),x=Op(s.numberOfOutputs,r),A=Array.from(n.parameters.keys()).reduce((E,R)=>({...E,[R]:new Float32Array(128)}),{});for(let E=0;E<h;E+=128){if(s.numberOfInputs>0&&t!==null)for(let R=0;R<s.numberOfInputs;R+=1)for(let z=0;z<s.channelCount;z+=1)kp(t,S[R],z,z,E);a.parameterDescriptors!==void 0&&t!==null&&a.parameterDescriptors.forEach(({name:R},z)=>{kp(t,A,R,p+z,E)});for(let R=0;R<s.numberOfInputs;R+=1)for(let z=0;z<r[R];z+=1)x[R][z].byteLength===0&&(x[R][z]=new Float32Array(128));try{const R=S.map((O,$)=>_.activeInputs[$].size===0?[]:O),z=u(E/e.sampleRate,e.sampleRate,()=>b.process(R,x,A));if(y!==null)for(let O=0,$=0;O<s.numberOfOutputs;O+=1){for(let N=0;N<r[O];N+=1)eT(y,x[O],N,$+N,E);$+=r[O]}if(!z)break}catch(R){n.dispatchEvent(new ErrorEvent("processorerror",{colno:R.colno,filename:R.filename,lineno:R.lineno,message:R.message}));break}}return y},lM=(n,t,e,s,r,a,u,h,p,m,y,_,b,S,x,A)=>(E,R,z)=>{const O=new WeakMap;let $=null;const N=async(j,F)=>{let G=y(j),q=null;const W=mi(G,F),Q=Array.isArray(R.outputChannelCount)?R.outputChannelCount:Array.from(R.outputChannelCount);if(_===null){const et=Q.reduce((P,U)=>P+U,0),k=r(F,{channelCount:Math.max(1,et),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,et)}),X=[];for(let P=0;P<j.numberOfOutputs;P+=1)X.push(s(F,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Q[P]}));const Z=u(F,{channelCount:R.channelCount,channelCountMode:R.channelCountMode,channelInterpretation:R.channelInterpretation,gain:1});Z.connect=t.bind(null,X),Z.disconnect=p.bind(null,X),q=[k,X,Z]}else W||(G=new _(F,E));if(O.set(F,q===null?G:q[2]),q!==null){if($===null){if(z===void 0)throw new Error("Missing the processor constructor.");if(b===null)throw new Error("Missing the native OfflineAudioContext constructor.");const U=j.channelCount*j.numberOfInputs,K=z.parameterDescriptors===void 0?0:z.parameterDescriptors.length,D=U+K;$=aM(j,D===0?null:await(async()=>{const I=new b(D,Math.ceil(j.context.length/128)*128,F.sampleRate),Y=[],at=[];for(let yt=0;yt<R.numberOfInputs;yt+=1)Y.push(u(I,{channelCount:R.channelCount,channelCountMode:R.channelCountMode,channelInterpretation:R.channelInterpretation,gain:1})),at.push(r(I,{channelCount:R.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:R.channelCount}));const mt=await Promise.all(Array.from(j.parameters.values()).map(async yt=>{const kt=a(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:yt.value});return await S(I,yt,kt.offset),kt})),gt=s(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,U+K)});for(let yt=0;yt<R.numberOfInputs;yt+=1){Y[yt].connect(at[yt]);for(let kt=0;kt<R.channelCount;kt+=1)at[yt].connect(gt,kt,yt*R.channelCount+kt)}for(const[yt,kt]of mt.entries())kt.connect(gt,0,U+yt),kt.start(0);return gt.connect(I.destination),await Promise.all(Y.map(yt=>x(j,I,yt))),A(I)})(),F,R,Q,z,m)}const et=await $,k=e(F,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[X,Z,P]=q;et!==null&&(k.buffer=et,k.start(0)),k.connect(X);for(let U=0,K=0;U<j.numberOfOutputs;U+=1){const D=Z[U];for(let V=0;V<Q[U];V+=1)X.connect(D,K+V,V);K+=Q[U]}return P}if(W)for(const[et,k]of j.parameters.entries())await n(F,k,G.parameters.get(et));else for(const[et,k]of j.parameters.entries())await S(F,k,G.parameters.get(et));return await x(j,F,G),G};return{render(j,F){h(F,j);const G=O.get(F);return G!==void 0?Promise.resolve(G):N(j,F)}}},cM=(n,t,e,s,r,a,u,h,p,m,y,_,b,S,x,A,E,R,z,O)=>class extends x{constructor(N,j){super(N,j),this._nativeContext=N,this._audioWorklet=n===void 0?void 0:{addModule:(F,G)=>n(this,F,G)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new r(this)}createBuffer(N,j,F){return new e({length:j,numberOfChannels:N,sampleRate:F})}createBufferSource(){return new s(this)}createChannelMerger(N=6){return new a(this,{numberOfInputs:N})}createChannelSplitter(N=6){return new u(this,{numberOfOutputs:N})}createConstantSource(){return new h(this)}createConvolver(){return new p(this)}createDelay(N=1){return new y(this,{maxDelayTime:N})}createDynamicsCompressor(){return new _(this)}createGain(){return new b(this)}createIIRFilter(N,j){return new S(this,{feedback:j,feedforward:N})}createOscillator(){return new A(this)}createPanner(){return new E(this)}createPeriodicWave(N,j,F={disableNormalization:!1}){return new R(this,{...F,imag:j,real:N})}createStereoPanner(){return new z(this)}createWaveShaper(){return new O(this)}decodeAudioData(N,j,F){return m(this._nativeContext,N).then(G=>(typeof j=="function"&&j(G),G),G=>{throw typeof F=="function"&&F(G),G})}},uM={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},hM=(n,t,e,s,r,a,u,h)=>class extends n{constructor(m,y){const _=a(m),b={...uM,...y},S=r(_,b),x=u(_),A=x?e():null;super(m,!1,S,A),this._Q=t(this,x,S.Q,Ei,Wi),this._detune=t(this,x,S.detune,1200*Math.log2(Ei),-1200*Math.log2(Ei)),this._frequency=t(this,x,S.frequency,m.sampleRate/2,0),this._gain=t(this,x,S.gain,40*Math.log10(Ei),Wi),this._nativeBiquadFilterNode=S,h(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(m){this._nativeBiquadFilterNode.type=m}getFrequencyResponse(m,y,_){try{this._nativeBiquadFilterNode.getFrequencyResponse(m,y,_)}catch(b){throw b.code===11?s():b}if(m.length!==y.length||y.length!==_.length)throw s()}},fM=(n,t,e,s,r)=>()=>{const a=new WeakMap,u=async(h,p)=>{let m=e(h);const y=mi(m,p);if(!y){const _={Q:m.Q.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,gain:m.gain.value,type:m.type};m=t(p,_)}return a.set(p,m),y?(await n(p,h.Q,m.Q),await n(p,h.detune,m.detune),await n(p,h.frequency,m.frequency),await n(p,h.gain,m.gain)):(await s(p,h.Q,m.Q),await s(p,h.detune,m.detune),await s(p,h.frequency,m.frequency),await s(p,h.gain,m.gain)),await r(h,p,m),m};return{render(h,p){const m=a.get(p);return m!==void 0?Promise.resolve(m):u(h,p)}}},dM=(n,t)=>(e,s)=>{const r=t.get(e);if(r!==void 0)return r;const a=n.get(e);if(a!==void 0)return a;try{const u=s();return u instanceof Promise?(n.set(e,u),u.catch(()=>!1).then(h=>(n.delete(e),t.set(e,h),h))):(t.set(e,u),u)}catch{return t.set(e,!1),!1}},pM={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},mM=(n,t,e,s,r)=>class extends n{constructor(u,h){const p=s(u),m={...pM,...h},y=e(p,m),_=r(p)?t():null;super(u,!1,y,_)}},_M=(n,t,e)=>()=>{const s=new WeakMap,r=async(a,u)=>{let h=t(a);if(!mi(h,u)){const m={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,numberOfInputs:h.numberOfInputs};h=n(u,m)}return s.set(u,h),await e(a,u,h),h};return{render(a,u){const h=s.get(u);return h!==void 0?Promise.resolve(h):r(a,u)}}},gM={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},yM=(n,t,e,s,r,a)=>class extends n{constructor(h,p){const m=s(h),y=a({...gM,...p}),_=e(m,y),b=r(m)?t():null;super(h,!1,_,b)}},vM=(n,t,e)=>()=>{const s=new WeakMap,r=async(a,u)=>{let h=t(a);if(!mi(h,u)){const m={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,numberOfOutputs:h.numberOfOutputs};h=n(u,m)}return s.set(u,h),await e(a,u,h),h};return{render(a,u){const h=s.get(u);return h!==void 0?Promise.resolve(h):r(a,u)}}},bM=n=>(t,e,s)=>n(e,t,s),wM=n=>(t,e,s=0,r=0)=>{const a=t[s];if(a===void 0)throw n();return Mp(e)?a.connect(e,0,r):a.connect(e,0)},xM=n=>(t,e)=>{const s=n(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=t.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(e),s.start(),()=>{s.stop(),s.disconnect(e)}},SM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},TM=(n,t,e,s,r,a,u)=>class extends n{constructor(p,m){const y=r(p),_={...SM,...m},b=s(y,_),S=a(y),x=S?e():null;super(p,!1,b,x),this._constantSourceNodeRenderer=x,this._nativeConstantSourceNode=b,this._offset=t(this,S,b.offset,Ei,Wi),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(p){const m=typeof p=="function"?u(this,p):null;this._nativeConstantSourceNode.onended=m;const y=this._nativeConstantSourceNode.onended;this._onended=y!==null&&y===m?p:y}start(p=0){if(this._nativeConstantSourceNode.start(p),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=p),this.context.state!=="closed"){Jc(this);const m=()=>{this._nativeConstantSourceNode.removeEventListener("ended",m),Mo(this)&&sf(this)};this._nativeConstantSourceNode.addEventListener("ended",m)}}stop(p=0){this._nativeConstantSourceNode.stop(p),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=p)}},AM=(n,t,e,s,r)=>()=>{const a=new WeakMap;let u=null,h=null;const p=async(m,y)=>{let _=e(m);const b=mi(_,y);if(!b){const S={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,offset:_.offset.value};_=t(y,S),u!==null&&_.start(u),h!==null&&_.stop(h)}return a.set(y,_),b?await n(y,m.offset,_.offset):await s(y,m.offset,_.offset),await r(m,y,_),_};return{set start(m){u=m},set stop(m){h=m},render(m,y){const _=a.get(y);return _!==void 0?Promise.resolve(_):p(m,y)}}},EM=n=>t=>(n[0]=t,n[0]),CM={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},LM=(n,t,e,s,r,a)=>class extends n{constructor(h,p){const m=s(h),y={...CM,...p},_=e(m,y),S=r(m)?t():null;super(h,!1,_,S),this._isBufferNullified=!1,this._nativeConvolverNode=_,y.buffer!==null&&a(this,y.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(h){if(this._nativeConvolverNode.buffer=h,h===null&&this._nativeConvolverNode.buffer!==null){const p=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=p.createBuffer(1,1,p.sampleRate),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(h){this._nativeConvolverNode.normalize=h}},MM=(n,t,e)=>()=>{const s=new WeakMap,r=async(a,u)=>{let h=t(a);if(!mi(h,u)){const m={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,disableNormalization:!h.normalize};h=n(u,m)}return s.set(u,h),ru(h)?await e(a,u,h.inputs[0]):await e(a,u,h),h};return{render(a,u){const h=s.get(u);return h!==void 0?Promise.resolve(h):r(a,u)}}},kM=(n,t)=>(e,s,r)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(e,s,r)}catch(a){throw a.name==="SyntaxError"?n():a}},OM=()=>new DOMException("","DataCloneError"),tS=n=>{const{port1:t,port2:e}=new MessageChannel;return new Promise(s=>{const r=()=>{e.onmessage=null,t.close(),e.close(),s()};e.onmessage=()=>r();try{t.postMessage(n,[n])}catch{}finally{r()}})},DM=(n,t,e,s,r,a,u,h,p,m,y)=>(_,b)=>{const S=u(_)?_:a(_);if(r.has(b)){const x=e();return Promise.reject(x)}try{r.add(b)}catch{}return t(p,()=>p(S))?S.decodeAudioData(b).then(x=>(tS(b).catch(()=>{}),t(h,()=>h(x))||y(x),n.add(x),x)):new Promise((x,A)=>{const E=async()=>{try{await tS(b)}catch{}},R=z=>{A(z),E()};try{S.decodeAudioData(b,z=>{typeof z.copyFromChannel!="function"&&(m(z),ky(z)),n.add(z),E().then(()=>x(z))},z=>{R(z===null?s():z)})}catch(z){R(z)}})},RM=(n,t,e,s,r,a,u,h)=>(p,m)=>{const y=t.get(p);if(y===void 0)throw new Error("Missing the expected cycle count.");const _=a(p.context),b=h(_);if(y===m){if(t.delete(p),!b&&u(p)){const S=s(p),{outputs:x}=e(p);for(const A of x)if(of(A)){const E=s(A[0]);n(S,E,A[1],A[2])}else{const E=r(A[0]);S.connect(E,A[1])}}}else t.set(p,y-m)},IM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},NM=(n,t,e,s,r,a,u)=>class extends n{constructor(p,m){const y=r(p),_={...IM,...m},b=s(y,_),S=a(y),x=S?e(_.maxDelayTime):null;super(p,!1,b,x),this._delayTime=t(this,S,b.delayTime),u(this,_.maxDelayTime)}get delayTime(){return this._delayTime}},PM=(n,t,e,s,r)=>a=>{const u=new WeakMap,h=async(p,m)=>{let y=e(p);const _=mi(y,m);if(!_){const b={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,delayTime:y.delayTime.value,maxDelayTime:a};y=t(m,b)}return u.set(m,y),_?await n(m,p.delayTime,y.delayTime):await s(m,p.delayTime,y.delayTime),await r(p,m,y),y};return{render(p,m){const y=u.get(m);return y!==void 0?Promise.resolve(y):h(p,m)}}},zM=n=>(t,e,s,r)=>n(t[r],a=>a[0]===e&&a[1]===s),UM=n=>(t,e)=>{n(t).delete(e)},BM=n=>"delayTime"in n,HM=(n,t,e)=>function s(r,a){const u=Ep(a)?a:e(n,a);if(BM(u))return[];if(r[0]===u)return[r];if(r.includes(u))return[];const{outputs:h}=t(u);return Array.from(h).map(p=>s([...r,u],p[0])).reduce((p,m)=>p.concat(m),[])},Zd=(n,t,e)=>{const s=t[e];if(s===void 0)throw n();return s},VM=n=>(t,e=void 0,s=void 0,r=0)=>e===void 0?t.forEach(a=>a.disconnect()):typeof e=="number"?Zd(n,t,e).disconnect():Mp(e)?s===void 0?t.forEach(a=>a.disconnect(e)):r===void 0?Zd(n,t,s).disconnect(e,0):Zd(n,t,s).disconnect(e,0,r):s===void 0?t.forEach(a=>a.disconnect(e)):Zd(n,t,s).disconnect(e,0),jM={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},qM=(n,t,e,s,r,a,u,h)=>class extends n{constructor(m,y){const _=a(m),b={...jM,...y},S=s(_,b),x=u(_),A=x?e():null;super(m,!1,S,A),this._attack=t(this,x,S.attack),this._knee=t(this,x,S.knee),this._nativeDynamicsCompressorNode=S,this._ratio=t(this,x,S.ratio),this._release=t(this,x,S.release),this._threshold=t(this,x,S.threshold),h(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(m){const y=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=m,m>2)throw this._nativeDynamicsCompressorNode.channelCount=y,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(m){const y=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=m,m==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=y,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},GM=(n,t,e,s,r)=>()=>{const a=new WeakMap,u=async(h,p)=>{let m=e(h);const y=mi(m,p);if(!y){const _={attack:m.attack.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,knee:m.knee.value,ratio:m.ratio.value,release:m.release.value,threshold:m.threshold.value};m=t(p,_)}return a.set(p,m),y?(await n(p,h.attack,m.attack),await n(p,h.knee,m.knee),await n(p,h.ratio,m.ratio),await n(p,h.release,m.release),await n(p,h.threshold,m.threshold)):(await s(p,h.attack,m.attack),await s(p,h.knee,m.knee),await s(p,h.ratio,m.ratio),await s(p,h.release,m.release),await s(p,h.threshold,m.threshold)),await r(h,p,m),m};return{render(h,p){const m=a.get(p);return m!==void 0?Promise.resolve(m):u(h,p)}}},ZM=()=>new DOMException("","EncodingError"),WM=n=>t=>new Promise((e,s)=>{if(n===null){s(new SyntaxError);return}const r=n.document.head;if(r===null)s(new SyntaxError);else{const a=n.document.createElement("script"),u=new Blob([t],{type:"application/javascript"}),h=URL.createObjectURL(u),p=n.onerror,m=()=>{n.onerror=p,URL.revokeObjectURL(h)};n.onerror=(y,_,b,S,x)=>{if(_===h||_===n.location.href&&b===1&&S===1)return m(),s(x),!1;if(p!==null)return p(y,_,b,S,x)},a.onerror=()=>{m(),s(new SyntaxError)},a.onload=()=>{m(),e()},a.src=h,a.type="module",r.appendChild(a)}}),FM=n=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,s,r){if(s!==null){let a=this._listeners.get(s);a===void 0&&(a=n(this,s),typeof s=="function"&&this._listeners.set(s,a)),this._nativeEventTarget.addEventListener(e,a,r)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,s,r){const a=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(e,a===void 0?null:a,r)}},YM=n=>(t,e,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(t*e)}},currentTime:{configurable:!0,get(){return t}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},XM=n=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw n()},QM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},$M=(n,t,e,s,r,a)=>class extends n{constructor(h,p){const m=r(h),y={...QM,...p},_=s(m,y),b=a(m),S=b?e():null;super(h,!1,_,S),this._gain=t(this,b,_.gain,Ei,Wi)}get gain(){return this._gain}},KM=(n,t,e,s,r)=>()=>{const a=new WeakMap,u=async(h,p)=>{let m=e(h);const y=mi(m,p);if(!y){const _={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:m.gain.value};m=t(p,_)}return a.set(p,m),y?await n(p,h.gain,m.gain):await s(p,h.gain,m.gain),await r(h,p,m),m};return{render(h,p){const m=a.get(p);return m!==void 0?Promise.resolve(m):u(h,p)}}},JM=(n,t)=>e=>t(n,e),tk=n=>t=>{const e=n(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer},ek=n=>t=>{var e;return(e=n.get(t))!==null&&e!==void 0?e:0},nk=n=>t=>{const e=n(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer},ik=n=>t=>n.get(t),Jn=()=>new DOMException("","InvalidStateError"),sk=n=>t=>{const e=n.get(t);if(e===void 0)throw Jn();return e},rk=(n,t)=>e=>{let s=n.get(e);if(s!==void 0)return s;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new t(1,1,44100),n.set(e,s),s},ok=n=>t=>{const e=n.get(t);if(e===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return e},tm=()=>new DOMException("","InvalidAccessError"),ak=n=>{n.getFrequencyResponse=(t=>(e,s,r)=>{if(e.length!==s.length||s.length!==r.length)throw tm();return t.call(n,e,s,r)})(n.getFrequencyResponse)},lk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},ck=(n,t,e,s,r,a)=>class extends n{constructor(h,p){const m=s(h),y=r(m),_={...lk,...p},b=t(m,y?null:h.baseLatency,_),S=y?e(_.feedback,_.feedforward):null;super(h,!1,b,S),ak(b),this._nativeIIRFilterNode=b,a(this,1)}getFrequencyResponse(h,p,m){return this._nativeIIRFilterNode.getFrequencyResponse(h,p,m)}},nT=(n,t,e,s,r,a,u,h,p,m,y)=>{const _=m.length;let b=h;for(let S=0;S<_;S+=1){let x=e[0]*m[S];for(let A=1;A<r;A+=1){const E=b-A&p-1;x+=e[A]*a[E],x-=n[A]*u[E]}for(let A=r;A<s;A+=1)x+=e[A]*a[b-A&p-1];for(let A=r;A<t;A+=1)x-=n[A]*u[b-A&p-1];a[b]=m[S],u[b]=x,b=b+1&p-1,y[S]=x}return b},uk=(n,t,e,s)=>{const r=e instanceof Float64Array?e:new Float64Array(e),a=s instanceof Float64Array?s:new Float64Array(s),u=r.length,h=a.length,p=Math.min(u,h);if(r[0]!==1){for(let x=0;x<u;x+=1)a[x]/=r[0];for(let x=1;x<h;x+=1)r[x]/=r[0]}const m=32,y=new Float32Array(m),_=new Float32Array(m),b=t.createBuffer(n.numberOfChannels,n.length,n.sampleRate),S=n.numberOfChannels;for(let x=0;x<S;x+=1){const A=n.getChannelData(x),E=b.getChannelData(x);y.fill(0),_.fill(0),nT(r,u,a,h,p,y,_,0,m,A,E)}return b},hk=(n,t,e,s,r)=>(a,u)=>{const h=new WeakMap;let p=null;const m=async(y,_)=>{let b=null,S=t(y);const x=mi(S,_);if(_.createIIRFilter===void 0?b=n(_,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):x||(S=_.createIIRFilter(u,a)),h.set(_,b===null?S:b),b!==null){if(p===null){if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");const E=new e(y.context.destination.channelCount,y.context.length,_.sampleRate);p=(async()=>{await s(y,E,E.destination);const R=await r(E);return uk(R,_,a,u)})()}const A=await p;return b.buffer=A,b.start(0),b}return await s(y,_,S),S};return{render(y,_){const b=h.get(_);return b!==void 0?Promise.resolve(b):m(y,_)}}},fk=(n,t,e,s,r,a)=>u=>(h,p)=>{const m=n.get(h);if(m===void 0){if(!u&&a(h)){const y=s(h),{outputs:_}=e(h);for(const b of _)if(of(b)){const S=s(b[0]);t(y,S,b[1],b[2])}else{const S=r(b[0]);y.disconnect(S,b[1])}}n.set(h,p)}else n.set(h,m+p)},dk=(n,t)=>e=>{const s=n.get(e);return t(s)||t(e)},pk=(n,t)=>e=>n.has(e)||t(e),mk=(n,t)=>e=>n.has(e)||t(e),_k=(n,t)=>e=>{const s=n.get(e);return t(s)||t(e)},gk=n=>t=>n!==null&&t instanceof n,yk=n=>t=>n!==null&&typeof n.AudioNode=="function"&&t instanceof n.AudioNode,vk=n=>t=>n!==null&&typeof n.AudioParam=="function"&&t instanceof n.AudioParam,bk=(n,t)=>e=>n(e)||t(e),wk=n=>t=>n!==null&&t instanceof n,xk=n=>n!==null&&n.isSecureContext,Sk=(n,t,e,s)=>class extends n{constructor(a,u){const h=e(a),p=t(h,u);if(s(h))throw TypeError();super(a,!0,p,null),this._nativeMediaElementAudioSourceNode=p}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},Tk={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Ak=(n,t,e,s)=>class extends n{constructor(a,u){const h=e(a);if(s(h))throw new TypeError;const p={...Tk,...u},m=t(h,p);super(a,!1,m,null),this._nativeMediaStreamAudioDestinationNode=m}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},Ek=(n,t,e,s)=>class extends n{constructor(a,u){const h=e(a),p=t(h,u);if(s(h))throw new TypeError;super(a,!0,p,null),this._nativeMediaStreamAudioSourceNode=p}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},Ck=(n,t,e)=>class extends n{constructor(r,a){const u=e(r),h=t(u,a);super(r,!0,h,null)}},Lk=(n,t,e,s,r,a)=>class extends e{constructor(h,p){super(h),this._nativeContext=h,Kp.set(this,h),s(h)&&r.set(h,new Set),this._destination=new n(this,p),this._listener=t(this,h),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(h){const p=typeof h=="function"?a(this,h):null;this._nativeContext.onstatechange=p;const m=this._nativeContext.onstatechange;this._onstatechange=m!==null&&m===p?h:m}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Hh=n=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const e=n.decodeAudioData(t.buffer,()=>{});return e===void 0?!1:(e.catch(()=>{}),!0)}catch{}return!1},Mk=(n,t)=>(e,s,r)=>{const a=new Set;return e.connect=(u=>(h,p=0,m=0)=>{const y=a.size===0;if(t(h))return u.call(e,h,p,m),n(a,[h,p,m],_=>_[0]===h&&_[1]===p&&_[2]===m,!0),y&&s(),h;u.call(e,h,p),n(a,[h,p],_=>_[0]===h&&_[1]===p,!0),y&&s()})(e.connect),e.disconnect=(u=>(h,p,m)=>{const y=a.size>0;if(h===void 0)u.apply(e),a.clear();else if(typeof h=="number"){u.call(e,h);for(const b of a)b[1]===h&&a.delete(b)}else{t(h)?u.call(e,h,p,m):u.call(e,h,p);for(const b of a)b[0]===h&&(p===void 0||b[1]===p)&&(m===void 0||b[2]===m)&&a.delete(b)}const _=a.size===0;y&&_&&r()})(e.disconnect),e},cn=(n,t,e)=>{const s=t[e];s!==void 0&&s!==n[e]&&(n[e]=s)},Wn=(n,t)=>{cn(n,t,"channelCount"),cn(n,t,"channelCountMode"),cn(n,t,"channelInterpretation")},eS=n=>typeof n.getFloatTimeDomainData=="function",kk=n=>{n.getFloatTimeDomainData=t=>{const e=new Uint8Array(t.length);n.getByteTimeDomainData(e);const s=Math.max(e.length,n.fftSize);for(let r=0;r<s;r+=1)t[r]=(e[r]-128)*.0078125;return t}},Ok=(n,t)=>(e,s)=>{const r=e.createAnalyser();if(Wn(r,s),!(s.maxDecibels>s.minDecibels))throw t();return cn(r,s,"fftSize"),cn(r,s,"maxDecibels"),cn(r,s,"minDecibels"),cn(r,s,"smoothingTimeConstant"),n(eS,()=>eS(r))||kk(r),r},Dk=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,bn=(n,t,e)=>{const s=t[e];s!==void 0&&s!==n[e].value&&(n[e].value=s)},Rk=n=>{n.start=(t=>{let e=!1;return(s=0,r=0,a)=>{if(e)throw Jn();t.call(n,s,r,a),e=!0}})(n.start)},Ry=n=>{n.start=(t=>(e=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||e<0)throw new RangeError("The parameters can't be negative.");t.call(n,e,s,r)})(n.start)},Iy=n=>{n.stop=(t=>(e=0)=>{if(e<0)throw new RangeError("The parameter can't be negative.");t.call(n,e)})(n.stop)},Ik=(n,t,e,s,r,a,u,h,p,m,y)=>(_,b)=>{const S=_.createBufferSource();return Wn(S,b),bn(S,b,"playbackRate"),cn(S,b,"buffer"),cn(S,b,"loop"),cn(S,b,"loopEnd"),cn(S,b,"loopStart"),t(e,()=>e(_))||Rk(S),t(s,()=>s(_))||p(S),t(r,()=>r(_))||m(S,_),t(a,()=>a(_))||Ry(S),t(u,()=>u(_))||y(S,_),t(h,()=>h(_))||Iy(S),n(_,S),S},Nk=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,Pk=(n,t)=>(e,s,r)=>{const a=e.destination;if(a.channelCount!==s)try{a.channelCount=s}catch{}r&&a.channelCountMode!=="explicit"&&(a.channelCountMode="explicit"),a.maxChannelCount===0&&Object.defineProperty(a,"maxChannelCount",{value:s});const u=n(e,{channelCount:s,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return t(u,"channelCount",h=>()=>h.call(u),h=>p=>{h.call(u,p);try{a.channelCount=p}catch(m){if(p>a.maxChannelCount)throw m}}),t(u,"channelCountMode",h=>()=>h.call(u),h=>p=>{h.call(u,p),a.channelCountMode=p}),t(u,"channelInterpretation",h=>()=>h.call(u),h=>p=>{h.call(u,p),a.channelInterpretation=p}),Object.defineProperty(u,"maxChannelCount",{get:()=>a.maxChannelCount}),u.connect(a),u},zk=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,Uk=n=>{const{port1:t}=new MessageChannel;try{t.postMessage(n)}finally{t.close()}},Bk=(n,t,e,s,r)=>(a,u,h,p,m,y)=>{if(h!==null)try{const _=new h(a,p,y),b=new Map;let S=null;if(Object.defineProperties(_,{channelCount:{get:()=>y.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>S,set:x=>{typeof S=="function"&&_.removeEventListener("processorerror",S),S=typeof x=="function"?x:null,typeof S=="function"&&_.addEventListener("processorerror",S)}}}),_.addEventListener=(x=>(...A)=>{if(A[0]==="processorerror"){const E=typeof A[1]=="function"?A[1]:typeof A[1]=="object"&&A[1]!==null&&typeof A[1].handleEvent=="function"?A[1].handleEvent:null;if(E!==null){const R=b.get(A[1]);R!==void 0?A[1]=R:(A[1]=z=>{z.type==="error"?(Object.defineProperties(z,{type:{value:"processorerror"}}),E(z)):E(new ErrorEvent(A[0],{...z}))},b.set(E,A[1]))}}return x.call(_,"error",A[1],A[2]),x.call(_,...A)})(_.addEventListener),_.removeEventListener=(x=>(...A)=>{if(A[0]==="processorerror"){const E=b.get(A[1]);E!==void 0&&(b.delete(A[1]),A[1]=E)}return x.call(_,"error",A[1],A[2]),x.call(_,A[0],A[1],A[2])})(_.removeEventListener),y.numberOfOutputs!==0){const x=e(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return _.connect(x).connect(a.destination),r(_,()=>x.disconnect(),()=>x.connect(a.destination))}return _}catch(_){throw _.code===11?s():_}if(m===void 0)throw s();return Uk(y),t(a,u,m,y)},iT=(n,t)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*t))))),Hk=n=>new Promise((t,e)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:a})=>{s.close(),r.close(),t(a)},s.onmessageerror=({data:a})=>{s.close(),r.close(),e(a)},r.postMessage(n)}),Vk=async(n,t)=>{const e=await Hk(t);return new n(e)},jk=(n,t,e,s)=>{let r=Y0.get(n);r===void 0&&(r=new WeakMap,Y0.set(n,r));const a=Vk(e,s);return r.set(t,a),a},qk=(n,t,e,s,r,a,u,h,p,m,y,_,b)=>(S,x,A,E)=>{if(E.numberOfInputs===0&&E.numberOfOutputs===0)throw p();const R=Array.isArray(E.outputChannelCount)?E.outputChannelCount:Array.from(E.outputChannelCount);if(R.some(It=>It<1))throw p();if(R.length!==E.numberOfOutputs)throw t();if(E.channelCountMode!=="explicit")throw p();const z=E.channelCount*E.numberOfInputs,O=R.reduce((It,Qt)=>It+Qt,0),$=A.parameterDescriptors===void 0?0:A.parameterDescriptors.length;if(z+$>6||O>6)throw p();const N=new MessageChannel,j=[],F=[];for(let It=0;It<E.numberOfInputs;It+=1)j.push(u(S,{channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,gain:1})),F.push(r(S,{channelCount:E.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:E.channelCount}));const G=[];if(A.parameterDescriptors!==void 0)for(const{defaultValue:It,maxValue:Qt,minValue:He,name:Ee}of A.parameterDescriptors){const ue=a(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:E.parameterData[Ee]!==void 0?E.parameterData[Ee]:It===void 0?0:It});Object.defineProperties(ue.offset,{defaultValue:{get:()=>It===void 0?0:It},maxValue:{get:()=>Qt===void 0?Ei:Qt},minValue:{get:()=>He===void 0?Wi:He}}),G.push(ue)}const q=s(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,z+$)}),W=iT(x,S.sampleRate),Q=h(S,W,z+$,Math.max(1,O)),et=r(S,{channelCount:Math.max(1,O),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,O)}),k=[];for(let It=0;It<E.numberOfOutputs;It+=1)k.push(s(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:R[It]}));for(let It=0;It<E.numberOfInputs;It+=1){j[It].connect(F[It]);for(let Qt=0;Qt<E.channelCount;Qt+=1)F[It].connect(q,Qt,It*E.channelCount+Qt)}const X=new tT(A.parameterDescriptors===void 0?[]:A.parameterDescriptors.map(({name:It},Qt)=>{const He=G[Qt];return He.connect(q,0,z+Qt),He.start(0),[It,He.offset]}));q.connect(Q);let Z=E.channelInterpretation,P=null;const U=E.numberOfOutputs===0?[Q]:k,K={get bufferSize(){return W},get channelCount(){return E.channelCount},set channelCount(It){throw e()},get channelCountMode(){return E.channelCountMode},set channelCountMode(It){throw e()},get channelInterpretation(){return Z},set channelInterpretation(It){for(const Qt of j)Qt.channelInterpretation=It;Z=It},get context(){return Q.context},get inputs(){return j},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get onprocessorerror(){return P},set onprocessorerror(It){typeof P=="function"&&K.removeEventListener("processorerror",P),P=typeof It=="function"?It:null,typeof P=="function"&&K.addEventListener("processorerror",P)},get parameters(){return X},get port(){return N.port2},addEventListener(...It){return Q.addEventListener(It[0],It[1],It[2])},connect:n.bind(null,U),disconnect:m.bind(null,U),dispatchEvent(...It){return Q.dispatchEvent(It[0])},removeEventListener(...It){return Q.removeEventListener(It[0],It[1],It[2])}},D=new Map;N.port1.addEventListener=(It=>(...Qt)=>{if(Qt[0]==="message"){const He=typeof Qt[1]=="function"?Qt[1]:typeof Qt[1]=="object"&&Qt[1]!==null&&typeof Qt[1].handleEvent=="function"?Qt[1].handleEvent:null;if(He!==null){const Ee=D.get(Qt[1]);Ee!==void 0?Qt[1]=Ee:(Qt[1]=ue=>{y(S.currentTime,S.sampleRate,()=>He(ue))},D.set(He,Qt[1]))}}return It.call(N.port1,Qt[0],Qt[1],Qt[2])})(N.port1.addEventListener),N.port1.removeEventListener=(It=>(...Qt)=>{if(Qt[0]==="message"){const He=D.get(Qt[1]);He!==void 0&&(D.delete(Qt[1]),Qt[1]=He)}return It.call(N.port1,Qt[0],Qt[1],Qt[2])})(N.port1.removeEventListener);let V=null;Object.defineProperty(N.port1,"onmessage",{get:()=>V,set:It=>{typeof V=="function"&&N.port1.removeEventListener("message",V),V=typeof It=="function"?It:null,typeof V=="function"&&(N.port1.addEventListener("message",V),N.port1.start())}}),A.prototype.port=N.port1;let I=null;jk(S,K,A,E).then(It=>I=It);const at=Op(E.numberOfInputs,E.channelCount),mt=Op(E.numberOfOutputs,R),gt=A.parameterDescriptors===void 0?[]:A.parameterDescriptors.reduce((It,{name:Qt})=>({...It,[Qt]:new Float32Array(128)}),{});let yt=!0;const kt=()=>{E.numberOfOutputs>0&&Q.disconnect(et);for(let It=0,Qt=0;It<E.numberOfOutputs;It+=1){const He=k[It];for(let Ee=0;Ee<R[It];Ee+=1)et.disconnect(He,Qt+Ee,Ee);Qt+=R[It]}},Mt=new Map;Q.onaudioprocess=({inputBuffer:It,outputBuffer:Qt})=>{if(I!==null){const He=_(K);for(let Ee=0;Ee<W;Ee+=128){for(let ue=0;ue<E.numberOfInputs;ue+=1)for(let Le=0;Le<E.channelCount;Le+=1)kp(It,at[ue],Le,Le,Ee);A.parameterDescriptors!==void 0&&A.parameterDescriptors.forEach(({name:ue},Le)=>{kp(It,gt,ue,z+Le,Ee)});for(let ue=0;ue<E.numberOfInputs;ue+=1)for(let Le=0;Le<R[ue];Le+=1)mt[ue][Le].byteLength===0&&(mt[ue][Le]=new Float32Array(128));try{const ue=at.map((un,gi)=>{if(He[gi].size>0)return Mt.set(gi,W/128),un;const xn=Mt.get(gi);return xn===void 0?[]:(un.every(No=>No.every(yi=>yi===0))&&(xn===1?Mt.delete(gi):Mt.set(gi,xn-1)),un)});yt=y(S.currentTime+Ee/S.sampleRate,S.sampleRate,()=>I.process(ue,mt,gt));for(let un=0,gi=0;un<E.numberOfOutputs;un+=1){for(let Oi=0;Oi<R[un];Oi+=1)eT(Qt,mt[un],Oi,gi+Oi,Ee);gi+=R[un]}}catch(ue){yt=!1,K.dispatchEvent(new ErrorEvent("processorerror",{colno:ue.colno,filename:ue.filename,lineno:ue.lineno,message:ue.message}))}if(!yt){for(let ue=0;ue<E.numberOfInputs;ue+=1){j[ue].disconnect(F[ue]);for(let Le=0;Le<E.channelCount;Le+=1)F[Ee].disconnect(q,Le,ue*E.channelCount+Le)}if(A.parameterDescriptors!==void 0){const ue=A.parameterDescriptors.length;for(let Le=0;Le<ue;Le+=1){const un=G[Le];un.disconnect(q,0,z+Le),un.stop()}}q.disconnect(Q),Q.onaudioprocess=null,oe?kt():sn();break}}}};let oe=!1;const Ne=u(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Be=()=>Q.connect(Ne).connect(S.destination),sn=()=>{Q.disconnect(Ne),Ne.disconnect()},ni=()=>{if(yt){sn(),E.numberOfOutputs>0&&Q.connect(et);for(let It=0,Qt=0;It<E.numberOfOutputs;It+=1){const He=k[It];for(let Ee=0;Ee<R[It];Ee+=1)et.connect(He,Qt+Ee,Ee);Qt+=R[It]}}oe=!0},_i=()=>{yt&&(Be(),kt()),oe=!1};return Be(),b(K,ni,_i)},sT=(n,t)=>{const e=n.createBiquadFilter();return Wn(e,t),bn(e,t,"Q"),bn(e,t,"detune"),bn(e,t,"frequency"),bn(e,t,"gain"),cn(e,t,"type"),e},Gk=(n,t)=>(e,s)=>{const r=e.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&t(e,r),Wn(r,s),r},Zk=n=>{const t=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw Jn()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:e=>{if(e!=="explicit")throw Jn()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:e=>{if(e!=="discrete")throw Jn()}})},af=(n,t)=>{const e=n.createChannelSplitter(t.numberOfOutputs);return Wn(e,t),Zk(e),e},Wk=(n,t,e,s,r)=>(a,u)=>{if(a.createConstantSource===void 0)return e(a,u);const h=a.createConstantSource();return Wn(h,u),bn(h,u,"offset"),t(s,()=>s(a))||Ry(h),t(r,()=>r(a))||Iy(h),n(a,h),h},ou=(n,t)=>(n.connect=t.connect.bind(t),n.disconnect=t.disconnect.bind(t),n),Fk=(n,t,e,s)=>(r,{offset:a,...u})=>{const h=r.createBuffer(1,2,44100),p=t(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),m=e(r,{...u,gain:a}),y=h.getChannelData(0);y[0]=1,y[1]=1,p.buffer=h,p.loop=!0;const _={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(x){m.channelCount=x},get channelCountMode(){return m.channelCountMode},set channelCountMode(x){m.channelCountMode=x},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(x){m.channelInterpretation=x},get context(){return m.context},get inputs(){return[]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get offset(){return m.gain},get onended(){return p.onended},set onended(x){p.onended=x},addEventListener(...x){return p.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return p.dispatchEvent(x[0])},removeEventListener(...x){return p.removeEventListener(x[0],x[1],x[2])},start(x=0){p.start.call(p,x)},stop(x=0){p.stop.call(p,x)}},b=()=>p.connect(m),S=()=>p.disconnect(m);return n(r,p),s(ou(_,m),b,S)},Yk=(n,t)=>(e,s)=>{const r=e.createConvolver();if(Wn(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),cn(r,s,"buffer"),s.channelCount>2||(t(r,"channelCount",a=>()=>a.call(r),a=>u=>{if(u>2)throw n();return a.call(r,u)}),s.channelCountMode==="max"))throw n();return t(r,"channelCountMode",a=>()=>a.call(r),a=>u=>{if(u==="max")throw n();return a.call(r,u)}),r},rT=(n,t)=>{const e=n.createDelay(t.maxDelayTime);return Wn(e,t),bn(e,t,"delayTime"),e},Xk=n=>(t,e)=>{const s=t.createDynamicsCompressor();if(Wn(s,e),e.channelCount>2||e.channelCountMode==="max")throw n();return bn(s,e,"attack"),bn(s,e,"knee"),bn(s,e,"ratio"),bn(s,e,"release"),bn(s,e,"threshold"),s},$i=(n,t)=>{const e=n.createGain();return Wn(e,t),bn(e,t,"gain"),e},Qk=n=>(t,e,s)=>{if(t.createIIRFilter===void 0)return n(t,e,s);const r=t.createIIRFilter(s.feedforward,s.feedback);return Wn(r,s),r};function $k(n,t){const e=t[0]*t[0]+t[1]*t[1];return[(n[0]*t[0]+n[1]*t[1])/e,(n[1]*t[0]-n[0]*t[1])/e]}function Kk(n,t){return[n[0]*t[0]-n[1]*t[1],n[0]*t[1]+n[1]*t[0]]}function nS(n,t){let e=[0,0];for(let s=n.length-1;s>=0;s-=1)e=Kk(e,t),e[0]+=n[s];return e}const Jk=(n,t,e,s)=>(r,a,{channelCount:u,channelCountMode:h,channelInterpretation:p,feedback:m,feedforward:y})=>{const _=iT(a,r.sampleRate),b=m instanceof Float64Array?m:new Float64Array(m),S=y instanceof Float64Array?y:new Float64Array(y),x=b.length,A=S.length,E=Math.min(x,A);if(x===0||x>20)throw s();if(b[0]===0)throw t();if(A===0||A>20)throw s();if(S[0]===0)throw t();if(b[0]!==1){for(let G=0;G<A;G+=1)S[G]/=b[0];for(let G=1;G<x;G+=1)b[G]/=b[0]}const R=e(r,_,u,u);R.channelCount=u,R.channelCountMode=h,R.channelInterpretation=p;const z=32,O=[],$=[],N=[];for(let G=0;G<u;G+=1){O.push(0);const q=new Float32Array(z),W=new Float32Array(z);q.fill(0),W.fill(0),$.push(q),N.push(W)}R.onaudioprocess=G=>{const q=G.inputBuffer,W=G.outputBuffer,Q=q.numberOfChannels;for(let et=0;et<Q;et+=1){const k=q.getChannelData(et),X=W.getChannelData(et);O[et]=nT(b,x,S,A,E,$[et],N[et],O[et],z,k,X)}};const j=r.sampleRate/2;return ou({get bufferSize(){return _},get channelCount(){return R.channelCount},set channelCount(G){R.channelCount=G},get channelCountMode(){return R.channelCountMode},set channelCountMode(G){R.channelCountMode=G},get channelInterpretation(){return R.channelInterpretation},set channelInterpretation(G){R.channelInterpretation=G},get context(){return R.context},get inputs(){return[R]},get numberOfInputs(){return R.numberOfInputs},get numberOfOutputs(){return R.numberOfOutputs},addEventListener(...G){return R.addEventListener(G[0],G[1],G[2])},dispatchEvent(...G){return R.dispatchEvent(G[0])},getFrequencyResponse(G,q,W){if(G.length!==q.length||q.length!==W.length)throw n();const Q=G.length;for(let et=0;et<Q;et+=1){const k=-Math.PI*(G[et]/j),X=[Math.cos(k),Math.sin(k)],Z=nS(S,X),P=nS(b,X),U=$k(Z,P);q[et]=Math.sqrt(U[0]*U[0]+U[1]*U[1]),W[et]=Math.atan2(U[1],U[0])}},removeEventListener(...G){return R.removeEventListener(G[0],G[1],G[2])}},R)},tO=(n,t)=>n.createMediaElementSource(t.mediaElement),eO=(n,t)=>{const e=n.createMediaStreamDestination();return Wn(e,t),e.numberOfOutputs===1&&Object.defineProperty(e,"numberOfOutputs",{get:()=>0}),e},nO=(n,{mediaStream:t})=>{const e=t.getAudioTracks();e.sort((a,u)=>a.id<u.id?-1:a.id>u.id?1:0);const s=e.slice(0,1),r=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:t}),r},iO=(n,t)=>(e,{mediaStreamTrack:s})=>{if(typeof e.createMediaStreamTrackSource=="function")return e.createMediaStreamTrackSource(s);const r=new MediaStream([s]),a=e.createMediaStreamSource(r);if(s.kind!=="audio")throw n();if(t(e))throw new TypeError;return a},sO=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,rO=(n,t,e,s,r,a)=>(u,h)=>{const p=u.createOscillator();return Wn(p,h),bn(p,h,"detune"),bn(p,h,"frequency"),h.periodicWave!==void 0?p.setPeriodicWave(h.periodicWave):cn(p,h,"type"),t(e,()=>e(u))||Ry(p),t(s,()=>s(u))||a(p,u),t(r,()=>r(u))||Iy(p),n(u,p),p},oO=n=>(t,e)=>{const s=t.createPanner();return s.orientationX===void 0?n(t,e):(Wn(s,e),bn(s,e,"orientationX"),bn(s,e,"orientationY"),bn(s,e,"orientationZ"),bn(s,e,"positionX"),bn(s,e,"positionY"),bn(s,e,"positionZ"),cn(s,e,"coneInnerAngle"),cn(s,e,"coneOuterAngle"),cn(s,e,"coneOuterGain"),cn(s,e,"distanceModel"),cn(s,e,"maxDistance"),cn(s,e,"panningModel"),cn(s,e,"refDistance"),cn(s,e,"rolloffFactor"),s)},aO=(n,t,e,s,r,a,u,h,p,m)=>(y,{coneInnerAngle:_,coneOuterAngle:b,coneOuterGain:S,distanceModel:x,maxDistance:A,orientationX:E,orientationY:R,orientationZ:z,panningModel:O,positionX:$,positionY:N,positionZ:j,refDistance:F,rolloffFactor:G,...q})=>{const W=y.createPanner();if(q.channelCount>2||q.channelCountMode==="max")throw u();Wn(W,q);const Q={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},et=e(y,{...Q,channelInterpretation:"speakers",numberOfInputs:6}),k=s(y,{...q,gain:1}),X=s(y,{...Q,gain:1}),Z=s(y,{...Q,gain:0}),P=s(y,{...Q,gain:0}),U=s(y,{...Q,gain:0}),K=s(y,{...Q,gain:0}),D=s(y,{...Q,gain:0}),V=r(y,256,6,1),I=a(y,{...Q,curve:new Float32Array([1,1]),oversample:"none"});let Y=[E,R,z],at=[$,N,j];const mt=new Float32Array(1);V.onaudioprocess=({inputBuffer:Mt})=>{const oe=[p(Mt,mt,0),p(Mt,mt,1),p(Mt,mt,2)];oe.some((Be,sn)=>Be!==Y[sn])&&(W.setOrientation(...oe),Y=oe);const Ne=[p(Mt,mt,3),p(Mt,mt,4),p(Mt,mt,5)];Ne.some((Be,sn)=>Be!==at[sn])&&(W.setPosition(...Ne),at=Ne)},Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0});const gt={get bufferSize(){},get channelCount(){return W.channelCount},set channelCount(Mt){if(Mt>2)throw u();k.channelCount=Mt,W.channelCount=Mt},get channelCountMode(){return W.channelCountMode},set channelCountMode(Mt){if(Mt==="max")throw u();k.channelCountMode=Mt,W.channelCountMode=Mt},get channelInterpretation(){return W.channelInterpretation},set channelInterpretation(Mt){k.channelInterpretation=Mt,W.channelInterpretation=Mt},get coneInnerAngle(){return W.coneInnerAngle},set coneInnerAngle(Mt){W.coneInnerAngle=Mt},get coneOuterAngle(){return W.coneOuterAngle},set coneOuterAngle(Mt){W.coneOuterAngle=Mt},get coneOuterGain(){return W.coneOuterGain},set coneOuterGain(Mt){if(Mt<0||Mt>1)throw t();W.coneOuterGain=Mt},get context(){return W.context},get distanceModel(){return W.distanceModel},set distanceModel(Mt){W.distanceModel=Mt},get inputs(){return[k]},get maxDistance(){return W.maxDistance},set maxDistance(Mt){if(Mt<0)throw new RangeError;W.maxDistance=Mt},get numberOfInputs(){return W.numberOfInputs},get numberOfOutputs(){return W.numberOfOutputs},get orientationX(){return X.gain},get orientationY(){return Z.gain},get orientationZ(){return P.gain},get panningModel(){return W.panningModel},set panningModel(Mt){W.panningModel=Mt},get positionX(){return U.gain},get positionY(){return K.gain},get positionZ(){return D.gain},get refDistance(){return W.refDistance},set refDistance(Mt){if(Mt<0)throw new RangeError;W.refDistance=Mt},get rolloffFactor(){return W.rolloffFactor},set rolloffFactor(Mt){if(Mt<0)throw new RangeError;W.rolloffFactor=Mt},addEventListener(...Mt){return k.addEventListener(Mt[0],Mt[1],Mt[2])},dispatchEvent(...Mt){return k.dispatchEvent(Mt[0])},removeEventListener(...Mt){return k.removeEventListener(Mt[0],Mt[1],Mt[2])}};_!==gt.coneInnerAngle&&(gt.coneInnerAngle=_),b!==gt.coneOuterAngle&&(gt.coneOuterAngle=b),S!==gt.coneOuterGain&&(gt.coneOuterGain=S),x!==gt.distanceModel&&(gt.distanceModel=x),A!==gt.maxDistance&&(gt.maxDistance=A),E!==gt.orientationX.value&&(gt.orientationX.value=E),R!==gt.orientationY.value&&(gt.orientationY.value=R),z!==gt.orientationZ.value&&(gt.orientationZ.value=z),O!==gt.panningModel&&(gt.panningModel=O),$!==gt.positionX.value&&(gt.positionX.value=$),N!==gt.positionY.value&&(gt.positionY.value=N),j!==gt.positionZ.value&&(gt.positionZ.value=j),F!==gt.refDistance&&(gt.refDistance=F),G!==gt.rolloffFactor&&(gt.rolloffFactor=G),(Y[0]!==1||Y[1]!==0||Y[2]!==0)&&W.setOrientation(...Y),(at[0]!==0||at[1]!==0||at[2]!==0)&&W.setPosition(...at);const yt=()=>{k.connect(W),n(k,I,0,0),I.connect(X).connect(et,0,0),I.connect(Z).connect(et,0,1),I.connect(P).connect(et,0,2),I.connect(U).connect(et,0,3),I.connect(K).connect(et,0,4),I.connect(D).connect(et,0,5),et.connect(V).connect(y.destination)},kt=()=>{k.disconnect(W),h(k,I,0,0),I.disconnect(X),X.disconnect(et),I.disconnect(Z),Z.disconnect(et),I.disconnect(P),P.disconnect(et),I.disconnect(U),U.disconnect(et),I.disconnect(K),K.disconnect(et),I.disconnect(D),D.disconnect(et),et.disconnect(V),V.disconnect(y.destination)};return m(ou(gt,W),yt,kt)},lO=n=>(t,{disableNormalization:e,imag:s,real:r})=>{const a=s instanceof Float32Array?s:new Float32Array(s),u=r instanceof Float32Array?r:new Float32Array(r),h=t.createPeriodicWave(u,a,{disableNormalization:e});if(Array.from(s).length<2)throw n();return h},lf=(n,t,e,s)=>n.createScriptProcessor(t,e,s),cO=(n,t)=>(e,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw t();if(e.createStereoPanner===void 0)return n(e,s);const a=e.createStereoPanner();return Wn(a,s),bn(a,s,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>r,set:u=>{if(u!==r)throw t()}}),a},uO=(n,t,e,s,r,a)=>{const h=new Float32Array([1,1]),p=Math.PI/2,m={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},y={...m,oversample:"none"},_=(x,A,E,R)=>{const z=new Float32Array(16385),O=new Float32Array(16385);for(let q=0;q<16385;q+=1){const W=q/16384*p;z[q]=Math.cos(W),O[q]=Math.sin(W)}const $=e(x,{...m,gain:0}),N=s(x,{...y,curve:z}),j=s(x,{...y,curve:h}),F=e(x,{...m,gain:0}),G=s(x,{...y,curve:O});return{connectGraph(){A.connect($),A.connect(j.inputs===void 0?j:j.inputs[0]),A.connect(F),j.connect(E),E.connect(N.inputs===void 0?N:N.inputs[0]),E.connect(G.inputs===void 0?G:G.inputs[0]),N.connect($.gain),G.connect(F.gain),$.connect(R,0,0),F.connect(R,0,1)},disconnectGraph(){A.disconnect($),A.disconnect(j.inputs===void 0?j:j.inputs[0]),A.disconnect(F),j.disconnect(E),E.disconnect(N.inputs===void 0?N:N.inputs[0]),E.disconnect(G.inputs===void 0?G:G.inputs[0]),N.disconnect($.gain),G.disconnect(F.gain),$.disconnect(R,0,0),F.disconnect(R,0,1)}}},b=(x,A,E,R)=>{const z=new Float32Array(16385),O=new Float32Array(16385),$=new Float32Array(16385),N=new Float32Array(16385),j=Math.floor(16385/2);for(let U=0;U<16385;U+=1)if(U>j){const K=(U-j)/(16384-j)*p;z[U]=Math.cos(K),O[U]=Math.sin(K),$[U]=0,N[U]=1}else{const K=U/(16384-j)*p;z[U]=1,O[U]=0,$[U]=Math.cos(K),N[U]=Math.sin(K)}const F=t(x,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),G=e(x,{...m,gain:0}),q=s(x,{...y,curve:z}),W=e(x,{...m,gain:0}),Q=s(x,{...y,curve:O}),et=s(x,{...y,curve:h}),k=e(x,{...m,gain:0}),X=s(x,{...y,curve:$}),Z=e(x,{...m,gain:0}),P=s(x,{...y,curve:N});return{connectGraph(){A.connect(F),A.connect(et.inputs===void 0?et:et.inputs[0]),F.connect(G,0),F.connect(W,0),F.connect(k,1),F.connect(Z,1),et.connect(E),E.connect(q.inputs===void 0?q:q.inputs[0]),E.connect(Q.inputs===void 0?Q:Q.inputs[0]),E.connect(X.inputs===void 0?X:X.inputs[0]),E.connect(P.inputs===void 0?P:P.inputs[0]),q.connect(G.gain),Q.connect(W.gain),X.connect(k.gain),P.connect(Z.gain),G.connect(R,0,0),k.connect(R,0,0),W.connect(R,0,1),Z.connect(R,0,1)},disconnectGraph(){A.disconnect(F),A.disconnect(et.inputs===void 0?et:et.inputs[0]),F.disconnect(G,0),F.disconnect(W,0),F.disconnect(k,1),F.disconnect(Z,1),et.disconnect(E),E.disconnect(q.inputs===void 0?q:q.inputs[0]),E.disconnect(Q.inputs===void 0?Q:Q.inputs[0]),E.disconnect(X.inputs===void 0?X:X.inputs[0]),E.disconnect(P.inputs===void 0?P:P.inputs[0]),q.disconnect(G.gain),Q.disconnect(W.gain),X.disconnect(k.gain),P.disconnect(Z.gain),G.disconnect(R,0,0),k.disconnect(R,0,0),W.disconnect(R,0,1),Z.disconnect(R,0,1)}}},S=(x,A,E,R,z)=>{if(A===1)return _(x,E,R,z);if(A===2)return b(x,E,R,z);throw r()};return(x,{channelCount:A,channelCountMode:E,pan:R,...z})=>{if(E==="max")throw r();const O=n(x,{...z,channelCount:1,channelCountMode:E,numberOfInputs:2}),$=e(x,{...z,channelCount:A,channelCountMode:E,gain:1}),N=e(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:R});let{connectGraph:j,disconnectGraph:F}=S(x,A,$,N,O);Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"maxValue",{get:()=>1}),Object.defineProperty(N.gain,"minValue",{get:()=>-1});const G={get bufferSize(){},get channelCount(){return $.channelCount},set channelCount(et){$.channelCount!==et&&(q&&F(),{connectGraph:j,disconnectGraph:F}=S(x,et,$,N,O),q&&j()),$.channelCount=et},get channelCountMode(){return $.channelCountMode},set channelCountMode(et){if(et==="clamped-max"||et==="max")throw r();$.channelCountMode=et},get channelInterpretation(){return $.channelInterpretation},set channelInterpretation(et){$.channelInterpretation=et},get context(){return $.context},get inputs(){return[$]},get numberOfInputs(){return $.numberOfInputs},get numberOfOutputs(){return $.numberOfOutputs},get pan(){return N.gain},addEventListener(...et){return $.addEventListener(et[0],et[1],et[2])},dispatchEvent(...et){return $.dispatchEvent(et[0])},removeEventListener(...et){return $.removeEventListener(et[0],et[1],et[2])}};let q=!1;const W=()=>{j(),q=!0},Q=()=>{F(),q=!1};return a(ou(G,O),W,Q)}},hO=(n,t,e,s,r,a,u)=>(h,p)=>{const m=h.createWaveShaper();if(a!==null&&a.name==="webkitAudioContext"&&h.createGain().gain.automationRate===void 0)return e(h,p);Wn(m,p);const y=p.curve===null||p.curve instanceof Float32Array?p.curve:new Float32Array(p.curve);if(y!==null&&y.length<2)throw t();cn(m,{curve:y},"curve"),cn(m,p,"oversample");let _=null,b=!1;return u(m,"curve",A=>()=>A.call(m),A=>E=>(A.call(m,E),b&&(s(E)&&_===null?_=n(h,m):!s(E)&&_!==null&&(_(),_=null)),E)),r(m,()=>{b=!0,s(m.curve)&&(_=n(h,m))},()=>{b=!1,_!==null&&(_(),_=null)})},fO=(n,t,e,s,r)=>(a,{curve:u,oversample:h,...p})=>{const m=a.createWaveShaper(),y=a.createWaveShaper();Wn(m,p),Wn(y,p);const _=e(a,{...p,gain:1}),b=e(a,{...p,gain:-1}),S=e(a,{...p,gain:1}),x=e(a,{...p,gain:-1});let A=null,E=!1,R=null;const z={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(N){_.channelCount=N,b.channelCount=N,m.channelCount=N,S.channelCount=N,y.channelCount=N,x.channelCount=N},get channelCountMode(){return m.channelCountMode},set channelCountMode(N){_.channelCountMode=N,b.channelCountMode=N,m.channelCountMode=N,S.channelCountMode=N,y.channelCountMode=N,x.channelCountMode=N},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(N){_.channelInterpretation=N,b.channelInterpretation=N,m.channelInterpretation=N,S.channelInterpretation=N,y.channelInterpretation=N,x.channelInterpretation=N},get context(){return m.context},get curve(){return R},set curve(N){if(N!==null&&N.length<2)throw t();if(N===null)m.curve=N,y.curve=N;else{const j=N.length,F=new Float32Array(j+2-j%2),G=new Float32Array(j+2-j%2);F[0]=N[0],G[0]=-N[j-1];const q=Math.ceil((j+1)/2),W=(j+1)/2-1;for(let Q=1;Q<q;Q+=1){const et=Q/q*W,k=Math.floor(et),X=Math.ceil(et);F[Q]=k===X?N[k]:(1-(et-k))*N[k]+(1-(X-et))*N[X],G[Q]=k===X?-N[j-1-k]:-((1-(et-k))*N[j-1-k])-(1-(X-et))*N[j-1-X]}F[q]=j%2===1?N[q-1]:(N[q-2]+N[q-1])/2,m.curve=F,y.curve=G}R=N,E&&(s(R)&&A===null?A=n(a,_):A!==null&&(A(),A=null))},get inputs(){return[_]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get oversample(){return m.oversample},set oversample(N){m.oversample=N,y.oversample=N},addEventListener(...N){return _.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return _.dispatchEvent(N[0])},removeEventListener(...N){return _.removeEventListener(N[0],N[1],N[2])}};u!==null&&(z.curve=u instanceof Float32Array?u:new Float32Array(u)),h!==z.oversample&&(z.oversample=h);const O=()=>{_.connect(m).connect(S),_.connect(b).connect(y).connect(x).connect(S),E=!0,s(R)&&(A=n(a,_))},$=()=>{_.disconnect(m),m.disconnect(S),_.disconnect(b),b.disconnect(y),y.disconnect(x),x.disconnect(S),E=!1,A!==null&&(A(),A=null)};return r(ou(z,S),O,$)},ki=()=>new DOMException("","NotSupportedError"),dO={numberOfChannels:1},pO=(n,t,e,s,r)=>class extends n{constructor(u,h,p){let m;if(typeof u=="number"&&h!==void 0&&p!==void 0)m={length:h,numberOfChannels:u,sampleRate:p};else if(typeof u=="object")m=u;else throw new Error("The given parameters are not valid.");const{length:y,numberOfChannels:_,sampleRate:b}={...dO,...m},S=s(_,y,b);t(Hh,()=>Hh(S))||S.addEventListener("statechange",(()=>{let x=0;const A=E=>{this._state==="running"&&(x>0?(S.removeEventListener("statechange",A),E.stopImmediatePropagation(),this._waitForThePromiseToSettle(E)):x+=1)};return A})()),super(S,_),this._length=y,this._nativeOfflineAudioContext=S,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Q2(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},mO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},_O=(n,t,e,s,r,a,u)=>class extends n{constructor(p,m){const y=r(p),_={...mO,...m},b=e(y,_),S=a(y),x=S?s():null,A=p.sampleRate/2;super(p,!1,b,x),this._detune=t(this,S,b.detune,153600,-153600),this._frequency=t(this,S,b.frequency,A,-A),this._nativeOscillatorNode=b,this._onended=null,this._oscillatorNodeRenderer=x,this._oscillatorNodeRenderer!==null&&_.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=_.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(p){const m=typeof p=="function"?u(this,p):null;this._nativeOscillatorNode.onended=m;const y=this._nativeOscillatorNode.onended;this._onended=y!==null&&y===m?p:y}get type(){return this._nativeOscillatorNode.type}set type(p){this._nativeOscillatorNode.type=p,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(p){this._nativeOscillatorNode.setPeriodicWave(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=p)}start(p=0){if(this._nativeOscillatorNode.start(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=p),this.context.state!=="closed"){Jc(this);const m=()=>{this._nativeOscillatorNode.removeEventListener("ended",m),Mo(this)&&sf(this)};this._nativeOscillatorNode.addEventListener("ended",m)}}stop(p=0){this._nativeOscillatorNode.stop(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=p)}},gO=(n,t,e,s,r)=>()=>{const a=new WeakMap;let u=null,h=null,p=null;const m=async(y,_)=>{let b=e(y);const S=mi(b,_);if(!S){const x={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,detune:b.detune.value,frequency:b.frequency.value,periodicWave:u===null?void 0:u,type:b.type};b=t(_,x),h!==null&&b.start(h),p!==null&&b.stop(p)}return a.set(_,b),S?(await n(_,y.detune,b.detune),await n(_,y.frequency,b.frequency)):(await s(_,y.detune,b.detune),await s(_,y.frequency,b.frequency)),await r(y,_,b),b};return{set periodicWave(y){u=y},set start(y){h=y},set stop(y){p=y},render(y,_){const b=a.get(_);return b!==void 0?Promise.resolve(b):m(y,_)}}},yO={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},vO=(n,t,e,s,r,a,u)=>class extends n{constructor(p,m){const y=r(p),_={...yO,...m},b=e(y,_),S=a(y),x=S?s():null;super(p,!1,b,x),this._nativePannerNode=b,this._orientationX=t(this,S,b.orientationX,Ei,Wi),this._orientationY=t(this,S,b.orientationY,Ei,Wi),this._orientationZ=t(this,S,b.orientationZ,Ei,Wi),this._positionX=t(this,S,b.positionX,Ei,Wi),this._positionY=t(this,S,b.positionY,Ei,Wi),this._positionZ=t(this,S,b.positionZ,Ei,Wi),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(p){this._nativePannerNode.coneInnerAngle=p}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(p){this._nativePannerNode.coneOuterAngle=p}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(p){this._nativePannerNode.coneOuterGain=p}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(p){this._nativePannerNode.distanceModel=p}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(p){this._nativePannerNode.maxDistance=p}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(p){this._nativePannerNode.panningModel=p}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(p){this._nativePannerNode.refDistance=p}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(p){this._nativePannerNode.rolloffFactor=p}},bO=(n,t,e,s,r,a,u,h,p,m)=>()=>{const y=new WeakMap;let _=null;const b=async(S,x)=>{let A=null,E=a(S);const R={channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation},z={...R,coneInnerAngle:E.coneInnerAngle,coneOuterAngle:E.coneOuterAngle,coneOuterGain:E.coneOuterGain,distanceModel:E.distanceModel,maxDistance:E.maxDistance,panningModel:E.panningModel,refDistance:E.refDistance,rolloffFactor:E.rolloffFactor},O=mi(E,x);if("bufferSize"in E)A=s(x,{...R,gain:1});else if(!O){const $={...z,orientationX:E.orientationX.value,orientationY:E.orientationY.value,orientationZ:E.orientationZ.value,positionX:E.positionX.value,positionY:E.positionY.value,positionZ:E.positionZ.value};E=r(x,$)}if(y.set(x,A===null?E:A),A!==null){if(_===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Q=new u(6,S.context.length,x.sampleRate),et=t(Q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});et.connect(Q.destination),_=(async()=>{const k=await Promise.all([S.orientationX,S.orientationY,S.orientationZ,S.positionX,S.positionY,S.positionZ].map(async(X,Z)=>{const P=e(Q,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Z===0?1:0});return await h(Q,X,P.offset),P}));for(let X=0;X<6;X+=1)k[X].connect(et,0,X),k[X].start(0);return m(Q)})()}const $=await _,N=s(x,{...R,gain:1});await p(S,x,N);const j=[];for(let Q=0;Q<$.numberOfChannels;Q+=1)j.push($.getChannelData(Q));let F=[j[0][0],j[1][0],j[2][0]],G=[j[3][0],j[4][0],j[5][0]],q=s(x,{...R,gain:1}),W=r(x,{...z,orientationX:F[0],orientationY:F[1],orientationZ:F[2],positionX:G[0],positionY:G[1],positionZ:G[2]});N.connect(q).connect(W.inputs[0]),W.connect(A);for(let Q=128;Q<$.length;Q+=128){const et=[j[0][Q],j[1][Q],j[2][Q]],k=[j[3][Q],j[4][Q],j[5][Q]];if(et.some((X,Z)=>X!==F[Z])||k.some((X,Z)=>X!==G[Z])){F=et,G=k;const X=Q/x.sampleRate;q.gain.setValueAtTime(0,X),q=s(x,{...R,gain:0}),W=r(x,{...z,orientationX:F[0],orientationY:F[1],orientationZ:F[2],positionX:G[0],positionY:G[1],positionZ:G[2]}),q.gain.setValueAtTime(1,X),N.connect(q).connect(W.inputs[0]),W.connect(A)}}return A}return O?(await n(x,S.orientationX,E.orientationX),await n(x,S.orientationY,E.orientationY),await n(x,S.orientationZ,E.orientationZ),await n(x,S.positionX,E.positionX),await n(x,S.positionY,E.positionY),await n(x,S.positionZ,E.positionZ)):(await h(x,S.orientationX,E.orientationX),await h(x,S.orientationY,E.orientationY),await h(x,S.orientationZ,E.orientationZ),await h(x,S.positionX,E.positionX),await h(x,S.positionY,E.positionY),await h(x,S.positionZ,E.positionZ)),ru(E)?await p(S,x,E.inputs[0]):await p(S,x,E),E};return{render(S,x){const A=y.get(x);return A!==void 0?Promise.resolve(A):b(S,x)}}},wO={disableNormalization:!1},xO=(n,t,e,s)=>class oT{constructor(a,u){const h=t(a),p=s({...wO,...u}),m=n(h,p);return e.add(m),m}static[Symbol.hasInstance](a){return a!==null&&typeof a=="object"&&Object.getPrototypeOf(a)===oT.prototype||e.has(a)}},SO=(n,t)=>(e,s,r)=>(n(s).replay(r),t(s,e,r)),TO=(n,t,e)=>async(s,r,a)=>{const u=n(s);await Promise.all(u.activeInputs.map((h,p)=>Array.from(h).map(async([m,y])=>{const b=await t(m).render(m,r),S=s.context.destination;!e(m)&&(s!==S||!e(s))&&b.connect(a,y,p)})).reduce((h,p)=>[...h,...p],[]))},AO=(n,t,e)=>async(s,r,a)=>{const u=t(s);await Promise.all(Array.from(u.activeInputs).map(async([h,p])=>{const y=await n(h).render(h,r);e(h)||y.connect(a,p)}))},EO=(n,t,e,s)=>r=>n(Hh,()=>Hh(r))?Promise.resolve(n(s,s)).then(a=>{if(!a){const u=e(r,512,0,1);r.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>r.currentTime,u.connect(r.destination)}return r.startRendering()}):new Promise(a=>{const u=t(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=h=>{u.disconnect(),a(h.renderedBuffer)},u.connect(r.destination),r.startRendering()}),CO=n=>(t,e)=>{n.set(t,e)},LO=n=>(t,e)=>n.set(t,e),MO=(n,t,e,s,r,a,u,h)=>(p,m)=>e(p).render(p,m).then(()=>Promise.all(Array.from(s(m)).map(y=>e(y).render(y,m)))).then(()=>r(m)).then(y=>(typeof y.copyFromChannel!="function"?(u(y),ky(y)):t(a,()=>a(y))||h(y),n.add(y),y)),kO={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},OO=(n,t,e,s,r,a)=>class extends n{constructor(h,p){const m=r(h),y={...kO,...p},_=e(m,y),b=a(m),S=b?s():null;super(h,!1,_,S),this._pan=t(this,b,_.pan)}get pan(){return this._pan}},DO=(n,t,e,s,r)=>()=>{const a=new WeakMap,u=async(h,p)=>{let m=e(h);const y=mi(m,p);if(!y){const _={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,pan:m.pan.value};m=t(p,_)}return a.set(p,m),y?await n(p,h.pan,m.pan):await s(p,h.pan,m.pan),ru(m)?await r(h,p,m.inputs[0]):await r(h,p,m),m};return{render(h,p){const m=a.get(p);return m!==void 0?Promise.resolve(m):u(h,p)}}},RO=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},IO=(n,t)=>async()=>{if(n===null)return!0;if(t===null)return!1;const e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new t(1,128,44100),r=URL.createObjectURL(e);let a=!1,u=!1;try{await s.audioWorklet.addModule(r);const h=new n(s,"a",{numberOfOutputs:0}),p=s.createOscillator();h.port.onmessage=()=>a=!0,h.onprocessorerror=()=>u=!0,p.connect(h),p.start(0),await s.startRendering(),await new Promise(m=>setTimeout(m))}catch{}finally{URL.revokeObjectURL(r)}return a&&!u},NO=(n,t)=>()=>{if(t===null)return Promise.resolve(!1);const e=new t(1,1,44100),s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{e.oncomplete=()=>{s.disconnect(),r(e.currentTime!==0)},e.startRendering()})},PO=()=>new DOMException("","UnknownError"),zO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},UO=(n,t,e,s,r,a,u)=>class extends n{constructor(p,m){const y=r(p),_={...zO,...m},b=e(y,_),x=a(y)?s():null;super(p,!0,b,x),this._isCurveNullified=!1,this._nativeWaveShaperNode=b,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(p){if(p===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(p.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=p}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(p){this._nativeWaveShaperNode.oversample=p}},BO=(n,t,e)=>()=>{const s=new WeakMap,r=async(a,u)=>{let h=t(a);if(!mi(h,u)){const m={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,curve:h.curve,oversample:h.oversample};h=n(u,m)}return s.set(u,h),ru(h)?await e(a,u,h.inputs[0]):await e(a,u,h),h};return{render(a,u){const h=s.get(u);return h!==void 0?Promise.resolve(h):r(a,u)}}},HO=()=>typeof window>"u"?null:window,VO=(n,t)=>e=>{e.copyFromChannel=(s,r,a=0)=>{const u=n(a),h=n(r);if(h>=e.numberOfChannels)throw t();const p=e.length,m=e.getChannelData(h),y=s.length;for(let _=u<0?-u:0;_+u<p&&_<y;_+=1)s[_]=m[_+u]},e.copyToChannel=(s,r,a=0)=>{const u=n(a),h=n(r);if(h>=e.numberOfChannels)throw t();const p=e.length,m=e.getChannelData(h),y=s.length;for(let _=u<0?-u:0;_+u<p&&_<y;_+=1)m[_+u]=s[_]}},jO=n=>t=>{t.copyFromChannel=(e=>(s,r,a=0)=>{const u=n(a),h=n(r);if(u<t.length)return e.call(t,s,h,u)})(t.copyFromChannel),t.copyToChannel=(e=>(s,r,a=0)=>{const u=n(a),h=n(r);if(u<t.length)return e.call(t,s,h,u)})(t.copyToChannel)},qO=n=>(t,e)=>{const s=e.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=s),n(t,"buffer",r=>()=>{const a=r.call(t);return a===s?null:a},r=>a=>r.call(t,a===null?s:a))},GO=(n,t)=>(e,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const r=e.createBufferSource();t(s,()=>{const h=s.numberOfInputs;for(let p=0;p<h;p+=1)r.connect(s,0,p)},()=>r.disconnect(s))},aT=(n,t,e)=>n.copyFromChannel===void 0?n.getChannelData(e)[0]:(n.copyFromChannel(t,e),t[0]),lT=n=>{if(n===null)return!1;const t=n.length;return t%2!==0?n[Math.floor(t/2)]!==0:n[t/2-1]+n[t/2]!==0},cf=(n,t,e,s)=>{let r=n;for(;!r.hasOwnProperty(t);)r=Object.getPrototypeOf(r);const{get:a,set:u}=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(n,t,{get:e(a),set:s(u)})},ZO=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),WO=n=>({...n,channelCount:n.numberOfOutputs}),FO=n=>{const{imag:t,real:e}=n;return t===void 0?e===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(e,()=>0),real:e}:e===void 0?{...n,imag:t,real:Array.from(t,()=>0)}:{...n,imag:t,real:e}},cT=(n,t,e)=>{try{n.setValueAtTime(t,e)}catch(s){if(s.code!==9)throw s;cT(n,t,e+1e-7)}},YO=n=>{const t=n.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},XO=n=>{const t=n.createBufferSource(),e=n.createBuffer(1,1,44100);t.buffer=e;try{t.start(0,1)}catch{return!1}return!0},QO=n=>{const t=n.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},Ny=n=>{const t=n.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},uT=n=>{const t=n.createBuffer(1,1,44100),e=n.createBufferSource();e.buffer=t,e.start(),e.stop();try{return e.stop(),!0}catch{return!1}},Py=n=>{const t=n.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},$O=n=>{const{port1:t,port2:e}=new MessageChannel;try{t.postMessage(n)}finally{t.close(),e.close()}},KO=n=>{n.start=(t=>(e=0,s=0,r)=>{const a=n.buffer,u=a===null?s:Math.min(a.duration,s);a!==null&&u>a.duration-.5/n.context.sampleRate?t.call(n,e,0,0):t.call(n,e,u,r)})(n.start)},hT=(n,t)=>{const e=t.createGain();n.connect(e);const s=(r=>()=>{r.call(n,e),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),ou(n,e),n.stop=(r=>{let a=!1;return(u=0)=>{if(a)try{r.call(n,u)}catch{e.gain.setValueAtTime(0,u)}else r.call(n,u),a=!0}})(n.stop)},au=(n,t)=>e=>{const s={value:n};return Object.defineProperties(e,{currentTarget:s,target:s}),typeof t=="function"?t.call(n,e):t.handleEvent.call(n,e)},JO=v3(Vl),t4=A3(Vl),e4=zM(Jp),fT=new WeakMap,n4=ek(fT),ur=dM(new Map,new WeakMap),Hr=HO(),dT=Ok(ur,Gr),zy=tk(Ci),ci=TO(Ci,zy,zl),i4=k3(dT,nn,ci),$e=sk(Kp),Oo=sO(Hr),Ze=wk(Oo),pT=new WeakMap,mT=FM(au),uf=Nk(Hr),Uy=gk(uf),By=yk(Hr),_T=vk(Hr),Vh=zk(Hr),Cn=eM(b3(q2),T3(JO,t4,Cp,e4,Lp,Ci,n4,nf,nn,Vl,Mo,zl,up),ur,fk(W0,Lp,Ci,nn,Bh,Mo),Gr,tm,ki,RM(Cp,W0,Ci,nn,Bh,$e,Mo,Ze),HM(pT,Ci,lr),mT,$e,Uy,By,_T,Ze,Vh),s4=M3(Cn,i4,Gr,dT,$e,Ze),Hy=new WeakSet,iS=Dk(Hr),gT=EM(new Uint32Array(1)),Vy=VO(gT,Gr),jy=jO(gT),yT=D3(Hy,ur,ki,iS,Oo,RO(iS),Vy,jy),em=E3($i),vT=AO(zy,rf,zl),Zr=bM(vT),lu=Ik(em,ur,YO,XO,QO,Ny,uT,Py,KO,qO(cf),hT),Wr=SO(nk(rf),vT),r4=N3(Zr,lu,nn,Wr,ci),hr=nM(w3(G2),pT,My,iM,d3,p3,m3,_3,g3,q0,V2,uf,cT),o4=I3(Cn,r4,hr,Jn,lu,$e,Ze,au),a4=G3(Cn,Z3,Gr,Jn,Pk($i,cf),$e,Ze,ci),l4=fM(Zr,sT,nn,Wr,ci),jl=LO(fT),c4=hM(Cn,hr,l4,tm,sT,$e,Ze,jl),za=Mk(Vl,By),u4=GO(Jn,za),Ua=Gk(uf,u4),h4=_M(Ua,nn,ci),f4=mM(Cn,h4,Ua,$e,Ze),d4=vM(af,nn,ci),p4=yM(Cn,d4,af,$e,Ze,WO),m4=Fk(em,lu,$i,za),cu=Wk(em,ur,m4,Ny,Py),_4=AM(Zr,cu,nn,Wr,ci),g4=TM(Cn,hr,_4,cu,$e,Ze,au),bT=Yk(ki,cf),y4=MM(bT,nn,ci),v4=LM(Cn,y4,bT,$e,Ze,jl),b4=PM(Zr,rT,nn,Wr,ci),w4=NM(Cn,hr,b4,rT,$e,Ze,jl),wT=Xk(ki),x4=GM(Zr,wT,nn,Wr,ci),S4=qM(Cn,hr,x4,wT,ki,$e,Ze,jl),T4=KM(Zr,$i,nn,Wr,ci),A4=$M(Cn,hr,T4,$i,$e,Ze),E4=Jk(tm,Jn,lf,ki),nm=EO(ur,$i,lf,NO($i,Oo)),C4=hk(lu,nn,Oo,ci,nm),L4=Qk(E4),M4=ck(Cn,L4,C4,$e,Ze,jl),k4=W3(hr,Ua,cu,lf,ki,aT,Ze,cf),xT=new WeakMap,O4=Lk(a4,k4,mT,Ze,xT,au),ST=rO(em,ur,Ny,uT,Py,hT),D4=gO(Zr,ST,nn,Wr,ci),R4=_O(Cn,hr,ST,D4,$e,Ze,au),TT=xM(lu),I4=fO(TT,Jn,$i,lT,za),im=hO(TT,Jn,I4,lT,za,uf,cf),N4=aO(Cp,Jn,Ua,$i,lf,im,ki,Lp,aT,za),AT=oO(N4),P4=bO(Zr,Ua,cu,$i,AT,nn,Oo,Wr,ci,nm),z4=vO(Cn,hr,AT,P4,$e,Ze,jl),U4=lO(Gr),B4=xO(U4,$e,new WeakSet,FO),H4=uO(Ua,af,$i,im,ki,za),ET=cO(H4,ki),V4=DO(Zr,ET,nn,Wr,ci),j4=OO(Cn,hr,ET,V4,$e,Ze),q4=BO(im,nn,ci),G4=UO(Cn,Jn,im,q4,$e,Ze,jl),CT=xk(Hr),qy=YM(Hr),LT=new WeakMap,Z4=rk(LT,Oo),W4=CT?S3(ur,ki,WM(Hr),qy,XM(y3),$e,Z4,Ze,Vh,new WeakMap,new WeakMap,IO(Vh,Oo),Hr):void 0,F4=bk(Uy,Ze),Y4=DM(Hy,ur,OM,ZM,new WeakSet,$e,F4,Ap,Hh,Vy,jy),MT=cM(W4,s4,yT,o4,c4,f4,p4,g4,v4,Y4,w4,S4,A4,M4,O4,R4,z4,B4,j4,G4),X4=Sk(Cn,tO,$e,Ze),Q4=Ak(Cn,eO,$e,Ze),$4=Ek(Cn,nO,$e,Ze),K4=iO(Jn,Ze),J4=Ck(Cn,K4,$e),tD=q3(MT,Jn,ki,PO,X4,Q4,$4,J4,uf),Gy=ok(xT),eD=C3(Gy),kT=wM(Gr),nD=UM(Gy),OT=VM(Gr),DT=new WeakMap,iD=JM(DT,lr),sD=qk(kT,Gr,Jn,Ua,af,cu,$i,lf,ki,OT,qy,iD,za),rD=Bk(Jn,sD,$i,ki,za),oD=lM(Zr,kT,lu,Ua,af,cu,$i,nD,OT,qy,nn,Vh,Oo,Wr,ci,nm),aD=ik(LT),lD=CO(DT),sS=CT?rM(eD,Cn,hr,oD,rD,Ci,aD,$e,Ze,Vh,ZO,lD,$O,au):void 0,cD=kM(ki,Oo),uD=MO(Hy,ur,zy,Gy,nm,Ap,Vy,jy),hD=pO(MT,ur,Jn,cD,uD),fD=dk(Kp,Uy),dD=pk(Ly,By),pD=mk(My,_T),mD=_k(Kp,Ze);function qs(n){return n===void 0}function we(n){return n!==void 0}function _D(n){return typeof n=="function"}function Vr(n){return typeof n=="number"}function Rl(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function RT(n){return typeof n=="boolean"}function ar(n){return Array.isArray(n)}function ko(n){return typeof n=="string"}function Wd(n){return ko(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function ie(n,t){if(!n)throw new Error(t)}function ys(n,t,e=1/0){if(!(t<=n&&n<=e))throw new RangeError(`Value must be within [${t}, ${e}], got: ${n}`)}function IT(n){!n.isOffline&&n.state!=="running"&&Zy('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let NT=!1,rS=!1;function oS(n){NT=n}function gD(n){qs(n)&&NT&&!rS&&(rS=!0,Zy("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let PT=console;function yD(...n){PT.log(...n)}function Zy(...n){PT.warn(...n)}function vD(n){return new tD(n)}function bD(n,t,e){return new hD(n,t,e)}const ms=typeof self=="object"?self:null,wD=ms&&(ms.hasOwnProperty("AudioContext")||ms.hasOwnProperty("webkitAudioContext"));function xD(n,t,e){return ie(we(sS),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof ms?.BaseAudioContext?ms?.AudioWorkletNode:sS)(n,t,e)}function fr(n,t,e,s){var r=arguments.length,a=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,e):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,s);else for(var h=n.length-1;h>=0;h--)(u=n[h])&&(a=(r<3?u(a):r>3?u(t,e,a):u(t,e))||a);return r>3&&a&&Object.defineProperty(t,e,a),a}function En(n,t,e,s){function r(a){return a instanceof e?a:new e(function(u){u(a)})}return new(e||(e=Promise))(function(a,u){function h(y){try{m(s.next(y))}catch(_){u(_)}}function p(y){try{m(s.throw(y))}catch(_){u(_)}}function m(y){y.done?a(y.value):r(y.value).then(h,p)}m((s=s.apply(n,t||[])).next())})}class SD{constructor(t,e,s,r){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),e=URL.createObjectURL(t),s=new Worker(e);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),this._type==="worker"&&((e=this._worker)===null||e===void 0||e.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Ul(n){return pD(n)}function La(n){return dD(n)}function hp(n){return mD(n)}function qc(n){return fD(n)}function TD(n){return n instanceof yT}function AD(n,t){return n==="value"||Ul(t)||La(t)||TD(t)}function Br(n,...t){if(!t.length)return n;const e=t.shift();if(Rl(n)&&Rl(e))for(const s in e)AD(s,e[s])?n[s]=e[s]:Rl(e[s])?(n[s]||Object.assign(n,{[s]:{}}),Br(n[s],e[s])):Object.assign(n,{[s]:e[s]});return Br(n,...t)}function ED(n,t){return n.length===t.length&&n.every((e,s)=>t[s]===e)}function Bt(n,t,e=[],s){const r={},a=Array.from(t);if(Rl(a[0])&&s&&!Reflect.has(a[0],s)&&(Object.keys(a[0]).some(h=>Reflect.has(n,h))||(Br(r,{[s]:a[0]}),e.splice(e.indexOf(s),1),a.shift())),a.length===1&&Rl(a[0]))Br(r,a[0]);else for(let u=0;u<e.length;u++)we(a[u])&&(r[e[u]]=a[u]);return Br(n,r)}function CD(n){return n.constructor.getDefaults()}function Il(n,t){return qs(n)?t:n}function Hs(n,t){return t.forEach(e=>{Reflect.has(n,e)&&delete n[e]}),n}class Do{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||ms&&this.toString()===ms.TONE_DEBUG_CLASS)&&yD(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Do.version=H2;const Wy=1e-6;function tu(n,t){return n>t+Wy}function $0(n,t){return tu(n,t)||sr(n,t)}function Dp(n,t){return n+Wy<t}function sr(n,t){return Math.abs(n-t)<Wy}function ql(n,t,e){return Math.max(Math.min(n,e),t)}class Gs extends Do{constructor(){super(),this.name="Timeline",this._timeline=[];const t=Bt(Gs.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(ie(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];ie($0(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(t){const e=this._timeline.indexOf(t);return e!==-1&&this._timeline.splice(e,1),this}get(t,e="time"){const s=this._search(t,e);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const s=this._search(t,e);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const s=this._search(t);return s-1>=0?this._timeline[s-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(sr(this._timeline[e].time,t)){for(let s=e;s>=0&&sr(this._timeline[s].time,t);s--)e=s;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else this._timeline.length===1&&$0(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let a=r;if(r>0&&this._timeline[r-1][e]<=t)return r-1;for(;s<a;){let u=Math.floor(s+(a-s)/2);const h=this._timeline[u],p=this._timeline[u+1];if(sr(h[e],t)){for(let m=u;m<this._timeline.length;m++){const y=this._timeline[m];if(sr(y[e],t))u=m;else break}return u}else{if(Dp(h[e],t)&&tu(p[e],t))return u;tu(h[e],t)?a=u:s=u+1}}return-1}_iterate(t,e=0,s=this._timeline.length-1){this._timeline.slice(e,s+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const s=this._search(t);return s!==-1&&this._iterate(e,0,s),this}forEachAfter(t,e){const s=this._search(t);return this._iterate(e,s+1),this}forEachBetween(t,e,s){let r=this._search(t),a=this._search(e);return r!==-1&&a!==-1?(this._timeline[r].time!==t&&(r+=1),this._timeline[a].time===e&&(a-=1),this._iterate(s,r,a)):r===-1&&this._iterate(s,0,a),this}forEachFrom(t,e){let s=this._search(t);for(;s>=0&&this._timeline[s].time>=t;)s--;return this._iterate(e,s+1),this}forEachAtTime(t,e){const s=this._search(t);if(s!==-1&&sr(this._timeline[s].time,t)){let r=s;for(let a=s;a>=0&&sr(this._timeline[a].time,t);a--)r=a;this._iterate(a=>{e(a)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const zT=[];function sm(n){zT.push(n)}function LD(n){zT.forEach(t=>t(n))}const UT=[];function rm(n){UT.push(n)}function MD(n){UT.forEach(t=>t(n))}class hf extends Do{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(r=>{qs(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(e)}),this}once(t,e){const s=(...r)=>{e(...r),this.off(t,s)};return this.on(t,s),this}off(t,e){return t.split(/\W+/).forEach(r=>{if(qs(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(qs(e))this._events[r]=[];else{const a=this._events[r];for(let u=a.length-1;u>=0;u--)a[u]===e&&a.splice(u,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const s=this._events[t].slice(0);for(let r=0,a=s.length;r<a;r++)s[r].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const s=Object.getOwnPropertyDescriptor(hf.prototype,e);Object.defineProperty(t.prototype,e,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class BT extends hf{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class ff extends BT{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new Gs,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=Bt(ff.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((t=arguments[0])===null||t===void 0?void 0:t.latencyHint)||""):(this._context=vD({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new SD(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((e=arguments[0])===null||e===void 0)&&e.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(LD(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,s){return this._context.createBuffer(t,e,s)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,s){return this._context.createPeriodicWave(t,e,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return ie(qc(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return ie(qc(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return ie(qc(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){ie(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){ie(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){ie(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){ie(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return xD(this.rawContext,t,e)}addAudioWorkletModule(t){return En(this,void 0,void 0,function*(){ie(we(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return En(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return qc(this._context)?this._context.resume():Promise.resolve()}close(){return En(this,void 0,void 0,function*(){qc(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&MD(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),s=e.getChannelData(0);for(let a=0;a<s.length;a++)s[a]=t;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants.set(t,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){const t=this.now();this._timeouts.forEachBefore(t,e=>{e.callback(),this._timeouts.remove(e)})}setTimeout(t,e){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:s+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const s=++this._timeoutIds,r=()=>{const a=this.now();this._timeouts.add({callback:()=>{t(),r()},id:s,time:a+e})};return r(),s}}class kD extends BT{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,s){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return En(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function xe(n,t){ar(t)?t.forEach(e=>xe(n,e)):Object.defineProperty(n,t,{enumerable:!0,writable:!1})}function Fy(n,t){ar(t)?t.forEach(e=>Fy(n,e)):Object.defineProperty(n,t,{writable:!0})}const Ce=()=>{};class Qe extends Do{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Ce;const t=Bt(Qe.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,ko(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:Ce,onload:Ce,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Li().sampleRate}set(t){return t instanceof Qe?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return En(this,void 0,void 0,function*(){const e=Qe.load(t).then(s=>{this.set(s),this.onload(this)});Qe.downloads.push(e);try{yield e}finally{const s=Qe.downloads.indexOf(e);Qe.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=ar(t)&&t[0].length>0,s=e?t.length:1,r=e?t[0].length:t.length,a=Li(),u=a.createBuffer(s,r,a.sampleRate),h=!e&&s===1?[t]:t;for(let p=0;p<s;p++)u.copyToChannel(h[p],p);return this._buffer=u,this}toMono(t){if(Vr(t))this.fromArray(this.toArray(t));else{let e=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const a=this.toArray(r);for(let u=0;u<a.length;u++)e[u]+=a[u]}e=e.map(r=>r/s),this.fromArray(e)}return this}toArray(t){if(Vr(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{const e=[];for(let s=0;s<this.numberOfChannels;s++)e[s]=this.getChannelData(s);return e}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){ie(this.loaded,"Buffer is not loaded");const s=Math.floor(t*this.sampleRate),r=Math.floor(e*this.sampleRate);ie(s<r,"The start time must be less than the end time");const a=r-s,u=Li().createBuffer(this.numberOfChannels,a,this.sampleRate);for(let h=0;h<this.numberOfChannels;h++)u.copyToChannel(this.getChannelData(h).subarray(s,r),h);return new Qe(u)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new Qe().fromArray(t)}static fromUrl(t){return En(this,void 0,void 0,function*(){return yield new Qe().load(t)})}static load(t){return En(this,void 0,void 0,function*(){const e=Qe.baseUrl===""||Qe.baseUrl.endsWith("/")?Qe.baseUrl:Qe.baseUrl+"/",s=yield fetch(e+t);if(!s.ok)throw new Error(`could not load url: ${t}`);const r=yield s.arrayBuffer();return yield Li().decodeAudioData(r)})}static supportsType(t){const e=t.split("."),s=e[e.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return En(this,void 0,void 0,function*(){for(yield Promise.resolve();Qe.downloads.length;)yield Qe.downloads[0]})}}Qe.baseUrl="";Qe.downloads=[];class om extends ff{constructor(){super({clockSource:"offline",context:hp(arguments[0])?arguments[0]:bD(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:hp(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=hp(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return En(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const s=Math.floor(this.sampleRate/128);t&&e%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(){return En(this,arguments,void 0,function*(t=!0){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new Qe(e)})}close(){return Promise.resolve()}}const HT=new kD;let Ll=HT;function Li(){return Ll===HT&&wD&&OD(new ff),Ll}function OD(n,t=!1){t&&Ll.dispose(),qc(n)?Ll=new ff(n):hp(n)?Ll=new om(n):Ll=n}function Fd(){return Ll.resume()}if(ms&&!ms.TONE_SILENCE_LOGGING){const t=` * Tone.js v${H2} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function DD(n){return Math.pow(10,n/20)}function RD(n){return 20*(Math.log(n)/Math.LN10)}function VT(n){return Math.pow(2,n/12)}let am=440;function ID(){return am}function ND(n){am=n}function K0(n){return Math.round(jT(n))}function jT(n){return 69+12*Math.log2(n/am)}function PD(n){return am*Math.pow(2,(n-69)/12)}class Yy extends Do{constructor(t,e,s){super(),this.defaultUnits="s",this._val=e,this._units=s,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const s=parseInt(t,10),r=e==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(e)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,e,s)=>{let r=0;return t&&t!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(r+=this._beatsToUnits(parseFloat(e))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Yy&&this.fromType(this._val),qs(this._val))return this._noArg();if(ko(this._val)&&qs(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Rl(this._val)){let t=0;for(const e in this._val)if(we(this._val[e])){const s=this._val[e],r=new this.constructor(this.context,e).valueOf()*s;t+=r}return t}if(we(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}else return ko(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Vs extends Yy{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new Vs(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const s=new this.constructor(this.context,t).valueOf(),r=this.valueOf(),h=Math.round(r/s)*s-r;return r+h*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let a=1;a<9;a++){const u=Math.pow(2,a);e.push(u+"n."),e.push(u+"n"),e.push(u+"t")}e.push("0");let s=e[0],r=new Vs(this.context,e[0]).toSeconds();return e.forEach(a=>{const u=new Vs(this.context,a).toSeconds();Math.abs(u-t)<Math.abs(r-t)&&(s=a,r=u)}),s}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const s=Math.floor(e/this._getTimeSignature());let r=e%1*4;e=Math.floor(e)%this._getTimeSignature();const a=r.toString();return a.length>3&&(r=parseFloat(parseFloat(a).toFixed(3))),[s,e,r].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return K0(this.toFrequency())}_now(){return this.context.now()}}function zD(n,t){return new Vs(Li(),n,t)}class js extends Vs{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return ID()}static set A4(t){ND(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:js.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){const r=UD[t.toLowerCase()]+(parseInt(e,10)+1)*12;return this.defaultUnits==="midi"?r:js.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,s){let r=1;return t&&t!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(r*=this._beatsToUnits(parseFloat(e))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(t){return new js(this.context,this.valueOf()*VT(t))}harmonize(t){return t.map(e=>this.transpose(e))}toMidi(){return K0(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/js.A4);let s=Math.round(12*e)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),BD[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return PD(t)}static ftom(t){return K0(t)}}const UD={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},BD=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Lh extends Vs{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class ti extends Do{constructor(){super();const t=Bt(ti.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Li()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return gD(t),new Vs(this.context,t).toSeconds()}toFrequency(t){return new js(this.context,t).toFrequency()}toTicks(t){return new Lh(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(s=>{qs(t[s])&&delete e[s]}),e}get(){const t=CD(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const s=this[e];we(s)&&we(s.value)&&we(s.setValueAtTime)?t[e]=s.value:s instanceof ti?t[e]=s._getPartialProperties(t[e]):ar(s)||Vr(s)||ko(s)||RT(s)?t[e]=s:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&we(this[e])&&(this[e]&&we(this[e].value)&&we(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof ti?this[e].set(t[e]):this[e]=t[e])}),this}}class lm extends Gs{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return e!==null?e.state:this._initial}setStateAtTime(t,e,s){return ys(e,0),this.add(Object.assign({},s,{state:t,time:e})),this}getLastState(t,e){const s=this._search(e);for(let r=s;r>=0;r--){const a=this._timeline[r];if(a.state===t)return a}}getNextState(t,e){const s=this._search(e);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const a=this._timeline[r];if(a.state===t)return a}}}class Ae extends ti{constructor(){const t=Bt(Ae.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,ie(we(t.param)&&(Ul(t.param)||t.param instanceof Ae),"param must be an AudioParam");!Ul(t.param);)t.param=t.param._param;this._swappable=we(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Gs(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,we(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(ti.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return we(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return we(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return we(this.maxValue)&&we(this.minValue)&&ys(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?DD(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?RD(t):t}setValueAtTime(t,e){const s=this.toSeconds(e),r=this._fromType(t);return ie(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",t,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),s=this._events.getAfter(e),r=this._events.get(e);let a=this._initialValue;if(r===null)a=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const u=this._events.getBefore(r.time);let h;u===null?h=this._initialValue:h=u.value,r.type==="setTargetAtTime"&&(a=this._exponentialApproach(r.time,h,r.value,r.constant,e))}else if(s===null)a=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let u=r.value;if(r.type==="setTargetAtTime"){const h=this._events.getBefore(r.time);h===null?u=this._initialValue:u=h.value}s.type==="linearRampToValueAtTime"?a=this._linearInterpolate(r.time,u,s.time,s.value,e):a=this._exponentialInterpolate(r.time,u,s.time,s.value,e)}else a=r.value;return this._toType(a)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(e)===0&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const s=this._fromType(t),r=this.toSeconds(e);return ie(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",t,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(t,e){let s=this._fromType(t);s=sr(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(e);return ie(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",t,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(t,s+this.toSeconds(e)),this}linearRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(t,s+this.toSeconds(e)),this}targetRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(t,s,e),this}exponentialApproachValueAtTime(t,e,s){e=this.toSeconds(e),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(t,e,r),this.cancelAndHoldAtTime(e+s*.9),this.linearRampToValueAtTime(t,e+s),this}setTargetAtTime(t,e,s){const r=this._fromType(t);ie(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const a=this.toSeconds(e);return this._assertRange(r),ie(isFinite(r)&&isFinite(a),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:s,time:a,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",t,a,s),this._param.setTargetAtTime(r,a,s),this}setValueCurveAtTime(t,e,s,r=1){s=this.toSeconds(s),e=this.toSeconds(e);const a=this._fromType(t[0])*r;this.setValueAtTime(this._toType(a),e);const u=s/(t.length-1);for(let h=1;h<t.length;h++){const p=this._fromType(t[h])*r;this.linearRampToValueAtTime(this._toType(p),e+h*u)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return ie(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),s=this._fromType(this.getValueAtTime(e));ie(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+s);const r=this._events.get(e),a=this._events.getAfter(e);return r&&sr(r.time,e)?a?(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):a&&(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time),a.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),e):a.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),e)),this._events.add({time:e,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,e),this}rampTo(t,e=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,e,s):this.linearRampTo(t,e,s),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const s=this._events.get(e);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),a=r?r.time:e+2,u=(a-e)/10;for(let h=e;h<a;h+=u)t.linearRampToValueAtTime(this.getValueAtTime(h),h)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?t.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?t.setTargetAtTime(r.value,r.time,r.constant):t[r.type](r.value,r.time)}),this}setParam(t){ie(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,s,r,a){return s+(e-s)*Math.exp(-(a-t)/r)}_linearInterpolate(t,e,s,r,a){return e+(r-e)*((a-t)/(s-t))}_exponentialInterpolate(t,e,s,r,a){return e*Math.pow(r/e,(a-t)/(s-t))}}class Vt extends ti{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return we(this.input)?Ul(this.input)||this.input instanceof Ae?1:this.input.numberOfInputs:0}get numberOfOutputs(){return we(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return we(t)&&(t instanceof Vt||La(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(s=>{s.channelCount=t.channelCount,s.channelCountMode=t.channelCountMode,s.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();ie(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,s=0){return cr(this,t,e,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Zy("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,s=0){return qT(this,t,e,s),this}chain(...t){return Ma(this,...t),this}fan(...t){return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),we(this.input)&&(this.input instanceof Vt?this.input.dispose():La(this.input)&&this.input.disconnect()),we(this.output)&&(this.output instanceof Vt?this.output.dispose():La(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Ma(...n){const t=n.shift();n.reduce((e,s)=>(e instanceof Vt?e.connect(s):La(e)&&cr(e,s),s),t)}function cr(n,t,e=0,s=0){for(ie(we(n),"Cannot connect from undefined node"),ie(we(t),"Cannot connect to undefined node"),(t instanceof Vt||La(t))&&ie(t.numberOfInputs>0,"Cannot connect to node with no inputs"),ie(n.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof Vt||t instanceof Ae;)we(t.input)&&(t=t.input);for(;n instanceof Vt;)we(n.output)&&(n=n.output);Ul(t)?n.connect(t,e):n.connect(t,e,s)}function qT(n,t,e=0,s=0){if(we(t))for(;t instanceof Vt;)t=t.input;for(;!La(n);)we(n.output)&&(n=n.output);Ul(t)?n.disconnect(t,e):La(t)?n.disconnect(t,e,s):n.disconnect()}class he extends Vt{constructor(){const t=Bt(he.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Ae({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),xe(this,"gain")}static getDefaults(){return Object.assign(Vt.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class eu extends Vt{constructor(t){super(t),this.onended=Ce,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new he({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const s=this.toSeconds(e);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(Vt.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Ce})}_startGain(t,e=1){ie(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=t+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(e,t+s):this._gainNode.gain.exponentialApproachValueAtTime(e,t,s)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){ie(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?e*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Ce&&(this.onended(this),this.onended=Ce,!this.context.isOffline)){const t=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(t):setTimeout(t,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ie(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Ce,this}}class Xy extends eu{constructor(){const t=Bt(Xy.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),cr(this._source,this._gainNode),this.offset=new Ae({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(eu.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Re extends Vt{constructor(){const t=Bt(Re.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new Xy({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Vt.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,s=0){return cm(this,t,e,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,s){return this._param.exponentialRampTo(t,e,s),this}linearRampTo(t,e,s){return this._param.linearRampTo(t,e,s),this}targetRampTo(t,e,s){return this._param.targetRampTo(t,e,s),this}exponentialApproachValueAtTime(t,e,s){return this._param.exponentialApproachValueAtTime(t,e,s),this}setTargetAtTime(t,e,s){return this._param.setTargetAtTime(t,e,s),this}setValueCurveAtTime(t,e,s,r){return this._param.setValueCurveAtTime(t,e,s,r),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,s){return this._param.rampTo(t,e,s),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function cm(n,t,e,s){(t instanceof Ae||Ul(t)||t instanceof Re&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Re&&(t.overridden=!0)),cr(n,t,e,s)}class Qy extends Ae{constructor(){const t=Bt(Qy.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new Gs(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ae.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,s){e=this.toSeconds(e),this.setRampPoint(e);const r=this._fromType(t),a=this._events.get(e),u=Math.round(Math.max(1/s,1));for(let h=0;h<=u;h++){const p=s*h+e,m=this._exponentialApproach(a.time,a.value,r,s,p);this.linearRampToValueAtTime(this._toType(m),p)}return this}setValueAtTime(t,e){const s=this.toSeconds(e);super.setValueAtTime(t,e);const r=this._events.get(s),a=this._events.previousEvent(r),u=this._getTicksUntilEvent(a,s);return r.ticks=Math.max(u,0),this}linearRampToValueAtTime(t,e){const s=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const r=this._events.get(s),a=this._events.previousEvent(r),u=this._getTicksUntilEvent(a,s);return r.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const s=this._fromType(t),r=this._events.get(e),a=Math.round(Math.max((e-r.time)*10,1)),u=(e-r.time)/a;for(let h=0;h<=a;h++){const p=u*h+r.time,m=this._exponentialInterpolate(r.time,r.value,e,s,p);this.linearRampToValueAtTime(this._toType(m),p)}return this}_getTicksUntilEvent(t,e){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(qs(t.ticks)){const u=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(u,t.time)}const s=this._fromType(this.getValueAtTime(t.time));let r=this._fromType(this.getValueAtTime(e));const a=this._events.get(e);return a&&a.time===e&&a.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(s+r)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),s=this._events.get(e);return Math.max(this._getTicksUntilEvent(s,e),0)}getDurationOfTicks(t,e){const s=this.toSeconds(e),r=this.getTicksAtTime(e);return this.getTimeOfTick(r+t)-s}getTimeOfTick(t){const e=this._events.get(t,"ticks"),s=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&s&&s.type==="linearRampToValueAtTime"&&e.value!==s.value){const r=this._fromType(this.getValueAtTime(e.time)),u=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-e.time),h=Math.sqrt(Math.pow(r,2)-2*u*(e.ticks-t)),p=(-r+h)/u,m=(-r-h)/u;return(p>0?p:m)+e.time}else return e?e.value===0?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const s=this.toSeconds(e),r=this.toSeconds(t),a=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-a}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class $y extends Re{constructor(){const t=Bt($y.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new Qy({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Re.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class Ky extends ti{constructor(){const t=Bt(Ky.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new lm,this._tickOffset=new Gs,this._ticksAtTime=new Gs,this._secondsAtTime=new Gs,this.frequency=new $y({context:this.context,units:t.units,value:t.frequency}),xe(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ti.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const s=this.toSeconds(t);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),we(e)&&this.setTicksAtTime(e,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(t){const e=this.toSeconds(t);if(this._state.getValueAtTime(e)==="stopped"){const s=this._state.get(e);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),s=this._state.getLastState("stopped",e),r=this._ticksAtTime.get(e),a={state:"paused",time:e};this._state.add(a);let u=r||s,h=r?r.ticks:0,p=null;return this._state.forEachBetween(u.time,e+this.sampleTime,m=>{let y=u.time;const _=this._tickOffset.get(m.time);_&&_.time>=u.time&&(h=_.ticks,y=_.time),u.state==="started"&&m.state!=="started"&&(h+=this.frequency.getTicksAtTime(m.time)-this.frequency.getTicksAtTime(y),m.time!==a.time&&(p={state:m.state,time:m.time,ticks:h})),u=m}),this._state.remove(a),p&&this._ticksAtTime.add(p),h}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),s=this.frequency.timeToTicks(t,e);this.setTicksAtTime(s,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),s={state:"paused",time:t};this._state.add(s);const r=this._secondsAtTime.get(t);let a=r||e,u=r?r.seconds:0,h=null;return this._state.forEachBetween(a.time,t+this.sampleTime,p=>{let m=a.time;const y=this._tickOffset.get(p.time);y&&y.time>=a.time&&(u=y.seconds,m=y.time),a.state==="started"&&p.state!=="started"&&(u+=p.time-m,p.time!==s.time&&(h={state:p.state,time:p.time,seconds:u})),a=p}),this._state.remove(s),h&&this._secondsAtTime.add(h),u}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const s=this._tickOffset.get(e),r=this._state.get(e),a=Math.max(s.time,r.time),u=this.frequency.getTicksAtTime(a)+t-s.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(t,e,s){let r=this._state.get(t);this._state.forEachBetween(t,e,u=>{r&&r.state==="started"&&u.state!=="started"&&this.forEachTickBetween(Math.max(r.time,t),u.time-this.sampleTime,s),r=u});let a=null;if(r&&r.state==="started"){const u=Math.max(r.time,t),h=this.frequency.getTicksAtTime(u),p=this.frequency.getTicksAtTime(r.time),m=h-p;let y=Math.ceil(m)-m;y=sr(y,1)?0:y;let _=this.frequency.getTimeOfTick(h+y);for(;_<e;){try{s(_,Math.round(this.getTicksAtTime(_)))}catch(b){a=b;break}_+=this.frequency.getDurationOfTicks(1,_)}}if(a)throw a;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class um extends ti{constructor(){const t=Bt(um.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=Ce,this._lastUpdate=0,this._state=new lm("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new Ky({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,xe(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ti.getDefaults(),{callback:Ce,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){IT(this.context);const s=this.toSeconds(t);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,e),s<this._lastUpdate&&this.emit("start",s,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const s=this.toSeconds(e),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+t,s)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(t,e,(s,r)=>{this.callback(s,r)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}hf.mixin(um);class jh extends Vt{constructor(){const t=Bt(jh.getDefaults(),arguments,["delayTime","maxDelay"]);super(t),this.name="Delay";const e=this.toSeconds(t.maxDelay);this._maxDelay=Math.max(e,this.toSeconds(t.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(e),this.delayTime=new Ae({context:this.context,param:this._delayNode.delayTime,units:"time",value:t.delayTime,minValue:0,maxValue:this.maxDelay}),xe(this,"delayTime")}static getDefaults(){return Object.assign(Vt.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class uu extends Vt{constructor(){const t=Bt(uu.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new he({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,xe(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(Vt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Jy extends Vt{constructor(){const t=Bt(Jy.getDefaults(),arguments);super(t),this.name="Destination",this.input=new uu({context:this.context}),this.output=new he({context:this.context}),this.volume=this.input.volume,Ma(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Vt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Ma(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}sm(n=>{n.destination=new Jy({context:n})});rm(n=>{n.destination.dispose()});class HD extends Vt{constructor(){super(...arguments),this.name="Listener",this.positionX=new Ae({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Ae({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Ae({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Ae({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Ae({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Ae({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Ae({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Ae({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Ae({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Vt.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}sm(n=>{n.listener=new HD({context:n})});rm(n=>{n.listener.dispose()});class tv extends Do{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=Bt(tv.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;const s=t.urls[e];this.add(e,s,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Ce,onload:Ce,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return ie(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,s=Ce,r=Ce){return ko(e)?(this.baseUrl&&e.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(t.toString(),new Qe(this.baseUrl+e,s,r))):this._buffers.set(t.toString(),new Qe(e,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class Is extends Lh{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class VD extends ti{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Gs,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;this._events.forEachBefore(t+this.anticipation,e=>{t-e.time<=this.expiration&&e.callback(),this._events.remove(e)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}sm(n=>{n.draw=new VD({context:n})});rm(n=>{n.draw.dispose()});class jD extends Do{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){ie(we(t.time),"Events must have a time property"),ie(we(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new qD(t.time,t.time+t.duration,t);for(this._root===null?this._root=e:this._root.insert(e),this._length++;e!==null;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(this._root!==null){const e=[];this._root.search(t.time,e);for(const s of e)if(s.event===t){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,e=>this.remove(e)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,e){t.parent!==null?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{const e=t.getBalance();let s,r=null;if(e>0)if(t.left.right===null)s=t.left,s.right=t.right,r=s;else{for(s=t.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=t.left,s.right=t.right)}else if(t.right.left===null)s=t.right,s.left=t.left,r=s;else{for(s=t.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=t.left,s.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=s:t.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}t.dispose()}_rotateLeft(t){const e=t.parent,s=t.isLeftChild(),r=t.right;r&&(t.right=r.left,r.left=t),e!==null?s?e.left=r:e.right=r:this._setRoot(r)}_rotateRight(t){const e=t.parent,s=t.isLeftChild(),r=t.left;r&&(t.left=r.right,r.right=t),e!==null?s?e.left=r:e.right=r:this._setRoot(r)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){const e=[];if(this._root.search(t,e),e.length>0){let s=e[0];for(let r=1;r<e.length;r++)e[r].low>s.low&&(s=e[r]);return s.event}}return null}forEach(t){if(this._root!==null){const e=[];this._root.traverse(s=>e.push(s)),e.forEach(s=>{s.event&&t(s.event)})}return this}forEachAtTime(t,e){if(this._root!==null){const s=[];this._root.search(t,s),s.forEach(r=>{r.event&&e(r.event)})}return this}forEachFrom(t,e){if(this._root!==null){const s=[];this._root.searchAfter(t,s),s.forEach(r=>{r.event&&e(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class qD{constructor(t,e,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(this.left!==null&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),this.left!==null&&this.left.searchAfter(t,e)),this.right!==null&&this.right.searchAfter(t,e)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class GD extends Do{constructor(t){super(),this.name="TimelineValue",this._timeline=new Gs({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class jr extends Vt{constructor(){super(Bt(jr.getDefaults(),arguments,["context"]))}connect(t,e=0,s=0){return cm(this,t,e,s),this}}class hu extends jr{constructor(){const t=Bt(hu.getDefaults(),arguments,["mapping","length"]);super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,ar(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):_D(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Re.getDefaults(),{length:1024})}setMap(t,e=1024){const s=new Float32Array(e);for(let r=0,a=e;r<a;r++){const u=r/(a-1)*2-1;s[r]=t(u,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const e=["none","2x","4x"].some(s=>s.includes(t));ie(e,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class hm extends jr{constructor(){const t=Bt(hm.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new hu({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(jr.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class ka{constructor(t,e){this.id=ka._eventId++,this._remainderTime=0;const s=Object.assign(ka.getDefaults(),e);this.transport=t,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:Ce,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}ka._eventId=0;class ev extends ka{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(ev.getDefaults(),e);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},ka.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return Dp(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Is(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){Dp(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Is(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const e=this.transport.getTicksAtTime(t);tu(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class fm extends ti{constructor(){const t=Bt(fm.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new GD(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Gs,this._repeatedEvents=new jD,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new um({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),xe(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(ti.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!==0&&e%(this._swingTicks*2)!==0){const s=e%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;t+=new Is(this.context,this._swingTicks*2/3).toSeconds()*r}oS(!0),this._timeline.forEachAtTime(e,s=>s.invoke(t)),oS(!1)}schedule(t,e){const s=new ka(this,{callback:t,time:new Lh(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(t,e,s,r=1/0){const a=new ev(this,{callback:t,duration:new Vs(this.context,r).toTicks(),interval:new Vs(this.context,e).toTicks(),time:new Lh(this.context,s).toTicks()});return this._addEvent(a,this._repeatedEvents)}scheduleOnce(t,e){const s=new ka(this,{callback:t,once:!0,time:new Lh(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(e,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new Is(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){this.context.resume();let s;return we(e)&&(s=this.toTicks(e)),this._clock.start(t,s),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){ar(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Vs(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Vs(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new Is(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new Is(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),s=this._clock.frequency.timeToTicks(t,e);this.ticks=s}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(e),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,e),a=e+r;this.emit("stop",a),this._clock.setTicksAtTime(t,a),this.emit("start",a,this._clock.getSecondsAtTime(a))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{const e=this.now(),s=this.getTicksAtTime(e),r=t-s%t;return this._clock.nextTickTime(r,e)}}syncSignal(t,e){const s=this.now();let r=this.bpm,a=1/(60/r.getValueAtTime(s)/this.PPQ),u=[];if(t.units==="time"){const p=.015625/a,m=new he(p),y=new hm(-1),_=new he(p);r.chain(m,y,_),r=_,a=1/a,u=[m,y,_]}e||(t.getValueAtTime(s)!==0?e=t.getValueAtTime(s)/a:e=0);const h=new he(e);return r.connect(h),h.connect(t._param),u.push(h),this._syncedSignals.push({initial:t.value,nodes:u,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const s=this._syncedSignals[e];s.signal===t&&(s.nodes.forEach(r=>r.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Fy(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}hf.mixin(fm);sm(n=>{n.transport=new fm({context:n})});rm(n=>{n.transport.dispose()});class ei extends Vt{constructor(t){super(t),this.input=void 0,this._state=new lm("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Ce,this._syncedStop=Ce,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new uu({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,xe(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(Vt.getDefaults(),{mute:!1,onstop:Ce,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,s){let r=qs(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")ie(tu(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,e,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const a=this._state.get(r);a&&(a.offset=this.toSeconds(Il(e,0)),a.duration=s?this.toSeconds(s):void 0);const u=this.context.transport.schedule(h=>{this._start(h,e,s)},r);this._scheduled.push(u),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else IT(this.context),this._start(r,e,s);return this}stop(t){let e=qs(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),this._state.getValueAtTime(e)==="started"||we(this._state.getNextState("started",e))){if(this.log("stop",e),!this._synced)this._stop(e);else{const s=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(s)}this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,s){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,e,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(tu(e,0)){const s=this._state.get(e);if(s&&s.state==="started"&&s.time!==e){const r=e-this.toSeconds(s.time);let a;s.duration&&(a=this.toSeconds(s.duration)-r),this._start(t,this.toSeconds(s.offset)+r,a)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(e)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Ce,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class df extends eu{constructor(){const t=Bt(df.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,cr(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Ae({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new Qe(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(eu.getDefaults(),{url:new Qe,loop:!1,loopEnd:0,loopStart:0,onload:Ce,onerror:Ce,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,s,r=1){ie(this.buffer.loaded,"buffer is either not set or not loaded");const a=this.toSeconds(t);this._startGain(a,r),this.loop?e=Il(e,this.loopStart):e=Il(e,0);let u=Math.max(this.toSeconds(e),0);if(this.loop){const h=this.toSeconds(this.loopEnd)||this.buffer.duration,p=this.toSeconds(this.loopStart),m=h-p;$0(u,h)&&(u=(u-p)%m+p),sr(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Dp(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(a,u)),we(s)){let h=this.toSeconds(s);h=Math.max(h,0),this.stop(a+h)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Oa extends ei{constructor(){const t=Bt(Oa.getDefaults(),arguments,["type"]);super(t),this.name="Noise",this._source=null,this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(ei.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(t){if(ie(t in aS,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,this.state==="started")){const e=this.now();this._stop(e),this._start(e)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}_start(t){const e=aS[this._type];this._source=new df({url:e,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(e.duration-.001))}_stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Pc=44100*5,u0=2,wo={brown:null,pink:null,white:null},aS={get brown(){if(!wo.brown){const n=[];for(let t=0;t<u0;t++){const e=new Float32Array(Pc);n[t]=e;let s=0;for(let r=0;r<Pc;r++){const a=Math.random()*2-1;e[r]=(s+.02*a)/1.02,s=e[r],e[r]*=3.5}}wo.brown=new Qe().fromArray(n)}return wo.brown},get pink(){if(!wo.pink){const n=[];for(let t=0;t<u0;t++){const e=new Float32Array(Pc);n[t]=e;let s,r,a,u,h,p,m;s=r=a=u=h=p=m=0;for(let y=0;y<Pc;y++){const _=Math.random()*2-1;s=.99886*s+_*.0555179,r=.99332*r+_*.0750759,a=.969*a+_*.153852,u=.8665*u+_*.3104856,h=.55*h+_*.5329522,p=-.7616*p-_*.016898,e[y]=s+r+a+u+h+p+m+_*.5362,e[y]*=.11,m=_*.115926}}wo.pink=new Qe().fromArray(n)}return wo.pink},get white(){if(!wo.white){const n=[];for(let t=0;t<u0;t++){const e=new Float32Array(Pc);n[t]=e;for(let s=0;s<Pc;s++)e[s]=Math.random()*2-1}wo.white=new Qe().fromArray(n)}return wo.white}};function Gl(n,t){return En(this,void 0,void 0,function*(){const e=t/n.context.sampleRate,s=new om(1,e,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/e,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class nv extends eu{constructor(){const t=Bt(nv.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],cr(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new Ae({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new Ae({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),xe(this,["frequency","detune"])}static getDefaults(){return Object.assign(eu.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class wn extends ei{constructor(){const t=Bt(wn.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new Re({context:this.context,units:"frequency",value:t.frequency}),xe(this,"frequency"),this.detune=new Re({context:this.context,units:"cents",value:t.detune}),xe(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(ei.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),s=new nv({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return wn._periodicWaveCache.find(e=>e.phase===this._phase&&ED(e.partials,this._partials));{const t=wn._periodicWaveCache.find(e=>e.type===this._type&&e.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&e)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{const s=this._getCachedPeriodicWave();if(we(s)){const{partials:r,wave:a}=s;this._wave=a,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,a]=this._getRealImaginary(t,this._phase),u=this.context.createPeriodicWave(r,a);this._wave=u,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),wn._periodicWaveCache.push({imag:a,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),wn._periodicWaveCache.length>100&&wn._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){ys(t,0);let e=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(e=s[1]),this._type!=="custom")t===0?this.type=e:this.type=e+t.toString();else{const r=new Float32Array(t);this._partials.forEach((a,u)=>r[u]=a),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(t,e){let r=2048;const a=new Float32Array(r),u=new Float32Array(r);let h=1;if(t==="custom"){if(h=this._partials.length+1,this._partialCount=this._partials.length,r=h,this._partials.length===0)return[a,u]}else{const p=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);p?(h=parseInt(p[2],10)+1,this._partialCount=parseInt(p[2],10),t=p[1],h=Math.max(h,2),r=h):this._partialCount=0,this._partials=[]}for(let p=1;p<r;++p){const m=2/(p*Math.PI);let y;switch(t){case"sine":y=p<=h?1:0,this._partials[p-1]=y;break;case"square":y=p&1?2*m:0,this._partials[p-1]=y;break;case"sawtooth":y=m*(p&1?1:-1),this._partials[p-1]=y;break;case"triangle":p&1?y=2*(m*m)*(p-1>>1&1?-1:1):y=0,this._partials[p-1]=y;break;case"custom":y=this._partials[p-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}y!==0?(a[p]=-y*Math.sin(e*p),u[p]=y*Math.cos(e*p)):(a[p]=0,u[p]=0)}return[a,u]}_inverseFFT(t,e,s){let r=0;const a=t.length;for(let u=0;u<a;u++)r+=t[u]*Math.cos(u*s)+e[u]*Math.sin(u*s);return r}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,a=32;for(let u=0;u<a;u++)s=Math.max(this._inverseFFT(t,e,u/a*r),s);return ql(-this._inverseFFT(t,e,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return En(this,arguments,void 0,function*(t=1024){return Gl(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}wn._periodicWaveCache=[];class iv extends jr{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new hu({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class qr extends Re{constructor(){const t=Bt(qr.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new he({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Re.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class dm extends ei{constructor(){const t=Bt(dm.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new iv({context:this.context}),this._modulationNode=new he({context:this.context}),this._carrier=new wn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new wn({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new qr({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),xe(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(wn.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return En(this,arguments,void 0,function*(t=1024){return Gl(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class pm extends ei{constructor(){const t=Bt(pm.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new he({context:this.context,gain:0}),this._carrier=new wn({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Re({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new wn({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new qr({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new qr({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),xe(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(wn.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return En(this,arguments,void 0,function*(t=1024){return Gl(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class pf extends ei{constructor(){const t=Bt(pf.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new he({context:this.context,gain:0}),this._thresh=new hu({context:this.context,mapping:e=>e<=0?-1:1}),this.width=new Re({context:this.context,units:"audioRange",value:t.width}),this._triangle=new wn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),xe(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ei.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return En(this,arguments,void 0,function*(t=1024){return Gl(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class mm extends ei{constructor(){const t=Bt(mm.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new Re({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Re({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,xe(this,["frequency","detune"])}static getDefaults(){return Object.assign(wn.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,s=t/(this._oscillators.length-1);this._forEach((r,a)=>r.detune.value=e+s*a)}}get count(){return this._oscillators.length}set count(t){if(ys(t,1),this._oscillators.length!==t){this._forEach(e=>e.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const s=new wn({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:e===0?()=>this.onstop(this):Ce});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[e]=s}this.spread=this._spread,this.state==="started"&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((e,s)=>e.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(){return En(this,arguments,void 0,function*(t=1024){return Gl(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class _m extends ei{constructor(){const t=Bt(_m.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new qr({context:this.context,value:2}),this._pulse=new pf({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new wn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),xe(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ei.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return En(this,arguments,void 0,function*(t=1024){return Gl(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const lS={am:dm,fat:mm,fm:pm,oscillator:wn,pulse:pf,pwm:_m};class Da extends ei{constructor(){const t=Bt(Da.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new Re({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Re({context:this.context,units:"cents",value:t.detune}),xe(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(wn.getDefaults(),pm.getDefaults(),dm.getDefaults(),mm.getDefaults(),pf.getDefaults(),_m.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=lS[t],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(e=this._oscillator.type),t==="fm"?this.type="fm"+e:t==="am"?this.type="am"+e:t==="fat"?this.type="fat"+e:t==="oscillator"?this.type=e:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,e){return t instanceof lS[e]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&Vr(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&Vr(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&ko(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return En(this,arguments,void 0,function*(t=1024){return Gl(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class sv extends Re{constructor(){super(Bt(sv.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new he({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Ma(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Re.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class gm extends jr{constructor(){const t=Bt(gm.getDefaults(),arguments,["min","max"]);super(t),this.name="Scale",this._mult=this.input=new qr({context:this.context,value:t.max-t.min}),this._add=this.output=new sv({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(jr.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class rv extends jr{constructor(){super(Bt(rv.getDefaults(),arguments)),this.name="Zero",this._gain=new he({context:this.context}),this.output=this._gain,this.input=void 0,cr(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),qT(this.context.getConstant(0),this._gain),this}}class qh extends Vt{constructor(){const t=Bt(qh.getDefaults(),arguments,["frequency","min","max"]);super(t),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Ae.prototype._fromType,this._toType=Ae.prototype._toType,this._is=Ae.prototype._is,this._clampValue=Ae.prototype._clampValue,this._oscillator=new wn(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new he({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Re({context:this.context,units:"audioRange",value:0}),this._zeros=new rv({context:this.context}),this._a2g=new iv({context:this.context}),this._scaler=this.output=new gm({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),xe(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(wn.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const e=this.min,s=this.max;this._units=t,this.min=e,this.max=s}get state(){return this._oscillator.state}connect(t,e,s){return(t instanceof Ae||t instanceof Re)&&(this.convert=t.convert,this.units=t.units),cm(this,t,e,s),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function GT(n,t=1/0){const e=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(a){ys(a,n,t),e.set(this,a)}})}}function Ro(n,t=1/0){const e=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(a){ys(this.toSeconds(a),n,t),e.set(this,a)}})}}class Ra extends ei{constructor(){const t=Bt(Ra.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new Qe({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(ei.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Ce,onerror:Ce,playbackRate:1,reverse:!1})}load(t){return En(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=Ce){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,s){return super.start(t,e,s),this}_start(t,e,s){this._loop?e=Il(e,this._loopStart):e=Il(e,0);const r=this.toSeconds(e),a=s;s=Il(s,Math.max(this._buffer.duration-r,0));let u=this.toSeconds(s);u=u/this._playbackRate,t=this.toSeconds(t);const h=new df({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+u),this._state.setStateAtTime("stopped",t+u,{implicitEnd:!0})),this._activeSources.add(h),this._loop&&qs(a)?h.start(t,r):h.start(t,r,u-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(s=>s.stop(e))}restart(t,e,s){return super.restart(t,e,s),this}_restart(t,e,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(t),this._start(t,e,s)}seek(t,e){const s=this.toSeconds(e);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(t);this._stop(s),this._start(s,r)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&ys(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&ys(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),s=this._state.getNextState("stopped",e);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}fr([Ro(0)],Ra.prototype,"fadeIn",void 0);fr([Ro(0)],Ra.prototype,"fadeOut",void 0);class ZD extends jr{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new hu({context:this.context,mapping:t=>Math.abs(t)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class vs extends Vt{constructor(){const t=Bt(vs.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new Re({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(Vt.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(ko(t))return t;{let s;for(s in Yd)if(Yd[s][e]===t)return s;return t}}_setCurve(t,e,s){if(ko(s)&&Reflect.has(Yd,s)){const r=Yd[s];Rl(r)?t!=="_decayCurve"&&(this[t]=r[e]):this[t]=r}else if(ar(s)&&t!=="_decayCurve")this[t]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let r=this.toSeconds(this.attack);const a=this.toSeconds(this.decay),u=this.getValueAtTime(t);if(u>0){const h=1/r;r=(1-u)/h}if(r<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(e,r,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(e,r,t);else{this._sig.cancelAndHoldAtTime(t);let h=this._attackCurve;for(let p=1;p<h.length;p++)if(h[p-1]<=u&&u<=h[p]){h=this._attackCurve.slice(p),h[0]=u;break}this._sig.setValueCurveAtTime(h,t,r,e)}if(a&&this.sustain<1){const h=e*this.sustain,p=t+r;this.log("decay",p),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(h,a+p):this._sig.exponentialApproachValueAtTime(h,p,a)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,t):(ie(ar(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,s,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,s=1){return e=this.toSeconds(e),this.triggerAttack(e,s),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,s=0){return cm(this,t,e,s),this}asArray(){return En(this,arguments,void 0,function*(t=1024){const e=t/this.context.sampleRate,s=new om(1,e,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),a=r+this.toSeconds(this.release),u=a*.1,h=a+u,p=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/h,decay:e*this.toSeconds(this.decay)/h,release:e*this.toSeconds(this.release)/h,context:s}));return p._sig.toDestination(),p.triggerAttackRelease(e*(r+u)/h,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}fr([Ro(0)],vs.prototype,"attack",void 0);fr([Ro(0)],vs.prototype,"decay",void 0);fr([GT(0,1)],vs.prototype,"sustain",void 0);fr([Ro(0)],vs.prototype,"release",void 0);const Yd=(()=>{let t,e;const s=[];for(t=0;t<128;t++)s[t]=Math.sin(t/127*(Math.PI/2));const r=[],a=6.4;for(t=0;t<127;t++){e=t/127;const b=Math.sin(e*(Math.PI*2)*a-Math.PI/2)+1;r[t]=b/10+e*.83}r[127]=1;const u=[],h=5;for(t=0;t<128;t++)u[t]=Math.ceil(t/127*h)/h;const p=[];for(t=0;t<128;t++)e=t/127,p[t]=.5*(1-Math.cos(Math.PI*e));const m=[];for(t=0;t<128;t++){e=t/127;const b=Math.pow(e,3)*4+.2,S=Math.cos(b*Math.PI*2*e);m[t]=Math.abs(S*(1-e))}function y(b){const S=new Array(b.length);for(let x=0;x<b.length;x++)S[x]=1-b[x];return S}function _(b){return b.slice(0).reverse()}return{bounce:{In:y(m),Out:m},cosine:{In:s,Out:_(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:y(r)},sine:{In:p,Out:y(p)},step:{In:u,Out:y(u)}}})();class Ia extends Vt{constructor(){const t=Bt(Ia.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=e=>this._original_triggerRelease(e),this._volume=this.output=new uu({context:this.context,volume:t.volume}),this.volume=this._volume.volume,xe(this,"volume")}static getDefaults(){return Object.assign(Vt.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const s=this["_original_"+t]=this[t];this[t]=(...r)=>{const a=r[e],u=this.context.transport.schedule(h=>{r[e]=h,s.apply(this,r)},a);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,s,r){const a=this.toSeconds(s),u=this.toSeconds(e);return this.triggerAttack(t,a,r),this.triggerRelease(a+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Xi extends Ia{constructor(){const t=Bt(Xi.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(Ia.getDefaults(),{detune:0,onsilence:Ce,portamento:0})}triggerAttack(t,e,s=1){this.log("triggerAttack",t,e,s);const r=this.toSeconds(e);return this._triggerEnvelopeAttack(r,s),this.setNote(t,r),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const s=this.toSeconds(e),r=t instanceof js?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const a=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,a,s)}else this.frequency.setValueAtTime(r,s);return this}}fr([Ro(0)],Xi.prototype,"portamento",void 0);class ym extends vs{constructor(){super(Bt(ym.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new he({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class _s extends Xi{constructor(){const t=Bt(_s.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new Da(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new ym(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),xe(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Xi.getDefaults(),{envelope:Object.assign(Hs(vs.getDefaults(),Object.keys(Vt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Hs(Da.getDefaults(),[...Object.keys(ei.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+s+r)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Gh extends Xi{constructor(){const t=Bt(Gh.getDefaults(),arguments);super(t),this.name="ModulationSynth",this._carrier=new _s({context:this.context,oscillator:t.oscillator,envelope:t.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new _s({context:this.context,oscillator:t.modulation,envelope:t.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Re({context:this.context,units:"frequency"}),this.detune=new Re({context:this.context,value:t.detune,units:"cents"}),this.harmonicity=new qr({context:this.context,value:t.harmonicity,minValue:0}),this._modulationNode=new he({context:this.context,gain:0}),xe(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(Xi.getDefaults(),{harmonicity:3,oscillator:Object.assign(Hs(Da.getDefaults(),[...Object.keys(ei.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(Hs(vs.getDefaults(),Object.keys(Vt.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(Hs(Da.getDefaults(),[...Object.keys(ei.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(Hs(vs.getDefaults(),Object.keys(Vt.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(t,e){this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class El extends Gh{constructor(){super(Bt(El.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new iv({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class Rp extends Vt{constructor(){const t=Bt(Rp.getDefaults(),arguments,["frequency","type"]);super(t),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Ae({context:this.context,units:"number",value:t.Q,param:this._filter.Q}),this.frequency=new Ae({context:this.context,units:"frequency",value:t.frequency,param:this._filter.frequency}),this.detune=new Ae({context:this.context,units:"cents",value:t.detune,param:this._filter.detune}),this.gain=new Ae({context:this.context,units:"decibels",convert:!1,value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(Vt.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){ie(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t)!==-1,`Invalid filter type: ${t}`),this._filter.type=t}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let u=0;u<t;u++){const p=Math.pow(u/t,2)*19980+20;e[u]=p}const s=new Float32Array(t),r=new Float32Array(t),a=this.context.createBiquadFilter();return a.type=this.type,a.Q.value=this.Q.value,a.frequency.value=this.frequency.value,a.gain.value=this.gain.value,a.getFrequencyResponse(e,s,r),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Ip extends Vt{constructor(){const t=Bt(Ip.getDefaults(),arguments,["frequency","type","rolloff"]);super(t),this.name="Filter",this.input=new he({context:this.context}),this.output=new he({context:this.context}),this._filters=[],this._filters=[],this.Q=new Re({context:this.context,units:"positive",value:t.Q}),this.frequency=new Re({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Re({context:this.context,units:"cents",value:t.detune}),this.gain=new Re({context:this.context,units:"decibels",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,xe(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(Vt.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(t){ie(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t)!==-1,`Invalid filter type: ${t}`),this._type=t,this._filters.forEach(s=>s.type=t)}get rolloff(){return this._rolloff}set rolloff(t){const e=Vr(t)?t:parseInt(t,10),s=[-12,-24,-48,-96];let r=s.indexOf(e);ie(r!==-1,`rolloff can only be ${s.join(", ")}`),r+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach(a=>a.disconnect()),this._filters=new Array(r);for(let a=0;a<r;a++){const u=new Rp({context:this.context});u.type=this._type,this.frequency.connect(u.frequency),this.detune.connect(u.detune),this.Q.connect(u.Q),this.gain.connect(u.gain),this._filters[a]=u}this._internalChannels=this._filters,Ma(this.input,...this._internalChannels,this.output)}getFrequencyResponse(t=128){const e=new Rp({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(t).map(()=>1);return this._filters.forEach(()=>{e.getFrequencyResponse(t).forEach((a,u)=>s[u]*=a)}),e.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(t=>{t.dispose()}),Fy(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Np extends vs{constructor(){const t=Bt(Np.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="FrequencyEnvelope",this._octaves=t.octaves,this._baseFrequency=this.toFrequency(t.baseFrequency),this._exponent=this.input=new hm({context:this.context,value:t.exponent}),this._scale=this.output=new gm({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(vs.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){const e=this.toFrequency(t);ys(e,0),this._baseFrequency=e,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)}get exponent(){return this._exponent.value}set exponent(t){this._exponent.value=t}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class Ml extends Xi{constructor(){const t=Bt(Ml.getDefaults(),arguments);super(t),this.name="MonoSynth",this.oscillator=new Da(Object.assign(t.oscillator,{context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Ip(Object.assign(t.filter,{context:this.context})),this.filterEnvelope=new Np(Object.assign(t.filterEnvelope,{context:this.context})),this.envelope=new ym(Object.assign(t.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),xe(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Xi.getDefaults(),{envelope:Object.assign(Hs(vs.getDefaults(),Object.keys(Vt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(Hs(Ip.getDefaults(),Object.keys(Vt.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(Hs(Np.getDefaults(),Object.keys(Vt.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(Hs(Da.getDefaults(),Object.keys(ei.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(t,e=1){if(this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+s+r)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Mh extends Xi{constructor(){const t=Bt(Mh.getDefaults(),arguments);super(t),this.name="DuoSynth",this.voice0=new Ml(Object.assign(t.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new Ml(Object.assign(t.voice1,{context:this.context})),this.harmonicity=new qr({context:this.context,units:"positive",value:t.harmonicity}),this._vibrato=new qh({frequency:t.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new he({context:this.context,units:"normalRange",gain:t.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new Re({context:this.context,units:"frequency",value:440}),this.detune=new Re({context:this.context,units:"cents",value:t.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),xe(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(t){return t=this.toSeconds(t),this.voice0.envelope.getValueAtTime(t)+this.voice1.envelope.getValueAtTime(t)}static getDefaults(){return Br(Xi.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:Br(Hs(Ml.getDefaults(),Object.keys(Xi.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:Br(Hs(Ml.getDefaults(),Object.keys(Xi.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(t,e){this.voice0._triggerEnvelopeAttack(t,e),this.voice1._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class kh extends Gh{constructor(){const t=Bt(kh.getDefaults(),arguments);super(t),this.name="FMSynth",this.modulationIndex=new qr({context:this.context,value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(Gh.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}class mf extends _s{constructor(){const t=Bt(mf.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,xe(this,["oscillator","envelope"])}static getDefaults(){return Br(Xi.getDefaults(),_s.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const s=this.toSeconds(e),r=this.toFrequency(t instanceof js?t.toFrequency():t),a=r*this.octaves;return this.oscillator.frequency.setValueAtTime(a,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}fr([GT(0)],mf.prototype,"octaves",void 0);fr([Ro(0)],mf.prototype,"pitchDecay",void 0);const ov=new Set;function av(n){ov.add(n)}function ZT(n,t){const e=`registerProcessor("${n}", ${t})`;ov.add(e)}function WD(){return Array.from(ov).join(`
`)}class FD extends Vt{constructor(t){super(t),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=Ce;const e=URL.createObjectURL(new Blob([WD()],{type:"text/javascript"})),s=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(e).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(s,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const YD=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;av(YD);const XD=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;av(XD);const QD=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;av(QD);const WT="feedback-comb-filter",$D=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;ZT(WT,$D);class lv extends FD{constructor(){const t=Bt(lv.getDefaults(),arguments,["delayTime","resonance"]);super(t),this.name="FeedbackCombFilter",this.input=new he({context:this.context}),this.output=new he({context:this.context}),this.delayTime=new Ae({context:this.context,value:t.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new Ae({context:this.context,value:t.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),xe(this,["resonance","delayTime"])}_audioWorkletName(){return WT}static getDefaults(){return Object.assign(Vt.getDefaults(),{delayTime:.1,resonance:.5})}onReady(t){Ma(this.input,t,this.output);const e=t.parameters.get("delayTime");this.delayTime.setParam(e);const s=t.parameters.get("feedback");this.resonance.setParam(s)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class cv extends Vt{constructor(){const t=Bt(cv.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OnePoleFilter",this._frequency=t.frequency,this._type=t.type,this.input=new he({context:this.context}),this.output=new he({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(Vt.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const t=this._filter,e=this.toFrequency(this._frequency),s=1/(2*Math.PI*e);if(this._type==="lowpass"){const r=1/(s*this.context.sampleRate),a=r-1;this._filter=this.context.createIIRFilter([r,0],[1,a])}else{const r=1/(s*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,r])}this.input.chain(this._filter,this.output),t&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(t),t.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(t){this._frequency=t,this._createFilter()}get type(){return this._type}set type(t){this._type=t,this._createFilter()}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let a=0;a<t;a++){const h=Math.pow(a/t,2)*19980+20;e[a]=h}const s=new Float32Array(t),r=new Float32Array(t);return this._filter.getFrequencyResponse(e,s,r),s}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class uv extends Vt{constructor(){const t=Bt(uv.getDefaults(),arguments,["delayTime","resonance","dampening"]);super(t),this.name="LowpassCombFilter",this._combFilter=this.output=new lv({context:this.context,delayTime:t.delayTime,resonance:t.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new cv({context:this.context,frequency:t.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(Vt.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(t){this._lowpass.frequency=t}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class hv extends Ia{constructor(){const t=Bt(hv.getDefaults(),arguments);super(t),this.name="PluckSynth",this._noise=new Oa({context:this.context,type:"pink"}),this.attackNoise=t.attackNoise,this._lfcf=new uv({context:this.context,dampening:t.dampening,resonance:t.resonance}),this.resonance=t.resonance,this.release=t.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return Br(Ia.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(t){this._lfcf.dampening=t}triggerAttack(t,e){const s=this.toFrequency(t);e=this.toSeconds(e);const r=1/s;return this._lfcf.delayTime.setValueAtTime(r,e),this._noise.start(e),this._noise.stop(e+r*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(e),this._lfcf.resonance.setValueAtTime(this.resonance,e),this}triggerRelease(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class vm extends Ia{constructor(){const t=Bt(vm.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;const e={};Object.keys(t.urls).forEach(s=>{const r=parseInt(s,10);if(ie(Wd(s)||Vr(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),Wd(s)){const a=new js(this.context,s).toMidi();e[a]=t.urls[s]}else Vr(r)&&isFinite(r)&&(e[r]=t.urls[r])}),this._buffers=new tv({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(Ia.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Ce,onerror:Ce,release:.1,urls:{}})}_findClosest(t){let s=0;for(;s<96;){if(this._buffers.has(t+s))return-s;if(this._buffers.has(t-s))return s;s++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,s=1){return this.log("triggerAttack",t,e,s),Array.isArray(t)||(t=[t]),t.forEach(r=>{const a=jT(new js(this.context,r).toFrequency()),u=Math.round(a),h=a-u,p=this._findClosest(u),m=u-p,y=this._buffers.get(m),_=VT(p+h),b=new df({url:y,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:_}).connect(this.output);b.start(e,0,y.duration/_,s),ar(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(b),b.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const S=this._activeSources.get(u),x=S.indexOf(b);x!==-1&&S.splice(x,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(s=>{const r=new js(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const a=this._activeSources.get(r);e=this.toSeconds(e),a.forEach(u=>{u.stop(e)}),this._activeSources.set(r,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,s,r=1){const a=this.toSeconds(s);return this.triggerAttack(t,a,r),ar(e)?(ie(ar(t),"notes must be an array when duration is array"),t.forEach((u,h)=>{const p=e[Math.min(h,e.length-1)];this.triggerRelease(u,a+this.toSeconds(p))})):this.triggerRelease(t,a+this.toSeconds(e)),this}add(t,e,s){if(ie(Wd(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Wd(t)){const r=new js(this.context,t).toMidi();this._buffers.add(r,e,s)}else this._buffers.add(t,e,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}fr([Ro(0)],vm.prototype,"attack",void 0);fr([Ro(0)],vm.prototype,"release",void 0);class fv extends ti{constructor(){const t=Bt(fv.getDefaults(),arguments,["callback","value"]);super(t),this.name="ToneEvent",this._state=new lm("stopped"),this._startOffset=0,this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(ti.getDefaults(),{callback:Ce,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,e=>{let s;if(e.state==="started"){e.id!==-1&&this.context.transport.clear(e.id);const r=e.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||Vr(this._loop)&&this._loop>1){s=1/0,Vr(this._loop)&&(s=this._loop*this._getLoopDuration());const a=this._state.getAfter(r);a!==null&&(s=Math.min(s,a.time-r)),s!==1/0&&(s=new Is(this.context,s));const u=new Is(this.context,this._getLoopDuration());e.id=this.context.transport.scheduleRepeat(this._tick.bind(this),u,new Is(this.context,r),s)}else e.id=this.context.transport.schedule(this._tick.bind(this),new Is(this.context,r))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return this._state.getValueAtTime(e)==="stopped"&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if(this._state.getValueAtTime(e)==="started"){this._state.setStateAtTime("stopped",e,{id:-1});const s=this._state.getBefore(e);let r=e;s!==null&&(r=s.time),this._rescheduleEvents(r)}return this}cancel(t){t=Il(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,s=>{this.context.transport.clear(s.id)}),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&this._state.getValueAtTime(e)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let s=.02;RT(this.humanize)||(s=this.toSeconds(this.humanize)),t+=(Math.random()*2-1)*s}this.callback(t,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new Is(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new Is(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(e!==null&&e.state==="started"){const s=this._getLoopDuration();return(t-e.time)%s/s}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Na extends ti{constructor(){const t=Bt(Na.getDefaults(),arguments,["callback","interval"]);super(t),this.name="Loop",this._event=new fv({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:t.interval,playbackRate:t.playbackRate,probability:t.probability,humanize:t.humanize}),this.callback=t.callback,this.iterations=t.iterations}static getDefaults(){return Object.assign(ti.getDefaults(),{interval:"4n",callback:Ce,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(t){return this._event.start(t),this}stop(t){return this._event.stop(t),this}cancel(t){return this._event.cancel(t),this}_tick(t){this.callback(t)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(t){this._event.loopEnd=t}get playbackRate(){return this._event.playbackRate}set playbackRate(t){this._event.playbackRate=t}get humanize(){return this._event.humanize}set humanize(t){this._event.humanize=t}get probability(){return this._event.probability}set probability(t){this._event.probability=t}get mute(){return this._event.mute}set mute(t){this._event.mute=t}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(t){t===1/0?this._event.loop=!0:this._event.loop=t}dispose(){return super.dispose(),this._event.dispose(),this}}function*KD(n){let t=0;for(;t<n;)t=ql(t,0,n-1),yield t,t++}function*JD(n){let t=n-1;for(;t>=0;)t=ql(t,0,n-1),yield t,t--}function*wh(n,t){for(;;)yield*t(n)}function*cS(n,t){let e=t?0:n-1;for(;;)e=ql(e,0,n-1),yield e,t?(e++,e>=n-1&&(t=!1)):(e--,e<=0&&(t=!0))}function*t8(n){let t=0,e=0;for(;t<n;)t=ql(t,0,n-1),yield t,e++,t+=e%2?2:-1}function*e8(n){let t=n-1,e=0;for(;t>=0;)t=ql(t,0,n-1),yield t,e++,t+=e%2?-2:1}function*n8(n){for(;;)yield Math.floor(Math.random()*n)}function*i8(n){const t=[];for(let e=0;e<n;e++)t.push(e);for(;t.length>0;){const e=t.splice(Math.floor(t.length*Math.random()),1);yield ql(e[0],0,n-1)}}function*s8(n){let t=Math.floor(Math.random()*n);for(;;)t===0?t++:t===n-1||Math.random()<.5?t--:t++,yield t}function*uS(n,t="up",e=0){switch(ie(n>=1,"The number of values must be at least one"),t){case"up":yield*wh(n,KD);case"down":yield*wh(n,JD);case"upDown":yield*cS(n,!0);case"downUp":yield*cS(n,!1);case"alternateUp":yield*wh(n,t8);case"alternateDown":yield*wh(n,e8);case"random":yield*n8(n);case"randomOnce":yield*wh(n,i8);case"randomWalk":yield*s8(n)}}class ds extends Na{constructor(){const t=Bt(ds.getDefaults(),arguments,["callback","values","pattern"]);super(t),this.name="Pattern",this.callback=t.callback,this._values=t.values,this._pattern=uS(t.values.length,t.pattern),this._type=t.pattern}static getDefaults(){return Object.assign(Na.getDefaults(),{pattern:"up",values:[],callback:Ce})}_tick(t){const e=this._pattern.next();this._index=e.value,this._value=this._values[e.value],this.callback(t,this._value)}get values(){return this._values}set values(t){this._values=t,this.pattern=this._type}get value(){return this._value}get index(){return this._index}get pattern(){return this._type}set pattern(t){this._type=t,this._pattern=uS(this._values.length,this._type)}}class bm extends Vt{constructor(){const t=Bt(bm.getDefaults(),arguments,["fade"]);super(t),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new ZD({context:this.context}),this.a=new he({context:this.context,gain:0}),this.b=new he({context:this.context,gain:0}),this.output=new he({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new Re({context:this.context,units:"normalRange",value:t.fade}),xe(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",cr(this._split,this.a.gain,0),cr(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(Vt.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Pp extends Vt{constructor(t){super(t),this.name="Effect",this._dryWet=new bm({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new he({context:this.context}),this.effectReturn=new he({context:this.context}),this.input=new he({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(t.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],xe(this,"wet")}static getDefaults(){return Object.assign(Vt.getDefaults(),{wet:1})}connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class dv extends Vt{constructor(){const t=Bt(dv.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Ae({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",xe(this,"pan")}static getDefaults(){return Object.assign(Vt.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const r8="bit-crusher",o8=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;ZT(r8,o8);class wm extends Vt{constructor(){const t=Bt(wm.getDefaults(),arguments,["channels"]);super(t),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(Vt.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class fu extends Vt{constructor(){const t=Bt(fu.getDefaults(),arguments,["channels"]);super(t),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(t.channels)}static getDefaults(){return Object.assign(Vt.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class hS extends Vt{constructor(t){super(t),this.name="StereoEffect",this.input=new he({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new bm({context:this.context,fade:t.wet}),this.wet=this._dryWet.fade,this._split=new wm({context:this.context,channels:2}),this._merge=new fu({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),xe(this,["wet"])}connectEffectLeft(...t){this._split.connect(t[0],0,0),Ma(...t),cr(t[t.length-1],this._merge,0,0)}connectEffectRight(...t){this._split.connect(t[0],1,0),Ma(...t),cr(t[t.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(Vt.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class fS extends hS{constructor(t){super(t),this.feedback=new Re({context:this.context,value:t.feedback,units:"normalRange"}),this._feedbackL=new he({context:this.context}),this._feedbackR=new he({context:this.context}),this._feedbackSplit=new wm({context:this.context,channels:2}),this._feedbackMerge=new fu({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),xe(this,["feedback"])}static getDefaults(){return Object.assign(hS.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Oh extends fS{constructor(){const t=Bt(Oh.getDefaults(),arguments,["frequency","delayTime","depth"]);super(t),this.name="Chorus",this._depth=t.depth,this._delayTime=t.delayTime/1e3,this._lfoL=new qh({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new qh({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._delayNodeL=new jh({context:this.context}),this._delayNodeR=new jh({context:this.context}),this.frequency=this._lfoL.frequency,xe(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=t.type,this.spread=t.spread}static getDefaults(){return Object.assign(fS.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(t){this._depth=t;const e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}get delayTime(){return this._delayTime*1e3}set delayTime(t){this._delayTime=t/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class dS extends Pp{constructor(t){super(t),this.name="FeedbackEffect",this._feedbackGain=new he({context:this.context,gain:t.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,xe(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(Pp.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Dh extends dS{constructor(){const t=Bt(Dh.getDefaults(),arguments,["delayTime","feedback"]);super(t),this.name="FeedbackDelay",this._delayNode=new jh({context:this.context,delayTime:t.delayTime,maxDelay:t.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),xe(this,"delayTime")}static getDefaults(){return Object.assign(dS.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class Rr extends Pp{constructor(){const t=Bt(Rr.getDefaults(),arguments,["decay"]);super(t),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=this.toSeconds(t.decay);ys(e,.001),this._decay=e;const s=this.toSeconds(t.preDelay);ys(s,0),this._preDelay=s,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Pp.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(t){t=this.toSeconds(t),ys(t,.001),this._decay=t,this.generate()}get preDelay(){return this._preDelay}set preDelay(t){t=this.toSeconds(t),ys(t,0),this._preDelay=t,this.generate()}generate(){return En(this,void 0,void 0,function*(){const t=this.ready,e=new om(2,this._decay+this._preDelay,this.context.sampleRate),s=new Oa({context:e}),r=new Oa({context:e}),a=new fu({context:e});s.connect(a,0,0),r.connect(a,0,1);const u=new he({context:e}).toDestination();a.connect(u),s.start(0),r.start(0),u.gain.setValueAtTime(0,0),u.gain.setValueAtTime(1,this._preDelay),u.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const h=e.render();return this.ready=h.then(Ce),yield t,this._convolver.buffer=(yield h).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class In extends Vt{constructor(){const t=Bt(In.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new he({context:this.context}),In._allSolos.has(this.context)||In._allSolos.set(this.context,new Set),In._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(Vt.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),In._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){In._soloed.has(this.context)||In._soloed.set(this.context,new Set),In._soloed.get(this.context).add(this)}_removeSolo(){In._soloed.has(this.context)&&In._soloed.get(this.context).delete(this)}_isSoloed(){return In._soloed.has(this.context)&&In._soloed.get(this.context).has(this)}_noSolos(){return!In._soloed.has(this.context)||In._soloed.has(this.context)&&In._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),In._allSolos.get(this.context).delete(this),this._removeSolo(),this}}In._allSolos=new Map;In._soloed=new Map;class pv extends Vt{constructor(){const t=Bt(pv.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new dv({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new uu({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,xe(this,["pan","volume"])}static getDefaults(){return Object.assign(Vt.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Yc extends Vt{constructor(){const t=Bt(Yc.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new In({solo:t.solo,context:this.context}),this._panVol=this.output=new pv({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),xe(this,["pan","volume"])}static getDefaults(){return Object.assign(Vt.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return Yc.buses.has(t)||Yc.buses.set(t,new he({context:this.context})),Yc.buses.get(t)}send(t,e=0){const s=this._getBus(t),r=new he({context:this.context,units:"decibels",gain:e});return this.connect(r),r.connect(s),r}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Yc.buses=new Map;function h0(){return Li().now()}Li().transport;function xo(){return Li().transport}const Os=Li().destination;Li().destination;function pS(){return Li().destination}Li().listener;Li().draw;Li();const mv=[{id:"fm-synth",name:"FM Synth",defaultNote:"C4",create:()=>new kh().toDestination()},{id:"am-synth",name:"AM Synth",defaultNote:"G4",create:()=>new El().toDestination()},{id:"bass",name:"Bass",defaultNote:"C2",create:()=>new Ml({oscillator:{type:"sawtooth"},envelope:{attack:.1,decay:.3,sustain:.3,release:.8}}).toDestination()},{id:"lead",name:"Lead",defaultNote:"C5",create:()=>new _s({oscillator:{type:"square"},envelope:{attack:.05,decay:.2,sustain:.2,release:.4}}).toDestination()},{id:"drum",name:"Drum Hit",defaultNote:"C3",create:()=>new mf().toDestination()},{id:"beat_loop",name:"Beat Loop",defaultNote:"C4",create:()=>{const n=new Ra("https://tonejs.github.io/audio/drum-samples/loops/blueyellow.mp3").toDestination();return n.loop=!0,n}},{id:"organ_loop",name:"Organ Loop",defaultNote:"C4",create:()=>{const n=new Ra("https://tonejs.github.io/audio/drum-samples/loops/organ-echo-chords.mp3").toDestination();return n.loop=!0,n}},{id:"combo_synth",name:"Combo Synth",defaultNote:"C4",create:()=>{const n=new kh().toDestination(),t=new El().toDestination(),e=new Na(r=>{n.triggerAttackRelease("D2","8n",r)},"4n").start(0),s=new Na(r=>{t.triggerAttackRelease("A2","8n",r)},"4n").start("8n");return[e,s]}},{id:"noise",name:"Noise",defaultNote:"D6",create:()=>new Oa({type:"pink",volume:-15,fadeIn:.5,fadeOut:.5}).toDestination()},{id:"arp",name:"Arpeggiator",defaultNote:"C4",create:()=>{const n=new fu,t=new Rr({wet:.3});n.chain(t,Os);const e=new _s({oscillator:{type:"custom",partials:[1,.5,.3,.25,.2,.15,.1]},envelope:{attack:.005,decay:.3,sustain:.2,release:1},portamento:.01,volume:-20}).connect(n,0,0),s=new _s({oscillator:{type:"custom",partials:[1,.5,.3,.25,.2,.15,.1]},envelope:{attack:.005,decay:.3,sustain:.2,release:1},portamento:.01,volume:-20}).connect(n,0,1),r=new ds((u,h)=>{e.triggerAttackRelease(h,"8n",u)},["G2","D3","E2","A3"],"upDown"),a=new ds((u,h)=>{s.triggerAttackRelease(h,"8n",u)},["G2","D3","E2","A3"],"upDown");return r.interval="4n",a.interval="4n",a.playbackRate=.985,r.start(0),a.start(0),[r,a]}},{id:"generative",name:"Self-Playing Generative",defaultNote:"C4",create:()=>{const n=new Rr({wet:.9}),t=new Dh("8n",.8),e=["C3","E3","G3","B3","D4","F#4","A4"];let s=0,r=0;const a=new _s({oscillator:{type:"triangle"},envelope:{attack:.01,decay:.3,sustain:.5,release:1},volume:-10,onsilence:()=>{s=(s+1)%e.length,s%4===0&&(r=Math.random()>.5?1:-1);let u=e[s];const h=parseInt(u.match(/\d+/)?.[0]||"3");u=(u.match(/[A-G]#?/)?.[0]||"C")+(h+r);const m=["8n","4n","16n"],y=m[Math.floor(Math.random()*m.length)];a.triggerAttackRelease(u,y),console.log(`Next note: ${u}, duration: ${y}`)}}).chain(n,t,Os);return a.triggerAttackRelease(e[0],"4n"),a}},{id:"dual_voices",name:"Dual Generative Voices",defaultNote:"C4",create:()=>{const n=new Rr({wet:.99}),t=new Dh("8n",.6),e=["C4","D4","E4","G4","A4"],s=["E3","G3","B3","D4"];let r=0,a=0;const u=new _s({oscillator:{type:"sine"},envelope:{attack:.04,decay:.2,sustain:.15,release:1},volume:-15,onsilence:()=>{a=(a+1)%s.length,h.triggerAttackRelease(s[a],"8n")}}).chain(t,Os),h=new kh({harmonicity:3,modulationIndex:10,envelope:{attack:.01,decay:.5,sustain:.1,release:.5},volume:-3,onsilence:()=>{r=(r+1)%e.length,u.triggerAttackRelease(e[r],"4n")}}).chain(n,Os);return u.triggerAttackRelease(e[0],"4n"),[u,h]}},{id:"pattern_accent",name:"Pattern + Accent Hybrid",defaultNote:"C4",create:()=>{const n=new Rr({wet:.8}),t=new Dh("8n",.5),e=new hv({attackNoise:1,dampening:4e3,resonance:.9,volume:-10}).chain(n,t,Os),s=new ds((p,m)=>{e.triggerAttackRelease(m,"8n",p)},["C3","E3","G3","B3"],"upDown");s.interval="8n",s.start(0);const r=["C3","D3","E3","G3","A3","E3"];let a=0;const u=new Rr({wet:.99}),h=new _s({oscillator:{type:"custom",partials:[1,.5,1,1]},envelope:{attack:.01,decay:.3,sustain:.3,release:1.5},volume:-24,portamento:.05,onsilence:()=>{const p=["2n","4n","8n","16n"],m=p[Math.floor(Math.random()*p.length)],y=zD(m).toMilliseconds();setTimeout(()=>{a=Math.floor(Math.random()*r.length),h.triggerAttackRelease(r[a],"16n")},y)}}).chain(t,u,Os);return[s,h]}},{id:"tintinnabular",name:"Tintinnabular (Prt Style)",defaultNote:"C4",create:()=>{const n=new Rr({wet:.6,decay:4}),t=new Oh({frequency:1.5,delayTime:3.5,depth:.7,wet:.3}).start(),e=new Mh({vibratoAmount:.2,vibratoRate:3,harmonicity:1.5,voice0:{oscillator:{type:"sine"},envelope:{attack:.2,decay:.3,sustain:.8,release:2}},voice1:{oscillator:{type:"sine"},envelope:{attack:.2,decay:.3,sustain:.8,release:2}},volume:-18}).chain(t,n,Os),s=new El({harmonicity:2,oscillator:{type:"sine"},envelope:{attack:.3,decay:.2,sustain:.8,release:2.5},modulation:{type:"sine"},modulationEnvelope:{attack:.5,decay:.3,sustain:.7,release:2},volume:-16}).chain(t,n,Os),r=new ds((u,h)=>{e.triggerAttackRelease(h,"4n",u)},["C3","E3","G3"],"up");r.interval="2n";const a=new ds((u,h)=>{s.triggerAttackRelease(h,"2n",u)},["C4","D4","E4","F4","E4","D4"],"upDown");return a.interval="1n",r.start(0),a.start(0),[r,a]}},{id:"tintinnabular_harmony",name:"Tintinnabular Harmony (Thirds & Sixths)",defaultNote:"C4",create:()=>{const n=new Rr({wet:.6,decay:4}),t=new Oh({frequency:1.5,delayTime:3.5,depth:.7,wet:.3}).start(),e=new Mh({vibratoAmount:.2,vibratoRate:3,harmonicity:1.5,voice0:{oscillator:{type:"sine"},envelope:{attack:.2,decay:.3,sustain:.8,release:2}},voice1:{oscillator:{type:"sine"},envelope:{attack:.2,decay:.3,sustain:.8,release:2}},volume:-20}).chain(t,n,Os),s=new El({harmonicity:2,oscillator:{type:"sine"},envelope:{attack:.3,decay:.2,sustain:.8,release:2.5},modulation:{type:"sine"},modulationEnvelope:{attack:.5,decay:.3,sustain:.7,release:2},volume:-18}).chain(t,n,Os),r=new ds((u,h)=>{e.triggerAttackRelease(h,"4n",u)},["E4","G4","B4"],"up");r.interval="2n";const a=new ds((u,h)=>{s.triggerAttackRelease(h,"2n",u)},["A5","B5","C6","D6","C6","B5"],"upDown");return a.interval="1n",r.start("8n"),a.start("4n"),[r,a]}},{id:"tintinnabular_dissonance",name:"Tintinnabular Dissonance (Tension)",defaultNote:"C4",create:()=>{const n=new Rr({wet:.3,decay:2}),t=new Oh({frequency:.5,delayTime:2,depth:.4,wet:.2}).start(),e=new Mh({vibratoAmount:.3,vibratoRate:4.5,harmonicity:1.2,voice0:{oscillator:{type:"sine"},envelope:{attack:.15,decay:.4,sustain:.7,release:1.8}},voice1:{oscillator:{type:"sine"},envelope:{attack:.15,decay:.4,sustain:.7,release:1.8}},volume:-19}).chain(t,n,Os),s=new El({harmonicity:1.8,oscillator:{type:"sine"},envelope:{attack:.25,decay:.3,sustain:.7,release:2},modulation:{type:"sine"},modulationEnvelope:{attack:.4,decay:.4,sustain:.6,release:1.8},volume:-17}).chain(t,n,Os),r=new ds((u,h)=>{e.triggerAttackRelease(h,"4n",u)},["Db4","F4","Ab4"],"up");r.interval="2n";const a=new ds((u,h)=>{s.triggerAttackRelease(h,"2n",u)},["B5","C#6","F5","B5","F5","C#6"],"upDown");return a.interval="1n",r.start("16n"),a.start("8n."),[r,a]}}];function a8(n){return mv.find(t=>t.id===n)}const l8=({show:n,shapeId:t,position:e,onSoundSelect:s,onClose:r,selectedsoundId:a})=>{const u=h=>{s(h),r()};return n?Ct.jsxs("div",{style:{position:"absolute",left:e.x,top:e.y,backgroundColor:"white",border:"2px solid #333",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"200px",padding:"8px 0",fontFamily:"Arial, sans-serif"},children:[Ct.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #ddd",fontWeight:"bold",fontSize:"14px",color:"#333",backgroundColor:"#f8f8f8"},children:["Select Sound for ",t]}),Ct.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",overflowX:"hidden"},children:mv.map(h=>Ct.jsxs("button",{onClick:()=>u(h.id),style:{width:"100%",padding:"10px 12px",border:"none",backgroundColor:"white",textAlign:"left",cursor:"pointer",fontSize:"14px",color:"#333",transition:"background-color 0.2s",display:"block",position:"relative"},onMouseOver:p=>{p.target.style.backgroundColor="#e3f2fd",p.target.style.color="#1976d2"},onMouseOut:p=>{p.target.style.backgroundColor="white",p.target.style.color="#333"},children:[h.name,a===h.id&&Ct.jsx("span",{style:{position:"absolute",right:"12px",color:"#10b981",fontWeight:"bold",fontSize:"16px"},children:""})]},h.id))}),Ct.jsx("div",{style:{borderTop:"1px solid #ddd",padding:"8px"},children:Ct.jsx("button",{onClick:r,style:{width:"100%",padding:"8px",border:"1px solid #ccc",backgroundColor:"#f0f0f0",color:"#666",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},onMouseOver:h=>h.target.style.backgroundColor="#e0e0e0",onMouseOut:h=>h.target.style.backgroundColor="#f0f0f0",children:"Cancel"})})]}):null};class Si{static instance;activeSounds=[];soundMap=new Map;isSyncingTransport=!1;static getInstance(){return Si.instance||(Si.instance=new Si),Si.instance}async playSingle(t,e){await Fd();const s=8e3,r=this.createSound(t);this.activeSounds.push(r),this.triggerSound(r,e),setTimeout(()=>{this.destroySound(r);const a=this.activeSounds.indexOf(r);a>-1&&this.activeSounds.splice(a,1)},s)}async playMultiple(t){await Fd(),this.stopAll();const e=t.map(({soundId:r,note:a})=>{const u=this.createSound(r);return this.activeSounds.push(u),{sound:u,note:a}}),s=h0()+.1;e.forEach(({sound:r,note:a})=>{this.triggerSound(r,a,s)})}async playMultipleWithVolume(t){await Fd();const e=new Set(t.map(r=>r.soundId)),s=[];for(const r of this.soundMap.keys())e.has(r)||s.push(r);s.forEach(r=>this.stopSound(r));for(const{soundId:r,note:a,volume:u}of t)if(this.soundMap.has(r)){const h=this.soundMap.get(r);this.setSoundGain(h,u)}else{const h=this.createSound(r);this.soundMap.set(r,h),this.activeSounds.push(h),this.setSoundGain(h,u,0);const p=h0()+.1;this.triggerSound(h,a,p)}}setSoundGain(t,e,s=.1){(Array.isArray(t)?t:[t]).forEach(a=>{if("volume"in a){const u=e<=0?-1/0:20*Math.log10(e);s>0?a.volume.rampTo(u,s):a.volume.value=u}})}async startSound(t,e="C4"){if(this.soundMap.has(t))return;await Fd();const s=this.createSound(t);this.soundMap.set(t,s),this.activeSounds.push(s),this.triggerSound(s,e)}stopSound(t){const e=this.soundMap.get(t);e&&(this.setSoundGain(e,0,.1),setTimeout(()=>{this.destroySound(e),this.soundMap.delete(t);const s=this.activeSounds.indexOf(e);s>-1&&this.activeSounds.splice(s,1)},150))}isSoundPlaying(t){return this.soundMap.has(t)}stopAll(){this.activeSounds.forEach(t=>{this.destroySound(t)}),this.activeSounds=[],this.soundMap.clear(),xo().stop(),xo().cancel(),pS().volume.rampTo(-1/0,.1),setTimeout(()=>{pS().volume.value=0},150)}createSound(t){const e=a8(t);return e?e.create():new _s().toDestination()}triggerSound(t,e,s){const r=Array.isArray(t)?t:[t],a=s||h0();r.forEach(u=>{u instanceof Na||u instanceof ds?xo().start():u instanceof Ra?u.autostart=!0:u instanceof Oa?u.start():this.isSynthInstrument(u)&&u.triggerAttackRelease(e,"8n",a)})}destroySound(t){(Array.isArray(t)?t:[t]).forEach(s=>{try{s instanceof Na||s instanceof ds||s instanceof Ra||s instanceof Oa?s.stop():this.isSynthInstrument(s)&&(s.triggerRelease(),"onsilence"in s&&(s.onsilence=()=>{})),s.dispose()}catch(r){console.warn("Error disposing sound:",r)}})}isSynthInstrument(t){return"triggerAttackRelease"in t}syncTransportState(t){if(!this.isSyncingTransport){this.isSyncingTransport=!0;try{const e=xo();e.bpm.value!==t.bpm&&(e.bpm.value=t.bpm),e.position!==t.position&&(e.position=t.position),t.isPlaying&&e.state!=="started"?e.start():!t.isPlaying&&e.state==="started"&&e.pause()}finally{this.isSyncingTransport=!1}}}getTransportState(t){const e=xo();return{bpm:e.bpm.value,isPlaying:e.state==="started",position:e.position.toString(),lastUpdated:Date.now(),masterId:t}}initializeTransport(t=120){const e=xo();e.bpm.value=t,e.loop=!1}startTransport(t){return this.isSyncingTransport||xo().start(),this.getTransportState(t)}stopTransport(t){return this.isSyncingTransport||xo().pause(),this.getTransportState(t)}setBPM(t,e){return this.isSyncingTransport||(xo().bpm.value=t),this.getTransportState(e)}}const c8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",u8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";let h8=gn.icon({iconUrl:c8,shadowUrl:u8,iconSize:[25,41],iconAnchor:[12,41]});gn.Marker.prototype.options.icon=h8;const f8=({connectedUsers:n,currentUserId:t,updateUserPosition:e,syncedShapes:s,addShape:r,updateShapeSound:a,updateShapeCoordinates:u,deleteShape:h,clearAllShapes:p,updateTransportState:m,initializeTransportIfNeeded:y,transportState:_,locationMode:b})=>{const S=Pt.useRef(null),x=Pt.useRef(null),[A]=Pt.useState([42.308606,-83.747036]),E=Pt.useRef(null),[R,z]=Pt.useState([]),O=Pt.useRef(new Map),$=Pt.useRef(new Map),[N,j]=Pt.useState({show:!1,position:{x:0,y:0},shapeId:null,soundId:null}),[F,G]=Pt.useState(!1),[q,W]=Pt.useState(!1),[Q,et]=Pt.useState(new Set);let{point:k}=ba;const X=Pt.useRef(new Map),Z=Pt.useRef(!1),[P,U]=Pt.useState(!1),K=Pt.useRef(""),D=Pt.useRef(new Map),V=Pt.useRef(new Map),I=Pt.useRef(new Set),Y=Pt.useRef(new Set),at=Pt.useRef(0),mt=500,gt=Pt.useRef(r),yt=Pt.useRef(h),kt=Pt.useRef(s);Pt.useEffect(()=>{gt.current=r,yt.current=h,kt.current=s},[r,h,s]);const[Mt,oe]=Pt.useState(!1),[Ne,Be]=Pt.useState(120),[sn,ni]=Pt.useState(!1),[_i,It]=Pt.useState(!1),Qt=(Et,Ot)=>{O.current.set(Et,Ot)},He=Et=>{O.current.delete(Et),z(Ot=>Ot.filter(Zt=>Zt!==Et))},Ee=Et=>{for(const[Ot,Zt]of O.current.entries())if(Zt.id===Et)return Ot;return null};Pt.useEffect(()=>{if(!S.current||x.current)return;const Et=gn.map(S.current,{maxZoom:23}).setView(A,13);gn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:23,maxNativeZoom:19}).addTo(Et),gn.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:23,maxNativeZoom:19}).addTo(Et);const Ot=new gn.FeatureGroup;Et.addLayer(Ot);const Zt=new gn.Control.Draw({draw:{polyline:!1,marker:!1},edit:{featureGroup:Ot}});return Et.addControl(Zt),gn.control.scale().addTo(Et),x.current=Et,E.current=Ot,Et.on(gn.Draw.Event.CREATED,function(Dt){const zt=Dt.layer,Nt=Dt.layerType;if(Nt==="marker")return;Ot.addLayer(zt);const Ft=gi(zt,Nt),Yt=No(Nt,Ft),te=gt.current(Nt,Ft,null);D.current.set(te,zt),V.current.set(zt,te),I.current.add(te),Y.current.add(te);const rn={id:gn.stamp(zt),type:Nt,coordinates:Ft,soundId:null};(Yt instanceof ba.Circle||Yt instanceof ba.Polygon)&&(Qt(Yt,rn),z(on=>[...on,Yt])),Yt!==null&&(zt.on("click",function(on){if(!x.current)return;const ts=Et.mouseEventToContainerPoint(on.originalEvent),Ut=kt.current.find(vi=>vi.id===te)?.soundId||null;j({show:!0,position:{x:ts.x,y:ts.y},shapeId:te,soundId:Ut})}),console.log("Shape created and synced:",te,Nt))}),Et.on(gn.Draw.Event.DELETED,function(Dt){var zt=Dt.layers;zt.eachLayer(function(Nt){const Ft=V.current.get(Nt);Ft&&(yt.current(Ft),D.current.delete(Ft),V.current.delete(Nt),I.current.delete(Ft),Y.current.delete(Ft),console.log("Shape deleted and synced:",Ft));const Yt=gn.stamp(Nt),te=Ee(Yt);te&&He(te)})}),Et.on("click",function(Dt){Dt.originalEvent.target.closest(".leaflet-interactive")||j(zt=>({...zt,show:!1}))}),()=>{x.current&&(x.current.remove(),x.current=null)}},[]);const ue=(Et,Ot,Zt)=>{const Dt=Ot?"#3b82f6":"#10b981",zt=Ot?"#fbbf24":"white",Nt=Ot&&Zt==="gps",Ft=`
            <div style="position: relative;">
                <div style="
                    width: 30px;
                    height: 30px;
                    border-radius: 50%;
                    background-color: ${Dt};
                    border: 3px solid ${zt};
                    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: bold;
                    color: white;
                    font-size: 14px;
                ">
                    ${Et.substring(0,1).toUpperCase()}
                </div>
                ${Nt?`
                <div style="
                    position: absolute;
                    top: -4px;
                    right: -4px;
                    width: 14px;
                    height: 14px;
                    background-color: #22c55e;
                    border-radius: 50%;
                    border: 2px solid white;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 8px;
                ">
                    
                </div>
                `:""}
                <div style="
                    position: absolute;
                    top: 35px;
                    left: 50%;
                    transform: translateX(-50%);
                    background-color: rgba(0, 0, 0, 0.75);
                    color: white;
                    padding: 2px 6px;
                    border-radius: 3px;
                    font-size: 11px;
                    white-space: nowrap;
                    pointer-events: none;
                ">
                    ${Et}${Ot?" (you)":""}${Nt?" ":""}
                </div>
            </div>
        `;return gn.divIcon({html:Ft,className:"user-marker-icon",iconSize:[30,30],iconAnchor:[15,15]})};Pt.useEffect(()=>{if(!x.current)return;const Et=x.current,Ot=X.current,Zt=new Set;n.forEach(Dt=>{Zt.add(Dt.id);const zt=Dt.id===t,Nt=Dt.name||"Anonymous",Ft=zt&&b==="manual";let Yt=Ot.get(Dt.id);if(Yt)zt&&Z.current||(Dt.position&&Yt.setLatLng([Dt.position.lat,Dt.position.lng]),Yt.setIcon(ue(Nt,zt,b)),zt&&(Ft&&!Yt.dragging?.enabled()?Yt.dragging?.enable():!Ft&&Yt.dragging?.enabled()&&Yt.dragging?.disable()));else{const te=Dt.position?[Dt.position.lat,Dt.position.lng]:[A[0],A[1]];Yt=gn.marker(te,{icon:ue(Nt,zt,b),draggable:Ft}).addTo(Et),zt&&(Yt.on("dragstart",()=>{Z.current=!0}),Yt.on("dragend",rn=>{Z.current=!1;const on=rn.target.getLatLng();e(on.lat,on.lng)}),!Dt.position&&b==="manual"&&e(te[0],te[1])),Ot.set(Dt.id,Yt)}});for(const[Dt,zt]of Ot.entries())Zt.has(Dt)||(Et.removeLayer(zt),Ot.delete(Dt))},[n,t,e,A,b]),Pt.useEffect(()=>{if(!x.current||!E.current)return;const Et=x.current,Ot=E.current,Zt=new Set;s.forEach(Dt=>{if(Zt.add(Dt.id),Y.current.has(Dt.id)&&(Y.current.delete(Dt.id),console.log("Local shape confirmed by Automerge:",Dt.id)),I.current.has(Dt.id))return;let zt=null;const Nt=Dt.coordinates;switch(Dt.type){case"circle":zt=gn.circle(Nt.center,{radius:Nt.radius});break;case"rectangle":zt=gn.rectangle(Nt);break;case"polygon":zt=gn.polygon(Nt);break;case"circlemarker":zt=gn.circleMarker(Nt.center,{radius:Nt.radius});break;default:console.log("Unknown shape type:",Dt.type);break}if(zt){Ot.addLayer(zt),D.current.set(Dt.id,zt),V.current.set(zt,Dt.id),I.current.add(Dt.id);const Ft=No(Dt.type,Nt);if(Ft instanceof ba.Circle||Ft instanceof ba.Polygon){const te={id:gn.stamp(zt),type:Dt.type,coordinates:Nt,soundId:Dt.soundId};Qt(Ft,te),z(rn=>[...rn,Ft])}const Yt=Dt.id;zt.on("click",function(te){if(!x.current)return;const rn=Et.mouseEventToContainerPoint(te.originalEvent),ts=kt.current.find(Sn=>Sn.id===Yt)?.soundId||null;j({show:!0,position:{x:rn.x,y:rn.y},shapeId:Yt,soundId:ts})}),console.log("Synced shape from another user:",Dt.id,Dt.type)}});for(const[Dt,zt]of D.current.entries())if(!Zt.has(Dt)&&!Y.current.has(Dt)){Ot.removeLayer(zt),D.current.delete(Dt),V.current.delete(zt),I.current.delete(Dt);const Nt=gn.stamp(zt),Ft=Ee(Nt);Ft&&He(Ft),console.log("Removed shape (deleted by another user):",Dt)}},[s]),Pt.useEffect(()=>{if(!P)return;const Et=Si.getInstance();if(y()){console.log("Became transport master - initializing transport"),oe(!0),Et.initializeTransport(120);const Zt=Et.getTransportState(t);m(Zt),Be(Zt.bpm)}else console.log("Syncing to existing transport"),oe(!1),_&&(Et.syncTransportState(_),Be(_.bpm))},[P,t,y,m]),Pt.useEffect(()=>{if(!P||!_||_.masterId===t)return;Si.getInstance().syncTransportState(_),Be(_.bpm)},[_,P,t]);const Le=()=>{const Et=n.find(Ft=>Ft.id===t);if(!Et?.position)return null;const{lat:Ot,lng:Zt}=Et.position,Dt=A[0],zt=A[1],Nt=yi(Ot,Zt,Dt,zt);return k(Nt.x,Nt.y)},un=(()=>{const Et=n.find(Ot=>Ot.id===t);return Et?.position?`${Et.position.lat},${Et.position.lng}`:null})();Pt.useEffect(()=>{const Et=Date.now();if(Et-at.current<mt){console.log("throttled...");return}if(at.current=Et,!P||!_?.isPlaying){K.current!==""&&(Si.getInstance().stopAll(),K.current="");return}if(R.length===0||!un)return;const Ot=Le();if(!Ot)return;let Zt=new ba.PlanarSet;R.forEach(te=>{Zt.add(te)});const Dt=Zt.hit(Ot),zt=300,Nt=dr({threshold:zt}),Ft=[];Dt.forEach(te=>{const rn=O.current.get(te);if(rn){let on;for(const[Ut,vi]of D.current.entries())if(gn.stamp(vi)===rn.id){on=Ut;break}const Sn=s.find(Ut=>Ut.id===on)?.soundId;Sn&&Ft.push({soundId:Sn,note:"C4",volume:1})}}),Nt&&Nt.length>0&&Nt.forEach(({shape:te,dist:rn})=>{if(Dt.includes(te))return;const on=O.current.get(te);if(on){let ts;for(const[vi,Va]of D.current.entries())if(gn.stamp(Va)===on.id){ts=vi;break}const Ut=s.find(vi=>vi.id===ts)?.soundId;if(Ut){const vi=Math.max(0,1-rn/zt);Ft.push({soundId:Ut,note:"C4",volume:vi})}}});const Yt=Ft.map(te=>te.soundId).sort().join(",");if(Yt!==K.current){K.current=Yt;const te=Si.getInstance();Ft.length>0?(console.log("Updating sounds with volumes:",Ft),te.playMultipleWithVolume(Ft)):(console.log("Stopping all sounds"),te.stopAll())}else Ft.length>0&&Si.getInstance().playMultipleWithVolume(Ft)},[P,_?.isPlaying,un,R,A,k,s]);const gi=function(Et,Ot){switch(Ot){case"marker":const Zt=Et.getLatLng();return[Zt.lat,Zt.lng];case"circle":const Dt=Et.getLatLng();return{center:[Dt.lat,Dt.lng],radius:Et.getRadius()};case"rectangle":case"polygon":return Et.getLatLngs()[0].map(Nt=>[Nt.lat,Nt.lng]);case"circlemarker":const zt=Et.getLatLng();return{center:[zt.lat,zt.lng],radius:Et.getRadius()};default:return null}},Oi=()=>{E.current&&(E.current.clearLayers(),z([]),O.current.clear(),$.current.clear(),D.current.clear(),V.current.clear(),I.current.clear(),Y.current.clear(),j(Et=>({...Et,show:!1})),p())},xn=()=>{let Et=null;if(x.current){const Yt=x.current.getCenter(),te=x.current.getZoom();Et={center:[Yt.lat,Yt.lng],zoom:te}}const Zt={shapes:kt.current.map(Yt=>({id:Yt.id,type:Yt.type,coordinates:Yt.coordinates,soundId:Yt.soundId})),mapView:Et},Dt=JSON.stringify(Zt,null,2),zt=new Blob([Dt],{type:"application/json"}),Nt=URL.createObjectURL(zt),Ft=document.createElement("a");Ft.href=Nt,Ft.download="arrangement.json",document.body.appendChild(Ft),Ft.click(),document.body.removeChild(Ft),URL.revokeObjectURL(Nt)},No=(Et,Ot)=>{const Zt=A[0],Dt=A[1];let{point:zt,circle:Nt,Polygon:Ft}=ba;switch(Et){case"marker":{const Yt=yi(Ot[0],Ot[1],Zt,Dt);return zt(Yt.x,Yt.y)}case"circle":{const Yt=yi(Ot.center[0],Ot.center[1],Zt,Dt);return Nt(zt(Yt.x,Yt.y),Ot.radius)}case"rectangle":{const Yt=[];Ot.forEach(rn=>{const on=yi(rn[0],rn[1],Zt,Dt);Yt.push(zt(on.x,on.y))});const te=new Ft;return te.addFace(Yt),te}case"polygon":{const Yt=[];Ot.forEach(rn=>{const on=yi(rn[0],rn[1],Zt,Dt);Yt.push(zt(on.x,on.y))});const te=new Ft;return te.addFace(Yt),te}case"circlemarker":{const Yt=yi(Ot.center[0],Ot.center[1],Zt,Dt);return Nt(zt(Yt.x,Yt.y),Ot.radius)}default:throw new Error(`Unknown shape type: ${Et}`)}},yi=(Et,Ot,Zt,Dt)=>{const Nt=(Et-Zt)*Math.PI/180,Yt=(Ot-Dt)*Math.PI/180*Math.cos(Zt*Math.PI/180)*6371e3,te=Nt*6371e3;return{x:Yt,y:te}},Ba=Et=>{if(!Et){console.log("no marker selected");return}if(R.length===0)return console.log("No shapes to check collisions"),[];let Ot=new ba.PlanarSet;R.forEach(Dt=>{Ot.add(Dt)});const Zt=Ot.hit(Et);return Zt.length>0?(console.log("get collisions output:",Zt),Zt):(console.log("no marker collisions"),null)},dr=({threshold:Et})=>{if(R.length===0)return console.log("No shapes to check collisions"),[];const Ot=Le();if(!Ot)return console.log("No user position available"),[];const Zt=Ba(Ot),Dt=R.filter(Nt=>!Zt?.includes(Nt)),zt=[];return Dt.forEach(Nt=>{const Ft=Ot.distanceTo(Nt)[0];Et==null?zt.push({shape:Nt,dist:Ft}):Ft<=Et&&zt.push({shape:Nt,dist:Ft})}),zt.sort((Nt,Ft)=>Nt.dist-Ft.dist),console.log(zt),zt},pu=Et=>{const Ot=Et.target.files?.[0];if(!Ot)return;const Zt=new FileReader;Zt.onload=Dt=>{try{const zt=JSON.parse(Dt.target?.result);if(zt&&Array.isArray(zt.shapes)){if(Oi(),zt.shapes.forEach(Nt=>{Nt.type!=="marker"&&gt.current(Nt.type,Nt.coordinates,Nt.soundId)}),zt.mapView&&x.current){const{center:Nt,zoom:Ft}=zt.mapView;Array.isArray(Nt)&&Nt.length===2&&typeof Nt[0]=="number"&&typeof Nt[1]=="number"&&typeof Ft=="number"&&x.current.setView([Nt[0],Nt[1]],Ft)}console.log("Imported",zt.shapes.length,"shapes to Automerge")}else Array.isArray(zt)&&(console.log("Importing old format (no sound data)"),Oi(),zt.forEach(Nt=>{Nt.type&&Nt.coordinates&&gt.current(Nt.type,Nt.coordinates,null)}))}catch(zt){console.log(zt),alert("Invalid JSON file")}},Zt.readAsText(Ot),Et.target.value=""},Ha=Et=>{const Ot=N.shapeId;Ot&&(a(Ot,Et),console.log(`Synced sound "${Et}" to shape ${Ot}`)),j(Zt=>({...Zt,soundId:Et}))},Fl=()=>{j({show:!1,position:{x:0,y:0},shapeId:null,soundId:null})},mu=()=>{U(!0)},Zs=()=>{U(!1),K.current="",Si.getInstance().stopAll()},Un=()=>{G(!F)},Ji=async Et=>{const Ot=Si.getInstance();Q.has(Et)?(console.log(`Stopping debug instrument: ${Et}`),Ot.stopSound(Et),et(Zt=>{const Dt=new Set(Zt);return Dt.delete(Et),Dt})):(console.log(`Starting debug instrument: ${Et}`),await Ot.startSound(Et,"C4"),et(Zt=>new Set(Zt).add(Et)))},ii=()=>{G(!1)},Yr=()=>{ni(!1)},_u=()=>{It(!1)},gu=()=>{const Ot=Si.getInstance().startTransport(t);m(Ot)},Xr=()=>{const Ot=Si.getInstance().stopTransport(t);m(Ot)},Qr=Et=>{const Zt=Si.getInstance().setBPM(Et,t);m(Zt),Be(Et)};return Ct.jsxs("div",{style:{height:"100vh",width:"100vw",position:"relative"},children:[Ct.jsx("div",{ref:S,style:{height:"100%",width:"100%"}}),Ct.jsx("button",{onClick:()=>It(!_i),style:{position:"absolute",top:"600px",left:"10px",backgroundColor:"#8b5cf6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:_i?" Hide Zones":" Zone Management"}),_i&&Ct.jsxs(Ct.Fragment,{children:[Ct.jsx("div",{onClick:_u,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backgroundColor:"transparent"}}),Ct.jsxs("div",{style:{position:"absolute",top:"540px",left:"10px",backgroundColor:"rgba(255, 255, 255, 0.95)",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",zIndex:1001,minWidth:"200px"},children:[Ct.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"12px",color:"#374151"},children:"Zone Management"}),Ct.jsx("button",{onClick:xn,style:{width:"100%",backgroundColor:"#3b82f6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",marginBottom:"8px",fontWeight:"500"},children:" Export Arrangement"}),Ct.jsxs("label",{htmlFor:"importArrangement",style:{display:"block",width:"100%",backgroundColor:"#10b981",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",marginBottom:"8px",textAlign:"center",fontWeight:"500",boxSizing:"border-box"},children:[" Import Arrangement",Ct.jsx("input",{id:"importArrangement",type:"file",accept:"application/json",style:{display:"none"},onChange:pu})]}),Ct.jsx("button",{onClick:Oi,style:{width:"100%",backgroundColor:"#ef4444",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",fontWeight:"500"},children:" Clear Arrangement"})]})]}),Ct.jsx("button",{onClick:()=>W(!q),style:{position:"absolute",bottom:"10px",right:"10px",backgroundColor:q?"#6b7280":"#8b5cf6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:q?"hide experimental":"experimental"}),q&&Ct.jsxs(Ct.Fragment,{children:[Ct.jsx("button",{onClick:Un,style:{position:"absolute",bottom:"100px",right:"10px",backgroundColor:"#3b82f6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"sound bank"}),Ct.jsx("button",{onClick:()=>dr({threshold:100}),style:{position:"absolute",bottom:"55px",right:"10px",backgroundColor:"#3b82f6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"get nearest (debug)"}),Ct.jsx("button",{onClick:Zs,style:{position:"absolute",bottom:"145px",right:"10px",backgroundColor:"#f63b3bff",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"stop all audio"})]}),F&&Ct.jsxs(Ct.Fragment,{children:[Ct.jsx("div",{onClick:ii,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backgroundColor:"transparent"}}),Ct.jsxs("div",{style:{position:"absolute",bottom:"145px",right:"10px",backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 4px 8px rgba(0,0,0,0.2)",zIndex:1001,maxHeight:"300px",overflowY:"auto",minWidth:"200px"},children:[Ct.jsx("div",{style:{padding:"8px",borderBottom:"1px solid #e5e5e5",fontWeight:"bold",color:"#111"},children:"Select sounds"}),mv.map(Et=>{const Ot=Q.has(Et.id);return Ct.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #f0f0f0",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px"},children:[Ct.jsxs("div",{style:{flex:1},children:[Ct.jsx("div",{style:{fontWeight:"500",color:"#111"},children:Et.name}),Ct.jsxs("div",{style:{fontSize:"12px",color:"#1f34b8ff"},children:["ID: ",Et.id]})]}),Ct.jsx("button",{onClick:()=>Ji(Et.id),style:{padding:"6px 12px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"600",backgroundColor:Ot?"#ef4444":"#10b981",color:"white",transition:"all 0.2s",minWidth:"60px"},onMouseEnter:Zt=>{Zt.currentTarget.style.backgroundColor=Ot?"#dc2626":"#059669"},onMouseLeave:Zt=>{Zt.currentTarget.style.backgroundColor=Ot?"#ef4444":"#10b981"},children:Ot?" Stop":" Play"})]},Et.id)})]})]}),Ct.jsx("button",{onClick:P?()=>ni(!sn):mu,style:{position:"absolute",top:"325px",left:"10px",backgroundColor:P?"#3b82f6":"#10b981",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:P?sn?" Hide Transport":" Transport Controls":"Start Audio"}),Ct.jsx("button",{onClick:Zs,disabled:!P,style:{position:"absolute",top:"360px",left:"10px",backgroundColor:P?"#f63b3bff":"#6b7280",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:P?"pointer":"not-allowed",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",opacity:P?1:.6},children:"Stop Audio"}),P&&sn&&Ct.jsxs(Ct.Fragment,{children:[Ct.jsx("div",{onClick:Yr,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backgroundColor:"transparent"}}),Ct.jsxs("div",{style:{position:"absolute",top:"400px",left:"10px",backgroundColor:"rgba(255, 255, 255, 0.95)",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",zIndex:1001,minWidth:"200px"},children:[Ct.jsxs("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"8px",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[" Transport Controls",_?.masterId===t&&Ct.jsx("span",{style:{fontSize:"10px",backgroundColor:"#3b82f6",color:"white",padding:"2px 6px",borderRadius:"3px",fontWeight:"normal"},children:"Master"})]}),Ct.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[Ct.jsx("button",{onClick:gu,disabled:_?.isPlaying,style:{flex:1,backgroundColor:_?.isPlaying?"#6b7280":"#10b981",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:_?.isPlaying?"not-allowed":"pointer",opacity:_?.isPlaying?.6:1,fontWeight:"600"},children:" Play"}),Ct.jsx("button",{onClick:Xr,disabled:!_?.isPlaying,style:{flex:1,backgroundColor:_?.isPlaying?"#ef4444":"#6b7280",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:_?.isPlaying?"pointer":"not-allowed",opacity:_?.isPlaying?1:.6,fontWeight:"600"},children:" Pause"})]}),Ct.jsxs("div",{style:{marginBottom:"4px"},children:[Ct.jsxs("label",{style:{fontSize:"11px",color:"#6b7280",display:"block",marginBottom:"4px",fontWeight:"500"},children:["Tempo: ",Ne," BPM"]}),Ct.jsx("input",{type:"range",min:"60",max:"200",value:Ne,onChange:Et=>Qr(Number(Et.target.value)),style:{width:"100%",cursor:"pointer"}}),Ct.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"9px",color:"#9ca3af",marginTop:"2px"},children:[Ct.jsx("span",{children:"60"}),Ct.jsx("span",{children:"200"})]})]}),_&&Ct.jsxs("div",{style:{fontSize:"10px",color:"#9ca3af",marginTop:"8px",paddingTop:"8px",borderTop:"1px solid #e5e7eb"},children:["Position: ",_.position]})]})]}),Ct.jsx(l8,{show:N.show,shapeId:N.shapeId,position:N.position,onSoundSelect:Ha,onClose:Fl,selectedsoundId:N.soundId})]})},xm=Symbol.for("_am_meta"),Zh=Symbol.for("_am_trace"),Wh=Symbol.for("_am_objectId"),_v=Symbol.for("_am_isProxy"),gv=Symbol.for("_am_clearCache"),d8=Symbol.for("_am_uint"),p8=Symbol.for("_am_int"),m8=Symbol.for("_am_f64"),FT=Symbol.for("_am_counter"),YT=Symbol.for("_am_immutableString");class J0{constructor(t){this.value=t||0,Reflect.defineProperty(this,FT,{value:!0})}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}increment(t){throw new Error("Counters should not be incremented outside of a change callback")}decrement(t){throw new Error("Counters should not be decremented outside of a change callback")}}class _8 extends J0{constructor(t,e,s,r,a){super(t),this.context=e,this.path=s,this.objectId=r,this.key=a}increment(t){return t=typeof t=="number"?t:1,this.context.increment(this.objectId,this.key,t),this.value+=t,this.value}decrement(t){return this.increment(typeof t=="number"?-t:-1)}}function g8(n,t,e,s,r){return new _8(n,t,e,s,r)}var XT;class QT{constructor(t){this[XT]=!0,this.val=t}toString(){return this.val}toJSON(){return this.val}}XT=YT;const y8=BigInt("9223372036854775807");function Co(n){if(typeof n=="string"&&/^[0-9]+$/.test(n)&&(n=parseInt(n,10)),typeof n!="number")return n;if(n<0||isNaN(n)||n===1/0||n===-1/0)throw new RangeError("A list index must be positive, but you passed "+n);return n}function fs(n,t){const{context:e,objectId:s,path:r}=n,a=e.getWithType(s,t);if(a===null)return;const u=a[0],h=a[1];switch(u){case void 0:return;case"map":return _f(e,h,[...r,t]);case"list":return Tm(e,h,[...r,t]);case"text":return e.text(h);case"str":return new QT(h);case"uint":return h;case"int":return h;case"f64":return h;case"boolean":return h;case"null":return null;case"bytes":return h;case"timestamp":return h;case"counter":return g8(h,e,r,s,t);default:throw RangeError(`datatype ${u} unimplemented`)}}function zp(n,t,e){const s=typeof n;switch(s){case"object":if(n==null)return[null,"null"];if(n[d8])return[n.value,"uint"];if(n[p8])return[n.value,"int"];if(n[m8])return[n.value,"f64"];if(n[FT])return[n.value,"counter"];if(n instanceof Date)return[n.getTime(),"timestamp"];if($T(n))return[n.toString(),"str"];if(n instanceof Uint8Array)return[n,"bytes"];if(n instanceof Array)return[n,"list"];if(Object.prototype.toString.call(n)==="[object Object]")return[n,"map"];throw Sm(n,e)?new RangeError("Cannot create a reference to an existing document object"):new RangeError(`Cannot assign unknown object: ${n}`);case"boolean":return[n,"boolean"];case"bigint":return n>y8?[n,"uint"]:[n,"int"];case"number":return Number.isInteger(n)?[n,"int"]:[n,"f64"];case"string":return[n,"text"];case"undefined":throw new RangeError([`Cannot assign undefined value at ${mS(t)}, `,"because `undefined` is not a valid JSON data type. ","You might consider setting the property's value to `null`, ","or using `delete` to remove it altogether."].join(""));default:throw new RangeError([`Cannot assign ${s} value at ${mS(t)}. `,"All JSON primitive datatypes (object, array, string, number, boolean, null) ",`are supported in an Automerge document; ${s} values are not. `].join(""))}}function Sm(n,t){var e,s;return n instanceof Date?!1:!!(n&&((s=(e=n[xm])===null||e===void 0?void 0:e.handle)===null||s===void 0?void 0:s.__wbg_ptr)===t.__wbg_ptr)}const v8={get(n,t){const{context:e,objectId:s,cache:r}=n;return t===Symbol.toStringTag?n[Symbol.toStringTag]:t===Wh?s:t===_v?!0:t===Zh?n.trace:t===xm?{handle:e}:(r[t]||(r[t]=fs(n,t)),r[t])},set(n,t,e){const{context:s,objectId:r,path:a}=n;if(n.cache={},Sm(e,s))throw new RangeError("Cannot create a reference to an existing document object");if(t===Zh)return n.trace=e,!0;if(t===gv)return!0;const[u,h]=zp(e,[...a,t],s);switch(h){case"list":{const p=s.putObject(r,t,[]),m=Tm(s,p,[...a,t]);for(let y=0;y<u.length;y++)m[y]=u[y];break}case"text":{s.putObject(r,t,u);break}case"map":{const p=s.putObject(r,t,{}),m=_f(s,p,[...a,t]);for(const y in u)m[y]=u[y];break}default:s.put(r,t,u,h)}return!0},deleteProperty(n,t){const{context:e,objectId:s}=n;return n.cache={},e.delete(s,t),!0},has(n,t){return this.get(n,t)!==void 0},getOwnPropertyDescriptor(n,t){const e=this.get(n,t);if(typeof e<"u")return{configurable:!0,enumerable:!0,value:e}},ownKeys(n){const{context:t,objectId:e}=n,s=t.keys(e);return[...new Set(s)]}},b8={get(n,t){const{context:e,objectId:s}=n;return t=Co(t),t===Symbol.hasInstance?r=>Array.isArray(r):t===Symbol.toStringTag?n[Symbol.toStringTag]:t===Wh?s:t===_v?!0:t===Zh?n.trace:t===xm?{handle:e}:t==="length"?e.length(s):typeof t=="number"?fs(n,t):x8(n)[t]},set(n,t,e){const{context:s,objectId:r,path:a}=n;if(t=Co(t),Sm(e,s))throw new RangeError("Cannot create a reference to an existing document object");if(t===gv)return!0;if(t===Zh)return n.trace=e,!0;if(typeof t=="string")throw new RangeError("list index must be a number");const[u,h]=zp(e,[...a,t],s);switch(h){case"list":{let p;t>=s.length(r)?p=s.insertObject(r,t,[]):p=s.putObject(r,t,[]),Tm(s,p,[...a,t]).splice(0,0,...u);break}case"text":{t>=s.length(r)?s.insertObject(r,t,u):s.putObject(r,t,u);break}case"map":{let p;t>=s.length(r)?p=s.insertObject(r,t,{}):p=s.putObject(r,t,{});const m=_f(s,p,[...a,t]);for(const y in u)m[y]=u[y];break}default:t>=s.length(r)?s.insert(r,t,u,h):s.put(r,t,u,h)}return!0},deleteProperty(n,t){const{context:e,objectId:s}=n;t=Co(t);const r=e.get(s,t);if(r!=null&&r[0]=="counter")throw new TypeError("Unsupported operation: deleting a counter from a list");return e.delete(s,t),!0},has(n,t){const{context:e,objectId:s}=n;return t=Co(t),typeof t=="number"?t<e.length(s):t==="length"},getOwnPropertyDescriptor(n,t){const{context:e,objectId:s}=n;return t==="length"?{writable:!0,value:e.length(s)}:t===Wh?{configurable:!1,enumerable:!1,value:s}:(t=Co(t),{configurable:!0,enumerable:!0,value:fs(n,t)})},getPrototypeOf(n){return Object.getPrototypeOf(n)},ownKeys(){const n=[];return n.push("length"),n}};function _f(n,t,e){const s={context:n,objectId:t,path:e||[],cache:{}},r={};return Object.assign(r,s),new Proxy(r,v8)}function Tm(n,t,e){const s={context:n,objectId:t,path:e||[],cache:{}},r=[];return Object.assign(r,s),new Proxy(r,b8)}function w8(n){return _f(n,"_root",[])}function x8(n){const{context:t,objectId:e,path:s}=n;return{at(a){return fs(n,a)},deleteAt(a,u){return typeof u=="number"?t.splice(e,a,u):t.delete(e,a),this},fill(a,u,h){const[p,m]=zp(a,[...s,u],t),y=t.length(e);u=Co(u||0),h=Co(h||y);for(let _=u;_<Math.min(h,y);_++)m==="list"||m==="map"||m==="text"?t.putObject(e,_,p):t.put(e,_,p,m);return this},indexOf(a,u=0){const h=t.length(e);for(let p=u;p<h;p++){const m=t.getWithType(e,p);if(!m)continue;const[y,_]=m;if(!["map","list","text"].includes(y)){if(_===a)return p;continue}if(y==="text"&&typeof a=="string"&&a===fs(n,p)||a[Wh]===_)return p}return-1},insertAt(a,...u){return this.splice(a,0,...u),this},pop(){const a=t.length(e);if(a==0)return;const u=fs(n,a-1);return t.delete(e,a-1),u},push(...a){const u=t.length(e);return this.splice(u,0,...a),t.length(e)},shift(){if(t.length(e)==0)return;const a=fs(n,0);return t.delete(e,0),a},splice(a,u,...h){a=Co(a),typeof u!="number"&&(u=t.length(e)-a),u=Co(u);for(const y of h)if(Sm(y,t))throw new RangeError("Cannot create a reference to an existing document object");const p=[];for(let y=0;y<u;y++){const _=fs(n,a);_!==void 0&&p.push(_),t.delete(e,a)}const m=h.map((y,_)=>{try{return zp(y,[...s],t)}catch(b){throw b instanceof RangeError?new RangeError(`${b.message} (at index ${_} in the input)`):b}});for(const[y,_]of m){switch(_){case"list":{const b=t.insertObject(e,a,[]);Tm(t,b,[...s,a]).splice(0,0,...y);break}case"text":{t.insertObject(e,a,y);break}case"map":{const b=t.insertObject(e,a,{}),S=_f(t,b,[...s,a]);for(const x in y)S[x]=y[x];break}default:t.insert(e,a,y,_)}a+=1}return p},unshift(...a){return this.splice(0,0,...a),t.length(e)},entries(){let a=0;return{next:()=>{const h=fs(n,a);return h===void 0?{value:void 0,done:!0}:{value:[a++,h],done:!1}},[Symbol.iterator](){return this}}},keys(){let a=0;const u=t.length(e);return{next:()=>a<u?{value:a++,done:!1}:{value:void 0,done:!0},[Symbol.iterator](){return this}}},values(){let a=0;return{next:()=>{const h=fs(n,a++);return h===void 0?{value:void 0,done:!0}:{value:h,done:!1}},[Symbol.iterator](){return this}}},toArray(){const a=[];let u;do u=fs(n,a.length),u!==void 0&&a.push(u);while(u!==void 0);return a},map(a){return this.toArray().map(a)},toString(){return this.toArray().toString()},toLocaleString(){return this.toArray().toLocaleString()},forEach(a){return this.toArray().forEach(a)},concat(a){return this.toArray().concat(a)},every(a){return this.toArray().every(a)},filter(a){return this.toArray().filter(a)},find(a){let u=0;for(const h of this){if(a(h,u))return h;u+=1}},findIndex(a){let u=0;for(const h of this){if(a(h,u))return u;u+=1}return-1},includes(a){return this.find(u=>u===a)!==void 0},join(a){return this.toArray().join(a)},reduce(a,u){return this.toArray().reduce(a,u)},reduceRight(a,u){return this.toArray().reduceRight(a,u)},lastIndexOf(a,u=1/0){return this.toArray().lastIndexOf(a,u)},slice(a,u){return this.toArray().slice(a,u)},some(a){let u=0;for(const h of this){if(a(h,u))return!0;u+=1}return!1},[Symbol.iterator]:function*(){let a=0,u=fs(n,a);for(;u!==void 0;)yield u,a+=1,u=fs(n,a)}}}function mS(n){const t=n.map(e=>{if(typeof e=="number")return e.toString();if(typeof e=="string")return e.replace(/~/g,"~0").replace(/\//g,"~1")});return n.length===0?"":"/"+t.join("/")}function $T(n){return typeof n=="object"&&n!==null&&Object.prototype.hasOwnProperty.call(n,YT)}typeof FinalizationRegistry>"u"||new FinalizationRegistry(n=>KT.__wbg_automerge_free(n>>>0,1));typeof FinalizationRegistry>"u"||new FinalizationRegistry(n=>KT.__wbg_syncstate_free(n>>>0,1));let S8=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});S8.decode();const f0=new TextEncoder;"encodeInto"in f0||(f0.encodeInto=function(n,t){const e=f0.encode(n);return t.set(e),{read:n.length,written:e.length}});let KT,T8=[];function A8(n){for(const t in n)Mi[t]=n[t];for(const t of T8)t()}const Mi={create(n){throw new RangeError("Automerge.use() not called")},load(n,t){throw new RangeError("Automerge.use() not called (load)")},encodeChange(n){throw new RangeError("Automerge.use() not called (encodeChange)")},decodeChange(n){throw new RangeError("Automerge.use() not called (decodeChange)")},initSyncState(){throw new RangeError("Automerge.use() not called (initSyncState)")},encodeSyncMessage(n){throw new RangeError("Automerge.use() not called (encodeSyncMessage)")},decodeSyncMessage(n){throw new RangeError("Automerge.use() not called (decodeSyncMessage)")},encodeSyncState(n){throw new RangeError("Automerge.use() not called (encodeSyncState)")},decodeSyncState(n){throw new RangeError("Automerge.use() not called (decodeSyncState)")},exportSyncState(n){throw new RangeError("Automerge.use() not called (exportSyncState)")},importSyncState(n){throw new RangeError("Automerge.use() not called (importSyncState)")},readBundle(n){throw new RangeError("Automerge.use() not called (readBundle)")},wasmReleaseInfo(){throw new RangeError("Automerge.use() not called (wasmReleaseInfo)")}},E8="b8dfc4845c50633f9d850a5d4e2a4219d518f8ad";function fn(n,t=!0){if(typeof n!="object")throw new RangeError("must be the document root");const e=Reflect.get(n,xm);if(e===void 0||e==null||t&&eA(n)!=="_root")throw new RangeError("must be the document root");return e}function JT(n){Reflect.set(n,gv,!0)}function tA(n){return Reflect.get(n,Zh)}function eA(n){return typeof n!="object"||n===null?null:Reflect.get(n,Wh)}function du(n){return!!Reflect.get(n,_v)}var C8=function(n,t){var e={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(e[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(e[s[r]]=n[s[r]]);return e};function yv(n){return typeof n=="object"?n:{actor:n}}function L8(n,t,e){if(typeof e=="string"){if(/^-?[0-9]+@[0-9a-zA-Z]+$|^[se]$/.test(e))return n.handle.getCursorPosition(t,e);throw new RangeError("index must be a number or cursor")}else return e}function Us(n){const t=yv(n),e=!!t.freeze,s=t.patchCallback,r=t.actor,a=Mi.create({actor:r});return a.enableFreeze(!!t.freeze),rA(a),a.materialize("/",void 0,{handle:a,heads:void 0,freeze:e,patchCallback:s})}function M8(n,t){const e=fn(n),s=e.handle;return e.handle.materialize("/",t,Object.assign(Object.assign({},e),{handle:s,heads:t}))}function Up(n,t){const e=fn(n),s=e.heads,r=yv(t),a=e.handle.fork(r.actor,s);a.updateDiffCursor();const{heads:u}=e,h=C8(e,["heads"]);return h.patchCallback=r.patchCallback,a.applyPatches(n,Object.assign(Object.assign({},h),{handle:a}))}function _S(n,t){return Fh(Us(t),"from",{},e=>Object.assign(e,n)).newDoc}function k8(n,t,e){if(typeof t=="function")return Fh(n,"change",{},t).newDoc;if(typeof e=="function")return typeof t=="string"&&(t={message:t}),Fh(n,"change",t,e).newDoc;throw RangeError("Invalid args for change")}function O8(n,t,e,s){if(typeof e=="function")return Fh(n,"changeAt",{},e,t);if(typeof s=="function")return typeof e=="string"&&(e={message:e}),Fh(n,"changeAt",e,s,t);throw RangeError("Invalid args for changeAt")}function gf(n,t,e,s){if(e==null)return n;const r=fn(n),a=Object.assign(Object.assign({},r),{heads:void 0}),{value:u,patches:h}=r.handle.applyAndReturnPatches(n,a);if(h.length>0){s?.(h,{before:n,after:u,source:t});const p=fn(u);p.mostRecentPatch={before:fn(n).heads,after:p.handle.getHeads(),patches:h}}return r.heads=e,u}function Fh(n,t,e,s,r){if(typeof s!="function")throw new RangeError("invalid change function");const a=fn(n);if(n===void 0||a===void 0)throw new RangeError("must be the document root");if(a.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(du(n))throw new RangeError("Calls to Automerge.change cannot be nested");let u=a.handle.getHeads();r&&R8(r,u)&&(r=void 0),r&&(a.handle.isolate(r),u=r),"time"in e||(e.time=Math.floor(Date.now()/1e3));try{a.heads=u;const h=w8(a.handle);if(s(h),a.handle.pendingOps()===0)return a.heads=void 0,r&&a.handle.integrate(),{newDoc:n,newHeads:null};{const p=a.handle.commit(e.message,e.time);return a.handle.integrate(),{newDoc:gf(n,t,u,e.patchCallback||a.patchCallback),newHeads:p!=null?[p]:null}}}catch(h){throw a.heads=void 0,a.handle.rollback(),h}}function gS(n,t){t===void 0&&(t={}),typeof t=="string"&&(t={message:t}),"time"in t||(t.time=Math.floor(Date.now()/1e3));const e=fn(n);if(e.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(du(n))throw new RangeError("Calls to Automerge.change cannot be nested");const s=e.handle.getHeads();return e.handle.emptyChange(t.message,t.time),gf(n,"emptyChange",s)}function D8(n,t){const e=yv(t);if(e.patchCallback)return vv(Us(e),n);const s=e.actor,r=e.patchCallback,a=e.unchecked||!1,u=e.allowMissingChanges||!1,h=e.convertImmutableStringsToText||!1,p=Mi.load(n,{actor:s,unchecked:a,allowMissingDeps:u,convertImmutableStringsToText:h});return p.enableFreeze(!!e.freeze),rA(p),p.materialize("/",void 0,{handle:p,heads:void 0,patchCallback:r})}function vv(n,t,e){e||(e={});const s=fn(n);if(s.heads)throw new RangeError("Attempting to change an out of date document - set at: "+tA(n));if(du(n))throw new RangeError("Calls to Automerge.change cannot be nested");const r=s.handle.getHeads();return s.handle.loadIncremental(t),gf(n,"loadIncremental",r,e.patchCallback||s.patchCallback)}function nA(n){return fn(n).handle.save()}function yS(n,t){const e=fn(n);if(e.heads)throw new RangeError("Attempting to change an out of date document - set at: "+tA(n));const s=e.handle.getHeads(),r=fn(t),a=e.handle.getChangesAdded(r.handle);return e.handle.applyChanges(a),gf(n,"merge",s,e.patchCallback)}function d0(n,t,e){vS(t,"before heads"),vS(e,"after heads");const s=fn(n);return s.mostRecentPatch&&ty(s.mostRecentPatch.before,t)&&ty(s.mostRecentPatch.after,e)?s.mostRecentPatch.patches:s.handle.diff(t,e)}function R8(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function vS(n,t){if(!Array.isArray(n))throw new Error(`invalid ${t}: must be an array`)}function ty(n,t){if(!bS(n)||!bS(t))return n===t;const e=Object.keys(n).sort(),s=Object.keys(t).sort();if(e.length!==s.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==s[r]||!ty(n[e[r]],t[s[r]]))return!1;return!0}function iA(n){const t=Mi.importSyncState(n),e=Mi.encodeSyncState(t);return t.free(),e}function sA(n){const t=Mi.decodeSyncState(n),e=Mi.exportSyncState(t);return t.free(),e}function I8(n,t){const e=fn(n),s=Mi.importSyncState(t),r=e.handle.generateSyncMessage(s);return[Mi.exportSyncState(s),r]}function N8(n,t,e,s){const r=Mi.importSyncState(t);s||(s={});const a=fn(n);if(a.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(du(n))throw new RangeError("Calls to Automerge.change cannot be nested");const u=a.handle.getHeads();a.handle.receiveSyncMessage(r,e);const h=Mi.exportSyncState(r);return[gf(n,"receiveSyncMessage",u,s.patchCallback||a.patchCallback),h,null]}function P8(){return Mi.exportSyncState(Mi.initSyncState())}function z8(n){return Mi.decodeSyncMessage(n)}function Ur(n){const t=fn(n);return t.heads||t.handle.getHeads()}function bS(n){return typeof n=="object"&&n!==null}function U8(n,t){return fn(n).handle.saveSince(t)}function rA(n){n.registerDatatype("counter",t=>new J0(t),t=>{if(t instanceof J0)return t.value}),n.registerDatatype("str",t=>new QT(t),t=>{if($T(t))return t.val})}function B8(n){return fn(n).handle.topoHistoryTraversal()}function H8(n,t){return fn(n).handle.getDecodedChangeByHash(t)}function bv(n){var t,e,s,r,a,u;const p=fn(n).handle.stats(),m=V8();return Object.assign(Object.assign({},p),{cargoPackageName:(e=(t=m.wasm)===null||t===void 0?void 0:t.cargoPackageName)!==null&&e!==void 0?e:"unknown",cargoPackageVersion:(r=(s=m.wasm)===null||s===void 0?void 0:s.cargoPackageVersion)!==null&&r!==void 0?r:"unknown",rustcVersion:(u=(a=m.wasm)===null||a===void 0?void 0:a.rustcVersion)!==null&&u!==void 0?u:"unknown"})}function V8(){let n=null;try{n=Mi.wasmReleaseInfo()}catch{}return{js:{gitHead:E8},wasm:n}}function oA(n,t,e,s,r){const a=Am(n,t,"splice");if(!du(n))throw new RangeError("object cannot be modified outside of a change block");const u=fn(n,!1);JT(n),e=L8(u,a,e);try{return u.handle.splice(a,e,s,r)}catch(h){throw new RangeError(`Cannot splice: ${h}`)}}function j8(n,t,e){const s=Am(n,t,"updateText");if(!du(n))throw new RangeError("object cannot be modified outside of a change block");const r=fn(n,!1);JT(n);try{return r.handle.updateText(s,e)}catch(a){throw new RangeError(`Cannot updateText: ${a}`)}}function wS(n,t,e,s){const r=Am(n,t,"getCursor"),a=fn(n,!1);try{return a.handle.getCursor(r,e,a.heads,s)}catch(u){throw new RangeError(`Cannot getCursor: ${u}`)}}function xS(n,t,e){const s=Am(n,t,"getCursorPosition"),r=fn(n,!1);try{return r.handle.getCursorPosition(s,e,r.heads)}catch(a){throw new RangeError(`Cannot getCursorPosition: ${a}`)}}function Am(n,t,e){t=t.slice();const s=eA(n);if(!s)throw new RangeError(`invalid object for ${e}`);return t.unshift(s),t.join("/")}var Xd={exports:{}},p0,SS;function q8(){if(SS)return p0;SS=1;var n=1e3,t=n*60,e=t*60,s=e*24,r=s*7,a=s*365.25;p0=function(y,_){_=_||{};var b=typeof y;if(b==="string"&&y.length>0)return u(y);if(b==="number"&&isFinite(y))return _.long?p(y):h(y);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(y))};function u(y){if(y=String(y),!(y.length>100)){var _=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(y);if(_){var b=parseFloat(_[1]),S=(_[2]||"ms").toLowerCase();switch(S){case"years":case"year":case"yrs":case"yr":case"y":return b*a;case"weeks":case"week":case"w":return b*r;case"days":case"day":case"d":return b*s;case"hours":case"hour":case"hrs":case"hr":case"h":return b*e;case"minutes":case"minute":case"mins":case"min":case"m":return b*t;case"seconds":case"second":case"secs":case"sec":case"s":return b*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function h(y){var _=Math.abs(y);return _>=s?Math.round(y/s)+"d":_>=e?Math.round(y/e)+"h":_>=t?Math.round(y/t)+"m":_>=n?Math.round(y/n)+"s":y+"ms"}function p(y){var _=Math.abs(y);return _>=s?m(y,_,s,"day"):_>=e?m(y,_,e,"hour"):_>=t?m(y,_,t,"minute"):_>=n?m(y,_,n,"second"):y+" ms"}function m(y,_,b,S){var x=_>=b*1.5;return Math.round(y/b)+" "+S+(x?"s":"")}return p0}var m0,TS;function G8(){if(TS)return m0;TS=1;function n(t){s.debug=s,s.default=s,s.coerce=m,s.disable=h,s.enable=a,s.enabled=p,s.humanize=q8(),s.destroy=y,Object.keys(t).forEach(_=>{s[_]=t[_]}),s.names=[],s.skips=[],s.formatters={};function e(_){let b=0;for(let S=0;S<_.length;S++)b=(b<<5)-b+_.charCodeAt(S),b|=0;return s.colors[Math.abs(b)%s.colors.length]}s.selectColor=e;function s(_){let b,S=null,x,A;function E(...R){if(!E.enabled)return;const z=E,O=Number(new Date),$=O-(b||O);z.diff=$,z.prev=b,z.curr=O,b=O,R[0]=s.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let N=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(F,G)=>{if(F==="%%")return"%";N++;const q=s.formatters[G];if(typeof q=="function"){const W=R[N];F=q.call(z,W),R.splice(N,1),N--}return F}),s.formatArgs.call(z,R),(z.log||s.log).apply(z,R)}return E.namespace=_,E.useColors=s.useColors(),E.color=s.selectColor(_),E.extend=r,E.destroy=s.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>S!==null?S:(x!==s.namespaces&&(x=s.namespaces,A=s.enabled(_)),A),set:R=>{S=R}}),typeof s.init=="function"&&s.init(E),E}function r(_,b){const S=s(this.namespace+(typeof b>"u"?":":b)+_);return S.log=this.log,S}function a(_){s.save(_),s.namespaces=_,s.names=[],s.skips=[];const b=(typeof _=="string"?_:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const S of b)S[0]==="-"?s.skips.push(S.slice(1)):s.names.push(S)}function u(_,b){let S=0,x=0,A=-1,E=0;for(;S<_.length;)if(x<b.length&&(b[x]===_[S]||b[x]==="*"))b[x]==="*"?(A=x,E=S,x++):(S++,x++);else if(A!==-1)x=A+1,E++,S=E;else return!1;for(;x<b.length&&b[x]==="*";)x++;return x===b.length}function h(){const _=[...s.names,...s.skips.map(b=>"-"+b)].join(",");return s.enable(""),_}function p(_){for(const b of s.skips)if(u(_,b))return!1;for(const b of s.names)if(u(_,b))return!0;return!1}function m(_){return _ instanceof Error?_.stack||_.message:_}function y(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}return m0=n,m0}var AS;function Z8(){return AS||(AS=1,(function(n,t){var e={};t.formatArgs=r,t.save=a,t.load=u,t.useColors=s,t.storage=h(),t.destroy=(()=>{let m=!1;return()=>{m||(m=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let m;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(m=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(m[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(m){if(m[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+m[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const y="color: "+this.color;m.splice(1,0,y,"color: inherit");let _=0,b=0;m[0].replace(/%[a-zA-Z%]/g,S=>{S!=="%%"&&(_++,S==="%c"&&(b=_))}),m.splice(b,0,y)}t.log=console.debug||console.log||(()=>{});function a(m){try{m?t.storage.setItem("debug",m):t.storage.removeItem("debug")}catch{}}function u(){let m;try{m=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!m&&typeof process<"u"&&"env"in process&&(m=e.DEBUG),m}function h(){try{return localStorage}catch{}}n.exports=G8()(t);const{formatters:p}=n.exports;p.j=function(m){try{return JSON.stringify(m)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}}})(Xd,Xd.exports)),Xd.exports}var W8=Z8();const Io=Jh(W8);var _0={exports:{}},ES;function F8(){return ES||(ES=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function r(p,m,y){this.fn=p,this.context=m,this.once=y||!1}function a(p,m,y,_,b){if(typeof y!="function")throw new TypeError("The listener must be a function");var S=new r(y,_||p,b),x=e?e+m:m;return p._events[x]?p._events[x].fn?p._events[x]=[p._events[x],S]:p._events[x].push(S):(p._events[x]=S,p._eventsCount++),p}function u(p,m){--p._eventsCount===0?p._events=new s:delete p._events[m]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var m=[],y,_;if(this._eventsCount===0)return m;for(_ in y=this._events)t.call(y,_)&&m.push(e?_.slice(1):_);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(y)):m},h.prototype.listeners=function(m){var y=e?e+m:m,_=this._events[y];if(!_)return[];if(_.fn)return[_.fn];for(var b=0,S=_.length,x=new Array(S);b<S;b++)x[b]=_[b].fn;return x},h.prototype.listenerCount=function(m){var y=e?e+m:m,_=this._events[y];return _?_.fn?1:_.length:0},h.prototype.emit=function(m,y,_,b,S,x){var A=e?e+m:m;if(!this._events[A])return!1;var E=this._events[A],R=arguments.length,z,O;if(E.fn){switch(E.once&&this.removeListener(m,E.fn,void 0,!0),R){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,y),!0;case 3:return E.fn.call(E.context,y,_),!0;case 4:return E.fn.call(E.context,y,_,b),!0;case 5:return E.fn.call(E.context,y,_,b,S),!0;case 6:return E.fn.call(E.context,y,_,b,S,x),!0}for(O=1,z=new Array(R-1);O<R;O++)z[O-1]=arguments[O];E.fn.apply(E.context,z)}else{var $=E.length,N;for(O=0;O<$;O++)switch(E[O].once&&this.removeListener(m,E[O].fn,void 0,!0),R){case 1:E[O].fn.call(E[O].context);break;case 2:E[O].fn.call(E[O].context,y);break;case 3:E[O].fn.call(E[O].context,y,_);break;case 4:E[O].fn.call(E[O].context,y,_,b);break;default:if(!z)for(N=1,z=new Array(R-1);N<R;N++)z[N-1]=arguments[N];E[O].fn.apply(E[O].context,z)}}return!0},h.prototype.on=function(m,y,_){return a(this,m,y,_,!1)},h.prototype.once=function(m,y,_){return a(this,m,y,_,!0)},h.prototype.removeListener=function(m,y,_,b){var S=e?e+m:m;if(!this._events[S])return this;if(!y)return u(this,S),this;var x=this._events[S];if(x.fn)x.fn===y&&(!b||x.once)&&(!_||x.context===_)&&u(this,S);else{for(var A=0,E=[],R=x.length;A<R;A++)(x[A].fn!==y||b&&!x[A].once||_&&x[A].context!==_)&&E.push(x[A]);E.length?this._events[S]=E.length===1?E[0]:E:u(this,S)}return this},h.prototype.removeAllListeners=function(m){var y;return m?(y=e?e+m:m,this._events[y]&&u(this,y)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,n.exports=h})(_0)),_0.exports}var Y8=F8();const Zl=Jh(Y8);function X8(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function Q8(){const n=X8();if(n.__xstate__)return n.__xstate__}const $8=n=>{if(typeof window>"u")return;const t=Q8();t&&t.register(n)};class CS{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){const e={value:t,next:null};if(this._current){this._last.next=e,this._last=e;return}this._current=e,this._last=e,this._active&&this.flush()}flush(){for(;this._current;){const t=this._current;this._process(t.value),this._current=t.next}this._last=null}}const aA=".",K8="",lA="",J8="#",t5="*",cA="xstate.init",e5="xstate.error",ey="xstate.stop";function n5(n,t){return{type:`xstate.after.${n}.${t}`}}function ny(n,t){return{type:`xstate.done.state.${n}`,output:t}}function i5(n,t){return{type:`xstate.done.actor.${n}`,output:t,actorId:n}}function uA(n,t){return{type:`xstate.error.actor.${n}`,error:t,actorId:n}}function hA(n){return{type:cA,input:n}}function Or(n){setTimeout(()=>{throw n})}const s5=typeof Symbol=="function"&&Symbol.observable||"@@observable";function fA(n,t){const e=LS(n),s=LS(t);return typeof s=="string"?typeof e=="string"?s===e:!1:typeof e=="string"?e in s:Object.keys(e).every(r=>r in s?fA(e[r],s[r]):!1)}function wv(n){if(pA(n))return n;const t=[];let e="";for(let s=0;s<n.length;s++){switch(n.charCodeAt(s)){case 92:e+=n[s+1],s++;continue;case 46:t.push(e),e="";continue}e+=n[s]}return t.push(e),t}function LS(n){if(U5(n))return n.value;if(typeof n!="string")return n;const t=wv(n);return r5(t)}function r5(n){if(n.length===1)return n[0];const t={};let e=t;for(let s=0;s<n.length-1;s++)if(s===n.length-2)e[n[s]]=n[s+1];else{const r=e;e={},r[n[s]]=e}return t}function MS(n,t){const e={},s=Object.keys(n);for(let r=0;r<s.length;r++){const a=s[r];e[a]=t(n[a],a,n,r)}return e}function dA(n){return pA(n)?n:[n]}function Lo(n){return n===void 0?[]:dA(n)}function iy(n,t,e,s){return typeof n=="function"?n({context:t,event:e,self:s}):n}function pA(n){return Array.isArray(n)}function o5(n){return n.type.startsWith("xstate.error.actor")}function Gc(n){return dA(n).map(t=>typeof t>"u"||typeof t=="string"?{target:t}:t)}function mA(n){if(!(n===void 0||n===K8))return Lo(n)}function sy(n,t,e){const s=typeof n=="object",r=s?n:void 0;return{next:(s?n.next:n)?.bind(r),error:(s?n.error:t)?.bind(r),complete:(s?n.complete:e)?.bind(r)}}function kS(n,t){return`${t}.${n}`}function xv(n,t){const e=t.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!e)return n.implementations.actors[t];const[,s,r]=e,u=n.getStateNodeById(r).config.invoke;return(Array.isArray(u)?u[s]:u).src}function _A(n,t){if(t===n||t===t5)return!0;if(!t.endsWith(".*"))return!1;const e=t.split("."),s=n.split(".");for(let r=0;r<e.length;r++){const a=e[r],u=s[r];if(a==="*")return r===e.length-1;if(a!==u)return!1}return!0}function OS(n,t){return`${n.sessionId}.${t}`}let a5=0;function l5(n,t){const e=new Map,s=new Map,r=new WeakMap,a=new Set,u={},{clock:h,logger:p}=t,m={schedule:(b,S,x,A,E=Math.random().toString(36).slice(2))=>{const R={source:b,target:S,event:x,delay:A,id:E,startedAt:Date.now()},z=OS(b,E);_._snapshot._scheduledEvents[z]=R;const O=h.setTimeout(()=>{delete u[z],delete _._snapshot._scheduledEvents[z],_._relay(b,S,x)},A);u[z]=O},cancel:(b,S)=>{const x=OS(b,S),A=u[x];delete u[x],delete _._snapshot._scheduledEvents[x],A!==void 0&&h.clearTimeout(A)},cancelAll:b=>{for(const S in _._snapshot._scheduledEvents){const x=_._snapshot._scheduledEvents[S];x.source===b&&m.cancel(b,x.id)}}},y=b=>{if(!a.size)return;const S={...b,rootId:n.sessionId};a.forEach(x=>x.next?.(S))},_={_snapshot:{_scheduledEvents:(t?.snapshot&&t.snapshot.scheduler)??{}},_bookId:()=>`x:${a5++}`,_register:(b,S)=>(e.set(b,S),b),_unregister:b=>{e.delete(b.sessionId);const S=r.get(b);S!==void 0&&(s.delete(S),r.delete(b))},get:b=>s.get(b),getAll:()=>Object.fromEntries(s.entries()),_set:(b,S)=>{const x=s.get(b);if(x&&x!==S)throw new Error(`Actor with system ID '${b}' already exists.`);s.set(b,S),r.set(S,b)},inspect:b=>{const S=sy(b);return a.add(S),{unsubscribe(){a.delete(S)}}},_sendInspectionEvent:y,_relay:(b,S,x)=>{_._sendInspectionEvent({type:"@xstate.event",sourceRef:b,actorRef:S,event:x}),S._send(x)},scheduler:m,getSnapshot:()=>({_scheduledEvents:{..._._snapshot._scheduledEvents}}),start:()=>{const b=_._snapshot._scheduledEvents;_._snapshot._scheduledEvents={};for(const S in b){const{source:x,target:A,event:E,delay:R,id:z}=b[S];m.schedule(x,A,E,R,z)}},_clock:h,_logger:p};return _}let g0=!1;const Sv=1;let qi=(function(n){return n[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped",n})({});const c5={clock:{setTimeout:(n,t)=>setTimeout(n,t),clearTimeout:n=>clearTimeout(n)},logger:console.log.bind(console),devTools:!1};class u5{constructor(t,e){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new CS(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=qi.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this.systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const s={...c5,...e},{clock:r,logger:a,parent:u,syncSnapshot:h,id:p,systemId:m,inspect:y}=s;this.system=u?u.system:l5(this,{clock:r,logger:a}),y&&!u&&this.system.inspect(sy(y)),this.sessionId=this.system._bookId(),this.id=p??this.sessionId,this.logger=e?.logger??this.system._logger,this.clock=e?.clock??this.system._clock,this._parent=u,this._syncSnapshot=h,this.options=s,this.src=s.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:_=>{this._deferred.push(_)},system:this.system,stopChild:_=>{if(_._parent!==this)throw new Error(`Cannot stop child actor ${_.id} of ${this.id} because it is not a child`);_._stop()},emit:_=>{const b=this.eventListeners.get(_.type),S=this.eventListeners.get("*");if(!b&&!S)return;const x=[...b?b.values():[],...S?S.values():[]];for(const A of x)try{A(_)}catch(E){Or(E)}},actionExecutor:_=>{const b=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:_.type,params:_.params}}),!_.exec)return;const S=g0;try{g0=!0,_.exec(_.info,_.params)}finally{g0=S}};this._processingStatus===qi.Running?b():this._deferred.push(b)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),m&&(this.systemId=m,this.system._set(m,this)),this._initState(e?.snapshot??e?.state),m&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(t){try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(e){this._snapshot={status:"error",output:void 0,error:e}}}update(t,e){this._snapshot=t;let s;for(;s=this._deferred.shift();)try{s()}catch(r){this._deferred.length=0,this._snapshot={...t,status:"error",error:r}}switch(this._snapshot.status){case"active":for(const r of this.observers)try{r.next?.(t)}catch(a){Or(a)}break;case"done":for(const r of this.observers)try{r.next?.(t)}catch(a){Or(a)}this._stopProcedure(),this._complete(),this._doneEvent=i5(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:e,snapshot:t})}subscribe(t,e,s){const r=sy(t,e,s);if(this._processingStatus!==qi.Stopped)this.observers.add(r);else switch(this._snapshot.status){case"done":try{r.complete?.()}catch(a){Or(a)}break;case"error":{const a=this._snapshot.error;if(!r.error)Or(a);else try{r.error(a)}catch(u){Or(u)}break}}return{unsubscribe:()=>{this.observers.delete(r)}}}on(t,e){let s=this.eventListeners.get(t);s||(s=new Set,this.eventListeners.set(t,s));const r=e.bind(void 0);return s.add(r),{unsubscribe:()=>{s.delete(r)}}}start(){if(this._processingStatus===qi.Running)return this;this._syncSnapshot&&this.subscribe({next:s=>{s.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:s})},error:()=>{}}),this.system._register(this.sessionId,this),this.systemId&&this.system._set(this.systemId,this),this._processingStatus=qi.Running;const t=hA(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(s){return this._snapshot={...this._snapshot,status:"error",error:s},this._error(s),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let e,s;try{e=this.logic.transition(this._snapshot,t,this._actorScope)}catch(r){s={err:r}}if(s){const{err:r}=s;this._snapshot={...this._snapshot,status:"error",error:r},this._error(r);return}this.update(e,t),t.type===ey&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===qi.Stopped?this:(this.mailbox.clear(),this._processingStatus===qi.NotStarted?(this._processingStatus=qi.Stopped,this):(this.mailbox.enqueue({type:ey}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(const t of this.observers)try{t.complete?.()}catch(e){Or(e)}this.observers.clear(),this.eventListeners.clear()}_reportError(t){if(!this.observers.size){this._parent||Or(t),this.eventListeners.clear();return}let e=!1;for(const s of this.observers){const r=s.error;e||=!r;try{r?.(t)}catch(a){Or(a)}}this.observers.clear(),this.eventListeners.clear(),e&&Or(t)}_error(t){this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,uA(this.id,t))}_stopProcedure(){return this._processingStatus!==qi.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new CS(this._process.bind(this)),this._processingStatus=qi.Stopped,this.system._unregister(this),this)}_send(t){this._processingStatus!==qi.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){const{devTools:t}=this.options;t&&(typeof t=="function"?t:$8)(this)}toJSON(){return{xstate$$type:Sv,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[s5](){return this}getSnapshot(){return this._snapshot}}function Yh(n,...[t]){return new u5(n,t)}function h5(n,t,e,s,{sendId:r}){const a=typeof r=="function"?r(e,s):r;return[t,{sendId:a},void 0]}function f5(n,t){n.defer(()=>{n.system.scheduler.cancel(n.self,t.sendId)})}function Tv(n){function t(e,s){}return t.type="xstate.cancel",t.sendId=n,t.resolve=h5,t.execute=f5,t}function d5(n,t,e,s,{id:r,systemId:a,src:u,input:h,syncSnapshot:p}){const m=typeof u=="string"?xv(t.machine,u):u,y=typeof r=="function"?r(e):r;let _,b;return m&&(b=typeof h=="function"?h({context:t.context,event:e.event,self:n.self}):h,_=Yh(m,{id:y,src:u,parent:n.self,syncSnapshot:p,systemId:a,input:b})),[Bl(t,{children:{...t.children,[y]:_}}),{id:r,systemId:a,actorRef:_,src:u,input:b},void 0]}function p5(n,{actorRef:t}){t&&n.defer(()=>{t._processingStatus!==qi.Stopped&&t.start()})}function Av(...[n,{id:t,systemId:e,input:s,syncSnapshot:r=!1}={}]){function a(u,h){}return a.type="xstate.spawnChild",a.id=t,a.systemId=e,a.src=n,a.input=s,a.syncSnapshot=r,a.resolve=d5,a.execute=p5,a}function m5(n,t,e,s,{actorRef:r}){const a=typeof r=="function"?r(e,s):r,u=typeof a=="string"?t.children[a]:a;let h=t.children;return u&&(h={...h},delete h[u.id]),[Bl(t,{children:h}),u,void 0]}function gA(n,t){const e=t.getSnapshot();if(e&&"children"in e)for(const s of Object.values(e.children))gA(n,s);n.system._unregister(t)}function _5(n,t){if(t){if(gA(n,t),t._processingStatus!==qi.Running){n.stopChild(t);return}n.defer(()=>{n.stopChild(t)})}}function Em(n){function t(e,s){}return t.type="xstate.stopChild",t.actorRef=n,t.resolve=m5,t.execute=_5,t}function Cm(n,t,e,s){const{machine:r}=s,a=typeof n=="function",u=a?n:r.implementations.guards[typeof n=="string"?n:n.type];if(!a&&!u)throw new Error(`Guard '${typeof n=="string"?n:n.type}' is not implemented.'.`);if(typeof u!="function")return Cm(u,t,e,s);const h={context:t,event:e},p=a||typeof n=="string"?void 0:"params"in n?typeof n.params=="function"?n.params({context:t,event:e}):n.params:void 0;return"check"in u?u.check(s,h,u):u(h,p)}function Ev(n){return n.type==="atomic"||n.type==="final"}function nu(n){return Object.values(n.states).filter(t=>t.type!=="history")}function yf(n,t){const e=[];if(t===n)return e;let s=n.parent;for(;s&&s!==t;)e.push(s),s=s.parent;return e}function Bp(n){const t=new Set(n),e=vA(t);for(const s of t)if(s.type==="compound"&&(!e.get(s)||!e.get(s).length))DS(s).forEach(r=>t.add(r));else if(s.type==="parallel"){for(const r of nu(s))if(r.type!=="history"&&!t.has(r)){const a=DS(r);for(const u of a)t.add(u)}}for(const s of t){let r=s.parent;for(;r;)t.add(r),r=r.parent}return t}function yA(n,t){const e=t.get(n);if(!e)return{};if(n.type==="compound"){const r=e[0];if(r){if(Ev(r))return r.key}else return{}}const s={};for(const r of e)s[r.key]=yA(r,t);return s}function vA(n){const t=new Map;for(const e of n)t.has(e)||t.set(e,[]),e.parent&&(t.has(e.parent)||t.set(e.parent,[]),t.get(e.parent).push(e));return t}function bA(n,t){const e=Bp(t);return yA(n,vA(e))}function Cv(n,t){return t.type==="compound"?nu(t).some(e=>e.type==="final"&&n.has(e)):t.type==="parallel"?nu(t).every(e=>Cv(n,e)):t.type==="final"}const Lm=n=>n[0]===J8;function g5(n,t){return n.transitions.get(t)||[...n.transitions.keys()].filter(s=>_A(t,s)).sort((s,r)=>r.length-s.length).flatMap(s=>n.transitions.get(s))}function y5(n){const t=n.config.after;if(!t)return[];const e=r=>{const a=n5(r,n.id),u=a.type;return n.entry.push(kv(a,{id:u,delay:r})),n.exit.push(Tv(u)),u};return Object.keys(t).flatMap(r=>{const a=t[r],u=typeof a=="string"?{target:a}:a,h=Number.isNaN(+r)?r:+r,p=e(h);return Lo(u).map(m=>({...m,event:p,delay:h}))}).map(r=>{const{delay:a}=r;return{...Ca(n,r.event,r),delay:a}})}function Ca(n,t,e){const s=mA(e.target),r=e.reenter??!1,a=x5(n,s),u={...e,actions:Lo(e.actions),guard:e.guard,target:a,source:n,reenter:r,eventType:t,toJSON:()=>({...u,source:`#${n.id}`,target:a?a.map(h=>`#${h.id}`):void 0})};return u}function v5(n){const t=new Map;if(n.config.on)for(const e of Object.keys(n.config.on)){if(e===lA)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const s=n.config.on[e];t.set(e,Gc(s).map(r=>Ca(n,e,r)))}if(n.config.onDone){const e=`xstate.done.state.${n.id}`;t.set(e,Gc(n.config.onDone).map(s=>Ca(n,e,s)))}for(const e of n.invoke){if(e.onDone){const s=`xstate.done.actor.${e.id}`;t.set(s,Gc(e.onDone).map(r=>Ca(n,s,r)))}if(e.onError){const s=`xstate.error.actor.${e.id}`;t.set(s,Gc(e.onError).map(r=>Ca(n,s,r)))}if(e.onSnapshot){const s=`xstate.snapshot.${e.id}`;t.set(s,Gc(e.onSnapshot).map(r=>Ca(n,s,r)))}}for(const e of n.after){let s=t.get(e.eventType);s||(s=[],t.set(e.eventType,s)),s.push(e)}return t}function b5(n){const t=[],e=s=>{Object.values(s).forEach(r=>{if(r.config.route&&r.config.id){const a=r.config.id,u=r.config.route.guard,h=(m,y)=>m.event.to!==`#${a}`?!1:u&&typeof u=="function"?u(m,y):!0,p={...r.config.route,guard:h,target:`#${a}`};t.push(Ca(n,"xstate.route",p))}r.states&&e(r.states)})};e(n.states),t.length>0&&n.transitions.set("xstate.route",t)}function w5(n,t){const e=typeof t=="string"?n.states[t]:t?n.states[t.target]:void 0;if(!e&&t)throw new Error(`Initial state node "${t}" not found on parent state node #${n.id}`);const s={source:n,actions:!t||typeof t=="string"?[]:Lo(t.actions),eventType:null,reenter:!1,target:e?[e]:[],toJSON:()=>({...s,source:`#${n.id}`,target:e?[`#${e.id}`]:[]})};return s}function x5(n,t){if(t!==void 0)return t.map(e=>{if(typeof e!="string")return e;if(Lm(e))return n.machine.getStateNodeById(e);const s=e[0]===aA;if(s&&!n.parent)return Hp(n,e.slice(1));const r=s?n.key+e:e;if(n.parent)try{return Hp(n.parent,r)}catch(a){throw new Error(`Invalid transition definition for state node '${n.id}':
${a.message}`)}else throw new Error(`Invalid target: "${e}" is not a valid target from the root node. Did you mean ".${e}"?`)})}function wA(n){const t=mA(n.config.target);return t?{target:t.map(e=>typeof e=="string"?Hp(n.parent,e):e)}:n.parent.initial}function kl(n){return n.type==="history"}function DS(n){const t=xA(n);for(const e of t)for(const s of yf(e,n))t.add(s);return t}function xA(n){const t=new Set;function e(s){if(!t.has(s)){if(t.add(s),s.type==="compound")e(s.initial.target[0]);else if(s.type==="parallel")for(const r of nu(s))e(r)}}return e(n),t}function iu(n,t){if(Lm(t))return n.machine.getStateNodeById(t);if(!n.states)throw new Error(`Unable to retrieve child state '${t}' from '${n.id}'; no child states exist.`);const e=n.states[t];if(!e)throw new Error(`Child state '${t}' does not exist on '${n.id}'`);return e}function Hp(n,t){if(typeof t=="string"&&Lm(t))try{return n.machine.getStateNodeById(t)}catch{}const e=wv(t).slice();let s=n;for(;e.length;){const r=e.shift();if(!r.length)break;s=iu(s,r)}return s}function Vp(n,t){if(typeof t=="string"){const r=n.states[t];if(!r)throw new Error(`State '${t}' does not exist on '${n.id}'`);return[n,r]}const e=Object.keys(t),s=e.map(r=>iu(n,r)).filter(Boolean);return[n.machine.root,n].concat(s,e.reduce((r,a)=>{const u=iu(n,a);if(!u)return r;const h=Vp(u,t[a]);return r.concat(h)},[]))}function S5(n,t,e,s){const a=iu(n,t).next(e,s);return!a||!a.length?n.next(e,s):a}function T5(n,t,e,s){const r=Object.keys(t),a=iu(n,r[0]),u=Lv(a,t[r[0]],e,s);return!u||!u.length?n.next(e,s):u}function A5(n,t,e,s){const r=[];for(const a of Object.keys(t)){const u=t[a];if(!u)continue;const h=iu(n,a),p=Lv(h,u,e,s);p&&r.push(...p)}return r.length?r:n.next(e,s)}function Lv(n,t,e,s){return typeof t=="string"?S5(n,t,e,s):Object.keys(t).length===1?T5(n,t,e,s):A5(n,t,e,s)}function E5(n){return Object.keys(n.states).map(t=>n.states[t]).filter(t=>t.type==="history")}function Pa(n,t){let e=n;for(;e.parent&&e.parent!==t;)e=e.parent;return e.parent===t}function C5(n,t){const e=new Set(n),s=new Set(t);for(const r of e)if(s.has(r))return!0;for(const r of s)if(e.has(r))return!0;return!1}function SA(n,t,e){const s=new Set;for(const r of n){let a=!1;const u=new Set;for(const h of s)if(C5(ry([r],t,e),ry([h],t,e)))if(Pa(r.source,h.source))u.add(h);else{a=!0;break}if(!a){for(const h of u)s.delete(h);s.add(r)}}return Array.from(s)}function L5(n){const[t,...e]=n;for(const s of yf(t,void 0))if(e.every(r=>Pa(r,s)))return s}function Mv(n,t){if(!n.target)return[];const e=new Set;for(const s of n.target)if(kl(s))if(t[s.id])for(const r of t[s.id])e.add(r);else for(const r of Mv(wA(s),t))e.add(r);else e.add(s);return[...e]}function TA(n,t){const e=Mv(n,t);if(!e)return;if(!n.reenter&&e.every(r=>r===n.source||Pa(r,n.source)))return n.source;const s=L5(e.concat(n.source));if(s)return s;if(!n.reenter)return n.source.machine.root}function ry(n,t,e){const s=new Set;for(const r of n)if(r.target?.length){const a=TA(r,e);r.reenter&&r.source===a&&s.add(a);for(const u of t)Pa(u,a)&&s.add(u)}return[...s]}function M5(n,t){if(n.length!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0}function k5(n,t,e,s,r){return oy([{target:[...xA(n)],source:n,reenter:!0,actions:[],eventType:null,toJSON:null}],t,e,s,!0,r)}function oy(n,t,e,s,r,a){const u=[];if(!n.length)return[t,u];const h=e.actionExecutor;e.actionExecutor=p=>{u.push(p),h(p)};try{const p=new Set(t._nodes);let m=t.historyValue;const y=SA(n,p,m);let _=t;r||([_,m]=I5(_,s,e,y,p,m,a,e.actionExecutor)),_=su(_,s,e,y.flatMap(S=>S.actions),a,void 0),_=D5(_,s,e,y,p,a,m,r);const b=[...p];_.status==="done"&&(_=su(_,s,e,b.sort((S,x)=>x.order-S.order).flatMap(S=>S.exit),a,void 0));try{return m===t.historyValue&&M5(t._nodes,p)?[_,u]:[Bl(_,{_nodes:b,historyValue:m}),u]}catch(S){throw S}}finally{e.actionExecutor=h}}function O5(n,t,e,s,r){if(s.output===void 0)return;const a=ny(r.id,r.output!==void 0&&r.parent?iy(r.output,n.context,t,e.self):void 0);return iy(s.output,n.context,a,e.self)}function D5(n,t,e,s,r,a,u,h){let p=n;const m=new Set,y=new Set;R5(s,u,y,m),h&&y.add(n.machine.root);const _=new Set;for(const b of[...m].sort((S,x)=>S.order-x.order)){r.add(b);const S=[];S.push(...b.entry);for(const x of b.invoke)S.push(Av(x.src,{...x,syncSnapshot:!!x.onSnapshot}));if(y.has(b)){const x=b.initial.actions;S.push(...x)}if(p=su(p,t,e,S,a,b.invoke.map(x=>x.id)),b.type==="final"){const x=b.parent;let A=x?.type==="parallel"?x:x?.parent,E=A||b;for(x?.type==="compound"&&a.push(ny(x.id,b.output!==void 0?iy(b.output,p.context,t,e.self):void 0));A?.type==="parallel"&&!_.has(A)&&Cv(r,A);)_.add(A),a.push(ny(A.id)),E=A,A=A.parent;if(A)continue;p=Bl(p,{status:"done",output:O5(p,t,e,p.machine.root,E)})}}return p}function R5(n,t,e,s){for(const r of n){const a=TA(r,t);for(const h of r.target||[])!kl(h)&&(r.source!==h||r.source!==a||r.reenter)&&(s.add(h),e.add(h)),Xc(h,t,e,s);const u=Mv(r,t);for(const h of u){const p=yf(h,a);a?.type==="parallel"&&p.push(a),AA(s,t,e,p,!r.source.parent&&r.reenter?void 0:a)}}}function Xc(n,t,e,s){if(kl(n))if(t[n.id]){const r=t[n.id];for(const a of r)s.add(a),Xc(a,t,e,s);for(const a of r)y0(a,n.parent,s,t,e)}else{const r=wA(n);for(const a of r.target)s.add(a),r===n.parent?.initial&&e.add(n.parent),Xc(a,t,e,s);for(const a of r.target)y0(a,n.parent,s,t,e)}else if(n.type==="compound"){const[r]=n.initial.target;kl(r)||(s.add(r),e.add(r)),Xc(r,t,e,s),y0(r,n,s,t,e)}else if(n.type==="parallel")for(const r of nu(n).filter(a=>!kl(a)))[...s].some(a=>Pa(a,r))||(kl(r)||(s.add(r),e.add(r)),Xc(r,t,e,s))}function AA(n,t,e,s,r){for(const a of s)if((!r||Pa(a,r))&&n.add(a),a.type==="parallel")for(const u of nu(a).filter(h=>!kl(h)))[...n].some(h=>Pa(h,u))||(n.add(u),Xc(u,t,e,n))}function y0(n,t,e,s,r){AA(e,s,r,yf(n,t))}function I5(n,t,e,s,r,a,u,h){let p=n;const m=ry(s,r,a);m.sort((_,b)=>b.order-_.order);let y;for(const _ of m)for(const b of E5(_)){let S;b.history==="deep"?S=x=>Ev(x)&&Pa(x,_):S=x=>x.parent===_,y??={...a},y[b.id]=Array.from(r).filter(S)}for(const _ of m)p=su(p,t,e,[..._.exit,..._.invoke.map(b=>Em(b.id))],u,void 0),r.delete(_);return[p,y||a]}function N5(n,t){return n.implementations.actions[t]}function EA(n,t,e,s,r,a){const{machine:u}=n;let h=n;for(const p of s){const m=typeof p=="function",y=m?p:N5(u,typeof p=="string"?p:p.type),_={context:h.context,event:t,self:e.self,system:e.system},b=m||typeof p=="string"?void 0:"params"in p?typeof p.params=="function"?p.params({context:h.context,event:t}):p.params:void 0;if(!y||!("resolve"in y)){e.actionExecutor({type:typeof p=="string"?p:typeof p=="object"?p.type:p.name||"(anonymous)",info:_,params:b,exec:y});continue}const S=y,[x,A,E]=S.resolve(e,h,_,b,y,r);h=x,"retryResolve"in S&&a?.push([S,A]),"execute"in S&&e.actionExecutor({type:S.type,info:_,params:A,exec:S.execute.bind(null,e,A)}),E&&(h=EA(h,t,e,E,r,a))}return h}function su(n,t,e,s,r,a){const u=a?[]:void 0,h=EA(n,t,e,s,{internalQueue:r,deferredActorIds:a},u);return u?.forEach(([p,m])=>{p.retryResolve(e,h,m)}),h}function v0(n,t,e,s){let r=n;const a=[];function u(m,y,_){e.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:e.self,event:y,snapshot:m[0],_transitions:_}),a.push(m)}if(t.type===ey)return r=Bl(RS(r,t,e),{status:"stopped"}),u([r,[]],t,[]),{snapshot:r,microsteps:a};let h=t;if(h.type!==cA){const m=h,y=o5(m),_=IS(m,r);if(y&&!_.length)return r=Bl(n,{status:"error",error:m.error}),u([r,[]],m,[]),{snapshot:r,microsteps:a};const b=oy(_,n,e,h,!1,s);r=b[0],u(b,m,_)}let p=!0;for(;r.status==="active";){let m=p?P5(r,h):[];const y=m.length?r:void 0;if(!m.length){if(!s.length)break;h=s.shift(),m=IS(h,r)}const _=oy(m,r,e,h,!1,s);r=_[0],p=r!==y,u(_,h,m)}return r.status!=="active"&&RS(r,h,e),{snapshot:r,microsteps:a}}function RS(n,t,e){return su(n,t,e,Object.values(n.children).map(s=>Em(s)),[],void 0)}function IS(n,t){return t.machine.getTransitionData(t,n)}function P5(n,t){const e=new Set,s=n._nodes.filter(Ev);for(const r of s)t:for(const a of[r].concat(yf(r,void 0)))if(a.always){for(const u of a.always)if(u.guard===void 0||Cm(u.guard,n.context,t,n)){e.add(u);break t}}return SA(Array.from(e),new Set(n._nodes),n.historyValue)}function z5(n,t){const e=Bp(Vp(n,t));return bA(n,[...e])}function U5(n){return!!n&&typeof n=="object"&&"machine"in n&&"value"in n}const B5=function(t){return fA(t,this.value)},H5=function(t){return this.tags.has(t)},V5=function(t){const e=this.machine.getTransitionData(this,t);return!!e?.length&&e.some(s=>s.target!==void 0||s.actions.length)},j5=function(){const{_nodes:t,tags:e,machine:s,getMeta:r,toJSON:a,can:u,hasTag:h,matches:p,...m}=this;return{...m,tags:Array.from(e)}},q5=function(){return this._nodes.reduce((t,e)=>(e.meta!==void 0&&(t[e.id]=e.meta),t),{})};function fp(n,t){return{status:n.status,output:n.output,error:n.error,machine:t,context:n.context,_nodes:n._nodes,value:bA(t.root,n._nodes),tags:new Set(n._nodes.flatMap(e=>e.tags)),children:n.children,historyValue:n.historyValue||{},matches:B5,hasTag:H5,can:V5,getMeta:q5,toJSON:j5}}function Bl(n,t={}){return fp({...n,...t},n.machine)}function G5(n){if(typeof n!="object"||n===null)return{};const t={};for(const e in n){const s=n[e];Array.isArray(s)&&(t[e]=s.map(r=>({id:r.id})))}return t}function Z5(n,t){const{_nodes:e,tags:s,machine:r,children:a,context:u,can:h,hasTag:p,matches:m,getMeta:y,toJSON:_,...b}=n,S={};for(const A in a){const E=a[A];S[A]={snapshot:E.getPersistedSnapshot(t),src:E.src,systemId:E.systemId,syncSnapshot:E._syncSnapshot}}return{...b,context:CA(u),children:S,historyValue:G5(b.historyValue)}}function CA(n){let t;for(const e in n){const s=n[e];if(s&&typeof s=="object")if("sessionId"in s&&"send"in s&&"ref"in s)t??=Array.isArray(n)?n.slice():{...n},t[e]={xstate$$type:Sv,id:s.id};else{const r=CA(s);r!==s&&(t??=Array.isArray(n)?n.slice():{...n},t[e]=r)}}return t??n}function W5(n,t,e,s,{event:r,id:a,delay:u},{internalQueue:h}){const p=t.machine.implementations.delays;if(typeof r=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${r}" }) instead`);const m=typeof r=="function"?r(e,s):r;let y;if(typeof u=="string"){const _=p&&p[u];y=typeof _=="function"?_(e,s):_}else y=typeof u=="function"?u(e,s):u;return typeof y!="number"&&h.push(m),[t,{event:m,id:a,delay:y},void 0]}function F5(n,t){const{event:e,delay:s,id:r}=t;if(typeof s=="number"){n.defer(()=>{const a=n.self;n.system.scheduler.schedule(a,a,e,s,r)});return}}function kv(n,t){function e(s,r){}return e.type="xstate.raise",e.event=n,e.id=t?.id,e.delay=t?.delay,e.resolve=W5,e.execute=F5,e}function Y5(n,{machine:t,context:e},s,r){const a=(u,h)=>{if(typeof u=="string"){const p=xv(t,u);if(!p)throw new Error(`Actor logic '${u}' not implemented in machine '${t.id}'`);const m=Yh(p,{id:h?.id,parent:n.self,syncSnapshot:h?.syncSnapshot,input:typeof h?.input=="function"?h.input({context:e,event:s,self:n.self}):h?.input,src:u,systemId:h?.systemId});return r[m.id]=m,m}else return Yh(u,{id:h?.id,parent:n.self,syncSnapshot:h?.syncSnapshot,input:h?.input,src:u,systemId:h?.systemId})};return(u,h)=>{const p=a(u,h);return r[p.id]=p,n.defer(()=>{p._processingStatus!==qi.Stopped&&p.start()}),p}}function X5(n,t,e,s,{assignment:r}){if(!t.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const a={},u={context:t.context,event:e.event,spawn:Y5(n,t,e.event,a),self:n.self,system:n.system};let h={};if(typeof r=="function")h=r(u,s);else for(const m of Object.keys(r)){const y=r[m];h[m]=typeof y=="function"?y(u,s):y}const p=Object.assign({},t.context,h);return[Bl(t,{context:p,children:Object.keys(a).length?{...t.children,...a}:t.children}),void 0,void 0]}function Ol(n){function t(e,s){}return t.type="xstate.assign",t.assignment=n,t.resolve=X5,t}const NS=new WeakMap;function zc(n,t,e){let s=NS.get(n);return s?t in s||(s[t]=e()):(s={[t]:e()},NS.set(n,s)),s[t]}const Q5={},xh=n=>typeof n=="string"?{type:n}:typeof n=="function"?"resolve"in n?{type:n.type}:{type:n.name}:n;class jp{constructor(t,e){if(this.config=t,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=e._parent,this.key=e._key,this.machine=e._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(aA),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?MS(this.config.states,(s,r)=>new jp(s,{_parent:this,_key:r,_machine:this.machine})):Q5,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=Lo(this.config.entry).slice(),this.exit=Lo(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=Lo(t.tags).slice()}_initialize(){this.transitions=v5(this),this.config.always&&(this.always=Gc(this.config.always).map(t=>Ca(this,lA,t))),Object.keys(this.states).forEach(t=>{this.states[t]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(xh),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(t=>`#${t.id}`),source:`#${this.id}`,actions:this.initial.actions.map(xh),eventType:null})}:void 0,history:this.history,states:MS(this.states,t=>t.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(t=>({...t,actions:t.actions.map(xh)})),entry:this.entry.map(xh),exit:this.exit.map(xh),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return zc(this,"invoke",()=>Lo(this.config.invoke).map((t,e)=>{const{src:s,systemId:r}=t,a=t.id??kS(this.id,e),u=typeof s=="string"?s:`xstate.invoke.${kS(this.id,e)}`;return{...t,src:u,id:a,systemId:r,toJSON(){const{onDone:h,onError:p,...m}=t;return{...m,type:"xstate.invoke",src:u,id:a}}}}))}get on(){return zc(this,"on",()=>[...this.transitions].flatMap(([e,s])=>s.map(r=>[e,r])).reduce((e,[s,r])=>(e[s]=e[s]||[],e[s].push(r),e),{}))}get after(){return zc(this,"delayedTransitions",()=>y5(this))}get initial(){return zc(this,"initial",()=>w5(this,this.config.initial))}next(t,e){const s=e.type,r=[];let a;const u=zc(this,`candidates-${s}`,()=>g5(this,s));for(const h of u){const{guard:p}=h,m=t.context;let y=!1;try{y=!p||Cm(p,m,e,t)}catch(_){const b=typeof p=="string"?p:typeof p=="object"?p.type:void 0;throw new Error(`Unable to evaluate guard ${b?`'${b}' `:""}in transition for event '${s}' in state node '${this.id}':
${_.message}`)}if(y){r.push(...h.actions),a=h;break}}return a?[a]:void 0}get events(){return zc(this,"events",()=>{const{states:t}=this,e=new Set(this.ownEvents);if(t)for(const s of Object.keys(t)){const r=t[s];if(r.states)for(const a of r.events)e.add(`${a}`)}return Array.from(e)})}get ownEvents(){const t=Object.keys(Object.fromEntries(this.transitions)),e=new Set(t.filter(s=>this.transitions.get(s).some(r=>!(!r.target&&!r.actions.length&&!r.reenter))));return Array.from(e)}}const $5="#";class Ov{constructor(t,e){this.config=t,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=t.id||"(machine)",this.implementations={actors:e?.actors??{},actions:e?.actions??{},delays:e?.delays??{},guards:e?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new jp(t,{_key:this.id,_machine:this}),this.root._initialize(),b5(this.root),this.states=this.root.states,this.events=this.root.events}provide(t){const{actions:e,guards:s,actors:r,delays:a}=this.implementations;return new Ov(this.config,{actions:{...e,...t.actions},guards:{...s,...t.guards},actors:{...r,...t.actors},delays:{...a,...t.delays}})}resolveState(t){const e=z5(this.root,t.value),s=Bp(Vp(this.root,e));return fp({_nodes:[...s],context:t.context||{},children:{},status:Cv(s,this.root)?"done":t.status||"active",output:t.output,error:t.error,historyValue:t.historyValue},this)}transition(t,e,s){return v0(t,e,s,[]).snapshot}microstep(t,e,s){return v0(t,e,s,[]).microsteps.map(([r])=>r)}getTransitionData(t,e){return Lv(this.root,t.value,t,e)||[]}_getPreInitialState(t,e,s){const{context:r}=this.config,a=fp({context:typeof r!="function"&&r?r:{},_nodes:[this.root],children:{},status:"active"},this);return typeof r=="function"?su(a,e,t,[Ol(({spawn:h,event:p,self:m})=>r({spawn:h,input:p.input,self:m}))],s,void 0):a}getInitialSnapshot(t,e){const s=hA(e),r=[],a=this._getPreInitialState(t,s,r),[u]=k5(this.root,a,t,s,r),{snapshot:h}=v0(u,s,t,r);return h}start(t){Object.values(t.children).forEach(e=>{e.getSnapshot().status==="active"&&e.start()})}getStateNodeById(t){const e=wv(t),s=e.slice(1),r=Lm(e[0])?e[0].slice($5.length):e[0],a=this.idMap.get(r);if(!a)throw new Error(`Child state node '#${r}' does not exist on machine '${this.id}'`);return Hp(a,s)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(t,e){return Z5(t,e)}restoreSnapshot(t,e){const s={},r=t.children;Object.keys(r).forEach(_=>{const b=r[_],S=b.snapshot,x=b.src,A=typeof x=="string"?xv(this,x):x;if(!A)return;const E=Yh(A,{id:_,parent:e.self,syncSnapshot:b.syncSnapshot,snapshot:S,src:x,systemId:b.systemId});s[_]=E});function a(_,b){if(b instanceof jp)return b;try{return _.machine.getStateNodeById(b.id)}catch{}}function u(_,b){if(!b||typeof b!="object")return{};const S={};for(const x in b){const A=b[x];for(const E of A){const R=a(_,E);R&&(S[x]??=[],S[x].push(R))}}return S}const h=u(this.root,t.historyValue),p=fp({...t,children:s,_nodes:Array.from(Bp(Vp(this.root,t.value))),historyValue:h},this),m=new Set;function y(_,b){if(!m.has(_)){m.add(_);for(const S in _){const x=_[S];if(x&&typeof x=="object"){if("xstate$$type"in x&&x.xstate$$type===Sv){_[S]=b[x.id];continue}y(x,b)}}}}return y(p.context,s),p}}function K5(n,t,e,s,{event:r}){const a=typeof r=="function"?r(e,s):r;return[t,{event:a},void 0]}function J5(n,{event:t}){n.defer(()=>n.emit(t))}function LA(n){function t(e,s){}return t.type="xstate.emit",t.event=n,t.resolve=K5,t.execute=J5,t}let ay=(function(n){return n.Parent="#_parent",n.Internal="#_internal",n})({});function t6(n,t,e,s,{to:r,event:a,id:u,delay:h},p){const m=t.machine.implementations.delays;if(typeof a=="string")throw new Error(`Only event objects may be used with sendTo; use sendTo({ type: "${a}" }) instead`);const y=typeof a=="function"?a(e,s):a;let _;if(typeof h=="string"){const x=m&&m[h];_=typeof x=="function"?x(e,s):x}else _=typeof h=="function"?h(e,s):h;const b=typeof r=="function"?r(e,s):r;let S;if(typeof b=="string"){if(b===ay.Parent?S=n.self._parent:b===ay.Internal?S=n.self:b.startsWith("#_")?S=t.children[b.slice(2)]:S=p.deferredActorIds?.includes(b)?b:t.children[b],!S)throw new Error(`Unable to send event to actor '${b}' from machine '${t.machine.id}'.`)}else S=b||n.self;return[t,{to:S,targetId:typeof b=="string"?b:void 0,event:y,id:u,delay:_},void 0]}function e6(n,t,e){typeof e.to=="string"&&(e.to=t.children[e.to])}function n6(n,t){n.defer(()=>{const{to:e,event:s,delay:r,id:a}=t;if(typeof r=="number"){n.system.scheduler.schedule(n.self,e,s,r,a);return}n.system._relay(n.self,e,s.type===e5?uA(n.self.id,s.data):s)})}function Dv(n,t,e){function s(r,a){}return s.type="xstate.sendTo",s.to=n,s.event=t,s.id=e?.id,s.delay=e?.delay,s.resolve=t6,s.retryResolve=e6,s.execute=n6,s}function i6(n,t){return Dv(ay.Parent,n,t)}function s6(n,t,e,s,{collect:r}){const a=[],u=function(p){a.push(p)};return u.assign=(...h)=>{a.push(Ol(...h))},u.cancel=(...h)=>{a.push(Tv(...h))},u.raise=(...h)=>{a.push(kv(...h))},u.sendTo=(...h)=>{a.push(Dv(...h))},u.sendParent=(...h)=>{a.push(i6(...h))},u.spawnChild=(...h)=>{a.push(Av(...h))},u.stopChild=(...h)=>{a.push(Em(...h))},u.emit=(...h)=>{a.push(LA(...h))},r({context:e.context,event:e.event,enqueue:u,check:h=>Cm(h,t.context,e.event,t),self:n.self,system:n.system},s),[t,void 0,a]}function r6(n){function t(e,s){}return t.type="xstate.enqueueActions",t.collect=n,t.resolve=s6,t}function o6(n,t,e,s,{value:r,label:a}){return[t,{value:typeof r=="function"?r(e,s):r,label:a},void 0]}function a6({logger:n},{value:t,label:e}){e?n(e,t):n(t)}function l6(n=({context:e,event:s})=>({context:e,event:s}),t){function e(s,r){}return e.type="xstate.log",e.value=n,e.label=t,e.resolve=o6,e.execute=a6,e}function c6(n,t){const e=Lo(t);if(!e.some(r=>_A(n.type,r))){const r=e.length===1?`type matching "${e[0]}"`:`one of types matching "${e.join('", "')}"`;throw new Error(`Expected event ${JSON.stringify(n)} to have ${r}`)}}function u6(n,t){return new Ov(n,t)}function MA({schemas:n,actors:t,actions:e,guards:s,delays:r}){return{assign:Ol,sendTo:Dv,raise:kv,log:l6,cancel:Tv,stopChild:Em,enqueueActions:r6,emit:LA,spawnChild:Av,createStateConfig:a=>a,createAction:a=>a,createMachine:a=>u6({...a,schemas:n},{actors:t,actions:e,guards:s,delays:r}),extend:a=>MA({schemas:n,actors:t,actions:{...e,...a.actions},guards:{...s,...a.guards},delays:{...r,...a.delays}})}}const h6={timeout:1/0};function f6(n,t,e){const s={...h6,...e};return new Promise((r,a)=>{const{signal:u}=s;if(u?.aborted){a(u.reason);return}let h=!1;const p=s.timeout===1/0?void 0:setTimeout(()=>{m(),a(new Error(`Timeout of ${s.timeout} ms exceeded`))},s.timeout),m=()=>{clearTimeout(p),h=!0,b?.unsubscribe(),_&&u.removeEventListener("abort",_)};function y(S){t(S)&&(m(),r(S))}let _,b;y(n.getSnapshot()),!h&&(u&&(_=()=>{m(),a(u.reason)},u.addEventListener("abort",_)),b=n.subscribe({next:y,error:S=>{m(),a(S)},complete:()=>{m(),a(new Error("Actor terminated without satisfying predicate"))}}),h&&b.unsubscribe())})}let Qd;const d6=new Uint8Array(16);function p6(){if(!Qd&&(Qd=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Qd))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Qd(d6)}const m6=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function kA(n){return typeof n=="string"&&m6.test(n)}const li=[];for(let n=0;n<256;++n)li.push((n+256).toString(16).slice(1));function _6(n,t=0){return li[n[t+0]]+li[n[t+1]]+li[n[t+2]]+li[n[t+3]]+"-"+li[n[t+4]]+li[n[t+5]]+"-"+li[n[t+6]]+li[n[t+7]]+"-"+li[n[t+8]]+li[n[t+9]]+"-"+li[n[t+10]]+li[n[t+11]]+li[n[t+12]]+li[n[t+13]]+li[n[t+14]]+li[n[t+15]]}function g6(n){if(!kA(n))throw TypeError("Invalid UUID");let t;const e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}const y6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),PS={randomUUID:y6};function OA(n,t,e){if(PS.randomUUID&&!t&&!n)return PS.randomUUID();n=n||{};const s=n.random||(n.rng||p6)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=s[r];return t}return _6(s)}var ir={},Xe={},pi={},b0={},Sh={},zS;function v6(){return zS||(zS=1,Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.crypto=void 0,Sh.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),Sh}var US;function DA(){return US||(US=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.wrapXOFConstructorWithOpts=n.wrapConstructorWithOpts=n.wrapConstructor=n.Hash=n.nextTick=n.swap32IfBE=n.byteSwapIfBE=n.swap8IfBE=n.isLE=void 0,n.isBytes=e,n.anumber=s,n.abytes=r,n.ahash=a,n.aexists=u,n.aoutput=h,n.u8=p,n.u32=m,n.clean=y,n.createView=_,n.rotr=b,n.rotl=S,n.byteSwap=x,n.byteSwap32=A,n.bytesToHex=z,n.hexToBytes=N,n.asyncLoop=F,n.utf8ToBytes=G,n.bytesToUtf8=q,n.toBytes=W,n.kdfInputToBytes=Q,n.concatBytes=et,n.checkOpts=k,n.createHasher=Z,n.createOptHasher=P,n.createXOFer=U,n.randomBytes=K;const t=v6();function e(D){return D instanceof Uint8Array||ArrayBuffer.isView(D)&&D.constructor.name==="Uint8Array"}function s(D){if(!Number.isSafeInteger(D)||D<0)throw new Error("positive integer expected, got "+D)}function r(D,...V){if(!e(D))throw new Error("Uint8Array expected");if(V.length>0&&!V.includes(D.length))throw new Error("Uint8Array expected of length "+V+", got length="+D.length)}function a(D){if(typeof D!="function"||typeof D.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");s(D.outputLen),s(D.blockLen)}function u(D,V=!0){if(D.destroyed)throw new Error("Hash instance has been destroyed");if(V&&D.finished)throw new Error("Hash#digest() has already been called")}function h(D,V){r(D);const I=V.outputLen;if(D.length<I)throw new Error("digestInto() expects output buffer of length at least "+I)}function p(D){return new Uint8Array(D.buffer,D.byteOffset,D.byteLength)}function m(D){return new Uint32Array(D.buffer,D.byteOffset,Math.floor(D.byteLength/4))}function y(...D){for(let V=0;V<D.length;V++)D[V].fill(0)}function _(D){return new DataView(D.buffer,D.byteOffset,D.byteLength)}function b(D,V){return D<<32-V|D>>>V}function S(D,V){return D<<V|D>>>32-V>>>0}n.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function x(D){return D<<24&4278190080|D<<8&16711680|D>>>8&65280|D>>>24&255}n.swap8IfBE=n.isLE?D=>D:D=>x(D),n.byteSwapIfBE=n.swap8IfBE;function A(D){for(let V=0;V<D.length;V++)D[V]=x(D[V]);return D}n.swap32IfBE=n.isLE?D=>D:A;const E=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",R=Array.from({length:256},(D,V)=>V.toString(16).padStart(2,"0"));function z(D){if(r(D),E)return D.toHex();let V="";for(let I=0;I<D.length;I++)V+=R[D[I]];return V}const O={_0:48,_9:57,A:65,F:70,a:97,f:102};function $(D){if(D>=O._0&&D<=O._9)return D-O._0;if(D>=O.A&&D<=O.F)return D-(O.A-10);if(D>=O.a&&D<=O.f)return D-(O.a-10)}function N(D){if(typeof D!="string")throw new Error("hex string expected, got "+typeof D);if(E)return Uint8Array.fromHex(D);const V=D.length,I=V/2;if(V%2)throw new Error("hex string expected, got unpadded hex of length "+V);const Y=new Uint8Array(I);for(let at=0,mt=0;at<I;at++,mt+=2){const gt=$(D.charCodeAt(mt)),yt=$(D.charCodeAt(mt+1));if(gt===void 0||yt===void 0){const kt=D[mt]+D[mt+1];throw new Error('hex string expected, got non-hex character "'+kt+'" at index '+mt)}Y[at]=gt*16+yt}return Y}const j=async()=>{};n.nextTick=j;async function F(D,V,I){let Y=Date.now();for(let at=0;at<D;at++){I(at);const mt=Date.now()-Y;mt>=0&&mt<V||(await(0,n.nextTick)(),Y+=mt)}}function G(D){if(typeof D!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(D))}function q(D){return new TextDecoder().decode(D)}function W(D){return typeof D=="string"&&(D=G(D)),r(D),D}function Q(D){return typeof D=="string"&&(D=G(D)),r(D),D}function et(...D){let V=0;for(let Y=0;Y<D.length;Y++){const at=D[Y];r(at),V+=at.length}const I=new Uint8Array(V);for(let Y=0,at=0;Y<D.length;Y++){const mt=D[Y];I.set(mt,at),at+=mt.length}return I}function k(D,V){if(V!==void 0&&{}.toString.call(V)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(D,V)}class X{}n.Hash=X;function Z(D){const V=Y=>D().update(W(Y)).digest(),I=D();return V.outputLen=I.outputLen,V.blockLen=I.blockLen,V.create=()=>D(),V}function P(D){const V=(Y,at)=>D(at).update(W(Y)).digest(),I=D({});return V.outputLen=I.outputLen,V.blockLen=I.blockLen,V.create=Y=>D(Y),V}function U(D){const V=(Y,at)=>D(at).update(W(Y)).digest(),I=D({});return V.outputLen=I.outputLen,V.blockLen=I.blockLen,V.create=Y=>D(Y),V}n.wrapConstructor=Z,n.wrapConstructorWithOpts=P,n.wrapXOFConstructorWithOpts=U;function K(D=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(D));if(t.crypto&&typeof t.crypto.randomBytes=="function")return Uint8Array.from(t.crypto.randomBytes(D));throw new Error("crypto.getRandomValues must be defined")}})(b0)),b0}var BS;function b6(){if(BS)return pi;BS=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.SHA512_IV=pi.SHA384_IV=pi.SHA224_IV=pi.SHA256_IV=pi.HashMD=void 0,pi.setBigUint64=t,pi.Chi=e,pi.Maj=s;const n=DA();function t(a,u,h,p){if(typeof a.setBigUint64=="function")return a.setBigUint64(u,h,p);const m=BigInt(32),y=BigInt(4294967295),_=Number(h>>m&y),b=Number(h&y),S=p?4:0,x=p?0:4;a.setUint32(u+S,_,p),a.setUint32(u+x,b,p)}function e(a,u,h){return a&u^~a&h}function s(a,u,h){return a&u^a&h^u&h}class r extends n.Hash{constructor(u,h,p,m){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=u,this.outputLen=h,this.padOffset=p,this.isLE=m,this.buffer=new Uint8Array(u),this.view=(0,n.createView)(this.buffer)}update(u){(0,n.aexists)(this),u=(0,n.toBytes)(u),(0,n.abytes)(u);const{view:h,buffer:p,blockLen:m}=this,y=u.length;for(let _=0;_<y;){const b=Math.min(m-this.pos,y-_);if(b===m){const S=(0,n.createView)(u);for(;m<=y-_;_+=m)this.process(S,_);continue}p.set(u.subarray(_,_+b),this.pos),this.pos+=b,_+=b,this.pos===m&&(this.process(h,0),this.pos=0)}return this.length+=u.length,this.roundClean(),this}digestInto(u){(0,n.aexists)(this),(0,n.aoutput)(u,this),this.finished=!0;const{buffer:h,view:p,blockLen:m,isLE:y}=this;let{pos:_}=this;h[_++]=128,(0,n.clean)(this.buffer.subarray(_)),this.padOffset>m-_&&(this.process(p,0),_=0);for(let E=_;E<m;E++)h[E]=0;t(p,m-8,BigInt(this.length*8),y),this.process(p,0);const b=(0,n.createView)(u),S=this.outputLen;if(S%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const x=S/4,A=this.get();if(x>A.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<x;E++)b.setUint32(4*E,A[E],y)}digest(){const{buffer:u,outputLen:h}=this;this.digestInto(u);const p=u.slice(0,h);return this.destroy(),p}_cloneInto(u){u||(u=new this.constructor),u.set(...this.get());const{blockLen:h,buffer:p,length:m,finished:y,destroyed:_,pos:b}=this;return u.destroyed=_,u.finished=y,u.length=m,u.pos=b,m%h&&u.buffer.set(p),u}clone(){return this._cloneInto()}}return pi.HashMD=r,pi.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pi.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),pi.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),pi.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),pi}var ne={},HS;function w6(){if(HS)return ne;HS=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.toBig=ne.shrSL=ne.shrSH=ne.rotrSL=ne.rotrSH=ne.rotrBL=ne.rotrBH=ne.rotr32L=ne.rotr32H=ne.rotlSL=ne.rotlSH=ne.rotlBL=ne.rotlBH=ne.add5L=ne.add5H=ne.add4L=ne.add4H=ne.add3L=ne.add3H=void 0,ne.add=R,ne.fromBig=e,ne.split=s;const n=BigInt(2**32-1),t=BigInt(32);function e(q,W=!1){return W?{h:Number(q&n),l:Number(q>>t&n)}:{h:Number(q>>t&n)|0,l:Number(q&n)|0}}function s(q,W=!1){const Q=q.length;let et=new Uint32Array(Q),k=new Uint32Array(Q);for(let X=0;X<Q;X++){const{h:Z,l:P}=e(q[X],W);[et[X],k[X]]=[Z,P]}return[et,k]}const r=(q,W)=>BigInt(q>>>0)<<t|BigInt(W>>>0);ne.toBig=r;const a=(q,W,Q)=>q>>>Q;ne.shrSH=a;const u=(q,W,Q)=>q<<32-Q|W>>>Q;ne.shrSL=u;const h=(q,W,Q)=>q>>>Q|W<<32-Q;ne.rotrSH=h;const p=(q,W,Q)=>q<<32-Q|W>>>Q;ne.rotrSL=p;const m=(q,W,Q)=>q<<64-Q|W>>>Q-32;ne.rotrBH=m;const y=(q,W,Q)=>q>>>Q-32|W<<64-Q;ne.rotrBL=y;const _=(q,W)=>W;ne.rotr32H=_;const b=(q,W)=>q;ne.rotr32L=b;const S=(q,W,Q)=>q<<Q|W>>>32-Q;ne.rotlSH=S;const x=(q,W,Q)=>W<<Q|q>>>32-Q;ne.rotlSL=x;const A=(q,W,Q)=>W<<Q-32|q>>>64-Q;ne.rotlBH=A;const E=(q,W,Q)=>q<<Q-32|W>>>64-Q;ne.rotlBL=E;function R(q,W,Q,et){const k=(W>>>0)+(et>>>0);return{h:q+Q+(k/2**32|0)|0,l:k|0}}const z=(q,W,Q)=>(q>>>0)+(W>>>0)+(Q>>>0);ne.add3L=z;const O=(q,W,Q,et)=>W+Q+et+(q/2**32|0)|0;ne.add3H=O;const $=(q,W,Q,et)=>(q>>>0)+(W>>>0)+(Q>>>0)+(et>>>0);ne.add4L=$;const N=(q,W,Q,et,k)=>W+Q+et+k+(q/2**32|0)|0;ne.add4H=N;const j=(q,W,Q,et,k)=>(q>>>0)+(W>>>0)+(Q>>>0)+(et>>>0)+(k>>>0);ne.add5L=j;const F=(q,W,Q,et,k,X)=>W+Q+et+k+X+(q/2**32|0)|0;ne.add5H=F;const G={fromBig:e,split:s,toBig:r,shrSH:a,shrSL:u,rotrSH:h,rotrSL:p,rotrBH:m,rotrBL:y,rotr32H:_,rotr32L:b,rotlSH:S,rotlSL:x,rotlBH:A,rotlBL:E,add:R,add3L:z,add3H:O,add4L:$,add4H:N,add5H:F,add5L:j};return ne.default=G,ne}var VS;function x6(){if(VS)return Xe;VS=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.sha512_224=Xe.sha512_256=Xe.sha384=Xe.sha512=Xe.sha224=Xe.sha256=Xe.SHA512_256=Xe.SHA512_224=Xe.SHA384=Xe.SHA512=Xe.SHA224=Xe.SHA256=void 0;const n=b6(),t=w6(),e=DA(),s=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),r=new Uint32Array(64);class a extends n.HashMD{constructor(O=32){super(64,O,8,!1),this.A=n.SHA256_IV[0]|0,this.B=n.SHA256_IV[1]|0,this.C=n.SHA256_IV[2]|0,this.D=n.SHA256_IV[3]|0,this.E=n.SHA256_IV[4]|0,this.F=n.SHA256_IV[5]|0,this.G=n.SHA256_IV[6]|0,this.H=n.SHA256_IV[7]|0}get(){const{A:O,B:$,C:N,D:j,E:F,F:G,G:q,H:W}=this;return[O,$,N,j,F,G,q,W]}set(O,$,N,j,F,G,q,W){this.A=O|0,this.B=$|0,this.C=N|0,this.D=j|0,this.E=F|0,this.F=G|0,this.G=q|0,this.H=W|0}process(O,$){for(let k=0;k<16;k++,$+=4)r[k]=O.getUint32($,!1);for(let k=16;k<64;k++){const X=r[k-15],Z=r[k-2],P=(0,e.rotr)(X,7)^(0,e.rotr)(X,18)^X>>>3,U=(0,e.rotr)(Z,17)^(0,e.rotr)(Z,19)^Z>>>10;r[k]=U+r[k-7]+P+r[k-16]|0}let{A:N,B:j,C:F,D:G,E:q,F:W,G:Q,H:et}=this;for(let k=0;k<64;k++){const X=(0,e.rotr)(q,6)^(0,e.rotr)(q,11)^(0,e.rotr)(q,25),Z=et+X+(0,n.Chi)(q,W,Q)+s[k]+r[k]|0,U=((0,e.rotr)(N,2)^(0,e.rotr)(N,13)^(0,e.rotr)(N,22))+(0,n.Maj)(N,j,F)|0;et=Q,Q=W,W=q,q=G+Z|0,G=F,F=j,j=N,N=Z+U|0}N=N+this.A|0,j=j+this.B|0,F=F+this.C|0,G=G+this.D|0,q=q+this.E|0,W=W+this.F|0,Q=Q+this.G|0,et=et+this.H|0,this.set(N,j,F,G,q,W,Q,et)}roundClean(){(0,e.clean)(r)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,e.clean)(this.buffer)}}Xe.SHA256=a;class u extends a{constructor(){super(28),this.A=n.SHA224_IV[0]|0,this.B=n.SHA224_IV[1]|0,this.C=n.SHA224_IV[2]|0,this.D=n.SHA224_IV[3]|0,this.E=n.SHA224_IV[4]|0,this.F=n.SHA224_IV[5]|0,this.G=n.SHA224_IV[6]|0,this.H=n.SHA224_IV[7]|0}}Xe.SHA224=u;const h=t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(z=>BigInt(z))),p=h[0],m=h[1],y=new Uint32Array(80),_=new Uint32Array(80);class b extends n.HashMD{constructor(O=64){super(128,O,16,!1),this.Ah=n.SHA512_IV[0]|0,this.Al=n.SHA512_IV[1]|0,this.Bh=n.SHA512_IV[2]|0,this.Bl=n.SHA512_IV[3]|0,this.Ch=n.SHA512_IV[4]|0,this.Cl=n.SHA512_IV[5]|0,this.Dh=n.SHA512_IV[6]|0,this.Dl=n.SHA512_IV[7]|0,this.Eh=n.SHA512_IV[8]|0,this.El=n.SHA512_IV[9]|0,this.Fh=n.SHA512_IV[10]|0,this.Fl=n.SHA512_IV[11]|0,this.Gh=n.SHA512_IV[12]|0,this.Gl=n.SHA512_IV[13]|0,this.Hh=n.SHA512_IV[14]|0,this.Hl=n.SHA512_IV[15]|0}get(){const{Ah:O,Al:$,Bh:N,Bl:j,Ch:F,Cl:G,Dh:q,Dl:W,Eh:Q,El:et,Fh:k,Fl:X,Gh:Z,Gl:P,Hh:U,Hl:K}=this;return[O,$,N,j,F,G,q,W,Q,et,k,X,Z,P,U,K]}set(O,$,N,j,F,G,q,W,Q,et,k,X,Z,P,U,K){this.Ah=O|0,this.Al=$|0,this.Bh=N|0,this.Bl=j|0,this.Ch=F|0,this.Cl=G|0,this.Dh=q|0,this.Dl=W|0,this.Eh=Q|0,this.El=et|0,this.Fh=k|0,this.Fl=X|0,this.Gh=Z|0,this.Gl=P|0,this.Hh=U|0,this.Hl=K|0}process(O,$){for(let I=0;I<16;I++,$+=4)y[I]=O.getUint32($),_[I]=O.getUint32($+=4);for(let I=16;I<80;I++){const Y=y[I-15]|0,at=_[I-15]|0,mt=t.rotrSH(Y,at,1)^t.rotrSH(Y,at,8)^t.shrSH(Y,at,7),gt=t.rotrSL(Y,at,1)^t.rotrSL(Y,at,8)^t.shrSL(Y,at,7),yt=y[I-2]|0,kt=_[I-2]|0,Mt=t.rotrSH(yt,kt,19)^t.rotrBH(yt,kt,61)^t.shrSH(yt,kt,6),oe=t.rotrSL(yt,kt,19)^t.rotrBL(yt,kt,61)^t.shrSL(yt,kt,6),Ne=t.add4L(gt,oe,_[I-7],_[I-16]),Be=t.add4H(Ne,mt,Mt,y[I-7],y[I-16]);y[I]=Be|0,_[I]=Ne|0}let{Ah:N,Al:j,Bh:F,Bl:G,Ch:q,Cl:W,Dh:Q,Dl:et,Eh:k,El:X,Fh:Z,Fl:P,Gh:U,Gl:K,Hh:D,Hl:V}=this;for(let I=0;I<80;I++){const Y=t.rotrSH(k,X,14)^t.rotrSH(k,X,18)^t.rotrBH(k,X,41),at=t.rotrSL(k,X,14)^t.rotrSL(k,X,18)^t.rotrBL(k,X,41),mt=k&Z^~k&U,gt=X&P^~X&K,yt=t.add5L(V,at,gt,m[I],_[I]),kt=t.add5H(yt,D,Y,mt,p[I],y[I]),Mt=yt|0,oe=t.rotrSH(N,j,28)^t.rotrBH(N,j,34)^t.rotrBH(N,j,39),Ne=t.rotrSL(N,j,28)^t.rotrBL(N,j,34)^t.rotrBL(N,j,39),Be=N&F^N&q^F&q,sn=j&G^j&W^G&W;D=U|0,V=K|0,U=Z|0,K=P|0,Z=k|0,P=X|0,{h:k,l:X}=t.add(Q|0,et|0,kt|0,Mt|0),Q=q|0,et=W|0,q=F|0,W=G|0,F=N|0,G=j|0;const ni=t.add3L(Mt,Ne,sn);N=t.add3H(ni,kt,oe,Be),j=ni|0}({h:N,l:j}=t.add(this.Ah|0,this.Al|0,N|0,j|0)),{h:F,l:G}=t.add(this.Bh|0,this.Bl|0,F|0,G|0),{h:q,l:W}=t.add(this.Ch|0,this.Cl|0,q|0,W|0),{h:Q,l:et}=t.add(this.Dh|0,this.Dl|0,Q|0,et|0),{h:k,l:X}=t.add(this.Eh|0,this.El|0,k|0,X|0),{h:Z,l:P}=t.add(this.Fh|0,this.Fl|0,Z|0,P|0),{h:U,l:K}=t.add(this.Gh|0,this.Gl|0,U|0,K|0),{h:D,l:V}=t.add(this.Hh|0,this.Hl|0,D|0,V|0),this.set(N,j,F,G,q,W,Q,et,k,X,Z,P,U,K,D,V)}roundClean(){(0,e.clean)(y,_)}destroy(){(0,e.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Xe.SHA512=b;class S extends b{constructor(){super(48),this.Ah=n.SHA384_IV[0]|0,this.Al=n.SHA384_IV[1]|0,this.Bh=n.SHA384_IV[2]|0,this.Bl=n.SHA384_IV[3]|0,this.Ch=n.SHA384_IV[4]|0,this.Cl=n.SHA384_IV[5]|0,this.Dh=n.SHA384_IV[6]|0,this.Dl=n.SHA384_IV[7]|0,this.Eh=n.SHA384_IV[8]|0,this.El=n.SHA384_IV[9]|0,this.Fh=n.SHA384_IV[10]|0,this.Fl=n.SHA384_IV[11]|0,this.Gh=n.SHA384_IV[12]|0,this.Gl=n.SHA384_IV[13]|0,this.Hh=n.SHA384_IV[14]|0,this.Hl=n.SHA384_IV[15]|0}}Xe.SHA384=S;const x=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),A=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class E extends b{constructor(){super(28),this.Ah=x[0]|0,this.Al=x[1]|0,this.Bh=x[2]|0,this.Bl=x[3]|0,this.Ch=x[4]|0,this.Cl=x[5]|0,this.Dh=x[6]|0,this.Dl=x[7]|0,this.Eh=x[8]|0,this.El=x[9]|0,this.Fh=x[10]|0,this.Fl=x[11]|0,this.Gh=x[12]|0,this.Gl=x[13]|0,this.Hh=x[14]|0,this.Hl=x[15]|0}}Xe.SHA512_224=E;class R extends b{constructor(){super(32),this.Ah=A[0]|0,this.Al=A[1]|0,this.Bh=A[2]|0,this.Bl=A[3]|0,this.Ch=A[4]|0,this.Cl=A[5]|0,this.Dh=A[6]|0,this.Dl=A[7]|0,this.Eh=A[8]|0,this.El=A[9]|0,this.Fh=A[10]|0,this.Fl=A[11]|0,this.Gh=A[12]|0,this.Gl=A[13]|0,this.Hh=A[14]|0,this.Hl=A[15]|0}}return Xe.SHA512_256=R,Xe.sha256=(0,e.createHasher)(()=>new a),Xe.sha224=(0,e.createHasher)(()=>new u),Xe.sha512=(0,e.createHasher)(()=>new b),Xe.sha384=(0,e.createHasher)(()=>new S),Xe.sha512_256=(0,e.createHasher)(()=>new R),Xe.sha512_224=(0,e.createHasher)(()=>new E),Xe}var jS;function S6(){if(jS)return ir;jS=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.sha224=ir.SHA224=ir.sha256=ir.SHA256=void 0;const n=x6();return ir.SHA256=n.SHA256,ir.sha256=n.sha256,ir.SHA224=n.SHA224,ir.sha224=n.sha224,ir}var w0,qS;function T6(){if(qS)return w0;qS=1;function n(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),s=0;s<e.length;s++)e[s]=255;for(var r=0;r<t.length;r++){var a=t.charAt(r),u=a.charCodeAt(0);if(e[u]!==255)throw new TypeError(a+" is ambiguous");e[u]=r}var h=t.length,p=t.charAt(0),m=Math.log(h)/Math.log(256),y=Math.log(256)/Math.log(h);function _(x){if(x instanceof Uint8Array||(ArrayBuffer.isView(x)?x=new Uint8Array(x.buffer,x.byteOffset,x.byteLength):Array.isArray(x)&&(x=Uint8Array.from(x))),!(x instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(x.length===0)return"";for(var A=0,E=0,R=0,z=x.length;R!==z&&x[R]===0;)R++,A++;for(var O=(z-R)*y+1>>>0,$=new Uint8Array(O);R!==z;){for(var N=x[R],j=0,F=O-1;(N!==0||j<E)&&F!==-1;F--,j++)N+=256*$[F]>>>0,$[F]=N%h>>>0,N=N/h>>>0;if(N!==0)throw new Error("Non-zero carry");E=j,R++}for(var G=O-E;G!==O&&$[G]===0;)G++;for(var q=p.repeat(A);G<O;++G)q+=t.charAt($[G]);return q}function b(x){if(typeof x!="string")throw new TypeError("Expected String");if(x.length===0)return new Uint8Array;for(var A=0,E=0,R=0;x[A]===p;)E++,A++;for(var z=(x.length-A)*m+1>>>0,O=new Uint8Array(z);x[A];){var $=x.charCodeAt(A);if($>255)return;var N=e[$];if(N===255)return;for(var j=0,F=z-1;(N!==0||j<R)&&F!==-1;F--,j++)N+=h*O[F]>>>0,O[F]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");R=j,A++}for(var G=z-R;G!==z&&O[G]===0;)G++;for(var q=new Uint8Array(E+(z-G)),W=E;G!==z;)q[W++]=O[G++];return q}function S(x){var A=b(x);if(A)return A;throw new Error("Non-base"+h+" character")}return{encode:_,decodeUnsafe:b,decode:S}}return w0=n,w0}var x0,GS;function A6(){return GS||(GS=1,x0=T6()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),x0}var S0,ZS;function E6(){if(ZS)return S0;ZS=1;var n=A6();return S0=function(t){function e(u){var h=Uint8Array.from(u),p=t(h),m=h.length+4,y=new Uint8Array(m);return y.set(h,0),y.set(p.subarray(0,4),h.length),n.encode(y,m)}function s(u){var h=u.slice(0,-4),p=u.slice(-4),m=t(h);if(!(p[0]^m[0]|p[1]^m[1]|p[2]^m[2]|p[3]^m[3]))return h}function r(u){var h=n.decodeUnsafe(u);if(h)return s(h)}function a(u){var h=n.decode(u),p=s(h);if(!p)throw new Error("Invalid checksum");return p}return{encode:e,decode:a,decodeUnsafe:r}},S0}var T0,WS;function C6(){if(WS)return T0;WS=1;var{sha256:n}=S6(),t=E6();function e(s){return n(n(s))}return T0=t(e),T0}var L6=C6();const Wl=Jh(L6),M6=n=>{if(n.length%2!==0)throw new Error("Hex string must have an even length");const t=new Uint8Array(n.length/2);for(let e=0;e<n.length;e+=2)t[e>>1]=parseInt(n.slice(e,e+2),16);return t},RA=n=>Array.from(n,t=>t.toString(16).padStart(2,"0")).join(""),qp="automerge:",$c=n=>{const[t,e,...s]=n.split("#");if(s.length>0)throw new Error("Invalid URL: contains multiple heads sections");const r=new RegExp(`^${qp}(\\w+)$`),[,a]=t.match(r)||[],u=a,h=zA(u);if(!h)throw new Error("Invalid document URL: "+n);if(e===void 0)return{binaryDocumentId:h,documentId:u};const p=e===""?[]:e.split("|"),m=p.map(y=>{try{return RA(Wl.decode(y))}catch{throw new Error(`Invalid head in URL: ${y}`)}});return{binaryDocumentId:h,hexHeads:m,documentId:u,heads:p}},IA=n=>{if(n instanceof Uint8Array||typeof n=="string")return qp+(n instanceof Uint8Array?Xh(n):n);const{documentId:t,heads:e=void 0}=n;if(t===void 0)throw new Error("Invalid documentId: "+t);const s=t instanceof Uint8Array?Xh(t):t;let r=`${qp}${s}`;return e!==void 0&&(e.forEach(a=>{try{Wl.decode(a)}catch{throw new Error(`Invalid head: ${a}`)}}),r+="#"+e.join("|")),r},NA=n=>{if(typeof n!="string"||!n||!n.startsWith(qp))return!1;try{const{documentId:t,heads:e}=$c(n);return!(!PA(t)||e&&!e.every(s=>{try{return Wl.decode(s),!0}catch{return!1}}))}catch{return!1}},PA=n=>typeof n!="string"?!1:zA(n)!==void 0,k6=n=>typeof n=="string"&&kA(n),FS=()=>{const n=OA(null,new Uint8Array(16));return IA({documentId:n})},zA=n=>Wl.decodeUnsafe(n),Xh=n=>Wl.encode(n),rr=n=>n.map(t=>Wl.encode(M6(t))),Aa=n=>n.map(t=>RA(Wl.decode(t))),$d=n=>{if(n instanceof Uint8Array)return Xh(n);if(NA(n))return $c(n).documentId;if(PA(n))return n;if(k6(n)){console.warn("Future versions will not support UUIDs as document IDs; use Automerge URLs instead.");const t=g6(n);return Xh(t)}throw new Error(`Invalid AutomergeUrl: '${n}'`)};let ly;try{ly=new TextDecoder}catch{}let Gt,Nl,wt=0;const O6=105,D6=57342,R6=57343,YS=57337,XS=6,Uc={};let Th=11281e4,So=1681e4,be={},vn,Gp,Zp=0,Qh=0,Zn,Ns,zn=[],cy=[],Yi,Ai,Ch,QS={useRecords:!1,mapsAsObjects:!0},$h=!1,UA=2;try{new Function("")}catch{UA=1/0}class Kh{constructor(t){if(t&&((t.keyMap||t._keyMap)&&!t.useRecords&&(t.useRecords=!1,t.mapsAsObjects=!0),t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.getStructures&&(t.getShared=t.getStructures),t.getShared&&!t.structures&&((t.structures=[]).uninitialized=!0),t.keyMap)){this.mapKey=new Map;for(let[e,s]of Object.entries(t.keyMap))this.mapKey.set(s,e)}Object.assign(this,t)}decodeKey(t){return this.keyMap&&this.mapKey.get(t)||t}encodeKey(t){return this.keyMap&&this.keyMap.hasOwnProperty(t)?this.keyMap[t]:t}encodeKeys(t){if(!this._keyMap)return t;let e=new Map;for(let[s,r]of Object.entries(t))e.set(this._keyMap.hasOwnProperty(s)?this._keyMap[s]:s,r);return e}decodeKeys(t){if(!this._keyMap||t.constructor.name!="Map")return t;if(!this._mapKey){this._mapKey=new Map;for(let[s,r]of Object.entries(this._keyMap))this._mapKey.set(r,s)}let e={};return t.forEach((s,r)=>e[Ps(this._mapKey.has(r)?this._mapKey.get(r):r)]=s),e}mapDecode(t,e){let s=this.decode(t);return this._keyMap&&s.constructor.name==="Array"?s.map(r=>this.decodeKeys(r)):s}decode(t,e){if(Gt)return jA(()=>(dy(),this?this.decode(t,e):Kh.prototype.decode.call(QS,t,e)));Nl=e>-1?e:t.length,wt=0,Qh=0,Gp=null,Zn=null,Gt=t;try{Ai=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(s){throw Gt=null,t instanceof Uint8Array?s:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof Kh){if(be=this,Yi=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return vn=this.structures,Kd();(!vn||vn.length>0)&&(vn=[])}else be=QS,(!vn||vn.length>0)&&(vn=[]),Yi=null;return Kd()}decodeMultiple(t,e){let s,r=0;try{let a=t.length;$h=!0;let u=this?this.decode(t,a):Nv.decode(t,a);if(e){if(e(u)===!1)return;for(;wt<a;)if(r=wt,e(Kd())===!1)return}else{for(s=[u];wt<a;)r=wt,s.push(Kd());return s}}catch(a){throw a.lastPosition=r,a.values=s,a}finally{$h=!1,dy()}}}function Kd(){try{let n=Te();if(Zn){if(wt>=Zn.postBundlePosition){let t=new Error("Unexpected bundle position");throw t.incomplete=!0,t}wt=Zn.postBundlePosition,Zn=null}if(wt==Nl)vn=null,Gt=null,Ns&&(Ns=null);else if(wt>Nl){let t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}else if(!$h)throw new Error("Data read, but end of buffer not reached");return n}catch(n){throw dy(),(n instanceof RangeError||n.message.startsWith("Unexpected end of buffer"))&&(n.incomplete=!0),n}}function Te(){let n=Gt[wt++],t=n>>5;if(n=n&31,n>23)switch(n){case 24:n=Gt[wt++];break;case 25:if(t==7)return z6();n=Ai.getUint16(wt),wt+=2;break;case 26:if(t==7){let e=Ai.getFloat32(wt);if(be.useFloat32>2){let s=Iv[(Gt[wt]&127)<<1|Gt[wt+1]>>7];return wt+=4,(s*e+(e>0?.5:-.5)>>0)/s}return wt+=4,e}n=Ai.getUint32(wt),wt+=4;break;case 27:if(t==7){let e=Ai.getFloat64(wt);return wt+=8,e}if(t>1){if(Ai.getUint32(wt)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");n=Ai.getUint32(wt+4)}else be.int64AsNumber?(n=Ai.getUint32(wt)*4294967296,n+=Ai.getUint32(wt+4)):n=Ai.getBigUint64(wt);wt+=8;break;case 31:switch(t){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let e=[],s,r=0;for(;(s=Te())!=Uc;){if(r>=Th)throw new Error(`Array length exceeds ${Th}`);e[r++]=s}return t==4?e:t==3?e.join(""):Buffer.concat(e);case 5:let a;if(be.mapsAsObjects){let u={},h=0;if(be.keyMap)for(;(a=Te())!=Uc;){if(h++>=So)throw new Error(`Property count exceeds ${So}`);u[Ps(be.decodeKey(a))]=Te()}else for(;(a=Te())!=Uc;){if(h++>=So)throw new Error(`Property count exceeds ${So}`);u[Ps(a)]=Te()}return u}else{Ch&&(be.mapsAsObjects=!0,Ch=!1);let u=new Map;if(be.keyMap){let h=0;for(;(a=Te())!=Uc;){if(h++>=So)throw new Error(`Map size exceeds ${So}`);u.set(be.decodeKey(a),Te())}}else{let h=0;for(;(a=Te())!=Uc;){if(h++>=So)throw new Error(`Map size exceeds ${So}`);u.set(a,Te())}}return u}case 7:return Uc;default:throw new Error("Invalid major type for indefinite length "+t)}default:throw new Error("Unknown token "+n)}switch(t){case 0:return n;case 1:return~n;case 2:return P6(n);case 3:if(Qh>=wt)return Gp.slice(wt-Zp,(wt+=n)-Zp);if(Qh==0&&Nl<140&&n<32){let r=n<16?BA(n):N6(n);if(r!=null)return r}return I6(n);case 4:if(n>=Th)throw new Error(`Array length exceeds ${Th}`);let e=new Array(n);for(let r=0;r<n;r++)e[r]=Te();return e;case 5:if(n>=So)throw new Error(`Map size exceeds ${Th}`);if(be.mapsAsObjects){let r={};if(be.keyMap)for(let a=0;a<n;a++)r[Ps(be.decodeKey(Te()))]=Te();else for(let a=0;a<n;a++)r[Ps(Te())]=Te();return r}else{Ch&&(be.mapsAsObjects=!0,Ch=!1);let r=new Map;if(be.keyMap)for(let a=0;a<n;a++)r.set(be.decodeKey(Te()),Te());else for(let a=0;a<n;a++)r.set(Te(),Te());return r}case 6:if(n>=YS){let r=vn[n&8191];if(r)return r.read||(r.read=uy(r)),r.read();if(n<65536){if(n==R6){let a=Qc(),u=Te(),h=Te();fy(u,h);let p={};if(be.keyMap)for(let m=2;m<a;m++){let y=be.decodeKey(h[m-2]);p[Ps(y)]=Te()}else for(let m=2;m<a;m++){let y=h[m-2];p[Ps(y)]=Te()}return p}else if(n==D6){let a=Qc(),u=Te();for(let h=2;h<a;h++)fy(u++,Te());return Te()}else if(n==YS)return q6();if(be.getShared&&(Rv(),r=vn[n&8191],r))return r.read||(r.read=uy(r)),r.read()}}let s=zn[n];if(s)return s.handlesRead?s(Te):s(Te());{let r=Te();for(let a=0;a<cy.length;a++){let u=cy[a](n,r);if(u!==void 0)return u}return new Hl(r,n)}case 7:switch(n){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:let r=(Yi||Al())[n];if(r!==void 0)return r;throw new Error("Unknown token "+n)}default:if(isNaN(n)){let r=new Error("Unexpected end of CBOR data");throw r.incomplete=!0,r}throw new Error("Unknown CBOR token "+n)}}const $S=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function uy(n){if(!n)throw new Error("Structure is required in record definition");function t(){let e=Gt[wt++];if(e=e&31,e>23)switch(e){case 24:e=Gt[wt++];break;case 25:e=Ai.getUint16(wt),wt+=2;break;case 26:e=Ai.getUint32(wt),wt+=4;break;default:throw new Error("Expected array header, but got "+Gt[wt-1])}let s=this.compiledReader;for(;s;){if(s.propertyCount===e)return s(Te);s=s.next}if(this.slowReads++>=UA){let a=this.length==e?this:this.slice(0,e);return s=be.keyMap?new Function("r","return {"+a.map(u=>be.decodeKey(u)).map(u=>$S.test(u)?Ps(u)+":r()":"["+JSON.stringify(u)+"]:r()").join(",")+"}"):new Function("r","return {"+a.map(u=>$S.test(u)?Ps(u)+":r()":"["+JSON.stringify(u)+"]:r()").join(",")+"}"),this.compiledReader&&(s.next=this.compiledReader),s.propertyCount=e,this.compiledReader=s,s(Te)}let r={};if(be.keyMap)for(let a=0;a<e;a++)r[Ps(be.decodeKey(this[a]))]=Te();else for(let a=0;a<e;a++)r[Ps(this[a])]=Te();return r}return n.slowReads=0,t}function Ps(n){if(typeof n=="string")return n==="__proto__"?"__proto_":n;if(typeof n=="number"||typeof n=="boolean"||typeof n=="bigint")return n.toString();if(n==null)return n+"";throw new Error("Invalid property name type "+typeof n)}let I6=hy;function hy(n){let t;if(n<16&&(t=BA(n)))return t;if(n>64&&ly)return ly.decode(Gt.subarray(wt,wt+=n));const e=wt+n,s=[];for(t="";wt<e;){const r=Gt[wt++];if((r&128)===0)s.push(r);else if((r&224)===192){const a=Gt[wt++]&63;s.push((r&31)<<6|a)}else if((r&240)===224){const a=Gt[wt++]&63,u=Gt[wt++]&63;s.push((r&31)<<12|a<<6|u)}else if((r&248)===240){const a=Gt[wt++]&63,u=Gt[wt++]&63,h=Gt[wt++]&63;let p=(r&7)<<18|a<<12|u<<6|h;p>65535&&(p-=65536,s.push(p>>>10&1023|55296),p=56320|p&1023),s.push(p)}else s.push(r);s.length>=4096&&(t+=Kn.apply(String,s),s.length=0)}return s.length>0&&(t+=Kn.apply(String,s)),t}let Kn=String.fromCharCode;function N6(n){let t=wt,e=new Array(n);for(let s=0;s<n;s++){const r=Gt[wt++];if((r&128)>0){wt=t;return}e[s]=r}return Kn.apply(String,e)}function BA(n){if(n<4)if(n<2){if(n===0)return"";{let t=Gt[wt++];if((t&128)>1){wt-=1;return}return Kn(t)}}else{let t=Gt[wt++],e=Gt[wt++];if((t&128)>0||(e&128)>0){wt-=2;return}if(n<3)return Kn(t,e);let s=Gt[wt++];if((s&128)>0){wt-=3;return}return Kn(t,e,s)}else{let t=Gt[wt++],e=Gt[wt++],s=Gt[wt++],r=Gt[wt++];if((t&128)>0||(e&128)>0||(s&128)>0||(r&128)>0){wt-=4;return}if(n<6){if(n===4)return Kn(t,e,s,r);{let a=Gt[wt++];if((a&128)>0){wt-=5;return}return Kn(t,e,s,r,a)}}else if(n<8){let a=Gt[wt++],u=Gt[wt++];if((a&128)>0||(u&128)>0){wt-=6;return}if(n<7)return Kn(t,e,s,r,a,u);let h=Gt[wt++];if((h&128)>0){wt-=7;return}return Kn(t,e,s,r,a,u,h)}else{let a=Gt[wt++],u=Gt[wt++],h=Gt[wt++],p=Gt[wt++];if((a&128)>0||(u&128)>0||(h&128)>0||(p&128)>0){wt-=8;return}if(n<10){if(n===8)return Kn(t,e,s,r,a,u,h,p);{let m=Gt[wt++];if((m&128)>0){wt-=9;return}return Kn(t,e,s,r,a,u,h,p,m)}}else if(n<12){let m=Gt[wt++],y=Gt[wt++];if((m&128)>0||(y&128)>0){wt-=10;return}if(n<11)return Kn(t,e,s,r,a,u,h,p,m,y);let _=Gt[wt++];if((_&128)>0){wt-=11;return}return Kn(t,e,s,r,a,u,h,p,m,y,_)}else{let m=Gt[wt++],y=Gt[wt++],_=Gt[wt++],b=Gt[wt++];if((m&128)>0||(y&128)>0||(_&128)>0||(b&128)>0){wt-=12;return}if(n<14){if(n===12)return Kn(t,e,s,r,a,u,h,p,m,y,_,b);{let S=Gt[wt++];if((S&128)>0){wt-=13;return}return Kn(t,e,s,r,a,u,h,p,m,y,_,b,S)}}else{let S=Gt[wt++],x=Gt[wt++];if((S&128)>0||(x&128)>0){wt-=14;return}if(n<15)return Kn(t,e,s,r,a,u,h,p,m,y,_,b,S,x);let A=Gt[wt++];if((A&128)>0){wt-=15;return}return Kn(t,e,s,r,a,u,h,p,m,y,_,b,S,x,A)}}}}}function P6(n){return be.copyBuffers?Uint8Array.prototype.slice.call(Gt,wt,wt+=n):Gt.subarray(wt,wt+=n)}let HA=new Float32Array(1),Jd=new Uint8Array(HA.buffer,0,4);function z6(){let n=Gt[wt++],t=Gt[wt++],e=(n&127)>>2;if(e===31)return t||n&3?NaN:n&128?-1/0:1/0;if(e===0){let s=((n&3)<<8|t)/16777216;return n&128?-s:s}return Jd[3]=n&128|(e>>1)+56,Jd[2]=(n&7)<<5|t>>3,Jd[1]=t<<5,Jd[0]=0,HA[0]}new Array(4096);class Hl{constructor(t,e){this.value=t,this.tag=e}}zn[0]=n=>new Date(n);zn[1]=n=>new Date(Math.round(n*1e3));zn[2]=n=>{let t=BigInt(0);for(let e=0,s=n.byteLength;e<s;e++)t=BigInt(n[e])+(t<<BigInt(8));return t};zn[3]=n=>BigInt(-1)-zn[2](n);zn[4]=n=>+(n[1]+"e"+n[0]);zn[5]=n=>n[1]*Math.exp(n[0]*Math.log(2));const fy=(n,t)=>{n=n-57344;let e=vn[n];e&&e.isShared&&((vn.restoreStructures||(vn.restoreStructures=[]))[n]=e),vn[n]=t,t.read=uy(t)};zn[O6]=n=>{let t=n.length,e=n[1];fy(n[0],e);let s={};for(let r=2;r<t;r++){let a=e[r-2];s[Ps(a)]=n[r]}return s};zn[14]=n=>Zn?Zn[0].slice(Zn.position0,Zn.position0+=n):new Hl(n,14);zn[15]=n=>Zn?Zn[1].slice(Zn.position1,Zn.position1+=n):new Hl(n,15);let U6={Error,RegExp};zn[27]=n=>(U6[n[0]]||Error)(n[1],n[2]);const VA=n=>{if(Gt[wt++]!=132){let e=new Error("Packed values structure must be followed by a 4 element array");throw Gt.length<wt&&(e.incomplete=!0),e}let t=n();if(!t||!t.length){let e=new Error("Packed values structure must be followed by a 4 element array");throw e.incomplete=!0,e}return Yi=Yi?t.concat(Yi.slice(t.length)):t,Yi.prefixes=n(),Yi.suffixes=n(),n()};VA.handlesRead=!0;zn[51]=VA;zn[XS]=n=>{if(!Yi)if(be.getShared)Rv();else return new Hl(n,XS);if(typeof n=="number")return Yi[16+(n>=0?2*n:-2*n-1)];let t=new Error("No support for non-integer packed references yet");throw n===void 0&&(t.incomplete=!0),t};zn[28]=n=>{Ns||(Ns=new Map,Ns.id=0);let t=Ns.id++,e=wt,s=Gt[wt],r;s>>5==4?r=[]:r={};let a={target:r};Ns.set(t,a);let u=n();return a.used?(Object.getPrototypeOf(r)!==Object.getPrototypeOf(u)&&(wt=e,r=u,Ns.set(t,{target:r}),u=n()),Object.assign(r,u)):(a.target=u,u)};zn[28].handlesRead=!0;zn[29]=n=>{let t=Ns.get(n);return t.used=!0,t.target};zn[258]=n=>new Set(n);(zn[259]=n=>(be.mapsAsObjects&&(be.mapsAsObjects=!1,Ch=!0),n())).handlesRead=!0;function Bc(n,t){return typeof n=="string"?n+t:n instanceof Array?n.concat(t):Object.assign({},n,t)}function Al(){if(!Yi)if(be.getShared)Rv();else throw new Error("No packed values available");return Yi}const B6=1399353956;cy.push((n,t)=>{if(n>=225&&n<=255)return Bc(Al().prefixes[n-224],t);if(n>=28704&&n<=32767)return Bc(Al().prefixes[n-28672],t);if(n>=1879052288&&n<=2147483647)return Bc(Al().prefixes[n-1879048192],t);if(n>=216&&n<=223)return Bc(t,Al().suffixes[n-216]);if(n>=27647&&n<=28671)return Bc(t,Al().suffixes[n-27639]);if(n>=1811940352&&n<=1879048191)return Bc(t,Al().suffixes[n-1811939328]);if(n==B6)return{packedValues:Yi,structures:vn.slice(0),version:t};if(n==55799)return t});const H6=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,KS=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],V6=[64,68,69,70,71,72,77,78,79,85,86];for(let n=0;n<KS.length;n++)j6(KS[n],V6[n]);function j6(n,t){let e="get"+n.name.slice(0,-5),s;typeof n=="function"?s=n.BYTES_PER_ELEMENT:n=null;for(let r=0;r<2;r++){if(!r&&s==1)continue;let a=s==2?1:s==4?2:s==8?3:0;zn[r?t:t-4]=s==1||r==H6?u=>{if(!n)throw new Error("Could not find typed array for code "+t);return!be.copyBuffers&&(s===1||s===2&&!(u.byteOffset&1)||s===4&&!(u.byteOffset&3)||s===8&&!(u.byteOffset&7))?new n(u.buffer,u.byteOffset,u.byteLength>>a):new n(Uint8Array.prototype.slice.call(u,0).buffer)}:u=>{if(!n)throw new Error("Could not find typed array for code "+t);let h=new DataView(u.buffer,u.byteOffset,u.byteLength),p=u.length>>a,m=new n(p),y=h[e];for(let _=0;_<p;_++)m[_]=y.call(h,_<<a,r);return m}}}function q6(){let n=Qc(),t=wt+Te();for(let s=2;s<n;s++){let r=Qc();wt+=r}let e=wt;return wt=t,Zn=[hy(Qc()),hy(Qc())],Zn.position0=0,Zn.position1=0,Zn.postBundlePosition=wt,wt=e,Te()}function Qc(){let n=Gt[wt++]&31;if(n>23)switch(n){case 24:n=Gt[wt++];break;case 25:n=Ai.getUint16(wt),wt+=2;break;case 26:n=Ai.getUint32(wt),wt+=4;break}return n}function Rv(){if(be.getShared){let n=jA(()=>(Gt=null,be.getShared()))||{},t=n.structures||[];be.sharedVersion=n.version,Yi=be.sharedValues=n.packedValues,vn===!0?be.structures=vn=t:vn.splice.apply(vn,[0,t.length].concat(t))}}function jA(n){let t=Nl,e=wt,s=Zp,r=Qh,a=Gp,u=Ns,h=Zn,p=new Uint8Array(Gt.slice(0,Nl)),m=vn,y=be,_=$h,b=n();return Nl=t,wt=e,Zp=s,Qh=r,Gp=a,Ns=u,Zn=h,Gt=p,$h=_,vn=m,be=y,Ai=new DataView(Gt.buffer,Gt.byteOffset,Gt.byteLength),b}function dy(){Gt=null,Ns=null,vn=null}const Iv=new Array(147);for(let n=0;n<256;n++)Iv[n]=+("1e"+Math.floor(45.15-n*.30103));let Nv=new Kh({useRecords:!1});const qA=Nv.decode;Nv.decodeMultiple;let dp;try{dp=new TextEncoder}catch{}let py,GA;const Mm=typeof globalThis=="object"&&globalThis.Buffer,vf=typeof Mm<"u",A0=vf?Mm.allocUnsafeSlow:Uint8Array,JS=vf?Mm:Uint8Array,t2=256,e2=vf?4294967296:2144337920;let E0,ut,en,it=0,xa,qn=null;const G6=61440,Z6=/[\u0080-\uFFFF]/,hs=Symbol("record-id");class ZA extends Kh{constructor(t){super(t),this.offset=0;let e,s,r,a,u;t=t||{};let h=JS.prototype.utf8Write?function(k,X,Z){return ut.utf8Write(k,X,Z)}:dp&&dp.encodeInto?function(k,X){return dp.encodeInto(k,ut.subarray(X)).written}:!1,p=this,m=t.structures||t.saveStructures,y=t.maxSharedStructures;if(y==null&&(y=m?128:0),y>8190)throw new Error("Maximum maxSharedStructure is 8190");let _=t.sequential;_&&(y=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let b,S,x=t.sharedValues,A;if(x){A=Object.create(null);for(let k=0,X=x.length;k<X;k++)A[x[k]]=k}let E=[],R=0,z=0;this.mapEncode=function(k,X){return this._keyMap&&!this._mapped&&k.constructor.name==="Array"&&(k=k.map(Z=>this.encodeKeys(Z))),this.encode(k,X)},this.encode=function(k,X){if(ut||(ut=new A0(8192),en=new DataView(ut.buffer,0,8192),it=0),xa=ut.length-10,xa-it<2048?(ut=new A0(ut.length),en=new DataView(ut.buffer,0,ut.length),xa=ut.length-10,it=0):X===s2&&(it=it+7&2147483640),e=it,p.useSelfDescribedHeader&&(en.setUint32(it,3654940416),it+=3),u=p.structuredClone?new Map:null,p.bundleStrings&&typeof k!="string"?(qn=[],qn.size=1/0):qn=null,s=p.structures,s){if(s.uninitialized){let P=p.getShared()||{};p.structures=s=P.structures||[],p.sharedVersion=P.version;let U=p.sharedValues=P.packedValues;if(U){A={};for(let K=0,D=U.length;K<D;K++)A[U[K]]=K}}let Z=s.length;if(Z>y&&!_&&(Z=y),!s.transitions){s.transitions=Object.create(null);for(let P=0;P<Z;P++){let U=s[P];if(!U)continue;let K,D=s.transitions;for(let V=0,I=U.length;V<I;V++){D[hs]===void 0&&(D[hs]=P);let Y=U[V];K=D[Y],K||(K=D[Y]=Object.create(null)),D=K}D[hs]=P|1048576}}_||(s.nextId=Z)}if(r&&(r=!1),a=s||[],S=A,t.pack){let Z=new Map;if(Z.values=[],Z.encoder=p,Z.maxValues=t.maxPrivatePackedValues||(A?16:1/0),Z.objectMap=A||!1,Z.samplingPackedValues=b,pp(k,Z),Z.values.length>0){ut[it++]=216,ut[it++]=51,Nr(4);let P=Z.values;O(P),Nr(0),Nr(0),S=Object.create(A||null);for(let U=0,K=P.length;U<K;U++)S[P[U]]=U}}E0=X&L0;try{if(E0)return;if(O(k),qn&&i2(e,O),p.offset=it,u&&u.idsToInsert){it+=u.idsToInsert.length*2,it>xa&&N(it),p.offset=it;let Z=Y6(ut.subarray(e,it),u.idsToInsert);return u=null,Z}return X&s2?(ut.start=e,ut.end=it,ut):ut.subarray(e,it)}finally{if(s){if(z<10&&z++,s.length>y&&(s.length=y),R>1e4)s.transitions=null,z=0,R=0,E.length>0&&(E=[]);else if(E.length>0&&!_){for(let Z=0,P=E.length;Z<P;Z++)E[Z][hs]=void 0;E=[]}}if(r&&p.saveShared){p.structures.length>y&&(p.structures=p.structures.slice(0,y));let Z=ut.subarray(e,it);return p.updateSharedData()===!1?p.encode(k):Z}X&X6&&(it=e)}},this.findCommonStringsToPack=()=>(b=new Map,A||(A=Object.create(null)),k=>{let X=k&&k.threshold||4,Z=this.pack?k.maxPrivatePackedValues||16:0;x||(x=this.sharedValues=[]);for(let[P,U]of b)U.count>X&&(A[P]=Z++,x.push(P),r=!0);for(;this.saveShared&&this.updateSharedData()===!1;);b=null});const O=k=>{it>xa&&(ut=N(it));var X=typeof k,Z;if(X==="string"){if(S){let D=S[k];if(D>=0){D<16?ut[it++]=D+224:(ut[it++]=198,D&1?O(15-D>>1):O(D-16>>1));return}else if(b&&!t.pack){let V=b.get(k);V?V.count++:b.set(k,{count:1})}}let P=k.length;if(qn&&P>=4&&P<1024){if((qn.size+=P)>G6){let V,I=(qn[0]?qn[0].length*3+qn[1].length:0)+10;it+I>xa&&(ut=N(it+I)),ut[it++]=217,ut[it++]=223,ut[it++]=249,ut[it++]=qn.position?132:130,ut[it++]=26,V=it-e,it+=4,qn.position&&i2(e,O),qn=["",""],qn.size=0,qn.position=V}let D=Z6.test(k);qn[D?0:1]+=k,ut[it++]=D?206:207,O(P);return}let U;P<32?U=1:P<256?U=2:P<65536?U=3:U=5;let K=P*3;if(it+K>xa&&(ut=N(it+K)),P<64||!h){let D,V,I,Y=it+U;for(D=0;D<P;D++)V=k.charCodeAt(D),V<128?ut[Y++]=V:V<2048?(ut[Y++]=V>>6|192,ut[Y++]=V&63|128):(V&64512)===55296&&((I=k.charCodeAt(D+1))&64512)===56320?(V=65536+((V&1023)<<10)+(I&1023),D++,ut[Y++]=V>>18|240,ut[Y++]=V>>12&63|128,ut[Y++]=V>>6&63|128,ut[Y++]=V&63|128):(ut[Y++]=V>>12|224,ut[Y++]=V>>6&63|128,ut[Y++]=V&63|128);Z=Y-it-U}else Z=h(k,it+U,K);Z<24?ut[it++]=96|Z:Z<256?(U<2&&ut.copyWithin(it+2,it+1,it+1+Z),ut[it++]=120,ut[it++]=Z):Z<65536?(U<3&&ut.copyWithin(it+3,it+2,it+2+Z),ut[it++]=121,ut[it++]=Z>>8,ut[it++]=Z&255):(U<5&&ut.copyWithin(it+5,it+3,it+3+Z),ut[it++]=122,en.setUint32(it,Z),it+=4),it+=Z}else if(X==="number")if(!this.alwaysUseFloat&&k>>>0===k)k<24?ut[it++]=k:k<256?(ut[it++]=24,ut[it++]=k):k<65536?(ut[it++]=25,ut[it++]=k>>8,ut[it++]=k&255):(ut[it++]=26,en.setUint32(it,k),it+=4);else if(!this.alwaysUseFloat&&k>>0===k)k>=-24?ut[it++]=31-k:k>=-256?(ut[it++]=56,ut[it++]=~k):k>=-65536?(ut[it++]=57,en.setUint16(it,~k),it+=2):(ut[it++]=58,en.setUint32(it,~k),it+=4);else{let P;if((P=this.useFloat32)>0&&k<4294967296&&k>=-2147483648){ut[it++]=250,en.setFloat32(it,k);let U;if(P<4||(U=k*Iv[(ut[it]&127)<<1|ut[it+1]>>7])>>0===U){it+=4;return}else it--}ut[it++]=251,en.setFloat64(it,k),it+=8}else if(X==="object")if(!k)ut[it++]=246;else{if(u){let U=u.get(k);if(U){if(ut[it++]=216,ut[it++]=29,ut[it++]=25,!U.references){let K=u.idsToInsert||(u.idsToInsert=[]);U.references=[],K.push(U)}U.references.push(it-e),it+=2;return}else u.set(k,{offset:it-e})}let P=k.constructor;if(P===Object)$(k);else if(P===Array){Z=k.length,Z<24?ut[it++]=128|Z:Nr(Z);for(let U=0;U<Z;U++)O(k[U])}else if(P===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(ut[it++]=217,ut[it++]=1,ut[it++]=3),Z=k.size,Z<24?ut[it++]=160|Z:Z<256?(ut[it++]=184,ut[it++]=Z):Z<65536?(ut[it++]=185,ut[it++]=Z>>8,ut[it++]=Z&255):(ut[it++]=186,en.setUint32(it,Z),it+=4),p.keyMap)for(let[U,K]of k)O(p.encodeKey(U)),O(K);else for(let[U,K]of k)O(U),O(K);else{for(let U=0,K=py.length;U<K;U++){let D=GA[U];if(k instanceof D){let V=py[U],I=V.tag;I==null&&(I=V.getTag&&V.getTag.call(this,k)),I<24?ut[it++]=192|I:I<256?(ut[it++]=216,ut[it++]=I):I<65536?(ut[it++]=217,ut[it++]=I>>8,ut[it++]=I&255):I>-1&&(ut[it++]=218,en.setUint32(it,I),it+=4),V.encode.call(this,k,O,N);return}}if(k[Symbol.iterator]){if(E0){let U=new Error("Iterable should be serialized as iterator");throw U.iteratorNotHandled=!0,U}ut[it++]=159;for(let U of k)O(U);ut[it++]=255;return}if(k[Symbol.asyncIterator]||C0(k)){let U=new Error("Iterable/blob should be serialized as iterator");throw U.iteratorNotHandled=!0,U}if(this.useToJSON&&k.toJSON){const U=k.toJSON();if(U!==k)return O(U)}$(k)}}else if(X==="boolean")ut[it++]=k?245:244;else if(X==="bigint"){if(k<BigInt(1)<<BigInt(64)&&k>=0)ut[it++]=27,en.setBigUint64(it,k);else if(k>-(BigInt(1)<<BigInt(64))&&k<0)ut[it++]=59,en.setBigUint64(it,-k-BigInt(1));else if(this.largeBigIntToFloat)ut[it++]=251,en.setFloat64(it,Number(k));else{k>=BigInt(0)?ut[it++]=194:(ut[it++]=195,k=BigInt(-1)-k);let P=[];for(;k;)P.push(Number(k&BigInt(255))),k>>=BigInt(8);my(new Uint8Array(P.reverse()),N);return}it+=8}else if(X==="undefined")ut[it++]=247;else throw new Error("Unknown type: "+X)},$=this.useRecords===!1?this.variableMapSize?k=>{let X=Object.keys(k),Z=Object.values(k),P=X.length;if(P<24?ut[it++]=160|P:P<256?(ut[it++]=184,ut[it++]=P):P<65536?(ut[it++]=185,ut[it++]=P>>8,ut[it++]=P&255):(ut[it++]=186,en.setUint32(it,P),it+=4),p.keyMap)for(let U=0;U<P;U++)O(p.encodeKey(X[U])),O(Z[U]);else for(let U=0;U<P;U++)O(X[U]),O(Z[U])}:k=>{ut[it++]=185;let X=it-e;it+=2;let Z=0;if(p.keyMap)for(let P in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(P))&&(O(p.encodeKey(P)),O(k[P]),Z++);else for(let P in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(P))&&(O(P),O(k[P]),Z++);ut[X+++e]=Z>>8,ut[X+e]=Z&255}:(k,X)=>{let Z,P=a.transitions||(a.transitions=Object.create(null)),U=0,K=0,D,V;if(this.keyMap){V=Object.keys(k).map(Y=>this.encodeKey(Y)),K=V.length;for(let Y=0;Y<K;Y++){let at=V[Y];Z=P[at],Z||(Z=P[at]=Object.create(null),U++),P=Z}}else for(let Y in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(Y))&&(Z=P[Y],Z||(P[hs]&1048576&&(D=P[hs]&65535),Z=P[Y]=Object.create(null),U++),P=Z,K++);let I=P[hs];if(I!==void 0)I&=65535,ut[it++]=217,ut[it++]=I>>8|224,ut[it++]=I&255;else if(V||(V=P.__keys__||(P.__keys__=Object.keys(k))),D===void 0?(I=a.nextId++,I||(I=0,a.nextId=1),I>=t2&&(a.nextId=(I=y)+1)):I=D,a[I]=V,I<y){ut[it++]=217,ut[it++]=I>>8|224,ut[it++]=I&255,P=a.transitions;for(let Y=0;Y<K;Y++)(P[hs]===void 0||P[hs]&1048576)&&(P[hs]=I),P=P[V[Y]];P[hs]=I|1048576,r=!0}else{if(P[hs]=I,en.setUint32(it,3655335680),it+=3,U&&(R+=z*U),E.length>=t2-y&&(E.shift()[hs]=void 0),E.push(P),Nr(K+2),O(57344+I),O(V),X)return;for(let Y in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(Y))&&O(k[Y]);return}if(K<24?ut[it++]=128|K:Nr(K),!X)for(let Y in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(Y))&&O(k[Y])},N=k=>{let X;if(k>16777216){if(k-e>e2)throw new Error("Encoded buffer would be larger than maximum buffer size");X=Math.min(e2,Math.round(Math.max((k-e)*(k>67108864?1.25:2),4194304)/4096)*4096)}else X=(Math.max(k-e<<2,ut.length-1)>>12)+1<<12;let Z=new A0(X);return en=new DataView(Z.buffer,0,X),ut.copy?ut.copy(Z,0,e,k):Z.set(ut.slice(e,k)),it-=e,e=0,xa=Z.length-10,ut=Z};let j=100,F=1e3;this.encodeAsIterable=function(k,X){return Q(k,X,G)},this.encodeAsAsyncIterable=function(k,X){return Q(k,X,et)};function*G(k,X,Z){let P=k.constructor;if(P===Object){let U=p.useRecords!==!1;U?$(k,!0):n2(Object.keys(k).length,160);for(let K in k){let D=k[K];U||O(K),D&&typeof D=="object"?X[K]?yield*G(D,X[K]):yield*q(D,X,K):O(D)}}else if(P===Array){let U=k.length;Nr(U);for(let K=0;K<U;K++){let D=k[K];D&&(typeof D=="object"||it-e>j)?X.element?yield*G(D,X.element):yield*q(D,X,"element"):O(D)}}else if(k[Symbol.iterator]&&!k.buffer){ut[it++]=159;for(let U of k)U&&(typeof U=="object"||it-e>j)?X.element?yield*G(U,X.element):yield*q(U,X,"element"):O(U);ut[it++]=255}else C0(k)?(n2(k.size,64),yield ut.subarray(e,it),yield k,W()):k[Symbol.asyncIterator]?(ut[it++]=159,yield ut.subarray(e,it),yield k,W(),ut[it++]=255):O(k);Z&&it>e?yield ut.subarray(e,it):it-e>j&&(yield ut.subarray(e,it),W())}function*q(k,X,Z){let P=it-e;try{O(k),it-e>j&&(yield ut.subarray(e,it),W())}catch(U){if(U.iteratorNotHandled)X[Z]={},it=e+P,yield*G.call(this,k,X[Z]);else throw U}}function W(){j=F,p.encode(null,L0)}function Q(k,X,Z){return X&&X.chunkThreshold?j=F=X.chunkThreshold:j=100,k&&typeof k=="object"?(p.encode(null,L0),Z(k,p.iterateProperties||(p.iterateProperties={}),!0)):[p.encode(k)]}async function*et(k,X){for(let Z of G(k,X,!0)){let P=Z.constructor;if(P===JS||P===Uint8Array)yield Z;else if(C0(Z)){let U=Z.stream().getReader(),K;for(;!(K=await U.read()).done;)yield K.value}else if(Z[Symbol.asyncIterator])for await(let U of Z)W(),U?yield*et(U,X.async||(X.async={})):yield p.encode(U);else yield Z}}}useBuffer(t){ut=t,en=new DataView(ut.buffer,ut.byteOffset,ut.byteLength),it=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let t=this.sharedVersion||0;this.sharedVersion=t+1;let e=this.structures.slice(0),s=new WA(e,this.sharedValues,this.sharedVersion),r=this.saveShared(s,a=>(a&&a.version||0)==t);return r===!1?(s=this.getShared()||{},this.structures=s.structures||[],this.sharedValues=s.packedValues,this.sharedVersion=s.version,this.structures.nextId=this.structures.length):e.forEach((a,u)=>this.structures[u]=a),r}}function n2(n,t){n<24?ut[it++]=t|n:n<256?(ut[it++]=t|24,ut[it++]=n):n<65536?(ut[it++]=t|25,ut[it++]=n>>8,ut[it++]=n&255):(ut[it++]=t|26,en.setUint32(it,n),it+=4)}class WA{constructor(t,e,s){this.structures=t,this.packedValues=e,this.version=s}}function Nr(n){n<24?ut[it++]=128|n:n<256?(ut[it++]=152,ut[it++]=n):n<65536?(ut[it++]=153,ut[it++]=n>>8,ut[it++]=n&255):(ut[it++]=154,en.setUint32(it,n),it+=4)}const W6=typeof Blob>"u"?function(){}:Blob;function C0(n){if(n instanceof W6)return!0;let t=n[Symbol.toStringTag];return t==="Blob"||t==="File"}function pp(n,t){switch(typeof n){case"string":if(n.length>3){if(t.objectMap[n]>-1||t.values.length>=t.maxValues)return;let s=t.get(n);if(s)++s.count==2&&t.values.push(n);else if(t.set(n,{count:1}),t.samplingPackedValues){let r=t.samplingPackedValues.get(n);r?r.count++:t.samplingPackedValues.set(n,{count:1})}}break;case"object":if(n)if(n instanceof Array)for(let s=0,r=n.length;s<r;s++)pp(n[s],t);else{let s=!t.encoder.useRecords;for(var e in n)n.hasOwnProperty(e)&&(s&&pp(e,t),pp(n[e],t))}break;case"function":console.log(n)}}const F6=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;GA=[Date,Set,Error,RegExp,Hl,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,WA];py=[{tag:1,encode(n,t){let e=n.getTime()/1e3;(this.useTimestamp32||n.getMilliseconds()===0)&&e>=0&&e<4294967296?(ut[it++]=26,en.setUint32(it,e),it+=4):(ut[it++]=251,en.setFloat64(it,e),it+=8)}},{tag:258,encode(n,t){let e=Array.from(n);t(e)}},{tag:27,encode(n,t){t([n.name,n.message])}},{tag:27,encode(n,t){t(["RegExp",n.source,n.flags])}},{getTag(n){return n.tag},encode(n,t){t(n.value)}},{encode(n,t,e){my(n,e)}},{getTag(n){if(n.constructor===Uint8Array&&(this.tagUint8Array||vf&&this.tagUint8Array!==!1))return 64},encode(n,t,e){my(n,e)}},Dr(68,1),Dr(69,2),Dr(70,4),Dr(71,8),Dr(72,1),Dr(77,2),Dr(78,4),Dr(79,8),Dr(85,4),Dr(86,8),{encode(n,t){let e=n.packedValues||[],s=n.structures||[];if(e.values.length>0){ut[it++]=216,ut[it++]=51,Nr(4);let r=e.values;t(r),Nr(0),Nr(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let a=0,u=r.length;a<u;a++)packedObjectMap[r[a]]=a}if(s){en.setUint32(it,3655335424),it+=3;let r=s.slice(0);r.unshift(57344),r.push(new Hl(n.version,1399353956)),t(r)}else t(new Hl(n.version,1399353956))}}];function Dr(n,t){return!F6&&t>1&&(n-=4),{tag:n,encode:function(s,r){let a=s.byteLength,u=s.byteOffset||0,h=s.buffer||s;r(vf?Mm.from(h,u,a):new Uint8Array(h,u,a))}}}function my(n,t){let e=n.byteLength;e<24?ut[it++]=64+e:e<256?(ut[it++]=88,ut[it++]=e):e<65536?(ut[it++]=89,ut[it++]=e>>8,ut[it++]=e&255):(ut[it++]=90,en.setUint32(it,e),it+=4),it+e>=ut.length&&t(it+e),ut.set(n.buffer?n:new Uint8Array(n),it),it+=e}function Y6(n,t){let e,s=t.length*2,r=n.length-s;t.sort((a,u)=>a.offset>u.offset?1:-1);for(let a=0;a<t.length;a++){let u=t[a];u.id=a;for(let h of u.references)n[h++]=a>>8,n[h]=a&255}for(;e=t.pop();){let a=e.offset;n.copyWithin(a+s,a,r),s-=2;let u=a+s;n[u++]=216,n[u++]=28,r=a}return n}function i2(n,t){en.setUint32(qn.position+n,it-qn.position-n+1);let e=qn;qn=null,t(e[0]),t(e[1])}let Pv=new ZA({useRecords:!1});Pv.encode;Pv.encodeAsIterable;Pv.encodeAsAsyncIterable;const s2=512,X6=1024,L0=2048;function FA(n){return new ZA({tagUint8Array:!1,useRecords:!1}).encode(n)}function Q6(n){return qA(n)}const $6=(n,t)=>n.length===t.length&&n.every((e,s)=>e===t[s]),zv=(n,t)=>$6(n,t),K6=async(n,t)=>{let e;const s=new Promise((r,a)=>{e=setTimeout(()=>a(new J6(`withTimeout: timed out after ${t}ms`)),t)});try{return await Promise.race([n,s])}finally{clearTimeout(e)}};class J6 extends Error{constructor(t){super(t),this.name="TimeoutError"}}class km extends DOMException{constructor(t){super(t??"Operation aborted","AbortError")}}const tR=n=>n instanceof km||(n instanceof Error||DOMException&&n instanceof DOMException)&&n.name==="AbortError";function r2(n,t){let e=!1;return new Promise((s,r)=>{t?.addEventListener("abort",()=>{e||r(new km)},{once:!0}),n.then(a=>{s(a)}).catch(a=>{r(a)}).finally(()=>{e=!0})})}const Nn="AUTOMERGE_REF_KIND",eR="AUTOMERGE_REF_CURSOR_MARKER",nR="automerge:",mp="\\",tp="%5C",YA="@",_p="[",M0="]",o2="-",a2=[mp,YA,"{",_p],l2=/^@(\d+)$/,iR={kind:"index",match:n=>l2.test(n),parse:n=>{const t=n.match(l2);if(!t)throw new Error(`Invalid index: ${n}`);return{[Nn]:"index",index:parseInt(t[1],10)}},serialize:n=>`${YA}${n.index}`},sR={kind:"match",match:n=>n.startsWith("{")||n.startsWith("%7B"),parse:n=>{try{const t=decodeURIComponent(n),e=JSON.parse(t);if(typeof e!="object"||e===null||Array.isArray(e))throw new Error("Match pattern must be a plain object");return{[Nn]:"match",match:e}}catch(t){throw new Error(`Invalid match pattern: ${n}. ${t instanceof Error?t.message:""}`)}},serialize:n=>encodeURIComponent(JSON.stringify(n.match))},rR={kind:"cursors",match:n=>n.startsWith(_p)&&n.endsWith(M0),parse:n=>{const t=n.slice(1,-1);if(!t)throw new Error("Invalid cursor range: empty brackets");const e=t.indexOf(o2);if(e===-1){const a=t;return{[Nn]:"cursors",start:a,end:a}}const s=t.slice(0,e),r=t.slice(e+1);if(!s||!r)throw new Error(`Invalid cursor range: ${n}. Expected format: [cursor] or [start-end]`);return{[Nn]:"cursors",start:s,end:r}},serialize:n=>n.start===n.end?`${_p}${n.start}${M0}`:`${_p}${n.start}${o2}${n.end}${M0}`},oR={kind:"key",match:n=>{if(n.startsWith(tp)||n.startsWith(mp))return!0;const t=aR(n);return!a2.some(e=>n.startsWith(e)||t.startsWith(e))},parse:n=>n.startsWith(tp)?{[Nn]:"key",key:decodeURIComponent(n.slice(tp.length))}:n.startsWith(mp)?{[Nn]:"key",key:decodeURIComponent(n.slice(mp.length))}:{[Nn]:"key",key:decodeURIComponent(n)},serialize:n=>{const t=a2.some(s=>n.key.startsWith(s)),e=encodeURIComponent(n.key);return t?`${tp}${e}`:e}};function aR(n){try{return decodeURIComponent(n)}catch{return n}}const lR=[iR,sR,rR,oR];function cR(n){for(const t of lR)if(n[Nn]===t.kind)return t.serialize(n);throw new Error(`No codec found for segment kind: ${n[Nn]}`)}function uR(n){return n.map(cR).join("/")}function hR(n){return n.length>0?`#${n.join("|")}`:""}function fR(n,t,e){const s=uR(t),r=e?hR(e):"";return`${nR}${n}/${s}${r}`}function Uv(n){return n!==null&&typeof n=="object"&&!Array.isArray(n)}function XA(n){return Uv(n)&&Nn in n}function QA(n){return Uv(n)&&eR in n}function dR(n){return Uv(n)&&!XA(n)&&!QA(n)}function c2(n,t){return Object.entries(t).every(([e,s])=>n[e]===s)}function pR(n,t,e){const s={splice(r,a,u){oA(n,t,r,a,u)},updateText(r){j8(n,t,r)}};return new Proxy(s,{get(r,a){if(a in r)return r[a];const h=e[a];return typeof h=="function"?h.bind(e):h},getPrototypeOf(){return String.prototype}})}const mR=new FinalizationRegistry(n=>n());class _R{docHandle;path;range;#t=new Set;#e;constructor(t,e){this.docHandle=t;const s=t.doc(),{path:r,range:a}=this.#r(s,e);this.path=r,this.range=a,this.#e=()=>{const u=this.docHandle.doc();this.#l(u)},this.docHandle.on("change",this.#e),mR.register(this,()=>this.#i(),this)}#i(){this.docHandle.off("change",this.#e);for(const t of this.#t)this.docHandle.off("change",t);this.#t.clear()}get rangePositions(){if(!this.range)return;const t=this.#c();if(!t)return;const e=this.doc();return this.#d(e,t,this.range)}viewAt(t){return this.docHandle.view(rr(t)).ref(...this.path)}value(){const t=this.doc(),e=this.#c();if(!e)return;const s=this.#h(t,e);return this.range?this.#m(t,e,s,this.range):s}doc(){return this.docHandle.doc()}change(t){if(this.docHandle.isReadOnly())throw new Error("Cannot change a Ref on a read-only handle");const e=typeof t=="function"?t:()=>t;this.docHandle.change(s=>{if(this.path.length===0&&!this.range){e(s);return}const r=this.#c();if(!r)throw new Error("Cannot resolve path");let a;if(this.range){const p=this.#h(s,r);if(typeof p!="string")throw new Error("Range refs can only be used on string values");a=this.#m(s,r,p,this.range)}else a=this.#h(s,r);const u=typeof a=="string"?pR(s,r,a):a,h=e(u);h!==void 0&&(h===null||typeof h=="string"||typeof h=="number"||typeof h=="boolean"||typeof h=="bigint"||console.warn("Ref.change() returned a non-primitive value. For objects and arrays, you should mutate them in place rather than returning a new instance. Returning new instances loses granular change tracking."),this.range?this.#_(s,r,this.range,h):this.#f(s,r,h))})}remove(){if(this.docHandle.isReadOnly())throw new Error("Cannot remove from a Ref on a read-only handle");if(this.path.length===0&&!this.range)throw new Error("Cannot remove the root document");this.docHandle.change(t=>{const e=this.#c();if(!e||e.length===0)throw new Error("Cannot resolve path for removal");if(this.range){this.#_(t,e,this.range,"");return}const s=e.slice(0,-1),r=e[e.length-1],a=s.length===0?t:this.#h(t,s);if(a==null)throw new Error("Cannot remove: parent is null or undefined");if(Array.isArray(a)){if(typeof r!="number")throw new Error("Cannot remove from array: key is not a number");a.splice(r,1)}else delete a[r]})}onChange(t){const e=r=>{if(this.#y(r.patches)){const a=this.value();t(a,r)}};return this.docHandle.on("change",e),this.#t.add(e),()=>{this.docHandle.off("change",e),this.#t.delete(e)}}get url(){const t=this.range?[...this.path,this.range]:this.path,e=this.docHandle.isReadOnly()?Aa(this.docHandle.heads()):void 0;return fR(this.docHandle.documentId,t,e)}equals(t){return this.url===t.url}contains(t){if(this.docHandle.documentId!==t.docHandle.documentId||this.docHandle.url!==t.docHandle.url||this.path.length>=t.path.length)return!1;for(let e=0;e<this.path.length;e++)if(!this.#s(this.path[e],t.path[e]))return!1;return!0}isChildOf(t){if(this.docHandle.documentId!==t.docHandle.documentId||this.docHandle.url!==t.docHandle.url||this.path.length<t.path.length)return!1;for(let e=0;e<t.path.length;e++)if(!this.#s(this.path[e],t.path[e]))return!1;return this.path.length===t.path.length?this.range!==void 0&&t.range===void 0:this.path.length===t.path.length+1}overlaps(t){if(this.docHandle.documentId!==t.docHandle.documentId||this.docHandle.url!==t.docHandle.url||!this.range||!t.range||this.path.length!==t.path.length)return!1;for(let y=0;y<this.path.length;y++)if(!this.#s(this.path[y],t.path[y]))return!1;const e=this.doc(),s=this.#c();if(!s)return!1;const r=this.#d(e,s,this.range),a=this.#d(e,s,t.range);if(!r||!a)return!1;const[u,h]=r,[p,m]=a;return u<m&&p<h}isEquivalent(t){if(this===t)return!0;if(this.docHandle.documentId!==t.docHandle.documentId||!this.#n(t)||this.path.length!==t.path.length||this.range===void 0!=(t.range===void 0))return!1;let e=!0;for(let s=0;s<this.path.length;s++)if(!this.#s(this.path[s],t.path[s])){e=!1;break}if(e)return!this.range&&!t.range?!0:this.range.start===t.range.start&&this.range.end===t.range.end;for(let s=0;s<this.path.length;s++){const r=this.path[s].prop,a=t.path[s].prop;if(r===void 0||a===void 0||r!==a)return!1}return!this.range&&!t.range?!0:this.range.start===t.range.start&&this.range.end===t.range.end}valueOf(){return this.url}toString(){return this.url}#n(t){if(this.docHandle.url===t.docHandle.url)return!0;const e=this.docHandle.heads().join(","),s=t.docHandle.heads().join(",");return e===s}#r(t,e){const s=[],r=[];let a=t,u;for(let h=0;h<e.length;h++){const p=e[h];if(QA(p)){if(h<e.length-1)throw new Error("cursor() must be the last segment in a ref path. Segments after cursor() are not allowed.");u=this.#u(t,r,a,p);break}const m=XA(p)?this.#o(a,p):this.#p(a,p);if(m[Nn]==="cursors"){if(h<e.length-1)throw new Error("Cursor range must be the last segment in a ref path. Segments after cursor range are not allowed.");u=m;break}s.push(m),m.prop!==void 0&&a!==void 0&&a!==null&&(r.push(m.prop),a=a[m.prop])}return{path:s,range:u}}#o(t,e){const s=this.#a(t,e);return{...e,prop:s}}#a(t,e){if(t!=null)switch(e[Nn]){case"key":return e.key;case"index":return e.index;case"match":{if(!Array.isArray(t))return;const s=t.findIndex(r=>c2(r,e.match));return s!==-1?s:void 0}case"cursors":return;default:return}}#l(t){let e=t;for(const s of this.path){const r=this.#a(e,s);if(s.prop=r,r!==void 0&&e!==void 0&&e!==null)e=e[r];else break}}#s(t,e){if(t[Nn]!==e[Nn])return!1;switch(t[Nn]){case"key":return t.key===e.key;case"index":return t.index===e.index;case"match":{const s=Object.keys(t.match),r=Object.keys(e.match);return s.length!==r.length?!1:s.every(a=>t.match[a]===e.match[a])}default:return!1}}#p(t,e){if(typeof e=="string")return{[Nn]:"key",key:e,prop:e};if(typeof e=="number")return{[Nn]:"index",index:e,prop:e};if(dR(e)){if(!Array.isArray(t))return{[Nn]:"match",match:e,prop:void 0};const s=t.findIndex(r=>c2(r,e));return{[Nn]:"match",match:e,prop:s!==-1?s:void 0}}throw new Error(`Unsupported path input type: ${typeof e}. Expected string, number, or plain object.`)}#u(t,e,s,r){const{start:a,end:u}=r;if(typeof s!="string")throw new Error(`cursor() can only be used on string values, got ${typeof s}`);const h=wS(t,e,a),p=wS(t,e,u);if(!h||!p)throw new Error(`Failed to create cursors at positions ${a}-${u}.`);return{[Nn]:"cursors",start:h,end:p}}#c(){const t=[];for(const e of this.path){if(e.prop===void 0)return;t.push(e.prop)}return t}#h(t,e){let s=t;for(const r of e){if(s==null)return;s=s[r]}return s}#m(t,e,s,r){const a=this.#d(t,e,r);if(a)return s.slice(a[0],a[1])}#f(t,e,s){if(e.length===0)throw new Error("Internal error: #setValueAt called with empty path. Root document changes should be handled by the caller.");const r=this.#h(t,e.slice(0,-1));if(r==null)throw new Error("Cannot set value: parent is null or undefined");r[e[e.length-1]]=s}#_(t,e,s,r){const a=this.#d(t,e,s);if(!a)throw new Error("Cannot resolve range positions");const[u,h]=a;oA(t,e,u,h-u,r)}#d(t,e,s){const r=xS(t,e,s.start),a=xS(t,e,s.end);return r!==void 0&&a!==void 0?[r,a]:void 0}#y(t){const e=[];for(const s of this.path){if(s.prop===void 0)break;e.push(s.prop)}return e.length===0?!1:t.some(s=>this.#v(s.path,e))}#v(t,e){const s=Math.min(t.length,e.length);return t.slice(0,s).every((r,a)=>r===e[a])}}class Wp extends Zl{documentId;#t;#e;#i;#n=Us();#r=6e4;#o={};#a=new Map;#l=new Map;constructor(t,e={}){super(),this.documentId=t,"timeoutDelay"in e&&e.timeoutDelay&&(this.#r=e.timeoutDelay),"heads"in e&&(this.#i=e.heads);const s=Us();this.#t=Io(`automerge-repo:dochandle:${this.documentId.slice(0,5)}`);const r=this.#r,a=MA({actions:{onUpdate:Ol(({context:u,event:h})=>{const p=u.doc;c6(h,h2);const{callback:m}=h.payload;return{doc:m(p)}}),onDelete:Ol(()=>(this.emit("delete",{handle:this}),{doc:Us()})),onUnavailable:Ol(()=>({doc:Us()})),onUnload:Ol(()=>({doc:Us()}))}}).createMachine({initial:"idle",context:{documentId:t,doc:s},on:{UPDATE:{actions:"onUpdate"},UNLOAD:".unloaded",DELETE:".deleted"},states:{idle:{on:{BEGIN:"loading"}},loading:{on:{REQUEST:"requesting",DOC_READY:"ready"},after:{[r]:"unavailable"}},requesting:{on:{DOC_UNAVAILABLE:"unavailable",DOC_READY:"ready"},after:{[r]:"unavailable"}},unavailable:{entry:"onUnavailable",on:{DOC_READY:"ready"}},ready:{},unloaded:{entry:"onUnload",on:{RELOAD:"loading"}},deleted:{entry:"onDelete",type:"final"}}});this.#e=Yh(a),this.#e.subscribe(u=>{const h=this.#n,p=u.context.doc;this.#t(` ${u.value} %o`,p),this.#h(h,p)}),this.#e.start(),this.begin()}get#s(){return this.#e?.getSnapshot().context.doc}get#p(){return this.#e?.getSnapshot().value}#u(t,e){const s=Array.isArray(t)?t:[t];return f6(this.#e,r=>s.some(a=>r.matches(a)),{timeout:this.#r*2,...e})}#c(t){let e=null;if(this.#e.send({type:h2,payload:{callback:s=>{try{return t(s)}catch(r){return e=r,s}}}}),e)throw e}#h(t,e){const s=Ur(t),r=Ur(e);if(!zv(rr(r),rr(s))){this.emit("heads-changed",{handle:this,doc:e});const u=d0(e,s,r);u.length>0&&this.emit("change",{handle:this,doc:e,patches:u,patchInfo:{before:t,after:e,source:"change"}}),this.isReady()||this.#e.send({type:u2})}this.#n=e}get url(){return IA({documentId:this.documentId,heads:this.#i})}isReady=()=>this.inState(["ready"]);isUnloaded=()=>this.inState(["unloaded"]);isDeleted=()=>this.inState(["deleted"]);isUnavailable=()=>this.inState(["unavailable"]);inState=t=>t.some(e=>this.#e.getSnapshot().matches(e));get state(){return this.#e.getSnapshot().value}async whenReady(t=["ready"],e){try{await K6(this.#u(t,e),this.#r)}catch(s){throw tR(s)?new km:(console.log(`error waiting for ${this.documentId} to be in one of states: ${t.join(", ")}`),s)}}doc(){if(!this.isReady())throw new Error("DocHandle is not ready");return this.#i?M8(this.#s,Aa(this.#i)):this.#s}docSync(){return console.warn("docSync is deprecated. Use doc() instead. This function will be removed as part of the 2.0 release."),this.doc()}heads(){if(!this.isReady())throw new Error("DocHandle is not ready");return this.#i?this.#i:rr(Ur(this.#s))}begin(){this.#e.send({type:vR})}history(){if(this.isReady())return B8(this.#s).map(t=>rr([t]))}view(t){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before calling view().`);const e=JSON.stringify(t),s=this.#a.get(e);if(s)return s;const r=new Wp(this.documentId,{heads:t,timeoutDelay:this.#r});return r.update(()=>Up(this.#s)),r.doneLoading(),this.#a.set(e,r),r}diff(t,e){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before calling diff().`);const s=this.#s;if(!s)throw new Error("Document not available");if(t instanceof Wp){if(!t.isReady())throw new Error("Cannot diff against a handle that isn't ready");const u=t.heads();if(!u)throw new Error("Other document's heads not available");const h=yS(Up(s),t.doc());return d0(h,Aa(this.heads()),Aa(u))}const r=e?t:this.heads()||[],a=e||t;return d0(s,Aa(r),Aa(a))}metadata(t){if(this.isReady())return t||(t=this.heads()[0]),H8(this.#s,Aa([t])[0])||void 0}update(t){this.#c(t)}doneLoading(){this.#e.send({type:u2})}setSyncInfo(t,e){this.#o[t]=e,this.emit("remote-heads",{storageId:t,heads:e.lastHeads,timestamp:e.lastSyncTimestamp})}getRemoteHeads(t){return this.#o[t]?.lastHeads}getSyncInfo(t){return this.#o[t]}change(t,e={}){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is in ${this.state} and not ready. Check \`handle.isReady()\` before accessing the document.`);if(this.#i)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);this.#c(s=>k8(s,e,t))}changeAt(t,e,s={}){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before accessing the document.`);if(this.#i)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);let r;return this.#c(a=>{const u=O8(a,Aa(t),s,e);return r=u.newHeads?rr(u.newHeads):void 0,u.newDoc}),r}isReadOnly(){return!!this.#i}merge(t){if(!this.isReady()||!t.isReady())throw new Error("Both handles must be ready to merge");if(this.#i)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);const e=t.doc();this.update(s=>yS(s,e))}unavailable(){this.#e.send({type:TR})}request(){this.#p==="loading"&&this.#e.send({type:bR})}unload(){this.#e.send({type:wR})}reload(){this.#e.send({type:xR})}delete(){this.#e.send({type:SR})}broadcast(t){this.emit("ephemeral-message-outbound",{handle:this,data:new Uint8Array(FA(t))})}metrics(){return bv(this.#s)}ref(...t){const e=this.#m(t),s=this.#l.get(e)?.deref();if(s)return s;const r=new _R(this,t);return this.#l.set(e,new WeakRef(r)),r}#m(t){return t.map(e=>typeof e=="string"?`s:${e}`:typeof e=="number"?`n:${e}`:typeof e=="object"&&e!==null?`o:${JSON.stringify(e)}`:`?:${String(e)}`).join("/")}}const gR={REQUESTING:"requesting",READY:"ready",UNLOADED:"unloaded",DELETED:"deleted",UNAVAILABLE:"unavailable"},{REQUESTING:ep,READY:Pr,UNLOADED:yR,DELETED:np,UNAVAILABLE:ps}=gR,vR="BEGIN",bR="REQUEST",u2="DOC_READY",h2="UPDATE",wR="UNLOAD",xR="RELOAD",SR="DELETE",TR="DOC_UNAVAILABLE";class AR extends Zl{#t=new Map;#e=new Set;#i=new Map;#n=new Set;#r=new Map;#o=Io("automerge-repo:remote-heads-subscriptions");subscribeToRemotes(t){this.#o("subscribeToRemotes",t);const e=[];for(const s of t)this.#e.has(s)||(this.#e.add(s),e.push(s));e.length>0&&this.emit("change-remote-subs",{add:e,peers:Array.from(this.#n)})}unsubscribeFromRemotes(t){this.#o("subscribeToRemotes",t);const e=[];for(const s of t)this.#e.has(s)&&(this.#e.delete(s),this.#i.has(s)||e.push(s));e.length>0&&this.emit("change-remote-subs",{remove:e,peers:Array.from(this.#n)})}handleControlMessage(t){const e=[],s=[],r=[];if(this.#o("handleControlMessage",t),t.add)for(const a of t.add){let u=this.#i.get(a);(this.#e.has(a)||u)&&r.push(a),u||(u=new Set,this.#i.set(a,u),this.#e.has(a)||e.push(a)),u.add(t.senderId)}if(t.remove)for(const a of t.remove){const u=this.#i.get(a);u&&(u.delete(t.senderId),u.size==0&&!this.#e.has(a)&&s.push(a))}(e.length>0||s.length>0)&&this.emit("change-remote-subs",{peers:Array.from(this.#n),add:e,remove:s});for(const a of r){const u=this.#r.get(t.senderId);if(u)for(const h of u){const p=this.#t.get(h);if(!p)continue;const m=p.get(a);m&&this.emit("notify-remote-heads",{targetId:t.senderId,documentId:h,heads:m.lastHeads,timestamp:m.lastSyncTimestamp,storageId:a})}}}handleRemoteHeads(t){this.#o("handleRemoteHeads",t);const e=this.#l(t);for(const s of e)this.#e.has(s.storageId)&&this.emit("remote-heads-changed",s);for(const s of e)for(const r of this.#n)r!==t.senderId&&this.emit("notify-remote-heads",{targetId:r,documentId:s.documentId,heads:s.remoteHeads,timestamp:s.timestamp,storageId:s.storageId});for(const s of e){const r=this.#i.get(s.storageId);if(r)for(const a of r)this.#a(a,s.documentId)&&this.emit("notify-remote-heads",{targetId:a,documentId:s.documentId,heads:s.remoteHeads,timestamp:s.timestamp,storageId:s.storageId})}}handleImmediateRemoteHeadsChanged(t,e,s){this.#o("handleLocalHeadsChanged",t,e,s);const r=this.#t.get(t),a=Date.now();if(!r)this.#t.set(t,new Map([[e,{lastSyncTimestamp:a,lastHeads:s}]]));else{const h=r.get(e);(!h||h.lastSyncTimestamp<Date.now())&&r.set(e,{lastSyncTimestamp:Date.now(),lastHeads:s})}const u=this.#i.get(e);if(u)for(const h of u)this.#a(h,t)&&this.emit("notify-remote-heads",{targetId:h,documentId:t,heads:s,timestamp:a,storageId:e})}addGenerousPeer(t){this.#o("addGenerousPeer",t),this.#n.add(t),this.#e.size>0&&this.emit("change-remote-subs",{add:Array.from(this.#e),peers:[t]});for(const[e,s]of this.#t)for(const[r,{lastHeads:a,lastSyncTimestamp:u}]of s)this.emit("notify-remote-heads",{targetId:t,documentId:e,heads:a,timestamp:u,storageId:r})}removePeer(t){this.#o("removePeer",t);const e=[];this.#n.delete(t),this.#r.delete(t);for(const[s,r]of this.#i)r.has(t)&&(r.delete(t),r.size==0&&(e.push(s),this.#i.delete(s)));e.length>0&&this.emit("change-remote-subs",{remove:e,peers:Array.from(this.#n)})}subscribePeerToDoc(t,e){let s=this.#r.get(t);s||(s=new Set,this.#r.set(t,s)),s.add(e);const r=this.#t.get(e);if(r)for(const[a,u]of r){const h=this.#i.get(a);h&&h.has(t)&&this.emit("notify-remote-heads",{targetId:t,documentId:e,heads:u.lastHeads,timestamp:u.lastSyncTimestamp,storageId:a})}}#a(t,e){const s=this.#r.get(t);return s&&s.has(e)}#l(t){const e=[],{documentId:s,newHeads:r}=t;for(const[a,{heads:u,timestamp:h}]of Object.entries(r)){if(!this.#e.has(a)&&!this.#i.has(a))continue;let p=this.#t.get(s);p||(p=new Map,this.#t.set(s,p));const m=p.get(a);m&&m.lastSyncTimestamp>=h||(p.set(a,{lastSyncTimestamp:h,lastHeads:u}),e.push({documentId:s,storageId:a,remoteHeads:u,timestamp:h}))}return e}}const _y=(n,t)=>{let e=Date.now(),s,r;return function(...a){s=e+t-Date.now(),clearTimeout(r),r=setTimeout(()=>{n(...a),e=Date.now()},s)}},ER=n=>LR(n)||KA(n)||$A(n)||CR(n)||MR(n)||kR(n),CR=n=>n.type==="doc-unavailable",$A=n=>n.type==="request",LR=n=>n.type==="sync",KA=n=>n.type==="ephemeral",MR=n=>n.type==="remote-subscription-change",kR=n=>n.type==="remote-heads-changed",OR=n=>`${n.senderId}:${n.sessionId}`;class DR extends Zl{peerId;peerMetadata;#t;#e={};#i=0;#n=Math.random().toString(36).slice(2);#r={};adapters=[];constructor(t,e,s){super(),this.peerId=e,this.peerMetadata=s,this.#t=Io(`automerge-repo:network:${this.peerId}`),t.forEach(r=>this.addNetworkAdapter(r))}disconnect(){this.adapters.forEach(t=>t.disconnect())}reconnect(){this.adapters.forEach(t=>t.connect(this.peerId))}addNetworkAdapter(t){this.adapters.push(t),t.on("peer-candidate",({peerId:e,peerMetadata:s})=>{this.#t(`peer candidate: ${e} `),this.#e[e]||(this.#e[e]=t),this.emit("peer",{peerId:e,peerMetadata:s})}),t.on("peer-disconnected",({peerId:e})=>{this.#t(`peer disconnected: ${e} `),delete this.#e[e],this.emit("peer-disconnected",{peerId:e})}),t.on("message",e=>{if(!ER(e)){this.#t(`invalid message: ${JSON.stringify(e)}`);return}if(this.#t(`message from ${e.senderId}`),KA(e)){const s=OR(e);(this.#r[s]===void 0||e.count>this.#r[s])&&(this.#r[s]=e.count,this.emit("message",e));return}this.emit("message",e)}),t.on("close",()=>{this.#t("adapter closed"),Object.entries(this.#e).forEach(([e,s])=>{s===t&&delete this.#e[e]}),this.adapters=this.adapters.filter(e=>e!==t)}),this.peerMetadata.then(e=>{t.connect(this.peerId,e)}).catch(e=>{this.#t("error connecting to network",e)})}removeNetworkAdapter(t){this.adapters=this.adapters.filter(e=>e!==t),t.disconnect()}send(t){const e=this.#e[t.targetId];if(!e){this.#t(`Tried to send message but peer not found: ${t.targetId}`);return}const r=(a=>a.type==="ephemeral"?"count"in a?a:{...a,count:++this.#i,sessionId:this.#n,senderId:this.peerId}:{...a,senderId:this.peerId})(t);this.#t("sending message %o",r),e.send(r)}isReady=()=>this.adapters.every(t=>t.isReady());whenReady=async()=>Promise.all(this.adapters.map(t=>t.whenReady()))}function JA(n){let t=0;n.forEach(r=>{t+=r.length});const e=new Uint8Array(t);let s=0;return n.forEach(r=>{e.set(r,s),s+=r.length}),e}var gp={exports:{}},RR=gp.exports,f2;function IR(){return f2||(f2=1,(function(n){(function(t,e){var s={};e(s);var r=s.default;for(var a in s)r[a]=s[a];n.exports=r})(RR,function(t){t.__esModule=!0,t.digestLength=32,t.blockSize=64;var e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(b,S,x,A,E){for(var R,z,O,$,N,j,F,G,q,W,Q,et,k;E>=64;){for(R=S[0],z=S[1],O=S[2],$=S[3],N=S[4],j=S[5],F=S[6],G=S[7],W=0;W<16;W++)Q=A+W*4,b[W]=(x[Q]&255)<<24|(x[Q+1]&255)<<16|(x[Q+2]&255)<<8|x[Q+3]&255;for(W=16;W<64;W++)q=b[W-2],et=(q>>>17|q<<15)^(q>>>19|q<<13)^q>>>10,q=b[W-15],k=(q>>>7|q<<25)^(q>>>18|q<<14)^q>>>3,b[W]=(et+b[W-7]|0)+(k+b[W-16]|0);for(W=0;W<64;W++)et=(((N>>>6|N<<26)^(N>>>11|N<<21)^(N>>>25|N<<7))+(N&j^~N&F)|0)+(G+(e[W]+b[W]|0)|0)|0,k=((R>>>2|R<<30)^(R>>>13|R<<19)^(R>>>22|R<<10))+(R&z^R&O^z&O)|0,G=F,F=j,j=N,N=$+et|0,$=O,O=z,z=R,R=et+k|0;S[0]+=R,S[1]+=z,S[2]+=O,S[3]+=$,S[4]+=N,S[5]+=j,S[6]+=F,S[7]+=G,A+=64,E-=64}return A}var r=(function(){function b(){this.digestLength=t.digestLength,this.blockSize=t.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return b.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},b.prototype.clean=function(){for(var S=0;S<this.buffer.length;S++)this.buffer[S]=0;for(var S=0;S<this.temp.length;S++)this.temp[S]=0;this.reset()},b.prototype.update=function(S,x){if(x===void 0&&(x=S.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var A=0;if(this.bytesHashed+=x,this.bufferLength>0){for(;this.bufferLength<64&&x>0;)this.buffer[this.bufferLength++]=S[A++],x--;this.bufferLength===64&&(s(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(x>=64&&(A=s(this.temp,this.state,S,A,x),x%=64);x>0;)this.buffer[this.bufferLength++]=S[A++],x--;return this},b.prototype.finish=function(S){if(!this.finished){var x=this.bytesHashed,A=this.bufferLength,E=x/536870912|0,R=x<<3,z=x%64<56?64:128;this.buffer[A]=128;for(var O=A+1;O<z-8;O++)this.buffer[O]=0;this.buffer[z-8]=E>>>24&255,this.buffer[z-7]=E>>>16&255,this.buffer[z-6]=E>>>8&255,this.buffer[z-5]=E>>>0&255,this.buffer[z-4]=R>>>24&255,this.buffer[z-3]=R>>>16&255,this.buffer[z-2]=R>>>8&255,this.buffer[z-1]=R>>>0&255,s(this.temp,this.state,this.buffer,0,z),this.finished=!0}for(var O=0;O<8;O++)S[O*4+0]=this.state[O]>>>24&255,S[O*4+1]=this.state[O]>>>16&255,S[O*4+2]=this.state[O]>>>8&255,S[O*4+3]=this.state[O]>>>0&255;return this},b.prototype.digest=function(){var S=new Uint8Array(this.digestLength);return this.finish(S),S},b.prototype._saveState=function(S){for(var x=0;x<this.state.length;x++)S[x]=this.state[x]},b.prototype._restoreState=function(S,x){for(var A=0;A<this.state.length;A++)this.state[A]=S[A];this.bytesHashed=x,this.finished=!1,this.bufferLength=0},b})();t.Hash=r;var a=(function(){function b(S){this.inner=new r,this.outer=new r,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var x=new Uint8Array(this.blockSize);if(S.length>this.blockSize)new r().update(S).finish(x).clean();else for(var A=0;A<S.length;A++)x[A]=S[A];for(var A=0;A<x.length;A++)x[A]^=54;this.inner.update(x);for(var A=0;A<x.length;A++)x[A]^=106;this.outer.update(x),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var A=0;A<x.length;A++)x[A]=0}return b.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},b.prototype.clean=function(){for(var S=0;S<this.istate.length;S++)this.ostate[S]=this.istate[S]=0;this.inner.clean(),this.outer.clean()},b.prototype.update=function(S){return this.inner.update(S),this},b.prototype.finish=function(S){return this.outer.finished?this.outer.finish(S):(this.inner.finish(S),this.outer.update(S,this.digestLength).finish(S)),this},b.prototype.digest=function(){var S=new Uint8Array(this.digestLength);return this.finish(S),S},b})();t.HMAC=a;function u(b){var S=new r().update(b),x=S.digest();return S.clean(),x}t.hash=u,t.default=u;function h(b,S){var x=new a(b).update(S),A=x.digest();return x.clean(),A}t.hmac=h;function p(b,S,x,A){var E=A[0];if(E===0)throw new Error("hkdf: cannot expand more");S.reset(),E>1&&S.update(b),x&&S.update(x),S.update(A),S.finish(b),A[0]++}var m=new Uint8Array(t.digestLength);function y(b,S,x,A){S===void 0&&(S=m),A===void 0&&(A=32);for(var E=new Uint8Array([1]),R=h(S,b),z=new a(R),O=new Uint8Array(z.digestLength),$=O.length,N=new Uint8Array(A),j=0;j<A;j++)$===O.length&&(p(O,z,x,E),$=0),N[j]=O[$++];return z.clean(),O.fill(0),E.fill(0),N}t.hkdf=y;function _(b,S,x,A){for(var E=new a(b),R=E.digestLength,z=new Uint8Array(4),O=new Uint8Array(R),$=new Uint8Array(R),N=new Uint8Array(A),j=0;j*R<A;j++){var F=j+1;z[0]=F>>>24&255,z[1]=F>>>16&255,z[2]=F>>>8&255,z[3]=F>>>0&255,E.reset(),E.update(S),E.update(z),E.finish($);for(var G=0;G<R;G++)O[G]=$[G];for(var G=2;G<=x;G++){E.reset(),E.update($).finish($);for(var q=0;q<R;q++)O[q]^=$[q]}for(var G=0;G<R&&j*R+G<A;G++)N[j*R+G]=O[G]}for(var j=0;j<R;j++)O[j]=$[j]=0;for(var j=0;j<4;j++)z[j]=0;return E.clean(),N}t.pbkdf2=_})})(gp)),gp.exports}var NR=IR();function tE(n){const t=NR.hash(n);return zR(t)}function PR(n){const t=new TextEncoder,e=JA(n.map(s=>t.encode(s)));return tE(e)}function zR(n){return Array.from(n,t=>t.toString(16).padStart(2,"0")).join("")}class UR extends Zl{#t;#e=new Map;#i=new Map;#n=!1;#r=Io("automerge-repo:storage-subsystem");constructor(t){super(),this.#t=t}async id(){const t=await this.#t.load(["storage-adapter-id"]);let e;return t?e=new TextDecoder().decode(t):(e=OA(),await this.#t.save(["storage-adapter-id"],new TextEncoder().encode(e))),e}async load(t,e){const s=[t,e];return await this.#t.load(s)}async save(t,e,s){const r=[t,e];await this.#t.save(r,s)}async remove(t,e){const s=[t,e];await this.#t.remove(s)}async loadDocData(t){const e=await this.#t.loadRange([t,"snapshot"]),s=await this.#t.loadRange([t,"incremental"]),r=[],a=[];for(const u of e)u.data!==void 0&&(a.push({key:u.key,type:"snapshot",size:u.data.length}),r.push(u.data));for(const u of s)u.data!==void 0&&(a.push({key:u.key,type:"incremental",size:u.data.length}),r.push(u.data));return this.#i.set(t,a),r.length===0?null:JA(r)}async loadDoc(t){const e=await this.loadDocData(t);if(!e)return null;const s=performance.now(),r=vv(Us(),e),a=performance.now();return this.emit("document-loaded",{documentId:t,durationMillis:a-s,...bv(r)}),this.#e.set(t,Ur(r)),r}async saveDoc(t,e){if(!this.#l(t,e))return;const s=this.#i.get(t)??[];this.#s(s)?await this.#a(t,e,s):await this.#o(t,e),this.#e.set(t,Ur(e))}async removeDoc(t){await this.#t.removeRange([t,"snapshot"]),await this.#t.removeRange([t,"incremental"]),await this.#t.removeRange([t,"sync-state"])}async#o(t,e){const s=this.#e.get(t)??[],r=performance.now(),a=U8(e,s),u=performance.now();if(this.emit("doc-saved",{documentId:t,durationMillis:u-r,sinceHeads:s}),a&&a.length>0){const h=[t,"incremental",tE(a)];this.#r(`Saving incremental ${h} for document ${t}`),await this.#t.save(h,a),this.#i.has(t)||this.#i.set(t,[]),this.#i.get(t).push({key:h,type:"incremental",size:a.length}),this.#e.set(t,Ur(e))}else return Promise.resolve()}async#a(t,e,s){this.#n=!0;const r=performance.now(),a=nA(e),u=performance.now();this.emit("doc-compacted",{documentId:t,durationMillis:u-r});const h=PR(Ur(e)),p=[t,"snapshot",h],m=new Set(s.map(_=>_.key).filter(_=>_[2]!==h));this.#r(`Saving snapshot ${p} for document ${t}`),this.#r(`deleting old chunks ${Array.from(m)}`),await this.#t.save(p,a);for(const _ of m)await this.#t.remove(_);const y=this.#i.get(t)?.filter(_=>!m.has(_.key))??[];y.push({key:p,type:"snapshot",size:a.length}),this.#i.set(t,y),this.#n=!1}async loadSyncState(t,e){const s=[t,"sync-state",e];try{const r=await this.#t.load(s);return r?sA(r):void 0}catch{this.#r(`Error loading sync state for ${t} from ${e}`);return}}async saveSyncState(t,e,s){const r=[t,"sync-state",e];await this.#t.save(r,iA(s))}#l(t,e){const s=this.#e.get(t);if(!s)return!0;const r=Ur(e);return!zv(rr(r),rr(s))}#s(t){if(this.#n)return!1;let e=0,s=0;for(const r of t)r.type==="snapshot"?e+=r.size:s+=r.size;return e<1024||s>=e}}class eE extends Zl{}class BR extends eE{#t;syncDebounceRate=100;#e=[];#i={};#n={};#r={};#o=[];#a;#l=!1;#s;#p;constructor({handle:t,peerId:e,onLoadSyncState:s}){super(),this.#a=e,this.#s=t,this.#p=s??(()=>Promise.resolve(void 0));const r=t.documentId.slice(0,5);this.#t=Io(`automerge-repo:docsync:${r}`),t.on("change",_y(()=>this.#u(),this.syncDebounceRate)),t.on("ephemeral-message-outbound",a=>this.#c(a)),(async()=>this.#b())()}get peerStates(){return this.#n}get documentId(){return this.#s.documentId}async#u(){try{await this.#s.whenReady();const t=this.#s.doc();this.#e.forEach(e=>this.#y(e,t))}catch{console.log("sync with peers threw an exception")}}async#c({data:t}){this.#t("broadcastToPeers",this.#e),this.#e.forEach(e=>this.#h(e,t))}#h(t,e){this.#t(`sendEphemeralMessage ->${t}`);const s={type:"ephemeral",targetId:t,documentId:this.#s.documentId,data:e};this.emit("message",s)}#m(t,e){this.#f(t),t in this.#n||(this.#n[t]="unknown");const s=this.#r[t];if(s){e(s);return}let r=this.#i[t];r||(this.#p(t).then(a=>{this.#_(t,a??P8())}).catch(a=>{this.#t(`Error loading sync state for ${t}: ${a}`)}),r=this.#i[t]=[]),r.push(e)}#f(t){this.#e.includes(t)||(this.#e.push(t),this.emit("open-doc",{documentId:this.documentId,peerId:t}))}#_(t,e){const s=this.#i[t];if(s)for(const r of s)r(e);delete this.#i[t],this.#r[t]=e}#d(t,e){this.#r[t]=e,this.emit("sync-state",{peerId:t,syncState:e,documentId:this.#s.documentId})}#y(t,e){this.#t(`sendSyncMessage ->${t}`),this.#m(t,s=>{const r=performance.now(),[a,u]=I8(e,s),h=performance.now();if(this.emit("metrics",{type:"generate-sync-message",documentId:this.#s.documentId,durationMillis:h-r,forPeer:t}),this.#d(t,a),u){const p=Ur(e).length===0;!this.#s.isReady()&&p&&a.sharedHeads.length===0&&!Object.values(this.#n).includes("has")&&this.#n[t]==="unknown"?this.emit("message",{type:"request",targetId:t,documentId:this.#s.documentId,data:u}):this.emit("message",{type:"sync",targetId:t,data:u,documentId:this.#s.documentId}),p||(this.#n[t]="has")}})}hasPeer(t){return this.#e.includes(t)}async beginSync(t){this.#s.whenReady([Pr,ep,ps]).then(()=>{this.#l=!0,this.#g()}).catch(s=>{console.log("caught whenready",s),this.#l=!0,this.#g()}),this.#e.some(s=>this.#n[s]=="has")&&await this.#s.whenReady(),t.forEach(s=>{this.#m(s,r=>{const a=sA(iA(r));this.#d(s,a),this.#s.whenReady([Pr,ep,ps]).then(()=>{const u=this.#s.isReady()?this.#s.doc():Us(),h=t.every(m=>this.#n[m]in["unavailable","wants"]);u===void 0&&h||this.#y(s,u??Us())}).catch(u=>{this.#t(`Error loading doc for ${s}: ${u}`)})})})}endSync(t){this.#t(`removing peer ${t}`),this.#e=this.#e.filter(e=>e!==t),delete this.#n[t],this.#g()}receiveMessage(t){switch(t.type){case"sync":case"request":this.receiveSyncMessage(t);break;case"ephemeral":this.receiveEphemeralMessage(t);break;case"doc-unavailable":this.#n[t.senderId]="unavailable",this.#g();break;default:throw new Error(`unknown message type: ${t}`)}}receiveEphemeralMessage(t){if(t.documentId!==this.#s.documentId)throw new Error("channelId doesn't match documentId");const{senderId:e,data:s}=t,r=qA(new Uint8Array(s));this.#s.emit("ephemeral-message",{handle:this.#s,senderId:e,message:r}),this.#e.forEach(a=>{a!==e&&this.emit("message",{...t,targetId:a})})}receiveSyncMessage(t){if(t.documentId!==this.#s.documentId)throw new Error("channelId doesn't match documentId");if(!this.#s.inState([Pr,ep,ps])){this.#o.push({message:t,received:new Date});return}this.#b(),this.#v(t)}#v(t){$A(t)&&(this.#n[t.senderId]="wants"),this.#g(),z8(t.data).heads.length>0&&(this.#n[t.senderId]="has"),this.#m(t.senderId,e=>{this.#s.update(s=>{const r=performance.now(),[a,u]=N8(s,e,t.data),h=performance.now();return this.emit("metrics",{type:"receive-sync-message",documentId:this.#s.documentId,durationMillis:h-r,fromPeer:t.senderId,...bv(s)}),this.#d(t.senderId,u),this.#y(t.senderId,s),a}),this.#g()})}#g(){this.#l&&this.#s.inState([ep,ps])&&this.#e.every(t=>this.#n[t]==="unavailable"||this.#n[t]==="wants")&&(this.#e.filter(t=>this.#n[t]==="wants").forEach(t=>{this.#n[t]="unavailable";const e={type:"doc-unavailable",documentId:this.#s.documentId,targetId:t};this.emit("message",e)}),this.#s.unavailable())}#b(){for(const t of this.#o)this.#v(t.message);this.#o=[]}metrics(){return{peers:this.#e,size:this.#s.metrics()}}}const Sa=Io("automerge-repo:collectionsync");class HR extends eE{repo;#t=new Set;docSynchronizers={};#e={};#i;#n=new Map;constructor(t,e=[]){super(),this.repo=t,this.#i=e.map(s=>$c(s).documentId)}#r(t){return this.docSynchronizers[t.documentId]||(this.docSynchronizers[t.documentId]=this.#o(t)),this.docSynchronizers[t.documentId]}#o(t){const e=new BR({handle:t,peerId:this.repo.networkSubsystem.peerId,onLoadSyncState:async s=>{if(!this.repo.storageSubsystem)return;const{storageId:r,isEphemeral:a}=this.repo.peerMetadataByPeerId[s]||{};if(!(!r||a))return this.repo.storageSubsystem.loadSyncState(t.documentId,r)}});return e.on("message",s=>this.emit("message",s)),e.on("open-doc",s=>this.emit("open-doc",s)),e.on("sync-state",s=>this.emit("sync-state",s)),e.on("metrics",s=>this.emit("metrics",s)),e}async#a(t){const e=Array.from(this.#t),s=[];for(const r of e)await this.#l(r,t)&&s.push(r);return s}async receiveMessage(t){Sa(`onSyncMessage: ${t.senderId}, ${t.documentId}, ${"data"in t?t.data.byteLength+"bytes":""}`);const e=t.documentId;if(!e)throw new Error("received a message with an invalid documentId");if(this.#i.includes(e)){this.emit("metrics",{type:"doc-denied",documentId:e}),this.emit("message",{type:"doc-unavailable",documentId:e,targetId:t.senderId});return}if(t.type==="request"&&(this.#n.has(e)||this.#n.set(e,new Set),this.#n.get(e)?.add(t.senderId)),!await this.repo.shareConfig.access(t.senderId,e)){Sa("access denied"),this.emit("message",{type:"doc-unavailable",documentId:e,targetId:t.senderId});return}this.#e[e]=!0;const r=await this.repo.find(e,{allowableStates:["ready","unavailable","requesting"]}),a=this.#r(r);a.receiveMessage(t);const u=await this.#a(e);a.beginSync(u.filter(h=>!a.hasPeer(h)))}addDocument(t){if(this.#e[t.documentId])return;this.#e[t.documentId]=!0;const e=this.#r(t);this.#a(t.documentId).then(s=>{e.beginSync(s)})}removeDocument(t){Sa(`removing document ${t}`);const e=this.docSynchronizers[t];e!==void 0&&this.peers.forEach(s=>e.endSync(s)),delete this.docSynchronizers[t],delete this.#e[t]}addPeer(t){if(Sa(`adding ${t} & synchronizing with them`),!this.#t.has(t)){this.#t.add(t);for(const e of Object.values(this.docSynchronizers)){const{documentId:s}=e;this.#l(t,s).then(r=>{r&&e.beginSync([t])})}}}removePeer(t){Sa(`removing peer ${t}`),this.#t.delete(t);for(const e of this.#n.values())e.delete(t);for(const e of Object.values(this.docSynchronizers))e.endSync(t)}get peers(){return Array.from(this.#t)}async reevaluateDocumentShare(){const t=Array.from(this.#t),e=[];for(const s of Object.values(this.docSynchronizers)){const r=s.documentId;e.push((async()=>{for(const a of t){const u=await this.#l(a,r),h=s.hasPeer(a);Sa(`reevaluateDocumentShare: ${a} for ${r}, shouldShare: ${u}, isAlreadySyncing: ${h}`),u&&!h?(Sa(`reevaluateDocumentShare: starting sync with ${a} for ${r}`),s.beginSync([a])):!u&&h&&(Sa(`reevaluateDocumentShare: stopping sync with ${a} for ${r}`),s.endSync(a))}})().catch(a=>{console.log(`error reevaluating document share for ${r}: ${a}`)}))}await Promise.allSettled(e)}metrics(){return Object.fromEntries(Object.entries(this.docSynchronizers).map(([t,e])=>[t,e.metrics()]))}async#l(t,e){const[s,r]=await Promise.all([this.repo.shareConfig.announce(t,e),this.repo.shareConfig.access(t,e)]),a=this.#n.get(e)?.has(t)??!1;return s||r&&a}}function VR(){return"peer-"+Math.random().toString(36).slice(4)}class jR extends Zl{#t;networkSubsystem;storageSubsystem;#e;#i;#n={};synchronizer;#r={announce:async()=>!0,access:async()=>!0};peerMetadataByPeerId={};#o=new AR;#a=!1;#l={};#s={};#p;constructor({storage:t,network:e=[],peerId:s=VR(),sharePolicy:r,shareConfig:a,isEphemeral:u=t===void 0,enableRemoteHeadsGossiping:h=!1,denylist:p=[],saveDebounceRate:m=100,idFactory:y}={}){if(super(),this.#a=h,this.#t=Io("automerge-repo:repo"),this.#p=y||null,r!=null&&a!=null)throw new Error("cannot provide both sharePolicy and shareConfig at once");r&&(this.#r={announce:r,access:async()=>!0}),a&&(this.#r=a),this.on("delete-document",({documentId:x})=>{this.synchronizer.removeDocument(x),_&&_.removeDoc(x).catch(A=>{this.#t("error deleting document",{documentId:x,err:A})})}),this.synchronizer=new HR(this,p),this.synchronizer.on("message",x=>{this.#t(`sending ${x.type} message to ${x.targetId}`),S.send(x)}),this.synchronizer.on("metrics",x=>this.emit("doc-metrics",x)),this.#a&&this.synchronizer.on("open-doc",({peerId:x,documentId:A})=>{this.#o.subscribePeerToDoc(x,A)});const _=t?new UR(t):void 0;_&&(_.on("document-loaded",x=>this.emit("doc-metrics",{type:"doc-loaded",...x})),_.on("doc-compacted",x=>this.emit("doc-metrics",{type:"doc-compacted",...x})),_.on("doc-saved",x=>this.emit("doc-metrics",{type:"doc-saved",...x}))),this.storageSubsystem=_,this.#e=m,this.storageSubsystem?this.#i=({handle:x,doc:A})=>{let E=this.#s[x.documentId];E||(E=_y(({doc:R,handle:z})=>{this.storageSubsystem.saveDoc(z.documentId,R)},this.#e),this.#s[x.documentId]=E),E({handle:x,doc:A})}:this.#i=()=>{};const b=(async()=>({storageId:await _?.id(),isEphemeral:u}))(),S=new DR(e,s,b);this.networkSubsystem=S,S.on("peer",async({peerId:x,peerMetadata:A})=>{this.#t("peer connected",{peerId:x}),A&&(this.peerMetadataByPeerId[x]={...A}),this.#r.announce(x).then(E=>{E&&this.#a&&this.#o.addGenerousPeer(x)}).catch(E=>{console.log("error in share policy",{err:E})}),this.synchronizer.addPeer(x)}),S.on("peer-disconnected",({peerId:x})=>{this.synchronizer.removePeer(x),this.#o.removePeer(x)}),S.on("message",async x=>{this.#c(x)}),this.synchronizer.on("sync-state",x=>{this.#m(x);const A=this.#n[x.documentId],{storageId:E}=this.peerMetadataByPeerId[x.peerId]||{};if(!E)return;const R=A.getSyncInfo(E)?.lastHeads;x.syncState.theirHeads&&(!R||!zv(R,rr(x.syncState.theirHeads)))&&x.syncState.theirHeads&&(A.setSyncInfo(E,{lastHeads:rr(x.syncState.theirHeads),lastSyncTimestamp:Date.now()}),E&&this.#a&&this.#o.handleImmediateRemoteHeadsChanged(x.documentId,E,rr(x.syncState.theirHeads)))}),this.#a&&(this.#o.on("notify-remote-heads",x=>{this.networkSubsystem.send({type:"remote-heads-changed",targetId:x.targetId,documentId:x.documentId,newHeads:{[x.storageId]:{heads:x.heads,timestamp:x.timestamp}}})}),this.#o.on("change-remote-subs",x=>{this.#t("change-remote-subs",x);for(const A of x.peers)this.networkSubsystem.send({type:"remote-subscription-change",targetId:A,add:x.add,remove:x.remove})}),this.#o.on("remote-heads-changed",({documentId:x,storageId:A,remoteHeads:E,timestamp:R})=>{this.#n[x].setSyncInfo(A,{lastHeads:E,lastSyncTimestamp:R})}))}#u(t){this.storageSubsystem&&(t.listeners("heads-changed").some(s=>s===this.#i)||t.on("heads-changed",this.#i)),this.synchronizer.addDocument(t)}#c(t){switch(t.type){case"remote-subscription-change":this.#a&&this.#o.handleControlMessage(t);break;case"remote-heads-changed":this.#a&&this.#o.handleRemoteHeads(t);break;case"sync":case"request":case"ephemeral":case"doc-unavailable":this.synchronizer.receiveMessage(t).catch(e=>{console.log("error receiving message",{err:e,message:t})})}}#h={};#m(t){if(!this.storageSubsystem)return;const{storageId:e,isEphemeral:s}=this.peerMetadataByPeerId[t.peerId]||{};if(!e||s)return;let r=this.#h[e];r||(r=this.#h[e]=_y(({documentId:a,syncState:u})=>{this.storageSubsystem.saveSyncState(a,e,u)},this.#e)),r(t)}#f({documentId:t}){if(this.#n[t])return this.#n[t];if(!t)throw new Error(`Invalid documentId ${t}`);const e=new Wp(t);return this.#n[t]=e,e}get handles(){return this.#n}get peers(){return this.synchronizer.peers}get peerId(){return this.networkSubsystem.peerId}get sharePolicy(){return this.#r.announce}set sharePolicy(t){this.#r.announce=t}get shareConfig(){return this.#r}set shareConfig(t){this.#r=t}getStorageIdOfPeer(t){return this.peerMetadataByPeerId[t]?.storageId}create(t){let e;t?e=_S(t):e=gS(Us());const{documentId:s}=$c(FS()),r=this.#f({documentId:s});return this.#u(r),r.update(()=>e),r.doneLoading(),r}async create2(t){let e;t?e=_S(t):e=gS(Us());let{documentId:s}=$c(FS());if(this.#p){const a=await this.#p(Ur(e));s=Xh(a)}const r=this.#f({documentId:s});return this.#u(r),r.update(()=>e),r.doneLoading(),r}clone(t){if(!t.isReady())throw new Error(`Cloned handle is not yet in ready state.
        (Try await handle.whenReady() first.)`);const e=t.doc(),s=this.create();return s.update(()=>Up(e)),s}findWithProgress(t,e={}){const{signal:s}=e,{documentId:r,heads:a}=NA(t)?$c(t):{documentId:$d(t),heads:void 0};if(this.#n[r]){const _=this.#n[r];if(_.state===ps)return{state:"unavailable",error:new Error(`Document ${t} is unavailable`),handle:_};if(_.state===np)return{state:"failed",error:new Error(`Document ${t} was deleted`),handle:_};if(_.state===Pr)return{state:"ready",handle:a?_.view(a):_}}const u=this.#l[r];if(u){const _=this.#n[r];if(_&&(_.state===Pr||_.state===ps||_.state===np||_.state==="loading"))return u}const h=this.#f({documentId:r}),p={state:"loading",progress:0,handle:h},m={subscribers:new Set,currentProgress:void 0,notify:_=>{m.currentProgress=_,m.subscribers.forEach(b=>b(_)),this.#l[r]=_},peek:()=>m.currentProgress||p,subscribe:_=>(m.subscribers.add(_),()=>m.subscribers.delete(_))};m.notify(p),this.#_(t,r,h,m,s?r2(new Promise(()=>{}),s):new Promise(()=>{}));const y={...p,peek:m.peek,subscribe:m.subscribe};return this.#l[r]=y,y}async#_(t,e,s,r,a){try{r.notify({state:"loading",progress:25,handle:s});const u=await(this.storageSubsystem?this.storageSubsystem.loadDoc(s.documentId):Promise.resolve(null)),h=await Promise.race([u,a]);if(h?(s.update(()=>h),s.doneLoading(),r.notify({state:"loading",progress:50,handle:s})):(await Promise.race([this.networkSubsystem.whenReady(),a]),s.request(),r.notify({state:"loading",progress:75,handle:s})),this.#u(s),await Promise.race([s.whenReady([Pr,ps]),a]),s.state===ps){const p={state:"unavailable",handle:s};r.notify(p);return}if(s.state===np)throw new Error(`Document ${t} was deleted`);r.notify({state:"ready",handle:s})}catch(u){r.notify({state:"failed",error:u instanceof Error||u instanceof DOMException?u:new Error(String(u)),handle:this.#f({documentId:e})})}}async find(t,e={}){const{allowableStates:s=["ready"],signal:r}=e;if(r?.aborted)throw new km;const a=this.findWithProgress(t,{signal:r});if("subscribe"in a)return this.#u(a.handle),new Promise((u,h)=>{const p=a.subscribe(m=>{s.includes(m.handle.state)?(p(),u(m.handle)):m.state==="unavailable"?(p(),h(new Error(`Document ${t} is unavailable`))):m.state==="failed"&&(p(),h(m.error))})});if(a.handle.state===Pr)return a.handle;if(await a.handle.whenReady([Pr,ps]),a.handle.state==="unavailable"&&!s.includes(ps))throw new Error(`Document ${t} is unavailable`);return a.handle}async#d(t){if(this.#n[t])return this.#n[t];const e=this.#f({documentId:t}),s=await(this.storageSubsystem?this.storageSubsystem.loadDoc(e.documentId):Promise.resolve(null));return s?(e.update(()=>s),e.doneLoading()):(await this.networkSubsystem.whenReady(),e.request()),this.#u(e),e}async findClassic(t,e={}){const s=$d(t),{allowableStates:r,signal:a}=e;return r2((async()=>{const u=await this.#d(s);if(!r&&(await u.whenReady([Pr,ps]),u.state===ps&&!a?.aborted))throw new Error(`Document ${t} is unavailable`);return u})(),a)}delete(t){const e=$d(t);this.#f({documentId:e}).delete(),delete this.#n[e],delete this.#l[e],delete this.#s[e],this.emit("delete-document",{documentId:e})}async export(t){const e=$d(t),r=(await this.find(e)).doc();return nA(r)}import(t,e){const s=e?.docId;if(s!=null){const r=this.#f({documentId:s});return r.update(a=>vv(a,t)),this.#u(r),r}else{const r=D8(t),a=this.create();return a.update(()=>Up(r)),a}}subscribeToRemotes=t=>{this.#a?(this.#t("subscribeToRemotes",{remotes:t}),this.#o.subscribeToRemotes(t)):this.#t("WARN: subscribeToRemotes called but remote heads gossiping is not enabled")};storageId=async()=>{if(this.storageSubsystem)return this.storageSubsystem.id()};async flush(t){if(!this.storageSubsystem)return;const e=t?t.map(s=>this.#n[s]):Object.values(this.#n);await Promise.all(e.map(async s=>this.storageSubsystem.saveDoc(s.documentId,s.doc())))}async removeFromCache(t){if(!this.#n[t]){this.#t(`WARN: removeFromCache called but handle not found in handleCache for documentId: ${t}`);return}const e=this.#f({documentId:t});await e.whenReady([Pr,yR,np,ps]),e.doc()?(e.isReady()?e.unload():this.#t(`WARN: removeFromCache called but handle for documentId: ${t} in unexpected state: ${e.state}`),delete this.#n[t],delete this.#l[t],delete this.#s[t],this.synchronizer.removeDocument(t)):this.#t(`WARN: removeFromCache called but doc undefined for documentId: ${t}`)}shutdown(){return this.networkSubsystem.adapters.forEach(t=>{t.disconnect()}),this.flush()}metrics(){return{documents:this.synchronizer.metrics()}}shareConfigChanged(){this.synchronizer.reevaluateDocumentShare()}}class qR extends Zl{peerId;peerMetadata}const GR="/build/fix-title/assets/automerge_wasm_bg-BQ4CNPIj.wasm",ZR=async(n={},t)=>{let e;if(t.startsWith("data:")){const s=t.replace(/^data:.*?base64,/,"");let r;if(typeof Buffer=="function"&&typeof Buffer.from=="function")r=Buffer.from(s,"base64");else if(typeof atob=="function"){const a=atob(s);r=new Uint8Array(a.length);for(let u=0;u<a.length;u++)r[u]=a.charCodeAt(u)}else throw new Error("Cannot decode base64-encoded data URL");e=await WebAssembly.instantiate(r,n)}else{const s=await fetch(t),r=s.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&r.startsWith("application/wasm"))e=await WebAssembly.instantiateStreaming(s,n);else{const a=await s.arrayBuffer();e=await WebAssembly.instantiate(a,n)}}return e.instance.exports};class zs{static __wrap(t){t=t>>>0;const e=Object.create(zs.prototype);return e.__wbg_ptr=t,d2.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,d2.unregister(this),t}free(){const t=this.__destroy_into_raw();_t.__wbg_automerge_free(t,0)}applyAndReturnPatches(t,e){const s=_t.automerge_applyAndReturnPatches(this.__wbg_ptr,t,e);if(s[2])throw Lt(s[1]);return Lt(s[0])}applyChanges(t){const e=_t.automerge_applyChanges(this.__wbg_ptr,t);if(e[1])throw Lt(e[0])}applyPatches(t,e){const s=_t.automerge_applyPatches(this.__wbg_ptr,t,e);if(s[2])throw Lt(s[1]);return Lt(s[0])}clone(t){var e=Zi(t)?0:or(t,_t.__wbindgen_malloc,_t.__wbindgen_realloc),s=gs;const r=_t.automerge_clone(this.__wbg_ptr,e,s);if(r[2])throw Lt(r[1]);return zs.__wrap(r[0])}commit(t,e){var s=Zi(t)?0:or(t,_t.__wbindgen_malloc,_t.__wbindgen_realloc),r=gs;return _t.automerge_commit(this.__wbg_ptr,s,r,!Zi(e),Zi(e)?0:e)}delete(t,e){const s=_t.automerge_delete(this.__wbg_ptr,t,e);if(s[1])throw Lt(s[0])}diff(t,e){const s=_t.automerge_diff(this.__wbg_ptr,t,e);if(s[2])throw Lt(s[1]);return Lt(s[0])}diffIncremental(){const t=_t.automerge_diffIncremental(this.__wbg_ptr);if(t[2])throw Lt(t[1]);return Lt(t[0])}diffPath(t,e,s,r){const a=_t.automerge_diffPath(this.__wbg_ptr,t,e,s,r);if(a[2])throw Lt(a[1]);return Lt(a[0])}dump(){_t.automerge_dump(this.__wbg_ptr)}emptyChange(t,e){var s=Zi(t)?0:or(t,_t.__wbindgen_malloc,_t.__wbindgen_realloc),r=gs;return _t.automerge_emptyChange(this.__wbg_ptr,s,r,!Zi(e),Zi(e)?0:e)}enableFreeze(t){const e=_t.automerge_enableFreeze(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return e[0]!==0}fork(t,e){var s=Zi(t)?0:or(t,_t.__wbindgen_malloc,_t.__wbindgen_realloc),r=gs;const a=_t.automerge_fork(this.__wbg_ptr,s,r,e);if(a[2])throw Lt(a[1]);return zs.__wrap(a[0])}generateSyncMessage(t){return Cl(t,Qi),_t.automerge_generateSyncMessage(this.__wbg_ptr,t.__wbg_ptr)}get(t,e,s){const r=_t.automerge_get(this.__wbg_ptr,t,e,s);if(r[2])throw Lt(r[1]);return Lt(r[0])}getActorId(){let t,e;try{const s=_t.automerge_getActorId(this.__wbg_ptr);return t=s[0],e=s[1],Bs(s[0],s[1])}finally{_t.__wbindgen_free(t,e,1)}}getAll(t,e,s){const r=_t.automerge_getAll(this.__wbg_ptr,t,e,s);if(r[2])throw Lt(r[1]);return Lt(r[0])}getBlock(t,e,s){const r=_t.automerge_getBlock(this.__wbg_ptr,t,e,s);if(r[2])throw Lt(r[1]);return Lt(r[0])}getChangeByHash(t){const e=_t.automerge_getChangeByHash(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}getChangeMetaByHash(t){const e=_t.automerge_getChangeMetaByHash(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}getChanges(t){const e=_t.automerge_getChanges(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}getChangesAdded(t){return Cl(t,zs),_t.automerge_getChangesAdded(this.__wbg_ptr,t.__wbg_ptr)}getChangesMeta(t){const e=_t.automerge_getChangesMeta(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}getCursor(t,e,s,r){let a,u;try{const m=_t.automerge_getCursor(this.__wbg_ptr,t,e,s,r);var h=m[0],p=m[1];if(m[3])throw h=0,p=0,Lt(m[2]);return a=h,u=p,Bs(h,p)}finally{_t.__wbindgen_free(a,u,1)}}getCursorPosition(t,e,s){const r=_t.automerge_getCursorPosition(this.__wbg_ptr,t,e,s);if(r[2])throw Lt(r[1]);return r[0]}getDecodedChangeByHash(t){const e=_t.automerge_getDecodedChangeByHash(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}getHeads(){return _t.automerge_getHeads(this.__wbg_ptr)}getLastLocalChange(){return _t.automerge_getLastLocalChange(this.__wbg_ptr)}getMissingDeps(t){const e=_t.automerge_getMissingDeps(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}getWithType(t,e,s){const r=_t.automerge_getWithType(this.__wbg_ptr,t,e,s);if(r[2])throw Lt(r[1]);return Lt(r[0])}hasOurChanges(t){return Cl(t,Qi),_t.automerge_hasOurChanges(this.__wbg_ptr,t.__wbg_ptr)!==0}increment(t,e,s){const r=_t.automerge_increment(this.__wbg_ptr,t,e,s);if(r[1])throw Lt(r[0])}insert(t,e,s,r){const a=_t.automerge_insert(this.__wbg_ptr,t,e,s,r);if(a[1])throw Lt(a[0])}insertObject(t,e,s){let r,a;try{const p=_t.automerge_insertObject(this.__wbg_ptr,t,e,s);var u=p[0],h=p[1];if(p[3])throw u=0,h=0,Lt(p[2]);return r=u,a=h,Bs(u,h)}finally{_t.__wbindgen_free(r,a,1)}}integrate(){_t.automerge_integrate(this.__wbg_ptr)}isolate(t){const e=_t.automerge_isolate(this.__wbg_ptr,t);if(e[1])throw Lt(e[0])}joinBlock(t,e){const s=_t.automerge_joinBlock(this.__wbg_ptr,t,e);if(s[1])throw Lt(s[0])}keys(t,e){const s=_t.automerge_keys(this.__wbg_ptr,t,e);if(s[2])throw Lt(s[1]);return Lt(s[0])}length(t,e){const s=_t.automerge_length(this.__wbg_ptr,t,e);if(s[2])throw Lt(s[1]);return s[0]}loadIncremental(t){const e=_t.automerge_loadIncremental(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return e[0]}mark(t,e,s,r,a){const u=_t.automerge_mark(this.__wbg_ptr,t,e,s,r,a);if(u[1])throw Lt(u[0])}marks(t,e){const s=_t.automerge_marks(this.__wbg_ptr,t,e);if(s[2])throw Lt(s[1]);return Lt(s[0])}marksAt(t,e,s){const r=_t.automerge_marksAt(this.__wbg_ptr,t,e,s);if(r[2])throw Lt(r[1]);return Lt(r[0])}materialize(t,e,s){const r=_t.automerge_materialize(this.__wbg_ptr,t,e,s);if(r[2])throw Lt(r[1]);return Lt(r[0])}merge(t){Cl(t,zs);const e=_t.automerge_merge(this.__wbg_ptr,t.__wbg_ptr);if(e[2])throw Lt(e[1]);return Lt(e[0])}static new(t){var e=Zi(t)?0:or(t,_t.__wbindgen_malloc,_t.__wbindgen_realloc),s=gs;const r=_t.automerge_new(e,s);if(r[2])throw Lt(r[1]);return zs.__wrap(r[0])}objInfo(t,e){const s=_t.automerge_objInfo(this.__wbg_ptr,t,e);if(s[2])throw Lt(s[1]);return Lt(s[0])}pendingOps(){return _t.automerge_pendingOps(this.__wbg_ptr)}push(t,e,s){const r=_t.automerge_push(this.__wbg_ptr,t,e,s);if(r[1])throw Lt(r[0])}pushObject(t,e){let s,r;try{const h=_t.automerge_pushObject(this.__wbg_ptr,t,e);var a=h[0],u=h[1];if(h[3])throw a=0,u=0,Lt(h[2]);return s=a,r=u,Bs(a,u)}finally{_t.__wbindgen_free(s,r,1)}}put(t,e,s,r){const a=_t.automerge_put(this.__wbg_ptr,t,e,s,r);if(a[1])throw Lt(a[0])}putObject(t,e,s){const r=_t.automerge_putObject(this.__wbg_ptr,t,e,s);if(r[2])throw Lt(r[1]);return Lt(r[0])}receiveSyncMessage(t,e){Cl(t,Qi);const s=_t.automerge_receiveSyncMessage(this.__wbg_ptr,t.__wbg_ptr,e);if(s[1])throw Lt(s[0])}registerDatatype(t,e,s){const r=_t.automerge_registerDatatype(this.__wbg_ptr,t,e,s);if(r[1])throw Lt(r[0])}resetDiffCursor(){_t.automerge_resetDiffCursor(this.__wbg_ptr)}rollback(){return _t.automerge_rollback(this.__wbg_ptr)}save(){return _t.automerge_save(this.__wbg_ptr)}saveAndVerify(){const t=_t.automerge_saveAndVerify(this.__wbg_ptr);if(t[2])throw Lt(t[1]);return Lt(t[0])}saveBundle(t){const e=_t.automerge_saveBundle(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}saveIncremental(){return _t.automerge_saveIncremental(this.__wbg_ptr)}saveNoCompress(){return _t.automerge_saveNoCompress(this.__wbg_ptr)}saveSince(t){const e=_t.automerge_saveSince(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}spans(t,e){const s=_t.automerge_spans(this.__wbg_ptr,t,e);if(s[2])throw Lt(s[1]);return Lt(s[0])}splice(t,e,s,r){const a=_t.automerge_splice(this.__wbg_ptr,t,e,s,r);if(a[1])throw Lt(a[0])}splitBlock(t,e,s){const r=_t.automerge_splitBlock(this.__wbg_ptr,t,e,s);if(r[1])throw Lt(r[0])}stats(){return _t.automerge_stats(this.__wbg_ptr)}text(t,e){let s,r;try{const h=_t.automerge_text(this.__wbg_ptr,t,e);var a=h[0],u=h[1];if(h[3])throw a=0,u=0,Lt(h[2]);return s=a,r=u,Bs(a,u)}finally{_t.__wbindgen_free(s,r,1)}}toJS(t){const e=_t.automerge_toJS(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}topoHistoryTraversal(){return _t.automerge_topoHistoryTraversal(this.__wbg_ptr)}unmark(t,e,s){const r=_t.automerge_unmark(this.__wbg_ptr,t,e,s);if(r[1])throw Lt(r[0])}updateBlock(t,e,s){const r=_t.automerge_updateBlock(this.__wbg_ptr,t,e,s);if(r[1])throw Lt(r[0])}updateDiffCursor(){_t.automerge_updateDiffCursor(this.__wbg_ptr)}updateSpans(t,e,s){const r=_t.automerge_updateSpans(this.__wbg_ptr,t,e,s);if(r[1])throw Lt(r[0])}updateText(t,e){const s=_t.automerge_updateText(this.__wbg_ptr,t,e);if(s[1])throw Lt(s[0])}}Symbol.dispose&&(zs.prototype[Symbol.dispose]=zs.prototype.free);class Qi{static __wrap(t){t=t>>>0;const e=Object.create(Qi.prototype);return e.__wbg_ptr=t,p2.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,p2.unregister(this),t}free(){const t=this.__destroy_into_raw();_t.__wbg_syncstate_free(t,0)}clone(){const t=_t.syncstate_clone(this.__wbg_ptr);return Qi.__wrap(t)}get lastSentHeads(){return _t.syncstate_lastSentHeads(this.__wbg_ptr)}set lastSentHeads(t){const e=_t.syncstate_set_lastSentHeads(this.__wbg_ptr,t);if(e[1])throw Lt(e[0])}set sentHashes(t){const e=_t.syncstate_set_sentHashes(this.__wbg_ptr,t);if(e[1])throw Lt(e[0])}get sharedHeads(){return _t.syncstate_sharedHeads(this.__wbg_ptr)}}Symbol.dispose&&(Qi.prototype[Symbol.dispose]=Qi.prototype.free);function WR(n){const t=_t.create(n);if(t[2])throw Lt(t[1]);return zs.__wrap(t[0])}function FR(n){const t=_t.decodeChange(n);if(t[2])throw Lt(t[1]);return Lt(t[0])}function YR(n){const t=_t.decodeSyncMessage(n);if(t[2])throw Lt(t[1]);return Lt(t[0])}function XR(n){const t=_t.decodeSyncState(n);if(t[2])throw Lt(t[1]);return Qi.__wrap(t[0])}function QR(n){const t=_t.encodeChange(n);if(t[2])throw Lt(t[1]);return Lt(t[0])}function $R(n){const t=_t.encodeSyncMessage(n);if(t[2])throw Lt(t[1]);return Lt(t[0])}function KR(n){return Cl(n,Qi),_t.encodeSyncState(n.__wbg_ptr)}function JR(n){return Cl(n,Qi),_t.exportSyncState(n.__wbg_ptr)}function tI(n){const t=_t.importSyncState(n);if(t[2])throw Lt(t[1]);return Qi.__wrap(t[0])}function eI(){const n=_t.initSyncState();return Qi.__wrap(n)}function nI(n,t){const e=_t.load(n,t);if(e[2])throw Lt(e[1]);return zs.__wrap(e[0])}function iI(n){const t=_t.readBundle(n);if(t[2])throw Lt(t[1]);return Lt(t[0])}function sI(){return _t.wasmReleaseInfo()}function rI(n){return BigInt(n)}function oI(n,t){return Error(Bs(n,t))}function aI(n,t){const e=String(t),s=or(e,_t.__wbindgen_malloc,_t.__wbindgen_realloc),r=gs;Ki().setInt32(n+4,r,!0),Ki().setInt32(n+0,s,!0)}function lI(n){const t=n,e=typeof t=="boolean"?t:void 0;return Zi(e)?16777215:e?1:0}function cI(n,t){const e=gy(t),s=or(e,_t.__wbindgen_malloc,_t.__wbindgen_realloc),r=gs;Ki().setInt32(n+4,r,!0),Ki().setInt32(n+0,s,!0)}function uI(n,t){return n>t}function hI(n){return typeof n=="bigint"}function fI(n){return typeof n=="function"}function dI(n){return n===null}function pI(n){const t=n;return typeof t=="object"&&t!==null}function mI(n){return typeof n=="string"}function _I(n){return n===void 0}function gI(n,t){return n==t}function yI(n,t){return n<t}function vI(n){return-n}function bI(n,t){const e=t,s=typeof e=="number"?e:void 0;Ki().setFloat64(n+8,Zi(s)?0:s,!0),Ki().setInt32(n+0,!Zi(s),!0)}function wI(n,t){const e=t,s=typeof e=="string"?e:void 0;var r=Zi(s)?0:or(s,_t.__wbindgen_malloc,_t.__wbindgen_realloc),a=gs;Ki().setInt32(n+4,a,!0),Ki().setInt32(n+0,r,!0)}function xI(n,t){throw new Error(Bs(n,t))}function SI(){return Fr(function(n,t,e){return Reflect.apply(n,t,e)},arguments)}function TI(n,t){return Object.assign(n,t)}function AI(){return Fr(function(n,t){return n.call(t)},arguments)}function EI(){return Fr(function(n,t,e){return n.call(t,e)},arguments)}function CI(n,t){return n.concat(t)}function LI(n,t,e){return Object.defineProperty(n,t,e)}function MI(){return Fr(function(n,t){return Reflect.deleteProperty(n,t)},arguments)}function kI(n){return n.done}function OI(n){return Object.entries(n)}function DI(n,t){let e,s;try{e=n,s=t,console.error(Bs(n,t))}finally{_t.__wbindgen_free(e,s,1)}}function RI(n,t){return Symbol.for(Bs(n,t))}function II(n){return Object.freeze(n)}function NI(n){return Array.from(n)}function PI(){return Fr(function(n,t){globalThis.crypto.getRandomValues(Bv(n,t))},arguments)}function zI(n){return n.getTime()}function UI(n,t){return n[t>>>0]}function BI(){return Fr(function(n,t){return Reflect.get(n,t)},arguments)}function HI(n){let t;try{t=n instanceof ArrayBuffer}catch{t=!1}return t}function VI(n){let t;try{t=n instanceof Date}catch{t=!1}return t}function jI(n){let t;try{t=n instanceof Object}catch{t=!1}return t}function qI(n){let t;try{t=n instanceof Uint8Array}catch{t=!1}return t}function GI(n){return Array.isArray(n)}function ZI(n){return Array.isArray(n)}function WI(){return Symbol.iterator}function FI(n){return Object.keys(n)}function YI(n){return n.length}function XI(n){return n.length}function QI(n){return n.length}function $I(n){console.log(n)}function KI(n,t){console.log(n,t)}function JI(n){return new Date(n)}function tN(){return new Object}function eN(){return new Array}function nN(n,t){return new Error(Bs(n,t))}function iN(){return new Error}function sN(n,t){return new RangeError(Bs(n,t))}function rN(n){return new Uint8Array(n)}function oN(n,t){return new Uint8Array(Bv(n,t))}function aN(){return Fr(function(n){return n.next()},arguments)}function lN(n){return n.next}function cN(){return Fr(function(n){return Reflect.ownKeys(n)},arguments)}function uN(n,t,e){Uint8Array.prototype.set.call(Bv(n,t),e)}function hN(n,t){return n.push(t)}function fN(n,t,e){n[t]=e}function dN(){return Fr(function(n,t,e){return Reflect.set(n,t,e)},arguments)}function pN(n,t,e){n[t>>>0]=e}function mN(n,t,e){return n.slice(t>>>0,e>>>0)}function _N(n,t){const e=t.stack,s=or(e,_t.__wbindgen_malloc,_t.__wbindgen_realloc),r=gs;Ki().setInt32(n+4,r,!0),Ki().setInt32(n+0,s,!0)}function gN(n,t){const e=JSON.stringify(t);var s=Zi(e)?0:or(e,_t.__wbindgen_malloc,_t.__wbindgen_realloc),r=gs;Ki().setInt32(n+4,r,!0),Ki().setInt32(n+0,s,!0)}function yN(){return Fr(function(n,t){return n.toString(t)},arguments)}function vN(n,t,e){const s=t.toString(e),r=or(s,_t.__wbindgen_malloc,_t.__wbindgen_realloc),a=gs;Ki().setInt32(n+4,a,!0),Ki().setInt32(n+0,r,!0)}function bN(n){return n.toString()}function wN(n,t){return n.unshift(t)}function xN(n){return n.value}function SN(n){return Object.values(n)}function TN(n){return n}function AN(n){return n}function EN(n,t){return Bs(n,t)}function CN(n){return BigInt.asUintN(64,n)}function LN(){const n=_t.__wbindgen_externrefs,t=n.grow(4);n.set(0,void 0),n.set(t+0,void 0),n.set(t+1,null),n.set(t+2,!0),n.set(t+3,!1)}const d2=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_t.__wbg_automerge_free(n>>>0,1)),p2=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_t.__wbg_syncstate_free(n>>>0,1));function MN(n){const t=_t.__externref_table_alloc();return _t.__wbindgen_externrefs.set(t,n),t}function Cl(n,t){if(!(n instanceof t))throw new Error(`expected instance of ${t.name}`)}function gy(n){const t=typeof n;if(t=="number"||t=="boolean"||n==null)return`${n}`;if(t=="string")return`"${n}"`;if(t=="symbol"){const r=n.description;return r==null?"Symbol":`Symbol(${r})`}if(t=="function"){const r=n.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(n)){const r=n.length;let a="[";r>0&&(a+=gy(n[0]));for(let u=1;u<r;u++)a+=", "+gy(n[u]);return a+="]",a}const e=/\[object ([^\]]+)\]/.exec(toString.call(n));let s;if(e&&e.length>1)s=e[1];else return toString.call(n);if(s=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:s}function Bv(n,t){return n=n>>>0,Rh().subarray(n/1,n/1+t)}let Hc=null;function Ki(){return(Hc===null||Hc.buffer.detached===!0||Hc.buffer.detached===void 0&&Hc.buffer!==_t.memory.buffer)&&(Hc=new DataView(_t.memory.buffer)),Hc}function Bs(n,t){return n=n>>>0,ON(n,t)}let ip=null;function Rh(){return(ip===null||ip.byteLength===0)&&(ip=new Uint8Array(_t.memory.buffer)),ip}function Fr(n,t){try{return n.apply(this,t)}catch(e){const s=MN(e);_t.__wbindgen_exn_store(s)}}function Zi(n){return n==null}function or(n,t,e){if(e===void 0){const h=Ih.encode(n),p=t(h.length,1)>>>0;return Rh().subarray(p,p+h.length).set(h),gs=h.length,p}let s=n.length,r=t(s,1)>>>0;const a=Rh();let u=0;for(;u<s;u++){const h=n.charCodeAt(u);if(h>127)break;a[r+u]=h}if(u!==s){u!==0&&(n=n.slice(u)),r=e(r,s,s=u+n.length*3,1)>>>0;const h=Rh().subarray(r+u,r+s),p=Ih.encodeInto(n,h);u+=p.written,r=e(r,s,u,1)>>>0}return gs=u,r}function Lt(n){const t=_t.__wbindgen_externrefs.get(n);return _t.__externref_table_dealloc(n),t}let yp=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});yp.decode();const kN=2146435072;let k0=0;function ON(n,t){return k0+=t,k0>=kN&&(yp=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),yp.decode(),k0=t),yp.decode(Rh().subarray(n,n+t))}const Ih=new TextEncoder;"encodeInto"in Ih||(Ih.encodeInto=function(n,t){const e=Ih.encode(n);return t.set(e),{read:n.length,written:e.length}});let gs=0,_t;function DN(n){_t=n}URL=globalThis.URL;const At=await ZR({"./automerge_wasm_bg.js":{__wbg_new_8a6f238a6ece86ea:iN,__wbg_stack_0ed75d68575b0f3c:_N,__wbg_error_7534b8e9a36f1ab4:DI,__wbg_String_8f0eb39a4a4c2f66:aI,__wbg_set_3f1d0b984ed272ed:fN,__wbg_getRandomValues_1c61fac11405ffdc:PI,__wbg_log_6b5ca2e6124b2808:$I,__wbg_log_b948c93e3e66d64f:KI,__wbg_get_9b94d73e6221f75c:UI,__wbg_length_35a7bace40f36eac:XI,__wbg_new_3eb36ae241fe6f44:eN,__wbg_BigInt_b7bbccdff258c9f2:rI,__wbg_next_418f80d8f5303233:lN,__wbg_next_3482f54c49e8af19:aN,__wbg_done_57b39ecd9addfe81:kI,__wbg_value_0546255b415e96c1:xN,__wbg_iterator_6ff6560ca1568e55:WI,__wbg_get_b3ed3ad4be2bc8ac:BI,__wbg_call_389efe28435a9388:AI,__wbg_new_361308b2356cecd0:tN,__wbg_length_68dc7c5cf1b6d349:QI,__wbg_set_f43e577aea94465b:pN,__wbg_from_bddd64e7d5ff6941:NI,__wbg_isArray_d314bb98fcf08331:ZI,__wbg_push_8ffdcb2063340ba5:hN,__wbg_unshift_a4a28a3b4a2e621b:wN,__wbg_instanceof_ArrayBuffer_c367199e2fa2aa04:HI,__wbg_toString_3cadee6e7c22b39e:yN,__wbg_toString_56d946daff83867b:vN,__wbg_new_72b49615380db768:nN,__wbg_call_4708e0c13bdc8e95:EI,__wbg_instanceof_Date_1b9f15b87f10aa4c:VI,__wbg_getTime_1e3cd1391c5c3995:zI,__wbg_new_245cd5c49157e602:JI,__wbg_instanceof_Object_1c6af87502b733ed:jI,__wbg_assign_6170c0d04d5c26f4:TI,__wbg_defineProperty_fc8692a66be8fe2d:LI,__wbg_entries_58c7934c745daac7:OI,__wbg_freeze_661d9047fd889cd0:II,__wbg_keys_b50a709a76add04e:FI,__wbg_values_5da93bc719d272cf:SN,__wbg_new_911dabf69fa7eb20:sN,__wbg_apply_2e22c45cb4f12415:SI,__wbg_deleteProperty_8c8a05da881fea59:MI,__wbg_ownKeys_c7100fb5fa376c6f:cN,__wbg_set_6cb8631f80447a67:dN,__wbg_concat_f6e5ebc81f4917f1:CI,__wbg_slice_b0fa09b1e0041d42:mN,__wbg_for_c3adefd268cb6f1c:RI,__wbg_toString_b388ecd2d3c517c3:bN,__wbg_length_32ed9a279acd054c:YI,__wbg_prototypesetcall_bdcdcc5842e4d77d:uN,__wbg_new_dd2b680c8bf6ae29:rN,__wbg_instanceof_Uint8Array_9b9075935c74707c:qI,__wbg_new_from_slice_a3d2629dc1826784:oN,__wbg___wbindgen_string_get_72fb696202c56729:wI,__wbg___wbindgen_boolean_get_bbbb1c18aa2f5e25:lI,__wbg___wbindgen_number_get_8ff4255516ccad3e:bI,__wbg___wbindgen_is_undefined_9e4d92534c42d778:_I,__wbg___wbindgen_debug_string_0bc8482c6e3508ae:cI,__wbg_isArray_a2cef7634fcb7c0d:GI,__wbg_Error_8c4e43fe74559d73:oI,__wbg_stringify_e4a940b133e6b7d8:gN,__wbg___wbindgen_is_null_ac34f5003991759a:dI,__wbg___wbindgen_is_object_5ae8e5880f2c1fbd:pI,__wbg___wbindgen_is_function_0095a73b8b156f76:fI,__wbg___wbindgen_is_string_cd444516edc5b180:mI,__wbg___wbindgen_is_bigint_31b12575b56f32fc:hI,__wbg___wbindgen_neg_6b4d356dff49dcc6:vI,__wbg___wbindgen_lt_bb59cc3d23526e0d:yI,__wbg___wbindgen_gt_d7bb3629eac381f5:uI,__wbg___wbindgen_throw_be289d5034ed271b:xI,__wbg___wbindgen_jsval_loose_eq_9dd77d8cd6671811:gI,__wbindgen_init_externref_table:LN,__wbindgen_cast_0000000000000001:TN,__wbindgen_cast_0000000000000002:AN,__wbindgen_cast_0000000000000003:EN,__wbindgen_cast_0000000000000004:CN}},GR),RN=At.memory,IN=At.__wbg_syncstate_free,NN=At.syncstate_sharedHeads,PN=At.syncstate_lastSentHeads,zN=At.syncstate_set_lastSentHeads,UN=At.syncstate_set_sentHashes,BN=At.syncstate_clone,HN=At.__wbg_automerge_free,VN=At.automerge_new,jN=At.automerge_clone,qN=At.automerge_fork,GN=At.automerge_pendingOps,ZN=At.automerge_commit,WN=At.automerge_merge,FN=At.automerge_rollback,YN=At.automerge_keys,XN=At.automerge_text,QN=At.automerge_spans,$N=At.automerge_splice,KN=At.automerge_updateText,JN=At.automerge_updateSpans,tP=At.automerge_push,eP=At.automerge_pushObject,nP=At.automerge_insert,iP=At.automerge_splitBlock,sP=At.automerge_joinBlock,rP=At.automerge_updateBlock,oP=At.automerge_getBlock,aP=At.automerge_insertObject,lP=At.automerge_put,cP=At.automerge_putObject,uP=At.automerge_increment,hP=At.automerge_get,fP=At.automerge_getWithType,dP=At.automerge_objInfo,pP=At.automerge_getAll,mP=At.automerge_enableFreeze,_P=At.automerge_registerDatatype,gP=At.automerge_applyPatches,yP=At.automerge_applyAndReturnPatches,vP=At.automerge_diffIncremental,bP=At.automerge_updateDiffCursor,wP=At.automerge_resetDiffCursor,xP=At.automerge_diff,SP=At.automerge_diffPath,TP=At.automerge_isolate,AP=At.automerge_integrate,EP=At.automerge_length,CP=At.automerge_delete,LP=At.automerge_save,MP=At.automerge_saveIncremental,kP=At.automerge_saveSince,OP=At.automerge_saveNoCompress,DP=At.automerge_saveAndVerify,RP=At.automerge_loadIncremental,IP=At.automerge_applyChanges,NP=At.automerge_getChanges,PP=At.automerge_getChangesMeta,zP=At.automerge_getChangeByHash,UP=At.automerge_getChangeMetaByHash,BP=At.automerge_getDecodedChangeByHash,HP=At.automerge_getChangesAdded,VP=At.automerge_getHeads,jP=At.automerge_getActorId,qP=At.automerge_getLastLocalChange,GP=At.automerge_dump,ZP=At.automerge_getMissingDeps,WP=At.automerge_receiveSyncMessage,FP=At.automerge_generateSyncMessage,YP=At.automerge_toJS,XP=At.automerge_materialize,QP=At.automerge_getCursor,$P=At.automerge_getCursorPosition,KP=At.automerge_emptyChange,JP=At.automerge_mark,tz=At.automerge_unmark,ez=At.automerge_marks,nz=At.automerge_marksAt,iz=At.automerge_hasOurChanges,sz=At.automerge_topoHistoryTraversal,rz=At.automerge_stats,oz=At.automerge_saveBundle,az=At.create,lz=At.load,cz=At.wasmReleaseInfo,uz=At.encodeChange,hz=At.decodeChange,fz=At.initSyncState,dz=At.importSyncState,pz=At.exportSyncState,mz=At.encodeSyncMessage,_z=At.decodeSyncMessage,gz=At.encodeSyncState,yz=At.decodeSyncState,vz=At.readBundle,bz=At.__wbindgen_malloc,wz=At.__wbindgen_realloc,xz=At.__wbindgen_exn_store,Sz=At.__externref_table_alloc,Tz=At.__wbindgen_externrefs,Az=At.__wbindgen_free,Ez=At.__externref_table_dealloc,nE=At.__wbindgen_start,Cz=Object.freeze(Object.defineProperty({__proto__:null,__externref_table_alloc:Sz,__externref_table_dealloc:Ez,__wbg_automerge_free:HN,__wbg_syncstate_free:IN,__wbindgen_exn_store:xz,__wbindgen_externrefs:Tz,__wbindgen_free:Az,__wbindgen_malloc:bz,__wbindgen_realloc:wz,__wbindgen_start:nE,automerge_applyAndReturnPatches:yP,automerge_applyChanges:IP,automerge_applyPatches:gP,automerge_clone:jN,automerge_commit:ZN,automerge_delete:CP,automerge_diff:xP,automerge_diffIncremental:vP,automerge_diffPath:SP,automerge_dump:GP,automerge_emptyChange:KP,automerge_enableFreeze:mP,automerge_fork:qN,automerge_generateSyncMessage:FP,automerge_get:hP,automerge_getActorId:jP,automerge_getAll:pP,automerge_getBlock:oP,automerge_getChangeByHash:zP,automerge_getChangeMetaByHash:UP,automerge_getChanges:NP,automerge_getChangesAdded:HP,automerge_getChangesMeta:PP,automerge_getCursor:QP,automerge_getCursorPosition:$P,automerge_getDecodedChangeByHash:BP,automerge_getHeads:VP,automerge_getLastLocalChange:qP,automerge_getMissingDeps:ZP,automerge_getWithType:fP,automerge_hasOurChanges:iz,automerge_increment:uP,automerge_insert:nP,automerge_insertObject:aP,automerge_integrate:AP,automerge_isolate:TP,automerge_joinBlock:sP,automerge_keys:YN,automerge_length:EP,automerge_loadIncremental:RP,automerge_mark:JP,automerge_marks:ez,automerge_marksAt:nz,automerge_materialize:XP,automerge_merge:WN,automerge_new:VN,automerge_objInfo:dP,automerge_pendingOps:GN,automerge_push:tP,automerge_pushObject:eP,automerge_put:lP,automerge_putObject:cP,automerge_receiveSyncMessage:WP,automerge_registerDatatype:_P,automerge_resetDiffCursor:wP,automerge_rollback:FN,automerge_save:LP,automerge_saveAndVerify:DP,automerge_saveBundle:oz,automerge_saveIncremental:MP,automerge_saveNoCompress:OP,automerge_saveSince:kP,automerge_spans:QN,automerge_splice:$N,automerge_splitBlock:iP,automerge_stats:rz,automerge_text:XN,automerge_toJS:YP,automerge_topoHistoryTraversal:sz,automerge_unmark:tz,automerge_updateBlock:rP,automerge_updateDiffCursor:bP,automerge_updateSpans:JN,automerge_updateText:KN,create:az,decodeChange:hz,decodeSyncMessage:_z,decodeSyncState:yz,encodeChange:uz,encodeSyncMessage:mz,encodeSyncState:gz,exportSyncState:pz,importSyncState:dz,initSyncState:fz,load:lz,memory:RN,readBundle:vz,syncstate_clone:BN,syncstate_lastSentHeads:PN,syncstate_set_lastSentHeads:zN,syncstate_set_sentHashes:UN,syncstate_sharedHeads:NN,wasmReleaseInfo:cz},Symbol.toStringTag,{value:"Module"}));DN(Cz);nE();const Lz=Object.freeze(Object.defineProperty({__proto__:null,Automerge:zs,SyncState:Qi,create:WR,decodeChange:FR,decodeSyncMessage:YR,decodeSyncState:XR,encodeChange:QR,encodeSyncMessage:$R,encodeSyncState:KR,exportSyncState:JR,importSyncState:tI,initSyncState:eI,load:nI,readBundle:iI,wasmReleaseInfo:sI},Symbol.toStringTag,{value:"Module"}));A8(Lz);var Zc=null;typeof WebSocket<"u"?Zc=WebSocket:typeof MozWebSocket<"u"?Zc=MozWebSocket:typeof global<"u"?Zc=global.WebSocket||global.MozWebSocket:typeof window<"u"?Zc=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Zc=self.WebSocket||self.MozWebSocket);const O0=Zc,Mz=n=>n.type==="peer",kz=n=>n.type==="error",Oz="1";function To(n,t="Assertion failed"){if(n===!1||n===null||n===void 0){const e=new Error(Dz(t));throw e.stack=Rz(e.stack,"assert.ts"),e}}const Dz=n=>n.split(`
`).map(t=>t.trim()).join(`
`),Rz=(n="",t)=>n.split(`
`).filter(e=>!e.includes(t)).join(`
`),Iz=n=>{const{buffer:t,byteOffset:e,byteLength:s}=n;return t.slice(e,e+s)};class Nz extends qR{socket}class Pz extends Nz{url;retryInterval;#t=!1;#e;#i=new Promise(t=>{this.#e=t});isReady(){return this.#t}whenReady(){return this.#i}#n(){this.#t||(this.#t=!0,this.#e?.())}#r;#o=Io("automerge-repo:websocket:browser");remotePeerId;constructor(t,e=5e3){super(),this.url=t,this.retryInterval=e,this.#o=this.#o.extend(t)}connect(t,e){!this.socket||!this.peerId?(this.#o("connecting"),this.peerId=t,this.peerMetadata=e??{}):(this.#o("reconnecting"),To(t===this.peerId),this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("message",this.onMessage),this.socket.removeEventListener("error",this.onError)),this.#r||(this.#r=setInterval(()=>{this.connect(t,e)},this.retryInterval)),this.socket=new O0(this.url),this.socket.binaryType="arraybuffer",this.socket.addEventListener("open",this.onOpen),this.socket.addEventListener("close",this.onClose),this.socket.addEventListener("message",this.onMessage),this.socket.addEventListener("error",this.onError),setTimeout(()=>this.#n(),1e3),this.join()}onOpen=()=>{this.#o("open"),clearInterval(this.#r),this.#r=void 0,this.join()};onClose=()=>{this.#o("close"),this.remotePeerId&&this.emit("peer-disconnected",{peerId:this.remotePeerId}),this.retryInterval>0&&!this.#r&&setTimeout(()=>(To(this.peerId),this.connect(this.peerId,this.peerMetadata)),this.retryInterval)};onMessage=t=>{this.receiveMessage(t.data)};onError=t=>{if("error"in t&&t.error.code!=="ECONNREFUSED")throw t.error;this.#o("Connection failed, retrying...")};join(){To(this.peerId),To(this.socket),this.socket.readyState===O0.OPEN&&this.send(zz(this.peerId,this.peerMetadata))}disconnect(){To(this.peerId),To(this.socket);const t=this.socket;t&&(t.removeEventListener("open",this.onOpen),t.removeEventListener("close",this.onClose),t.removeEventListener("message",this.onMessage),t.removeEventListener("error",this.onError),t.close()),clearInterval(this.#r),this.remotePeerId&&this.emit("peer-disconnected",{peerId:this.remotePeerId}),this.socket=void 0}send(t){if("data"in t&&t.data?.byteLength===0)throw new Error("Tried to send a zero-length message");if(To(this.peerId),!this.socket){this.#o("Tried to send on a disconnected socket.");return}if(this.socket.readyState!==O0.OPEN)throw new Error(`Websocket not ready (${this.socket.readyState})`);const e=FA(t);this.socket.send(Iz(e))}peerCandidate(t,e){To(this.socket),this.#n(),this.remotePeerId=t,this.emit("peer-candidate",{peerId:t,peerMetadata:e})}receiveMessage(t){let e;try{e=Q6(new Uint8Array(t))}catch(s){this.#o("error decoding message:",s);return}if(To(this.socket),t.byteLength===0)throw new Error("received a zero-length message");if(Mz(e)){const{peerMetadata:s}=e;this.#o(`peer: ${e.senderId}`),this.peerCandidate(e.senderId,s)}else kz(e)?this.#o(`error: ${e.message}`):this.emit("message",e)}}function zz(n,t){return{type:"join",senderId:n,peerMetadata:t,supportedProtocolVersions:[Oz]}}Io("WebsocketServer");const iE=new jR({network:[new Pz("wss://sync.automerge.org")]}),Uz=()=>`user-${Math.random().toString(36).substring(2,11)}`,Bz=()=>{let n=sessionStorage.getItem("automerge-user-id");return n||(n=Uz(),sessionStorage.setItem("automerge-user-id",n)),n},Hz=()=>{const[n,t]=Pt.useState(null),[e]=Pt.useState(()=>Bz());Pt.useEffect(()=>{(async()=>{const z=new URLSearchParams(window.location.search).get("doc");if(z){const O=`automerge:${z}`;console.log("Joining existing document:",z),document.title=`HereHear! (${z.substring(0,8)})`,t(O)}else{console.log("Creating new document...");const O=iE.create();O.change(F=>{F.users={}});const $=O.url;t($);const N=$.split(":")[1],j=`${window.location.pathname}?doc=${N}`;window.history.pushState({},"",j),document.title=`HereHear! (${N.substring(0,8)})`,console.log("Created new document:",N),console.log("Share this URL with others to collaborate!")}})()},[]);const[s,r]=KC(n);Pt.useEffect(()=>{if(!r)return;const E=()=>{r(O=>{O.users||(O.users={});const $=Date.now(),N=!document.hidden;if(O.users[e])O.users[e].lastSeen=$,N?O.users[e].hiddenSince!==void 0&&delete O.users[e].hiddenSince:O.users[e].hiddenSince===void 0&&(O.users[e].hiddenSince=$);else{const j={id:e,connectedAt:$,lastSeen:$};N||(j.hiddenSince=$),O.users[e]=j}})};E();const R=setInterval(E,5e3),z=()=>{E()};return document.addEventListener("visibilitychange",z),()=>{clearInterval(R),document.removeEventListener("visibilitychange",z)}},[r,e]);const a=Pt.useMemo(()=>{if(!s?.users)return[];const E=Date.now(),R=9e4,z=3e4;return Object.values(s.users).filter(O=>E-O.lastSeen<R).map(O=>{const $=O.hiddenSince===void 0||E-O.hiddenSince<z;return{...O,isActive:$}})},[s?.users]),u=Pt.useCallback(E=>{r&&r(R=>{R.users||(R.users={}),R.users[e]&&(R.users[e].name=E)})},[r,e]),h=Pt.useCallback((E,R)=>{r&&r(z=>{z.users||(z.users={}),z.users[e]&&(z.users[e].position={lat:E,lng:R})})},[r,e]),p=Pt.useMemo(()=>s?.shapes?Object.values(s.shapes):[],[s?.shapes]),m=Pt.useCallback((E,R,z=null)=>{const O=`shape-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;return r&&r($=>{$.shapes||($.shapes={}),$.shapes[O]={id:O,type:E,coordinates:R,soundId:z,createdBy:e,createdAt:Date.now()}}),O},[r,e]),y=Pt.useCallback((E,R)=>{r&&r(z=>{z.shapes&&z.shapes[E]&&(z.shapes[E].soundId=R)})},[r]),_=Pt.useCallback((E,R)=>{r&&r(z=>{z.shapes&&z.shapes[E]&&(z.shapes[E].coordinates=R)})},[r]),b=Pt.useCallback(E=>{r&&r(R=>{R.shapes&&R.shapes[E]&&delete R.shapes[E]})},[r]),S=Pt.useCallback(()=>{r&&r(E=>{E.shapes={}})},[r]),x=Pt.useCallback(E=>{r&&r(R=>{R.transport=E})},[r]),A=Pt.useCallback(()=>!r||!s||s.transport?!1:(r(E=>{E.transport||(E.transport={bpm:120,isPlaying:!1,position:"0:0:0",lastUpdated:Date.now(),masterId:e})}),!0),[r,s,e]);return{doc:s,changeDoc:r,userId:e,connectedUsers:a,connectedUserCount:a.length,updateUserName:u,updateUserPosition:h,syncedShapes:p,addShape:m,updateShapeSound:y,updateShapeCoordinates:_,deleteShape:b,clearAllShapes:S,updateTransportState:x,initializeTransportIfNeeded:A,isReady:!!s}},sp={enableHighAccuracy:!0,timeout:1e4,maximumAge:0},Vz=(n=sp)=>{const[t,e]=Pt.useState({latitude:null,longitude:null,accuracy:null,error:null,isWatching:!1}),s=Pt.useRef(null),r=Pt.useRef(n);r.current=n;const a=Pt.useCallback(y=>{e({latitude:y.coords.latitude,longitude:y.coords.longitude,accuracy:y.coords.accuracy,error:null,isWatching:!0})},[]),u=Pt.useCallback(y=>{let _;switch(y.code){case y.PERMISSION_DENIED:_="Location permission denied. Please enable location access in your browser settings.";break;case y.POSITION_UNAVAILABLE:_="Location information unavailable. Please check your device settings.";break;case y.TIMEOUT:_="Location request timed out. Please try again.";break;default:_="An unknown error occurred while getting location."}e(b=>({...b,error:_,isWatching:!1}))},[]),h=Pt.useCallback(()=>{if(!navigator.geolocation){e(_=>({..._,error:"Geolocation is not supported by your browser.",isWatching:!1}));return}s.current!==null&&navigator.geolocation.clearWatch(s.current);const y=r.current;s.current=navigator.geolocation.watchPosition(a,u,{enableHighAccuracy:y.enableHighAccuracy??sp.enableHighAccuracy,timeout:y.timeout??sp.timeout,maximumAge:y.maximumAge??sp.maximumAge}),e(_=>({..._,isWatching:!0,error:null}))},[a,u]),p=Pt.useCallback(()=>{s.current!==null&&(navigator.geolocation.clearWatch(s.current),s.current=null),e(y=>({...y,isWatching:!1}))},[]);Pt.useEffect(()=>()=>{s.current!==null&&navigator.geolocation.clearWatch(s.current)},[]);const m=typeof navigator<"u"&&"geolocation"in navigator;return{...t,isSupported:m,startWatching:h,stopWatching:p}};window.type=!0;function jz(){const{connectedUserCount:n,connectedUsers:t,userId:e,updateUserName:s,updateUserPosition:r,syncedShapes:a,addShape:u,updateShapeSound:h,updateShapeCoordinates:p,deleteShape:m,clearAllShapes:y,updateTransportState:_,initializeTransportIfNeeded:b,doc:S,isReady:x}=Hz(),[A,E]=Pt.useState(!1),[R,z]=Pt.useState(""),[O,$]=Pt.useState(()=>{const D=localStorage.getItem("gpsound-location-mode");return D==="gps"||D==="manual"?D:"manual"}),[N,j]=Pt.useState(!1),{latitude:F,longitude:G,accuracy:q,error:W,isWatching:Q,isSupported:et,startWatching:k,stopWatching:X}=Vz({enableHighAccuracy:!0,timeout:15e3,maximumAge:5e3});Pt.useEffect(()=>{O==="gps"&&F!==null&&G!==null&&r(F,G)},[O,F,G,r]),Pt.useEffect(()=>{O==="gps"?k():X()},[O,k,X]),Pt.useEffect(()=>{localStorage.setItem("gpsound-location-mode",O)},[O]);const Z=D=>{$(D)},U=t.find(D=>D.id===e)?.name||"";R===""&&U!==""&&z(U);const K=D=>{const V=D.target.value;z(V),s(V)};return Ct.jsxs(Ct.Fragment,{children:[Ct.jsxs("div",{style:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",color:"#1f2937",minWidth:"200px",overflow:"hidden"},children:[Ct.jsx("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e5e7eb",borderRadius:"12px 12px 0 0"},children:Ct.jsx("input",{type:"text",placeholder:"Enter your name...",value:R,onChange:K,disabled:!x,style:{width:"100%",padding:"6px 8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px",fontFamily:"inherit",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"},onFocus:D=>D.target.style.borderColor="#3b82f6",onBlur:D=>D.target.style.borderColor="#d1d5db"})}),Ct.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e5e7eb"},children:[Ct.jsxs("div",{onClick:()=>j(!N),style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",userSelect:"none"},children:[Ct.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[Ct.jsx("span",{style:{fontSize:"14px"},children:O==="gps"?"":""}),Ct.jsx("span",{style:{fontSize:"13px",fontWeight:500},children:O==="gps"?"GPS Location":"Manual Location"}),O==="gps"&&Q&&Ct.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#22c55e",animation:"pulse 2s infinite"}})]}),Ct.jsx("span",{style:{fontSize:"12px",transition:"transform 0.2s",transform:N?"rotate(180deg)":"rotate(0deg)"},children:""})]}),N&&Ct.jsxs("div",{style:{marginTop:"10px"},children:[Ct.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"8px"},children:[Ct.jsx("button",{onClick:()=>Z("manual"),style:{flex:1,padding:"6px 10px",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:500,cursor:"pointer",backgroundColor:O==="manual"?"#3b82f6":"#e5e7eb",color:O==="manual"?"white":"#4b5563",transition:"all 0.2s"},children:" Manual"}),Ct.jsx("button",{onClick:()=>Z("gps"),disabled:!et,style:{flex:1,padding:"6px 10px",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:500,cursor:et?"pointer":"not-allowed",backgroundColor:O==="gps"?"#3b82f6":"#e5e7eb",color:O==="gps"?"white":"#4b5563",opacity:et?1:.5,transition:"all 0.2s"},children:" GPS"})]}),O==="gps"&&Ct.jsx("div",{style:{fontSize:"11px",color:"#6b7280",padding:"6px 8px",backgroundColor:"#f9fafb",borderRadius:"4px"},children:W?Ct.jsxs("div",{style:{color:"#ef4444"},children:[" ",W]}):Q&&F!==null?Ct.jsxs(Ct.Fragment,{children:[Ct.jsxs("div",{children:["Lat: ",F.toFixed(6)]}),Ct.jsxs("div",{children:["Lng: ",G?.toFixed(6)]}),q&&Ct.jsxs("div",{style:{marginTop:"2px",color:"#9ca3af"},children:["Accuracy: ",q.toFixed(0),"m"]})]}):Ct.jsx("div",{children:"Acquiring location..."})}),Ct.jsx("div",{style:{fontSize:"10px",color:"#9ca3af",marginTop:"6px"},children:O==="manual"?"Drag your marker on the map to set position":"Your position updates automatically from GPS"}),!et&&Ct.jsx("div",{style:{fontSize:"10px",color:"#ef4444",marginTop:"4px"},children:"GPS not supported in this browser"})]})]}),Ct.jsxs("div",{onClick:()=>E(!A),style:{padding:"8px 12px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none",transition:"background-color 0.2s",borderRadius:A?"0":"0 0 12px 12px"},onMouseEnter:D=>D.currentTarget.style.backgroundColor="#f3f4f6",onMouseLeave:D=>D.currentTarget.style.backgroundColor="transparent",children:[Ct.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:x?"#22c55e":"#94a3b8",animation:x?"pulse 2s infinite":"none"}}),Ct.jsx("span",{style:{fontWeight:500,flex:1},children:x?Ct.jsxs(Ct.Fragment,{children:[n," ",n===1?"user":"users"," connected"]}):"Connecting..."}),Ct.jsx("span",{style:{fontSize:"12px",transition:"transform 0.2s",transform:A?"rotate(180deg)":"rotate(0deg)"},children:""})]}),A&&x&&Ct.jsx("div",{style:{borderTop:"1px solid #e5e7eb",maxHeight:"300px",overflowY:"auto",borderRadius:"0 0 12px 12px"},children:t.map((D,V)=>{const I=D.id===e,Y=V===t.length-1,at=D.isActive!==!1;return Ct.jsxs("div",{style:{padding:"8px 12px",backgroundColor:I?"#eff6ff":"transparent",borderLeft:I?"3px solid #3b82f6":"3px solid transparent",borderRadius:Y?"0 0 12px 12px":"0",opacity:at?1:.7},children:[Ct.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[Ct.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:at?"#22c55e":"#94a3b8",flexShrink:0}}),Ct.jsxs("div",{style:{fontWeight:I?600:400,color:"#1f2937",flex:1},children:[D.name||"Anonymous",I&&Ct.jsx("span",{style:{marginLeft:"6px",fontSize:"11px",color:"#6b7280",fontWeight:400},children:"(you)"}),!at&&Ct.jsx("span",{style:{marginLeft:"6px",fontSize:"11px",color:"#9ca3af",fontWeight:400,fontStyle:"italic"},children:"away"})]})]}),Ct.jsxs("div",{style:{fontSize:"11px",color:"#9ca3af",marginTop:"2px",marginLeft:"12px"},children:[D.id.substring(0,12),"..."]})]},D.id)})})]}),Ct.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
      `}),Ct.jsx(f8,{connectedUsers:t,currentUserId:e,updateUserPosition:r,syncedShapes:a,addShape:u,updateShapeSound:h,updateShapeCoordinates:p,deleteShape:m,clearAllShapes:y,updateTransportState:_,initializeTransportIfNeeded:b,transportState:S?.transport,locationMode:O})]})}MC.createRoot(document.getElementById("root")).render(Ct.jsx(Pt.StrictMode,{children:Ct.jsx(m2.Provider,{value:iE,children:Ct.jsx(jz,{})})}));
//# sourceMappingURL=index-PTJS8TkM.js.map
