(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=e(r);fetch(r.href,a)}})();function tf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sg={exports:{}},yh={};var N1;function bC(){if(N1)return yh;N1=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function e(s,r,a){var u=null;if(a!==void 0&&(u=""+a),r.key!==void 0&&(u=""+r.key),"key"in r){a={};for(var h in r)h!=="key"&&(a[h]=r[h])}else a=r;return r=a.ref,{$$typeof:n,type:s,key:u,ref:r!==void 0?r:null,props:a}}return yh.Fragment=t,yh.jsx=e,yh.jsxs=e,yh}var P1;function wC(){return P1||(P1=1,Sg.exports=bC()),Sg.exports}var Ct=wC(),Tg={exports:{}},re={};var z1;function xC(){if(z1)return re;z1=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),e=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),b=Symbol.iterator;function x(I){return I===null||typeof I!="object"?null:(I=b&&I[b]||I["@@iterator"],typeof I=="function"?I:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,E={};function R(I,q,at){this.props=I,this.context=q,this.refs=E,this.updater=at||S}R.prototype.isReactComponent={},R.prototype.setState=function(I,q){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,q,"setState")},R.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function z(){}z.prototype=R.prototype;function O(I,q,at){this.props=I,this.context=q,this.refs=E,this.updater=at||S}var Q=O.prototype=new z;Q.constructor=O,A(Q,R.prototype),Q.isPureReactComponent=!0;var N=Array.isArray;function j(){}var Y={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function Z(I,q,at){var mt=at.ref;return{$$typeof:n,type:I,key:q,ref:mt!==void 0?mt:null,props:at}}function F(I,q){return Z(I.type,q,I.props)}function $(I){return typeof I=="object"&&I!==null&&I.$$typeof===n}function et(I){var q={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(at){return q[at]})}var k=/\/+/g;function X(I,q){return typeof I=="object"&&I!==null&&I.key!=null?et(""+I.key):q.toString(36)}function W(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(j,j):(I.status="pending",I.then(function(q){I.status==="pending"&&(I.status="fulfilled",I.value=q)},function(q){I.status==="pending"&&(I.status="rejected",I.reason=q)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function P(I,q,at,mt,vt){var gt=typeof I;(gt==="undefined"||gt==="boolean")&&(I=null);var Dt=!1;if(I===null)Dt=!0;else switch(gt){case"bigint":case"string":case"number":Dt=!0;break;case"object":switch(I.$$typeof){case n:case t:Dt=!0;break;case _:return Dt=I._init,P(Dt(I._payload),q,at,mt,vt)}}if(Dt)return vt=vt(I),Dt=mt===""?"."+X(I,0):mt,N(vt)?(at="",Dt!=null&&(at=Dt.replace(k,"$&/")+"/"),P(vt,q,at,"",function(Me){return Me})):vt!=null&&($(vt)&&(vt=F(vt,at+(vt.key==null||I&&I.key===vt.key?"":(""+vt.key).replace(k,"$&/")+"/")+Dt)),q.push(vt)),1;Dt=0;var Mt=mt===""?".":mt+":";if(N(I))for(var oe=0;oe<I.length;oe++)mt=I[oe],gt=Mt+X(mt,oe),Dt+=P(mt,q,at,gt,vt);else if(oe=x(I),typeof oe=="function")for(I=oe.call(I),oe=0;!(mt=I.next()).done;)mt=mt.value,gt=Mt+X(mt,oe++),Dt+=P(mt,q,at,gt,vt);else if(gt==="object"){if(typeof I.then=="function")return P(W(I),q,at,mt,vt);throw q=String(I),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return Dt}function U(I,q,at){if(I==null)return I;var mt=[],vt=0;return P(I,mt,"","",function(gt){return q.call(at,gt,vt++)}),mt}function K(I){if(I._status===-1){var q=I._result;q=q(),q.then(function(at){(I._status===0||I._status===-1)&&(I._status=1,I._result=at)},function(at){(I._status===0||I._status===-1)&&(I._status=2,I._result=at)}),I._status===-1&&(I._status=0,I._result=q)}if(I._status===1)return I._result.default;throw I._result}var D=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},V={map:U,forEach:function(I,q,at){U(I,function(){q.apply(this,arguments)},at)},count:function(I){var q=0;return U(I,function(){q++}),q},toArray:function(I){return U(I,function(q){return q})||[]},only:function(I){if(!$(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return re.Activity=g,re.Children=V,re.Component=R,re.Fragment=e,re.Profiler=r,re.PureComponent=O,re.StrictMode=s,re.Suspense=p,re.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,re.__COMPILER_RUNTIME={__proto__:null,c:function(I){return Y.H.useMemoCache(I)}},re.cache=function(I){return function(){return I.apply(null,arguments)}},re.cacheSignal=function(){return null},re.cloneElement=function(I,q,at){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var mt=A({},I.props),vt=I.key;if(q!=null)for(gt in q.key!==void 0&&(vt=""+q.key),q)!G.call(q,gt)||gt==="key"||gt==="__self"||gt==="__source"||gt==="ref"&&q.ref===void 0||(mt[gt]=q[gt]);var gt=arguments.length-2;if(gt===1)mt.children=at;else if(1<gt){for(var Dt=Array(gt),Mt=0;Mt<gt;Mt++)Dt[Mt]=arguments[Mt+2];mt.children=Dt}return Z(I.type,vt,mt)},re.createContext=function(I){return I={$$typeof:u,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:a,_context:I},I},re.createElement=function(I,q,at){var mt,vt={},gt=null;if(q!=null)for(mt in q.key!==void 0&&(gt=""+q.key),q)G.call(q,mt)&&mt!=="key"&&mt!=="__self"&&mt!=="__source"&&(vt[mt]=q[mt]);var Dt=arguments.length-2;if(Dt===1)vt.children=at;else if(1<Dt){for(var Mt=Array(Dt),oe=0;oe<Dt;oe++)Mt[oe]=arguments[oe+2];vt.children=Mt}if(I&&I.defaultProps)for(mt in Dt=I.defaultProps,Dt)vt[mt]===void 0&&(vt[mt]=Dt[mt]);return Z(I,gt,vt)},re.createRef=function(){return{current:null}},re.forwardRef=function(I){return{$$typeof:h,render:I}},re.isValidElement=$,re.lazy=function(I){return{$$typeof:_,_payload:{_status:-1,_result:I},_init:K}},re.memo=function(I,q){return{$$typeof:m,type:I,compare:q===void 0?null:q}},re.startTransition=function(I){var q=Y.T,at={};Y.T=at;try{var mt=I(),vt=Y.S;vt!==null&&vt(at,mt),typeof mt=="object"&&mt!==null&&typeof mt.then=="function"&&mt.then(j,D)}catch(gt){D(gt)}finally{q!==null&&at.types!==null&&(q.types=at.types),Y.T=q}},re.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},re.use=function(I){return Y.H.use(I)},re.useActionState=function(I,q,at){return Y.H.useActionState(I,q,at)},re.useCallback=function(I,q){return Y.H.useCallback(I,q)},re.useContext=function(I){return Y.H.useContext(I)},re.useDebugValue=function(){},re.useDeferredValue=function(I,q){return Y.H.useDeferredValue(I,q)},re.useEffect=function(I,q){return Y.H.useEffect(I,q)},re.useEffectEvent=function(I){return Y.H.useEffectEvent(I)},re.useId=function(){return Y.H.useId()},re.useImperativeHandle=function(I,q,at){return Y.H.useImperativeHandle(I,q,at)},re.useInsertionEffect=function(I,q){return Y.H.useInsertionEffect(I,q)},re.useLayoutEffect=function(I,q){return Y.H.useLayoutEffect(I,q)},re.useMemo=function(I,q){return Y.H.useMemo(I,q)},re.useOptimistic=function(I,q){return Y.H.useOptimistic(I,q)},re.useReducer=function(I,q,at){return Y.H.useReducer(I,q,at)},re.useRef=function(I){return Y.H.useRef(I)},re.useState=function(I){return Y.H.useState(I)},re.useSyncExternalStore=function(I,q,at){return Y.H.useSyncExternalStore(I,q,at)},re.useTransition=function(){return Y.H.useTransition()},re.version="19.2.4",re}var U1;function vy(){return U1||(U1=1,Tg.exports=xC()),Tg.exports}var zt=vy(),Ag={exports:{}},vh={},Eg={exports:{}},Cg={};var B1;function SC(){return B1||(B1=1,(function(n){function t(P,U){var K=P.length;P.push(U);t:for(;0<K;){var D=K-1>>>1,V=P[D];if(0<r(V,U))P[D]=U,P[K]=V,K=D;else break t}}function e(P){return P.length===0?null:P[0]}function s(P){if(P.length===0)return null;var U=P[0],K=P.pop();if(K!==U){P[0]=K;t:for(var D=0,V=P.length,I=V>>>1;D<I;){var q=2*(D+1)-1,at=P[q],mt=q+1,vt=P[mt];if(0>r(at,K))mt<V&&0>r(vt,at)?(P[D]=vt,P[mt]=K,D=mt):(P[D]=at,P[q]=K,D=q);else if(mt<V&&0>r(vt,K))P[D]=vt,P[mt]=K,D=mt;else break t}}return U}function r(P,U){var K=P.sortIndex-U.sortIndex;return K!==0?K:P.id-U.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var u=Date,h=u.now();n.unstable_now=function(){return u.now()-h}}var p=[],m=[],_=1,g=null,b=3,x=!1,S=!1,A=!1,E=!1,R=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function Q(P){for(var U=e(m);U!==null;){if(U.callback===null)s(m);else if(U.startTime<=P)s(m),U.sortIndex=U.expirationTime,t(p,U);else break;U=e(m)}}function N(P){if(A=!1,Q(P),!S)if(e(p)!==null)S=!0,j||(j=!0,et());else{var U=e(m);U!==null&&W(N,U.startTime-P)}}var j=!1,Y=-1,G=5,Z=-1;function F(){return E?!0:!(n.unstable_now()-Z<G)}function $(){if(E=!1,j){var P=n.unstable_now();Z=P;var U=!0;try{t:{S=!1,A&&(A=!1,z(Y),Y=-1),x=!0;var K=b;try{e:{for(Q(P),g=e(p);g!==null&&!(g.expirationTime>P&&F());){var D=g.callback;if(typeof D=="function"){g.callback=null,b=g.priorityLevel;var V=D(g.expirationTime<=P);if(P=n.unstable_now(),typeof V=="function"){g.callback=V,Q(P),U=!0;break e}g===e(p)&&s(p),Q(P)}else s(p);g=e(p)}if(g!==null)U=!0;else{var I=e(m);I!==null&&W(N,I.startTime-P),U=!1}}break t}finally{g=null,b=K,x=!1}U=void 0}}finally{U?et():j=!1}}}var et;if(typeof O=="function")et=function(){O($)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,X=k.port2;k.port1.onmessage=$,et=function(){X.postMessage(null)}}else et=function(){R($,0)};function W(P,U){Y=R(function(){P(n.unstable_now())},U)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return b},n.unstable_next=function(P){switch(b){case 1:case 2:case 3:var U=3;break;default:U=b}var K=b;b=U;try{return P()}finally{b=K}},n.unstable_requestPaint=function(){E=!0},n.unstable_runWithPriority=function(P,U){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var K=b;b=P;try{return U()}finally{b=K}},n.unstable_scheduleCallback=function(P,U,K){var D=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?D+K:D):K=D,P){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=K+V,P={id:_++,callback:U,priorityLevel:P,startTime:K,expirationTime:V,sortIndex:-1},K>D?(P.sortIndex=K,t(m,P),e(p)===null&&P===e(m)&&(A?(z(Y),Y=-1):A=!0,W(N,K-D))):(P.sortIndex=V,t(p,P),S||x||(S=!0,j||(j=!0,et()))),P},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(P){var U=b;return function(){var K=b;b=U;try{return P.apply(this,arguments)}finally{b=K}}}})(Cg)),Cg}var H1;function TC(){return H1||(H1=1,Eg.exports=SC()),Eg.exports}var Lg={exports:{}},fi={};var V1;function AC(){if(V1)return fi;V1=1;var n=vy();function t(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)m+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function e(){}var s={d:{f:e,r:function(){throw Error(t(522))},D:e,C:e,L:e,m:e,X:e,S:e,M:e},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(p,m,_){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:p,containerInfo:m,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return fi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,fi.createPortal=function(p,m){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return a(p,m,null,_)},fi.flushSync=function(p){var m=u.T,_=s.p;try{if(u.T=null,s.p=2,p)return p()}finally{u.T=m,s.p=_,s.d.f()}},fi.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(p,m))},fi.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},fi.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var _=m.as,g=h(_,m.crossOrigin),b=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;_==="style"?s.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:g,integrity:b,fetchPriority:x}):_==="script"&&s.d.X(p,{crossOrigin:g,integrity:b,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},fi.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var _=h(m.as,m.crossOrigin);s.d.M(p,{crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(p)},fi.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var _=m.as,g=h(_,m.crossOrigin);s.d.L(p,_,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},fi.preloadModule=function(p,m){if(typeof p=="string")if(m){var _=h(m.as,m.crossOrigin);s.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:_,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(p)},fi.requestFormReset=function(p){s.d.r(p)},fi.unstable_batchedUpdates=function(p,m){return p(m)},fi.useFormState=function(p,m,_){return u.H.useFormState(p,m,_)},fi.useFormStatus=function(){return u.H.useHostTransitionStatus()},fi.version="19.2.4",fi}var j1;function EC(){if(j1)return Lg.exports;j1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Lg.exports=AC(),Lg.exports}var q1;function CC(){if(q1)return vh;q1=1;var n=TC(),t=vy(),e=EC();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function a(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function u(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function h(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function p(i){if(a(i)!==i)throw Error(s(188))}function m(i){var o=i.alternate;if(!o){if(o=a(i),o===null)throw Error(s(188));return o!==i?null:i}for(var c=i,d=o;;){var v=c.return;if(v===null)break;var w=v.alternate;if(w===null){if(d=v.return,d!==null){c=d;continue}break}if(v.child===w.child){for(w=v.child;w;){if(w===c)return p(v),i;if(w===d)return p(v),o;w=w.sibling}throw Error(s(188))}if(c.return!==d.return)c=v,d=w;else{for(var M=!1,H=v.child;H;){if(H===c){M=!0,c=v,d=w;break}if(H===d){M=!0,d=v,c=w;break}H=H.sibling}if(!M){for(H=w.child;H;){if(H===c){M=!0,c=w,d=v;break}if(H===d){M=!0,d=w,c=v;break}H=H.sibling}if(!M)throw Error(s(189))}}if(c.alternate!==d)throw Error(s(190))}if(c.tag!==3)throw Error(s(188));return c.stateNode.current===c?i:o}function _(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=_(i),o!==null)return o;i=i.sibling}return null}var g=Object.assign,b=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),O=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),Y=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function et(i){return i===null||typeof i!="object"?null:(i=$&&i[$]||i["@@iterator"],typeof i=="function"?i:null)}var k=Symbol.for("react.client.reference");function X(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===k?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case A:return"Fragment";case R:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case j:return"SuspenseList";case Z:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case O:return i.displayName||"Context";case z:return(i._context.displayName||"Context")+".Consumer";case Q:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Y:return o=i.displayName||null,o!==null?o:X(i.type)||"Memo";case G:o=i._payload,i=i._init;try{return X(i(o))}catch{}}return null}var W=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U=e.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},D=[],V=-1;function I(i){return{current:i}}function q(i){0>V||(i.current=D[V],D[V]=null,V--)}function at(i,o){V++,D[V]=i.current,i.current=o}var mt=I(null),vt=I(null),gt=I(null),Dt=I(null);function Mt(i,o){switch(at(gt,o),at(vt,i),at(mt,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?s1(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=s1(o),i=r1(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}q(mt),at(mt,i)}function oe(){q(mt),q(vt),q(gt)}function Me(i){i.memoizedState!==null&&at(Dt,i);var o=mt.current,c=r1(o,i.type);o!==c&&(at(vt,i),at(mt,c))}function Ke(i){vt.current===i&&(q(mt),q(vt)),Dt.current===i&&(q(Dt),ph._currentValue=K)}var tn,Fn;function Ai(i){if(tn===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);tn=o&&o[1]||"",Fn=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tn+i+Fn}var Nt=!1;function Xt(i,o){if(!i||Nt)return"";Nt=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var Tt=function(){throw Error()};if(Object.defineProperty(Tt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Tt,[])}catch(pt){var dt=pt}Reflect.construct(i,[],Tt)}else{try{Tt.call()}catch(pt){dt=pt}i.call(Tt.prototype)}}else{try{throw Error()}catch(pt){dt=pt}(Tt=i())&&typeof Tt.catch=="function"&&Tt.catch(function(){})}}catch(pt){if(pt&&dt&&typeof pt.stack=="string")return[pt.stack,dt.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=d.DetermineComponentFrameRoot(),M=w[0],H=w[1];if(M&&H){var tt=M.split(`
`),ht=H.split(`
`);for(v=d=0;d<tt.length&&!tt[d].includes("DetermineComponentFrameRoot");)d++;for(;v<ht.length&&!ht[v].includes("DetermineComponentFrameRoot");)v++;if(d===tt.length||v===ht.length)for(d=tt.length-1,v=ht.length-1;1<=d&&0<=v&&tt[d]!==ht[v];)v--;for(;1<=d&&0<=v;d--,v--)if(tt[d]!==ht[v]){if(d!==1||v!==1)do if(d--,v--,0>v||tt[d]!==ht[v]){var yt=`
`+tt[d].replace(" at new "," at ");return i.displayName&&yt.includes("<anonymous>")&&(yt=yt.replace("<anonymous>",i.displayName)),yt}while(1<=d&&0<=v);break}}}finally{Nt=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Ai(c):""}function Ve(i,o){switch(i.tag){case 26:case 27:case 5:return Ai(i.type);case 16:return Ai("Lazy");case 13:return i.child!==o&&o!==null?Ai("Suspense Fallback"):Ai("Suspense");case 19:return Ai("SuspenseList");case 0:case 15:return Xt(i.type,!1);case 11:return Xt(i.type.render,!1);case 1:return Xt(i.type,!0);case 31:return Ai("Activity");default:return""}}function Ee(i){try{var o="",c=null;do o+=Ve(i,c),c=i,i=i.return;while(i);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var ue=Object.prototype.hasOwnProperty,ke=n.unstable_scheduleCallback,un=n.unstable_cancelCallback,ci=n.unstable_shouldYield,ms=n.unstable_requestPaint,hn=n.unstable_now,Va=n.unstable_getCurrentPriorityLevel,Gs=n.unstable_ImmediatePriority,_s=n.unstable_UserBlockingPriority,Yr=n.unstable_NormalPriority,Yl=n.unstable_LowPriority,ja=n.unstable_IdlePriority,Xl=n.log,_u=n.unstable_setDisableYieldValue,dr=null,Cn=null;function Xi(i){if(typeof Xl=="function"&&_u(i),Cn&&typeof Cn.setStrictMode=="function")try{Cn.setStrictMode(dr,i)}catch{}}var ni=Math.clz32?Math.clz32:yu,Xr=Math.log,gu=Math.LN2;function yu(i){return i>>>=0,i===0?32:31-(Xr(i)/gu|0)|0}var Qr=256,$r=262144,Kr=4194304;function Zs(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function zo(i,o,c){var d=i.pendingLanes;if(d===0)return 0;var v=0,w=i.suspendedLanes,M=i.pingedLanes;i=i.warmLanes;var H=d&134217727;return H!==0?(d=H&~w,d!==0?v=Zs(d):(M&=H,M!==0?v=Zs(M):c||(c=H&~i,c!==0&&(v=Zs(c))))):(H=d&~w,H!==0?v=Zs(H):M!==0?v=Zs(M):c||(c=d&~i,c!==0&&(v=Zs(c)))),v===0?0:o!==0&&o!==v&&(o&w)===0&&(w=v&-v,c=o&-o,w>=c||w===32&&(c&4194048)!==0)?o:v}function Et(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function kt(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Yt(){var i=Kr;return Kr<<=1,(Kr&62914560)===0&&(Kr=4194304),i}function Ot(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function Pt(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ut(i,o,c,d,v,w){var M=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var H=i.entanglements,tt=i.expirationTimes,ht=i.hiddenUpdates;for(c=M&~c;0<c;){var yt=31-ni(c),Tt=1<<yt;H[yt]=0,tt[yt]=-1;var dt=ht[yt];if(dt!==null)for(ht[yt]=null,yt=0;yt<dt.length;yt++){var pt=dt[yt];pt!==null&&(pt.lane&=-536870913)}c&=~Tt}d!==0&&Wt(i,d,0),w!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=w&~(M&~o))}function Wt(i,o,c){i.pendingLanes|=o,i.suspendedLanes&=~o;var d=31-ni(o);i.entangledLanes|=o,i.entanglements[d]=i.entanglements[d]|1073741824|c&261930}function Qt(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var d=31-ni(c),v=1<<d;v&o|i[d]&o&&(i[d]|=o),c&=~v}}function te(i,o){var c=o&-o;return c=(c&42)!==0?1:Ce(c),(c&(i.suspendedLanes|o))!==0?0:c}function Ce(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function It(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ei(){var i=U.p;return i!==0?i:(i=window.event,i===void 0?32:L1(i.type))}function gs(i,o){var c=U.p;try{return U.p=i,o()}finally{U.p=c}}var Ln=Math.random().toString(36).slice(2),ze="__reactFiber$"+Ln,Mn="__reactProps$"+Ln,Jr="__reactContainer$"+Ln,pr="__reactEvents$"+Ln,wf="__reactListeners$"+Ln,Dm="__reactHandles$"+Ln,xf="__reactResources$"+Ln,qa="__reactMarker$"+Ln;function vu(i){delete i[ze],delete i[Mn],delete i[pr],delete i[wf],delete i[Dm]}function to(i){var o=i[ze];if(o)return o;for(var c=i.parentNode;c;){if(o=c[Jr]||c[ze]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=f1(i);i!==null;){if(c=i[ze])return c;i=f1(i)}return o}i=c,c=i.parentNode}return null}function Uo(i){if(i=i[ze]||i[Jr]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function mr(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function Bo(i){var o=i[xf];return o||(o=i[xf]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function kn(i){i[qa]=!0}var Sf=new Set,Tf={};function eo(i,o){_r(i,o),_r(i+"Capture",o)}function _r(i,o){for(Tf[i]=o,i=0;i<o.length;i++)Sf.add(o[i])}var Ga=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),bu={},wu={};function Za(i){return ue.call(wu,i)?!0:ue.call(bu,i)?!1:Ga.test(i)?wu[i]=!0:(bu[i]=!0,!1)}function fe(i,o,c){if(Za(o))if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+c)}}function je(i,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+c)}}function Ci(i,o,c,d){if(d===null)i.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(o,c,""+d)}}function Bn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function no(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function xu(i,o,c){var d=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,w=d.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return v.call(this)},set:function(M){c=""+M,w.call(this,M)}}),Object.defineProperty(i,o,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(M){c=""+M},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function se(i){if(!i._valueTracker){var o=no(i)?"checked":"value";i._valueTracker=xu(i,o,""+i[o])}}function an(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),d="";return i&&(d=no(i)?i.checked?"true":"false":i.value),i=d,i!==c?(o.setValue(i),!0):!1}function Ho(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ql=/[\n"\\]/g;function en(i){return i.replace(Ql,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Su(i,o,c,d,v,w,M,H){i.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?i.type=M:i.removeAttribute("type"),o!=null?M==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Bn(o)):i.value!==""+Bn(o)&&(i.value=""+Bn(o)):M!=="submit"&&M!=="reset"||i.removeAttribute("value"),o!=null?Ws(i,M,Bn(o)):c!=null?Ws(i,M,Bn(c)):d!=null&&i.removeAttribute("value"),v==null&&w!=null&&(i.defaultChecked=!!w),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?i.name=""+Bn(H):i.removeAttribute("name")}function Wa(i,o,c,d,v,w,M,H){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(i.type=w),o!=null||c!=null){if(!(w!=="submit"&&w!=="reset"||o!=null)){se(i);return}c=c!=null?""+Bn(c):"",o=o!=null?""+Bn(o):c,H||o===i.value||(i.value=o),i.defaultValue=o}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,i.checked=H?i.checked:!!d,i.defaultChecked=!!d,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(i.name=M),se(i)}function Ws(i,o,c){o==="number"&&Ho(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Fe(i,o,c,d){if(i=i.options,o){o={};for(var v=0;v<c.length;v++)o["$"+c[v]]=!0;for(c=0;c<i.length;c++)v=o.hasOwnProperty("$"+i[c].value),i[c].selected!==v&&(i[c].selected=v),v&&d&&(i[c].defaultSelected=!0)}else{for(c=""+Bn(c),o=null,v=0;v<i.length;v++){if(i[v].value===c){i[v].selected=!0,d&&(i[v].defaultSelected=!0);return}o!==null||i[v].disabled||(o=i[v])}o!==null&&(o.selected=!0)}}function gr(i,o,c){if(o!=null&&(o=""+Bn(o),o!==i.value&&(i.value=o),c==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=c!=null?""+Bn(c):""}function Vo(i,o,c,d){if(o==null){if(d!=null){if(c!=null)throw Error(s(92));if(W(d)){if(1<d.length)throw Error(s(93));d=d[0]}c=d}c==null&&(c=""),o=c}c=Bn(o),i.defaultValue=c,d=i.textContent,d===c&&d!==""&&d!==null&&(i.value=d),se(i)}function ys(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var Tu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jo(i,o,c){var d=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":d?i.setProperty(o,c):typeof c!="number"||c===0||Tu.has(o)?o==="float"?i.cssFloat=c:i[o]=(""+c).trim():i[o]=c+"px"}function $l(i,o,c){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?i.setProperty(d,""):d==="float"?i.cssFloat="":i[d]="");for(var v in o)d=o[v],o.hasOwnProperty(v)&&c[v]!==d&&jo(i,v,d)}else for(var w in o)o.hasOwnProperty(w)&&jo(i,w,o[w])}function Fa(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Au=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function qo(i){return Au.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Li(){}var Jl=null;function Ya(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Go=null,Jt=null;function Qi(i){var o=Uo(i);if(o&&(i=o.stateNode)){var c=i[Mn]||null;t:switch(i=o.stateNode,o.type){case"input":if(Su(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+en(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var d=c[o];if(d!==i&&d.form===i.form){var v=d[Mn]||null;if(!v)throw Error(s(90));Su(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<c.length;o++)d=c[o],d.form===i.form&&an(d)}break t;case"textarea":gr(i,c.value,c.defaultValue);break t;case"select":o=c.value,o!=null&&Fe(i,!!c.multiple,o,!1)}}}var Ue=!1;function Eu(i,o,c){if(Ue)return i(o,c);Ue=!0;try{var d=i(o);return d}finally{if(Ue=!1,(Go!==null||Jt!==null)&&(bd(),Go&&(o=Go,i=Jt,Jt=Go=null,Qi(o),i)))for(o=0;o<i.length;o++)Qi(i[o])}}function io(i,o){var c=i.stateNode;if(c===null)return null;var d=c[Mn]||null;if(d===null)return null;c=d[o];t:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(i=i.type,d=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!d;break t;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(s(231,o,typeof c));return c}var $i=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xa=!1;if($i)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){Xa=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{Xa=!1}var vs=null,so=null,pn=null;function yr(){if(pn)return pn;var i,o=so,c=o.length,d,v="value"in vs?vs.value:vs.textContent,w=v.length;for(i=0;i<c&&o[i]===v[i];i++);var M=c-i;for(d=1;d<=M&&o[c-d]===v[w-d];d++);return pn=v.slice(i,1<d?1-d:void 0)}function Qa(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function $a(){return!0}function Af(){return!1}function ii(i){function o(c,d,v,w,M){this._reactName=c,this._targetInst=v,this.type=d,this.nativeEvent=w,this.target=M,this.currentTarget=null;for(var H in i)i.hasOwnProperty(H)&&(c=i[H],this[H]=c?c(w):w[H]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?$a:Af,this.isPropagationStopped=Af,this}return g(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),o}var Fs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tc=ii(Fs),Zo=g({},Fs,{view:0,detail:0}),_e=ii(Zo),Cu,_i,Ys,Ka=g({},Zo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ru,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ys&&(Ys&&i.type==="mousemove"?(Cu=i.screenX-Ys.screenX,_i=i.screenY-Ys.screenY):_i=Cu=0,Ys=i),Cu)},movementY:function(i){return"movementY"in i?i.movementY:_i}}),Ef=ii(Ka),Lu=g({},Ka,{dataTransfer:0}),Rm=ii(Lu),Cf=g({},Zo,{relatedTarget:0}),Mu=ii(Cf),Im=g({},Fs,{animationName:0,elapsedTime:0,pseudoElement:0}),ku=ii(Im),Nm=g({},Fs,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),bs=ii(Nm),Pm=g({},Fs,{data:0}),Ou=ii(Pm),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Du(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Mf[i])?!!o[i]:!1}function Ru(){return Du}var kf=g({},Zo,{key:function(i){if(i.key){var o=vr[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Qa(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Lf[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ru,charCode:function(i){return i.type==="keypress"?Qa(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Qa(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Of=ii(kf),zm=g({},Ka,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Df=ii(zm),Iu=g({},Zo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ru}),Um=ii(Iu),Rf=g({},Fs,{propertyName:0,elapsedTime:0,pseudoElement:0}),If=ii(Rf),ec=g({},Ka,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),ro=ii(ec),Bm=g({},Fs,{newState:0,oldState:0}),Ja=ii(Bm),Mi=[9,13,27,32],nc=$i&&"CompositionEvent"in window,Wo=null;$i&&"documentMode"in document&&(Wo=document.documentMode);var Hm=$i&&"TextEvent"in window&&!Wo,ic=$i&&(!nc||Wo&&8<Wo&&11>=Wo),sc=" ",Nf=!1;function Pf(i,o){switch(i){case"keyup":return Mi.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nu(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Fo=!1;function Ji(i,o){switch(i){case"compositionend":return Nu(o);case"keypress":return o.which!==32?null:(Nf=!0,sc);case"textInput":return i=o.data,i===sc&&Nf?null:i;default:return null}}function Yo(i,o){if(Fo)return i==="compositionend"||!nc&&Pf(i,o)?(i=yr(),pn=so=vs=null,Fo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return ic&&o.locale!=="ko"?null:o.data;default:return null}}var Vm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ws(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Vm[i.type]:o==="textarea"}function zf(i,o,c,d){Go?Jt?Jt.push(d):Jt=[d]:Go=d,o=Cd(o,"onChange"),0<o.length&&(c=new tc("onChange","change",null,c,d),i.push({event:c,listeners:o}))}var xs=null,tl=null;function el(i){Kw(i,0)}function nl(i){var o=mr(i);if(an(o))return i}function il(i,o){if(i==="change")return o}var Uf=!1;if($i){var Ss;if($i){var Xo="oninput"in document;if(!Xo){var Bf=document.createElement("div");Bf.setAttribute("oninput","return;"),Xo=typeof Bf.oninput=="function"}Ss=Xo}else Ss=!1;Uf=Ss&&(!document.documentMode||9<document.documentMode)}function rc(){xs&&(xs.detachEvent("onpropertychange",Hf),tl=xs=null)}function Hf(i){if(i.propertyName==="value"&&nl(tl)){var o=[];zf(o,tl,i,Ya(i)),Eu(el,o)}}function Xs(i,o,c){i==="focusin"?(rc(),xs=o,tl=c,xs.attachEvent("onpropertychange",Hf)):i==="focusout"&&rc()}function jm(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return nl(tl)}function Qo(i,o){if(i==="click")return nl(o)}function qm(i,o){if(i==="input"||i==="change")return nl(o)}function Qs(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Yn=typeof Object.is=="function"?Object.is:Qs;function $o(i,o){if(Yn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),d=Object.keys(o);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var v=c[d];if(!ue.call(o,v)||!Yn(i[v],o[v]))return!1}return!0}function oc(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sl(i,o){var c=oc(i);i=0;for(var d;c;){if(c.nodeType===3){if(d=i+c.textContent.length,i<=o&&d>=o)return{node:c,offset:o-i};i=d}t:{for(;c;){if(c.nextSibling){c=c.nextSibling;break t}c=c.parentNode}c=void 0}c=oc(c)}}function ac(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?ac(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function rl(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Ho(i.document);o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=Ho(i.document)}return o}function br(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var lc=$i&&"documentMode"in document&&11>=document.documentMode,wr=null,cc=null,ol=null,Ko=!1;function Vf(i,o,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;Ko||wr==null||wr!==Ho(d)||(d=wr,"selectionStart"in d&&br(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ol&&$o(ol,d)||(ol=d,d=Cd(cc,"onSelect"),0<d.length&&(o=new tc("onSelect","select",null,o,c),i.push({event:o,listeners:d}),o.target=wr)))}function xr(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var Jo={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionrun:xr("Transition","TransitionRun"),transitionstart:xr("Transition","TransitionStart"),transitioncancel:xr("Transition","TransitionCancel"),transitionend:xr("Transition","TransitionEnd")},uc={},jf={};$i&&(jf=document.createElement("div").style,"AnimationEvent"in window||(delete Jo.animationend.animation,delete Jo.animationiteration.animation,delete Jo.animationstart.animation),"TransitionEvent"in window||delete Jo.transitionend.transition);function Xn(i){if(uc[i])return uc[i];if(!Jo[i])return i;var o=Jo[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in jf)return uc[i]=o[c];return i}var al=Xn("animationend"),qf=Xn("animationiteration"),ll=Xn("animationstart"),Gm=Xn("transitionrun"),Gf=Xn("transitionstart"),Zm=Xn("transitioncancel"),ta=Xn("transitionend"),Zf=new Map,Sr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Sr.push("scrollEnd");function ki(i,o){Zf.set(i,o),eo(o,[i])}var cl=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Oi=[],ui=0,hc=0;function ul(){for(var i=ui,o=hc=ui=0;o<i;){var c=Oi[o];Oi[o++]=null;var d=Oi[o];Oi[o++]=null;var v=Oi[o];Oi[o++]=null;var w=Oi[o];if(Oi[o++]=null,d!==null&&v!==null){var M=d.pending;M===null?v.next=v:(v.next=M.next,M.next=v),d.pending=v}w!==0&&ea(c,v,w)}}function Tr(i,o,c,d){Oi[ui++]=i,Oi[ui++]=o,Oi[ui++]=c,Oi[ui++]=d,hc|=d,i.lanes|=d,i=i.alternate,i!==null&&(i.lanes|=d)}function Pu(i,o,c,d){return Tr(i,o,c,d),hl(i)}function Ts(i,o){return Tr(i,null,null,o),hl(i)}function ea(i,o,c){i.lanes|=c;var d=i.alternate;d!==null&&(d.lanes|=c);for(var v=!1,w=i.return;w!==null;)w.childLanes|=c,d=w.alternate,d!==null&&(d.childLanes|=c),w.tag===22&&(i=w.stateNode,i===null||i._visibility&1||(v=!0)),i=w,w=w.return;return i.tag===3?(w=i.stateNode,v&&o!==null&&(v=31-ni(c),i=w.hiddenUpdates,d=i[v],d===null?i[v]=[o]:d.push(o),o.lane=c|536870912),w):null}function hl(i){if(50<ah)throw ah=0,F_=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var oo={};function Wm(i,o,c,d){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hi(i,o,c,d){return new Wm(i,o,c,d)}function fc(i){return i=i.prototype,!(!i||!i.isReactComponent)}function As(i,o){var c=i.alternate;return c===null?(c=hi(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function zu(i,o){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,o=c.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function fl(i,o,c,d,v,w){var M=0;if(d=i,typeof i=="function")fc(i)&&(M=1);else if(typeof i=="string")M=lC(i,c,mt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case Z:return i=hi(31,c,o,v),i.elementType=Z,i.lanes=w,i;case A:return ao(c.children,v,w,o);case E:M=8,v|=24;break;case R:return i=hi(12,c,o,v|2),i.elementType=R,i.lanes=w,i;case N:return i=hi(13,c,o,v),i.elementType=N,i.lanes=w,i;case j:return i=hi(19,c,o,v),i.elementType=j,i.lanes=w,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case O:M=10;break t;case z:M=9;break t;case Q:M=11;break t;case Y:M=14;break t;case G:M=16,d=null;break t}M=29,c=Error(s(130,i===null?"null":typeof i,"")),d=null}return o=hi(M,c,o,v),o.elementType=i,o.type=d,o.lanes=w,o}function ao(i,o,c,d){return i=hi(7,i,d,o),i.lanes=c,i}function dc(i,o,c){return i=hi(6,i,null,o),i.lanes=c,i}function Uu(i){var o=hi(18,null,null,0);return o.stateNode=i,o}function Bu(i,o,c){return o=hi(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var l=new WeakMap;function f(i,o){if(typeof i=="object"&&i!==null){var c=l.get(i);return c!==void 0?c:(o={value:i,source:o,stack:Ee(o)},l.set(i,o),o)}return{value:i,source:o,stack:Ee(o)}}var y=[],T=0,C=null,B=0,J=[],ot=0,ft=null,St=1,Rt="";function Ft(i,o){y[T++]=B,y[T++]=C,C=i,B=o}function le(i,o,c){J[ot++]=St,J[ot++]=Rt,J[ot++]=ft,ft=i;var d=St;i=Rt;var v=32-ni(d)-1;d&=~(1<<v),c+=1;var w=32-ni(o)+v;if(30<w){var M=v-v%5;w=(d&(1<<M)-1).toString(32),d>>=M,v-=M,St=1<<32-ni(o)+v|c<<v|d,Rt=w+i}else St=1<<w|c<<v|d,Rt=i}function Hn(i){i.return!==null&&(Ft(i,1),le(i,1,0))}function mn(i){for(;i===C;)C=y[--T],y[T]=null,B=y[--T],y[T]=null;for(;i===ft;)ft=J[--ot],J[ot]=null,Rt=J[--ot],J[ot]=null,St=J[--ot],J[ot]=null}function gi(i,o){J[ot++]=St,J[ot++]=Rt,J[ot++]=ft,St=o.id,Rt=o.overflow,ft=i}var Oe=null,De=null,de=!1,Ar=null,Di=!1,pc=Error(s(519));function Er(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw dl(f(o,i)),pc}function Hu(i){var o=i.stateNode,c=i.type,d=i.memoizedProps;switch(o[ze]=i,o[Mn]=d,c){case"dialog":me("cancel",o),me("close",o);break;case"iframe":case"object":case"embed":me("load",o);break;case"video":case"audio":for(c=0;c<ch.length;c++)me(ch[c],o);break;case"source":me("error",o);break;case"img":case"image":case"link":me("error",o),me("load",o);break;case"details":me("toggle",o);break;case"input":me("invalid",o),Wa(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":me("invalid",o);break;case"textarea":me("invalid",o),Vo(o,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||d.suppressHydrationWarning===!0||n1(o.textContent,c)?(d.popover!=null&&(me("beforetoggle",o),me("toggle",o)),d.onScroll!=null&&me("scroll",o),d.onScrollEnd!=null&&me("scrollend",o),d.onClick!=null&&(o.onclick=Li),o=!0):o=!1,o||Er(i,!0)}function fn(i){for(Oe=i.return;Oe;)switch(Oe.tag){case 5:case 31:case 13:Di=!1;return;case 27:case 3:Di=!0;return;default:Oe=Oe.return}}function $s(i){if(i!==Oe)return!1;if(!de)return fn(i),de=!0,!1;var o=i.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||lg(i.type,i.memoizedProps)),c=!c),c&&De&&Er(i),fn(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));De=h1(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));De=h1(i)}else o===27?(o=De,ma(i.type)?(i=dg,dg=null,De=i):De=o):De=Oe?Cs(i.stateNode.nextSibling):null;return!0}function lo(){De=Oe=null,de=!1}function Vu(){var i=Ar;return i!==null&&(Pi===null?Pi=i:Pi.push.apply(Pi,i),Ar=null),i}function dl(i){Ar===null?Ar=[i]:Ar.push(i)}var pl=I(null),Cr=null,Ks=null;function na(i,o,c){at(pl,o._currentValue),o._currentValue=c}function co(i){i._currentValue=pl.current,q(pl)}function Fm(i,o,c){for(;i!==null;){var d=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),i===c)break;i=i.return}}function Ym(i,o,c,d){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var w=v.dependencies;if(w!==null){var M=v.child;w=w.firstContext;t:for(;w!==null;){var H=w;w=v;for(var tt=0;tt<o.length;tt++)if(H.context===o[tt]){w.lanes|=c,H=w.alternate,H!==null&&(H.lanes|=c),Fm(w.return,c,i),d||(M=null);break t}w=H.next}}else if(v.tag===18){if(M=v.return,M===null)throw Error(s(341));M.lanes|=c,w=M.alternate,w!==null&&(w.lanes|=c),Fm(M,c,i),M=null}else M=v.child;if(M!==null)M.return=v;else for(M=v;M!==null;){if(M===i){M=null;break}if(v=M.sibling,v!==null){v.return=M.return,M=v;break}M=M.return}v=M}}function mc(i,o,c,d){i=null;for(var v=o,w=!1;v!==null;){if(!w){if((v.flags&524288)!==0)w=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var M=v.alternate;if(M===null)throw Error(s(387));if(M=M.memoizedProps,M!==null){var H=v.type;Yn(v.pendingProps.value,M.value)||(i!==null?i.push(H):i=[H])}}else if(v===Dt.current){if(M=v.alternate,M===null)throw Error(s(387));M.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(ph):i=[ph])}v=v.return}i!==null&&Ym(o,i,c,d),o.flags|=262144}function Wf(i){for(i=i.firstContext;i!==null;){if(!Yn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ml(i){Cr=i,Ks=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function si(i){return Vv(Cr,i)}function Ff(i,o){return Cr===null&&ml(i),Vv(i,o)}function Vv(i,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Ks===null){if(i===null)throw Error(s(308));Ks=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Ks=Ks.next=o;return c}var sE=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(c,d){i.push(d)}};this.abort=function(){o.aborted=!0,i.forEach(function(c){return c()})}},rE=n.unstable_scheduleCallback,oE=n.unstable_NormalPriority,On={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xm(){return{controller:new sE,data:new Map,refCount:0}}function ju(i){i.refCount--,i.refCount===0&&rE(oE,function(){i.controller.abort()})}var qu=null,Qm=0,_c=0,gc=null;function aE(i,o){if(qu===null){var c=qu=[];Qm=0,_c=J_(),gc={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Qm++,o.then(jv,jv),o}function jv(){if(--Qm===0&&qu!==null){gc!==null&&(gc.status="fulfilled");var i=qu;qu=null,_c=0,gc=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function lE(i,o){var c=[],d={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return i.then(function(){d.status="fulfilled",d.value=o;for(var v=0;v<c.length;v++)(0,c[v])(o)},function(v){for(d.status="rejected",d.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),d}var qv=P.S;P.S=function(i,o){Ew=hn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&aE(i,o),qv!==null&&qv(i,o)};var _l=I(null);function $m(){var i=_l.current;return i!==null?i:Ye.pooledCache}function Yf(i,o){o===null?at(_l,_l.current):at(_l,o.pool)}function Gv(){var i=$m();return i===null?null:{parent:On._currentValue,pool:i}}var yc=Error(s(460)),Km=Error(s(474)),Xf=Error(s(542)),Qf={then:function(){}};function Zv(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Wv(i,o,c){switch(c=i[c],c===void 0?i.push(o):c!==o&&(o.then(Li,Li),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Yv(i),i;default:if(typeof o.status=="string")o.then(Li,Li);else{if(i=Ye,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(d){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=d}},function(d){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,Yv(i),i}throw yl=o,yc}}function gl(i){try{var o=i._init;return o(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(yl=c,yc):c}}var yl=null;function Fv(){if(yl===null)throw Error(s(459));var i=yl;return yl=null,i}function Yv(i){if(i===yc||i===Xf)throw Error(s(483))}var vc=null,Gu=0;function $f(i){var o=Gu;return Gu+=1,vc===null&&(vc=[]),Wv(vc,i,o)}function Zu(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Kf(i,o){throw o.$$typeof===b?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function Xv(i){function o(rt,st){if(i){var lt=rt.deletions;lt===null?(rt.deletions=[st],rt.flags|=16):lt.push(st)}}function c(rt,st){if(!i)return null;for(;st!==null;)o(rt,st),st=st.sibling;return null}function d(rt){for(var st=new Map;rt!==null;)rt.key!==null?st.set(rt.key,rt):st.set(rt.index,rt),rt=rt.sibling;return st}function v(rt,st){return rt=As(rt,st),rt.index=0,rt.sibling=null,rt}function w(rt,st,lt){return rt.index=lt,i?(lt=rt.alternate,lt!==null?(lt=lt.index,lt<st?(rt.flags|=67108866,st):lt):(rt.flags|=67108866,st)):(rt.flags|=1048576,st)}function M(rt){return i&&rt.alternate===null&&(rt.flags|=67108866),rt}function H(rt,st,lt,xt){return st===null||st.tag!==6?(st=dc(lt,rt.mode,xt),st.return=rt,st):(st=v(st,lt),st.return=rt,st)}function tt(rt,st,lt,xt){var $t=lt.type;return $t===A?yt(rt,st,lt.props.children,xt,lt.key):st!==null&&(st.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===G&&gl($t)===st.type)?(st=v(st,lt.props),Zu(st,lt),st.return=rt,st):(st=fl(lt.type,lt.key,lt.props,null,rt.mode,xt),Zu(st,lt),st.return=rt,st)}function ht(rt,st,lt,xt){return st===null||st.tag!==4||st.stateNode.containerInfo!==lt.containerInfo||st.stateNode.implementation!==lt.implementation?(st=Bu(lt,rt.mode,xt),st.return=rt,st):(st=v(st,lt.children||[]),st.return=rt,st)}function yt(rt,st,lt,xt,$t){return st===null||st.tag!==7?(st=ao(lt,rt.mode,xt,$t),st.return=rt,st):(st=v(st,lt),st.return=rt,st)}function Tt(rt,st,lt){if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return st=dc(""+st,rt.mode,lt),st.return=rt,st;if(typeof st=="object"&&st!==null){switch(st.$$typeof){case x:return lt=fl(st.type,st.key,st.props,null,rt.mode,lt),Zu(lt,st),lt.return=rt,lt;case S:return st=Bu(st,rt.mode,lt),st.return=rt,st;case G:return st=gl(st),Tt(rt,st,lt)}if(W(st)||et(st))return st=ao(st,rt.mode,lt,null),st.return=rt,st;if(typeof st.then=="function")return Tt(rt,$f(st),lt);if(st.$$typeof===O)return Tt(rt,Ff(rt,st),lt);Kf(rt,st)}return null}function dt(rt,st,lt,xt){var $t=st!==null?st.key:null;if(typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint")return $t!==null?null:H(rt,st,""+lt,xt);if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case x:return lt.key===$t?tt(rt,st,lt,xt):null;case S:return lt.key===$t?ht(rt,st,lt,xt):null;case G:return lt=gl(lt),dt(rt,st,lt,xt)}if(W(lt)||et(lt))return $t!==null?null:yt(rt,st,lt,xt,null);if(typeof lt.then=="function")return dt(rt,st,$f(lt),xt);if(lt.$$typeof===O)return dt(rt,st,Ff(rt,lt),xt);Kf(rt,lt)}return null}function pt(rt,st,lt,xt,$t){if(typeof xt=="string"&&xt!==""||typeof xt=="number"||typeof xt=="bigint")return rt=rt.get(lt)||null,H(st,rt,""+xt,$t);if(typeof xt=="object"&&xt!==null){switch(xt.$$typeof){case x:return rt=rt.get(xt.key===null?lt:xt.key)||null,tt(st,rt,xt,$t);case S:return rt=rt.get(xt.key===null?lt:xt.key)||null,ht(st,rt,xt,$t);case G:return xt=gl(xt),pt(rt,st,lt,xt,$t)}if(W(xt)||et(xt))return rt=rt.get(lt)||null,yt(st,rt,xt,$t,null);if(typeof xt.then=="function")return pt(rt,st,lt,$f(xt),$t);if(xt.$$typeof===O)return pt(rt,st,lt,Ff(st,xt),$t);Kf(st,xt)}return null}function Ht(rt,st,lt,xt){for(var $t=null,Re=null,Zt=st,ce=st=0,ye=null;Zt!==null&&ce<lt.length;ce++){Zt.index>ce?(ye=Zt,Zt=null):ye=Zt.sibling;var Ie=dt(rt,Zt,lt[ce],xt);if(Ie===null){Zt===null&&(Zt=ye);break}i&&Zt&&Ie.alternate===null&&o(rt,Zt),st=w(Ie,st,ce),Re===null?$t=Ie:Re.sibling=Ie,Re=Ie,Zt=ye}if(ce===lt.length)return c(rt,Zt),de&&Ft(rt,ce),$t;if(Zt===null){for(;ce<lt.length;ce++)Zt=Tt(rt,lt[ce],xt),Zt!==null&&(st=w(Zt,st,ce),Re===null?$t=Zt:Re.sibling=Zt,Re=Zt);return de&&Ft(rt,ce),$t}for(Zt=d(Zt);ce<lt.length;ce++)ye=pt(Zt,rt,ce,lt[ce],xt),ye!==null&&(i&&ye.alternate!==null&&Zt.delete(ye.key===null?ce:ye.key),st=w(ye,st,ce),Re===null?$t=ye:Re.sibling=ye,Re=ye);return i&&Zt.forEach(function(ba){return o(rt,ba)}),de&&Ft(rt,ce),$t}function Kt(rt,st,lt,xt){if(lt==null)throw Error(s(151));for(var $t=null,Re=null,Zt=st,ce=st=0,ye=null,Ie=lt.next();Zt!==null&&!Ie.done;ce++,Ie=lt.next()){Zt.index>ce?(ye=Zt,Zt=null):ye=Zt.sibling;var ba=dt(rt,Zt,Ie.value,xt);if(ba===null){Zt===null&&(Zt=ye);break}i&&Zt&&ba.alternate===null&&o(rt,Zt),st=w(ba,st,ce),Re===null?$t=ba:Re.sibling=ba,Re=ba,Zt=ye}if(Ie.done)return c(rt,Zt),de&&Ft(rt,ce),$t;if(Zt===null){for(;!Ie.done;ce++,Ie=lt.next())Ie=Tt(rt,Ie.value,xt),Ie!==null&&(st=w(Ie,st,ce),Re===null?$t=Ie:Re.sibling=Ie,Re=Ie);return de&&Ft(rt,ce),$t}for(Zt=d(Zt);!Ie.done;ce++,Ie=lt.next())Ie=pt(Zt,rt,ce,Ie.value,xt),Ie!==null&&(i&&Ie.alternate!==null&&Zt.delete(Ie.key===null?ce:Ie.key),st=w(Ie,st,ce),Re===null?$t=Ie:Re.sibling=Ie,Re=Ie);return i&&Zt.forEach(function(vC){return o(rt,vC)}),de&&Ft(rt,ce),$t}function Ze(rt,st,lt,xt){if(typeof lt=="object"&&lt!==null&&lt.type===A&&lt.key===null&&(lt=lt.props.children),typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case x:t:{for(var $t=lt.key;st!==null;){if(st.key===$t){if($t=lt.type,$t===A){if(st.tag===7){c(rt,st.sibling),xt=v(st,lt.props.children),xt.return=rt,rt=xt;break t}}else if(st.elementType===$t||typeof $t=="object"&&$t!==null&&$t.$$typeof===G&&gl($t)===st.type){c(rt,st.sibling),xt=v(st,lt.props),Zu(xt,lt),xt.return=rt,rt=xt;break t}c(rt,st);break}else o(rt,st);st=st.sibling}lt.type===A?(xt=ao(lt.props.children,rt.mode,xt,lt.key),xt.return=rt,rt=xt):(xt=fl(lt.type,lt.key,lt.props,null,rt.mode,xt),Zu(xt,lt),xt.return=rt,rt=xt)}return M(rt);case S:t:{for($t=lt.key;st!==null;){if(st.key===$t)if(st.tag===4&&st.stateNode.containerInfo===lt.containerInfo&&st.stateNode.implementation===lt.implementation){c(rt,st.sibling),xt=v(st,lt.children||[]),xt.return=rt,rt=xt;break t}else{c(rt,st);break}else o(rt,st);st=st.sibling}xt=Bu(lt,rt.mode,xt),xt.return=rt,rt=xt}return M(rt);case G:return lt=gl(lt),Ze(rt,st,lt,xt)}if(W(lt))return Ht(rt,st,lt,xt);if(et(lt)){if($t=et(lt),typeof $t!="function")throw Error(s(150));return lt=$t.call(lt),Kt(rt,st,lt,xt)}if(typeof lt.then=="function")return Ze(rt,st,$f(lt),xt);if(lt.$$typeof===O)return Ze(rt,st,Ff(rt,lt),xt);Kf(rt,lt)}return typeof lt=="string"&&lt!==""||typeof lt=="number"||typeof lt=="bigint"?(lt=""+lt,st!==null&&st.tag===6?(c(rt,st.sibling),xt=v(st,lt),xt.return=rt,rt=xt):(c(rt,st),xt=dc(lt,rt.mode,xt),xt.return=rt,rt=xt),M(rt)):c(rt,st)}return function(rt,st,lt,xt){try{Gu=0;var $t=Ze(rt,st,lt,xt);return vc=null,$t}catch(Zt){if(Zt===yc||Zt===Xf)throw Zt;var Re=hi(29,Zt,null,rt.mode);return Re.lanes=xt,Re.return=rt,Re}}}var vl=Xv(!0),Qv=Xv(!1),ia=!1;function Jm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function t_(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function sa(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function ra(i,o,c){var d=i.updateQueue;if(d===null)return null;if(d=d.shared,(Pe&2)!==0){var v=d.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),d.pending=o,o=hl(i),ea(i,null,c),o}return Tr(i,d,o,c),hl(i)}function Wu(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var d=o.lanes;d&=i.pendingLanes,c|=d,o.lanes=c,Qt(i,c)}}function e_(i,o){var c=i.updateQueue,d=i.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var v=null,w=null;if(c=c.firstBaseUpdate,c!==null){do{var M={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};w===null?v=w=M:w=w.next=M,c=c.next}while(c!==null);w===null?v=w=o:w=w.next=o}else v=w=o;c={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:w,shared:d.shared,callbacks:d.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}var n_=!1;function Fu(){if(n_){var i=gc;if(i!==null)throw i}}function Yu(i,o,c,d){n_=!1;var v=i.updateQueue;ia=!1;var w=v.firstBaseUpdate,M=v.lastBaseUpdate,H=v.shared.pending;if(H!==null){v.shared.pending=null;var tt=H,ht=tt.next;tt.next=null,M===null?w=ht:M.next=ht,M=tt;var yt=i.alternate;yt!==null&&(yt=yt.updateQueue,H=yt.lastBaseUpdate,H!==M&&(H===null?yt.firstBaseUpdate=ht:H.next=ht,yt.lastBaseUpdate=tt))}if(w!==null){var Tt=v.baseState;M=0,yt=ht=tt=null,H=w;do{var dt=H.lane&-536870913,pt=dt!==H.lane;if(pt?(ge&dt)===dt:(d&dt)===dt){dt!==0&&dt===_c&&(n_=!0),yt!==null&&(yt=yt.next={lane:0,tag:H.tag,payload:H.payload,callback:null,next:null});t:{var Ht=i,Kt=H;dt=o;var Ze=c;switch(Kt.tag){case 1:if(Ht=Kt.payload,typeof Ht=="function"){Tt=Ht.call(Ze,Tt,dt);break t}Tt=Ht;break t;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=Kt.payload,dt=typeof Ht=="function"?Ht.call(Ze,Tt,dt):Ht,dt==null)break t;Tt=g({},Tt,dt);break t;case 2:ia=!0}}dt=H.callback,dt!==null&&(i.flags|=64,pt&&(i.flags|=8192),pt=v.callbacks,pt===null?v.callbacks=[dt]:pt.push(dt))}else pt={lane:dt,tag:H.tag,payload:H.payload,callback:H.callback,next:null},yt===null?(ht=yt=pt,tt=Tt):yt=yt.next=pt,M|=dt;if(H=H.next,H===null){if(H=v.shared.pending,H===null)break;pt=H,H=pt.next,pt.next=null,v.lastBaseUpdate=pt,v.shared.pending=null}}while(!0);yt===null&&(tt=Tt),v.baseState=tt,v.firstBaseUpdate=ht,v.lastBaseUpdate=yt,w===null&&(v.shared.lanes=0),ua|=M,i.lanes=M,i.memoizedState=Tt}}function $v(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function Kv(i,o){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)$v(c[i],o)}var bc=I(null),Jf=I(0);function Jv(i,o){i=vo,at(Jf,i),at(bc,o),vo=i|o.baseLanes}function i_(){at(Jf,vo),at(bc,bc.current)}function s_(){vo=Jf.current,q(bc),q(Jf)}var ts=I(null),Es=null;function oa(i){var o=i.alternate;at(Sn,Sn.current&1),at(ts,i),Es===null&&(o===null||bc.current!==null||o.memoizedState!==null)&&(Es=i)}function r_(i){at(Sn,Sn.current),at(ts,i),Es===null&&(Es=i)}function tb(i){i.tag===22?(at(Sn,Sn.current),at(ts,i),Es===null&&(Es=i)):aa()}function aa(){at(Sn,Sn.current),at(ts,ts.current)}function es(i){q(ts),Es===i&&(Es=null),q(Sn)}var Sn=I(0);function td(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||hg(c)||fg(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var uo=0,ae=null,qe=null,Dn=null,ed=!1,wc=!1,bl=!1,nd=0,Xu=0,xc=null,cE=0;function _n(){throw Error(s(321))}function o_(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Yn(i[c],o[c]))return!1;return!0}function a_(i,o,c,d,v,w){return uo=w,ae=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,P.H=i===null||i.memoizedState===null?zb:x_,bl=!1,w=c(d,v),bl=!1,wc&&(w=nb(o,c,d,v)),eb(i),w}function eb(i){P.H=Ku;var o=qe!==null&&qe.next!==null;if(uo=0,Dn=qe=ae=null,ed=!1,Xu=0,xc=null,o)throw Error(s(300));i===null||Rn||(i=i.dependencies,i!==null&&Wf(i)&&(Rn=!0))}function nb(i,o,c,d){ae=i;var v=0;do{if(wc&&(xc=null),Xu=0,wc=!1,25<=v)throw Error(s(301));if(v+=1,Dn=qe=null,i.updateQueue!=null){var w=i.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}P.H=Ub,w=o(c,d)}while(wc);return w}function uE(){var i=P.H,o=i.useState()[0];return o=typeof o.then=="function"?Qu(o):o,i=i.useState()[0],(qe!==null?qe.memoizedState:null)!==i&&(ae.flags|=1024),o}function l_(){var i=nd!==0;return nd=0,i}function c_(i,o,c){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~c}function u_(i){if(ed){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}ed=!1}uo=0,Dn=qe=ae=null,wc=!1,Xu=nd=0,xc=null}function yi(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dn===null?ae.memoizedState=Dn=i:Dn=Dn.next=i,Dn}function Tn(){if(qe===null){var i=ae.alternate;i=i!==null?i.memoizedState:null}else i=qe.next;var o=Dn===null?ae.memoizedState:Dn.next;if(o!==null)Dn=o,qe=i;else{if(i===null)throw ae.alternate===null?Error(s(467)):Error(s(310));qe=i,i={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Dn===null?ae.memoizedState=Dn=i:Dn=Dn.next=i}return Dn}function id(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qu(i){var o=Xu;return Xu+=1,xc===null&&(xc=[]),i=Wv(xc,i,o),o=ae,(Dn===null?o.memoizedState:Dn.next)===null&&(o=o.alternate,P.H=o===null||o.memoizedState===null?zb:x_),i}function sd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Qu(i);if(i.$$typeof===O)return si(i)}throw Error(s(438,String(i)))}function h_(i){var o=null,c=ae.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var d=ae.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=id(),ae.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(i),d=0;d<i;d++)c[d]=F;return o.index++,c}function ho(i,o){return typeof o=="function"?o(i):o}function rd(i){var o=Tn();return f_(o,qe,i)}function f_(i,o,c){var d=i.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=c;var v=i.baseQueue,w=d.pending;if(w!==null){if(v!==null){var M=v.next;v.next=w.next,w.next=M}o.baseQueue=v=w,d.pending=null}if(w=i.baseState,v===null)i.memoizedState=w;else{o=v.next;var H=M=null,tt=null,ht=o,yt=!1;do{var Tt=ht.lane&-536870913;if(Tt!==ht.lane?(ge&Tt)===Tt:(uo&Tt)===Tt){var dt=ht.revertLane;if(dt===0)tt!==null&&(tt=tt.next={lane:0,revertLane:0,gesture:null,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null}),Tt===_c&&(yt=!0);else if((uo&dt)===dt){ht=ht.next,dt===_c&&(yt=!0);continue}else Tt={lane:0,revertLane:ht.revertLane,gesture:null,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null},tt===null?(H=tt=Tt,M=w):tt=tt.next=Tt,ae.lanes|=dt,ua|=dt;Tt=ht.action,bl&&c(w,Tt),w=ht.hasEagerState?ht.eagerState:c(w,Tt)}else dt={lane:Tt,revertLane:ht.revertLane,gesture:ht.gesture,action:ht.action,hasEagerState:ht.hasEagerState,eagerState:ht.eagerState,next:null},tt===null?(H=tt=dt,M=w):tt=tt.next=dt,ae.lanes|=Tt,ua|=Tt;ht=ht.next}while(ht!==null&&ht!==o);if(tt===null?M=w:tt.next=H,!Yn(w,i.memoizedState)&&(Rn=!0,yt&&(c=gc,c!==null)))throw c;i.memoizedState=w,i.baseState=M,i.baseQueue=tt,d.lastRenderedState=w}return v===null&&(d.lanes=0),[i.memoizedState,d.dispatch]}function d_(i){var o=Tn(),c=o.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=i;var d=c.dispatch,v=c.pending,w=o.memoizedState;if(v!==null){c.pending=null;var M=v=v.next;do w=i(w,M.action),M=M.next;while(M!==v);Yn(w,o.memoizedState)||(Rn=!0),o.memoizedState=w,o.baseQueue===null&&(o.baseState=w),c.lastRenderedState=w}return[w,d]}function ib(i,o,c){var d=ae,v=Tn(),w=de;if(w){if(c===void 0)throw Error(s(407));c=c()}else c=o();var M=!Yn((qe||v).memoizedState,c);if(M&&(v.memoizedState=c,Rn=!0),v=v.queue,__(ob.bind(null,d,v,i),[i]),v.getSnapshot!==o||M||Dn!==null&&Dn.memoizedState.tag&1){if(d.flags|=2048,Sc(9,{destroy:void 0},rb.bind(null,d,v,c,o),null),Ye===null)throw Error(s(349));w||(uo&127)!==0||sb(d,o,c)}return c}function sb(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=ae.updateQueue,o===null?(o=id(),ae.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function rb(i,o,c,d){o.value=c,o.getSnapshot=d,ab(o)&&lb(i)}function ob(i,o,c){return c(function(){ab(o)&&lb(i)})}function ab(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Yn(i,c)}catch{return!0}}function lb(i){var o=Ts(i,2);o!==null&&zi(o,i,2)}function p_(i){var o=yi();if(typeof i=="function"){var c=i;if(i=c(),bl){Xi(!0);try{c()}finally{Xi(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:i},o}function cb(i,o,c,d){return i.baseState=c,f_(i,qe,typeof d=="function"?d:ho)}function hE(i,o,c,d,v){if(ld(i))throw Error(s(485));if(i=o.action,i!==null){var w={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){w.listeners.push(M)}};P.T!==null?c(!0):w.isTransition=!1,d(w),c=o.pending,c===null?(w.next=o.pending=w,ub(o,w)):(w.next=c.next,o.pending=c.next=w)}}function ub(i,o){var c=o.action,d=o.payload,v=i.state;if(o.isTransition){var w=P.T,M={};P.T=M;try{var H=c(v,d),tt=P.S;tt!==null&&tt(M,H),hb(i,o,H)}catch(ht){m_(i,o,ht)}finally{w!==null&&M.types!==null&&(w.types=M.types),P.T=w}}else try{w=c(v,d),hb(i,o,w)}catch(ht){m_(i,o,ht)}}function hb(i,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){fb(i,o,d)},function(d){return m_(i,o,d)}):fb(i,o,c)}function fb(i,o,c){o.status="fulfilled",o.value=c,db(o),i.state=c,o=i.pending,o!==null&&(c=o.next,c===o?i.pending=null:(c=c.next,o.next=c,ub(i,c)))}function m_(i,o,c){var d=i.pending;if(i.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=c,db(o),o=o.next;while(o!==d)}i.action=null}function db(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function pb(i,o){return o}function mb(i,o){if(de){var c=Ye.formState;if(c!==null){t:{var d=ae;if(de){if(De){e:{for(var v=De,w=Di;v.nodeType!==8;){if(!w){v=null;break e}if(v=Cs(v.nextSibling),v===null){v=null;break e}}w=v.data,v=w==="F!"||w==="F"?v:null}if(v){De=Cs(v.nextSibling),d=v.data==="F!";break t}}Er(d)}d=!1}d&&(o=c[0])}}return c=yi(),c.memoizedState=c.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pb,lastRenderedState:o},c.queue=d,c=Ib.bind(null,ae,d),d.dispatch=c,d=p_(!1),w=w_.bind(null,ae,!1,d.queue),d=yi(),v={state:o,dispatch:null,action:i,pending:null},d.queue=v,c=hE.bind(null,ae,v,w,c),v.dispatch=c,d.memoizedState=i,[o,c,!1]}function _b(i){var o=Tn();return gb(o,qe,i)}function gb(i,o,c){if(o=f_(i,o,pb)[0],i=rd(ho)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Qu(o)}catch(M){throw M===yc?Xf:M}else d=o;o=Tn();var v=o.queue,w=v.dispatch;return c!==o.memoizedState&&(ae.flags|=2048,Sc(9,{destroy:void 0},fE.bind(null,v,c),null)),[d,w,i]}function fE(i,o){i.action=o}function yb(i){var o=Tn(),c=qe;if(c!==null)return gb(o,c,i);Tn(),o=o.memoizedState,c=Tn();var d=c.queue.dispatch;return c.memoizedState=i,[o,d,!1]}function Sc(i,o,c,d){return i={tag:i,create:c,deps:d,inst:o,next:null},o=ae.updateQueue,o===null&&(o=id(),ae.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=i.next=i:(d=c.next,c.next=i,i.next=d,o.lastEffect=i),i}function vb(){return Tn().memoizedState}function od(i,o,c,d){var v=yi();ae.flags|=i,v.memoizedState=Sc(1|o,{destroy:void 0},c,d===void 0?null:d)}function ad(i,o,c,d){var v=Tn();d=d===void 0?null:d;var w=v.memoizedState.inst;qe!==null&&d!==null&&o_(d,qe.memoizedState.deps)?v.memoizedState=Sc(o,w,c,d):(ae.flags|=i,v.memoizedState=Sc(1|o,w,c,d))}function bb(i,o){od(8390656,8,i,o)}function __(i,o){ad(2048,8,i,o)}function dE(i){ae.flags|=4;var o=ae.updateQueue;if(o===null)o=id(),ae.updateQueue=o,o.events=[i];else{var c=o.events;c===null?o.events=[i]:c.push(i)}}function wb(i){var o=Tn().memoizedState;return dE({ref:o,nextImpl:i}),function(){if((Pe&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function xb(i,o){return ad(4,2,i,o)}function Sb(i,o){return ad(4,4,i,o)}function Tb(i,o){if(typeof o=="function"){i=i();var c=o(i);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Ab(i,o,c){c=c!=null?c.concat([i]):null,ad(4,4,Tb.bind(null,o,i),c)}function g_(){}function Eb(i,o){var c=Tn();o=o===void 0?null:o;var d=c.memoizedState;return o!==null&&o_(o,d[1])?d[0]:(c.memoizedState=[i,o],i)}function Cb(i,o){var c=Tn();o=o===void 0?null:o;var d=c.memoizedState;if(o!==null&&o_(o,d[1]))return d[0];if(d=i(),bl){Xi(!0);try{i()}finally{Xi(!1)}}return c.memoizedState=[d,o],d}function y_(i,o,c){return c===void 0||(uo&1073741824)!==0&&(ge&261930)===0?i.memoizedState=o:(i.memoizedState=c,i=Lw(),ae.lanes|=i,ua|=i,c)}function Lb(i,o,c,d){return Yn(c,o)?c:bc.current!==null?(i=y_(i,c,d),Yn(i,o)||(Rn=!0),i):(uo&42)===0||(uo&1073741824)!==0&&(ge&261930)===0?(Rn=!0,i.memoizedState=c):(i=Lw(),ae.lanes|=i,ua|=i,o)}function Mb(i,o,c,d,v){var w=U.p;U.p=w!==0&&8>w?w:8;var M=P.T,H={};P.T=H,w_(i,!1,o,c);try{var tt=v(),ht=P.S;if(ht!==null&&ht(H,tt),tt!==null&&typeof tt=="object"&&typeof tt.then=="function"){var yt=lE(tt,d);$u(i,o,yt,ss(i))}else $u(i,o,d,ss(i))}catch(Tt){$u(i,o,{then:function(){},status:"rejected",reason:Tt},ss())}finally{U.p=w,M!==null&&H.types!==null&&(M.types=H.types),P.T=M}}function pE(){}function v_(i,o,c,d){if(i.tag!==5)throw Error(s(476));var v=kb(i).queue;Mb(i,v,o,K,c===null?pE:function(){return Ob(i),c(d)})}function kb(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:K},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:c},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function Ob(i){var o=kb(i);o.next===null&&(o=i.alternate.memoizedState),$u(i,o.next.queue,{},ss())}function b_(){return si(ph)}function Db(){return Tn().memoizedState}function Rb(){return Tn().memoizedState}function mE(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var c=ss();i=sa(c);var d=ra(o,i,c);d!==null&&(zi(d,o,c),Wu(d,o,c)),o={cache:Xm()},i.payload=o;return}o=o.return}}function _E(i,o,c){var d=ss();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},ld(i)?Nb(o,c):(c=Pu(i,o,c,d),c!==null&&(zi(c,i,d),Pb(c,o,d)))}function Ib(i,o,c){var d=ss();$u(i,o,c,d)}function $u(i,o,c,d){var v={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(ld(i))Nb(o,v);else{var w=i.alternate;if(i.lanes===0&&(w===null||w.lanes===0)&&(w=o.lastRenderedReducer,w!==null))try{var M=o.lastRenderedState,H=w(M,c);if(v.hasEagerState=!0,v.eagerState=H,Yn(H,M))return Tr(i,o,v,0),Ye===null&&ul(),!1}catch{}if(c=Pu(i,o,v,d),c!==null)return zi(c,i,d),Pb(c,o,d),!0}return!1}function w_(i,o,c,d){if(d={lane:2,revertLane:J_(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},ld(i)){if(o)throw Error(s(479))}else o=Pu(i,c,d,2),o!==null&&zi(o,i,2)}function ld(i){var o=i.alternate;return i===ae||o!==null&&o===ae}function Nb(i,o){wc=ed=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function Pb(i,o,c){if((c&4194048)!==0){var d=o.lanes;d&=i.pendingLanes,c|=d,o.lanes=c,Qt(i,c)}}var Ku={readContext:si,use:sd,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useInsertionEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useDeferredValue:_n,useTransition:_n,useSyncExternalStore:_n,useId:_n,useHostTransitionStatus:_n,useFormState:_n,useActionState:_n,useOptimistic:_n,useMemoCache:_n,useCacheRefresh:_n};Ku.useEffectEvent=_n;var zb={readContext:si,use:sd,useCallback:function(i,o){return yi().memoizedState=[i,o===void 0?null:o],i},useContext:si,useEffect:bb,useImperativeHandle:function(i,o,c){c=c!=null?c.concat([i]):null,od(4194308,4,Tb.bind(null,o,i),c)},useLayoutEffect:function(i,o){return od(4194308,4,i,o)},useInsertionEffect:function(i,o){od(4,2,i,o)},useMemo:function(i,o){var c=yi();o=o===void 0?null:o;var d=i();if(bl){Xi(!0);try{i()}finally{Xi(!1)}}return c.memoizedState=[d,o],d},useReducer:function(i,o,c){var d=yi();if(c!==void 0){var v=c(o);if(bl){Xi(!0);try{c(o)}finally{Xi(!1)}}}else v=o;return d.memoizedState=d.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},d.queue=i,i=i.dispatch=_E.bind(null,ae,i),[d.memoizedState,i]},useRef:function(i){var o=yi();return i={current:i},o.memoizedState=i},useState:function(i){i=p_(i);var o=i.queue,c=Ib.bind(null,ae,o);return o.dispatch=c,[i.memoizedState,c]},useDebugValue:g_,useDeferredValue:function(i,o){var c=yi();return y_(c,i,o)},useTransition:function(){var i=p_(!1);return i=Mb.bind(null,ae,i.queue,!0,!1),yi().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,c){var d=ae,v=yi();if(de){if(c===void 0)throw Error(s(407));c=c()}else{if(c=o(),Ye===null)throw Error(s(349));(ge&127)!==0||sb(d,o,c)}v.memoizedState=c;var w={value:c,getSnapshot:o};return v.queue=w,bb(ob.bind(null,d,w,i),[i]),d.flags|=2048,Sc(9,{destroy:void 0},rb.bind(null,d,w,c,o),null),c},useId:function(){var i=yi(),o=Ye.identifierPrefix;if(de){var c=Rt,d=St;c=(d&~(1<<32-ni(d)-1)).toString(32)+c,o="_"+o+"R_"+c,c=nd++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=cE++,o="_"+o+"r_"+c.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:b_,useFormState:mb,useActionState:mb,useOptimistic:function(i){var o=yi();o.memoizedState=o.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=w_.bind(null,ae,!0,c),c.dispatch=o,[i,o]},useMemoCache:h_,useCacheRefresh:function(){return yi().memoizedState=mE.bind(null,ae)},useEffectEvent:function(i){var o=yi(),c={impl:i};return o.memoizedState=c,function(){if((Pe&2)!==0)throw Error(s(440));return c.impl.apply(void 0,arguments)}}},x_={readContext:si,use:sd,useCallback:Eb,useContext:si,useEffect:__,useImperativeHandle:Ab,useInsertionEffect:xb,useLayoutEffect:Sb,useMemo:Cb,useReducer:rd,useRef:vb,useState:function(){return rd(ho)},useDebugValue:g_,useDeferredValue:function(i,o){var c=Tn();return Lb(c,qe.memoizedState,i,o)},useTransition:function(){var i=rd(ho)[0],o=Tn().memoizedState;return[typeof i=="boolean"?i:Qu(i),o]},useSyncExternalStore:ib,useId:Db,useHostTransitionStatus:b_,useFormState:_b,useActionState:_b,useOptimistic:function(i,o){var c=Tn();return cb(c,qe,i,o)},useMemoCache:h_,useCacheRefresh:Rb};x_.useEffectEvent=wb;var Ub={readContext:si,use:sd,useCallback:Eb,useContext:si,useEffect:__,useImperativeHandle:Ab,useInsertionEffect:xb,useLayoutEffect:Sb,useMemo:Cb,useReducer:d_,useRef:vb,useState:function(){return d_(ho)},useDebugValue:g_,useDeferredValue:function(i,o){var c=Tn();return qe===null?y_(c,i,o):Lb(c,qe.memoizedState,i,o)},useTransition:function(){var i=d_(ho)[0],o=Tn().memoizedState;return[typeof i=="boolean"?i:Qu(i),o]},useSyncExternalStore:ib,useId:Db,useHostTransitionStatus:b_,useFormState:yb,useActionState:yb,useOptimistic:function(i,o){var c=Tn();return qe!==null?cb(c,qe,i,o):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:h_,useCacheRefresh:Rb};Ub.useEffectEvent=wb;function S_(i,o,c,d){o=i.memoizedState,c=c(d,o),c=c==null?o:g({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var T_={enqueueSetState:function(i,o,c){i=i._reactInternals;var d=ss(),v=sa(d);v.payload=o,c!=null&&(v.callback=c),o=ra(i,v,d),o!==null&&(zi(o,i,d),Wu(o,i,d))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var d=ss(),v=sa(d);v.tag=1,v.payload=o,c!=null&&(v.callback=c),o=ra(i,v,d),o!==null&&(zi(o,i,d),Wu(o,i,d))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=ss(),d=sa(c);d.tag=2,o!=null&&(d.callback=o),o=ra(i,d,c),o!==null&&(zi(o,i,c),Wu(o,i,c))}};function Bb(i,o,c,d,v,w,M){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(d,w,M):o.prototype&&o.prototype.isPureReactComponent?!$o(c,d)||!$o(v,w):!0}function Hb(i,o,c,d){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,d),o.state!==i&&T_.enqueueReplaceState(o,o.state,null)}function wl(i,o){var c=o;if("ref"in o){c={};for(var d in o)d!=="ref"&&(c[d]=o[d])}if(i=i.defaultProps){c===o&&(c=g({},c));for(var v in i)c[v]===void 0&&(c[v]=i[v])}return c}function Vb(i){cl(i)}function jb(i){console.error(i)}function qb(i){cl(i)}function cd(i,o){try{var c=i.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function Gb(i,o,c){try{var d=i.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function A_(i,o,c){return c=sa(c),c.tag=3,c.payload={element:null},c.callback=function(){cd(i,o)},c}function Zb(i){return i=sa(i),i.tag=3,i}function Wb(i,o,c,d){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var w=d.value;i.payload=function(){return v(w)},i.callback=function(){Gb(o,c,d)}}var M=c.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(i.callback=function(){Gb(o,c,d),typeof v!="function"&&(ha===null?ha=new Set([this]):ha.add(this));var H=d.stack;this.componentDidCatch(d.value,{componentStack:H!==null?H:""})})}function gE(i,o,c,d,v){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=c.alternate,o!==null&&mc(o,c,v,!0),c=ts.current,c!==null){switch(c.tag){case 31:case 13:return Es===null?wd():c.alternate===null&&gn===0&&(gn=3),c.flags&=-257,c.flags|=65536,c.lanes=v,d===Qf?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([d]):o.add(d),Q_(i,d,v)),!1;case 22:return c.flags|=65536,d===Qf?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([d]):c.add(d)),Q_(i,d,v)),!1}throw Error(s(435,c.tag))}return Q_(i,d,v),wd(),!1}if(de)return o=ts.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,d!==pc&&(i=Error(s(422),{cause:d}),dl(f(i,c)))):(d!==pc&&(o=Error(s(423),{cause:d}),dl(f(o,c))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,d=f(d,c),v=A_(i.stateNode,d,v),e_(i,v),gn!==4&&(gn=2)),!1;var w=Error(s(520),{cause:d});if(w=f(w,c),oh===null?oh=[w]:oh.push(w),gn!==4&&(gn=2),o===null)return!0;d=f(d,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,i=v&-v,c.lanes|=i,i=A_(c.stateNode,d,i),e_(c,i),!1;case 1:if(o=c.type,w=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ha===null||!ha.has(w))))return c.flags|=65536,v&=-v,c.lanes|=v,v=Zb(v),Wb(v,i,c,d),e_(c,v),!1}c=c.return}while(c!==null);return!1}var E_=Error(s(461)),Rn=!1;function ri(i,o,c,d){o.child=i===null?Qv(o,null,c,d):vl(o,i.child,c,d)}function Fb(i,o,c,d,v){c=c.render;var w=o.ref;if("ref"in d){var M={};for(var H in d)H!=="ref"&&(M[H]=d[H])}else M=d;return ml(o),d=a_(i,o,c,M,w,v),H=l_(),i!==null&&!Rn?(c_(i,o,v),fo(i,o,v)):(de&&H&&Hn(o),o.flags|=1,ri(i,o,d,v),o.child)}function Yb(i,o,c,d,v){if(i===null){var w=c.type;return typeof w=="function"&&!fc(w)&&w.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=w,Xb(i,o,w,d,v)):(i=fl(c.type,null,d,o,o.mode,v),i.ref=o.ref,i.return=o,o.child=i)}if(w=i.child,!I_(i,v)){var M=w.memoizedProps;if(c=c.compare,c=c!==null?c:$o,c(M,d)&&i.ref===o.ref)return fo(i,o,v)}return o.flags|=1,i=As(w,d),i.ref=o.ref,i.return=o,o.child=i}function Xb(i,o,c,d,v){if(i!==null){var w=i.memoizedProps;if($o(w,d)&&i.ref===o.ref)if(Rn=!1,o.pendingProps=d=w,I_(i,v))(i.flags&131072)!==0&&(Rn=!0);else return o.lanes=i.lanes,fo(i,o,v)}return C_(i,o,c,d,v)}function Qb(i,o,c,d){var v=d.children,w=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(w=w!==null?w.baseLanes|c:c,i!==null){for(d=o.child=i.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~w}else d=0,o.child=null;return $b(i,o,w,c,d)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Yf(o,w!==null?w.cachePool:null),w!==null?Jv(o,w):i_(),tb(o);else return d=o.lanes=536870912,$b(i,o,w!==null?w.baseLanes|c:c,c,d)}else w!==null?(Yf(o,w.cachePool),Jv(o,w),aa(),o.memoizedState=null):(i!==null&&Yf(o,null),i_(),aa());return ri(i,o,v,c),o.child}function Ju(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function $b(i,o,c,d,v){var w=$m();return w=w===null?null:{parent:On._currentValue,pool:w},o.memoizedState={baseLanes:c,cachePool:w},i!==null&&Yf(o,null),i_(),tb(o),i!==null&&mc(i,o,d,!0),o.childLanes=v,null}function ud(i,o){return o=fd({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function Kb(i,o,c){return vl(o,i.child,null,c),i=ud(o,o.pendingProps),i.flags|=2,es(o),o.memoizedState=null,i}function yE(i,o,c){var d=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(de){if(d.mode==="hidden")return i=ud(o,d),o.lanes=536870912,Ju(null,i);if(r_(o),(i=De)?(i=u1(i,Di),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:ft!==null?{id:St,overflow:Rt}:null,retryLane:536870912,hydrationErrors:null},c=Uu(i),c.return=o,o.child=c,Oe=o,De=null)):i=null,i===null)throw Er(o);return o.lanes=536870912,null}return ud(o,d)}var w=i.memoizedState;if(w!==null){var M=w.dehydrated;if(r_(o),v)if(o.flags&256)o.flags&=-257,o=Kb(i,o,c);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(Rn||mc(i,o,c,!1),v=(c&i.childLanes)!==0,Rn||v){if(d=Ye,d!==null&&(M=te(d,c),M!==0&&M!==w.retryLane))throw w.retryLane=M,Ts(i,M),zi(d,i,M),E_;wd(),o=Kb(i,o,c)}else i=w.treeContext,De=Cs(M.nextSibling),Oe=o,de=!0,Ar=null,Di=!1,i!==null&&gi(o,i),o=ud(o,d),o.flags|=4096;return o}return i=As(i.child,{mode:d.mode,children:d.children}),i.ref=o.ref,o.child=i,i.return=o,i}function hd(i,o){var c=o.ref;if(c===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(s(284));(i===null||i.ref!==c)&&(o.flags|=4194816)}}function C_(i,o,c,d,v){return ml(o),c=a_(i,o,c,d,void 0,v),d=l_(),i!==null&&!Rn?(c_(i,o,v),fo(i,o,v)):(de&&d&&Hn(o),o.flags|=1,ri(i,o,c,v),o.child)}function Jb(i,o,c,d,v,w){return ml(o),o.updateQueue=null,c=nb(o,d,c,v),eb(i),d=l_(),i!==null&&!Rn?(c_(i,o,w),fo(i,o,w)):(de&&d&&Hn(o),o.flags|=1,ri(i,o,c,w),o.child)}function tw(i,o,c,d,v){if(ml(o),o.stateNode===null){var w=oo,M=c.contextType;typeof M=="object"&&M!==null&&(w=si(M)),w=new c(d,w),o.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=T_,o.stateNode=w,w._reactInternals=o,w=o.stateNode,w.props=d,w.state=o.memoizedState,w.refs={},Jm(o),M=c.contextType,w.context=typeof M=="object"&&M!==null?si(M):oo,w.state=o.memoizedState,M=c.getDerivedStateFromProps,typeof M=="function"&&(S_(o,c,M,d),w.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(M=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),M!==w.state&&T_.enqueueReplaceState(w,w.state,null),Yu(o,d,w,v),Fu(),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(i===null){w=o.stateNode;var H=o.memoizedProps,tt=wl(c,H);w.props=tt;var ht=w.context,yt=c.contextType;M=oo,typeof yt=="object"&&yt!==null&&(M=si(yt));var Tt=c.getDerivedStateFromProps;yt=typeof Tt=="function"||typeof w.getSnapshotBeforeUpdate=="function",H=o.pendingProps!==H,yt||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(H||ht!==M)&&Hb(o,w,d,M),ia=!1;var dt=o.memoizedState;w.state=dt,Yu(o,d,w,v),Fu(),ht=o.memoizedState,H||dt!==ht||ia?(typeof Tt=="function"&&(S_(o,c,Tt,d),ht=o.memoizedState),(tt=ia||Bb(o,c,tt,d,dt,ht,M))?(yt||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=ht),w.props=d,w.state=ht,w.context=M,d=tt):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{w=o.stateNode,t_(i,o),M=o.memoizedProps,yt=wl(c,M),w.props=yt,Tt=o.pendingProps,dt=w.context,ht=c.contextType,tt=oo,typeof ht=="object"&&ht!==null&&(tt=si(ht)),H=c.getDerivedStateFromProps,(ht=typeof H=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(M!==Tt||dt!==tt)&&Hb(o,w,d,tt),ia=!1,dt=o.memoizedState,w.state=dt,Yu(o,d,w,v),Fu();var pt=o.memoizedState;M!==Tt||dt!==pt||ia||i!==null&&i.dependencies!==null&&Wf(i.dependencies)?(typeof H=="function"&&(S_(o,c,H,d),pt=o.memoizedState),(yt=ia||Bb(o,c,yt,d,dt,pt,tt)||i!==null&&i.dependencies!==null&&Wf(i.dependencies))?(ht||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(d,pt,tt),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(d,pt,tt)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||M===i.memoizedProps&&dt===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&dt===i.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=pt),w.props=d,w.state=pt,w.context=tt,d=yt):(typeof w.componentDidUpdate!="function"||M===i.memoizedProps&&dt===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||M===i.memoizedProps&&dt===i.memoizedState||(o.flags|=1024),d=!1)}return w=d,hd(i,o),d=(o.flags&128)!==0,w||d?(w=o.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:w.render(),o.flags|=1,i!==null&&d?(o.child=vl(o,i.child,null,v),o.child=vl(o,null,c,v)):ri(i,o,c,v),o.memoizedState=w.state,i=o.child):i=fo(i,o,v),i}function ew(i,o,c,d){return lo(),o.flags|=256,ri(i,o,c,d),o.child}var L_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function M_(i){return{baseLanes:i,cachePool:Gv()}}function k_(i,o,c){return i=i!==null?i.childLanes&~c:0,o&&(i|=is),i}function nw(i,o,c){var d=o.pendingProps,v=!1,w=(o.flags&128)!==0,M;if((M=w)||(M=i!==null&&i.memoizedState===null?!1:(Sn.current&2)!==0),M&&(v=!0,o.flags&=-129),M=(o.flags&32)!==0,o.flags&=-33,i===null){if(de){if(v?oa(o):aa(),(i=De)?(i=u1(i,Di),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:ft!==null?{id:St,overflow:Rt}:null,retryLane:536870912,hydrationErrors:null},c=Uu(i),c.return=o,o.child=c,Oe=o,De=null)):i=null,i===null)throw Er(o);return fg(i)?o.lanes=32:o.lanes=536870912,null}var H=d.children;return d=d.fallback,v?(aa(),v=o.mode,H=fd({mode:"hidden",children:H},v),d=ao(d,v,c,null),H.return=o,d.return=o,H.sibling=d,o.child=H,d=o.child,d.memoizedState=M_(c),d.childLanes=k_(i,M,c),o.memoizedState=L_,Ju(null,d)):(oa(o),O_(o,H))}var tt=i.memoizedState;if(tt!==null&&(H=tt.dehydrated,H!==null)){if(w)o.flags&256?(oa(o),o.flags&=-257,o=D_(i,o,c)):o.memoizedState!==null?(aa(),o.child=i.child,o.flags|=128,o=null):(aa(),H=d.fallback,v=o.mode,d=fd({mode:"visible",children:d.children},v),H=ao(H,v,c,null),H.flags|=2,d.return=o,H.return=o,d.sibling=H,o.child=d,vl(o,i.child,null,c),d=o.child,d.memoizedState=M_(c),d.childLanes=k_(i,M,c),o.memoizedState=L_,o=Ju(null,d));else if(oa(o),fg(H)){if(M=H.nextSibling&&H.nextSibling.dataset,M)var ht=M.dgst;M=ht,d=Error(s(419)),d.stack="",d.digest=M,dl({value:d,source:null,stack:null}),o=D_(i,o,c)}else if(Rn||mc(i,o,c,!1),M=(c&i.childLanes)!==0,Rn||M){if(M=Ye,M!==null&&(d=te(M,c),d!==0&&d!==tt.retryLane))throw tt.retryLane=d,Ts(i,d),zi(M,i,d),E_;hg(H)||wd(),o=D_(i,o,c)}else hg(H)?(o.flags|=192,o.child=i.child,o=null):(i=tt.treeContext,De=Cs(H.nextSibling),Oe=o,de=!0,Ar=null,Di=!1,i!==null&&gi(o,i),o=O_(o,d.children),o.flags|=4096);return o}return v?(aa(),H=d.fallback,v=o.mode,tt=i.child,ht=tt.sibling,d=As(tt,{mode:"hidden",children:d.children}),d.subtreeFlags=tt.subtreeFlags&65011712,ht!==null?H=As(ht,H):(H=ao(H,v,c,null),H.flags|=2),H.return=o,d.return=o,d.sibling=H,o.child=d,Ju(null,d),d=o.child,H=i.child.memoizedState,H===null?H=M_(c):(v=H.cachePool,v!==null?(tt=On._currentValue,v=v.parent!==tt?{parent:tt,pool:tt}:v):v=Gv(),H={baseLanes:H.baseLanes|c,cachePool:v}),d.memoizedState=H,d.childLanes=k_(i,M,c),o.memoizedState=L_,Ju(i.child,d)):(oa(o),c=i.child,i=c.sibling,c=As(c,{mode:"visible",children:d.children}),c.return=o,c.sibling=null,i!==null&&(M=o.deletions,M===null?(o.deletions=[i],o.flags|=16):M.push(i)),o.child=c,o.memoizedState=null,c)}function O_(i,o){return o=fd({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function fd(i,o){return i=hi(22,i,null,o),i.lanes=0,i}function D_(i,o,c){return vl(o,i.child,null,c),i=O_(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function iw(i,o,c){i.lanes|=o;var d=i.alternate;d!==null&&(d.lanes|=o),Fm(i.return,o,c)}function R_(i,o,c,d,v,w){var M=i.memoizedState;M===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:v,treeForkCount:w}:(M.isBackwards=o,M.rendering=null,M.renderingStartTime=0,M.last=d,M.tail=c,M.tailMode=v,M.treeForkCount=w)}function sw(i,o,c){var d=o.pendingProps,v=d.revealOrder,w=d.tail;d=d.children;var M=Sn.current,H=(M&2)!==0;if(H?(M=M&1|2,o.flags|=128):M&=1,at(Sn,M),ri(i,o,d,c),d=de?B:0,!H&&i!==null&&(i.flags&128)!==0)t:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&iw(i,c,o);else if(i.tag===19)iw(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break t;for(;i.sibling===null;){if(i.return===null||i.return===o)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(c=o.child,v=null;c!==null;)i=c.alternate,i!==null&&td(i)===null&&(v=c),c=c.sibling;c=v,c===null?(v=o.child,o.child=null):(v=c.sibling,c.sibling=null),R_(o,!1,v,c,w,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=o.child,o.child=null;v!==null;){if(i=v.alternate,i!==null&&td(i)===null){o.child=v;break}i=v.sibling,v.sibling=c,c=v,v=i}R_(o,!0,c,null,w,d);break;case"together":R_(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function fo(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),ua|=o.lanes,(c&o.childLanes)===0)if(i!==null){if(mc(i,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,c=As(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=As(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function I_(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&Wf(i)))}function vE(i,o,c){switch(o.tag){case 3:Mt(o,o.stateNode.containerInfo),na(o,On,i.memoizedState.cache),lo();break;case 27:case 5:Me(o);break;case 4:Mt(o,o.stateNode.containerInfo);break;case 10:na(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,r_(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(oa(o),o.flags|=128,null):(c&o.child.childLanes)!==0?nw(i,o,c):(oa(o),i=fo(i,o,c),i!==null?i.sibling:null);oa(o);break;case 19:var v=(i.flags&128)!==0;if(d=(c&o.childLanes)!==0,d||(mc(i,o,c,!1),d=(c&o.childLanes)!==0),v){if(d)return sw(i,o,c);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),at(Sn,Sn.current),d)break;return null;case 22:return o.lanes=0,Qb(i,o,c,o.pendingProps);case 24:na(o,On,i.memoizedState.cache)}return fo(i,o,c)}function rw(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps)Rn=!0;else{if(!I_(i,c)&&(o.flags&128)===0)return Rn=!1,vE(i,o,c);Rn=(i.flags&131072)!==0}else Rn=!1,de&&(o.flags&1048576)!==0&&le(o,B,o.index);switch(o.lanes=0,o.tag){case 16:t:{var d=o.pendingProps;if(i=gl(o.elementType),o.type=i,typeof i=="function")fc(i)?(d=wl(i,d),o.tag=1,o=tw(null,o,i,d,c)):(o.tag=0,o=C_(null,o,i,d,c));else{if(i!=null){var v=i.$$typeof;if(v===Q){o.tag=11,o=Fb(null,o,i,d,c);break t}else if(v===Y){o.tag=14,o=Yb(null,o,i,d,c);break t}}throw o=X(i)||i,Error(s(306,o,""))}}return o;case 0:return C_(i,o,o.type,o.pendingProps,c);case 1:return d=o.type,v=wl(d,o.pendingProps),tw(i,o,d,v,c);case 3:t:{if(Mt(o,o.stateNode.containerInfo),i===null)throw Error(s(387));d=o.pendingProps;var w=o.memoizedState;v=w.element,t_(i,o),Yu(o,d,null,c);var M=o.memoizedState;if(d=M.cache,na(o,On,d),d!==w.cache&&Ym(o,[On],c,!0),Fu(),d=M.element,w.isDehydrated)if(w={element:d,isDehydrated:!1,cache:M.cache},o.updateQueue.baseState=w,o.memoizedState=w,o.flags&256){o=ew(i,o,d,c);break t}else if(d!==v){v=f(Error(s(424)),o),dl(v),o=ew(i,o,d,c);break t}else for(i=o.stateNode.containerInfo,i.nodeType===9?i=i.body:i=i.nodeName==="HTML"?i.ownerDocument.body:i,De=Cs(i.firstChild),Oe=o,de=!0,Ar=null,Di=!0,c=Qv(o,null,d,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(lo(),d===v){o=fo(i,o,c);break t}ri(i,o,d,c)}o=o.child}return o;case 26:return hd(i,o),i===null?(c=_1(o.type,null,o.pendingProps,null))?o.memoizedState=c:de||(c=o.type,i=o.pendingProps,d=Ld(gt.current).createElement(c),d[ze]=o,d[Mn]=i,oi(d,c,i),kn(d),o.stateNode=d):o.memoizedState=_1(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return Me(o),i===null&&de&&(d=o.stateNode=d1(o.type,o.pendingProps,gt.current),Oe=o,Di=!0,v=De,ma(o.type)?(dg=v,De=Cs(d.firstChild)):De=v),ri(i,o,o.pendingProps.children,c),hd(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&de&&((v=d=De)&&(d=XE(d,o.type,o.pendingProps,Di),d!==null?(o.stateNode=d,Oe=o,De=Cs(d.firstChild),Di=!1,v=!0):v=!1),v||Er(o)),Me(o),v=o.type,w=o.pendingProps,M=i!==null?i.memoizedProps:null,d=w.children,lg(v,w)?d=null:M!==null&&lg(v,M)&&(o.flags|=32),o.memoizedState!==null&&(v=a_(i,o,uE,null,null,c),ph._currentValue=v),hd(i,o),ri(i,o,d,c),o.child;case 6:return i===null&&de&&((i=c=De)&&(c=QE(c,o.pendingProps,Di),c!==null?(o.stateNode=c,Oe=o,De=null,i=!0):i=!1),i||Er(o)),null;case 13:return nw(i,o,c);case 4:return Mt(o,o.stateNode.containerInfo),d=o.pendingProps,i===null?o.child=vl(o,null,d,c):ri(i,o,d,c),o.child;case 11:return Fb(i,o,o.type,o.pendingProps,c);case 7:return ri(i,o,o.pendingProps,c),o.child;case 8:return ri(i,o,o.pendingProps.children,c),o.child;case 12:return ri(i,o,o.pendingProps.children,c),o.child;case 10:return d=o.pendingProps,na(o,o.type,d.value),ri(i,o,d.children,c),o.child;case 9:return v=o.type._context,d=o.pendingProps.children,ml(o),v=si(v),d=d(v),o.flags|=1,ri(i,o,d,c),o.child;case 14:return Yb(i,o,o.type,o.pendingProps,c);case 15:return Xb(i,o,o.type,o.pendingProps,c);case 19:return sw(i,o,c);case 31:return yE(i,o,c);case 22:return Qb(i,o,c,o.pendingProps);case 24:return ml(o),d=si(On),i===null?(v=$m(),v===null&&(v=Ye,w=Xm(),v.pooledCache=w,w.refCount++,w!==null&&(v.pooledCacheLanes|=c),v=w),o.memoizedState={parent:d,cache:v},Jm(o),na(o,On,v)):((i.lanes&c)!==0&&(t_(i,o),Yu(o,null,null,c),Fu()),v=i.memoizedState,w=o.memoizedState,v.parent!==d?(v={parent:d,cache:d},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),na(o,On,d)):(d=w.cache,na(o,On,d),d!==v.cache&&Ym(o,[On],c,!0))),ri(i,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function po(i){i.flags|=4}function N_(i,o,c,d,v){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if(Dw())i.flags|=8192;else throw yl=Qf,Km}else i.flags&=-16777217}function ow(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!w1(o))if(Dw())i.flags|=8192;else throw yl=Qf,Km}function dd(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Yt():536870912,i.lanes|=o,Cc|=o)}function th(i,o){if(!de)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:d.sibling=null}}function nn(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,d=0;if(o)for(var v=i.child;v!==null;)c|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)c|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=d,i.childLanes=c,o}function bE(i,o,c){var d=o.pendingProps;switch(mn(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(o),null;case 1:return nn(o),null;case 3:return c=o.stateNode,d=null,i!==null&&(d=i.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),co(On),oe(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&($s(o)?po(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Vu())),nn(o),null;case 26:var v=o.type,w=o.memoizedState;return i===null?(po(o),w!==null?(nn(o),ow(o,w)):(nn(o),N_(o,v,null,d,c))):w?w!==i.memoizedState?(po(o),nn(o),ow(o,w)):(nn(o),o.flags&=-16777217):(i=i.memoizedProps,i!==d&&po(o),nn(o),N_(o,v,i,d,c)),null;case 27:if(Ke(o),c=gt.current,v=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&po(o);else{if(!d){if(o.stateNode===null)throw Error(s(166));return nn(o),null}i=mt.current,$s(o)?Hu(o):(i=d1(v,d,c),o.stateNode=i,po(o))}return nn(o),null;case 5:if(Ke(o),v=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==d&&po(o);else{if(!d){if(o.stateNode===null)throw Error(s(166));return nn(o),null}if(w=mt.current,$s(o))Hu(o);else{var M=Ld(gt.current);switch(w){case 1:w=M.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:w=M.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":w=M.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":w=M.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":w=M.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof d.is=="string"?M.createElement("select",{is:d.is}):M.createElement("select"),d.multiple?w.multiple=!0:d.size&&(w.size=d.size);break;default:w=typeof d.is=="string"?M.createElement(v,{is:d.is}):M.createElement(v)}}w[ze]=o,w[Mn]=d;t:for(M=o.child;M!==null;){if(M.tag===5||M.tag===6)w.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===o)break t;for(;M.sibling===null;){if(M.return===null||M.return===o)break t;M=M.return}M.sibling.return=M.return,M=M.sibling}o.stateNode=w;t:switch(oi(w,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break t;case"img":d=!0;break t;default:d=!1}d&&po(o)}}return nn(o),N_(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,c),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==d&&po(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(s(166));if(i=gt.current,$s(o)){if(i=o.stateNode,c=o.memoizedProps,d=null,v=Oe,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}i[ze]=o,i=!!(i.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||n1(i.nodeValue,c)),i||Er(o,!0)}else i=Ld(i).createTextNode(d),i[ze]=o,o.stateNode=i}return nn(o),null;case 31:if(c=o.memoizedState,i===null||i.memoizedState!==null){if(d=$s(o),c!==null){if(i===null){if(!d)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[ze]=o}else lo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;nn(o),i=!1}else c=Vu(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return o.flags&256?(es(o),o):(es(o),null);if((o.flags&128)!==0)throw Error(s(558))}return nn(o),null;case 13:if(d=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=$s(o),d!==null&&d.dehydrated!==null){if(i===null){if(!v)throw Error(s(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(s(317));v[ze]=o}else lo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;nn(o),v=!1}else v=Vu(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(es(o),o):(es(o),null)}return es(o),(o.flags&128)!==0?(o.lanes=c,o):(c=d!==null,i=i!==null&&i.memoizedState!==null,c&&(d=o.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),w=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(w=d.memoizedState.cachePool.pool),w!==v&&(d.flags|=2048)),c!==i&&c&&(o.child.flags|=8192),dd(o,o.updateQueue),nn(o),null);case 4:return oe(),i===null&&ig(o.stateNode.containerInfo),nn(o),null;case 10:return co(o.type),nn(o),null;case 19:if(q(Sn),d=o.memoizedState,d===null)return nn(o),null;if(v=(o.flags&128)!==0,w=d.rendering,w===null)if(v)th(d,!1);else{if(gn!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(w=td(i),w!==null){for(o.flags|=128,th(d,!1),i=w.updateQueue,o.updateQueue=i,dd(o,i),o.subtreeFlags=0,i=c,c=o.child;c!==null;)zu(c,i),c=c.sibling;return at(Sn,Sn.current&1|2),de&&Ft(o,d.treeForkCount),o.child}i=i.sibling}d.tail!==null&&hn()>yd&&(o.flags|=128,v=!0,th(d,!1),o.lanes=4194304)}else{if(!v)if(i=td(w),i!==null){if(o.flags|=128,v=!0,i=i.updateQueue,o.updateQueue=i,dd(o,i),th(d,!0),d.tail===null&&d.tailMode==="hidden"&&!w.alternate&&!de)return nn(o),null}else 2*hn()-d.renderingStartTime>yd&&c!==536870912&&(o.flags|=128,v=!0,th(d,!1),o.lanes=4194304);d.isBackwards?(w.sibling=o.child,o.child=w):(i=d.last,i!==null?i.sibling=w:o.child=w,d.last=w)}return d.tail!==null?(i=d.tail,d.rendering=i,d.tail=i.sibling,d.renderingStartTime=hn(),i.sibling=null,c=Sn.current,at(Sn,v?c&1|2:c&1),de&&Ft(o,d.treeForkCount),i):(nn(o),null);case 22:case 23:return es(o),s_(),d=o.memoizedState!==null,i!==null?i.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(c&536870912)!==0&&(o.flags&128)===0&&(nn(o),o.subtreeFlags&6&&(o.flags|=8192)):nn(o),c=o.updateQueue,c!==null&&dd(o,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==c&&(o.flags|=2048),i!==null&&q(_l),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),co(On),nn(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function wE(i,o){switch(mn(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return co(On),oe(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return Ke(o),null;case 31:if(o.memoizedState!==null){if(es(o),o.alternate===null)throw Error(s(340));lo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(es(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));lo()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return q(Sn),null;case 4:return oe(),null;case 10:return co(o.type),null;case 22:case 23:return es(o),s_(),i!==null&&q(_l),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return co(On),null;case 25:return null;default:return null}}function aw(i,o){switch(mn(o),o.tag){case 3:co(On),oe();break;case 26:case 27:case 5:Ke(o);break;case 4:oe();break;case 31:o.memoizedState!==null&&es(o);break;case 13:es(o);break;case 19:q(Sn);break;case 10:co(o.type);break;case 22:case 23:es(o),s_(),i!==null&&q(_l);break;case 24:co(On)}}function eh(i,o){try{var c=o.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var v=d.next;c=v;do{if((c.tag&i)===i){d=void 0;var w=c.create,M=c.inst;d=w(),M.destroy=d}c=c.next}while(c!==v)}}catch(H){He(o,o.return,H)}}function la(i,o,c){try{var d=o.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var w=v.next;d=w;do{if((d.tag&i)===i){var M=d.inst,H=M.destroy;if(H!==void 0){M.destroy=void 0,v=o;var tt=c,ht=H;try{ht()}catch(yt){He(v,tt,yt)}}}d=d.next}while(d!==w)}}catch(yt){He(o,o.return,yt)}}function lw(i){var o=i.updateQueue;if(o!==null){var c=i.stateNode;try{Kv(o,c)}catch(d){He(i,i.return,d)}}}function cw(i,o,c){c.props=wl(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(d){He(i,o,d)}}function nh(i,o){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var d=i.stateNode;break;case 30:d=i.stateNode;break;default:d=i.stateNode}typeof c=="function"?i.refCleanup=c(d):c.current=d}}catch(v){He(i,o,v)}}function Lr(i,o){var c=i.ref,d=i.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(v){He(i,o,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){He(i,o,v)}else c.current=null}function uw(i){var o=i.type,c=i.memoizedProps,d=i.stateNode;try{t:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break t;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(v){He(i,i.return,v)}}function P_(i,o,c){try{var d=i.stateNode;qE(d,i.type,c,o),d[Mn]=o}catch(v){He(i,i.return,v)}}function hw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ma(i.type)||i.tag===4}function z_(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||hw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ma(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function U_(i,o,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(i),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Li));else if(d!==4&&(d===27&&ma(i.type)&&(c=i.stateNode,o=null),i=i.child,i!==null))for(U_(i,o,c),i=i.sibling;i!==null;)U_(i,o,c),i=i.sibling}function pd(i,o,c){var d=i.tag;if(d===5||d===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(d!==4&&(d===27&&ma(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(pd(i,o,c),i=i.sibling;i!==null;)pd(i,o,c),i=i.sibling}function fw(i){var o=i.stateNode,c=i.memoizedProps;try{for(var d=i.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);oi(o,d,c),o[ze]=i,o[Mn]=c}catch(w){He(i,i.return,w)}}var mo=!1,In=!1,B_=!1,dw=typeof WeakSet=="function"?WeakSet:Set,Qn=null;function xE(i,o){if(i=i.containerInfo,og=Nd,i=rl(i),br(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else t:{c=(c=i.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var v=d.anchorOffset,w=d.focusNode;d=d.focusOffset;try{c.nodeType,w.nodeType}catch{c=null;break t}var M=0,H=-1,tt=-1,ht=0,yt=0,Tt=i,dt=null;e:for(;;){for(var pt;Tt!==c||v!==0&&Tt.nodeType!==3||(H=M+v),Tt!==w||d!==0&&Tt.nodeType!==3||(tt=M+d),Tt.nodeType===3&&(M+=Tt.nodeValue.length),(pt=Tt.firstChild)!==null;)dt=Tt,Tt=pt;for(;;){if(Tt===i)break e;if(dt===c&&++ht===v&&(H=M),dt===w&&++yt===d&&(tt=M),(pt=Tt.nextSibling)!==null)break;Tt=dt,dt=Tt.parentNode}Tt=pt}c=H===-1||tt===-1?null:{start:H,end:tt}}else c=null}c=c||{start:0,end:0}}else c=null;for(ag={focusedElem:i,selectionRange:c},Nd=!1,Qn=o;Qn!==null;)if(o=Qn,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Qn=i;else for(;Qn!==null;){switch(o=Qn,w=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)v=i[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&w!==null){i=void 0,c=o,v=w.memoizedProps,w=w.memoizedState,d=c.stateNode;try{var Ht=wl(c.type,v);i=d.getSnapshotBeforeUpdate(Ht,w),d.__reactInternalSnapshotBeforeUpdate=i}catch(Kt){He(c,c.return,Kt)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,c=i.nodeType,c===9)ug(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":ug(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,Qn=i;break}Qn=o.return}}function pw(i,o,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:go(i,c),d&4&&eh(5,c);break;case 1:if(go(i,c),d&4)if(i=c.stateNode,o===null)try{i.componentDidMount()}catch(M){He(c,c.return,M)}else{var v=wl(c.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(v,o,i.__reactInternalSnapshotBeforeUpdate)}catch(M){He(c,c.return,M)}}d&64&&lw(c),d&512&&nh(c,c.return);break;case 3:if(go(i,c),d&64&&(i=c.updateQueue,i!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{Kv(i,o)}catch(M){He(c,c.return,M)}}break;case 27:o===null&&d&4&&fw(c);case 26:case 5:go(i,c),o===null&&d&4&&uw(c),d&512&&nh(c,c.return);break;case 12:go(i,c);break;case 31:go(i,c),d&4&&gw(i,c);break;case 13:go(i,c),d&4&&yw(i,c),d&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=OE.bind(null,c),$E(i,c))));break;case 22:if(d=c.memoizedState!==null||mo,!d){o=o!==null&&o.memoizedState!==null||In,v=mo;var w=In;mo=d,(In=o)&&!w?yo(i,c,(c.subtreeFlags&8772)!==0):go(i,c),mo=v,In=w}break;case 30:break;default:go(i,c)}}function mw(i){var o=i.alternate;o!==null&&(i.alternate=null,mw(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&vu(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ln=null,Ri=!1;function _o(i,o,c){for(c=c.child;c!==null;)_w(i,o,c),c=c.sibling}function _w(i,o,c){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(dr,c)}catch{}switch(c.tag){case 26:In||Lr(c,o),_o(i,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:In||Lr(c,o);var d=ln,v=Ri;ma(c.type)&&(ln=c.stateNode,Ri=!1),_o(i,o,c),hh(c.stateNode),ln=d,Ri=v;break;case 5:In||Lr(c,o);case 6:if(d=ln,v=Ri,ln=null,_o(i,o,c),ln=d,Ri=v,ln!==null)if(Ri)try{(ln.nodeType===9?ln.body:ln.nodeName==="HTML"?ln.ownerDocument.body:ln).removeChild(c.stateNode)}catch(w){He(c,o,w)}else try{ln.removeChild(c.stateNode)}catch(w){He(c,o,w)}break;case 18:ln!==null&&(Ri?(i=ln,l1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),Nc(i)):l1(ln,c.stateNode));break;case 4:d=ln,v=Ri,ln=c.stateNode.containerInfo,Ri=!0,_o(i,o,c),ln=d,Ri=v;break;case 0:case 11:case 14:case 15:la(2,c,o),In||la(4,c,o),_o(i,o,c);break;case 1:In||(Lr(c,o),d=c.stateNode,typeof d.componentWillUnmount=="function"&&cw(c,o,d)),_o(i,o,c);break;case 21:_o(i,o,c);break;case 22:In=(d=In)||c.memoizedState!==null,_o(i,o,c),In=d;break;default:_o(i,o,c)}}function gw(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Nc(i)}catch(c){He(o,o.return,c)}}}function yw(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Nc(i)}catch(c){He(o,o.return,c)}}function SE(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new dw),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new dw),o;default:throw Error(s(435,i.tag))}}function md(i,o){var c=SE(i);o.forEach(function(d){if(!c.has(d)){c.add(d);var v=DE.bind(null,i,d);d.then(v,v)}})}function Ii(i,o){var c=o.deletions;if(c!==null)for(var d=0;d<c.length;d++){var v=c[d],w=i,M=o,H=M;t:for(;H!==null;){switch(H.tag){case 27:if(ma(H.type)){ln=H.stateNode,Ri=!1;break t}break;case 5:ln=H.stateNode,Ri=!1;break t;case 3:case 4:ln=H.stateNode.containerInfo,Ri=!0;break t}H=H.return}if(ln===null)throw Error(s(160));_w(w,M,v),ln=null,Ri=!1,w=v.alternate,w!==null&&(w.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)vw(o,i),o=o.sibling}var Js=null;function vw(i,o){var c=i.alternate,d=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Ii(o,i),Ni(i),d&4&&(la(3,i,i.return),eh(3,i),la(5,i,i.return));break;case 1:Ii(o,i),Ni(i),d&512&&(In||c===null||Lr(c,c.return)),d&64&&mo&&(i=i.updateQueue,i!==null&&(d=i.callbacks,d!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var v=Js;if(Ii(o,i),Ni(i),d&512&&(In||c===null||Lr(c,c.return)),d&4){var w=c!==null?c.memoizedState:null;if(d=i.memoizedState,c===null)if(d===null)if(i.stateNode===null){t:{d=i.type,c=i.memoizedProps,v=v.ownerDocument||v;e:switch(d){case"title":w=v.getElementsByTagName("title")[0],(!w||w[qa]||w[ze]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=v.createElement(d),v.head.insertBefore(w,v.querySelector("head > title"))),oi(w,d,c),w[ze]=i,kn(w),d=w;break t;case"link":var M=v1("link","href",v).get(d+(c.href||""));if(M){for(var H=0;H<M.length;H++)if(w=M[H],w.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&w.getAttribute("rel")===(c.rel==null?null:c.rel)&&w.getAttribute("title")===(c.title==null?null:c.title)&&w.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){M.splice(H,1);break e}}w=v.createElement(d),oi(w,d,c),v.head.appendChild(w);break;case"meta":if(M=v1("meta","content",v).get(d+(c.content||""))){for(H=0;H<M.length;H++)if(w=M[H],w.getAttribute("content")===(c.content==null?null:""+c.content)&&w.getAttribute("name")===(c.name==null?null:c.name)&&w.getAttribute("property")===(c.property==null?null:c.property)&&w.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&w.getAttribute("charset")===(c.charSet==null?null:c.charSet)){M.splice(H,1);break e}}w=v.createElement(d),oi(w,d,c),v.head.appendChild(w);break;default:throw Error(s(468,d))}w[ze]=i,kn(w),d=w}i.stateNode=d}else b1(v,i.type,i.stateNode);else i.stateNode=y1(v,d,i.memoizedProps);else w!==d?(w===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):w.count--,d===null?b1(v,i.type,i.stateNode):y1(v,d,i.memoizedProps)):d===null&&i.stateNode!==null&&P_(i,i.memoizedProps,c.memoizedProps)}break;case 27:Ii(o,i),Ni(i),d&512&&(In||c===null||Lr(c,c.return)),c!==null&&d&4&&P_(i,i.memoizedProps,c.memoizedProps);break;case 5:if(Ii(o,i),Ni(i),d&512&&(In||c===null||Lr(c,c.return)),i.flags&32){v=i.stateNode;try{ys(v,"")}catch(Ht){He(i,i.return,Ht)}}d&4&&i.stateNode!=null&&(v=i.memoizedProps,P_(i,v,c!==null?c.memoizedProps:v)),d&1024&&(B_=!0);break;case 6:if(Ii(o,i),Ni(i),d&4){if(i.stateNode===null)throw Error(s(162));d=i.memoizedProps,c=i.stateNode;try{c.nodeValue=d}catch(Ht){He(i,i.return,Ht)}}break;case 3:if(Od=null,v=Js,Js=Md(o.containerInfo),Ii(o,i),Js=v,Ni(i),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Nc(o.containerInfo)}catch(Ht){He(i,i.return,Ht)}B_&&(B_=!1,bw(i));break;case 4:d=Js,Js=Md(i.stateNode.containerInfo),Ii(o,i),Ni(i),Js=d;break;case 12:Ii(o,i),Ni(i);break;case 31:Ii(o,i),Ni(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,md(i,d)));break;case 13:Ii(o,i),Ni(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(gd=hn()),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,md(i,d)));break;case 22:v=i.memoizedState!==null;var tt=c!==null&&c.memoizedState!==null,ht=mo,yt=In;if(mo=ht||v,In=yt||tt,Ii(o,i),In=yt,mo=ht,Ni(i),d&8192)t:for(o=i.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(c===null||tt||mo||In||xl(i)),c=null,o=i;;){if(o.tag===5||o.tag===26){if(c===null){tt=c=o;try{if(w=tt.stateNode,v)M=w.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{H=tt.stateNode;var Tt=tt.memoizedProps.style,dt=Tt!=null&&Tt.hasOwnProperty("display")?Tt.display:null;H.style.display=dt==null||typeof dt=="boolean"?"":(""+dt).trim()}}catch(Ht){He(tt,tt.return,Ht)}}}else if(o.tag===6){if(c===null){tt=o;try{tt.stateNode.nodeValue=v?"":tt.memoizedProps}catch(Ht){He(tt,tt.return,Ht)}}}else if(o.tag===18){if(c===null){tt=o;try{var pt=tt.stateNode;v?c1(pt,!0):c1(tt.stateNode,!1)}catch(Ht){He(tt,tt.return,Ht)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break t;for(;o.sibling===null;){if(o.return===null||o.return===i)break t;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=i.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,md(i,c))));break;case 19:Ii(o,i),Ni(i),d&4&&(d=i.updateQueue,d!==null&&(i.updateQueue=null,md(i,d)));break;case 30:break;case 21:break;default:Ii(o,i),Ni(i)}}function Ni(i){var o=i.flags;if(o&2){try{for(var c,d=i.return;d!==null;){if(hw(d)){c=d;break}d=d.return}if(c==null)throw Error(s(160));switch(c.tag){case 27:var v=c.stateNode,w=z_(i);pd(i,w,v);break;case 5:var M=c.stateNode;c.flags&32&&(ys(M,""),c.flags&=-33);var H=z_(i);pd(i,H,M);break;case 3:case 4:var tt=c.stateNode.containerInfo,ht=z_(i);U_(i,ht,tt);break;default:throw Error(s(161))}}catch(yt){He(i,i.return,yt)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function bw(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;bw(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function go(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)pw(i,o.alternate,o),o=o.sibling}function xl(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:la(4,o,o.return),xl(o);break;case 1:Lr(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&cw(o,o.return,c),xl(o);break;case 27:hh(o.stateNode);case 26:case 5:Lr(o,o.return),xl(o);break;case 22:o.memoizedState===null&&xl(o);break;case 30:xl(o);break;default:xl(o)}i=i.sibling}}function yo(i,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,v=i,w=o,M=w.flags;switch(w.tag){case 0:case 11:case 15:yo(v,w,c),eh(4,w);break;case 1:if(yo(v,w,c),d=w,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(ht){He(d,d.return,ht)}if(d=w,v=d.updateQueue,v!==null){var H=d.stateNode;try{var tt=v.shared.hiddenCallbacks;if(tt!==null)for(v.shared.hiddenCallbacks=null,v=0;v<tt.length;v++)$v(tt[v],H)}catch(ht){He(d,d.return,ht)}}c&&M&64&&lw(w),nh(w,w.return);break;case 27:fw(w);case 26:case 5:yo(v,w,c),c&&d===null&&M&4&&uw(w),nh(w,w.return);break;case 12:yo(v,w,c);break;case 31:yo(v,w,c),c&&M&4&&gw(v,w);break;case 13:yo(v,w,c),c&&M&4&&yw(v,w);break;case 22:w.memoizedState===null&&yo(v,w,c),nh(w,w.return);break;case 30:break;default:yo(v,w,c)}o=o.sibling}}function H_(i,o){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&ju(c))}function V_(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&ju(i))}function tr(i,o,c,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ww(i,o,c,d),o=o.sibling}function ww(i,o,c,d){var v=o.flags;switch(o.tag){case 0:case 11:case 15:tr(i,o,c,d),v&2048&&eh(9,o);break;case 1:tr(i,o,c,d);break;case 3:tr(i,o,c,d),v&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&ju(i)));break;case 12:if(v&2048){tr(i,o,c,d),i=o.stateNode;try{var w=o.memoizedProps,M=w.id,H=w.onPostCommit;typeof H=="function"&&H(M,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(tt){He(o,o.return,tt)}}else tr(i,o,c,d);break;case 31:tr(i,o,c,d);break;case 13:tr(i,o,c,d);break;case 23:break;case 22:w=o.stateNode,M=o.alternate,o.memoizedState!==null?w._visibility&2?tr(i,o,c,d):ih(i,o):w._visibility&2?tr(i,o,c,d):(w._visibility|=2,Tc(i,o,c,d,(o.subtreeFlags&10256)!==0||!1)),v&2048&&H_(M,o);break;case 24:tr(i,o,c,d),v&2048&&V_(o.alternate,o);break;default:tr(i,o,c,d)}}function Tc(i,o,c,d,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var w=i,M=o,H=c,tt=d,ht=M.flags;switch(M.tag){case 0:case 11:case 15:Tc(w,M,H,tt,v),eh(8,M);break;case 23:break;case 22:var yt=M.stateNode;M.memoizedState!==null?yt._visibility&2?Tc(w,M,H,tt,v):ih(w,M):(yt._visibility|=2,Tc(w,M,H,tt,v)),v&&ht&2048&&H_(M.alternate,M);break;case 24:Tc(w,M,H,tt,v),v&&ht&2048&&V_(M.alternate,M);break;default:Tc(w,M,H,tt,v)}o=o.sibling}}function ih(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=i,d=o,v=d.flags;switch(d.tag){case 22:ih(c,d),v&2048&&H_(d.alternate,d);break;case 24:ih(c,d),v&2048&&V_(d.alternate,d);break;default:ih(c,d)}o=o.sibling}}var sh=8192;function Ac(i,o,c){if(i.subtreeFlags&sh)for(i=i.child;i!==null;)xw(i,o,c),i=i.sibling}function xw(i,o,c){switch(i.tag){case 26:Ac(i,o,c),i.flags&sh&&i.memoizedState!==null&&cC(c,Js,i.memoizedState,i.memoizedProps);break;case 5:Ac(i,o,c);break;case 3:case 4:var d=Js;Js=Md(i.stateNode.containerInfo),Ac(i,o,c),Js=d;break;case 22:i.memoizedState===null&&(d=i.alternate,d!==null&&d.memoizedState!==null?(d=sh,sh=16777216,Ac(i,o,c),sh=d):Ac(i,o,c));break;default:Ac(i,o,c)}}function Sw(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function rh(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Qn=d,Aw(d,i)}Sw(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Tw(i),i=i.sibling}function Tw(i){switch(i.tag){case 0:case 11:case 15:rh(i),i.flags&2048&&la(9,i,i.return);break;case 3:rh(i);break;case 12:rh(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,_d(i)):rh(i);break;default:rh(i)}}function _d(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var d=o[c];Qn=d,Aw(d,i)}Sw(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:la(8,o,o.return),_d(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,_d(o));break;default:_d(o)}i=i.sibling}}function Aw(i,o){for(;Qn!==null;){var c=Qn;switch(c.tag){case 0:case 11:case 15:la(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:ju(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,Qn=d;else t:for(c=i;Qn!==null;){d=Qn;var v=d.sibling,w=d.return;if(mw(d),d===c){Qn=null;break t}if(v!==null){v.return=w,Qn=v;break t}Qn=w}}}var TE={getCacheForType:function(i){var o=si(On),c=o.data.get(i);return c===void 0&&(c=i(),o.data.set(i,c)),c},cacheSignal:function(){return si(On).controller.signal}},AE=typeof WeakMap=="function"?WeakMap:Map,Pe=0,Ye=null,pe=null,ge=0,Be=0,ns=null,ca=!1,Ec=!1,j_=!1,vo=0,gn=0,ua=0,Sl=0,q_=0,is=0,Cc=0,oh=null,Pi=null,G_=!1,gd=0,Ew=0,yd=1/0,vd=null,ha=null,Vn=0,fa=null,Lc=null,bo=0,Z_=0,W_=null,Cw=null,ah=0,F_=null;function ss(){return(Pe&2)!==0&&ge!==0?ge&-ge:P.T!==null?J_():Ei()}function Lw(){if(is===0)if((ge&536870912)===0||de){var i=$r;$r<<=1,($r&3932160)===0&&($r=262144),is=i}else is=536870912;return i=ts.current,i!==null&&(i.flags|=32),is}function zi(i,o,c){(i===Ye&&(Be===2||Be===9)||i.cancelPendingCommit!==null)&&(Mc(i,0),da(i,ge,is,!1)),Pt(i,c),((Pe&2)===0||i!==Ye)&&(i===Ye&&((Pe&2)===0&&(Sl|=c),gn===4&&da(i,ge,is,!1)),Mr(i))}function Mw(i,o,c){if((Pe&6)!==0)throw Error(s(327));var d=!c&&(o&127)===0&&(o&i.expiredLanes)===0||Et(i,o),v=d?LE(i,o):X_(i,o,!0),w=d;do{if(v===0){Ec&&!d&&da(i,o,0,!1);break}else{if(c=i.current.alternate,w&&!EE(c)){v=X_(i,o,!1),w=!1;continue}if(v===2){if(w=o,i.errorRecoveryDisabledLanes&w)var M=0;else M=i.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){o=M;t:{var H=i;v=oh;var tt=H.current.memoizedState.isDehydrated;if(tt&&(Mc(H,M).flags|=256),M=X_(H,M,!1),M!==2){if(j_&&!tt){H.errorRecoveryDisabledLanes|=w,Sl|=w,v=4;break t}w=Pi,Pi=v,w!==null&&(Pi===null?Pi=w:Pi.push.apply(Pi,w))}v=M}if(w=!1,v!==2)continue}}if(v===1){Mc(i,0),da(i,o,0,!0);break}t:{switch(d=i,w=v,w){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:da(d,o,is,!ca);break t;case 2:Pi=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(v=gd+300-hn(),10<v)){if(da(d,o,is,!ca),zo(d,0,!0)!==0)break t;bo=o,d.timeoutHandle=o1(kw.bind(null,d,c,Pi,vd,G_,o,is,Sl,Cc,ca,w,"Throttled",-0,0),v);break t}kw(d,c,Pi,vd,G_,o,is,Sl,Cc,ca,w,null,-0,0)}}break}while(!0);Mr(i)}function kw(i,o,c,d,v,w,M,H,tt,ht,yt,Tt,dt,pt){if(i.timeoutHandle=-1,Tt=o.subtreeFlags,Tt&8192||(Tt&16785408)===16785408){Tt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Li},xw(o,w,Tt);var Ht=(w&62914560)===w?gd-hn():(w&4194048)===w?Ew-hn():0;if(Ht=uC(Tt,Ht),Ht!==null){bo=w,i.cancelPendingCommit=Ht(Uw.bind(null,i,o,w,c,d,v,M,H,tt,yt,Tt,null,dt,pt)),da(i,w,M,!ht);return}}Uw(i,o,w,c,d,v,M,H,tt)}function EE(i){for(var o=i;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var v=c[d],w=v.getSnapshot;v=v.value;try{if(!Yn(w(),v))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function da(i,o,c,d){o&=~q_,o&=~Sl,i.suspendedLanes|=o,i.pingedLanes&=~o,d&&(i.warmLanes|=o),d=i.expirationTimes;for(var v=o;0<v;){var w=31-ni(v),M=1<<w;d[w]=-1,v&=~M}c!==0&&Wt(i,c,o)}function bd(){return(Pe&6)===0?(lh(0),!1):!0}function Y_(){if(pe!==null){if(Be===0)var i=pe.return;else i=pe,Ks=Cr=null,u_(i),vc=null,Gu=0,i=pe;for(;i!==null;)aw(i.alternate,i),i=i.return;pe=null}}function Mc(i,o){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,WE(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),bo=0,Y_(),Ye=i,pe=c=As(i.current,null),ge=o,Be=0,ns=null,ca=!1,Ec=Et(i,o),j_=!1,Cc=is=q_=Sl=ua=gn=0,Pi=oh=null,G_=!1,(o&8)!==0&&(o|=o&32);var d=i.entangledLanes;if(d!==0)for(i=i.entanglements,d&=o;0<d;){var v=31-ni(d),w=1<<v;o|=i[v],d&=~w}return vo=o,ul(),c}function Ow(i,o){ae=null,P.H=Ku,o===yc||o===Xf?(o=Fv(),Be=3):o===Km?(o=Fv(),Be=4):Be=o===E_?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ns=o,pe===null&&(gn=1,cd(i,f(o,i.current)))}function Dw(){var i=ts.current;return i===null?!0:(ge&4194048)===ge?Es===null:(ge&62914560)===ge||(ge&536870912)!==0?i===Es:!1}function Rw(){var i=P.H;return P.H=Ku,i===null?Ku:i}function Iw(){var i=P.A;return P.A=TE,i}function wd(){gn=4,ca||(ge&4194048)!==ge&&ts.current!==null||(Ec=!0),(ua&134217727)===0&&(Sl&134217727)===0||Ye===null||da(Ye,ge,is,!1)}function X_(i,o,c){var d=Pe;Pe|=2;var v=Rw(),w=Iw();(Ye!==i||ge!==o)&&(vd=null,Mc(i,o)),o=!1;var M=gn;t:do try{if(Be!==0&&pe!==null){var H=pe,tt=ns;switch(Be){case 8:Y_(),M=6;break t;case 3:case 2:case 9:case 6:ts.current===null&&(o=!0);var ht=Be;if(Be=0,ns=null,kc(i,H,tt,ht),c&&Ec){M=0;break t}break;default:ht=Be,Be=0,ns=null,kc(i,H,tt,ht)}}CE(),M=gn;break}catch(yt){Ow(i,yt)}while(!0);return o&&i.shellSuspendCounter++,Ks=Cr=null,Pe=d,P.H=v,P.A=w,pe===null&&(Ye=null,ge=0,ul()),M}function CE(){for(;pe!==null;)Nw(pe)}function LE(i,o){var c=Pe;Pe|=2;var d=Rw(),v=Iw();Ye!==i||ge!==o?(vd=null,yd=hn()+500,Mc(i,o)):Ec=Et(i,o);t:do try{if(Be!==0&&pe!==null){o=pe;var w=ns;e:switch(Be){case 1:Be=0,ns=null,kc(i,o,w,1);break;case 2:case 9:if(Zv(w)){Be=0,ns=null,Pw(o);break}o=function(){Be!==2&&Be!==9||Ye!==i||(Be=7),Mr(i)},w.then(o,o);break t;case 3:Be=7;break t;case 4:Be=5;break t;case 7:Zv(w)?(Be=0,ns=null,Pw(o)):(Be=0,ns=null,kc(i,o,w,7));break;case 5:var M=null;switch(pe.tag){case 26:M=pe.memoizedState;case 5:case 27:var H=pe;if(M?w1(M):H.stateNode.complete){Be=0,ns=null;var tt=H.sibling;if(tt!==null)pe=tt;else{var ht=H.return;ht!==null?(pe=ht,xd(ht)):pe=null}break e}}Be=0,ns=null,kc(i,o,w,5);break;case 6:Be=0,ns=null,kc(i,o,w,6);break;case 8:Y_(),gn=6;break t;default:throw Error(s(462))}}ME();break}catch(yt){Ow(i,yt)}while(!0);return Ks=Cr=null,P.H=d,P.A=v,Pe=c,pe!==null?0:(Ye=null,ge=0,ul(),gn)}function ME(){for(;pe!==null&&!ci();)Nw(pe)}function Nw(i){var o=rw(i.alternate,i,vo);i.memoizedProps=i.pendingProps,o===null?xd(i):pe=o}function Pw(i){var o=i,c=o.alternate;switch(o.tag){case 15:case 0:o=Jb(c,o,o.pendingProps,o.type,void 0,ge);break;case 11:o=Jb(c,o,o.pendingProps,o.type.render,o.ref,ge);break;case 5:u_(o);default:aw(c,o),o=pe=zu(o,vo),o=rw(c,o,vo)}i.memoizedProps=i.pendingProps,o===null?xd(i):pe=o}function kc(i,o,c,d){Ks=Cr=null,u_(o),vc=null,Gu=0;var v=o.return;try{if(gE(i,v,o,c,ge)){gn=1,cd(i,f(c,i.current)),pe=null;return}}catch(w){if(v!==null)throw pe=v,w;gn=1,cd(i,f(c,i.current)),pe=null;return}o.flags&32768?(de||d===1?i=!0:Ec||(ge&536870912)!==0?i=!1:(ca=i=!0,(d===2||d===9||d===3||d===6)&&(d=ts.current,d!==null&&d.tag===13&&(d.flags|=16384))),zw(o,i)):xd(o)}function xd(i){var o=i;do{if((o.flags&32768)!==0){zw(o,ca);return}i=o.return;var c=bE(o.alternate,o,vo);if(c!==null){pe=c;return}if(o=o.sibling,o!==null){pe=o;return}pe=o=i}while(o!==null);gn===0&&(gn=5)}function zw(i,o){do{var c=wE(i.alternate,i);if(c!==null){c.flags&=32767,pe=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(i=i.sibling,i!==null)){pe=i;return}pe=i=c}while(i!==null);gn=6,pe=null}function Uw(i,o,c,d,v,w,M,H,tt){i.cancelPendingCommit=null;do Sd();while(Vn!==0);if((Pe&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(w=o.lanes|o.childLanes,w|=hc,Ut(i,c,w,M,H,tt),i===Ye&&(pe=Ye=null,ge=0),Lc=o,fa=i,bo=c,Z_=w,W_=v,Cw=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,RE(Yr,function(){return qw(),null})):(i.callbackNode=null,i.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=P.T,P.T=null,v=U.p,U.p=2,M=Pe,Pe|=4;try{xE(i,o,c)}finally{Pe=M,U.p=v,P.T=d}}Vn=1,Bw(),Hw(),Vw()}}function Bw(){if(Vn===1){Vn=0;var i=fa,o=Lc,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=P.T,P.T=null;var d=U.p;U.p=2;var v=Pe;Pe|=4;try{vw(o,i);var w=ag,M=rl(i.containerInfo),H=w.focusedElem,tt=w.selectionRange;if(M!==H&&H&&H.ownerDocument&&ac(H.ownerDocument.documentElement,H)){if(tt!==null&&br(H)){var ht=tt.start,yt=tt.end;if(yt===void 0&&(yt=ht),"selectionStart"in H)H.selectionStart=ht,H.selectionEnd=Math.min(yt,H.value.length);else{var Tt=H.ownerDocument||document,dt=Tt&&Tt.defaultView||window;if(dt.getSelection){var pt=dt.getSelection(),Ht=H.textContent.length,Kt=Math.min(tt.start,Ht),Ze=tt.end===void 0?Kt:Math.min(tt.end,Ht);!pt.extend&&Kt>Ze&&(M=Ze,Ze=Kt,Kt=M);var rt=sl(H,Kt),st=sl(H,Ze);if(rt&&st&&(pt.rangeCount!==1||pt.anchorNode!==rt.node||pt.anchorOffset!==rt.offset||pt.focusNode!==st.node||pt.focusOffset!==st.offset)){var lt=Tt.createRange();lt.setStart(rt.node,rt.offset),pt.removeAllRanges(),Kt>Ze?(pt.addRange(lt),pt.extend(st.node,st.offset)):(lt.setEnd(st.node,st.offset),pt.addRange(lt))}}}}for(Tt=[],pt=H;pt=pt.parentNode;)pt.nodeType===1&&Tt.push({element:pt,left:pt.scrollLeft,top:pt.scrollTop});for(typeof H.focus=="function"&&H.focus(),H=0;H<Tt.length;H++){var xt=Tt[H];xt.element.scrollLeft=xt.left,xt.element.scrollTop=xt.top}}Nd=!!og,ag=og=null}finally{Pe=v,U.p=d,P.T=c}}i.current=o,Vn=2}}function Hw(){if(Vn===2){Vn=0;var i=fa,o=Lc,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=P.T,P.T=null;var d=U.p;U.p=2;var v=Pe;Pe|=4;try{pw(i,o.alternate,o)}finally{Pe=v,U.p=d,P.T=c}}Vn=3}}function Vw(){if(Vn===4||Vn===3){Vn=0,ms();var i=fa,o=Lc,c=bo,d=Cw;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Vn=5:(Vn=0,Lc=fa=null,jw(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(ha=null),It(c),o=o.stateNode,Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(dr,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=P.T,v=U.p,U.p=2,P.T=null;try{for(var w=i.onRecoverableError,M=0;M<d.length;M++){var H=d[M];w(H.value,{componentStack:H.stack})}}finally{P.T=o,U.p=v}}(bo&3)!==0&&Sd(),Mr(i),v=i.pendingLanes,(c&261930)!==0&&(v&42)!==0?i===F_?ah++:(ah=0,F_=i):ah=0,lh(0)}}function jw(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,ju(o)))}function Sd(){return Bw(),Hw(),Vw(),qw()}function qw(){if(Vn!==5)return!1;var i=fa,o=Z_;Z_=0;var c=It(bo),d=P.T,v=U.p;try{U.p=32>c?32:c,P.T=null,c=W_,W_=null;var w=fa,M=bo;if(Vn=0,Lc=fa=null,bo=0,(Pe&6)!==0)throw Error(s(331));var H=Pe;if(Pe|=4,Tw(w.current),ww(w,w.current,M,c),Pe=H,lh(0,!1),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(dr,w)}catch{}return!0}finally{U.p=v,P.T=d,jw(i,o)}}function Gw(i,o,c){o=f(c,o),o=A_(i.stateNode,o,2),i=ra(i,o,2),i!==null&&(Pt(i,2),Mr(i))}function He(i,o,c){if(i.tag===3)Gw(i,i,c);else for(;o!==null;){if(o.tag===3){Gw(o,i,c);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ha===null||!ha.has(d))){i=f(c,i),c=Zb(2),d=ra(o,c,2),d!==null&&(Wb(c,d,o,i),Pt(d,2),Mr(d));break}}o=o.return}}function Q_(i,o,c){var d=i.pingCache;if(d===null){d=i.pingCache=new AE;var v=new Set;d.set(o,v)}else v=d.get(o),v===void 0&&(v=new Set,d.set(o,v));v.has(c)||(j_=!0,v.add(c),i=kE.bind(null,i,o,c),o.then(i,i))}function kE(i,o,c){var d=i.pingCache;d!==null&&d.delete(o),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,Ye===i&&(ge&c)===c&&(gn===4||gn===3&&(ge&62914560)===ge&&300>hn()-gd?(Pe&2)===0&&Mc(i,0):q_|=c,Cc===ge&&(Cc=0)),Mr(i)}function Zw(i,o){o===0&&(o=Yt()),i=Ts(i,o),i!==null&&(Pt(i,o),Mr(i))}function OE(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),Zw(i,c)}function DE(i,o){var c=0;switch(i.tag){case 31:case 13:var d=i.stateNode,v=i.memoizedState;v!==null&&(c=v.retryLane);break;case 19:d=i.stateNode;break;case 22:d=i.stateNode._retryCache;break;default:throw Error(s(314))}d!==null&&d.delete(o),Zw(i,c)}function RE(i,o){return ke(i,o)}var Td=null,Oc=null,$_=!1,Ad=!1,K_=!1,pa=0;function Mr(i){i!==Oc&&i.next===null&&(Oc===null?Td=Oc=i:Oc=Oc.next=i),Ad=!0,$_||($_=!0,NE())}function lh(i,o){if(!K_&&Ad){K_=!0;do for(var c=!1,d=Td;d!==null;){if(i!==0){var v=d.pendingLanes;if(v===0)var w=0;else{var M=d.suspendedLanes,H=d.pingedLanes;w=(1<<31-ni(42|i)+1)-1,w&=v&~(M&~H),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(c=!0,Xw(d,w))}else w=ge,w=zo(d,d===Ye?w:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(w&3)===0||Et(d,w)||(c=!0,Xw(d,w));d=d.next}while(c);K_=!1}}function IE(){Ww()}function Ww(){Ad=$_=!1;var i=0;pa!==0&&ZE()&&(i=pa);for(var o=hn(),c=null,d=Td;d!==null;){var v=d.next,w=Fw(d,o);w===0?(d.next=null,c===null?Td=v:c.next=v,v===null&&(Oc=c)):(c=d,(i!==0||(w&3)!==0)&&(Ad=!0)),d=v}Vn!==0&&Vn!==5||lh(i),pa!==0&&(pa=0)}function Fw(i,o){for(var c=i.suspendedLanes,d=i.pingedLanes,v=i.expirationTimes,w=i.pendingLanes&-62914561;0<w;){var M=31-ni(w),H=1<<M,tt=v[M];tt===-1?((H&c)===0||(H&d)!==0)&&(v[M]=kt(H,o)):tt<=o&&(i.expiredLanes|=H),w&=~H}if(o=Ye,c=ge,c=zo(i,i===o?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d=i.callbackNode,c===0||i===o&&(Be===2||Be===9)||i.cancelPendingCommit!==null)return d!==null&&d!==null&&un(d),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Et(i,c)){if(o=c&-c,o===i.callbackPriority)return o;switch(d!==null&&un(d),It(c)){case 2:case 8:c=_s;break;case 32:c=Yr;break;case 268435456:c=ja;break;default:c=Yr}return d=Yw.bind(null,i),c=ke(c,d),i.callbackPriority=o,i.callbackNode=c,o}return d!==null&&d!==null&&un(d),i.callbackPriority=2,i.callbackNode=null,2}function Yw(i,o){if(Vn!==0&&Vn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(Sd()&&i.callbackNode!==c)return null;var d=ge;return d=zo(i,i===Ye?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),d===0?null:(Mw(i,d,o),Fw(i,hn()),i.callbackNode!=null&&i.callbackNode===c?Yw.bind(null,i):null)}function Xw(i,o){if(Sd())return null;Mw(i,o,!0)}function NE(){FE(function(){(Pe&6)!==0?ke(Gs,IE):Ww()})}function J_(){if(pa===0){var i=_c;i===0&&(i=Qr,Qr<<=1,(Qr&261888)===0&&(Qr=256)),pa=i}return pa}function Qw(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:qo(""+i)}function $w(i,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,i.id&&c.setAttribute("form",i.id),o.parentNode.insertBefore(c,o),i=new FormData(i),c.parentNode.removeChild(c),i}function PE(i,o,c,d,v){if(o==="submit"&&c&&c.stateNode===v){var w=Qw((v[Mn]||null).action),M=d.submitter;M&&(o=(o=M[Mn]||null)?Qw(o.formAction):M.getAttribute("formAction"),o!==null&&(w=o,M=null));var H=new tc("action","action",null,d,v);i.push({event:H,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(pa!==0){var tt=M?$w(v,M):new FormData(v);v_(c,{pending:!0,data:tt,method:v.method,action:w},null,tt)}}else typeof w=="function"&&(H.preventDefault(),tt=M?$w(v,M):new FormData(v),v_(c,{pending:!0,data:tt,method:v.method,action:w},w,tt))},currentTarget:v}]})}}for(var tg=0;tg<Sr.length;tg++){var eg=Sr[tg],zE=eg.toLowerCase(),UE=eg[0].toUpperCase()+eg.slice(1);ki(zE,"on"+UE)}ki(al,"onAnimationEnd"),ki(qf,"onAnimationIteration"),ki(ll,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(Gm,"onTransitionRun"),ki(Gf,"onTransitionStart"),ki(Zm,"onTransitionCancel"),ki(ta,"onTransitionEnd"),_r("onMouseEnter",["mouseout","mouseover"]),_r("onMouseLeave",["mouseout","mouseover"]),_r("onPointerEnter",["pointerout","pointerover"]),_r("onPointerLeave",["pointerout","pointerover"]),eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),eo("onBeforeInput",["compositionend","keypress","textInput","paste"]),eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ch="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),BE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ch));function Kw(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var d=i[c],v=d.event;d=d.listeners;t:{var w=void 0;if(o)for(var M=d.length-1;0<=M;M--){var H=d[M],tt=H.instance,ht=H.currentTarget;if(H=H.listener,tt!==w&&v.isPropagationStopped())break t;w=H,v.currentTarget=ht;try{w(v)}catch(yt){cl(yt)}v.currentTarget=null,w=tt}else for(M=0;M<d.length;M++){if(H=d[M],tt=H.instance,ht=H.currentTarget,H=H.listener,tt!==w&&v.isPropagationStopped())break t;w=H,v.currentTarget=ht;try{w(v)}catch(yt){cl(yt)}v.currentTarget=null,w=tt}}}}function me(i,o){var c=o[pr];c===void 0&&(c=o[pr]=new Set);var d=i+"__bubble";c.has(d)||(Jw(o,i,2,!1),c.add(d))}function ng(i,o,c){var d=0;o&&(d|=4),Jw(c,i,d,o)}var Ed="_reactListening"+Math.random().toString(36).slice(2);function ig(i){if(!i[Ed]){i[Ed]=!0,Sf.forEach(function(c){c!=="selectionchange"&&(BE.has(c)||ng(c,!1,i),ng(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Ed]||(o[Ed]=!0,ng("selectionchange",!1,o))}}function Jw(i,o,c,d){switch(L1(o)){case 2:var v=dC;break;case 8:v=pC;break;default:v=yg}c=v.bind(null,o,c,i),v=void 0,!Xa||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),d?v!==void 0?i.addEventListener(o,c,{capture:!0,passive:v}):i.addEventListener(o,c,!0):v!==void 0?i.addEventListener(o,c,{passive:v}):i.addEventListener(o,c,!1)}function sg(i,o,c,d,v){var w=d;if((o&1)===0&&(o&2)===0&&d!==null)t:for(;;){if(d===null)return;var M=d.tag;if(M===3||M===4){var H=d.stateNode.containerInfo;if(H===v)break;if(M===4)for(M=d.return;M!==null;){var tt=M.tag;if((tt===3||tt===4)&&M.stateNode.containerInfo===v)return;M=M.return}for(;H!==null;){if(M=to(H),M===null)return;if(tt=M.tag,tt===5||tt===6||tt===26||tt===27){d=w=M;continue t}H=H.parentNode}}d=d.return}Eu(function(){var ht=w,yt=Ya(c),Tt=[];t:{var dt=Zf.get(i);if(dt!==void 0){var pt=tc,Ht=i;switch(i){case"keypress":if(Qa(c)===0)break t;case"keydown":case"keyup":pt=Of;break;case"focusin":Ht="focus",pt=Mu;break;case"focusout":Ht="blur",pt=Mu;break;case"beforeblur":case"afterblur":pt=Mu;break;case"click":if(c.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":pt=Ef;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":pt=Rm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":pt=Um;break;case al:case qf:case ll:pt=ku;break;case ta:pt=If;break;case"scroll":case"scrollend":pt=_e;break;case"wheel":pt=ro;break;case"copy":case"cut":case"paste":pt=bs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":pt=Df;break;case"toggle":case"beforetoggle":pt=Ja}var Kt=(o&4)!==0,Ze=!Kt&&(i==="scroll"||i==="scrollend"),rt=Kt?dt!==null?dt+"Capture":null:dt;Kt=[];for(var st=ht,lt;st!==null;){var xt=st;if(lt=xt.stateNode,xt=xt.tag,xt!==5&&xt!==26&&xt!==27||lt===null||rt===null||(xt=io(st,rt),xt!=null&&Kt.push(uh(st,xt,lt))),Ze)break;st=st.return}0<Kt.length&&(dt=new pt(dt,Ht,null,c,yt),Tt.push({event:dt,listeners:Kt}))}}if((o&7)===0){t:{if(dt=i==="mouseover"||i==="pointerover",pt=i==="mouseout"||i==="pointerout",dt&&c!==Jl&&(Ht=c.relatedTarget||c.fromElement)&&(to(Ht)||Ht[Jr]))break t;if((pt||dt)&&(dt=yt.window===yt?yt:(dt=yt.ownerDocument)?dt.defaultView||dt.parentWindow:window,pt?(Ht=c.relatedTarget||c.toElement,pt=ht,Ht=Ht?to(Ht):null,Ht!==null&&(Ze=a(Ht),Kt=Ht.tag,Ht!==Ze||Kt!==5&&Kt!==27&&Kt!==6)&&(Ht=null)):(pt=null,Ht=ht),pt!==Ht)){if(Kt=Ef,xt="onMouseLeave",rt="onMouseEnter",st="mouse",(i==="pointerout"||i==="pointerover")&&(Kt=Df,xt="onPointerLeave",rt="onPointerEnter",st="pointer"),Ze=pt==null?dt:mr(pt),lt=Ht==null?dt:mr(Ht),dt=new Kt(xt,st+"leave",pt,c,yt),dt.target=Ze,dt.relatedTarget=lt,xt=null,to(yt)===ht&&(Kt=new Kt(rt,st+"enter",Ht,c,yt),Kt.target=lt,Kt.relatedTarget=Ze,xt=Kt),Ze=xt,pt&&Ht)e:{for(Kt=HE,rt=pt,st=Ht,lt=0,xt=rt;xt;xt=Kt(xt))lt++;xt=0;for(var $t=st;$t;$t=Kt($t))xt++;for(;0<lt-xt;)rt=Kt(rt),lt--;for(;0<xt-lt;)st=Kt(st),xt--;for(;lt--;){if(rt===st||st!==null&&rt===st.alternate){Kt=rt;break e}rt=Kt(rt),st=Kt(st)}Kt=null}else Kt=null;pt!==null&&t1(Tt,dt,pt,Kt,!1),Ht!==null&&Ze!==null&&t1(Tt,Ze,Ht,Kt,!0)}}t:{if(dt=ht?mr(ht):window,pt=dt.nodeName&&dt.nodeName.toLowerCase(),pt==="select"||pt==="input"&&dt.type==="file")var Re=il;else if(ws(dt))if(Uf)Re=qm;else{Re=jm;var Zt=Xs}else pt=dt.nodeName,!pt||pt.toLowerCase()!=="input"||dt.type!=="checkbox"&&dt.type!=="radio"?ht&&Fa(ht.elementType)&&(Re=il):Re=Qo;if(Re&&(Re=Re(i,ht))){zf(Tt,Re,c,yt);break t}Zt&&Zt(i,dt,ht),i==="focusout"&&ht&&dt.type==="number"&&ht.memoizedProps.value!=null&&Ws(dt,"number",dt.value)}switch(Zt=ht?mr(ht):window,i){case"focusin":(ws(Zt)||Zt.contentEditable==="true")&&(wr=Zt,cc=ht,ol=null);break;case"focusout":ol=cc=wr=null;break;case"mousedown":Ko=!0;break;case"contextmenu":case"mouseup":case"dragend":Ko=!1,Vf(Tt,c,yt);break;case"selectionchange":if(lc)break;case"keydown":case"keyup":Vf(Tt,c,yt)}var ce;if(nc)t:{switch(i){case"compositionstart":var ye="onCompositionStart";break t;case"compositionend":ye="onCompositionEnd";break t;case"compositionupdate":ye="onCompositionUpdate";break t}ye=void 0}else Fo?Pf(i,c)&&(ye="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(ye="onCompositionStart");ye&&(ic&&c.locale!=="ko"&&(Fo||ye!=="onCompositionStart"?ye==="onCompositionEnd"&&Fo&&(ce=yr()):(vs=yt,so="value"in vs?vs.value:vs.textContent,Fo=!0)),Zt=Cd(ht,ye),0<Zt.length&&(ye=new Ou(ye,i,null,c,yt),Tt.push({event:ye,listeners:Zt}),ce?ye.data=ce:(ce=Nu(c),ce!==null&&(ye.data=ce)))),(ce=Hm?Ji(i,c):Yo(i,c))&&(ye=Cd(ht,"onBeforeInput"),0<ye.length&&(Zt=new Ou("onBeforeInput","beforeinput",null,c,yt),Tt.push({event:Zt,listeners:ye}),Zt.data=ce)),PE(Tt,i,ht,c,yt)}Kw(Tt,o)})}function uh(i,o,c){return{instance:i,listener:o,currentTarget:c}}function Cd(i,o){for(var c=o+"Capture",d=[];i!==null;){var v=i,w=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||w===null||(v=io(i,c),v!=null&&d.unshift(uh(i,v,w)),v=io(i,o),v!=null&&d.push(uh(i,v,w))),i.tag===3)return d;i=i.return}return[]}function HE(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function t1(i,o,c,d,v){for(var w=o._reactName,M=[];c!==null&&c!==d;){var H=c,tt=H.alternate,ht=H.stateNode;if(H=H.tag,tt!==null&&tt===d)break;H!==5&&H!==26&&H!==27||ht===null||(tt=ht,v?(ht=io(c,w),ht!=null&&M.unshift(uh(c,ht,tt))):v||(ht=io(c,w),ht!=null&&M.push(uh(c,ht,tt)))),c=c.return}M.length!==0&&i.push({event:o,listeners:M})}var VE=/\r\n?/g,jE=/\u0000|\uFFFD/g;function e1(i){return(typeof i=="string"?i:""+i).replace(VE,`
`).replace(jE,"")}function n1(i,o){return o=e1(o),e1(i)===o}function Ge(i,o,c,d,v,w){switch(c){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||ys(i,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&ys(i,""+d);break;case"className":je(i,"class",d);break;case"tabIndex":je(i,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":je(i,c,d);break;case"style":$l(i,d,w);break;case"data":if(o!=="object"){je(i,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||c!=="href")){i.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=qo(""+d),i.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(c==="formAction"?(o!=="input"&&Ge(i,o,"name",v.name,v,null),Ge(i,o,"formEncType",v.formEncType,v,null),Ge(i,o,"formMethod",v.formMethod,v,null),Ge(i,o,"formTarget",v.formTarget,v,null)):(Ge(i,o,"encType",v.encType,v,null),Ge(i,o,"method",v.method,v,null),Ge(i,o,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){i.removeAttribute(c);break}d=qo(""+d),i.setAttribute(c,d);break;case"onClick":d!=null&&(i.onclick=Li);break;case"onScroll":d!=null&&me("scroll",i);break;case"onScrollEnd":d!=null&&me("scrollend",i);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(v.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"multiple":i.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":i.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){i.removeAttribute("xlink:href");break}c=qo(""+d),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""+d):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":d===!0?i.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?i.setAttribute(c,d):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?i.setAttribute(c,d):i.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?i.removeAttribute(c):i.setAttribute(c,d);break;case"popover":me("beforetoggle",i),me("toggle",i),fe(i,"popover",d);break;case"xlinkActuate":Ci(i,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Ci(i,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Ci(i,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Ci(i,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Ci(i,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Ci(i,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Ci(i,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Ci(i,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Ci(i,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":fe(i,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Kl.get(c)||c,fe(i,c,d))}}function rg(i,o,c,d,v,w){switch(c){case"style":$l(i,d,w);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(s(61));if(c=d.__html,c!=null){if(v.children!=null)throw Error(s(60));i.innerHTML=c}}break;case"children":typeof d=="string"?ys(i,d):(typeof d=="number"||typeof d=="bigint")&&ys(i,""+d);break;case"onScroll":d!=null&&me("scroll",i);break;case"onScrollEnd":d!=null&&me("scrollend",i);break;case"onClick":d!=null&&(i.onclick=Li);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Tf.hasOwnProperty(c))t:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),o=c.slice(2,v?c.length-7:void 0),w=i[Mn]||null,w=w!=null?w[c]:null,typeof w=="function"&&i.removeEventListener(o,w,v),typeof d=="function")){typeof w!="function"&&w!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(o,d,v);break t}c in i?i[c]=d:d===!0?i.setAttribute(c,""):fe(i,c,d)}}}function oi(i,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":me("error",i),me("load",i);var d=!1,v=!1,w;for(w in c)if(c.hasOwnProperty(w)){var M=c[w];if(M!=null)switch(w){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Ge(i,o,w,M,c,null)}}v&&Ge(i,o,"srcSet",c.srcSet,c,null),d&&Ge(i,o,"src",c.src,c,null);return;case"input":me("invalid",i);var H=w=M=v=null,tt=null,ht=null;for(d in c)if(c.hasOwnProperty(d)){var yt=c[d];if(yt!=null)switch(d){case"name":v=yt;break;case"type":M=yt;break;case"checked":tt=yt;break;case"defaultChecked":ht=yt;break;case"value":w=yt;break;case"defaultValue":H=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(s(137,o));break;default:Ge(i,o,d,yt,c,null)}}Wa(i,w,H,tt,ht,M,v,!1);return;case"select":me("invalid",i),d=M=w=null;for(v in c)if(c.hasOwnProperty(v)&&(H=c[v],H!=null))switch(v){case"value":w=H;break;case"defaultValue":M=H;break;case"multiple":d=H;default:Ge(i,o,v,H,c,null)}o=w,c=M,i.multiple=!!d,o!=null?Fe(i,!!d,o,!1):c!=null&&Fe(i,!!d,c,!0);return;case"textarea":me("invalid",i),w=v=d=null;for(M in c)if(c.hasOwnProperty(M)&&(H=c[M],H!=null))switch(M){case"value":d=H;break;case"defaultValue":v=H;break;case"children":w=H;break;case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(91));break;default:Ge(i,o,M,H,c,null)}Vo(i,d,v,w);return;case"option":for(tt in c)c.hasOwnProperty(tt)&&(d=c[tt],d!=null)&&(tt==="selected"?i.selected=d&&typeof d!="function"&&typeof d!="symbol":Ge(i,o,tt,d,c,null));return;case"dialog":me("beforetoggle",i),me("toggle",i),me("cancel",i),me("close",i);break;case"iframe":case"object":me("load",i);break;case"video":case"audio":for(d=0;d<ch.length;d++)me(ch[d],i);break;case"image":me("error",i),me("load",i);break;case"details":me("toggle",i);break;case"embed":case"source":case"link":me("error",i),me("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ht in c)if(c.hasOwnProperty(ht)&&(d=c[ht],d!=null))switch(ht){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:Ge(i,o,ht,d,c,null)}return;default:if(Fa(o)){for(yt in c)c.hasOwnProperty(yt)&&(d=c[yt],d!==void 0&&rg(i,o,yt,d,c,void 0));return}}for(H in c)c.hasOwnProperty(H)&&(d=c[H],d!=null&&Ge(i,o,H,d,c,null))}function qE(i,o,c,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,w=null,M=null,H=null,tt=null,ht=null,yt=null;for(pt in c){var Tt=c[pt];if(c.hasOwnProperty(pt)&&Tt!=null)switch(pt){case"checked":break;case"value":break;case"defaultValue":tt=Tt;default:d.hasOwnProperty(pt)||Ge(i,o,pt,null,d,Tt)}}for(var dt in d){var pt=d[dt];if(Tt=c[dt],d.hasOwnProperty(dt)&&(pt!=null||Tt!=null))switch(dt){case"type":w=pt;break;case"name":v=pt;break;case"checked":ht=pt;break;case"defaultChecked":yt=pt;break;case"value":M=pt;break;case"defaultValue":H=pt;break;case"children":case"dangerouslySetInnerHTML":if(pt!=null)throw Error(s(137,o));break;default:pt!==Tt&&Ge(i,o,dt,pt,d,Tt)}}Su(i,M,H,tt,ht,yt,w,v);return;case"select":pt=M=H=dt=null;for(w in c)if(tt=c[w],c.hasOwnProperty(w)&&tt!=null)switch(w){case"value":break;case"multiple":pt=tt;default:d.hasOwnProperty(w)||Ge(i,o,w,null,d,tt)}for(v in d)if(w=d[v],tt=c[v],d.hasOwnProperty(v)&&(w!=null||tt!=null))switch(v){case"value":dt=w;break;case"defaultValue":H=w;break;case"multiple":M=w;default:w!==tt&&Ge(i,o,v,w,d,tt)}o=H,c=M,d=pt,dt!=null?Fe(i,!!c,dt,!1):!!d!=!!c&&(o!=null?Fe(i,!!c,o,!0):Fe(i,!!c,c?[]:"",!1));return;case"textarea":pt=dt=null;for(H in c)if(v=c[H],c.hasOwnProperty(H)&&v!=null&&!d.hasOwnProperty(H))switch(H){case"value":break;case"children":break;default:Ge(i,o,H,null,d,v)}for(M in d)if(v=d[M],w=c[M],d.hasOwnProperty(M)&&(v!=null||w!=null))switch(M){case"value":dt=v;break;case"defaultValue":pt=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:v!==w&&Ge(i,o,M,v,d,w)}gr(i,dt,pt);return;case"option":for(var Ht in c)dt=c[Ht],c.hasOwnProperty(Ht)&&dt!=null&&!d.hasOwnProperty(Ht)&&(Ht==="selected"?i.selected=!1:Ge(i,o,Ht,null,d,dt));for(tt in d)dt=d[tt],pt=c[tt],d.hasOwnProperty(tt)&&dt!==pt&&(dt!=null||pt!=null)&&(tt==="selected"?i.selected=dt&&typeof dt!="function"&&typeof dt!="symbol":Ge(i,o,tt,dt,d,pt));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Kt in c)dt=c[Kt],c.hasOwnProperty(Kt)&&dt!=null&&!d.hasOwnProperty(Kt)&&Ge(i,o,Kt,null,d,dt);for(ht in d)if(dt=d[ht],pt=c[ht],d.hasOwnProperty(ht)&&dt!==pt&&(dt!=null||pt!=null))switch(ht){case"children":case"dangerouslySetInnerHTML":if(dt!=null)throw Error(s(137,o));break;default:Ge(i,o,ht,dt,d,pt)}return;default:if(Fa(o)){for(var Ze in c)dt=c[Ze],c.hasOwnProperty(Ze)&&dt!==void 0&&!d.hasOwnProperty(Ze)&&rg(i,o,Ze,void 0,d,dt);for(yt in d)dt=d[yt],pt=c[yt],!d.hasOwnProperty(yt)||dt===pt||dt===void 0&&pt===void 0||rg(i,o,yt,dt,d,pt);return}}for(var rt in c)dt=c[rt],c.hasOwnProperty(rt)&&dt!=null&&!d.hasOwnProperty(rt)&&Ge(i,o,rt,null,d,dt);for(Tt in d)dt=d[Tt],pt=c[Tt],!d.hasOwnProperty(Tt)||dt===pt||dt==null&&pt==null||Ge(i,o,Tt,dt,d,pt)}function i1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function GE(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var v=c[d],w=v.transferSize,M=v.initiatorType,H=v.duration;if(w&&H&&i1(M)){for(M=0,H=v.responseEnd,d+=1;d<c.length;d++){var tt=c[d],ht=tt.startTime;if(ht>H)break;var yt=tt.transferSize,Tt=tt.initiatorType;yt&&i1(Tt)&&(tt=tt.responseEnd,M+=yt*(tt<H?1:(H-ht)/(tt-ht)))}if(--d,o+=8*(w+M)/(v.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var og=null,ag=null;function Ld(i){return i.nodeType===9?i:i.ownerDocument}function s1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function r1(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function lg(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var cg=null;function ZE(){var i=window.event;return i&&i.type==="popstate"?i===cg?!1:(cg=i,!0):(cg=null,!1)}var o1=typeof setTimeout=="function"?setTimeout:void 0,WE=typeof clearTimeout=="function"?clearTimeout:void 0,a1=typeof Promise=="function"?Promise:void 0,FE=typeof queueMicrotask=="function"?queueMicrotask:typeof a1<"u"?function(i){return a1.resolve(null).then(i).catch(YE)}:o1;function YE(i){setTimeout(function(){throw i})}function ma(i){return i==="head"}function l1(i,o){var c=o,d=0;do{var v=c.nextSibling;if(i.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(d===0){i.removeChild(v),Nc(o);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")hh(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,hh(c);for(var w=c.firstChild;w;){var M=w.nextSibling,H=w.nodeName;w[qa]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&w.rel.toLowerCase()==="stylesheet"||c.removeChild(w),w=M}}else c==="body"&&hh(i.ownerDocument.body);c=v}while(c);Nc(o)}function c1(i,o){var c=i;i=0;do{var d=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=d}while(c)}function ug(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":ug(c),vu(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function XE(i,o,c,d){for(;i.nodeType===1;){var v=c;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(d){if(!i[qa])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(w=i.getAttribute("rel"),w==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(w!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(w=i.getAttribute("src"),(w!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&w&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var w=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===w)return i}else return i;if(i=Cs(i.nextSibling),i===null)break}return null}function QE(i,o,c){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Cs(i.nextSibling),i===null))return null;return i}function u1(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Cs(i.nextSibling),i===null))return null;return i}function hg(i){return i.data==="$?"||i.data==="$~"}function fg(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function $E(i,o){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||c.readyState!=="loading")o();else{var d=function(){o(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),i._reactRetry=d}}function Cs(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var dg=null;function h1(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(o===0)return Cs(i.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}i=i.nextSibling}return null}function f1(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return i;o--}else c!=="/$"&&c!=="/&"||o++}i=i.previousSibling}return null}function d1(i,o,c){switch(o=Ld(c),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function hh(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);vu(i)}var Ls=new Map,p1=new Set;function Md(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var wo=U.d;U.d={f:KE,r:JE,D:tC,C:eC,L:nC,m:iC,X:rC,S:sC,M:oC};function KE(){var i=wo.f(),o=bd();return i||o}function JE(i){var o=Uo(i);o!==null&&o.tag===5&&o.type==="form"?Ob(o):wo.r(i)}var Dc=typeof document>"u"?null:document;function m1(i,o,c){var d=Dc;if(d&&typeof o=="string"&&o){var v=en(o);v='link[rel="'+i+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),p1.has(v)||(p1.add(v),i={rel:i,crossOrigin:c,href:o},d.querySelector(v)===null&&(o=d.createElement("link"),oi(o,"link",i),kn(o),d.head.appendChild(o)))}}function tC(i){wo.D(i),m1("dns-prefetch",i,null)}function eC(i,o){wo.C(i,o),m1("preconnect",i,o)}function nC(i,o,c){wo.L(i,o,c);var d=Dc;if(d&&i&&o){var v='link[rel="preload"][as="'+en(o)+'"]';o==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+en(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+en(c.imageSizes)+'"]')):v+='[href="'+en(i)+'"]';var w=v;switch(o){case"style":w=Rc(i);break;case"script":w=Ic(i)}Ls.has(w)||(i=g({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:i,as:o},c),Ls.set(w,i),d.querySelector(v)!==null||o==="style"&&d.querySelector(fh(w))||o==="script"&&d.querySelector(dh(w))||(o=d.createElement("link"),oi(o,"link",i),kn(o),d.head.appendChild(o)))}}function iC(i,o){wo.m(i,o);var c=Dc;if(c&&i){var d=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+en(d)+'"][href="'+en(i)+'"]',w=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Ic(i)}if(!Ls.has(w)&&(i=g({rel:"modulepreload",href:i},o),Ls.set(w,i),c.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(dh(w)))return}d=c.createElement("link"),oi(d,"link",i),kn(d),c.head.appendChild(d)}}}function sC(i,o,c){wo.S(i,o,c);var d=Dc;if(d&&i){var v=Bo(d).hoistableStyles,w=Rc(i);o=o||"default";var M=v.get(w);if(!M){var H={loading:0,preload:null};if(M=d.querySelector(fh(w)))H.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":o},c),(c=Ls.get(w))&&pg(i,c);var tt=M=d.createElement("link");kn(tt),oi(tt,"link",i),tt._p=new Promise(function(ht,yt){tt.onload=ht,tt.onerror=yt}),tt.addEventListener("load",function(){H.loading|=1}),tt.addEventListener("error",function(){H.loading|=2}),H.loading|=4,kd(M,o,d)}M={type:"stylesheet",instance:M,count:1,state:H},v.set(w,M)}}}function rC(i,o){wo.X(i,o);var c=Dc;if(c&&i){var d=Bo(c).hoistableScripts,v=Ic(i),w=d.get(v);w||(w=c.querySelector(dh(v)),w||(i=g({src:i,async:!0},o),(o=Ls.get(v))&&mg(i,o),w=c.createElement("script"),kn(w),oi(w,"link",i),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(v,w))}}function oC(i,o){wo.M(i,o);var c=Dc;if(c&&i){var d=Bo(c).hoistableScripts,v=Ic(i),w=d.get(v);w||(w=c.querySelector(dh(v)),w||(i=g({src:i,async:!0,type:"module"},o),(o=Ls.get(v))&&mg(i,o),w=c.createElement("script"),kn(w),oi(w,"link",i),c.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},d.set(v,w))}}function _1(i,o,c,d){var v=(v=gt.current)?Md(v):null;if(!v)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Rc(c.href),c=Bo(v).hoistableStyles,d=c.get(o),d||(d={type:"style",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=Rc(c.href);var w=Bo(v).hoistableStyles,M=w.get(i);if(M||(v=v.ownerDocument||v,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(i,M),(w=v.querySelector(fh(i)))&&!w._p&&(M.instance=w,M.state.loading=5),Ls.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ls.set(i,c),w||aC(v,i,c,M.state))),o&&d===null)throw Error(s(528,""));return M}if(o&&d!==null)throw Error(s(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Ic(c),c=Bo(v).hoistableScripts,d=c.get(o),d||(d={type:"script",instance:null,count:0,state:null},c.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Rc(i){return'href="'+en(i)+'"'}function fh(i){return'link[rel="stylesheet"]['+i+"]"}function g1(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function aC(i,o,c,d){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=i.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),oi(o,"link",c),kn(o),i.head.appendChild(o))}function Ic(i){return'[src="'+en(i)+'"]'}function dh(i){return"script[async]"+i}function y1(i,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var d=i.querySelector('style[data-href~="'+en(c.href)+'"]');if(d)return o.instance=d,kn(d),d;var v=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(i.ownerDocument||i).createElement("style"),kn(d),oi(d,"style",v),kd(d,c.precedence,i),o.instance=d;case"stylesheet":v=Rc(c.href);var w=i.querySelector(fh(v));if(w)return o.state.loading|=4,o.instance=w,kn(w),w;d=g1(c),(v=Ls.get(v))&&pg(d,v),w=(i.ownerDocument||i).createElement("link"),kn(w);var M=w;return M._p=new Promise(function(H,tt){M.onload=H,M.onerror=tt}),oi(w,"link",d),o.state.loading|=4,kd(w,c.precedence,i),o.instance=w;case"script":return w=Ic(c.src),(v=i.querySelector(dh(w)))?(o.instance=v,kn(v),v):(d=c,(v=Ls.get(w))&&(d=g({},c),mg(d,v)),i=i.ownerDocument||i,v=i.createElement("script"),kn(v),oi(v,"link",d),i.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,kd(d,c.precedence,i));return o.instance}function kd(i,o,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,w=v,M=0;M<d.length;M++){var H=d[M];if(H.dataset.precedence===o)w=H;else if(w!==v)break}w?w.parentNode.insertBefore(i,w.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(i,o.firstChild))}function pg(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function mg(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var Od=null;function v1(i,o,c){if(Od===null){var d=new Map,v=Od=new Map;v.set(c,d)}else v=Od,d=v.get(c),d||(d=new Map,v.set(c,d));if(d.has(i))return d;for(d.set(i,null),c=c.getElementsByTagName(i),v=0;v<c.length;v++){var w=c[v];if(!(w[qa]||w[ze]||i==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var M=w.getAttribute(o)||"";M=i+M;var H=d.get(M);H?H.push(w):d.set(M,[w])}}return d}function b1(i,o,c){i=i.ownerDocument||i,i.head.insertBefore(c,o==="title"?i.querySelector("head > title"):null)}function lC(i,o,c){if(c===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(i=o.disabled,typeof o.precedence=="string"&&i==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function w1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function cC(i,o,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=Rc(d.href),w=o.querySelector(fh(v));if(w){o=w._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=Dd.bind(i),o.then(i,i)),c.state.loading|=4,c.instance=w,kn(w);return}w=o.ownerDocument||o,d=g1(d),(v=Ls.get(v))&&pg(d,v),w=w.createElement("link"),kn(w);var M=w;M._p=new Promise(function(H,tt){M.onload=H,M.onerror=tt}),oi(w,"link",d),c.instance=w}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=Dd.bind(i),o.addEventListener("load",c),o.addEventListener("error",c))}}var _g=0;function uC(i,o){return i.stylesheets&&i.count===0&&Id(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var d=setTimeout(function(){if(i.stylesheets&&Id(i,i.stylesheets),i.unsuspend){var w=i.unsuspend;i.unsuspend=null,w()}},6e4+o);0<i.imgBytes&&_g===0&&(_g=62500*GE());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Id(i,i.stylesheets),i.unsuspend)){var w=i.unsuspend;i.unsuspend=null,w()}},(i.imgBytes>_g?50:800)+o);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function Dd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Id(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Rd=null;function Id(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Rd=new Map,o.forEach(hC,i),Rd=null,Dd.call(i))}function hC(i,o){if(!(o.state.loading&4)){var c=Rd.get(i);if(c)var d=c.get(null);else{c=new Map,Rd.set(i,c);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<v.length;w++){var M=v[w];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(c.set(M.dataset.precedence,M),d=M)}d&&c.set(null,d)}v=o.instance,M=v.getAttribute("data-precedence"),w=c.get(M)||d,w===d&&c.set(null,v),c.set(M,v),this.count++,d=Dd.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),w?w.parentNode.insertBefore(v,w.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),o.state.loading|=4}}var ph={$$typeof:O,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function fC(i,o,c,d,v,w,M,H,tt){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ot(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ot(0),this.hiddenUpdates=Ot(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=w,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=tt,this.incompleteTransitions=new Map}function x1(i,o,c,d,v,w,M,H,tt,ht,yt,Tt){return i=new fC(i,o,c,M,tt,ht,yt,Tt,H),o=1,w===!0&&(o|=24),w=hi(3,null,null,o),i.current=w,w.stateNode=i,o=Xm(),o.refCount++,i.pooledCache=o,o.refCount++,w.memoizedState={element:d,isDehydrated:c,cache:o},Jm(w),i}function S1(i){return i?(i=oo,i):oo}function T1(i,o,c,d,v,w){v=S1(v),d.context===null?d.context=v:d.pendingContext=v,d=sa(o),d.payload={element:c},w=w===void 0?null:w,w!==null&&(d.callback=w),c=ra(i,d,o),c!==null&&(zi(c,i,o),Wu(c,i,o))}function A1(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function gg(i,o){A1(i,o),(i=i.alternate)&&A1(i,o)}function E1(i){if(i.tag===13||i.tag===31){var o=Ts(i,67108864);o!==null&&zi(o,i,67108864),gg(i,67108864)}}function C1(i){if(i.tag===13||i.tag===31){var o=ss();o=Ce(o);var c=Ts(i,o);c!==null&&zi(c,i,o),gg(i,o)}}var Nd=!0;function dC(i,o,c,d){var v=P.T;P.T=null;var w=U.p;try{U.p=2,yg(i,o,c,d)}finally{U.p=w,P.T=v}}function pC(i,o,c,d){var v=P.T;P.T=null;var w=U.p;try{U.p=8,yg(i,o,c,d)}finally{U.p=w,P.T=v}}function yg(i,o,c,d){if(Nd){var v=vg(d);if(v===null)sg(i,o,d,Pd,c),M1(i,d);else if(_C(v,i,o,c,d))d.stopPropagation();else if(M1(i,d),o&4&&-1<mC.indexOf(i)){for(;v!==null;){var w=Uo(v);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var M=Zs(w.pendingLanes);if(M!==0){var H=w;for(H.pendingLanes|=2,H.entangledLanes|=2;M;){var tt=1<<31-ni(M);H.entanglements[1]|=tt,M&=~tt}Mr(w),(Pe&6)===0&&(yd=hn()+500,lh(0))}}break;case 31:case 13:H=Ts(w,2),H!==null&&zi(H,w,2),bd(),gg(w,2)}if(w=vg(d),w===null&&sg(i,o,d,Pd,c),w===v)break;v=w}v!==null&&d.stopPropagation()}else sg(i,o,d,null,c)}}function vg(i){return i=Ya(i),bg(i)}var Pd=null;function bg(i){if(Pd=null,i=to(i),i!==null){var o=a(i);if(o===null)i=null;else{var c=o.tag;if(c===13){if(i=u(o),i!==null)return i;i=null}else if(c===31){if(i=h(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Pd=i,null}function L1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Va()){case Gs:return 2;case _s:return 8;case Yr:case Yl:return 32;case ja:return 268435456;default:return 32}default:return 32}}var wg=!1,_a=null,ga=null,ya=null,mh=new Map,_h=new Map,va=[],mC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function M1(i,o){switch(i){case"focusin":case"focusout":_a=null;break;case"dragenter":case"dragleave":ga=null;break;case"mouseover":case"mouseout":ya=null;break;case"pointerover":case"pointerout":mh.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":_h.delete(o.pointerId)}}function gh(i,o,c,d,v,w){return i===null||i.nativeEvent!==w?(i={blockedOn:o,domEventName:c,eventSystemFlags:d,nativeEvent:w,targetContainers:[v]},o!==null&&(o=Uo(o),o!==null&&E1(o)),i):(i.eventSystemFlags|=d,o=i.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),i)}function _C(i,o,c,d,v){switch(o){case"focusin":return _a=gh(_a,i,o,c,d,v),!0;case"dragenter":return ga=gh(ga,i,o,c,d,v),!0;case"mouseover":return ya=gh(ya,i,o,c,d,v),!0;case"pointerover":var w=v.pointerId;return mh.set(w,gh(mh.get(w)||null,i,o,c,d,v)),!0;case"gotpointercapture":return w=v.pointerId,_h.set(w,gh(_h.get(w)||null,i,o,c,d,v)),!0}return!1}function k1(i){var o=to(i.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=u(c),o!==null){i.blockedOn=o,gs(i.priority,function(){C1(c)});return}}else if(o===31){if(o=h(c),o!==null){i.blockedOn=o,gs(i.priority,function(){C1(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function zd(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=vg(i.nativeEvent);if(c===null){c=i.nativeEvent;var d=new c.constructor(c.type,c);Jl=d,c.target.dispatchEvent(d),Jl=null}else return o=Uo(c),o!==null&&E1(o),i.blockedOn=c,!1;o.shift()}return!0}function O1(i,o,c){zd(i)&&c.delete(o)}function gC(){wg=!1,_a!==null&&zd(_a)&&(_a=null),ga!==null&&zd(ga)&&(ga=null),ya!==null&&zd(ya)&&(ya=null),mh.forEach(O1),_h.forEach(O1)}function Ud(i,o){i.blockedOn===o&&(i.blockedOn=null,wg||(wg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,gC)))}var Bd=null;function D1(i){Bd!==i&&(Bd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Bd===i&&(Bd=null);for(var o=0;o<i.length;o+=3){var c=i[o],d=i[o+1],v=i[o+2];if(typeof d!="function"){if(bg(d||c)===null)continue;break}var w=Uo(c);w!==null&&(i.splice(o,3),o-=3,v_(w,{pending:!0,data:v,method:c.method,action:d},d,v))}}))}function Nc(i){function o(tt){return Ud(tt,i)}_a!==null&&Ud(_a,i),ga!==null&&Ud(ga,i),ya!==null&&Ud(ya,i),mh.forEach(o),_h.forEach(o);for(var c=0;c<va.length;c++){var d=va[c];d.blockedOn===i&&(d.blockedOn=null)}for(;0<va.length&&(c=va[0],c.blockedOn===null);)k1(c),c.blockedOn===null&&va.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var v=c[d],w=c[d+1],M=v[Mn]||null;if(typeof w=="function")M||D1(c);else if(M){var H=null;if(w&&w.hasAttribute("formAction")){if(v=w,M=w[Mn]||null)H=M.formAction;else if(bg(v)!==null)continue}else H=M.action;typeof H=="function"?c[d+1]=H:(c.splice(d,3),d-=3),D1(c)}}}function R1(){function i(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(M){return v=M})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function xg(i){this._internalRoot=i}Hd.prototype.render=xg.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var c=o.current,d=ss();T1(c,d,i,o,null,null)},Hd.prototype.unmount=xg.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;T1(i.current,2,null,i,null,null),bd(),o[Jr]=null}};function Hd(i){this._internalRoot=i}Hd.prototype.unstable_scheduleHydration=function(i){if(i){var o=Ei();i={blockedOn:null,target:i,priority:o};for(var c=0;c<va.length&&o!==0&&o<va[c].priority;c++);va.splice(c,0,i),c===0&&k1(i)}};var I1=t.version;if(I1!=="19.2.4")throw Error(s(527,I1,"19.2.4"));U.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=m(o),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var yC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vd.isDisabled&&Vd.supportsFiber)try{dr=Vd.inject(yC),Cn=Vd}catch{}}return vh.createRoot=function(i,o){if(!r(i))throw Error(s(299));var c=!1,d="",v=Vb,w=jb,M=qb;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(w=o.onCaughtError),o.onRecoverableError!==void 0&&(M=o.onRecoverableError)),o=x1(i,1,!1,null,null,c,d,null,v,w,M,R1),i[Jr]=o.current,ig(i),new xg(o)},vh.hydrateRoot=function(i,o,c){if(!r(i))throw Error(s(299));var d=!1,v="",w=Vb,M=jb,H=qb,tt=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(w=c.onUncaughtError),c.onCaughtError!==void 0&&(M=c.onCaughtError),c.onRecoverableError!==void 0&&(H=c.onRecoverableError),c.formState!==void 0&&(tt=c.formState)),o=x1(i,1,!0,o,c??null,d,v,tt,w,M,H,R1),o.context=S1(null),c=o.current,d=ss(),d=Ce(d),v=sa(d),v.callback=null,ra(c,v,d),c=d,o.current.lanes=c,Pt(o,c),Mr(o),i[Jr]=o.current,ig(i),new Hd(o)},vh.version="19.2.4",vh}var G1;function LC(){if(G1)return Ag.exports;G1=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),Ag.exports=CC(),Ag.exports}var MC=LC(),kC={};function OC(n){let t="pending",e,s;const r=n.then(a=>{t="success",e=a},a=>{t="error",s=a});return{promise:n,read(){switch(t){case"pending":throw r;case"error":throw s;case"success":return e}}}}const m2=zt.createContext(null);function DC(){const n=zt.useContext(m2);if(!n)throw new Error("Repo was not found on RepoContext.");return n}const RC=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function by(n){return typeof n=="string"&&RC.test(n)}function IC(n){if(!by(n))throw TypeError("Invalid UUID");let t;const e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}function wy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var er={},Xe={},di={},Mg={},bh={},Z1;function NC(){return Z1||(Z1=1,Object.defineProperty(bh,"__esModule",{value:!0}),bh.crypto=void 0,bh.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),bh}var W1;function _2(){return W1||(W1=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.wrapXOFConstructorWithOpts=n.wrapConstructorWithOpts=n.wrapConstructor=n.Hash=n.nextTick=n.swap32IfBE=n.byteSwapIfBE=n.swap8IfBE=n.isLE=void 0,n.isBytes=e,n.anumber=s,n.abytes=r,n.ahash=a,n.aexists=u,n.aoutput=h,n.u8=p,n.u32=m,n.clean=_,n.createView=g,n.rotr=b,n.rotl=x,n.byteSwap=S,n.byteSwap32=A,n.bytesToHex=z,n.hexToBytes=N,n.asyncLoop=Y,n.utf8ToBytes=G,n.bytesToUtf8=Z,n.toBytes=F,n.kdfInputToBytes=$,n.concatBytes=et,n.checkOpts=k,n.createHasher=W,n.createOptHasher=P,n.createXOFer=U,n.randomBytes=K;const t=NC();function e(D){return D instanceof Uint8Array||ArrayBuffer.isView(D)&&D.constructor.name==="Uint8Array"}function s(D){if(!Number.isSafeInteger(D)||D<0)throw new Error("positive integer expected, got "+D)}function r(D,...V){if(!e(D))throw new Error("Uint8Array expected");if(V.length>0&&!V.includes(D.length))throw new Error("Uint8Array expected of length "+V+", got length="+D.length)}function a(D){if(typeof D!="function"||typeof D.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");s(D.outputLen),s(D.blockLen)}function u(D,V=!0){if(D.destroyed)throw new Error("Hash instance has been destroyed");if(V&&D.finished)throw new Error("Hash#digest() has already been called")}function h(D,V){r(D);const I=V.outputLen;if(D.length<I)throw new Error("digestInto() expects output buffer of length at least "+I)}function p(D){return new Uint8Array(D.buffer,D.byteOffset,D.byteLength)}function m(D){return new Uint32Array(D.buffer,D.byteOffset,Math.floor(D.byteLength/4))}function _(...D){for(let V=0;V<D.length;V++)D[V].fill(0)}function g(D){return new DataView(D.buffer,D.byteOffset,D.byteLength)}function b(D,V){return D<<32-V|D>>>V}function x(D,V){return D<<V|D>>>32-V>>>0}n.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function S(D){return D<<24&4278190080|D<<8&16711680|D>>>8&65280|D>>>24&255}n.swap8IfBE=n.isLE?D=>D:D=>S(D),n.byteSwapIfBE=n.swap8IfBE;function A(D){for(let V=0;V<D.length;V++)D[V]=S(D[V]);return D}n.swap32IfBE=n.isLE?D=>D:A;const E=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",R=Array.from({length:256},(D,V)=>V.toString(16).padStart(2,"0"));function z(D){if(r(D),E)return D.toHex();let V="";for(let I=0;I<D.length;I++)V+=R[D[I]];return V}const O={_0:48,_9:57,A:65,F:70,a:97,f:102};function Q(D){if(D>=O._0&&D<=O._9)return D-O._0;if(D>=O.A&&D<=O.F)return D-(O.A-10);if(D>=O.a&&D<=O.f)return D-(O.a-10)}function N(D){if(typeof D!="string")throw new Error("hex string expected, got "+typeof D);if(E)return Uint8Array.fromHex(D);const V=D.length,I=V/2;if(V%2)throw new Error("hex string expected, got unpadded hex of length "+V);const q=new Uint8Array(I);for(let at=0,mt=0;at<I;at++,mt+=2){const vt=Q(D.charCodeAt(mt)),gt=Q(D.charCodeAt(mt+1));if(vt===void 0||gt===void 0){const Dt=D[mt]+D[mt+1];throw new Error('hex string expected, got non-hex character "'+Dt+'" at index '+mt)}q[at]=vt*16+gt}return q}const j=async()=>{};n.nextTick=j;async function Y(D,V,I){let q=Date.now();for(let at=0;at<D;at++){I(at);const mt=Date.now()-q;mt>=0&&mt<V||(await(0,n.nextTick)(),q+=mt)}}function G(D){if(typeof D!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(D))}function Z(D){return new TextDecoder().decode(D)}function F(D){return typeof D=="string"&&(D=G(D)),r(D),D}function $(D){return typeof D=="string"&&(D=G(D)),r(D),D}function et(...D){let V=0;for(let q=0;q<D.length;q++){const at=D[q];r(at),V+=at.length}const I=new Uint8Array(V);for(let q=0,at=0;q<D.length;q++){const mt=D[q];I.set(mt,at),at+=mt.length}return I}function k(D,V){if(V!==void 0&&{}.toString.call(V)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(D,V)}class X{}n.Hash=X;function W(D){const V=q=>D().update(F(q)).digest(),I=D();return V.outputLen=I.outputLen,V.blockLen=I.blockLen,V.create=()=>D(),V}function P(D){const V=(q,at)=>D(at).update(F(q)).digest(),I=D({});return V.outputLen=I.outputLen,V.blockLen=I.blockLen,V.create=q=>D(q),V}function U(D){const V=(q,at)=>D(at).update(F(q)).digest(),I=D({});return V.outputLen=I.outputLen,V.blockLen=I.blockLen,V.create=q=>D(q),V}n.wrapConstructor=W,n.wrapConstructorWithOpts=P,n.wrapXOFConstructorWithOpts=U;function K(D=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(D));if(t.crypto&&typeof t.crypto.randomBytes=="function")return Uint8Array.from(t.crypto.randomBytes(D));throw new Error("crypto.getRandomValues must be defined")}})(Mg)),Mg}var F1;function PC(){if(F1)return di;F1=1,Object.defineProperty(di,"__esModule",{value:!0}),di.SHA512_IV=di.SHA384_IV=di.SHA224_IV=di.SHA256_IV=di.HashMD=void 0,di.setBigUint64=t,di.Chi=e,di.Maj=s;const n=_2();function t(a,u,h,p){if(typeof a.setBigUint64=="function")return a.setBigUint64(u,h,p);const m=BigInt(32),_=BigInt(4294967295),g=Number(h>>m&_),b=Number(h&_),x=p?4:0,S=p?0:4;a.setUint32(u+x,g,p),a.setUint32(u+S,b,p)}function e(a,u,h){return a&u^~a&h}function s(a,u,h){return a&u^a&h^u&h}class r extends n.Hash{constructor(u,h,p,m){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=u,this.outputLen=h,this.padOffset=p,this.isLE=m,this.buffer=new Uint8Array(u),this.view=(0,n.createView)(this.buffer)}update(u){(0,n.aexists)(this),u=(0,n.toBytes)(u),(0,n.abytes)(u);const{view:h,buffer:p,blockLen:m}=this,_=u.length;for(let g=0;g<_;){const b=Math.min(m-this.pos,_-g);if(b===m){const x=(0,n.createView)(u);for(;m<=_-g;g+=m)this.process(x,g);continue}p.set(u.subarray(g,g+b),this.pos),this.pos+=b,g+=b,this.pos===m&&(this.process(h,0),this.pos=0)}return this.length+=u.length,this.roundClean(),this}digestInto(u){(0,n.aexists)(this),(0,n.aoutput)(u,this),this.finished=!0;const{buffer:h,view:p,blockLen:m,isLE:_}=this;let{pos:g}=this;h[g++]=128,(0,n.clean)(this.buffer.subarray(g)),this.padOffset>m-g&&(this.process(p,0),g=0);for(let E=g;E<m;E++)h[E]=0;t(p,m-8,BigInt(this.length*8),_),this.process(p,0);const b=(0,n.createView)(u),x=this.outputLen;if(x%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const S=x/4,A=this.get();if(S>A.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<S;E++)b.setUint32(4*E,A[E],_)}digest(){const{buffer:u,outputLen:h}=this;this.digestInto(u);const p=u.slice(0,h);return this.destroy(),p}_cloneInto(u){u||(u=new this.constructor),u.set(...this.get());const{blockLen:h,buffer:p,length:m,finished:_,destroyed:g,pos:b}=this;return u.destroyed=g,u.finished=_,u.length=m,u.pos=b,m%h&&u.buffer.set(p),u}clone(){return this._cloneInto()}}return di.HashMD=r,di.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),di.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),di.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),di.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),di}var ee={},Y1;function zC(){if(Y1)return ee;Y1=1,Object.defineProperty(ee,"__esModule",{value:!0}),ee.toBig=ee.shrSL=ee.shrSH=ee.rotrSL=ee.rotrSH=ee.rotrBL=ee.rotrBH=ee.rotr32L=ee.rotr32H=ee.rotlSL=ee.rotlSH=ee.rotlBL=ee.rotlBH=ee.add5L=ee.add5H=ee.add4L=ee.add4H=ee.add3L=ee.add3H=void 0,ee.add=R,ee.fromBig=e,ee.split=s;const n=BigInt(2**32-1),t=BigInt(32);function e(Z,F=!1){return F?{h:Number(Z&n),l:Number(Z>>t&n)}:{h:Number(Z>>t&n)|0,l:Number(Z&n)|0}}function s(Z,F=!1){const $=Z.length;let et=new Uint32Array($),k=new Uint32Array($);for(let X=0;X<$;X++){const{h:W,l:P}=e(Z[X],F);[et[X],k[X]]=[W,P]}return[et,k]}const r=(Z,F)=>BigInt(Z>>>0)<<t|BigInt(F>>>0);ee.toBig=r;const a=(Z,F,$)=>Z>>>$;ee.shrSH=a;const u=(Z,F,$)=>Z<<32-$|F>>>$;ee.shrSL=u;const h=(Z,F,$)=>Z>>>$|F<<32-$;ee.rotrSH=h;const p=(Z,F,$)=>Z<<32-$|F>>>$;ee.rotrSL=p;const m=(Z,F,$)=>Z<<64-$|F>>>$-32;ee.rotrBH=m;const _=(Z,F,$)=>Z>>>$-32|F<<64-$;ee.rotrBL=_;const g=(Z,F)=>F;ee.rotr32H=g;const b=(Z,F)=>Z;ee.rotr32L=b;const x=(Z,F,$)=>Z<<$|F>>>32-$;ee.rotlSH=x;const S=(Z,F,$)=>F<<$|Z>>>32-$;ee.rotlSL=S;const A=(Z,F,$)=>F<<$-32|Z>>>64-$;ee.rotlBH=A;const E=(Z,F,$)=>Z<<$-32|F>>>64-$;ee.rotlBL=E;function R(Z,F,$,et){const k=(F>>>0)+(et>>>0);return{h:Z+$+(k/2**32|0)|0,l:k|0}}const z=(Z,F,$)=>(Z>>>0)+(F>>>0)+($>>>0);ee.add3L=z;const O=(Z,F,$,et)=>F+$+et+(Z/2**32|0)|0;ee.add3H=O;const Q=(Z,F,$,et)=>(Z>>>0)+(F>>>0)+($>>>0)+(et>>>0);ee.add4L=Q;const N=(Z,F,$,et,k)=>F+$+et+k+(Z/2**32|0)|0;ee.add4H=N;const j=(Z,F,$,et,k)=>(Z>>>0)+(F>>>0)+($>>>0)+(et>>>0)+(k>>>0);ee.add5L=j;const Y=(Z,F,$,et,k,X)=>F+$+et+k+X+(Z/2**32|0)|0;ee.add5H=Y;const G={fromBig:e,split:s,toBig:r,shrSH:a,shrSL:u,rotrSH:h,rotrSL:p,rotrBH:m,rotrBL:_,rotr32H:g,rotr32L:b,rotlSH:x,rotlSL:S,rotlBH:A,rotlBL:E,add:R,add3L:z,add3H:O,add4L:Q,add4H:N,add5H:Y,add5L:j};return ee.default=G,ee}var X1;function UC(){if(X1)return Xe;X1=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.sha512_224=Xe.sha512_256=Xe.sha384=Xe.sha512=Xe.sha224=Xe.sha256=Xe.SHA512_256=Xe.SHA512_224=Xe.SHA384=Xe.SHA512=Xe.SHA224=Xe.SHA256=void 0;const n=PC(),t=zC(),e=_2(),s=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),r=new Uint32Array(64);class a extends n.HashMD{constructor(O=32){super(64,O,8,!1),this.A=n.SHA256_IV[0]|0,this.B=n.SHA256_IV[1]|0,this.C=n.SHA256_IV[2]|0,this.D=n.SHA256_IV[3]|0,this.E=n.SHA256_IV[4]|0,this.F=n.SHA256_IV[5]|0,this.G=n.SHA256_IV[6]|0,this.H=n.SHA256_IV[7]|0}get(){const{A:O,B:Q,C:N,D:j,E:Y,F:G,G:Z,H:F}=this;return[O,Q,N,j,Y,G,Z,F]}set(O,Q,N,j,Y,G,Z,F){this.A=O|0,this.B=Q|0,this.C=N|0,this.D=j|0,this.E=Y|0,this.F=G|0,this.G=Z|0,this.H=F|0}process(O,Q){for(let k=0;k<16;k++,Q+=4)r[k]=O.getUint32(Q,!1);for(let k=16;k<64;k++){const X=r[k-15],W=r[k-2],P=(0,e.rotr)(X,7)^(0,e.rotr)(X,18)^X>>>3,U=(0,e.rotr)(W,17)^(0,e.rotr)(W,19)^W>>>10;r[k]=U+r[k-7]+P+r[k-16]|0}let{A:N,B:j,C:Y,D:G,E:Z,F,G:$,H:et}=this;for(let k=0;k<64;k++){const X=(0,e.rotr)(Z,6)^(0,e.rotr)(Z,11)^(0,e.rotr)(Z,25),W=et+X+(0,n.Chi)(Z,F,$)+s[k]+r[k]|0,U=((0,e.rotr)(N,2)^(0,e.rotr)(N,13)^(0,e.rotr)(N,22))+(0,n.Maj)(N,j,Y)|0;et=$,$=F,F=Z,Z=G+W|0,G=Y,Y=j,j=N,N=W+U|0}N=N+this.A|0,j=j+this.B|0,Y=Y+this.C|0,G=G+this.D|0,Z=Z+this.E|0,F=F+this.F|0,$=$+this.G|0,et=et+this.H|0,this.set(N,j,Y,G,Z,F,$,et)}roundClean(){(0,e.clean)(r)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,e.clean)(this.buffer)}}Xe.SHA256=a;class u extends a{constructor(){super(28),this.A=n.SHA224_IV[0]|0,this.B=n.SHA224_IV[1]|0,this.C=n.SHA224_IV[2]|0,this.D=n.SHA224_IV[3]|0,this.E=n.SHA224_IV[4]|0,this.F=n.SHA224_IV[5]|0,this.G=n.SHA224_IV[6]|0,this.H=n.SHA224_IV[7]|0}}Xe.SHA224=u;const h=t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(z=>BigInt(z))),p=h[0],m=h[1],_=new Uint32Array(80),g=new Uint32Array(80);class b extends n.HashMD{constructor(O=64){super(128,O,16,!1),this.Ah=n.SHA512_IV[0]|0,this.Al=n.SHA512_IV[1]|0,this.Bh=n.SHA512_IV[2]|0,this.Bl=n.SHA512_IV[3]|0,this.Ch=n.SHA512_IV[4]|0,this.Cl=n.SHA512_IV[5]|0,this.Dh=n.SHA512_IV[6]|0,this.Dl=n.SHA512_IV[7]|0,this.Eh=n.SHA512_IV[8]|0,this.El=n.SHA512_IV[9]|0,this.Fh=n.SHA512_IV[10]|0,this.Fl=n.SHA512_IV[11]|0,this.Gh=n.SHA512_IV[12]|0,this.Gl=n.SHA512_IV[13]|0,this.Hh=n.SHA512_IV[14]|0,this.Hl=n.SHA512_IV[15]|0}get(){const{Ah:O,Al:Q,Bh:N,Bl:j,Ch:Y,Cl:G,Dh:Z,Dl:F,Eh:$,El:et,Fh:k,Fl:X,Gh:W,Gl:P,Hh:U,Hl:K}=this;return[O,Q,N,j,Y,G,Z,F,$,et,k,X,W,P,U,K]}set(O,Q,N,j,Y,G,Z,F,$,et,k,X,W,P,U,K){this.Ah=O|0,this.Al=Q|0,this.Bh=N|0,this.Bl=j|0,this.Ch=Y|0,this.Cl=G|0,this.Dh=Z|0,this.Dl=F|0,this.Eh=$|0,this.El=et|0,this.Fh=k|0,this.Fl=X|0,this.Gh=W|0,this.Gl=P|0,this.Hh=U|0,this.Hl=K|0}process(O,Q){for(let I=0;I<16;I++,Q+=4)_[I]=O.getUint32(Q),g[I]=O.getUint32(Q+=4);for(let I=16;I<80;I++){const q=_[I-15]|0,at=g[I-15]|0,mt=t.rotrSH(q,at,1)^t.rotrSH(q,at,8)^t.shrSH(q,at,7),vt=t.rotrSL(q,at,1)^t.rotrSL(q,at,8)^t.shrSL(q,at,7),gt=_[I-2]|0,Dt=g[I-2]|0,Mt=t.rotrSH(gt,Dt,19)^t.rotrBH(gt,Dt,61)^t.shrSH(gt,Dt,6),oe=t.rotrSL(gt,Dt,19)^t.rotrBL(gt,Dt,61)^t.shrSL(gt,Dt,6),Me=t.add4L(vt,oe,g[I-7],g[I-16]),Ke=t.add4H(Me,mt,Mt,_[I-7],_[I-16]);_[I]=Ke|0,g[I]=Me|0}let{Ah:N,Al:j,Bh:Y,Bl:G,Ch:Z,Cl:F,Dh:$,Dl:et,Eh:k,El:X,Fh:W,Fl:P,Gh:U,Gl:K,Hh:D,Hl:V}=this;for(let I=0;I<80;I++){const q=t.rotrSH(k,X,14)^t.rotrSH(k,X,18)^t.rotrBH(k,X,41),at=t.rotrSL(k,X,14)^t.rotrSL(k,X,18)^t.rotrBL(k,X,41),mt=k&W^~k&U,vt=X&P^~X&K,gt=t.add5L(V,at,vt,m[I],g[I]),Dt=t.add5H(gt,D,q,mt,p[I],_[I]),Mt=gt|0,oe=t.rotrSH(N,j,28)^t.rotrBH(N,j,34)^t.rotrBH(N,j,39),Me=t.rotrSL(N,j,28)^t.rotrBL(N,j,34)^t.rotrBL(N,j,39),Ke=N&Y^N&Z^Y&Z,tn=j&G^j&F^G&F;D=U|0,V=K|0,U=W|0,K=P|0,W=k|0,P=X|0,{h:k,l:X}=t.add($|0,et|0,Dt|0,Mt|0),$=Z|0,et=F|0,Z=Y|0,F=G|0,Y=N|0,G=j|0;const Fn=t.add3L(Mt,Me,tn);N=t.add3H(Fn,Dt,oe,Ke),j=Fn|0}({h:N,l:j}=t.add(this.Ah|0,this.Al|0,N|0,j|0)),{h:Y,l:G}=t.add(this.Bh|0,this.Bl|0,Y|0,G|0),{h:Z,l:F}=t.add(this.Ch|0,this.Cl|0,Z|0,F|0),{h:$,l:et}=t.add(this.Dh|0,this.Dl|0,$|0,et|0),{h:k,l:X}=t.add(this.Eh|0,this.El|0,k|0,X|0),{h:W,l:P}=t.add(this.Fh|0,this.Fl|0,W|0,P|0),{h:U,l:K}=t.add(this.Gh|0,this.Gl|0,U|0,K|0),{h:D,l:V}=t.add(this.Hh|0,this.Hl|0,D|0,V|0),this.set(N,j,Y,G,Z,F,$,et,k,X,W,P,U,K,D,V)}roundClean(){(0,e.clean)(_,g)}destroy(){(0,e.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Xe.SHA512=b;class x extends b{constructor(){super(48),this.Ah=n.SHA384_IV[0]|0,this.Al=n.SHA384_IV[1]|0,this.Bh=n.SHA384_IV[2]|0,this.Bl=n.SHA384_IV[3]|0,this.Ch=n.SHA384_IV[4]|0,this.Cl=n.SHA384_IV[5]|0,this.Dh=n.SHA384_IV[6]|0,this.Dl=n.SHA384_IV[7]|0,this.Eh=n.SHA384_IV[8]|0,this.El=n.SHA384_IV[9]|0,this.Fh=n.SHA384_IV[10]|0,this.Fl=n.SHA384_IV[11]|0,this.Gh=n.SHA384_IV[12]|0,this.Gl=n.SHA384_IV[13]|0,this.Hh=n.SHA384_IV[14]|0,this.Hl=n.SHA384_IV[15]|0}}Xe.SHA384=x;const S=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),A=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class E extends b{constructor(){super(28),this.Ah=S[0]|0,this.Al=S[1]|0,this.Bh=S[2]|0,this.Bl=S[3]|0,this.Ch=S[4]|0,this.Cl=S[5]|0,this.Dh=S[6]|0,this.Dl=S[7]|0,this.Eh=S[8]|0,this.El=S[9]|0,this.Fh=S[10]|0,this.Fl=S[11]|0,this.Gh=S[12]|0,this.Gl=S[13]|0,this.Hh=S[14]|0,this.Hl=S[15]|0}}Xe.SHA512_224=E;class R extends b{constructor(){super(32),this.Ah=A[0]|0,this.Al=A[1]|0,this.Bh=A[2]|0,this.Bl=A[3]|0,this.Ch=A[4]|0,this.Cl=A[5]|0,this.Dh=A[6]|0,this.Dl=A[7]|0,this.Eh=A[8]|0,this.El=A[9]|0,this.Fh=A[10]|0,this.Fl=A[11]|0,this.Gh=A[12]|0,this.Gl=A[13]|0,this.Hh=A[14]|0,this.Hl=A[15]|0}}return Xe.SHA512_256=R,Xe.sha256=(0,e.createHasher)(()=>new a),Xe.sha224=(0,e.createHasher)(()=>new u),Xe.sha512=(0,e.createHasher)(()=>new b),Xe.sha384=(0,e.createHasher)(()=>new x),Xe.sha512_256=(0,e.createHasher)(()=>new R),Xe.sha512_224=(0,e.createHasher)(()=>new E),Xe}var Q1;function BC(){if(Q1)return er;Q1=1,Object.defineProperty(er,"__esModule",{value:!0}),er.sha224=er.SHA224=er.sha256=er.SHA256=void 0;const n=UC();return er.SHA256=n.SHA256,er.sha256=n.sha256,er.SHA224=n.SHA224,er.sha224=n.sha224,er}var kg,$1;function HC(){if($1)return kg;$1=1;function n(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),s=0;s<e.length;s++)e[s]=255;for(var r=0;r<t.length;r++){var a=t.charAt(r),u=a.charCodeAt(0);if(e[u]!==255)throw new TypeError(a+" is ambiguous");e[u]=r}var h=t.length,p=t.charAt(0),m=Math.log(h)/Math.log(256),_=Math.log(256)/Math.log(h);function g(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var A=0,E=0,R=0,z=S.length;R!==z&&S[R]===0;)R++,A++;for(var O=(z-R)*_+1>>>0,Q=new Uint8Array(O);R!==z;){for(var N=S[R],j=0,Y=O-1;(N!==0||j<E)&&Y!==-1;Y--,j++)N+=256*Q[Y]>>>0,Q[Y]=N%h>>>0,N=N/h>>>0;if(N!==0)throw new Error("Non-zero carry");E=j,R++}for(var G=O-E;G!==O&&Q[G]===0;)G++;for(var Z=p.repeat(A);G<O;++G)Z+=t.charAt(Q[G]);return Z}function b(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;for(var A=0,E=0,R=0;S[A]===p;)E++,A++;for(var z=(S.length-A)*m+1>>>0,O=new Uint8Array(z);S[A];){var Q=S.charCodeAt(A);if(Q>255)return;var N=e[Q];if(N===255)return;for(var j=0,Y=z-1;(N!==0||j<R)&&Y!==-1;Y--,j++)N+=h*O[Y]>>>0,O[Y]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");R=j,A++}for(var G=z-R;G!==z&&O[G]===0;)G++;for(var Z=new Uint8Array(E+(z-G)),F=E;G!==z;)Z[F++]=O[G++];return Z}function x(S){var A=b(S);if(A)return A;throw new Error("Non-base"+h+" character")}return{encode:g,decodeUnsafe:b,decode:x}}return kg=n,kg}var Og,K1;function VC(){return K1||(K1=1,Og=HC()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),Og}var Dg,J1;function jC(){if(J1)return Dg;J1=1;var n=VC();return Dg=function(t){function e(u){var h=Uint8Array.from(u),p=t(h),m=h.length+4,_=new Uint8Array(m);return _.set(h,0),_.set(p.subarray(0,4),h.length),n.encode(_,m)}function s(u){var h=u.slice(0,-4),p=u.slice(-4),m=t(h);if(!(p[0]^m[0]|p[1]^m[1]|p[2]^m[2]|p[3]^m[3]))return h}function r(u){var h=n.decodeUnsafe(u);if(h)return s(h)}function a(u){var h=n.decode(u),p=s(h);if(!p)throw new Error("Invalid checksum");return p}return{encode:e,decode:a,decodeUnsafe:r}},Dg}var Rg,tx;function qC(){if(tx)return Rg;tx=1;var{sha256:n}=BC(),t=jC();function e(s){return n(n(s))}return Rg=t(e),Rg}var GC=qC();const ef=wy(GC),ZC=n=>Array.from(n,t=>t.toString(16).padStart(2,"0")).join(""),bp="automerge:",WC=n=>{const[t,e,...s]=n.split("#");if(s.length>0)throw new Error("Invalid URL: contains multiple heads sections");const r=new RegExp(`^${bp}(\\w+)$`),[,a]=t.match(r)||[],u=a,h=v2(u);if(!h)throw new Error("Invalid document URL: "+n);if(e===void 0)return{binaryDocumentId:h,documentId:u};const p=e===""?[]:e.split("|"),m=p.map(_=>{try{return ZC(ef.decode(_))}catch{throw new Error(`Invalid head in URL: ${_}`)}});return{binaryDocumentId:h,hexHeads:m,documentId:u,heads:p}},g2=n=>{if(n instanceof Uint8Array||typeof n=="string")return bp+(n instanceof Uint8Array?ex(n):n);const{documentId:t,heads:e=void 0}=n;if(t===void 0)throw new Error("Invalid documentId: "+t);const s=t instanceof Uint8Array?ex(t):t;let r=`${bp}${s}`;return e!==void 0&&(e.forEach(a=>{try{ef.decode(a)}catch{throw new Error(`Invalid head: ${a}`)}}),r+="#"+e.join("|")),r},FC=n=>YC(n)?n:y2(n)?g2({documentId:n}):XC(n)?QC(n):void 0,YC=n=>{if(typeof n!="string"||!n||!n.startsWith(bp))return!1;try{const{documentId:t,heads:e}=WC(n);return!(!y2(t)||e&&!e.every(s=>{try{return ef.decode(s),!0}catch{return!1}}))}catch{return!1}},y2=n=>typeof n!="string"?!1:v2(n)!==void 0,XC=n=>typeof n=="string"&&by(n),v2=n=>ef.decodeUnsafe(n),ex=n=>ef.encode(n),QC=n=>{if(!by(n))return;const t=IC(n);return g2({documentId:t})},nx=new Map;function $C(n,{suspense:t}={suspense:!1}){const e=DC(),s=zt.useRef(),[r,a]=zt.useState();let u=n&&r&&r.url===FC(n)?r:void 0;if(n&&!u){const p=e.findWithProgress(n);p.state==="ready"&&(u=p.handle)}let h=n?nx.get(n):void 0;if(!h&&n){s.current?.abort(),s.current=new AbortController;const p=e.find(n,{signal:s.current.signal});h=OC(p),nx.set(n,h)}return zt.useEffect(()=>{u||t||!h||h.promise.then(p=>{a(p)}).catch(()=>{a(void 0)})},[u,t,h]),u||!t||!h?u:h.read()}function KC(n,t={suspense:!1}){const e=$C(n,t),[s,r]=zt.useState(()=>e?.doc()),[a,u]=zt.useState();zt.useEffect(()=>{r(e?.doc())},[e]),zt.useEffect(()=>{if(!e)return;const p=()=>r(e.doc()),m=()=>{u(new Error(`Document ${n} was deleted`))};return e.on("change",p),e.on("delete",m),()=>{e.removeListener("change",p),e.removeListener("delete",m)}},[e,n]);const h=zt.useCallback((p,m)=>{e.change(p,m)},[e]);if(a)throw a;return s?[s,h]:[void 0,()=>{}]}var Ig={exports:{}},ix;function JC(){return ix||(ix=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function r(p,m,_){this.fn=p,this.context=m,this.once=_||!1}function a(p,m,_,g,b){if(typeof _!="function")throw new TypeError("The listener must be a function");var x=new r(_,g||p,b),S=e?e+m:m;return p._events[S]?p._events[S].fn?p._events[S]=[p._events[S],x]:p._events[S].push(x):(p._events[S]=x,p._eventsCount++),p}function u(p,m){--p._eventsCount===0?p._events=new s:delete p._events[m]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var m=[],_,g;if(this._eventsCount===0)return m;for(g in _=this._events)t.call(_,g)&&m.push(e?g.slice(1):g);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(_)):m},h.prototype.listeners=function(m){var _=e?e+m:m,g=this._events[_];if(!g)return[];if(g.fn)return[g.fn];for(var b=0,x=g.length,S=new Array(x);b<x;b++)S[b]=g[b].fn;return S},h.prototype.listenerCount=function(m){var _=e?e+m:m,g=this._events[_];return g?g.fn?1:g.length:0},h.prototype.emit=function(m,_,g,b,x,S){var A=e?e+m:m;if(!this._events[A])return!1;var E=this._events[A],R=arguments.length,z,O;if(E.fn){switch(E.once&&this.removeListener(m,E.fn,void 0,!0),R){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,_),!0;case 3:return E.fn.call(E.context,_,g),!0;case 4:return E.fn.call(E.context,_,g,b),!0;case 5:return E.fn.call(E.context,_,g,b,x),!0;case 6:return E.fn.call(E.context,_,g,b,x,S),!0}for(O=1,z=new Array(R-1);O<R;O++)z[O-1]=arguments[O];E.fn.apply(E.context,z)}else{var Q=E.length,N;for(O=0;O<Q;O++)switch(E[O].once&&this.removeListener(m,E[O].fn,void 0,!0),R){case 1:E[O].fn.call(E[O].context);break;case 2:E[O].fn.call(E[O].context,_);break;case 3:E[O].fn.call(E[O].context,_,g);break;case 4:E[O].fn.call(E[O].context,_,g,b);break;default:if(!z)for(N=1,z=new Array(R-1);N<R;N++)z[N-1]=arguments[N];E[O].fn.apply(E[O].context,z)}}return!0},h.prototype.on=function(m,_,g){return a(this,m,_,g,!1)},h.prototype.once=function(m,_,g){return a(this,m,_,g,!0)},h.prototype.removeListener=function(m,_,g,b){var x=e?e+m:m;if(!this._events[x])return this;if(!_)return u(this,x),this;var S=this._events[x];if(S.fn)S.fn===_&&(!b||S.once)&&(!g||S.context===g)&&u(this,x);else{for(var A=0,E=[],R=S.length;A<R;A++)(S[A].fn!==_||b&&!S[A].once||g&&S[A].context!==g)&&E.push(S[A]);E.length?this._events[x]=E.length===1?E[0]:E:u(this,x)}return this},h.prototype.removeAllListeners=function(m){var _;return m?(_=e?e+m:m,this._events[_]&&u(this,_)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,n.exports=h})(Ig)),Ig.exports}var tL=JC();const eL=wy(tL);new eL;const Yp=Symbol.for("_am_meta"),Ph=Symbol.for("_am_trace"),zh=Symbol.for("_am_objectId"),xy=Symbol.for("_am_isProxy"),b2=Symbol.for("_am_clearCache"),nL=Symbol.for("_am_uint"),iL=Symbol.for("_am_int"),sL=Symbol.for("_am_f64"),w2=Symbol.for("_am_counter"),x2=Symbol.for("_am_immutableString");let rL=class{constructor(t){this.value=t||0,Reflect.defineProperty(this,w2,{value:!0})}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}increment(t){throw new Error("Counters should not be incremented outside of a change callback")}decrement(t){throw new Error("Counters should not be decremented outside of a change callback")}},oL=class extends rL{constructor(t,e,s,r,a){super(t),this.context=e,this.path=s,this.objectId=r,this.key=a}increment(t){return t=typeof t=="number"?t:1,this.context.increment(this.objectId,this.key,t),this.value+=t,this.value}decrement(t){return this.increment(typeof t=="number"?-t:-1)}};function aL(n,t,e,s,r){return new oL(n,t,e,s,r)}var S2;let lL=class{constructor(t){this[S2]=!0,this.val=t}toString(){return this.val}toJSON(){return this.val}};S2=x2;function zr(n){if(typeof n=="string"&&/^[0-9]+$/.test(n)&&(n=parseInt(n,10)),typeof n!="number")return n;if(n<0||isNaN(n)||n===1/0||n===-1/0)throw new RangeError("A list index must be positive, but you passed "+n);return n}function Bi(n,t){const{context:e,objectId:s,path:r}=n,a=e.getWithType(s,t);if(a===null)return;const u=a[0],h=a[1];switch(u){case void 0:return;case"map":return Qp(e,h,[...r,t]);case"list":return $p(e,h,[...r,t]);case"text":return e.text(h);case"str":return new lL(h);case"uint":return h;case"int":return h;case"f64":return h;case"boolean":return h;case"null":return null;case"bytes":return h;case"timestamp":return h;case"counter":return aL(h,e,r,s,t);default:throw RangeError(`datatype ${u} unimplemented`)}}function wp(n,t,e){const s=typeof n;switch(s){case"object":if(n==null)return[null,"null"];if(n[nL])return[n.value,"uint"];if(n[iL])return[n.value,"int"];if(n[sL])return[n.value,"f64"];if(n[w2])return[n.value,"counter"];if(n instanceof Date)return[n.getTime(),"timestamp"];if(hL(n))return[n.toString(),"str"];if(n instanceof Uint8Array)return[n,"bytes"];if(n instanceof Array)return[n,"list"];if(Object.prototype.toString.call(n)==="[object Object]")return[n,"map"];throw Xp(n,e)?new RangeError("Cannot create a reference to an existing document object"):new RangeError(`Cannot assign unknown object: ${n}`);case"boolean":return[n,"boolean"];case"number":return Number.isInteger(n)?[n,"int"]:[n,"f64"];case"string":return[n,"text"];case"undefined":throw new RangeError([`Cannot assign undefined value at ${sx(t)}, `,"because `undefined` is not a valid JSON data type. ","You might consider setting the property's value to `null`, ","or using `delete` to remove it altogether."].join(""));default:throw new RangeError([`Cannot assign ${s} value at ${sx(t)}. `,"All JSON primitive datatypes (object, array, string, number, boolean, null) ",`are supported in an Automerge document; ${s} values are not. `].join(""))}}function Xp(n,t){var e,s;return n instanceof Date?!1:!!(n&&((s=(e=n[Yp])===null||e===void 0?void 0:e.handle)===null||s===void 0?void 0:s.__wbg_ptr)===t.__wbg_ptr)}const cL={get(n,t){const{context:e,objectId:s,cache:r}=n;return t===Symbol.toStringTag?n[Symbol.toStringTag]:t===zh?s:t===xy?!0:t===Ph?n.trace:t===Yp?{handle:e}:(r[t]||(r[t]=Bi(n,t)),r[t])},set(n,t,e){const{context:s,objectId:r,path:a}=n;if(n.cache={},Xp(e,s))throw new RangeError("Cannot create a reference to an existing document object");if(t===Ph)return n.trace=e,!0;if(t===b2)return!0;const[u,h]=wp(e,[...a,t],s);switch(h){case"list":{const p=s.putObject(r,t,[]),m=$p(s,p,[...a,t]);for(let _=0;_<u.length;_++)m[_]=u[_];break}case"text":{s.putObject(r,t,u);break}case"map":{const p=s.putObject(r,t,{}),m=Qp(s,p,[...a,t]);for(const _ in u)m[_]=u[_];break}default:s.put(r,t,u,h)}return!0},deleteProperty(n,t){const{context:e,objectId:s}=n;return n.cache={},e.delete(s,t),!0},has(n,t){return this.get(n,t)!==void 0},getOwnPropertyDescriptor(n,t){const e=this.get(n,t);if(typeof e<"u")return{configurable:!0,enumerable:!0,value:e}},ownKeys(n){const{context:t,objectId:e}=n,s=t.keys(e);return[...new Set(s)]}},T2={get(n,t){const{context:e,objectId:s}=n;return t=zr(t),t===Symbol.hasInstance?r=>Array.isArray(r):t===Symbol.toStringTag?n[Symbol.toStringTag]:t===zh?s:t===xy?!0:t===Ph?n.trace:t===Yp?{handle:e}:t==="length"?e.length(s):typeof t=="number"?Bi(n,t):Sy(n)[t]},set(n,t,e){const{context:s,objectId:r,path:a}=n;if(t=zr(t),Xp(e,s))throw new RangeError("Cannot create a reference to an existing document object");if(t===b2)return!0;if(t===Ph)return n.trace=e,!0;if(typeof t=="string")throw new RangeError("list index must be a number");const[u,h]=wp(e,[...a,t],s);switch(h){case"list":{let p;t>=s.length(r)?p=s.insertObject(r,t,[]):p=s.putObject(r,t,[]),$p(s,p,[...a,t]).splice(0,0,...u);break}case"text":{t>=s.length(r)?s.insertObject(r,t,u):s.putObject(r,t,u);break}case"map":{let p;t>=s.length(r)?p=s.insertObject(r,t,{}):p=s.putObject(r,t,{});const m=Qp(s,p,[...a,t]);for(const _ in u)m[_]=u[_];break}default:t>=s.length(r)?s.insert(r,t,u,h):s.put(r,t,u,h)}return!0},deleteProperty(n,t){const{context:e,objectId:s}=n;t=zr(t);const r=e.get(s,t);if(r!=null&&r[0]=="counter")throw new TypeError("Unsupported operation: deleting a counter from a list");return e.delete(s,t),!0},has(n,t){const{context:e,objectId:s}=n;return t=zr(t),typeof t=="number"?t<e.length(s):t==="length"},getOwnPropertyDescriptor(n,t){const{context:e,objectId:s}=n;return t==="length"?{writable:!0,value:e.length(s)}:t===zh?{configurable:!1,enumerable:!1,value:s}:(t=zr(t),{configurable:!0,enumerable:!0,value:Bi(n,t)})},getPrototypeOf(n){return Object.getPrototypeOf(n)},ownKeys(){const n=[];return n.push("length"),n}};Object.assign({},T2,{get(n,t){const{context:e,objectId:s}=n;return t=zr(t),t===Symbol.hasInstance?r=>Array.isArray(r):t===Symbol.toStringTag?n[Symbol.toStringTag]:t===zh?s:t===xy?!0:t===Ph?n.trace:t===Yp?{handle:e}:t==="length"?e.length(s):typeof t=="number"?Bi(n,t):uL(n)[t]||Sy(n)[t]},getPrototypeOf(){return Object.getPrototypeOf(new Text)}});function Qp(n,t,e){const s={context:n,objectId:t,path:e||[],cache:{}},r={};return Object.assign(r,s),new Proxy(r,cL)}function $p(n,t,e){const s={context:n,objectId:t,path:e||[],cache:{}},r=[];return Object.assign(r,s),new Proxy(r,T2)}function Sy(n){const{context:t,objectId:e,path:s}=n;return{at(a){return Bi(n,a)},deleteAt(a,u){return typeof u=="number"?t.splice(e,a,u):t.delete(e,a),this},fill(a,u,h){const[p,m]=wp(a,[...s,u],t),_=t.length(e);u=zr(u||0),h=zr(h||_);for(let g=u;g<Math.min(h,_);g++)m==="list"||m==="map"||m==="text"?t.putObject(e,g,p):t.put(e,g,p,m);return this},indexOf(a,u=0){const h=t.length(e);for(let p=u;p<h;p++){const m=t.getWithType(e,p);if(!m)continue;const[_,g]=m;if(!["map","list","text"].includes(_)){if(g===a)return p;continue}if(_==="text"&&typeof a=="string"&&a===Bi(n,p)||a[zh]===g)return p}return-1},insertAt(a,...u){return this.splice(a,0,...u),this},pop(){const a=t.length(e);if(a==0)return;const u=Bi(n,a-1);return t.delete(e,a-1),u},push(...a){const u=t.length(e);return this.splice(u,0,...a),t.length(e)},shift(){if(t.length(e)==0)return;const a=Bi(n,0);return t.delete(e,0),a},splice(a,u,...h){a=zr(a),typeof u!="number"&&(u=t.length(e)-a),u=zr(u);for(const _ of h)if(Xp(_,t))throw new RangeError("Cannot create a reference to an existing document object");const p=[];for(let _=0;_<u;_++){const g=Bi(n,a);g!==void 0&&p.push(g),t.delete(e,a)}const m=h.map((_,g)=>{try{return wp(_,[...s],t)}catch(b){throw b instanceof RangeError?new RangeError(`${b.message} (at index ${g} in the input)`):b}});for(const[_,g]of m){switch(g){case"list":{const b=t.insertObject(e,a,[]);$p(t,b,[...s,a]).splice(0,0,..._);break}case"text":{t.insertObject(e,a,_);break}case"map":{const b=t.insertObject(e,a,{}),x=Qp(t,b,[...s,a]);for(const S in _)x[S]=_[S];break}default:t.insert(e,a,_,g)}a+=1}return p},unshift(...a){return this.splice(0,0,...a),t.length(e)},entries(){let a=0;return{next:()=>{const h=Bi(n,a);return h===void 0?{value:void 0,done:!0}:{value:[a++,h],done:!1}},[Symbol.iterator](){return this}}},keys(){let a=0;const u=t.length(e);return{next:()=>a<u?{value:a++,done:!1}:{value:void 0,done:!0},[Symbol.iterator](){return this}}},values(){let a=0;return{next:()=>{const h=Bi(n,a++);return h===void 0?{value:void 0,done:!0}:{value:h,done:!1}},[Symbol.iterator](){return this}}},toArray(){const a=[];let u;do u=Bi(n,a.length),u!==void 0&&a.push(u);while(u!==void 0);return a},map(a){return this.toArray().map(a)},toString(){return this.toArray().toString()},toLocaleString(){return this.toArray().toLocaleString()},forEach(a){return this.toArray().forEach(a)},concat(a){return this.toArray().concat(a)},every(a){return this.toArray().every(a)},filter(a){return this.toArray().filter(a)},find(a){let u=0;for(const h of this){if(a(h,u))return h;u+=1}},findIndex(a){let u=0;for(const h of this){if(a(h,u))return u;u+=1}return-1},includes(a){return this.find(u=>u===a)!==void 0},join(a){return this.toArray().join(a)},reduce(a,u){return this.toArray().reduce(a,u)},reduceRight(a,u){return this.toArray().reduceRight(a,u)},lastIndexOf(a,u=1/0){return this.toArray().lastIndexOf(a,u)},slice(a,u){return this.toArray().slice(a,u)},some(a){let u=0;for(const h of this){if(a(h,u))return!0;u+=1}return!1},[Symbol.iterator]:function*(){let a=0,u=Bi(n,a);for(;u!==void 0;)yield u,a+=1,u=Bi(n,a)}}}function uL(n){const{context:t,objectId:e}=n;return{set(r,a){return this[r]=a},get(r){return this[r]},toString(){return t.text(e).replace(//g,"")},toSpans(){const r=[];let a="";const u=t.length(e);for(let h=0;h<u;h++){const p=this[h];typeof p=="string"?a+=p:(a.length>0&&(r.push(a),a=""),r.push(p))}return a.length>0&&r.push(a),r},toJSON(){return this.toString()},indexOf(r,a=0){return t.text(e).indexOf(r,a)},insertAt(r,...a){a.every(u=>typeof u=="string")?t.splice(e,r,0,a.join("")):Sy(n).insertAt(r,...a)}}}function sx(n){const t=n.map(e=>{if(typeof e=="number")return e.toString();if(typeof e=="string")return e.replace(/~/g,"~0").replace(/\//g,"~1")});return n.length===0?"":"/"+t.join("/")}function hL(n){return typeof n=="object"&&n!==null&&Object.prototype.hasOwnProperty.call(n,x2)}let A2;const Ng=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}};Ng.encodeInto;const fL=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&fL.decode();typeof FinalizationRegistry>"u"||new FinalizationRegistry(n=>A2.__wbg_automerge_free(n>>>0,1));typeof FinalizationRegistry>"u"||new FinalizationRegistry(n=>A2.__wbg_syncstate_free(n>>>0,1));var jd={exports:{}},Pg,rx;function dL(){if(rx)return Pg;rx=1;var n=1e3,t=n*60,e=t*60,s=e*24,r=s*7,a=s*365.25;Pg=function(_,g){g=g||{};var b=typeof _;if(b==="string"&&_.length>0)return u(_);if(b==="number"&&isFinite(_))return g.long?p(_):h(_);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(_))};function u(_){if(_=String(_),!(_.length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(_);if(g){var b=parseFloat(g[1]),x=(g[2]||"ms").toLowerCase();switch(x){case"years":case"year":case"yrs":case"yr":case"y":return b*a;case"weeks":case"week":case"w":return b*r;case"days":case"day":case"d":return b*s;case"hours":case"hour":case"hrs":case"hr":case"h":return b*e;case"minutes":case"minute":case"mins":case"min":case"m":return b*t;case"seconds":case"second":case"secs":case"sec":case"s":return b*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function h(_){var g=Math.abs(_);return g>=s?Math.round(_/s)+"d":g>=e?Math.round(_/e)+"h":g>=t?Math.round(_/t)+"m":g>=n?Math.round(_/n)+"s":_+"ms"}function p(_){var g=Math.abs(_);return g>=s?m(_,g,s,"day"):g>=e?m(_,g,e,"hour"):g>=t?m(_,g,t,"minute"):g>=n?m(_,g,n,"second"):_+" ms"}function m(_,g,b,x){var S=g>=b*1.5;return Math.round(_/b)+" "+x+(S?"s":"")}return Pg}var zg,ox;function pL(){if(ox)return zg;ox=1;function n(t){s.debug=s,s.default=s,s.coerce=m,s.disable=h,s.enable=a,s.enabled=p,s.humanize=dL(),s.destroy=_,Object.keys(t).forEach(g=>{s[g]=t[g]}),s.names=[],s.skips=[],s.formatters={};function e(g){let b=0;for(let x=0;x<g.length;x++)b=(b<<5)-b+g.charCodeAt(x),b|=0;return s.colors[Math.abs(b)%s.colors.length]}s.selectColor=e;function s(g){let b,x=null,S,A;function E(...R){if(!E.enabled)return;const z=E,O=Number(new Date),Q=O-(b||O);z.diff=Q,z.prev=b,z.curr=O,b=O,R[0]=s.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let N=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(Y,G)=>{if(Y==="%%")return"%";N++;const Z=s.formatters[G];if(typeof Z=="function"){const F=R[N];Y=Z.call(z,F),R.splice(N,1),N--}return Y}),s.formatArgs.call(z,R),(z.log||s.log).apply(z,R)}return E.namespace=g,E.useColors=s.useColors(),E.color=s.selectColor(g),E.extend=r,E.destroy=s.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>x!==null?x:(S!==s.namespaces&&(S=s.namespaces,A=s.enabled(g)),A),set:R=>{x=R}}),typeof s.init=="function"&&s.init(E),E}function r(g,b){const x=s(this.namespace+(typeof b>"u"?":":b)+g);return x.log=this.log,x}function a(g){s.save(g),s.namespaces=g,s.names=[],s.skips=[];const b=(typeof g=="string"?g:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const x of b)x[0]==="-"?s.skips.push(x.slice(1)):s.names.push(x)}function u(g,b){let x=0,S=0,A=-1,E=0;for(;x<g.length;)if(S<b.length&&(b[S]===g[x]||b[S]==="*"))b[S]==="*"?(A=S,E=x,S++):(x++,S++);else if(A!==-1)S=A+1,E++,x=E;else return!1;for(;S<b.length&&b[S]==="*";)S++;return S===b.length}function h(){const g=[...s.names,...s.skips.map(b=>"-"+b)].join(",");return s.enable(""),g}function p(g){for(const b of s.skips)if(u(g,b))return!1;for(const b of s.names)if(u(g,b))return!0;return!1}function m(g){return g instanceof Error?g.stack||g.message:g}function _(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}return zg=n,zg}var ax;function mL(){return ax||(ax=1,(function(n,t){t.formatArgs=s,t.save=r,t.load=a,t.useColors=e,t.storage=u(),t.destroy=(()=>{let p=!1;return()=>{p||(p=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function e(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let p;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(p=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(p[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function s(p){if(p[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+p[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const m="color: "+this.color;p.splice(1,0,m,"color: inherit");let _=0,g=0;p[0].replace(/%[a-zA-Z%]/g,b=>{b!=="%%"&&(_++,b==="%c"&&(g=_))}),p.splice(g,0,m)}t.log=console.debug||console.log||(()=>{});function r(p){try{p?t.storage.setItem("debug",p):t.storage.removeItem("debug")}catch{}}function a(){let p;try{p=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!p&&typeof process<"u"&&"env"in process&&(p=kC.DEBUG),p}function u(){try{return localStorage}catch{}}n.exports=pL()(t);const{formatters:h}=n.exports;h.j=function(p){try{return JSON.stringify(p)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}})(jd,jd.exports)),jd.exports}var _L=mL();const gL=wy(_L);let R0;try{R0=new TextDecoder}catch{}let qt,Rl,bt=0;const yL=105,vL=57342,bL=57343,lx=57337,cx=6,Pc={};let wh=11281e4,xo=1681e4,ve={},vn,xp,Sp=0,Uh=0,Gn,Os,zn=[],I0=[],ji,vi,Eh,ux={useRecords:!1,mapsAsObjects:!0},Bh=!1,E2=2;try{new Function("")}catch{E2=1/0}let C2=class N0{constructor(t){if(t&&((t.keyMap||t._keyMap)&&!t.useRecords&&(t.useRecords=!1,t.mapsAsObjects=!0),t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.getStructures&&(t.getShared=t.getStructures),t.getShared&&!t.structures&&((t.structures=[]).uninitialized=!0),t.keyMap)){this.mapKey=new Map;for(let[e,s]of Object.entries(t.keyMap))this.mapKey.set(s,e)}Object.assign(this,t)}decodeKey(t){return this.keyMap&&this.mapKey.get(t)||t}encodeKey(t){return this.keyMap&&this.keyMap.hasOwnProperty(t)?this.keyMap[t]:t}encodeKeys(t){if(!this._keyMap)return t;let e=new Map;for(let[s,r]of Object.entries(t))e.set(this._keyMap.hasOwnProperty(s)?this._keyMap[s]:s,r);return e}decodeKeys(t){if(!this._keyMap||t.constructor.name!="Map")return t;if(!this._mapKey){this._mapKey=new Map;for(let[s,r]of Object.entries(this._keyMap))this._mapKey.set(r,s)}let e={};return t.forEach((s,r)=>e[Ds(this._mapKey.has(r)?this._mapKey.get(r):r)]=s),e}mapDecode(t,e){let s=this.decode(t);return this._keyMap&&s.constructor.name==="Array"?s.map(r=>this.decodeKeys(r)):s}decode(t,e){if(qt)return O2(()=>(B0(),this?this.decode(t,e):N0.prototype.decode.call(ux,t,e)));Rl=e>-1?e:t.length,bt=0,Uh=0,xp=null,Gn=null,qt=t;try{vi=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(s){throw qt=null,t instanceof Uint8Array?s:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof N0){if(ve=this,ji=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return vn=this.structures,qd();(!vn||vn.length>0)&&(vn=[])}else ve=ux,(!vn||vn.length>0)&&(vn=[]),ji=null;return qd()}decodeMultiple(t,e){let s,r=0;try{let a=t.length;Bh=!0;let u=this?this.decode(t,a):Ey.decode(t,a);if(e){if(e(u)===!1)return;for(;bt<a;)if(r=bt,e(qd())===!1)return}else{for(s=[u];bt<a;)r=bt,s.push(qd());return s}}catch(a){throw a.lastPosition=r,a.values=s,a}finally{Bh=!1,B0()}}};function qd(){try{let n=Se();if(Gn){if(bt>=Gn.postBundlePosition){let t=new Error("Unexpected bundle position");throw t.incomplete=!0,t}bt=Gn.postBundlePosition,Gn=null}if(bt==Rl)vn=null,qt=null,Os&&(Os=null);else if(bt>Rl){let t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}else if(!Bh)throw new Error("Data read, but end of buffer not reached");return n}catch(n){throw B0(),(n instanceof RangeError||n.message.startsWith("Unexpected end of buffer"))&&(n.incomplete=!0),n}}function Se(){let n=qt[bt++],t=n>>5;if(n=n&31,n>23)switch(n){case 24:n=qt[bt++];break;case 25:if(t==7)return TL();n=vi.getUint16(bt),bt+=2;break;case 26:if(t==7){let e=vi.getFloat32(bt);if(ve.useFloat32>2){let s=Ay[(qt[bt]&127)<<1|qt[bt+1]>>7];return bt+=4,(s*e+(e>0?.5:-.5)>>0)/s}return bt+=4,e}n=vi.getUint32(bt),bt+=4;break;case 27:if(t==7){let e=vi.getFloat64(bt);return bt+=8,e}if(t>1){if(vi.getUint32(bt)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");n=vi.getUint32(bt+4)}else ve.int64AsNumber?(n=vi.getUint32(bt)*4294967296,n+=vi.getUint32(bt+4)):n=vi.getBigUint64(bt);bt+=8;break;case 31:switch(t){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let e=[],s,r=0;for(;(s=Se())!=Pc;){if(r>=wh)throw new Error(`Array length exceeds ${wh}`);e[r++]=s}return t==4?e:t==3?e.join(""):Buffer.concat(e);case 5:let a;if(ve.mapsAsObjects){let u={},h=0;if(ve.keyMap)for(;(a=Se())!=Pc;){if(h++>=xo)throw new Error(`Property count exceeds ${xo}`);u[Ds(ve.decodeKey(a))]=Se()}else for(;(a=Se())!=Pc;){if(h++>=xo)throw new Error(`Property count exceeds ${xo}`);u[Ds(a)]=Se()}return u}else{Eh&&(ve.mapsAsObjects=!0,Eh=!1);let u=new Map;if(ve.keyMap){let h=0;for(;(a=Se())!=Pc;){if(h++>=xo)throw new Error(`Map size exceeds ${xo}`);u.set(ve.decodeKey(a),Se())}}else{let h=0;for(;(a=Se())!=Pc;){if(h++>=xo)throw new Error(`Map size exceeds ${xo}`);u.set(a,Se())}}return u}case 7:return Pc;default:throw new Error("Invalid major type for indefinite length "+t)}default:throw new Error("Unknown token "+n)}switch(t){case 0:return n;case 1:return~n;case 2:return SL(n);case 3:if(Uh>=bt)return xp.slice(bt-Sp,(bt+=n)-Sp);if(Uh==0&&Rl<140&&n<32){let r=n<16?L2(n):xL(n);if(r!=null)return r}return wL(n);case 4:if(n>=wh)throw new Error(`Array length exceeds ${wh}`);let e=new Array(n);for(let r=0;r<n;r++)e[r]=Se();return e;case 5:if(n>=xo)throw new Error(`Map size exceeds ${wh}`);if(ve.mapsAsObjects){let r={};if(ve.keyMap)for(let a=0;a<n;a++)r[Ds(ve.decodeKey(Se()))]=Se();else for(let a=0;a<n;a++)r[Ds(Se())]=Se();return r}else{Eh&&(ve.mapsAsObjects=!0,Eh=!1);let r=new Map;if(ve.keyMap)for(let a=0;a<n;a++)r.set(ve.decodeKey(Se()),Se());else for(let a=0;a<n;a++)r.set(Se(),Se());return r}case 6:if(n>=lx){let r=vn[n&8191];if(r)return r.read||(r.read=P0(r)),r.read();if(n<65536){if(n==bL){let a=Yc(),u=Se(),h=Se();U0(u,h);let p={};if(ve.keyMap)for(let m=2;m<a;m++){let _=ve.decodeKey(h[m-2]);p[Ds(_)]=Se()}else for(let m=2;m<a;m++){let _=h[m-2];p[Ds(_)]=Se()}return p}else if(n==vL){let a=Yc(),u=Se();for(let h=2;h<a;h++)U0(u++,Se());return Se()}else if(n==lx)return kL();if(ve.getShared&&(Ty(),r=vn[n&8191],r))return r.read||(r.read=P0(r)),r.read()}}let s=zn[n];if(s)return s.handlesRead?s(Se):s(Se());{let r=Se();for(let a=0;a<I0.length;a++){let u=I0[a](n,r);if(u!==void 0)return u}return new zl(r,n)}case 7:switch(n){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:let r=(ji||Tl())[n];if(r!==void 0)return r;throw new Error("Unknown token "+n)}default:if(isNaN(n)){let r=new Error("Unexpected end of CBOR data");throw r.incomplete=!0,r}throw new Error("Unknown CBOR token "+n)}}const hx=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function P0(n){if(!n)throw new Error("Structure is required in record definition");function t(){let e=qt[bt++];if(e=e&31,e>23)switch(e){case 24:e=qt[bt++];break;case 25:e=vi.getUint16(bt),bt+=2;break;case 26:e=vi.getUint32(bt),bt+=4;break;default:throw new Error("Expected array header, but got "+qt[bt-1])}let s=this.compiledReader;for(;s;){if(s.propertyCount===e)return s(Se);s=s.next}if(this.slowReads++>=E2){let a=this.length==e?this:this.slice(0,e);return s=ve.keyMap?new Function("r","return {"+a.map(u=>ve.decodeKey(u)).map(u=>hx.test(u)?Ds(u)+":r()":"["+JSON.stringify(u)+"]:r()").join(",")+"}"):new Function("r","return {"+a.map(u=>hx.test(u)?Ds(u)+":r()":"["+JSON.stringify(u)+"]:r()").join(",")+"}"),this.compiledReader&&(s.next=this.compiledReader),s.propertyCount=e,this.compiledReader=s,s(Se)}let r={};if(ve.keyMap)for(let a=0;a<e;a++)r[Ds(ve.decodeKey(this[a]))]=Se();else for(let a=0;a<e;a++)r[Ds(this[a])]=Se();return r}return n.slowReads=0,t}function Ds(n){if(typeof n=="string")return n==="__proto__"?"__proto_":n;if(typeof n=="number"||typeof n=="boolean"||typeof n=="bigint")return n.toString();if(n==null)return n+"";throw new Error("Invalid property name type "+typeof n)}let wL=z0;function z0(n){let t;if(n<16&&(t=L2(n)))return t;if(n>64&&R0)return R0.decode(qt.subarray(bt,bt+=n));const e=bt+n,s=[];for(t="";bt<e;){const r=qt[bt++];if((r&128)===0)s.push(r);else if((r&224)===192){const a=qt[bt++]&63;s.push((r&31)<<6|a)}else if((r&240)===224){const a=qt[bt++]&63,u=qt[bt++]&63;s.push((r&31)<<12|a<<6|u)}else if((r&248)===240){const a=qt[bt++]&63,u=qt[bt++]&63,h=qt[bt++]&63;let p=(r&7)<<18|a<<12|u<<6|h;p>65535&&(p-=65536,s.push(p>>>10&1023|55296),p=56320|p&1023),s.push(p)}else s.push(r);s.length>=4096&&(t+=$n.apply(String,s),s.length=0)}return s.length>0&&(t+=$n.apply(String,s)),t}let $n=String.fromCharCode;function xL(n){let t=bt,e=new Array(n);for(let s=0;s<n;s++){const r=qt[bt++];if((r&128)>0){bt=t;return}e[s]=r}return $n.apply(String,e)}function L2(n){if(n<4)if(n<2){if(n===0)return"";{let t=qt[bt++];if((t&128)>1){bt-=1;return}return $n(t)}}else{let t=qt[bt++],e=qt[bt++];if((t&128)>0||(e&128)>0){bt-=2;return}if(n<3)return $n(t,e);let s=qt[bt++];if((s&128)>0){bt-=3;return}return $n(t,e,s)}else{let t=qt[bt++],e=qt[bt++],s=qt[bt++],r=qt[bt++];if((t&128)>0||(e&128)>0||(s&128)>0||(r&128)>0){bt-=4;return}if(n<6){if(n===4)return $n(t,e,s,r);{let a=qt[bt++];if((a&128)>0){bt-=5;return}return $n(t,e,s,r,a)}}else if(n<8){let a=qt[bt++],u=qt[bt++];if((a&128)>0||(u&128)>0){bt-=6;return}if(n<7)return $n(t,e,s,r,a,u);let h=qt[bt++];if((h&128)>0){bt-=7;return}return $n(t,e,s,r,a,u,h)}else{let a=qt[bt++],u=qt[bt++],h=qt[bt++],p=qt[bt++];if((a&128)>0||(u&128)>0||(h&128)>0||(p&128)>0){bt-=8;return}if(n<10){if(n===8)return $n(t,e,s,r,a,u,h,p);{let m=qt[bt++];if((m&128)>0){bt-=9;return}return $n(t,e,s,r,a,u,h,p,m)}}else if(n<12){let m=qt[bt++],_=qt[bt++];if((m&128)>0||(_&128)>0){bt-=10;return}if(n<11)return $n(t,e,s,r,a,u,h,p,m,_);let g=qt[bt++];if((g&128)>0){bt-=11;return}return $n(t,e,s,r,a,u,h,p,m,_,g)}else{let m=qt[bt++],_=qt[bt++],g=qt[bt++],b=qt[bt++];if((m&128)>0||(_&128)>0||(g&128)>0||(b&128)>0){bt-=12;return}if(n<14){if(n===12)return $n(t,e,s,r,a,u,h,p,m,_,g,b);{let x=qt[bt++];if((x&128)>0){bt-=13;return}return $n(t,e,s,r,a,u,h,p,m,_,g,b,x)}}else{let x=qt[bt++],S=qt[bt++];if((x&128)>0||(S&128)>0){bt-=14;return}if(n<15)return $n(t,e,s,r,a,u,h,p,m,_,g,b,x,S);let A=qt[bt++];if((A&128)>0){bt-=15;return}return $n(t,e,s,r,a,u,h,p,m,_,g,b,x,S,A)}}}}}function SL(n){return ve.copyBuffers?Uint8Array.prototype.slice.call(qt,bt,bt+=n):qt.subarray(bt,bt+=n)}let M2=new Float32Array(1),Gd=new Uint8Array(M2.buffer,0,4);function TL(){let n=qt[bt++],t=qt[bt++],e=(n&127)>>2;if(e===31)return t||n&3?NaN:n&128?-1/0:1/0;if(e===0){let s=((n&3)<<8|t)/16777216;return n&128?-s:s}return Gd[3]=n&128|(e>>1)+56,Gd[2]=(n&7)<<5|t>>3,Gd[1]=t<<5,Gd[0]=0,M2[0]}new Array(4096);let zl=class{constructor(t,e){this.value=t,this.tag=e}};zn[0]=n=>new Date(n);zn[1]=n=>new Date(Math.round(n*1e3));zn[2]=n=>{let t=BigInt(0);for(let e=0,s=n.byteLength;e<s;e++)t=BigInt(n[e])+(t<<BigInt(8));return t};zn[3]=n=>BigInt(-1)-zn[2](n);zn[4]=n=>+(n[1]+"e"+n[0]);zn[5]=n=>n[1]*Math.exp(n[0]*Math.log(2));const U0=(n,t)=>{n=n-57344;let e=vn[n];e&&e.isShared&&((vn.restoreStructures||(vn.restoreStructures=[]))[n]=e),vn[n]=t,t.read=P0(t)};zn[yL]=n=>{let t=n.length,e=n[1];U0(n[0],e);let s={};for(let r=2;r<t;r++){let a=e[r-2];s[Ds(a)]=n[r]}return s};zn[14]=n=>Gn?Gn[0].slice(Gn.position0,Gn.position0+=n):new zl(n,14);zn[15]=n=>Gn?Gn[1].slice(Gn.position1,Gn.position1+=n):new zl(n,15);let AL={Error,RegExp};zn[27]=n=>(AL[n[0]]||Error)(n[1],n[2]);const k2=n=>{if(qt[bt++]!=132){let e=new Error("Packed values structure must be followed by a 4 element array");throw qt.length<bt&&(e.incomplete=!0),e}let t=n();if(!t||!t.length){let e=new Error("Packed values structure must be followed by a 4 element array");throw e.incomplete=!0,e}return ji=ji?t.concat(ji.slice(t.length)):t,ji.prefixes=n(),ji.suffixes=n(),n()};k2.handlesRead=!0;zn[51]=k2;zn[cx]=n=>{if(!ji)if(ve.getShared)Ty();else return new zl(n,cx);if(typeof n=="number")return ji[16+(n>=0?2*n:-2*n-1)];let t=new Error("No support for non-integer packed references yet");throw n===void 0&&(t.incomplete=!0),t};zn[28]=n=>{Os||(Os=new Map,Os.id=0);let t=Os.id++,e=bt,s=qt[bt],r;s>>5==4?r=[]:r={};let a={target:r};Os.set(t,a);let u=n();return a.used?(Object.getPrototypeOf(r)!==Object.getPrototypeOf(u)&&(bt=e,r=u,Os.set(t,{target:r}),u=n()),Object.assign(r,u)):(a.target=u,u)};zn[28].handlesRead=!0;zn[29]=n=>{let t=Os.get(n);return t.used=!0,t.target};zn[258]=n=>new Set(n);(zn[259]=n=>(ve.mapsAsObjects&&(ve.mapsAsObjects=!1,Eh=!0),n())).handlesRead=!0;function zc(n,t){return typeof n=="string"?n+t:n instanceof Array?n.concat(t):Object.assign({},n,t)}function Tl(){if(!ji)if(ve.getShared)Ty();else throw new Error("No packed values available");return ji}const EL=1399353956;I0.push((n,t)=>{if(n>=225&&n<=255)return zc(Tl().prefixes[n-224],t);if(n>=28704&&n<=32767)return zc(Tl().prefixes[n-28672],t);if(n>=1879052288&&n<=2147483647)return zc(Tl().prefixes[n-1879048192],t);if(n>=216&&n<=223)return zc(t,Tl().suffixes[n-216]);if(n>=27647&&n<=28671)return zc(t,Tl().suffixes[n-27639]);if(n>=1811940352&&n<=1879048191)return zc(t,Tl().suffixes[n-1811939328]);if(n==EL)return{packedValues:ji,structures:vn.slice(0),version:t};if(n==55799)return t});const CL=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,fx=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],LL=[64,68,69,70,71,72,77,78,79,85,86];for(let n=0;n<fx.length;n++)ML(fx[n],LL[n]);function ML(n,t){let e="get"+n.name.slice(0,-5),s;typeof n=="function"?s=n.BYTES_PER_ELEMENT:n=null;for(let r=0;r<2;r++){if(!r&&s==1)continue;let a=s==2?1:s==4?2:s==8?3:0;zn[r?t:t-4]=s==1||r==CL?u=>{if(!n)throw new Error("Could not find typed array for code "+t);return!ve.copyBuffers&&(s===1||s===2&&!(u.byteOffset&1)||s===4&&!(u.byteOffset&3)||s===8&&!(u.byteOffset&7))?new n(u.buffer,u.byteOffset,u.byteLength>>a):new n(Uint8Array.prototype.slice.call(u,0).buffer)}:u=>{if(!n)throw new Error("Could not find typed array for code "+t);let h=new DataView(u.buffer,u.byteOffset,u.byteLength),p=u.length>>a,m=new n(p),_=h[e];for(let g=0;g<p;g++)m[g]=_.call(h,g<<a,r);return m}}}function kL(){let n=Yc(),t=bt+Se();for(let s=2;s<n;s++){let r=Yc();bt+=r}let e=bt;return bt=t,Gn=[z0(Yc()),z0(Yc())],Gn.position0=0,Gn.position1=0,Gn.postBundlePosition=bt,bt=e,Se()}function Yc(){let n=qt[bt++]&31;if(n>23)switch(n){case 24:n=qt[bt++];break;case 25:n=vi.getUint16(bt),bt+=2;break;case 26:n=vi.getUint32(bt),bt+=4;break}return n}function Ty(){if(ve.getShared){let n=O2(()=>(qt=null,ve.getShared()))||{},t=n.structures||[];ve.sharedVersion=n.version,ji=ve.sharedValues=n.packedValues,vn===!0?ve.structures=vn=t:vn.splice.apply(vn,[0,t.length].concat(t))}}function O2(n){let t=Rl,e=bt,s=Sp,r=Uh,a=xp,u=Os,h=Gn,p=new Uint8Array(qt.slice(0,Rl)),m=vn,_=ve,g=Bh,b=n();return Rl=t,bt=e,Sp=s,Uh=r,xp=a,Os=u,Gn=h,qt=p,Bh=g,vn=m,ve=_,vi=new DataView(qt.buffer,qt.byteOffset,qt.byteLength),b}function B0(){qt=null,Os=null,vn=null}const Ay=new Array(147);for(let n=0;n<256;n++)Ay[n]=+("1e"+Math.floor(45.15-n*.30103));let Ey=new C2({useRecords:!1});Ey.decode;Ey.decodeMultiple;let op;try{op=new TextEncoder}catch{}let H0,D2;const Kp=typeof globalThis=="object"&&globalThis.Buffer,nf=typeof Kp<"u",Ug=nf?Kp.allocUnsafeSlow:Uint8Array,dx=nf?Kp:Uint8Array,px=256,mx=nf?4294967296:2144337920;let Bg,ct,sn,nt=0,wa,jn=null;const OL=61440,DL=/[\u0080-\uFFFF]/,rs=Symbol("record-id");let RL=class extends C2{constructor(t){super(t),this.offset=0;let e,s,r,a,u;t=t||{};let h=dx.prototype.utf8Write?function(k,X,W){return ct.utf8Write(k,X,W)}:op&&op.encodeInto?function(k,X){return op.encodeInto(k,ct.subarray(X)).written}:!1,p=this,m=t.structures||t.saveStructures,_=t.maxSharedStructures;if(_==null&&(_=m?128:0),_>8190)throw new Error("Maximum maxSharedStructure is 8190");let g=t.sequential;g&&(_=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let b,x,S=t.sharedValues,A;if(S){A=Object.create(null);for(let k=0,X=S.length;k<X;k++)A[S[k]]=k}let E=[],R=0,z=0;this.mapEncode=function(k,X){return this._keyMap&&!this._mapped&&k.constructor.name==="Array"&&(k=k.map(W=>this.encodeKeys(W))),this.encode(k,X)},this.encode=function(k,X){if(ct||(ct=new Ug(8192),sn=new DataView(ct.buffer,0,8192),nt=0),wa=ct.length-10,wa-nt<2048?(ct=new Ug(ct.length),sn=new DataView(ct.buffer,0,ct.length),wa=ct.length-10,nt=0):X===yx&&(nt=nt+7&2147483640),e=nt,p.useSelfDescribedHeader&&(sn.setUint32(nt,3654940416),nt+=3),u=p.structuredClone?new Map:null,p.bundleStrings&&typeof k!="string"?(jn=[],jn.size=1/0):jn=null,s=p.structures,s){if(s.uninitialized){let P=p.getShared()||{};p.structures=s=P.structures||[],p.sharedVersion=P.version;let U=p.sharedValues=P.packedValues;if(U){A={};for(let K=0,D=U.length;K<D;K++)A[U[K]]=K}}let W=s.length;if(W>_&&!g&&(W=_),!s.transitions){s.transitions=Object.create(null);for(let P=0;P<W;P++){let U=s[P];if(!U)continue;let K,D=s.transitions;for(let V=0,I=U.length;V<I;V++){D[rs]===void 0&&(D[rs]=P);let q=U[V];K=D[q],K||(K=D[q]=Object.create(null)),D=K}D[rs]=P|1048576}}g||(s.nextId=W)}if(r&&(r=!1),a=s||[],x=A,t.pack){let W=new Map;if(W.values=[],W.encoder=p,W.maxValues=t.maxPrivatePackedValues||(A?16:1/0),W.objectMap=A||!1,W.samplingPackedValues=b,ap(k,W),W.values.length>0){ct[nt++]=216,ct[nt++]=51,Ir(4);let P=W.values;O(P),Ir(0),Ir(0),x=Object.create(A||null);for(let U=0,K=P.length;U<K;U++)x[P[U]]=U}}Bg=X&Vg;try{if(Bg)return;if(O(k),jn&&gx(e,O),p.offset=nt,u&&u.idsToInsert){nt+=u.idsToInsert.length*2,nt>wa&&N(nt),p.offset=nt;let W=PL(ct.subarray(e,nt),u.idsToInsert);return u=null,W}return X&yx?(ct.start=e,ct.end=nt,ct):ct.subarray(e,nt)}finally{if(s){if(z<10&&z++,s.length>_&&(s.length=_),R>1e4)s.transitions=null,z=0,R=0,E.length>0&&(E=[]);else if(E.length>0&&!g){for(let W=0,P=E.length;W<P;W++)E[W][rs]=void 0;E=[]}}if(r&&p.saveShared){p.structures.length>_&&(p.structures=p.structures.slice(0,_));let W=ct.subarray(e,nt);return p.updateSharedData()===!1?p.encode(k):W}X&zL&&(nt=e)}},this.findCommonStringsToPack=()=>(b=new Map,A||(A=Object.create(null)),k=>{let X=k&&k.threshold||4,W=this.pack?k.maxPrivatePackedValues||16:0;S||(S=this.sharedValues=[]);for(let[P,U]of b)U.count>X&&(A[P]=W++,S.push(P),r=!0);for(;this.saveShared&&this.updateSharedData()===!1;);b=null});const O=k=>{nt>wa&&(ct=N(nt));var X=typeof k,W;if(X==="string"){if(x){let D=x[k];if(D>=0){D<16?ct[nt++]=D+224:(ct[nt++]=198,D&1?O(15-D>>1):O(D-16>>1));return}else if(b&&!t.pack){let V=b.get(k);V?V.count++:b.set(k,{count:1})}}let P=k.length;if(jn&&P>=4&&P<1024){if((jn.size+=P)>OL){let V,I=(jn[0]?jn[0].length*3+jn[1].length:0)+10;nt+I>wa&&(ct=N(nt+I)),ct[nt++]=217,ct[nt++]=223,ct[nt++]=249,ct[nt++]=jn.position?132:130,ct[nt++]=26,V=nt-e,nt+=4,jn.position&&gx(e,O),jn=["",""],jn.size=0,jn.position=V}let D=DL.test(k);jn[D?0:1]+=k,ct[nt++]=D?206:207,O(P);return}let U;P<32?U=1:P<256?U=2:P<65536?U=3:U=5;let K=P*3;if(nt+K>wa&&(ct=N(nt+K)),P<64||!h){let D,V,I,q=nt+U;for(D=0;D<P;D++)V=k.charCodeAt(D),V<128?ct[q++]=V:V<2048?(ct[q++]=V>>6|192,ct[q++]=V&63|128):(V&64512)===55296&&((I=k.charCodeAt(D+1))&64512)===56320?(V=65536+((V&1023)<<10)+(I&1023),D++,ct[q++]=V>>18|240,ct[q++]=V>>12&63|128,ct[q++]=V>>6&63|128,ct[q++]=V&63|128):(ct[q++]=V>>12|224,ct[q++]=V>>6&63|128,ct[q++]=V&63|128);W=q-nt-U}else W=h(k,nt+U,K);W<24?ct[nt++]=96|W:W<256?(U<2&&ct.copyWithin(nt+2,nt+1,nt+1+W),ct[nt++]=120,ct[nt++]=W):W<65536?(U<3&&ct.copyWithin(nt+3,nt+2,nt+2+W),ct[nt++]=121,ct[nt++]=W>>8,ct[nt++]=W&255):(U<5&&ct.copyWithin(nt+5,nt+3,nt+3+W),ct[nt++]=122,sn.setUint32(nt,W),nt+=4),nt+=W}else if(X==="number")if(!this.alwaysUseFloat&&k>>>0===k)k<24?ct[nt++]=k:k<256?(ct[nt++]=24,ct[nt++]=k):k<65536?(ct[nt++]=25,ct[nt++]=k>>8,ct[nt++]=k&255):(ct[nt++]=26,sn.setUint32(nt,k),nt+=4);else if(!this.alwaysUseFloat&&k>>0===k)k>=-24?ct[nt++]=31-k:k>=-256?(ct[nt++]=56,ct[nt++]=~k):k>=-65536?(ct[nt++]=57,sn.setUint16(nt,~k),nt+=2):(ct[nt++]=58,sn.setUint32(nt,~k),nt+=4);else{let P;if((P=this.useFloat32)>0&&k<4294967296&&k>=-2147483648){ct[nt++]=250,sn.setFloat32(nt,k);let U;if(P<4||(U=k*Ay[(ct[nt]&127)<<1|ct[nt+1]>>7])>>0===U){nt+=4;return}else nt--}ct[nt++]=251,sn.setFloat64(nt,k),nt+=8}else if(X==="object")if(!k)ct[nt++]=246;else{if(u){let U=u.get(k);if(U){if(ct[nt++]=216,ct[nt++]=29,ct[nt++]=25,!U.references){let K=u.idsToInsert||(u.idsToInsert=[]);U.references=[],K.push(U)}U.references.push(nt-e),nt+=2;return}else u.set(k,{offset:nt-e})}let P=k.constructor;if(P===Object)Q(k);else if(P===Array){W=k.length,W<24?ct[nt++]=128|W:Ir(W);for(let U=0;U<W;U++)O(k[U])}else if(P===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(ct[nt++]=217,ct[nt++]=1,ct[nt++]=3),W=k.size,W<24?ct[nt++]=160|W:W<256?(ct[nt++]=184,ct[nt++]=W):W<65536?(ct[nt++]=185,ct[nt++]=W>>8,ct[nt++]=W&255):(ct[nt++]=186,sn.setUint32(nt,W),nt+=4),p.keyMap)for(let[U,K]of k)O(p.encodeKey(U)),O(K);else for(let[U,K]of k)O(U),O(K);else{for(let U=0,K=H0.length;U<K;U++){let D=D2[U];if(k instanceof D){let V=H0[U],I=V.tag;I==null&&(I=V.getTag&&V.getTag.call(this,k)),I<24?ct[nt++]=192|I:I<256?(ct[nt++]=216,ct[nt++]=I):I<65536?(ct[nt++]=217,ct[nt++]=I>>8,ct[nt++]=I&255):I>-1&&(ct[nt++]=218,sn.setUint32(nt,I),nt+=4),V.encode.call(this,k,O,N);return}}if(k[Symbol.iterator]){if(Bg){let U=new Error("Iterable should be serialized as iterator");throw U.iteratorNotHandled=!0,U}ct[nt++]=159;for(let U of k)O(U);ct[nt++]=255;return}if(k[Symbol.asyncIterator]||Hg(k)){let U=new Error("Iterable/blob should be serialized as iterator");throw U.iteratorNotHandled=!0,U}if(this.useToJSON&&k.toJSON){const U=k.toJSON();if(U!==k)return O(U)}Q(k)}}else if(X==="boolean")ct[nt++]=k?245:244;else if(X==="bigint"){if(k<BigInt(1)<<BigInt(64)&&k>=0)ct[nt++]=27,sn.setBigUint64(nt,k);else if(k>-(BigInt(1)<<BigInt(64))&&k<0)ct[nt++]=59,sn.setBigUint64(nt,-k-BigInt(1));else if(this.largeBigIntToFloat)ct[nt++]=251,sn.setFloat64(nt,Number(k));else{k>=BigInt(0)?ct[nt++]=194:(ct[nt++]=195,k=BigInt(-1)-k);let P=[];for(;k;)P.push(Number(k&BigInt(255))),k>>=BigInt(8);V0(new Uint8Array(P.reverse()),N);return}nt+=8}else if(X==="undefined")ct[nt++]=247;else throw new Error("Unknown type: "+X)},Q=this.useRecords===!1?this.variableMapSize?k=>{let X=Object.keys(k),W=Object.values(k),P=X.length;if(P<24?ct[nt++]=160|P:P<256?(ct[nt++]=184,ct[nt++]=P):P<65536?(ct[nt++]=185,ct[nt++]=P>>8,ct[nt++]=P&255):(ct[nt++]=186,sn.setUint32(nt,P),nt+=4),p.keyMap)for(let U=0;U<P;U++)O(p.encodeKey(X[U])),O(W[U]);else for(let U=0;U<P;U++)O(X[U]),O(W[U])}:k=>{ct[nt++]=185;let X=nt-e;nt+=2;let W=0;if(p.keyMap)for(let P in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(P))&&(O(p.encodeKey(P)),O(k[P]),W++);else for(let P in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(P))&&(O(P),O(k[P]),W++);ct[X+++e]=W>>8,ct[X+e]=W&255}:(k,X)=>{let W,P=a.transitions||(a.transitions=Object.create(null)),U=0,K=0,D,V;if(this.keyMap){V=Object.keys(k).map(q=>this.encodeKey(q)),K=V.length;for(let q=0;q<K;q++){let at=V[q];W=P[at],W||(W=P[at]=Object.create(null),U++),P=W}}else for(let q in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(q))&&(W=P[q],W||(P[rs]&1048576&&(D=P[rs]&65535),W=P[q]=Object.create(null),U++),P=W,K++);let I=P[rs];if(I!==void 0)I&=65535,ct[nt++]=217,ct[nt++]=I>>8|224,ct[nt++]=I&255;else if(V||(V=P.__keys__||(P.__keys__=Object.keys(k))),D===void 0?(I=a.nextId++,I||(I=0,a.nextId=1),I>=px&&(a.nextId=(I=_)+1)):I=D,a[I]=V,I<_){ct[nt++]=217,ct[nt++]=I>>8|224,ct[nt++]=I&255,P=a.transitions;for(let q=0;q<K;q++)(P[rs]===void 0||P[rs]&1048576)&&(P[rs]=I),P=P[V[q]];P[rs]=I|1048576,r=!0}else{if(P[rs]=I,sn.setUint32(nt,3655335680),nt+=3,U&&(R+=z*U),E.length>=px-_&&(E.shift()[rs]=void 0),E.push(P),Ir(K+2),O(57344+I),O(V),X)return;for(let q in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(q))&&O(k[q]);return}if(K<24?ct[nt++]=128|K:Ir(K),!X)for(let q in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(q))&&O(k[q])},N=k=>{let X;if(k>16777216){if(k-e>mx)throw new Error("Encoded buffer would be larger than maximum buffer size");X=Math.min(mx,Math.round(Math.max((k-e)*(k>67108864?1.25:2),4194304)/4096)*4096)}else X=(Math.max(k-e<<2,ct.length-1)>>12)+1<<12;let W=new Ug(X);return sn=new DataView(W.buffer,0,X),ct.copy?ct.copy(W,0,e,k):W.set(ct.slice(e,k)),nt-=e,e=0,wa=W.length-10,ct=W};let j=100,Y=1e3;this.encodeAsIterable=function(k,X){return $(k,X,G)},this.encodeAsAsyncIterable=function(k,X){return $(k,X,et)};function*G(k,X,W){let P=k.constructor;if(P===Object){let U=p.useRecords!==!1;U?Q(k,!0):_x(Object.keys(k).length,160);for(let K in k){let D=k[K];U||O(K),D&&typeof D=="object"?X[K]?yield*G(D,X[K]):yield*Z(D,X,K):O(D)}}else if(P===Array){let U=k.length;Ir(U);for(let K=0;K<U;K++){let D=k[K];D&&(typeof D=="object"||nt-e>j)?X.element?yield*G(D,X.element):yield*Z(D,X,"element"):O(D)}}else if(k[Symbol.iterator]&&!k.buffer){ct[nt++]=159;for(let U of k)U&&(typeof U=="object"||nt-e>j)?X.element?yield*G(U,X.element):yield*Z(U,X,"element"):O(U);ct[nt++]=255}else Hg(k)?(_x(k.size,64),yield ct.subarray(e,nt),yield k,F()):k[Symbol.asyncIterator]?(ct[nt++]=159,yield ct.subarray(e,nt),yield k,F(),ct[nt++]=255):O(k);W&&nt>e?yield ct.subarray(e,nt):nt-e>j&&(yield ct.subarray(e,nt),F())}function*Z(k,X,W){let P=nt-e;try{O(k),nt-e>j&&(yield ct.subarray(e,nt),F())}catch(U){if(U.iteratorNotHandled)X[W]={},nt=e+P,yield*G.call(this,k,X[W]);else throw U}}function F(){j=Y,p.encode(null,Vg)}function $(k,X,W){return X&&X.chunkThreshold?j=Y=X.chunkThreshold:j=100,k&&typeof k=="object"?(p.encode(null,Vg),W(k,p.iterateProperties||(p.iterateProperties={}),!0)):[p.encode(k)]}async function*et(k,X){for(let W of G(k,X,!0)){let P=W.constructor;if(P===dx||P===Uint8Array)yield W;else if(Hg(W)){let U=W.stream().getReader(),K;for(;!(K=await U.read()).done;)yield K.value}else if(W[Symbol.asyncIterator])for await(let U of W)F(),U?yield*et(U,X.async||(X.async={})):yield p.encode(U);else yield W}}}useBuffer(t){ct=t,sn=new DataView(ct.buffer,ct.byteOffset,ct.byteLength),nt=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let t=this.sharedVersion||0;this.sharedVersion=t+1;let e=this.structures.slice(0),s=new R2(e,this.sharedValues,this.sharedVersion),r=this.saveShared(s,a=>(a&&a.version||0)==t);return r===!1?(s=this.getShared()||{},this.structures=s.structures||[],this.sharedValues=s.packedValues,this.sharedVersion=s.version,this.structures.nextId=this.structures.length):e.forEach((a,u)=>this.structures[u]=a),r}};function _x(n,t){n<24?ct[nt++]=t|n:n<256?(ct[nt++]=t|24,ct[nt++]=n):n<65536?(ct[nt++]=t|25,ct[nt++]=n>>8,ct[nt++]=n&255):(ct[nt++]=t|26,sn.setUint32(nt,n),nt+=4)}let R2=class{constructor(t,e,s){this.structures=t,this.packedValues=e,this.version=s}};function Ir(n){n<24?ct[nt++]=128|n:n<256?(ct[nt++]=152,ct[nt++]=n):n<65536?(ct[nt++]=153,ct[nt++]=n>>8,ct[nt++]=n&255):(ct[nt++]=154,sn.setUint32(nt,n),nt+=4)}const IL=typeof Blob>"u"?function(){}:Blob;function Hg(n){if(n instanceof IL)return!0;let t=n[Symbol.toStringTag];return t==="Blob"||t==="File"}function ap(n,t){switch(typeof n){case"string":if(n.length>3){if(t.objectMap[n]>-1||t.values.length>=t.maxValues)return;let s=t.get(n);if(s)++s.count==2&&t.values.push(n);else if(t.set(n,{count:1}),t.samplingPackedValues){let r=t.samplingPackedValues.get(n);r?r.count++:t.samplingPackedValues.set(n,{count:1})}}break;case"object":if(n)if(n instanceof Array)for(let s=0,r=n.length;s<r;s++)ap(n[s],t);else{let s=!t.encoder.useRecords;for(var e in n)n.hasOwnProperty(e)&&(s&&ap(e,t),ap(n[e],t))}break;case"function":console.log(n)}}const NL=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;D2=[Date,Set,Error,RegExp,zl,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,R2];H0=[{tag:1,encode(n,t){let e=n.getTime()/1e3;(this.useTimestamp32||n.getMilliseconds()===0)&&e>=0&&e<4294967296?(ct[nt++]=26,sn.setUint32(nt,e),nt+=4):(ct[nt++]=251,sn.setFloat64(nt,e),nt+=8)}},{tag:258,encode(n,t){let e=Array.from(n);t(e)}},{tag:27,encode(n,t){t([n.name,n.message])}},{tag:27,encode(n,t){t(["RegExp",n.source,n.flags])}},{getTag(n){return n.tag},encode(n,t){t(n.value)}},{encode(n,t,e){V0(n,e)}},{getTag(n){if(n.constructor===Uint8Array&&(this.tagUint8Array||nf&&this.tagUint8Array!==!1))return 64},encode(n,t,e){V0(n,e)}},kr(68,1),kr(69,2),kr(70,4),kr(71,8),kr(72,1),kr(77,2),kr(78,4),kr(79,8),kr(85,4),kr(86,8),{encode(n,t){let e=n.packedValues||[],s=n.structures||[];if(e.values.length>0){ct[nt++]=216,ct[nt++]=51,Ir(4);let r=e.values;t(r),Ir(0),Ir(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let a=0,u=r.length;a<u;a++)packedObjectMap[r[a]]=a}if(s){sn.setUint32(nt,3655335424),nt+=3;let r=s.slice(0);r.unshift(57344),r.push(new zl(n.version,1399353956)),t(r)}else t(new zl(n.version,1399353956))}}];function kr(n,t){return!NL&&t>1&&(n-=4),{tag:n,encode:function(s,r){let a=s.byteLength,u=s.byteOffset||0,h=s.buffer||s;r(nf?Kp.from(h,u,a):new Uint8Array(h,u,a))}}}function V0(n,t){let e=n.byteLength;e<24?ct[nt++]=64+e:e<256?(ct[nt++]=88,ct[nt++]=e):e<65536?(ct[nt++]=89,ct[nt++]=e>>8,ct[nt++]=e&255):(ct[nt++]=90,sn.setUint32(nt,e),nt+=4),nt+e>=ct.length&&t(nt+e),ct.set(n.buffer?n:new Uint8Array(n),nt),nt+=e}function PL(n,t){let e,s=t.length*2,r=n.length-s;t.sort((a,u)=>a.offset>u.offset?1:-1);for(let a=0;a<t.length;a++){let u=t[a];u.id=a;for(let h of u.references)n[h++]=a>>8,n[h]=a&255}for(;e=t.pop();){let a=e.offset;n.copyWithin(a+s,a,r),s-=2;let u=a+s;n[u++]=216,n[u++]=28,r=a}return n}function gx(n,t){sn.setUint32(jn.position+n,nt-jn.position-n+1);let e=jn;jn=null,t(e[0]),t(e[1])}let Cy=new RL({useRecords:!1});Cy.encode;Cy.encodeAsIterable;Cy.encodeAsAsyncIterable;const yx=512,zL=1024,Vg=2048;new FinalizationRegistry(n=>n());var lp={exports:{}},UL=lp.exports,vx;function BL(){return vx||(vx=1,(function(n){(function(t,e){var s={};e(s);var r=s.default;for(var a in s)r[a]=s[a];n.exports=r})(UL,function(t){t.__esModule=!0,t.digestLength=32,t.blockSize=64;var e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(b,x,S,A,E){for(var R,z,O,Q,N,j,Y,G,Z,F,$,et,k;E>=64;){for(R=x[0],z=x[1],O=x[2],Q=x[3],N=x[4],j=x[5],Y=x[6],G=x[7],F=0;F<16;F++)$=A+F*4,b[F]=(S[$]&255)<<24|(S[$+1]&255)<<16|(S[$+2]&255)<<8|S[$+3]&255;for(F=16;F<64;F++)Z=b[F-2],et=(Z>>>17|Z<<15)^(Z>>>19|Z<<13)^Z>>>10,Z=b[F-15],k=(Z>>>7|Z<<25)^(Z>>>18|Z<<14)^Z>>>3,b[F]=(et+b[F-7]|0)+(k+b[F-16]|0);for(F=0;F<64;F++)et=(((N>>>6|N<<26)^(N>>>11|N<<21)^(N>>>25|N<<7))+(N&j^~N&Y)|0)+(G+(e[F]+b[F]|0)|0)|0,k=((R>>>2|R<<30)^(R>>>13|R<<19)^(R>>>22|R<<10))+(R&z^R&O^z&O)|0,G=Y,Y=j,j=N,N=Q+et|0,Q=O,O=z,z=R,R=et+k|0;x[0]+=R,x[1]+=z,x[2]+=O,x[3]+=Q,x[4]+=N,x[5]+=j,x[6]+=Y,x[7]+=G,A+=64,E-=64}return A}var r=(function(){function b(){this.digestLength=t.digestLength,this.blockSize=t.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return b.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},b.prototype.clean=function(){for(var x=0;x<this.buffer.length;x++)this.buffer[x]=0;for(var x=0;x<this.temp.length;x++)this.temp[x]=0;this.reset()},b.prototype.update=function(x,S){if(S===void 0&&(S=x.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var A=0;if(this.bytesHashed+=S,this.bufferLength>0){for(;this.bufferLength<64&&S>0;)this.buffer[this.bufferLength++]=x[A++],S--;this.bufferLength===64&&(s(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(S>=64&&(A=s(this.temp,this.state,x,A,S),S%=64);S>0;)this.buffer[this.bufferLength++]=x[A++],S--;return this},b.prototype.finish=function(x){if(!this.finished){var S=this.bytesHashed,A=this.bufferLength,E=S/536870912|0,R=S<<3,z=S%64<56?64:128;this.buffer[A]=128;for(var O=A+1;O<z-8;O++)this.buffer[O]=0;this.buffer[z-8]=E>>>24&255,this.buffer[z-7]=E>>>16&255,this.buffer[z-6]=E>>>8&255,this.buffer[z-5]=E>>>0&255,this.buffer[z-4]=R>>>24&255,this.buffer[z-3]=R>>>16&255,this.buffer[z-2]=R>>>8&255,this.buffer[z-1]=R>>>0&255,s(this.temp,this.state,this.buffer,0,z),this.finished=!0}for(var O=0;O<8;O++)x[O*4+0]=this.state[O]>>>24&255,x[O*4+1]=this.state[O]>>>16&255,x[O*4+2]=this.state[O]>>>8&255,x[O*4+3]=this.state[O]>>>0&255;return this},b.prototype.digest=function(){var x=new Uint8Array(this.digestLength);return this.finish(x),x},b.prototype._saveState=function(x){for(var S=0;S<this.state.length;S++)x[S]=this.state[S]},b.prototype._restoreState=function(x,S){for(var A=0;A<this.state.length;A++)this.state[A]=x[A];this.bytesHashed=S,this.finished=!1,this.bufferLength=0},b})();t.Hash=r;var a=(function(){function b(x){this.inner=new r,this.outer=new r,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var S=new Uint8Array(this.blockSize);if(x.length>this.blockSize)new r().update(x).finish(S).clean();else for(var A=0;A<x.length;A++)S[A]=x[A];for(var A=0;A<S.length;A++)S[A]^=54;this.inner.update(S);for(var A=0;A<S.length;A++)S[A]^=106;this.outer.update(S),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var A=0;A<S.length;A++)S[A]=0}return b.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},b.prototype.clean=function(){for(var x=0;x<this.istate.length;x++)this.ostate[x]=this.istate[x]=0;this.inner.clean(),this.outer.clean()},b.prototype.update=function(x){return this.inner.update(x),this},b.prototype.finish=function(x){return this.outer.finished?this.outer.finish(x):(this.inner.finish(x),this.outer.update(x,this.digestLength).finish(x)),this},b.prototype.digest=function(){var x=new Uint8Array(this.digestLength);return this.finish(x),x},b})();t.HMAC=a;function u(b){var x=new r().update(b),S=x.digest();return x.clean(),S}t.hash=u,t.default=u;function h(b,x){var S=new a(b).update(x),A=S.digest();return S.clean(),A}t.hmac=h;function p(b,x,S,A){var E=A[0];if(E===0)throw new Error("hkdf: cannot expand more");x.reset(),E>1&&x.update(b),S&&x.update(S),x.update(A),x.finish(b),A[0]++}var m=new Uint8Array(t.digestLength);function _(b,x,S,A){x===void 0&&(x=m),A===void 0&&(A=32);for(var E=new Uint8Array([1]),R=h(x,b),z=new a(R),O=new Uint8Array(z.digestLength),Q=O.length,N=new Uint8Array(A),j=0;j<A;j++)Q===O.length&&(p(O,z,S,E),Q=0),N[j]=O[Q++];return z.clean(),O.fill(0),E.fill(0),N}t.hkdf=_;function g(b,x,S,A){for(var E=new a(b),R=E.digestLength,z=new Uint8Array(4),O=new Uint8Array(R),Q=new Uint8Array(R),N=new Uint8Array(A),j=0;j*R<A;j++){var Y=j+1;z[0]=Y>>>24&255,z[1]=Y>>>16&255,z[2]=Y>>>8&255,z[3]=Y>>>0&255,E.reset(),E.update(x),E.update(z),E.finish(Q);for(var G=0;G<R;G++)O[G]=Q[G];for(var G=2;G<=S;G++){E.reset(),E.update(Q).finish(Q);for(var Z=0;Z<R;Z++)O[Z]^=Q[Z]}for(var G=0;G<R&&j*R+G<A;G++)N[j*R+G]=O[G]}for(var j=0;j<R;j++)O[j]=Q[j]=0;for(var j=0;j<4;j++)z[j]=0;return E.clean(),N}t.pbkdf2=g})})(lp)),lp.exports}BL();gL("automerge-repo:collectionsync");var Ch={exports:{}};var HL=Ch.exports,bx;function VL(){return bx||(bx=1,(function(n,t){(function(e,s){s(t)})(HL,(function(e){var s="1.9.4";function r(l){var f,y,T,C;for(y=1,T=arguments.length;y<T;y++){C=arguments[y];for(f in C)l[f]=C[f]}return l}var a=Object.create||(function(){function l(){}return function(f){return l.prototype=f,new l}})();function u(l,f){var y=Array.prototype.slice;if(l.bind)return l.bind.apply(l,y.call(arguments,1));var T=y.call(arguments,2);return function(){return l.apply(f,T.length?T.concat(y.call(arguments)):arguments)}}var h=0;function p(l){return"_leaflet_id"in l||(l._leaflet_id=++h),l._leaflet_id}function m(l,f,y){var T,C,B,J;return J=function(){T=!1,C&&(B.apply(y,C),C=!1)},B=function(){T?C=arguments:(l.apply(y,arguments),setTimeout(J,f),T=!0)},B}function _(l,f,y){var T=f[1],C=f[0],B=T-C;return l===T&&y?l:((l-C)%B+B)%B+C}function g(){return!1}function b(l,f){if(f===!1)return l;var y=Math.pow(10,f===void 0?6:f);return Math.round(l*y)/y}function x(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function S(l){return x(l).split(/\s+/)}function A(l,f){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?a(l.options):{});for(var y in f)l.options[y]=f[y];return l.options}function E(l,f,y){var T=[];for(var C in l)T.push(encodeURIComponent(y?C.toUpperCase():C)+"="+encodeURIComponent(l[C]));return(!f||f.indexOf("?")===-1?"?":"&")+T.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function z(l,f){return l.replace(R,function(y,T){var C=f[T];if(C===void 0)throw new Error("No value provided for variable "+y);return typeof C=="function"&&(C=C(f)),C})}var O=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function Q(l,f){for(var y=0;y<l.length;y++)if(l[y]===f)return y;return-1}var N="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function j(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var Y=0;function G(l){var f=+new Date,y=Math.max(0,16-(f-Y));return Y=f+y,window.setTimeout(l,y)}var Z=window.requestAnimationFrame||j("RequestAnimationFrame")||G,F=window.cancelAnimationFrame||j("CancelAnimationFrame")||j("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function $(l,f,y){if(y&&Z===G)l.call(f);else return Z.call(window,u(l,f))}function et(l){l&&F.call(window,l)}var k={__proto__:null,extend:r,create:a,bind:u,get lastId(){return h},stamp:p,throttle:m,wrapNum:_,falseFn:g,formatNum:b,trim:x,splitWords:S,setOptions:A,getParamString:E,template:z,isArray:O,indexOf:Q,emptyImageUrl:N,requestFn:Z,cancelFn:F,requestAnimFrame:$,cancelAnimFrame:et};function X(){}X.extend=function(l){var f=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},y=f.__super__=this.prototype,T=a(y);T.constructor=f,f.prototype=T;for(var C in this)Object.prototype.hasOwnProperty.call(this,C)&&C!=="prototype"&&C!=="__super__"&&(f[C]=this[C]);return l.statics&&r(f,l.statics),l.includes&&(W(l.includes),r.apply(null,[T].concat(l.includes))),r(T,l),delete T.statics,delete T.includes,T.options&&(T.options=y.options?a(y.options):{},r(T.options,l.options)),T._initHooks=[],T.callInitHooks=function(){if(!this._initHooksCalled){y.callInitHooks&&y.callInitHooks.call(this),this._initHooksCalled=!0;for(var B=0,J=T._initHooks.length;B<J;B++)T._initHooks[B].call(this)}},f},X.include=function(l){var f=this.prototype.options;return r(this.prototype,l),l.options&&(this.prototype.options=f,this.mergeOptions(l.options)),this},X.mergeOptions=function(l){return r(this.prototype.options,l),this},X.addInitHook=function(l){var f=Array.prototype.slice.call(arguments,1),y=typeof l=="function"?l:function(){this[l].apply(this,f)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(y),this};function W(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=O(l)?l:[l];for(var f=0;f<l.length;f++)l[f]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var P={on:function(l,f,y){if(typeof l=="object")for(var T in l)this._on(T,l[T],f);else{l=S(l);for(var C=0,B=l.length;C<B;C++)this._on(l[C],f,y)}return this},off:function(l,f,y){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var T in l)this._off(T,l[T],f);else{l=S(l);for(var C=arguments.length===1,B=0,J=l.length;B<J;B++)C?this._off(l[B]):this._off(l[B],f,y)}return this},_on:function(l,f,y,T){if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}if(this._listens(l,f,y)===!1){y===this&&(y=void 0);var C={fn:f,ctx:y};T&&(C.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(C)}},_off:function(l,f,y){var T,C,B;if(this._events&&(T=this._events[l],!!T)){if(arguments.length===1){if(this._firingCount)for(C=0,B=T.length;C<B;C++)T[C].fn=g;delete this._events[l];return}if(typeof f!="function"){console.warn("wrong listener type: "+typeof f);return}var J=this._listens(l,f,y);if(J!==!1){var ot=T[J];this._firingCount&&(ot.fn=g,this._events[l]=T=T.slice()),T.splice(J,1)}}},fire:function(l,f,y){if(!this.listens(l,y))return this;var T=r({},f,{type:l,target:this,sourceTarget:f&&f.sourceTarget||this});if(this._events){var C=this._events[l];if(C){this._firingCount=this._firingCount+1||1;for(var B=0,J=C.length;B<J;B++){var ot=C[B],ft=ot.fn;ot.once&&this.off(l,ft,ot.ctx),ft.call(ot.ctx||this,T)}this._firingCount--}}return y&&this._propagateEvent(T),this},listens:function(l,f,y,T){typeof l!="string"&&console.warn('"string" type argument expected');var C=f;typeof f!="function"&&(T=!!f,C=void 0,y=void 0);var B=this._events&&this._events[l];if(B&&B.length&&this._listens(l,C,y)!==!1)return!0;if(T){for(var J in this._eventParents)if(this._eventParents[J].listens(l,f,y,T))return!0}return!1},_listens:function(l,f,y){if(!this._events)return!1;var T=this._events[l]||[];if(!f)return!!T.length;y===this&&(y=void 0);for(var C=0,B=T.length;C<B;C++)if(T[C].fn===f&&T[C].ctx===y)return C;return!1},once:function(l,f,y){if(typeof l=="object")for(var T in l)this._on(T,l[T],f,!0);else{l=S(l);for(var C=0,B=l.length;C<B;C++)this._on(l[C],f,y,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[p(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[p(l)],this},_propagateEvent:function(l){for(var f in this._eventParents)this._eventParents[f].fire(l.type,r({layer:l.target,propagatedFrom:l.target},l),!0)}};P.addEventListener=P.on,P.removeEventListener=P.clearAllEventListeners=P.off,P.addOneTimeEventListener=P.once,P.fireEvent=P.fire,P.hasEventListeners=P.listens;var U=X.extend(P);function K(l,f,y){this.x=y?Math.round(l):l,this.y=y?Math.round(f):f}var D=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(l){return this.clone()._add(V(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(V(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new K(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new K(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=D(this.x),this.y=D(this.y),this},distanceTo:function(l){l=V(l);var f=l.x-this.x,y=l.y-this.y;return Math.sqrt(f*f+y*y)},equals:function(l){return l=V(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=V(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+b(this.x)+", "+b(this.y)+")"}};function V(l,f,y){return l instanceof K?l:O(l)?new K(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new K(l.x,l.y):new K(l,f,y)}function I(l,f){if(l)for(var y=f?[l,f]:l,T=0,C=y.length;T<C;T++)this.extend(y[T])}I.prototype={extend:function(l){var f,y;if(!l)return this;if(l instanceof K||typeof l[0]=="number"||"x"in l)f=y=V(l);else if(l=q(l),f=l.min,y=l.max,!f||!y)return this;return!this.min&&!this.max?(this.min=f.clone(),this.max=y.clone()):(this.min.x=Math.min(f.x,this.min.x),this.max.x=Math.max(y.x,this.max.x),this.min.y=Math.min(f.y,this.min.y),this.max.y=Math.max(y.y,this.max.y)),this},getCenter:function(l){return V((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return V(this.min.x,this.max.y)},getTopRight:function(){return V(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var f,y;return typeof l[0]=="number"||l instanceof K?l=V(l):l=q(l),l instanceof I?(f=l.min,y=l.max):f=y=l,f.x>=this.min.x&&y.x<=this.max.x&&f.y>=this.min.y&&y.y<=this.max.y},intersects:function(l){l=q(l);var f=this.min,y=this.max,T=l.min,C=l.max,B=C.x>=f.x&&T.x<=y.x,J=C.y>=f.y&&T.y<=y.y;return B&&J},overlaps:function(l){l=q(l);var f=this.min,y=this.max,T=l.min,C=l.max,B=C.x>f.x&&T.x<y.x,J=C.y>f.y&&T.y<y.y;return B&&J},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var f=this.min,y=this.max,T=Math.abs(f.x-y.x)*l,C=Math.abs(f.y-y.y)*l;return q(V(f.x-T,f.y-C),V(y.x+T,y.y+C))},equals:function(l){return l?(l=q(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function q(l,f){return!l||l instanceof I?l:new I(l,f)}function at(l,f){if(l)for(var y=f?[l,f]:l,T=0,C=y.length;T<C;T++)this.extend(y[T])}at.prototype={extend:function(l){var f=this._southWest,y=this._northEast,T,C;if(l instanceof vt)T=l,C=l;else if(l instanceof at){if(T=l._southWest,C=l._northEast,!T||!C)return this}else return l?this.extend(gt(l)||mt(l)):this;return!f&&!y?(this._southWest=new vt(T.lat,T.lng),this._northEast=new vt(C.lat,C.lng)):(f.lat=Math.min(T.lat,f.lat),f.lng=Math.min(T.lng,f.lng),y.lat=Math.max(C.lat,y.lat),y.lng=Math.max(C.lng,y.lng)),this},pad:function(l){var f=this._southWest,y=this._northEast,T=Math.abs(f.lat-y.lat)*l,C=Math.abs(f.lng-y.lng)*l;return new at(new vt(f.lat-T,f.lng-C),new vt(y.lat+T,y.lng+C))},getCenter:function(){return new vt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new vt(this.getNorth(),this.getWest())},getSouthEast:function(){return new vt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof vt||"lat"in l?l=gt(l):l=mt(l);var f=this._southWest,y=this._northEast,T,C;return l instanceof at?(T=l.getSouthWest(),C=l.getNorthEast()):T=C=l,T.lat>=f.lat&&C.lat<=y.lat&&T.lng>=f.lng&&C.lng<=y.lng},intersects:function(l){l=mt(l);var f=this._southWest,y=this._northEast,T=l.getSouthWest(),C=l.getNorthEast(),B=C.lat>=f.lat&&T.lat<=y.lat,J=C.lng>=f.lng&&T.lng<=y.lng;return B&&J},overlaps:function(l){l=mt(l);var f=this._southWest,y=this._northEast,T=l.getSouthWest(),C=l.getNorthEast(),B=C.lat>f.lat&&T.lat<y.lat,J=C.lng>f.lng&&T.lng<y.lng;return B&&J},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,f){return l?(l=mt(l),this._southWest.equals(l.getSouthWest(),f)&&this._northEast.equals(l.getNorthEast(),f)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function mt(l,f){return l instanceof at?l:new at(l,f)}function vt(l,f,y){if(isNaN(l)||isNaN(f))throw new Error("Invalid LatLng object: ("+l+", "+f+")");this.lat=+l,this.lng=+f,y!==void 0&&(this.alt=+y)}vt.prototype={equals:function(l,f){if(!l)return!1;l=gt(l);var y=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return y<=(f===void 0?1e-9:f)},toString:function(l){return"LatLng("+b(this.lat,l)+", "+b(this.lng,l)+")"},distanceTo:function(l){return Mt.distance(this,gt(l))},wrap:function(){return Mt.wrapLatLng(this)},toBounds:function(l){var f=180*l/40075017,y=f/Math.cos(Math.PI/180*this.lat);return mt([this.lat-f,this.lng-y],[this.lat+f,this.lng+y])},clone:function(){return new vt(this.lat,this.lng,this.alt)}};function gt(l,f,y){return l instanceof vt?l:O(l)&&typeof l[0]!="object"?l.length===3?new vt(l[0],l[1],l[2]):l.length===2?new vt(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new vt(l.lat,"lng"in l?l.lng:l.lon,l.alt):f===void 0?null:new vt(l,f,y)}var Dt={latLngToPoint:function(l,f){var y=this.projection.project(l),T=this.scale(f);return this.transformation._transform(y,T)},pointToLatLng:function(l,f){var y=this.scale(f),T=this.transformation.untransform(l,y);return this.projection.unproject(T)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var f=this.projection.bounds,y=this.scale(l),T=this.transformation.transform(f.min,y),C=this.transformation.transform(f.max,y);return new I(T,C)},infinite:!1,wrapLatLng:function(l){var f=this.wrapLng?_(l.lng,this.wrapLng,!0):l.lng,y=this.wrapLat?_(l.lat,this.wrapLat,!0):l.lat,T=l.alt;return new vt(y,f,T)},wrapLatLngBounds:function(l){var f=l.getCenter(),y=this.wrapLatLng(f),T=f.lat-y.lat,C=f.lng-y.lng;if(T===0&&C===0)return l;var B=l.getSouthWest(),J=l.getNorthEast(),ot=new vt(B.lat-T,B.lng-C),ft=new vt(J.lat-T,J.lng-C);return new at(ot,ft)}},Mt=r({},Dt,{wrapLng:[-180,180],R:6371e3,distance:function(l,f){var y=Math.PI/180,T=l.lat*y,C=f.lat*y,B=Math.sin((f.lat-l.lat)*y/2),J=Math.sin((f.lng-l.lng)*y/2),ot=B*B+Math.cos(T)*Math.cos(C)*J*J,ft=2*Math.atan2(Math.sqrt(ot),Math.sqrt(1-ot));return this.R*ft}}),oe=6378137,Me={R:oe,MAX_LATITUDE:85.0511287798,project:function(l){var f=Math.PI/180,y=this.MAX_LATITUDE,T=Math.max(Math.min(y,l.lat),-y),C=Math.sin(T*f);return new K(this.R*l.lng*f,this.R*Math.log((1+C)/(1-C))/2)},unproject:function(l){var f=180/Math.PI;return new vt((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*f,l.x*f/this.R)},bounds:(function(){var l=oe*Math.PI;return new I([-l,-l],[l,l])})()};function Ke(l,f,y,T){if(O(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=f,this._c=y,this._d=T}Ke.prototype={transform:function(l,f){return this._transform(l.clone(),f)},_transform:function(l,f){return f=f||1,l.x=f*(this._a*l.x+this._b),l.y=f*(this._c*l.y+this._d),l},untransform:function(l,f){return f=f||1,new K((l.x/f-this._b)/this._a,(l.y/f-this._d)/this._c)}};function tn(l,f,y,T){return new Ke(l,f,y,T)}var Fn=r({},Mt,{code:"EPSG:3857",projection:Me,transformation:(function(){var l=.5/(Math.PI*Me.R);return tn(l,.5,-l,.5)})()}),Ai=r({},Fn,{code:"EPSG:900913"});function Nt(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function Xt(l,f){var y="",T,C,B,J,ot,ft;for(T=0,B=l.length;T<B;T++){for(ot=l[T],C=0,J=ot.length;C<J;C++)ft=ot[C],y+=(C?"L":"M")+ft.x+" "+ft.y;y+=f?It.svg?"z":"x":""}return y||"M0 0"}var Ve=document.documentElement.style,Ee="ActiveXObject"in window,ue=Ee&&!document.addEventListener,ke="msLaunchUri"in navigator&&!("documentMode"in document),un=Ce("webkit"),ci=Ce("android"),ms=Ce("android 2")||Ce("android 3"),hn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Va=ci&&Ce("Google")&&hn<537&&!("AudioNode"in window),Gs=!!window.opera,_s=!ke&&Ce("chrome"),Yr=Ce("gecko")&&!un&&!Gs&&!Ee,Yl=!_s&&Ce("safari"),ja=Ce("phantom"),Xl="OTransition"in Ve,_u=navigator.platform.indexOf("Win")===0,dr=Ee&&"transition"in Ve,Cn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ms,Xi="MozPerspective"in Ve,ni=!window.L_DISABLE_3D&&(dr||Cn||Xi)&&!Xl&&!ja,Xr=typeof orientation<"u"||Ce("mobile"),gu=Xr&&un,yu=Xr&&Cn,Qr=!window.PointerEvent&&window.MSPointerEvent,$r=!!(window.PointerEvent||Qr),Kr="ontouchstart"in window||!!window.TouchEvent,Zs=!window.L_NO_TOUCH&&(Kr||$r),zo=Xr&&Gs,Et=Xr&&Yr,kt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Yt=(function(){var l=!1;try{var f=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",g,f),window.removeEventListener("testPassiveEventSupport",g,f)}catch{}return l})(),Ot=(function(){return!!document.createElement("canvas").getContext})(),Pt=!!(document.createElementNS&&Nt("svg").createSVGRect),Ut=!!Pt&&(function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Wt=!Pt&&(function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var f=l.firstChild;return f.style.behavior="url(#default#VML)",f&&typeof f.adj=="object"}catch{return!1}})(),Qt=navigator.platform.indexOf("Mac")===0,te=navigator.platform.indexOf("Linux")===0;function Ce(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var It={ie:Ee,ielt9:ue,edge:ke,webkit:un,android:ci,android23:ms,androidStock:Va,opera:Gs,chrome:_s,gecko:Yr,safari:Yl,phantom:ja,opera12:Xl,win:_u,ie3d:dr,webkit3d:Cn,gecko3d:Xi,any3d:ni,mobile:Xr,mobileWebkit:gu,mobileWebkit3d:yu,msPointer:Qr,pointer:$r,touch:Zs,touchNative:Kr,mobileOpera:zo,mobileGecko:Et,retina:kt,passiveEvents:Yt,canvas:Ot,svg:Pt,vml:Wt,inlineSvg:Ut,mac:Qt,linux:te},Ei=It.msPointer?"MSPointerDown":"pointerdown",gs=It.msPointer?"MSPointerMove":"pointermove",Ln=It.msPointer?"MSPointerUp":"pointerup",ze=It.msPointer?"MSPointerCancel":"pointercancel",Mn={touchstart:Ei,touchmove:gs,touchend:Ln,touchcancel:ze},Jr={touchstart:Bo,touchmove:mr,touchend:mr,touchcancel:mr},pr={},wf=!1;function Dm(l,f,y){return f==="touchstart"&&Uo(),Jr[f]?(y=Jr[f].bind(this,y),l.addEventListener(Mn[f],y,!1),y):(console.warn("wrong event specified:",f),g)}function xf(l,f,y){if(!Mn[f]){console.warn("wrong event specified:",f);return}l.removeEventListener(Mn[f],y,!1)}function qa(l){pr[l.pointerId]=l}function vu(l){pr[l.pointerId]&&(pr[l.pointerId]=l)}function to(l){delete pr[l.pointerId]}function Uo(){wf||(document.addEventListener(Ei,qa,!0),document.addEventListener(gs,vu,!0),document.addEventListener(Ln,to,!0),document.addEventListener(ze,to,!0),wf=!0)}function mr(l,f){if(f.pointerType!==(f.MSPOINTER_TYPE_MOUSE||"mouse")){f.touches=[];for(var y in pr)f.touches.push(pr[y]);f.changedTouches=[f],l(f)}}function Bo(l,f){f.MSPOINTER_TYPE_TOUCH&&f.pointerType===f.MSPOINTER_TYPE_TOUCH&&pn(f),mr(l,f)}function kn(l){var f={},y,T;for(T in l)y=l[T],f[T]=y&&y.bind?y.bind(l):y;return l=f,f.type="dblclick",f.detail=2,f.isTrusted=!1,f._simulated=!0,f}var Sf=200;function Tf(l,f){l.addEventListener("dblclick",f);var y=0,T;function C(B){if(B.detail!==1){T=B.detail;return}if(!(B.pointerType==="mouse"||B.sourceCapabilities&&!B.sourceCapabilities.firesTouchEvents)){var J=Qa(B);if(!(J.some(function(ft){return ft instanceof HTMLLabelElement&&ft.attributes.for})&&!J.some(function(ft){return ft instanceof HTMLInputElement||ft instanceof HTMLSelectElement}))){var ot=Date.now();ot-y<=Sf?(T++,T===2&&f(kn(B))):T=1,y=ot}}}return l.addEventListener("click",C),{dblclick:f,simDblclick:C}}function eo(l,f){l.removeEventListener("dblclick",f.dblclick),l.removeEventListener("click",f.simDblclick)}var _r=Wa(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Ga=Wa(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),bu=Ga==="webkitTransition"||Ga==="OTransition"?Ga+"End":"transitionend";function wu(l){return typeof l=="string"?document.getElementById(l):l}function Za(l,f){var y=l.style[f]||l.currentStyle&&l.currentStyle[f];if((!y||y==="auto")&&document.defaultView){var T=document.defaultView.getComputedStyle(l,null);y=T?T[f]:null}return y==="auto"?null:y}function fe(l,f,y){var T=document.createElement(l);return T.className=f||"",y&&y.appendChild(T),T}function je(l){var f=l.parentNode;f&&f.removeChild(l)}function Ci(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function Bn(l){var f=l.parentNode;f&&f.lastChild!==l&&f.appendChild(l)}function no(l){var f=l.parentNode;f&&f.firstChild!==l&&f.insertBefore(l,f.firstChild)}function xu(l,f){if(l.classList!==void 0)return l.classList.contains(f);var y=Ql(l);return y.length>0&&new RegExp("(^|\\s)"+f+"(\\s|$)").test(y)}function se(l,f){if(l.classList!==void 0)for(var y=S(f),T=0,C=y.length;T<C;T++)l.classList.add(y[T]);else if(!xu(l,f)){var B=Ql(l);Ho(l,(B?B+" ":"")+f)}}function an(l,f){l.classList!==void 0?l.classList.remove(f):Ho(l,x((" "+Ql(l)+" ").replace(" "+f+" "," ")))}function Ho(l,f){l.className.baseVal===void 0?l.className=f:l.className.baseVal=f}function Ql(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function en(l,f){"opacity"in l.style?l.style.opacity=f:"filter"in l.style&&Su(l,f)}function Su(l,f){var y=!1,T="DXImageTransform.Microsoft.Alpha";try{y=l.filters.item(T)}catch{if(f===1)return}f=Math.round(f*100),y?(y.Enabled=f!==100,y.Opacity=f):l.style.filter+=" progid:"+T+"(opacity="+f+")"}function Wa(l){for(var f=document.documentElement.style,y=0;y<l.length;y++)if(l[y]in f)return l[y];return!1}function Ws(l,f,y){var T=f||new K(0,0);l.style[_r]=(It.ie3d?"translate("+T.x+"px,"+T.y+"px)":"translate3d("+T.x+"px,"+T.y+"px,0)")+(y?" scale("+y+")":"")}function Fe(l,f){l._leaflet_pos=f,It.any3d?Ws(l,f):(l.style.left=f.x+"px",l.style.top=f.y+"px")}function gr(l){return l._leaflet_pos||new K(0,0)}var Vo,ys,Tu;if("onselectstart"in document)Vo=function(){Jt(window,"selectstart",pn)},ys=function(){Ue(window,"selectstart",pn)};else{var jo=Wa(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Vo=function(){if(jo){var l=document.documentElement.style;Tu=l[jo],l[jo]="none"}},ys=function(){jo&&(document.documentElement.style[jo]=Tu,Tu=void 0)}}function $l(){Jt(window,"dragstart",pn)}function Fa(){Ue(window,"dragstart",pn)}var Kl,Au;function qo(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(Li(),Kl=l,Au=l.style.outlineStyle,l.style.outlineStyle="none",Jt(window,"keydown",Li))}function Li(){Kl&&(Kl.style.outlineStyle=Au,Kl=void 0,Au=void 0,Ue(window,"keydown",Li))}function Jl(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function Ya(l){var f=l.getBoundingClientRect();return{x:f.width/l.offsetWidth||1,y:f.height/l.offsetHeight||1,boundingClientRect:f}}var Go={__proto__:null,TRANSFORM:_r,TRANSITION:Ga,TRANSITION_END:bu,get:wu,getStyle:Za,create:fe,remove:je,empty:Ci,toFront:Bn,toBack:no,hasClass:xu,addClass:se,removeClass:an,setClass:Ho,getClass:Ql,setOpacity:en,testProp:Wa,setTransform:Ws,setPosition:Fe,getPosition:gr,get disableTextSelection(){return Vo},get enableTextSelection(){return ys},disableImageDrag:$l,enableImageDrag:Fa,preventOutline:qo,restoreOutline:Li,getSizedParentNode:Jl,getScale:Ya};function Jt(l,f,y,T){if(f&&typeof f=="object")for(var C in f)$i(l,C,f[C],y);else{f=S(f);for(var B=0,J=f.length;B<J;B++)$i(l,f[B],y,T)}return this}var Qi="_leaflet_events";function Ue(l,f,y,T){if(arguments.length===1)Eu(l),delete l[Qi];else if(f&&typeof f=="object")for(var C in f)Xa(l,C,f[C],y);else if(f=S(f),arguments.length===2)Eu(l,function(ot){return Q(f,ot)!==-1});else for(var B=0,J=f.length;B<J;B++)Xa(l,f[B],y,T);return this}function Eu(l,f){for(var y in l[Qi]){var T=y.split(/\d/)[0];(!f||f(T))&&Xa(l,T,null,null,y)}}var io={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function $i(l,f,y,T){var C=f+p(y)+(T?"_"+p(T):"");if(l[Qi]&&l[Qi][C])return this;var B=function(ot){return y.call(T||l,ot||window.event)},J=B;!It.touchNative&&It.pointer&&f.indexOf("touch")===0?B=Dm(l,f,B):It.touch&&f==="dblclick"?B=Tf(l,B):"addEventListener"in l?f==="touchstart"||f==="touchmove"||f==="wheel"||f==="mousewheel"?l.addEventListener(io[f]||f,B,It.passiveEvents?{passive:!1}:!1):f==="mouseenter"||f==="mouseleave"?(B=function(ot){ot=ot||window.event,Fs(l,ot)&&J(ot)},l.addEventListener(io[f],B,!1)):l.addEventListener(f,J,!1):l.attachEvent("on"+f,B),l[Qi]=l[Qi]||{},l[Qi][C]=B}function Xa(l,f,y,T,C){C=C||f+p(y)+(T?"_"+p(T):"");var B=l[Qi]&&l[Qi][C];if(!B)return this;!It.touchNative&&It.pointer&&f.indexOf("touch")===0?xf(l,f,B):It.touch&&f==="dblclick"?eo(l,B):"removeEventListener"in l?l.removeEventListener(io[f]||f,B,!1):l.detachEvent("on"+f,B),l[Qi][C]=null}function Ki(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function vs(l){return $i(l,"wheel",Ki),this}function so(l){return Jt(l,"mousedown touchstart dblclick contextmenu",Ki),l._leaflet_disable_click=!0,this}function pn(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function yr(l){return pn(l),Ki(l),this}function Qa(l){if(l.composedPath)return l.composedPath();for(var f=[],y=l.target;y;)f.push(y),y=y.parentNode;return f}function $a(l,f){if(!f)return new K(l.clientX,l.clientY);var y=Ya(f),T=y.boundingClientRect;return new K((l.clientX-T.left)/y.x-f.clientLeft,(l.clientY-T.top)/y.y-f.clientTop)}var Af=It.linux&&It.chrome?window.devicePixelRatio:It.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ii(l){return It.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/Af:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Fs(l,f){var y=f.relatedTarget;if(!y)return!0;try{for(;y&&y!==l;)y=y.parentNode}catch{return!1}return y!==l}var tc={__proto__:null,on:Jt,off:Ue,stopPropagation:Ki,disableScrollPropagation:vs,disableClickPropagation:so,preventDefault:pn,stop:yr,getPropagationPath:Qa,getMousePosition:$a,getWheelDelta:ii,isExternalTarget:Fs,addListener:Jt,removeListener:Ue},Zo=U.extend({run:function(l,f,y,T){this.stop(),this._el=l,this._inProgress=!0,this._duration=y||.25,this._easeOutPower=1/Math.max(T||.5,.2),this._startPos=gr(l),this._offset=f.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(l){var f=+new Date-this._startTime,y=this._duration*1e3;f<y?this._runFrame(this._easeOut(f/y),l):(this._runFrame(1),this._complete())},_runFrame:function(l,f){var y=this._startPos.add(this._offset.multiplyBy(l));f&&y._round(),Fe(this._el,y),this.fire("step")},_complete:function(){et(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),_e=U.extend({options:{crs:Fn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,f){f=A(this,f),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),f.maxBounds&&this.setMaxBounds(f.maxBounds),f.zoom!==void 0&&(this._zoom=this._limitZoom(f.zoom)),f.center&&f.zoom!==void 0&&this.setView(gt(f.center),f.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Ga&&It.any3d&&!It.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Jt(this._proxy,bu,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,f,y){if(f=f===void 0?this._zoom:this._limitZoom(f),l=this._limitCenter(gt(l),f,this.options.maxBounds),y=y||{},this._stop(),this._loaded&&!y.reset&&y!==!0){y.animate!==void 0&&(y.zoom=r({animate:y.animate},y.zoom),y.pan=r({animate:y.animate,duration:y.duration},y.pan));var T=this._zoom!==f?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,f,y.zoom):this._tryAnimatedPan(l,y.pan);if(T)return clearTimeout(this._sizeTimer),this}return this._resetView(l,f,y.pan&&y.pan.noMoveStart),this},setZoom:function(l,f){return this._loaded?this.setView(this.getCenter(),l,{zoom:f}):(this._zoom=l,this)},zoomIn:function(l,f){return l=l||(It.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,f)},zoomOut:function(l,f){return l=l||(It.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,f)},setZoomAround:function(l,f,y){var T=this.getZoomScale(f),C=this.getSize().divideBy(2),B=l instanceof K?l:this.latLngToContainerPoint(l),J=B.subtract(C).multiplyBy(1-1/T),ot=this.containerPointToLatLng(C.add(J));return this.setView(ot,f,{zoom:y})},_getBoundsCenterZoom:function(l,f){f=f||{},l=l.getBounds?l.getBounds():mt(l);var y=V(f.paddingTopLeft||f.padding||[0,0]),T=V(f.paddingBottomRight||f.padding||[0,0]),C=this.getBoundsZoom(l,!1,y.add(T));if(C=typeof f.maxZoom=="number"?Math.min(f.maxZoom,C):C,C===1/0)return{center:l.getCenter(),zoom:C};var B=T.subtract(y).divideBy(2),J=this.project(l.getSouthWest(),C),ot=this.project(l.getNorthEast(),C),ft=this.unproject(J.add(ot).divideBy(2).add(B),C);return{center:ft,zoom:C}},fitBounds:function(l,f){if(l=mt(l),!l.isValid())throw new Error("Bounds are not valid.");var y=this._getBoundsCenterZoom(l,f);return this.setView(y.center,y.zoom,f)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,f){return this.setView(l,this._zoom,{pan:f})},panBy:function(l,f){if(l=V(l).round(),f=f||{},!l.x&&!l.y)return this.fire("moveend");if(f.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Zo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),f.noMoveStart||this.fire("movestart"),f.animate!==!1){se(this._mapPane,"leaflet-pan-anim");var y=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,y,f.duration||.25,f.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,f,y){if(y=y||{},y.animate===!1||!It.any3d)return this.setView(l,f,y);this._stop();var T=this.project(this.getCenter()),C=this.project(l),B=this.getSize(),J=this._zoom;l=gt(l),f=f===void 0?J:f;var ot=Math.max(B.x,B.y),ft=ot*this.getZoomScale(J,f),St=C.distanceTo(T)||1,Rt=1.42,Ft=Rt*Rt;function le(fn){var $s=fn?-1:1,lo=fn?ft:ot,Vu=ft*ft-ot*ot+$s*Ft*Ft*St*St,dl=2*lo*Ft*St,pl=Vu/dl,Cr=Math.sqrt(pl*pl+1)-pl,Ks=Cr<1e-9?-18:Math.log(Cr);return Ks}function Hn(fn){return(Math.exp(fn)-Math.exp(-fn))/2}function mn(fn){return(Math.exp(fn)+Math.exp(-fn))/2}function gi(fn){return Hn(fn)/mn(fn)}var Oe=le(0);function De(fn){return ot*(mn(Oe)/mn(Oe+Rt*fn))}function de(fn){return ot*(mn(Oe)*gi(Oe+Rt*fn)-Hn(Oe))/Ft}function Ar(fn){return 1-Math.pow(1-fn,1.5)}var Di=Date.now(),pc=(le(1)-Oe)/Rt,Er=y.duration?1e3*y.duration:1e3*pc*.8;function Hu(){var fn=(Date.now()-Di)/Er,$s=Ar(fn)*pc;fn<=1?(this._flyToFrame=$(Hu,this),this._move(this.unproject(T.add(C.subtract(T).multiplyBy(de($s)/St)),J),this.getScaleZoom(ot/De($s),J),{flyTo:!0})):this._move(l,f)._moveEnd(!0)}return this._moveStart(!0,y.noMoveStart),Hu.call(this),this},flyToBounds:function(l,f){var y=this._getBoundsCenterZoom(l,f);return this.flyTo(y.center,y.zoom,f)},setMaxBounds:function(l){return l=mt(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var f=this.options.minZoom;return this.options.minZoom=l,this._loaded&&f!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var f=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&f!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,f){this._enforcingBounds=!0;var y=this.getCenter(),T=this._limitCenter(y,this._zoom,mt(l));return y.equals(T)||this.panTo(T,f),this._enforcingBounds=!1,this},panInside:function(l,f){f=f||{};var y=V(f.paddingTopLeft||f.padding||[0,0]),T=V(f.paddingBottomRight||f.padding||[0,0]),C=this.project(this.getCenter()),B=this.project(l),J=this.getPixelBounds(),ot=q([J.min.add(y),J.max.subtract(T)]),ft=ot.getSize();if(!ot.contains(B)){this._enforcingBounds=!0;var St=B.subtract(ot.getCenter()),Rt=ot.extend(B).getSize().subtract(ft);C.x+=St.x<0?-Rt.x:Rt.x,C.y+=St.y<0?-Rt.y:Rt.y,this.panTo(this.unproject(C),f),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=r({animate:!1,pan:!0},l===!0?{animate:!0}:l);var f=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var y=this.getSize(),T=f.divideBy(2).round(),C=y.divideBy(2).round(),B=T.subtract(C);return!B.x&&!B.y?this:(l.animate&&l.pan?this.panBy(B):(l.pan&&this._rawPanBy(B),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:f,newSize:y}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=r({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var f=u(this._handleGeolocationResponse,this),y=u(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(f,y,l):navigator.geolocation.getCurrentPosition(f,y,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var f=l.code,y=l.message||(f===1?"permission denied":f===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:f,message:"Geolocation error: "+y+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var f=l.coords.latitude,y=l.coords.longitude,T=new vt(f,y),C=T.toBounds(l.coords.accuracy*2),B=this._locateOptions;if(B.setView){var J=this.getBoundsZoom(C);this.setView(T,B.maxZoom?Math.min(J,B.maxZoom):J)}var ot={latlng:T,bounds:C,timestamp:l.timestamp};for(var ft in l.coords)typeof l.coords[ft]=="number"&&(ot[ft]=l.coords[ft]);this.fire("locationfound",ot)}},addHandler:function(l,f){if(!f)return this;var y=this[l]=new f(this);return this._handlers.push(y),this.options[l]&&y.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),je(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(et(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)je(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,f){var y="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),T=fe("div",y,f||this._mapPane);return l&&(this._panes[l]=T),T},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),f=this.unproject(l.getBottomLeft()),y=this.unproject(l.getTopRight());return new at(f,y)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,f,y){l=mt(l),y=V(y||[0,0]);var T=this.getZoom()||0,C=this.getMinZoom(),B=this.getMaxZoom(),J=l.getNorthWest(),ot=l.getSouthEast(),ft=this.getSize().subtract(y),St=q(this.project(ot,T),this.project(J,T)).getSize(),Rt=It.any3d?this.options.zoomSnap:1,Ft=ft.x/St.x,le=ft.y/St.y,Hn=f?Math.max(Ft,le):Math.min(Ft,le);return T=this.getScaleZoom(Hn,T),Rt&&(T=Math.round(T/(Rt/100))*(Rt/100),T=f?Math.ceil(T/Rt)*Rt:Math.floor(T/Rt)*Rt),Math.max(C,Math.min(B,T))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,f){var y=this._getTopLeftPoint(l,f);return new I(y,y.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,f){var y=this.options.crs;return f=f===void 0?this._zoom:f,y.scale(l)/y.scale(f)},getScaleZoom:function(l,f){var y=this.options.crs;f=f===void 0?this._zoom:f;var T=y.zoom(l*y.scale(f));return isNaN(T)?1/0:T},project:function(l,f){return f=f===void 0?this._zoom:f,this.options.crs.latLngToPoint(gt(l),f)},unproject:function(l,f){return f=f===void 0?this._zoom:f,this.options.crs.pointToLatLng(V(l),f)},layerPointToLatLng:function(l){var f=V(l).add(this.getPixelOrigin());return this.unproject(f)},latLngToLayerPoint:function(l){var f=this.project(gt(l))._round();return f._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(gt(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(mt(l))},distance:function(l,f){return this.options.crs.distance(gt(l),gt(f))},containerPointToLayerPoint:function(l){return V(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return V(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var f=this.containerPointToLayerPoint(V(l));return this.layerPointToLatLng(f)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(gt(l)))},mouseEventToContainerPoint:function(l){return $a(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var f=this._container=wu(l);if(f){if(f._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Jt(f,"scroll",this._onScroll,this),this._containerId=p(f)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&It.any3d,se(l,"leaflet-container"+(It.touch?" leaflet-touch":"")+(It.retina?" leaflet-retina":"")+(It.ielt9?" leaflet-oldie":"")+(It.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var f=Za(l,"position");f!=="absolute"&&f!=="relative"&&f!=="fixed"&&f!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Fe(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(se(l.markerPane,"leaflet-zoom-hide"),se(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,f,y){Fe(this._mapPane,new K(0,0));var T=!this._loaded;this._loaded=!0,f=this._limitZoom(f),this.fire("viewprereset");var C=this._zoom!==f;this._moveStart(C,y)._move(l,f)._moveEnd(C),this.fire("viewreset"),T&&this.fire("load")},_moveStart:function(l,f){return l&&this.fire("zoomstart"),f||this.fire("movestart"),this},_move:function(l,f,y,T){f===void 0&&(f=this._zoom);var C=this._zoom!==f;return this._zoom=f,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),T?y&&y.pinch&&this.fire("zoom",y):((C||y&&y.pinch)&&this.fire("zoom",y),this.fire("move",y)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return et(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){Fe(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[p(this._container)]=this;var f=l?Ue:Jt;f(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&f(window,"resize",this._onResize,this),It.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){et(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,f){for(var y=[],T,C=f==="mouseout"||f==="mouseover",B=l.target||l.srcElement,J=!1;B;){if(T=this._targets[p(B)],T&&(f==="click"||f==="preclick")&&this._draggableMoved(T)){J=!0;break}if(T&&T.listens(f,!0)&&(C&&!Fs(B,l)||(y.push(T),C))||B===this._container)break;B=B.parentNode}return!y.length&&!J&&!C&&this.listens(f,!0)&&(y=[this]),y},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var f=l.target||l.srcElement;if(!(!this._loaded||f._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(f))){var y=l.type;y==="mousedown"&&qo(f),this._fireDOMEvent(l,y)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,f,y){if(l.type==="click"){var T=r({},l);T.type="preclick",this._fireDOMEvent(T,T.type,y)}var C=this._findEventTargets(l,f);if(y){for(var B=[],J=0;J<y.length;J++)y[J].listens(f,!0)&&B.push(y[J]);C=B.concat(C)}if(C.length){f==="contextmenu"&&pn(l);var ot=C[0],ft={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var St=ot.getLatLng&&(!ot._radius||ot._radius<=10);ft.containerPoint=St?this.latLngToContainerPoint(ot.getLatLng()):this.mouseEventToContainerPoint(l),ft.layerPoint=this.containerPointToLayerPoint(ft.containerPoint),ft.latlng=St?ot.getLatLng():this.layerPointToLatLng(ft.layerPoint)}for(J=0;J<C.length;J++)if(C[J].fire(f,ft,!0),ft.originalEvent._stopped||C[J].options.bubblingMouseEvents===!1&&Q(this._mouseEvents,f)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,f=this._handlers.length;l<f;l++)this._handlers[l].disable()},whenReady:function(l,f){return this._loaded?l.call(f||this,{target:this}):this.on("load",l,f),this},_getMapPanePos:function(){return gr(this._mapPane)||new K(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,f){var y=l&&f!==void 0?this._getNewPixelOrigin(l,f):this.getPixelOrigin();return y.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,f){var y=this.getSize()._divideBy(2);return this.project(l,f)._subtract(y)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,f,y){var T=this._getNewPixelOrigin(y,f);return this.project(l,f)._subtract(T)},_latLngBoundsToNewLayerBounds:function(l,f,y){var T=this._getNewPixelOrigin(y,f);return q([this.project(l.getSouthWest(),f)._subtract(T),this.project(l.getNorthWest(),f)._subtract(T),this.project(l.getSouthEast(),f)._subtract(T),this.project(l.getNorthEast(),f)._subtract(T)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,f,y){if(!y)return l;var T=this.project(l,f),C=this.getSize().divideBy(2),B=new I(T.subtract(C),T.add(C)),J=this._getBoundsOffset(B,y,f);return Math.abs(J.x)<=1&&Math.abs(J.y)<=1?l:this.unproject(T.add(J),f)},_limitOffset:function(l,f){if(!f)return l;var y=this.getPixelBounds(),T=new I(y.min.add(l),y.max.add(l));return l.add(this._getBoundsOffset(T,f))},_getBoundsOffset:function(l,f,y){var T=q(this.project(f.getNorthEast(),y),this.project(f.getSouthWest(),y)),C=T.min.subtract(l.min),B=T.max.subtract(l.max),J=this._rebound(C.x,-B.x),ot=this._rebound(C.y,-B.y);return new K(J,ot)},_rebound:function(l,f){return l+f>0?Math.round(l-f)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(f))},_limitZoom:function(l){var f=this.getMinZoom(),y=this.getMaxZoom(),T=It.any3d?this.options.zoomSnap:1;return T&&(l=Math.round(l/T)*T),Math.max(f,Math.min(y,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){an(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,f){var y=this._getCenterOffset(l)._trunc();return(f&&f.animate)!==!0&&!this.getSize().contains(y)?!1:(this.panBy(y,f),!0)},_createAnimProxy:function(){var l=this._proxy=fe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(f){var y=_r,T=this._proxy.style[y];Ws(this._proxy,this.project(f.center,f.zoom),this.getZoomScale(f.zoom,1)),T===this._proxy.style[y]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){je(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),f=this.getZoom();Ws(this._proxy,this.project(l,f),this.getZoomScale(f,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,f,y){if(this._animatingZoom)return!0;if(y=y||{},!this._zoomAnimated||y.animate===!1||this._nothingToAnimate()||Math.abs(f-this._zoom)>this.options.zoomAnimationThreshold)return!1;var T=this.getZoomScale(f),C=this._getCenterOffset(l)._divideBy(1-1/T);return y.animate!==!0&&!this.getSize().contains(C)?!1:($(function(){this._moveStart(!0,y.noMoveStart||!1)._animateZoom(l,f,!0)},this),!0)},_animateZoom:function(l,f,y,T){this._mapPane&&(y&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=f,se(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:f,noUpdate:T}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&an(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Cu(l,f){return new _e(l,f)}var _i=X.extend({options:{position:"topright"},initialize:function(l){A(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var f=this._map;return f&&f.removeControl(this),this.options.position=l,f&&f.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var f=this._container=this.onAdd(l),y=this.getPosition(),T=l._controlCorners[y];return se(f,"leaflet-control"),y.indexOf("bottom")!==-1?T.insertBefore(f,T.firstChild):T.appendChild(f),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(je(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),Ys=function(l){return new _i(l)};_e.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},f="leaflet-",y=this._controlContainer=fe("div",f+"control-container",this._container);function T(C,B){var J=f+C+" "+f+B;l[C+B]=fe("div",J,y)}T("top","left"),T("top","right"),T("bottom","left"),T("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)je(this._controlCorners[l]);je(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ka=_i.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,f,y,T){return y<T?-1:T<y?1:0}},initialize:function(l,f,y){A(this,y),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var T in l)this._addLayer(l[T],T);for(T in f)this._addLayer(f[T],T,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return _i.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,f){return this._addLayer(l,f),this._map?this._update():this},addOverlay:function(l,f){return this._addLayer(l,f,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var f=this._getLayer(p(l));return f&&this._layers.splice(this._layers.indexOf(f),1),this._map?this._update():this},expand:function(){se(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(se(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):an(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return an(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",f=this._container=fe("div",l),y=this.options.collapsed;f.setAttribute("aria-haspopup",!0),so(f),vs(f);var T=this._section=fe("section",l+"-list");y&&(this._map.on("click",this.collapse,this),Jt(f,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var C=this._layersLink=fe("a",l+"-toggle",f);C.href="#",C.title="Layers",C.setAttribute("role","button"),Jt(C,{keydown:function(B){B.keyCode===13&&this._expandSafely()},click:function(B){pn(B),this._expandSafely()}},this),y||this.expand(),this._baseLayersList=fe("div",l+"-base",T),this._separator=fe("div",l+"-separator",T),this._overlaysList=fe("div",l+"-overlays",T),f.appendChild(T)},_getLayer:function(l){for(var f=0;f<this._layers.length;f++)if(this._layers[f]&&p(this._layers[f].layer)===l)return this._layers[f]},_addLayer:function(l,f,y){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:f,overlay:y}),this.options.sortLayers&&this._layers.sort(u(function(T,C){return this.options.sortFunction(T.layer,C.layer,T.name,C.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ci(this._baseLayersList),Ci(this._overlaysList),this._layerControlInputs=[];var l,f,y,T,C=0;for(y=0;y<this._layers.length;y++)T=this._layers[y],this._addItem(T),f=f||T.overlay,l=l||!T.overlay,C+=T.overlay?0:1;return this.options.hideSingleBase&&(l=l&&C>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=f&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var f=this._getLayer(p(l.target)),y=f.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;y&&this._map.fire(y,f)},_createRadioElement:function(l,f){var y='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(f?' checked="checked"':"")+"/>",T=document.createElement("div");return T.innerHTML=y,T.firstChild},_addItem:function(l){var f=document.createElement("label"),y=this._map.hasLayer(l.layer),T;l.overlay?(T=document.createElement("input"),T.type="checkbox",T.className="leaflet-control-layers-selector",T.defaultChecked=y):T=this._createRadioElement("leaflet-base-layers_"+p(this),y),this._layerControlInputs.push(T),T.layerId=p(l.layer),Jt(T,"click",this._onInputClick,this);var C=document.createElement("span");C.innerHTML=" "+l.name;var B=document.createElement("span");f.appendChild(B),B.appendChild(T),B.appendChild(C);var J=l.overlay?this._overlaysList:this._baseLayersList;return J.appendChild(f),this._checkDisabledLayers(),f},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,f,y,T=[],C=[];this._handlingClick=!0;for(var B=l.length-1;B>=0;B--)f=l[B],y=this._getLayer(f.layerId).layer,f.checked?T.push(y):f.checked||C.push(y);for(B=0;B<C.length;B++)this._map.hasLayer(C[B])&&this._map.removeLayer(C[B]);for(B=0;B<T.length;B++)this._map.hasLayer(T[B])||this._map.addLayer(T[B]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,f,y,T=this._map.getZoom(),C=l.length-1;C>=0;C--)f=l[C],y=this._getLayer(f.layerId).layer,f.disabled=y.options.minZoom!==void 0&&T<y.options.minZoom||y.options.maxZoom!==void 0&&T>y.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,Jt(l,"click",pn),this.expand();var f=this;setTimeout(function(){Ue(l,"click",pn),f._preventClick=!1})}}),Ef=function(l,f,y){return new Ka(l,f,y)},Lu=_i.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var f="leaflet-control-zoom",y=fe("div",f+" leaflet-bar"),T=this.options;return this._zoomInButton=this._createButton(T.zoomInText,T.zoomInTitle,f+"-in",y,this._zoomIn),this._zoomOutButton=this._createButton(T.zoomOutText,T.zoomOutTitle,f+"-out",y,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),y},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,f,y,T,C){var B=fe("a",y,T);return B.innerHTML=l,B.href="#",B.title=f,B.setAttribute("role","button"),B.setAttribute("aria-label",f),so(B),Jt(B,"click",yr),Jt(B,"click",C,this),Jt(B,"click",this._refocusOnMap,this),B},_updateDisabled:function(){var l=this._map,f="leaflet-disabled";an(this._zoomInButton,f),an(this._zoomOutButton,f),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(se(this._zoomOutButton,f),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(se(this._zoomInButton,f),this._zoomInButton.setAttribute("aria-disabled","true"))}});_e.mergeOptions({zoomControl:!0}),_e.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Lu,this.addControl(this.zoomControl))});var Rm=function(l){return new Lu(l)},Cf=_i.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var f="leaflet-control-scale",y=fe("div",f),T=this.options;return this._addScales(T,f+"-line",y),l.on(T.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),y},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,f,y){l.metric&&(this._mScale=fe("div",f,y)),l.imperial&&(this._iScale=fe("div",f,y))},_update:function(){var l=this._map,f=l.getSize().y/2,y=l.distance(l.containerPointToLatLng([0,f]),l.containerPointToLatLng([this.options.maxWidth,f]));this._updateScales(y)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var f=this._getRoundNum(l),y=f<1e3?f+" m":f/1e3+" km";this._updateScale(this._mScale,y,f/l)},_updateImperial:function(l){var f=l*3.2808399,y,T,C;f>5280?(y=f/5280,T=this._getRoundNum(y),this._updateScale(this._iScale,T+" mi",T/y)):(C=this._getRoundNum(f),this._updateScale(this._iScale,C+" ft",C/f))},_updateScale:function(l,f,y){l.style.width=Math.round(this.options.maxWidth*y)+"px",l.innerHTML=f},_getRoundNum:function(l){var f=Math.pow(10,(Math.floor(l)+"").length-1),y=l/f;return y=y>=10?10:y>=5?5:y>=3?3:y>=2?2:1,f*y}}),Mu=function(l){return new Cf(l)},Im='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ku=_i.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(It.inlineSvg?Im+" ":"")+"Leaflet</a>"},initialize:function(l){A(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=fe("div","leaflet-control-attribution"),so(this._container);for(var f in l._layers)l._layers[f].getAttribution&&this.addAttribution(l._layers[f].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var f in this._attributions)this._attributions[f]&&l.push(f);var y=[];this.options.prefix&&y.push(this.options.prefix),l.length&&y.push(l.join(", ")),this._container.innerHTML=y.join(' <span aria-hidden="true">|</span> ')}}});_e.mergeOptions({attributionControl:!0}),_e.addInitHook(function(){this.options.attributionControl&&new ku().addTo(this)});var Nm=function(l){return new ku(l)};_i.Layers=Ka,_i.Zoom=Lu,_i.Scale=Cf,_i.Attribution=ku,Ys.layers=Ef,Ys.zoom=Rm,Ys.scale=Mu,Ys.attribution=Nm;var bs=X.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});bs.addTo=function(l,f){return l.addHandler(f,this),this};var Pm={Events:P},Ou=It.touch?"touchstart mousedown":"mousedown",vr=U.extend({options:{clickTolerance:3},initialize:function(l,f,y,T){A(this,T),this._element=l,this._dragStartTarget=f||l,this._preventOutline=y},enable:function(){this._enabled||(Jt(this._dragStartTarget,Ou,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(vr._dragging===this&&this.finishDrag(!0),Ue(this._dragStartTarget,Ou,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!xu(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){vr._dragging===this&&this.finishDrag();return}if(!(vr._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(vr._dragging=this,this._preventOutline&&qo(this._element),$l(),Vo(),!this._moving)){this.fire("down");var f=l.touches?l.touches[0]:l,y=Jl(this._element);this._startPoint=new K(f.clientX,f.clientY),this._startPos=gr(this._element),this._parentScale=Ya(y);var T=l.type==="mousedown";Jt(document,T?"mousemove":"touchmove",this._onMove,this),Jt(document,T?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var f=l.touches&&l.touches.length===1?l.touches[0]:l,y=new K(f.clientX,f.clientY)._subtract(this._startPoint);!y.x&&!y.y||Math.abs(y.x)+Math.abs(y.y)<this.options.clickTolerance||(y.x/=this._parentScale.x,y.y/=this._parentScale.y,pn(l),this._moved||(this.fire("dragstart"),this._moved=!0,se(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),se(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(y),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),Fe(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){an(document.body,"leaflet-dragging"),this._lastTarget&&(an(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ue(document,"mousemove touchmove",this._onMove,this),Ue(document,"mouseup touchend touchcancel",this._onUp,this),Fa(),ys();var f=this._moved&&this._moving;this._moving=!1,vr._dragging=!1,f&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function Lf(l,f,y){var T,C=[1,4,2,8],B,J,ot,ft,St,Rt,Ft,le;for(B=0,Rt=l.length;B<Rt;B++)l[B]._code=ro(l[B],f);for(ot=0;ot<4;ot++){for(Ft=C[ot],T=[],B=0,Rt=l.length,J=Rt-1;B<Rt;J=B++)ft=l[B],St=l[J],ft._code&Ft?St._code&Ft||(le=ec(St,ft,Ft,f,y),le._code=ro(le,f),T.push(le)):(St._code&Ft&&(le=ec(St,ft,Ft,f,y),le._code=ro(le,f),T.push(le)),T.push(ft));l=T}return l}function Mf(l,f){var y,T,C,B,J,ot,ft,St,Rt;if(!l||l.length===0)throw new Error("latlngs not passed");Mi(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Ft=gt([0,0]),le=mt(l),Hn=le.getNorthWest().distanceTo(le.getSouthWest())*le.getNorthEast().distanceTo(le.getNorthWest());Hn<1700&&(Ft=Du(l));var mn=l.length,gi=[];for(y=0;y<mn;y++){var Oe=gt(l[y]);gi.push(f.project(gt([Oe.lat-Ft.lat,Oe.lng-Ft.lng])))}for(ot=ft=St=0,y=0,T=mn-1;y<mn;T=y++)C=gi[y],B=gi[T],J=C.y*B.x-B.y*C.x,ft+=(C.x+B.x)*J,St+=(C.y+B.y)*J,ot+=J*3;ot===0?Rt=gi[0]:Rt=[ft/ot,St/ot];var De=f.unproject(V(Rt));return gt([De.lat+Ft.lat,De.lng+Ft.lng])}function Du(l){for(var f=0,y=0,T=0,C=0;C<l.length;C++){var B=gt(l[C]);f+=B.lat,y+=B.lng,T++}return gt([f/T,y/T])}var Ru={__proto__:null,clipPolygon:Lf,polygonCenter:Mf,centroid:Du};function kf(l,f){if(!f||!l.length)return l.slice();var y=f*f;return l=Um(l,y),l=Df(l,y),l}function Of(l,f,y){return Math.sqrt(Ja(l,f,y,!0))}function zm(l,f,y){return Ja(l,f,y)}function Df(l,f){var y=l.length,T=typeof Uint8Array<"u"?Uint8Array:Array,C=new T(y);C[0]=C[y-1]=1,Iu(l,C,f,0,y-1);var B,J=[];for(B=0;B<y;B++)C[B]&&J.push(l[B]);return J}function Iu(l,f,y,T,C){var B=0,J,ot,ft;for(ot=T+1;ot<=C-1;ot++)ft=Ja(l[ot],l[T],l[C],!0),ft>B&&(J=ot,B=ft);B>y&&(f[J]=1,Iu(l,f,y,T,J),Iu(l,f,y,J,C))}function Um(l,f){for(var y=[l[0]],T=1,C=0,B=l.length;T<B;T++)Bm(l[T],l[C])>f&&(y.push(l[T]),C=T);return C<B-1&&y.push(l[B-1]),y}var Rf;function If(l,f,y,T,C){var B=T?Rf:ro(l,y),J=ro(f,y),ot,ft,St;for(Rf=J;;){if(!(B|J))return[l,f];if(B&J)return!1;ot=B||J,ft=ec(l,f,ot,y,C),St=ro(ft,y),ot===B?(l=ft,B=St):(f=ft,J=St)}}function ec(l,f,y,T,C){var B=f.x-l.x,J=f.y-l.y,ot=T.min,ft=T.max,St,Rt;return y&8?(St=l.x+B*(ft.y-l.y)/J,Rt=ft.y):y&4?(St=l.x+B*(ot.y-l.y)/J,Rt=ot.y):y&2?(St=ft.x,Rt=l.y+J*(ft.x-l.x)/B):y&1&&(St=ot.x,Rt=l.y+J*(ot.x-l.x)/B),new K(St,Rt,C)}function ro(l,f){var y=0;return l.x<f.min.x?y|=1:l.x>f.max.x&&(y|=2),l.y<f.min.y?y|=4:l.y>f.max.y&&(y|=8),y}function Bm(l,f){var y=f.x-l.x,T=f.y-l.y;return y*y+T*T}function Ja(l,f,y,T){var C=f.x,B=f.y,J=y.x-C,ot=y.y-B,ft=J*J+ot*ot,St;return ft>0&&(St=((l.x-C)*J+(l.y-B)*ot)/ft,St>1?(C=y.x,B=y.y):St>0&&(C+=J*St,B+=ot*St)),J=l.x-C,ot=l.y-B,T?J*J+ot*ot:new K(C,B)}function Mi(l){return!O(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function nc(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Mi(l)}function Wo(l,f){var y,T,C,B,J,ot,ft,St;if(!l||l.length===0)throw new Error("latlngs not passed");Mi(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Rt=gt([0,0]),Ft=mt(l),le=Ft.getNorthWest().distanceTo(Ft.getSouthWest())*Ft.getNorthEast().distanceTo(Ft.getNorthWest());le<1700&&(Rt=Du(l));var Hn=l.length,mn=[];for(y=0;y<Hn;y++){var gi=gt(l[y]);mn.push(f.project(gt([gi.lat-Rt.lat,gi.lng-Rt.lng])))}for(y=0,T=0;y<Hn-1;y++)T+=mn[y].distanceTo(mn[y+1])/2;if(T===0)St=mn[0];else for(y=0,B=0;y<Hn-1;y++)if(J=mn[y],ot=mn[y+1],C=J.distanceTo(ot),B+=C,B>T){ft=(B-T)/C,St=[ot.x-ft*(ot.x-J.x),ot.y-ft*(ot.y-J.y)];break}var Oe=f.unproject(V(St));return gt([Oe.lat+Rt.lat,Oe.lng+Rt.lng])}var Hm={__proto__:null,simplify:kf,pointToSegmentDistance:Of,closestPointOnSegment:zm,clipSegment:If,_getEdgeIntersection:ec,_getBitCode:ro,_sqClosestPointOnSegment:Ja,isFlat:Mi,_flat:nc,polylineCenter:Wo},ic={project:function(l){return new K(l.lng,l.lat)},unproject:function(l){return new vt(l.y,l.x)},bounds:new I([-180,-90],[180,90])},sc={R:6378137,R_MINOR:6356752314245179e-9,bounds:new I([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var f=Math.PI/180,y=this.R,T=l.lat*f,C=this.R_MINOR/y,B=Math.sqrt(1-C*C),J=B*Math.sin(T),ot=Math.tan(Math.PI/4-T/2)/Math.pow((1-J)/(1+J),B/2);return T=-y*Math.log(Math.max(ot,1e-10)),new K(l.lng*f*y,T)},unproject:function(l){for(var f=180/Math.PI,y=this.R,T=this.R_MINOR/y,C=Math.sqrt(1-T*T),B=Math.exp(-l.y/y),J=Math.PI/2-2*Math.atan(B),ot=0,ft=.1,St;ot<15&&Math.abs(ft)>1e-7;ot++)St=C*Math.sin(J),St=Math.pow((1-St)/(1+St),C/2),ft=Math.PI/2-2*Math.atan(B*St)-J,J+=ft;return new vt(J*f,l.x*f/y)}},Nf={__proto__:null,LonLat:ic,Mercator:sc,SphericalMercator:Me},Pf=r({},Mt,{code:"EPSG:3395",projection:sc,transformation:(function(){var l=.5/(Math.PI*sc.R);return tn(l,.5,-l,.5)})()}),Nu=r({},Mt,{code:"EPSG:4326",projection:ic,transformation:tn(1/180,1,-1/180,.5)}),Fo=r({},Dt,{projection:ic,transformation:tn(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,f){var y=f.lng-l.lng,T=f.lat-l.lat;return Math.sqrt(y*y+T*T)},infinite:!0});Dt.Earth=Mt,Dt.EPSG3395=Pf,Dt.EPSG3857=Fn,Dt.EPSG900913=Ai,Dt.EPSG4326=Nu,Dt.Simple=Fo;var Ji=U.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[p(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[p(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var f=l.target;if(f.hasLayer(this)){if(this._map=f,this._zoomAnimated=f._zoomAnimated,this.getEvents){var y=this.getEvents();f.on(y,this),this.once("remove",function(){f.off(y,this)},this)}this.onAdd(f),this.fire("add"),f.fire("layeradd",{layer:this})}}});_e.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var f=p(l);return this._layers[f]?this:(this._layers[f]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var f=p(l);return this._layers[f]?(this._loaded&&l.onRemove(this),delete this._layers[f],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return p(l)in this._layers},eachLayer:function(l,f){for(var y in this._layers)l.call(f,this._layers[y]);return this},_addLayers:function(l){l=l?O(l)?l:[l]:[];for(var f=0,y=l.length;f<y;f++)this.addLayer(l[f])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[p(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var f=p(l);this._zoomBoundLayers[f]&&(delete this._zoomBoundLayers[f],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,f=-1/0,y=this._getZoomSpan();for(var T in this._zoomBoundLayers){var C=this._zoomBoundLayers[T].options;l=C.minZoom===void 0?l:Math.min(l,C.minZoom),f=C.maxZoom===void 0?f:Math.max(f,C.maxZoom)}this._layersMaxZoom=f===-1/0?void 0:f,this._layersMinZoom=l===1/0?void 0:l,y!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Yo=Ji.extend({initialize:function(l,f){A(this,f),this._layers={};var y,T;if(l)for(y=0,T=l.length;y<T;y++)this.addLayer(l[y])},addLayer:function(l){var f=this.getLayerId(l);return this._layers[f]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var f=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[f]&&this._map.removeLayer(this._layers[f]),delete this._layers[f],this},hasLayer:function(l){var f=typeof l=="number"?l:this.getLayerId(l);return f in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var f=Array.prototype.slice.call(arguments,1),y,T;for(y in this._layers)T=this._layers[y],T[l]&&T[l].apply(T,f);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,f){for(var y in this._layers)l.call(f,this._layers[y]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return p(l)}}),Vm=function(l,f){return new Yo(l,f)},ws=Yo.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),Yo.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),Yo.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new at;for(var f in this._layers){var y=this._layers[f];l.extend(y.getBounds?y.getBounds():y.getLatLng())}return l}}),zf=function(l,f){return new ws(l,f)},xs=X.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){A(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,f){var y=this._getIconUrl(l);if(!y){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var T=this._createImg(y,f&&f.tagName==="IMG"?f:null);return this._setIconStyles(T,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(T.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),T},_setIconStyles:function(l,f){var y=this.options,T=y[f+"Size"];typeof T=="number"&&(T=[T,T]);var C=V(T),B=V(f==="shadow"&&y.shadowAnchor||y.iconAnchor||C&&C.divideBy(2,!0));l.className="leaflet-marker-"+f+" "+(y.className||""),B&&(l.style.marginLeft=-B.x+"px",l.style.marginTop=-B.y+"px"),C&&(l.style.width=C.x+"px",l.style.height=C.y+"px")},_createImg:function(l,f){return f=f||document.createElement("img"),f.src=l,f},_getIconUrl:function(l){return It.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function tl(l){return new xs(l)}var el=xs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof el.imagePath!="string"&&(el.imagePath=this._detectIconPath()),(this.options.imagePath||el.imagePath)+xs.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var f=function(y,T,C){var B=T.exec(y);return B&&B[C]};return l=f(l,/^url\((['"])?(.+)\1\)$/,2),l&&f(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=fe("div","leaflet-default-icon-path",document.body),f=Za(l,"background-image")||Za(l,"backgroundImage");if(document.body.removeChild(l),f=this._stripUrl(f),f)return f;var y=document.querySelector('link[href$="leaflet.css"]');return y?y.href.substring(0,y.href.length-11-1):""}}),nl=bs.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new vr(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),se(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&an(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var f=this._marker,y=f._map,T=this._marker.options.autoPanSpeed,C=this._marker.options.autoPanPadding,B=gr(f._icon),J=y.getPixelBounds(),ot=y.getPixelOrigin(),ft=q(J.min._subtract(ot).add(C),J.max._subtract(ot).subtract(C));if(!ft.contains(B)){var St=V((Math.max(ft.max.x,B.x)-ft.max.x)/(J.max.x-ft.max.x)-(Math.min(ft.min.x,B.x)-ft.min.x)/(J.min.x-ft.min.x),(Math.max(ft.max.y,B.y)-ft.max.y)/(J.max.y-ft.max.y)-(Math.min(ft.min.y,B.y)-ft.min.y)/(J.min.y-ft.min.y)).multiplyBy(T);y.panBy(St,{animate:!1}),this._draggable._newPos._add(St),this._draggable._startPos._add(St),Fe(f._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=$(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(et(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,l)))},_onDrag:function(l){var f=this._marker,y=f._shadow,T=gr(f._icon),C=f._map.layerPointToLatLng(T);y&&Fe(y,T),f._latlng=C,l.latlng=C,l.oldLatLng=this._oldLatLng,f.fire("move",l).fire("drag",l)},_onDragEnd:function(l){et(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),il=Ji.extend({options:{icon:new el,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,f){A(this,f),this._latlng=gt(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var f=this._latlng;return this._latlng=gt(l),this.update(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,f="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),y=l.icon.createIcon(this._icon),T=!1;y!==this._icon&&(this._icon&&this._removeIcon(),T=!0,l.title&&(y.title=l.title),y.tagName==="IMG"&&(y.alt=l.alt||"")),se(y,f),l.keyboard&&(y.tabIndex="0",y.setAttribute("role","button")),this._icon=y,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Jt(y,"focus",this._panOnFocus,this);var C=l.icon.createShadow(this._shadow),B=!1;C!==this._shadow&&(this._removeShadow(),B=!0),C&&(se(C,f),C.alt=""),this._shadow=C,l.opacity<1&&this._updateOpacity(),T&&this.getPane().appendChild(this._icon),this._initInteraction(),C&&B&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ue(this._icon,"focus",this._panOnFocus,this),je(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&je(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&Fe(this._icon,l),this._shadow&&Fe(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(f)},_initInteraction:function(){if(this.options.interactive&&(se(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),nl)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new nl(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&en(this._icon,l),this._shadow&&en(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var f=this.options.icon.options,y=f.iconSize?V(f.iconSize):V(0,0),T=f.iconAnchor?V(f.iconAnchor):V(0,0);l.panInside(this._latlng,{paddingTopLeft:T,paddingBottomRight:y.subtract(T)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Uf(l,f){return new il(l,f)}var Ss=Ji.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return A(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Xo=Ss.extend({options:{fill:!0,radius:10},initialize:function(l,f){A(this,f),this._latlng=gt(l),this._radius=this.options.radius},setLatLng:function(l){var f=this._latlng;return this._latlng=gt(l),this.redraw(),this.fire("move",{oldLatLng:f,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var f=l&&l.radius||this._radius;return Ss.prototype.setStyle.call(this,l),this.setRadius(f),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,f=this._radiusY||l,y=this._clickTolerance(),T=[l+y,f+y];this._pxBounds=new I(this._point.subtract(T),this._point.add(T))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Bf(l,f){return new Xo(l,f)}var rc=Xo.extend({initialize:function(l,f,y){if(typeof f=="number"&&(f=r({},y,{radius:f})),A(this,f),this._latlng=gt(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new at(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:Ss.prototype.setStyle,_project:function(){var l=this._latlng.lng,f=this._latlng.lat,y=this._map,T=y.options.crs;if(T.distance===Mt.distance){var C=Math.PI/180,B=this._mRadius/Mt.R/C,J=y.project([f+B,l]),ot=y.project([f-B,l]),ft=J.add(ot).divideBy(2),St=y.unproject(ft).lat,Rt=Math.acos((Math.cos(B*C)-Math.sin(f*C)*Math.sin(St*C))/(Math.cos(f*C)*Math.cos(St*C)))/C;(isNaN(Rt)||Rt===0)&&(Rt=B/Math.cos(Math.PI/180*f)),this._point=ft.subtract(y.getPixelOrigin()),this._radius=isNaN(Rt)?0:ft.x-y.project([St,l-Rt]).x,this._radiusY=ft.y-J.y}else{var Ft=T.unproject(T.project(this._latlng).subtract([this._mRadius,0]));this._point=y.latLngToLayerPoint(this._latlng),this._radius=this._point.x-y.latLngToLayerPoint(Ft).x}this._updateBounds()}});function Hf(l,f,y){return new rc(l,f,y)}var Xs=Ss.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,f){A(this,f),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var f=1/0,y=null,T=Ja,C,B,J=0,ot=this._parts.length;J<ot;J++)for(var ft=this._parts[J],St=1,Rt=ft.length;St<Rt;St++){C=ft[St-1],B=ft[St];var Ft=T(l,C,B,!0);Ft<f&&(f=Ft,y=T(l,C,B))}return y&&(y.distance=Math.sqrt(f)),y},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Wo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,f){return f=f||this._defaultShape(),l=gt(l),f.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new at,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return Mi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var f=[],y=Mi(l),T=0,C=l.length;T<C;T++)y?(f[T]=gt(l[T]),this._bounds.extend(f[T])):f[T]=this._convertLatLngs(l[T]);return f},_project:function(){var l=new I;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),f=new K(l,l);this._rawPxBounds&&(this._pxBounds=new I([this._rawPxBounds.min.subtract(f),this._rawPxBounds.max.add(f)]))},_projectLatlngs:function(l,f,y){var T=l[0]instanceof vt,C=l.length,B,J;if(T){for(J=[],B=0;B<C;B++)J[B]=this._map.latLngToLayerPoint(l[B]),y.extend(J[B]);f.push(J)}else for(B=0;B<C;B++)this._projectLatlngs(l[B],f,y)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var f=this._parts,y,T,C,B,J,ot,ft;for(y=0,C=0,B=this._rings.length;y<B;y++)for(ft=this._rings[y],T=0,J=ft.length;T<J-1;T++)ot=If(ft[T],ft[T+1],l,T,!0),ot&&(f[C]=f[C]||[],f[C].push(ot[0]),(ot[1]!==ft[T+1]||T===J-2)&&(f[C].push(ot[1]),C++))}},_simplifyPoints:function(){for(var l=this._parts,f=this.options.smoothFactor,y=0,T=l.length;y<T;y++)l[y]=kf(l[y],f)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,f){var y,T,C,B,J,ot,ft=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(y=0,B=this._parts.length;y<B;y++)for(ot=this._parts[y],T=0,J=ot.length,C=J-1;T<J;C=T++)if(!(!f&&T===0)&&Of(l,ot[C],ot[T])<=ft)return!0;return!1}});function jm(l,f){return new Xs(l,f)}Xs._flat=nc;var Qo=Xs.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Mf(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var f=Xs.prototype._convertLatLngs.call(this,l),y=f.length;return y>=2&&f[0]instanceof vt&&f[0].equals(f[y-1])&&f.pop(),f},_setLatLngs:function(l){Xs.prototype._setLatLngs.call(this,l),Mi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Mi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,f=this.options.weight,y=new K(f,f);if(l=new I(l.min.subtract(y),l.max.add(y)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var T=0,C=this._rings.length,B;T<C;T++)B=Lf(this._rings[T],l,!0),B.length&&this._parts.push(B)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var f=!1,y,T,C,B,J,ot,ft,St;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(B=0,ft=this._parts.length;B<ft;B++)for(y=this._parts[B],J=0,St=y.length,ot=St-1;J<St;ot=J++)T=y[J],C=y[ot],T.y>l.y!=C.y>l.y&&l.x<(C.x-T.x)*(l.y-T.y)/(C.y-T.y)+T.x&&(f=!f);return f||Xs.prototype._containsPoint.call(this,l,!0)}});function qm(l,f){return new Qo(l,f)}var Qs=ws.extend({initialize:function(l,f){A(this,f),this._layers={},l&&this.addData(l)},addData:function(l){var f=O(l)?l:l.features,y,T,C;if(f){for(y=0,T=f.length;y<T;y++)C=f[y],(C.geometries||C.geometry||C.features||C.coordinates)&&this.addData(C);return this}var B=this.options;if(B.filter&&!B.filter(l))return this;var J=Yn(l,B);return J?(J.feature=lc(l),J.defaultOptions=J.options,this.resetStyle(J),B.onEachFeature&&B.onEachFeature(l,J),this.addLayer(J)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=r({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(f){this._setLayerStyle(f,l)},this)},_setLayerStyle:function(l,f){l.setStyle&&(typeof f=="function"&&(f=f(l.feature)),l.setStyle(f))}});function Yn(l,f){var y=l.type==="Feature"?l.geometry:l,T=y?y.coordinates:null,C=[],B=f&&f.pointToLayer,J=f&&f.coordsToLatLng||oc,ot,ft,St,Rt;if(!T&&!y)return null;switch(y.type){case"Point":return ot=J(T),$o(B,l,ot,f);case"MultiPoint":for(St=0,Rt=T.length;St<Rt;St++)ot=J(T[St]),C.push($o(B,l,ot,f));return new ws(C);case"LineString":case"MultiLineString":return ft=sl(T,y.type==="LineString"?0:1,J),new Xs(ft,f);case"Polygon":case"MultiPolygon":return ft=sl(T,y.type==="Polygon"?1:2,J),new Qo(ft,f);case"GeometryCollection":for(St=0,Rt=y.geometries.length;St<Rt;St++){var Ft=Yn({geometry:y.geometries[St],type:"Feature",properties:l.properties},f);Ft&&C.push(Ft)}return new ws(C);case"FeatureCollection":for(St=0,Rt=y.features.length;St<Rt;St++){var le=Yn(y.features[St],f);le&&C.push(le)}return new ws(C);default:throw new Error("Invalid GeoJSON object.")}}function $o(l,f,y,T){return l?l(f,y):new il(y,T&&T.markersInheritOptions&&T)}function oc(l){return new vt(l[1],l[0],l[2])}function sl(l,f,y){for(var T=[],C=0,B=l.length,J;C<B;C++)J=f?sl(l[C],f-1,y):(y||oc)(l[C]),T.push(J);return T}function ac(l,f){return l=gt(l),l.alt!==void 0?[b(l.lng,f),b(l.lat,f),b(l.alt,f)]:[b(l.lng,f),b(l.lat,f)]}function rl(l,f,y,T){for(var C=[],B=0,J=l.length;B<J;B++)C.push(f?rl(l[B],Mi(l[B])?0:f-1,y,T):ac(l[B],T));return!f&&y&&C.length>0&&C.push(C[0].slice()),C}function br(l,f){return l.feature?r({},l.feature,{geometry:f}):lc(f)}function lc(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var wr={toGeoJSON:function(l){return br(this,{type:"Point",coordinates:ac(this.getLatLng(),l)})}};il.include(wr),rc.include(wr),Xo.include(wr),Xs.include({toGeoJSON:function(l){var f=!Mi(this._latlngs),y=rl(this._latlngs,f?1:0,!1,l);return br(this,{type:(f?"Multi":"")+"LineString",coordinates:y})}}),Qo.include({toGeoJSON:function(l){var f=!Mi(this._latlngs),y=f&&!Mi(this._latlngs[0]),T=rl(this._latlngs,y?2:f?1:0,!0,l);return f||(T=[T]),br(this,{type:(y?"Multi":"")+"Polygon",coordinates:T})}}),Yo.include({toMultiPoint:function(l){var f=[];return this.eachLayer(function(y){f.push(y.toGeoJSON(l).geometry.coordinates)}),br(this,{type:"MultiPoint",coordinates:f})},toGeoJSON:function(l){var f=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(f==="MultiPoint")return this.toMultiPoint(l);var y=f==="GeometryCollection",T=[];return this.eachLayer(function(C){if(C.toGeoJSON){var B=C.toGeoJSON(l);if(y)T.push(B.geometry);else{var J=lc(B);J.type==="FeatureCollection"?T.push.apply(T,J.features):T.push(J)}}}),y?br(this,{geometries:T,type:"GeometryCollection"}):{type:"FeatureCollection",features:T}}});function cc(l,f){return new Qs(l,f)}var ol=cc,Ko=Ji.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,f,y){this._url=l,this._bounds=mt(f),A(this,y)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(se(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){je(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&Bn(this._image),this},bringToBack:function(){return this._map&&no(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=mt(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",f=this._image=l?this._url:fe("img");if(se(f,"leaflet-image-layer"),this._zoomAnimated&&se(f,"leaflet-zoom-animated"),this.options.className&&se(f,this.options.className),f.onselectstart=g,f.onmousemove=g,f.onload=u(this.fire,this,"load"),f.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=f.src;return}f.src=this._url,f.alt=this.options.alt},_animateZoom:function(l){var f=this._map.getZoomScale(l.zoom),y=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;Ws(this._image,y,f)},_reset:function(){var l=this._image,f=new I(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),y=f.getSize();Fe(l,f.min),l.style.width=y.x+"px",l.style.height=y.y+"px"},_updateOpacity:function(){en(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),Vf=function(l,f,y){return new Ko(l,f,y)},xr=Ko.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",f=this._image=l?this._url:fe("video");if(se(f,"leaflet-image-layer"),this._zoomAnimated&&se(f,"leaflet-zoom-animated"),this.options.className&&se(f,this.options.className),f.onselectstart=g,f.onmousemove=g,f.onloadeddata=u(this.fire,this,"load"),l){for(var y=f.getElementsByTagName("source"),T=[],C=0;C<y.length;C++)T.push(y[C].src);this._url=y.length>0?T:[f.src];return}O(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(f.style,"objectFit")&&(f.style.objectFit="fill"),f.autoplay=!!this.options.autoplay,f.loop=!!this.options.loop,f.muted=!!this.options.muted,f.playsInline=!!this.options.playsInline;for(var B=0;B<this._url.length;B++){var J=fe("source");J.src=this._url[B],f.appendChild(J)}}});function Jo(l,f,y){return new xr(l,f,y)}var uc=Ko.extend({_initImage:function(){var l=this._image=this._url;se(l,"leaflet-image-layer"),this._zoomAnimated&&se(l,"leaflet-zoom-animated"),this.options.className&&se(l,this.options.className),l.onselectstart=g,l.onmousemove=g}});function jf(l,f,y){return new uc(l,f,y)}var Xn=Ji.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,f){l&&(l instanceof vt||O(l))?(this._latlng=gt(l),A(this,f)):(A(this,l),this._source=f),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&en(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&en(this._container,1),this.bringToFront(),this.options.interactive&&(se(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(en(this._container,0),this._removeTimeout=setTimeout(u(je,void 0,this._container),200)):je(this._container),this.options.interactive&&(an(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=gt(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Bn(this._container),this},bringToBack:function(){return this._map&&no(this._container),this},_prepareOpen:function(l){var f=this._source;if(!f._map)return!1;if(f instanceof ws){f=null;var y=this._source._layers;for(var T in y)if(y[T]._map){f=y[T];break}if(!f)return!1;this._source=f}if(!l)if(f.getCenter)l=f.getCenter();else if(f.getLatLng)l=f.getLatLng();else if(f.getBounds)l=f.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,f=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof f=="string")l.innerHTML=f;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(f)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),f=V(this.options.offset),y=this._getAnchor();this._zoomAnimated?Fe(this._container,l.add(y)):f=f.add(l).add(y);var T=this._containerBottom=-f.y,C=this._containerLeft=-Math.round(this._containerWidth/2)+f.x;this._container.style.bottom=T+"px",this._container.style.left=C+"px"}},_getAnchor:function(){return[0,0]}});_e.include({_initOverlay:function(l,f,y,T){var C=f;return C instanceof l||(C=new l(T).setContent(f)),y&&C.setLatLng(y),C}}),Ji.include({_initOverlay:function(l,f,y,T){var C=y;return C instanceof l?(A(C,T),C._source=this):(C=f&&!T?f:new l(T,this),C.setContent(y)),C}});var al=Xn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,Xn.prototype.openOn.call(this,l)},onAdd:function(l){Xn.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ss||this._source.on("preclick",Ki))},onRemove:function(l){Xn.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ss||this._source.off("preclick",Ki))},getEvents:function(){var l=Xn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",f=this._container=fe("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),y=this._wrapper=fe("div",l+"-content-wrapper",f);if(this._contentNode=fe("div",l+"-content",y),so(f),vs(this._contentNode),Jt(f,"contextmenu",Ki),this._tipContainer=fe("div",l+"-tip-container",f),this._tip=fe("div",l+"-tip",this._tipContainer),this.options.closeButton){var T=this._closeButton=fe("a",l+"-close-button",f);T.setAttribute("role","button"),T.setAttribute("aria-label","Close popup"),T.href="#close",T.innerHTML='<span aria-hidden="true">&#215;</span>',Jt(T,"click",function(C){pn(C),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,f=l.style;f.width="",f.whiteSpace="nowrap";var y=l.offsetWidth;y=Math.min(y,this.options.maxWidth),y=Math.max(y,this.options.minWidth),f.width=y+1+"px",f.whiteSpace="",f.height="";var T=l.offsetHeight,C=this.options.maxHeight,B="leaflet-popup-scrolled";C&&T>C?(f.height=C+"px",se(l,B)):an(l,B),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),y=this._getAnchor();Fe(this._container,f.add(y))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,f=parseInt(Za(this._container,"marginBottom"),10)||0,y=this._container.offsetHeight+f,T=this._containerWidth,C=new K(this._containerLeft,-y-this._containerBottom);C._add(gr(this._container));var B=l.layerPointToContainerPoint(C),J=V(this.options.autoPanPadding),ot=V(this.options.autoPanPaddingTopLeft||J),ft=V(this.options.autoPanPaddingBottomRight||J),St=l.getSize(),Rt=0,Ft=0;B.x+T+ft.x>St.x&&(Rt=B.x+T-St.x+ft.x),B.x-Rt-ot.x<0&&(Rt=B.x-ot.x),B.y+y+ft.y>St.y&&(Ft=B.y+y-St.y+ft.y),B.y-Ft-ot.y<0&&(Ft=B.y-ot.y),(Rt||Ft)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([Rt,Ft]))}},_getAnchor:function(){return V(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),qf=function(l,f){return new al(l,f)};_e.mergeOptions({closePopupOnClick:!0}),_e.include({openPopup:function(l,f,y){return this._initOverlay(al,l,f,y).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),Ji.include({bindPopup:function(l,f){return this._popup=this._initOverlay(al,this._popup,l,f),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof ws||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){yr(l);var f=l.layer||l.target;if(this._popup._source===f&&!(f instanceof Ss)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=f,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var ll=Xn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){Xn.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){Xn.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=Xn.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",f=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=fe("div",f),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var f,y,T=this._map,C=this._container,B=T.latLngToContainerPoint(T.getCenter()),J=T.layerPointToContainerPoint(l),ot=this.options.direction,ft=C.offsetWidth,St=C.offsetHeight,Rt=V(this.options.offset),Ft=this._getAnchor();ot==="top"?(f=ft/2,y=St):ot==="bottom"?(f=ft/2,y=0):ot==="center"?(f=ft/2,y=St/2):ot==="right"?(f=0,y=St/2):ot==="left"?(f=ft,y=St/2):J.x<B.x?(ot="right",f=0,y=St/2):(ot="left",f=ft+(Rt.x+Ft.x)*2,y=St/2),l=l.subtract(V(f,y,!0)).add(Rt).add(Ft),an(C,"leaflet-tooltip-right"),an(C,"leaflet-tooltip-left"),an(C,"leaflet-tooltip-top"),an(C,"leaflet-tooltip-bottom"),se(C,"leaflet-tooltip-"+ot),Fe(C,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&en(this._container,l)},_animateZoom:function(l){var f=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(f)},_getAnchor:function(){return V(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Gm=function(l,f){return new ll(l,f)};_e.include({openTooltip:function(l,f,y){return this._initOverlay(ll,l,f,y).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),Ji.include({bindTooltip:function(l,f){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ll,this._tooltip,l,f),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var f=l?"off":"on",y={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?y.add=this._openTooltip:(y.mouseover=this._openTooltip,y.mouseout=this.closeTooltip,y.click=this._openTooltip,this._map?this._addFocusListeners():y.add=this._addFocusListeners),this._tooltip.options.sticky&&(y.mousemove=this._moveTooltip),this[f](y),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof ws||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var f=typeof l.getElement=="function"&&l.getElement();f&&(Jt(f,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),Jt(f,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var f=typeof l.getElement=="function"&&l.getElement();f&&f.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var f=this;this._map.once("moveend",function(){f._openOnceFlag=!1,f._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var f=l.latlng,y,T;this._tooltip.options.sticky&&l.originalEvent&&(y=this._map.mouseEventToContainerPoint(l.originalEvent),T=this._map.containerPointToLayerPoint(y),f=this._map.layerPointToLatLng(T)),this._tooltip.setLatLng(f)}});var Gf=xs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var f=l&&l.tagName==="DIV"?l:document.createElement("div"),y=this.options;if(y.html instanceof Element?(Ci(f),f.appendChild(y.html)):f.innerHTML=y.html!==!1?y.html:"",y.bgPos){var T=V(y.bgPos);f.style.backgroundPosition=-T.x+"px "+-T.y+"px"}return this._setIconStyles(f,"icon"),f},createShadow:function(){return null}});function Zm(l){return new Gf(l)}xs.Default=el;var ta=Ji.extend({options:{tileSize:256,opacity:1,updateWhenIdle:It.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){A(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),je(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Bn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(no(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof K?l:new K(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var f=this.getPane().children,y=-l(-1/0,1/0),T=0,C=f.length,B;T<C;T++)B=f[T].style.zIndex,f[T]!==this._container&&B&&(y=l(y,+B));isFinite(y)&&(this.options.zIndex=y+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!It.ielt9){en(this._container,this.options.opacity);var l=+new Date,f=!1,y=!1;for(var T in this._tiles){var C=this._tiles[T];if(!(!C.current||!C.loaded)){var B=Math.min(1,(l-C.loaded)/200);en(C.el,B),B<1?f=!0:(C.active?y=!0:this._onOpaqueTile(C),C.active=!0)}}y&&!this._noPrune&&this._pruneTiles(),f&&(et(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=fe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,f=this.options.maxZoom;if(l!==void 0){for(var y in this._levels)y=Number(y),this._levels[y].el.children.length||y===l?(this._levels[y].el.style.zIndex=f-Math.abs(l-y),this._onUpdateLevel(y)):(je(this._levels[y].el),this._removeTilesAtZoom(y),this._onRemoveLevel(y),delete this._levels[y]);var T=this._levels[l],C=this._map;return T||(T=this._levels[l]={},T.el=fe("div","leaflet-tile-container leaflet-zoom-animated",this._container),T.el.style.zIndex=f,T.origin=C.project(C.unproject(C.getPixelOrigin()),l).round(),T.zoom=l,this._setZoomTransform(T,C.getCenter(),C.getZoom()),g(T.el.offsetWidth),this._onCreateLevel(T)),this._level=T,T}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var l,f,y=this._map.getZoom();if(y>this.options.maxZoom||y<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)f=this._tiles[l],f.retain=f.current;for(l in this._tiles)if(f=this._tiles[l],f.current&&!f.active){var T=f.coords;this._retainParent(T.x,T.y,T.z,T.z-5)||this._retainChildren(T.x,T.y,T.z,T.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var f in this._tiles)this._tiles[f].coords.z===l&&this._removeTile(f)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)je(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,f,y,T){var C=Math.floor(l/2),B=Math.floor(f/2),J=y-1,ot=new K(+C,+B);ot.z=+J;var ft=this._tileCoordsToKey(ot),St=this._tiles[ft];return St&&St.active?(St.retain=!0,!0):(St&&St.loaded&&(St.retain=!0),J>T?this._retainParent(C,B,J,T):!1)},_retainChildren:function(l,f,y,T){for(var C=2*l;C<2*l+2;C++)for(var B=2*f;B<2*f+2;B++){var J=new K(C,B);J.z=y+1;var ot=this._tileCoordsToKey(J),ft=this._tiles[ot];if(ft&&ft.active){ft.retain=!0;continue}else ft&&ft.loaded&&(ft.retain=!0);y+1<T&&this._retainChildren(C,B,y+1,T)}},_resetView:function(l){var f=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),f,f)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var f=this.options;return f.minNativeZoom!==void 0&&l<f.minNativeZoom?f.minNativeZoom:f.maxNativeZoom!==void 0&&f.maxNativeZoom<l?f.maxNativeZoom:l},_setView:function(l,f,y,T){var C=Math.round(f);this.options.maxZoom!==void 0&&C>this.options.maxZoom||this.options.minZoom!==void 0&&C<this.options.minZoom?C=void 0:C=this._clampZoom(C);var B=this.options.updateWhenZooming&&C!==this._tileZoom;(!T||B)&&(this._tileZoom=C,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),C!==void 0&&this._update(l),y||this._pruneTiles(),this._noPrune=!!y),this._setZoomTransforms(l,f)},_setZoomTransforms:function(l,f){for(var y in this._levels)this._setZoomTransform(this._levels[y],l,f)},_setZoomTransform:function(l,f,y){var T=this._map.getZoomScale(y,l.zoom),C=l.origin.multiplyBy(T).subtract(this._map._getNewPixelOrigin(f,y)).round();It.any3d?Ws(l.el,C,T):Fe(l.el,C)},_resetGrid:function(){var l=this._map,f=l.options.crs,y=this._tileSize=this.getTileSize(),T=this._tileZoom,C=this._map.getPixelWorldBounds(this._tileZoom);C&&(this._globalTileRange=this._pxBoundsToTileRange(C)),this._wrapX=f.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,f.wrapLng[0]],T).x/y.x),Math.ceil(l.project([0,f.wrapLng[1]],T).x/y.y)],this._wrapY=f.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([f.wrapLat[0],0],T).y/y.x),Math.ceil(l.project([f.wrapLat[1],0],T).y/y.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var f=this._map,y=f._animatingZoom?Math.max(f._animateToZoom,f.getZoom()):f.getZoom(),T=f.getZoomScale(y,this._tileZoom),C=f.project(l,this._tileZoom).floor(),B=f.getSize().divideBy(T*2);return new I(C.subtract(B),C.add(B))},_update:function(l){var f=this._map;if(f){var y=this._clampZoom(f.getZoom());if(l===void 0&&(l=f.getCenter()),this._tileZoom!==void 0){var T=this._getTiledPixelBounds(l),C=this._pxBoundsToTileRange(T),B=C.getCenter(),J=[],ot=this.options.keepBuffer,ft=new I(C.getBottomLeft().subtract([ot,-ot]),C.getTopRight().add([ot,-ot]));if(!(isFinite(C.min.x)&&isFinite(C.min.y)&&isFinite(C.max.x)&&isFinite(C.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var St in this._tiles){var Rt=this._tiles[St].coords;(Rt.z!==this._tileZoom||!ft.contains(new K(Rt.x,Rt.y)))&&(this._tiles[St].current=!1)}if(Math.abs(y-this._tileZoom)>1){this._setView(l,y);return}for(var Ft=C.min.y;Ft<=C.max.y;Ft++)for(var le=C.min.x;le<=C.max.x;le++){var Hn=new K(le,Ft);if(Hn.z=this._tileZoom,!!this._isValidTile(Hn)){var mn=this._tiles[this._tileCoordsToKey(Hn)];mn?mn.current=!0:J.push(Hn)}}if(J.sort(function(Oe,De){return Oe.distanceTo(B)-De.distanceTo(B)}),J.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var gi=document.createDocumentFragment();for(le=0;le<J.length;le++)this._addTile(J[le],gi);this._level.el.appendChild(gi)}}}},_isValidTile:function(l){var f=this._map.options.crs;if(!f.infinite){var y=this._globalTileRange;if(!f.wrapLng&&(l.x<y.min.x||l.x>y.max.x)||!f.wrapLat&&(l.y<y.min.y||l.y>y.max.y))return!1}if(!this.options.bounds)return!0;var T=this._tileCoordsToBounds(l);return mt(this.options.bounds).overlaps(T)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var f=this._map,y=this.getTileSize(),T=l.scaleBy(y),C=T.add(y),B=f.unproject(T,l.z),J=f.unproject(C,l.z);return[B,J]},_tileCoordsToBounds:function(l){var f=this._tileCoordsToNwSe(l),y=new at(f[0],f[1]);return this.options.noWrap||(y=this._map.wrapLatLngBounds(y)),y},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var f=l.split(":"),y=new K(+f[0],+f[1]);return y.z=+f[2],y},_removeTile:function(l){var f=this._tiles[l];f&&(je(f.el),delete this._tiles[l],this.fire("tileunload",{tile:f.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){se(l,"leaflet-tile");var f=this.getTileSize();l.style.width=f.x+"px",l.style.height=f.y+"px",l.onselectstart=g,l.onmousemove=g,It.ielt9&&this.options.opacity<1&&en(l,this.options.opacity)},_addTile:function(l,f){var y=this._getTilePos(l),T=this._tileCoordsToKey(l),C=this.createTile(this._wrapCoords(l),u(this._tileReady,this,l));this._initTile(C),this.createTile.length<2&&$(u(this._tileReady,this,l,null,C)),Fe(C,y),this._tiles[T]={el:C,coords:l,current:!0},f.appendChild(C),this.fire("tileloadstart",{tile:C,coords:l})},_tileReady:function(l,f,y){f&&this.fire("tileerror",{error:f,tile:y,coords:l});var T=this._tileCoordsToKey(l);y=this._tiles[T],y&&(y.loaded=+new Date,this._map._fadeAnimated?(en(y.el,0),et(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(y.active=!0,this._pruneTiles()),f||(se(y.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:y.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),It.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var f=new K(this._wrapX?_(l.x,this._wrapX):l.x,this._wrapY?_(l.y,this._wrapY):l.y);return f.z=l.z,f},_pxBoundsToTileRange:function(l){var f=this.getTileSize();return new I(l.min.unscaleBy(f).floor(),l.max.unscaleBy(f).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function Zf(l){return new ta(l)}var Sr=ta.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,f){this._url=l,f=A(this,f),f.detectRetina&&It.retina&&f.maxZoom>0?(f.tileSize=Math.floor(f.tileSize/2),f.zoomReverse?(f.zoomOffset--,f.minZoom=Math.min(f.maxZoom,f.minZoom+1)):(f.zoomOffset++,f.maxZoom=Math.max(f.minZoom,f.maxZoom-1)),f.minZoom=Math.max(0,f.minZoom)):f.zoomReverse?f.minZoom=Math.min(f.maxZoom,f.minZoom):f.maxZoom=Math.max(f.minZoom,f.maxZoom),typeof f.subdomains=="string"&&(f.subdomains=f.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,f){return this._url===l&&f===void 0&&(f=!0),this._url=l,f||this.redraw(),this},createTile:function(l,f){var y=document.createElement("img");return Jt(y,"load",u(this._tileOnLoad,this,f,y)),Jt(y,"error",u(this._tileOnError,this,f,y)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(y.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(y.referrerPolicy=this.options.referrerPolicy),y.alt="",y.src=this.getTileUrl(l),y},getTileUrl:function(l){var f={r:It.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var y=this._globalTileRange.max.y-l.y;this.options.tms&&(f.y=y),f["-y"]=y}return z(this._url,r(f,this.options))},_tileOnLoad:function(l,f){It.ielt9?setTimeout(u(l,this,null,f),0):l(null,f)},_tileOnError:function(l,f,y){var T=this.options.errorTileUrl;T&&f.getAttribute("src")!==T&&(f.src=T),l(y,f)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,f=this.options.maxZoom,y=this.options.zoomReverse,T=this.options.zoomOffset;return y&&(l=f-l),l+T},_getSubdomain:function(l){var f=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[f]},_abortLoading:function(){var l,f;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(f=this._tiles[l].el,f.onload=g,f.onerror=g,!f.complete)){f.src=N;var y=this._tiles[l].coords;je(f),delete this._tiles[l],this.fire("tileabort",{tile:f,coords:y})}},_removeTile:function(l){var f=this._tiles[l];if(f)return f.el.setAttribute("src",N),ta.prototype._removeTile.call(this,l)},_tileReady:function(l,f,y){if(!(!this._map||y&&y.getAttribute("src")===N))return ta.prototype._tileReady.call(this,l,f,y)}});function ki(l,f){return new Sr(l,f)}var cl=Sr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,f){this._url=l;var y=r({},this.defaultWmsParams);for(var T in f)T in this.options||(y[T]=f[T]);f=A(this,f);var C=f.detectRetina&&It.retina?2:1,B=this.getTileSize();y.width=B.x*C,y.height=B.y*C,this.wmsParams=y},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var f=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[f]=this._crs.code,Sr.prototype.onAdd.call(this,l)},getTileUrl:function(l){var f=this._tileCoordsToNwSe(l),y=this._crs,T=q(y.project(f[0]),y.project(f[1])),C=T.min,B=T.max,J=(this._wmsVersion>=1.3&&this._crs===Nu?[C.y,C.x,B.y,B.x]:[C.x,C.y,B.x,B.y]).join(","),ot=Sr.prototype.getTileUrl.call(this,l);return ot+E(this.wmsParams,ot,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+J},setParams:function(l,f){return r(this.wmsParams,l),f||this.redraw(),this}});function Oi(l,f){return new cl(l,f)}Sr.WMS=cl,ki.wms=Oi;var ui=Ji.extend({options:{padding:.1},initialize:function(l){A(this,l),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),se(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,f){var y=this._map.getZoomScale(f,this._zoom),T=this._map.getSize().multiplyBy(.5+this.options.padding),C=this._map.project(this._center,f),B=T.multiplyBy(-y).add(C).subtract(this._map._getNewPixelOrigin(l,f));It.any3d?Ws(this._container,B,y):Fe(this._container,B)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,f=this._map.getSize(),y=this._map.containerPointToLayerPoint(f.multiplyBy(-l)).round();this._bounds=new I(y,y.add(f.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),hc=ui.extend({options:{tolerance:0},getEvents:function(){var l=ui.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ui.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");Jt(l,"mousemove",this._onMouseMove,this),Jt(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Jt(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){et(this._redrawRequest),delete this._ctx,je(this._container),Ue(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var f in this._layers)l=this._layers[f],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ui.prototype._update.call(this);var l=this._bounds,f=this._container,y=l.getSize(),T=It.retina?2:1;Fe(f,l.min),f.width=T*y.x,f.height=T*y.y,f.style.width=y.x+"px",f.style.height=y.y+"px",It.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){ui.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[p(l)]=l;var f=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=f),this._drawLast=f,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var f=l._order,y=f.next,T=f.prev;y?y.prev=T:this._drawLast=T,T?T.next=y:this._drawFirst=y,delete l._order,delete this._layers[p(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var f=l.options.dashArray.split(/[, ]+/),y=[],T,C;for(C=0;C<f.length;C++){if(T=Number(f[C]),isNaN(T))return;y.push(T)}l.options._dashArray=y}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var f=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new I,this._redrawBounds.extend(l._pxBounds.min.subtract([f,f])),this._redrawBounds.extend(l._pxBounds.max.add([f,f]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var f=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,f.x,f.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,f=this._redrawBounds;if(this._ctx.save(),f){var y=f.getSize();this._ctx.beginPath(),this._ctx.rect(f.min.x,f.min.y,y.x,y.y),this._ctx.clip()}this._drawing=!0;for(var T=this._drawFirst;T;T=T.next)l=T.layer,(!f||l._pxBounds&&l._pxBounds.intersects(f))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,f){if(this._drawing){var y,T,C,B,J=l._parts,ot=J.length,ft=this._ctx;if(ot){for(ft.beginPath(),y=0;y<ot;y++){for(T=0,C=J[y].length;T<C;T++)B=J[y][T],ft[T?"lineTo":"moveTo"](B.x,B.y);f&&ft.closePath()}this._fillStroke(ft,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var f=l._point,y=this._ctx,T=Math.max(Math.round(l._radius),1),C=(Math.max(Math.round(l._radiusY),1)||T)/T;C!==1&&(y.save(),y.scale(1,C)),y.beginPath(),y.arc(f.x,f.y/C,T,0,Math.PI*2,!1),C!==1&&y.restore(),this._fillStroke(y,l)}},_fillStroke:function(l,f){var y=f.options;y.fill&&(l.globalAlpha=y.fillOpacity,l.fillStyle=y.fillColor||y.color,l.fill(y.fillRule||"evenodd")),y.stroke&&y.weight!==0&&(l.setLineDash&&l.setLineDash(f.options&&f.options._dashArray||[]),l.globalAlpha=y.opacity,l.lineWidth=y.weight,l.strokeStyle=y.color,l.lineCap=y.lineCap,l.lineJoin=y.lineJoin,l.stroke())},_onClick:function(l){for(var f=this._map.mouseEventToLayerPoint(l),y,T,C=this._drawFirst;C;C=C.next)y=C.layer,y.options.interactive&&y._containsPoint(f)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(y))&&(T=y);this._fireEvent(T?[T]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var f=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,f)}},_handleMouseOut:function(l){var f=this._hoveredLayer;f&&(an(this._container,"leaflet-interactive"),this._fireEvent([f],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,f){if(!this._mouseHoverThrottled){for(var y,T,C=this._drawFirst;C;C=C.next)y=C.layer,y.options.interactive&&y._containsPoint(f)&&(T=y);T!==this._hoveredLayer&&(this._handleMouseOut(l),T&&(se(this._container,"leaflet-interactive"),this._fireEvent([T],l,"mouseover"),this._hoveredLayer=T)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,f,y){this._map._fireDOMEvent(f,y||f.type,l)},_bringToFront:function(l){var f=l._order;if(f){var y=f.next,T=f.prev;if(y)y.prev=T;else return;T?T.next=y:y&&(this._drawFirst=y),f.prev=this._drawLast,this._drawLast.next=f,f.next=null,this._drawLast=f,this._requestRedraw(l)}},_bringToBack:function(l){var f=l._order;if(f){var y=f.next,T=f.prev;if(T)T.next=y;else return;y?y.prev=T:T&&(this._drawLast=T),f.prev=null,f.next=this._drawFirst,this._drawFirst.prev=f,this._drawFirst=f,this._requestRedraw(l)}}});function ul(l){return It.canvas?new hc(l):null}var Tr=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Pu={_initContainer:function(){this._container=fe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ui.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var f=l._container=Tr("shape");se(f,"leaflet-vml-shape "+(this.options.className||"")),f.coordsize="1 1",l._path=Tr("path"),f.appendChild(l._path),this._updateStyle(l),this._layers[p(l)]=l},_addPath:function(l){var f=l._container;this._container.appendChild(f),l.options.interactive&&l.addInteractiveTarget(f)},_removePath:function(l){var f=l._container;je(f),l.removeInteractiveTarget(f),delete this._layers[p(l)]},_updateStyle:function(l){var f=l._stroke,y=l._fill,T=l.options,C=l._container;C.stroked=!!T.stroke,C.filled=!!T.fill,T.stroke?(f||(f=l._stroke=Tr("stroke")),C.appendChild(f),f.weight=T.weight+"px",f.color=T.color,f.opacity=T.opacity,T.dashArray?f.dashStyle=O(T.dashArray)?T.dashArray.join(" "):T.dashArray.replace(/( *, *)/g," "):f.dashStyle="",f.endcap=T.lineCap.replace("butt","flat"),f.joinstyle=T.lineJoin):f&&(C.removeChild(f),l._stroke=null),T.fill?(y||(y=l._fill=Tr("fill")),C.appendChild(y),y.color=T.fillColor||T.color,y.opacity=T.fillOpacity):y&&(C.removeChild(y),l._fill=null)},_updateCircle:function(l){var f=l._point.round(),y=Math.round(l._radius),T=Math.round(l._radiusY||y);this._setPath(l,l._empty()?"M0 0":"AL "+f.x+","+f.y+" "+y+","+T+" 0,"+65535*360)},_setPath:function(l,f){l._path.v=f},_bringToFront:function(l){Bn(l._container)},_bringToBack:function(l){no(l._container)}},Ts=It.vml?Tr:Nt,ea=ui.extend({_initContainer:function(){this._container=Ts("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ts("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){je(this._container),Ue(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){ui.prototype._update.call(this);var l=this._bounds,f=l.getSize(),y=this._container;(!this._svgSize||!this._svgSize.equals(f))&&(this._svgSize=f,y.setAttribute("width",f.x),y.setAttribute("height",f.y)),Fe(y,l.min),y.setAttribute("viewBox",[l.min.x,l.min.y,f.x,f.y].join(" ")),this.fire("update")}},_initPath:function(l){var f=l._path=Ts("path");l.options.className&&se(f,l.options.className),l.options.interactive&&se(f,"leaflet-interactive"),this._updateStyle(l),this._layers[p(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){je(l._path),l.removeInteractiveTarget(l._path),delete this._layers[p(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var f=l._path,y=l.options;f&&(y.stroke?(f.setAttribute("stroke",y.color),f.setAttribute("stroke-opacity",y.opacity),f.setAttribute("stroke-width",y.weight),f.setAttribute("stroke-linecap",y.lineCap),f.setAttribute("stroke-linejoin",y.lineJoin),y.dashArray?f.setAttribute("stroke-dasharray",y.dashArray):f.removeAttribute("stroke-dasharray"),y.dashOffset?f.setAttribute("stroke-dashoffset",y.dashOffset):f.removeAttribute("stroke-dashoffset")):f.setAttribute("stroke","none"),y.fill?(f.setAttribute("fill",y.fillColor||y.color),f.setAttribute("fill-opacity",y.fillOpacity),f.setAttribute("fill-rule",y.fillRule||"evenodd")):f.setAttribute("fill","none"))},_updatePoly:function(l,f){this._setPath(l,Xt(l._parts,f))},_updateCircle:function(l){var f=l._point,y=Math.max(Math.round(l._radius),1),T=Math.max(Math.round(l._radiusY),1)||y,C="a"+y+","+T+" 0 1,0 ",B=l._empty()?"M0 0":"M"+(f.x-y)+","+f.y+C+y*2+",0 "+C+-y*2+",0 ";this._setPath(l,B)},_setPath:function(l,f){l._path.setAttribute("d",f)},_bringToFront:function(l){Bn(l._path)},_bringToBack:function(l){no(l._path)}});It.vml&&ea.include(Pu);function hl(l){return It.svg||It.vml?new ea(l):null}_e.include({getRenderer:function(l){var f=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return f||(f=this._renderer=this._createRenderer()),this.hasLayer(f)||this.addLayer(f),f},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var f=this._paneRenderers[l];return f===void 0&&(f=this._createRenderer({pane:l}),this._paneRenderers[l]=f),f},_createRenderer:function(l){return this.options.preferCanvas&&ul(l)||hl(l)}});var oo=Qo.extend({initialize:function(l,f){Qo.prototype.initialize.call(this,this._boundsToLatLngs(l),f)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=mt(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function Wm(l,f){return new oo(l,f)}ea.create=Ts,ea.pointsToPath=Xt,Qs.geometryToLayer=Yn,Qs.coordsToLatLng=oc,Qs.coordsToLatLngs=sl,Qs.latLngToCoords=ac,Qs.latLngsToCoords=rl,Qs.getFeature=br,Qs.asFeature=lc,_e.mergeOptions({boxZoom:!0});var hi=bs.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){Jt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ue(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){je(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Vo(),$l(),this._startPoint=this._map.mouseEventToContainerPoint(l),Jt(document,{contextmenu:yr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=fe("div","leaflet-zoom-box",this._container),se(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var f=new I(this._point,this._startPoint),y=f.getSize();Fe(this._box,f.min),this._box.style.width=y.x+"px",this._box.style.height=y.y+"px"},_finish:function(){this._moved&&(je(this._box),an(this._container,"leaflet-crosshair")),ys(),Fa(),Ue(document,{contextmenu:yr,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var f=new at(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(f).fire("boxzoomend",{boxZoomBounds:f})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});_e.addInitHook("addHandler","boxZoom",hi),_e.mergeOptions({doubleClickZoom:!0});var fc=bs.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var f=this._map,y=f.getZoom(),T=f.options.zoomDelta,C=l.originalEvent.shiftKey?y-T:y+T;f.options.doubleClickZoom==="center"?f.setZoom(C):f.setZoomAround(l.containerPoint,C)}});_e.addInitHook("addHandler","doubleClickZoom",fc),_e.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var As=bs.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new vr(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}se(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){an(this._map._container,"leaflet-grab"),an(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var f=mt(this._map.options.maxBounds);this._offsetLimit=q(this._map.latLngToContainerPoint(f.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(f.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var f=this._lastTime=+new Date,y=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(y),this._times.push(f),this._prunePositions(f)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),f=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=f.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,f){return l-(l-f)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),f=this._offsetLimit;l.x<f.min.x&&(l.x=this._viscousLimit(l.x,f.min.x)),l.y<f.min.y&&(l.y=this._viscousLimit(l.y,f.min.y)),l.x>f.max.x&&(l.x=this._viscousLimit(l.x,f.max.x)),l.y>f.max.y&&(l.y=this._viscousLimit(l.y,f.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,f=Math.round(l/2),y=this._initialWorldOffset,T=this._draggable._newPos.x,C=(T-f+y)%l+f-y,B=(T+f+y)%l-f-y,J=Math.abs(C+y)<Math.abs(B+y)?C:B;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=J},_onDragEnd:function(l){var f=this._map,y=f.options,T=!y.inertia||l.noInertia||this._times.length<2;if(f.fire("dragend",l),T)f.fire("moveend");else{this._prunePositions(+new Date);var C=this._lastPos.subtract(this._positions[0]),B=(this._lastTime-this._times[0])/1e3,J=y.easeLinearity,ot=C.multiplyBy(J/B),ft=ot.distanceTo([0,0]),St=Math.min(y.inertiaMaxSpeed,ft),Rt=ot.multiplyBy(St/ft),Ft=St/(y.inertiaDeceleration*J),le=Rt.multiplyBy(-Ft/2).round();!le.x&&!le.y?f.fire("moveend"):(le=f._limitOffset(le,f.options.maxBounds),$(function(){f.panBy(le,{duration:Ft,easeLinearity:J,noMoveStart:!0,animate:!0})}))}}});_e.addInitHook("addHandler","dragging",As),_e.mergeOptions({keyboard:!0,keyboardPanDelta:80});var zu=bs.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),Jt(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ue(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,f=document.documentElement,y=l.scrollTop||f.scrollTop,T=l.scrollLeft||f.scrollLeft;this._map._container.focus(),window.scrollTo(T,y)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var f=this._panKeys={},y=this.keyCodes,T,C;for(T=0,C=y.left.length;T<C;T++)f[y.left[T]]=[-1*l,0];for(T=0,C=y.right.length;T<C;T++)f[y.right[T]]=[l,0];for(T=0,C=y.down.length;T<C;T++)f[y.down[T]]=[0,l];for(T=0,C=y.up.length;T<C;T++)f[y.up[T]]=[0,-1*l]},_setZoomDelta:function(l){var f=this._zoomKeys={},y=this.keyCodes,T,C;for(T=0,C=y.zoomIn.length;T<C;T++)f[y.zoomIn[T]]=l;for(T=0,C=y.zoomOut.length;T<C;T++)f[y.zoomOut[T]]=-l},_addHooks:function(){Jt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ue(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var f=l.keyCode,y=this._map,T;if(f in this._panKeys){if(!y._panAnim||!y._panAnim._inProgress)if(T=this._panKeys[f],l.shiftKey&&(T=V(T).multiplyBy(3)),y.options.maxBounds&&(T=y._limitOffset(V(T),y.options.maxBounds)),y.options.worldCopyJump){var C=y.wrapLatLng(y.unproject(y.project(y.getCenter()).add(T)));y.panTo(C)}else y.panBy(T)}else if(f in this._zoomKeys)y.setZoom(y.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[f]);else if(f===27&&y._popup&&y._popup.options.closeOnEscapeKey)y.closePopup();else return;yr(l)}}});_e.addInitHook("addHandler","keyboard",zu),_e.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var fl=bs.extend({addHooks:function(){Jt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ue(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var f=ii(l),y=this._map.options.wheelDebounceTime;this._delta+=f,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var T=Math.max(y-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),T),yr(l)},_performZoom:function(){var l=this._map,f=l.getZoom(),y=this._map.options.zoomSnap||0;l._stop();var T=this._delta/(this._map.options.wheelPxPerZoomLevel*4),C=4*Math.log(2/(1+Math.exp(-Math.abs(T))))/Math.LN2,B=y?Math.ceil(C/y)*y:C,J=l._limitZoom(f+(this._delta>0?B:-B))-f;this._delta=0,this._startTime=null,J&&(l.options.scrollWheelZoom==="center"?l.setZoom(f+J):l.setZoomAround(this._lastMousePos,f+J))}});_e.addInitHook("addHandler","scrollWheelZoom",fl);var ao=600;_e.mergeOptions({tapHold:It.touchNative&&It.safari&&It.mobile,tapTolerance:15});var dc=bs.extend({addHooks:function(){Jt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ue(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var f=l.touches[0];this._startPos=this._newPos=new K(f.clientX,f.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Jt(document,"touchend",pn),Jt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",f))},this),ao),Jt(document,"touchend touchcancel contextmenu",this._cancel,this),Jt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Ue(document,"touchend",pn),Ue(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Ue(document,"touchend touchcancel contextmenu",this._cancel,this),Ue(document,"touchmove",this._onMove,this)},_onMove:function(l){var f=l.touches[0];this._newPos=new K(f.clientX,f.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,f){var y=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:f.screenX,screenY:f.screenY,clientX:f.clientX,clientY:f.clientY});y._simulated=!0,f.target.dispatchEvent(y)}});_e.addInitHook("addHandler","tapHold",dc),_e.mergeOptions({touchZoom:It.touch,bounceAtZoomLimits:!0});var Uu=bs.extend({addHooks:function(){se(this._map._container,"leaflet-touch-zoom"),Jt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){an(this._map._container,"leaflet-touch-zoom"),Ue(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var f=this._map;if(!(!l.touches||l.touches.length!==2||f._animatingZoom||this._zooming)){var y=f.mouseEventToContainerPoint(l.touches[0]),T=f.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=f.getSize()._divideBy(2),this._startLatLng=f.containerPointToLatLng(this._centerPoint),f.options.touchZoom!=="center"&&(this._pinchStartLatLng=f.containerPointToLatLng(y.add(T)._divideBy(2))),this._startDist=y.distanceTo(T),this._startZoom=f.getZoom(),this._moved=!1,this._zooming=!0,f._stop(),Jt(document,"touchmove",this._onTouchMove,this),Jt(document,"touchend touchcancel",this._onTouchEnd,this),pn(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var f=this._map,y=f.mouseEventToContainerPoint(l.touches[0]),T=f.mouseEventToContainerPoint(l.touches[1]),C=y.distanceTo(T)/this._startDist;if(this._zoom=f.getScaleZoom(C,this._startZoom),!f.options.bounceAtZoomLimits&&(this._zoom<f.getMinZoom()&&C<1||this._zoom>f.getMaxZoom()&&C>1)&&(this._zoom=f._limitZoom(this._zoom)),f.options.touchZoom==="center"){if(this._center=this._startLatLng,C===1)return}else{var B=y._add(T)._divideBy(2)._subtract(this._centerPoint);if(C===1&&B.x===0&&B.y===0)return;this._center=f.unproject(f.project(this._pinchStartLatLng,this._zoom).subtract(B),this._zoom)}this._moved||(f._moveStart(!0,!1),this._moved=!0),et(this._animRequest);var J=u(f._move,f,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(J,this,!0),pn(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,et(this._animRequest),Ue(document,"touchmove",this._onTouchMove,this),Ue(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});_e.addInitHook("addHandler","touchZoom",Uu),_e.BoxZoom=hi,_e.DoubleClickZoom=fc,_e.Drag=As,_e.Keyboard=zu,_e.ScrollWheelZoom=fl,_e.TapHold=dc,_e.TouchZoom=Uu,e.Bounds=I,e.Browser=It,e.CRS=Dt,e.Canvas=hc,e.Circle=rc,e.CircleMarker=Xo,e.Class=X,e.Control=_i,e.DivIcon=Gf,e.DivOverlay=Xn,e.DomEvent=tc,e.DomUtil=Go,e.Draggable=vr,e.Evented=U,e.FeatureGroup=ws,e.GeoJSON=Qs,e.GridLayer=ta,e.Handler=bs,e.Icon=xs,e.ImageOverlay=Ko,e.LatLng=vt,e.LatLngBounds=at,e.Layer=Ji,e.LayerGroup=Yo,e.LineUtil=Hm,e.Map=_e,e.Marker=il,e.Mixin=Pm,e.Path=Ss,e.Point=K,e.PolyUtil=Ru,e.Polygon=Qo,e.Polyline=Xs,e.Popup=al,e.PosAnimation=Zo,e.Projection=Nf,e.Rectangle=oo,e.Renderer=ui,e.SVG=ea,e.SVGOverlay=uc,e.TileLayer=Sr,e.Tooltip=ll,e.Transformation=Ke,e.Util=k,e.VideoOverlay=xr,e.bind=u,e.bounds=q,e.canvas=ul,e.circle=Hf,e.circleMarker=Bf,e.control=Ys,e.divIcon=Zm,e.extend=r,e.featureGroup=zf,e.geoJSON=cc,e.geoJson=ol,e.gridLayer=Zf,e.icon=tl,e.imageOverlay=Vf,e.latLng=gt,e.latLngBounds=mt,e.layerGroup=Vm,e.map=Cu,e.marker=Uf,e.point=V,e.polygon=qm,e.polyline=jm,e.popup=qf,e.rectangle=Wm,e.setOptions=A,e.stamp=p,e.svg=hl,e.svgOverlay=jf,e.tileLayer=ki,e.tooltip=Gm,e.transformation=tn,e.version=s,e.videoOverlay=Jo;var Bu=window.L;e.noConflict=function(){return window.L=Bu,this},window.L=e}))})(Ch,Ch.exports)),Ch.exports}var jL=VL();const yn=tf(jL);(function(n,t,e){function s(r,a){for(;(r=r.parentElement)&&!r.classList.contains(a););return r}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(r,a){this._map=r,this._container=r._container,this._overlayPane=r._panes.overlayPane,this._popupPane=r._panes.popupPane,a&&a.shapeOptions&&(a.shapeOptions=L.Util.extend({},this.options.shapeOptions,a.shapeOptions)),L.setOptions(this,a);var u=L.version.split(".");parseInt(u[0],10)===1&&parseInt(u[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(L.DomUtil.disableTextSelection(),r.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(r){L.setOptions(this,r)},_fireCreatedEvent:function(r){this._map.fire(L.Draw.Event.CREATED,{layer:r,layerType:this.type})},_cancelDrawing:function(r){r.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(r,a){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,a&&a.drawError&&(a.drawError=L.Util.extend({},this.options.drawError,a.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,r,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var r=this._markers.pop(),a=this._poly,u=a.getLatLngs(),h=u.splice(-1,1)[0];this._poly.setLatLngs(u),this._markerGroup.removeLayer(r),a.getLatLngs().length<2&&this._map.removeLayer(a),this._vertexChanged(h,!1)}},addVertex:function(r){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(r))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(r)),this._poly.addLatLng(r),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(r,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var r=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),a=this._poly.newLatLngIntersects(r[r.length-1]);if(!this.options.allowIntersection&&a||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(r){var a=this._map.mouseEventToLayerPoint(r.originalEvent),u=this._map.layerPointToLatLng(a);this._currentLatLng=u,this._updateTooltip(u),this._updateGuide(a),this._mouseMarker.setLatLng(u),L.DomEvent.preventDefault(r.originalEvent)},_vertexChanged:function(r,a){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(r,a),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(r){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(r),this._clickHandled=!0,this._disableNewMarkers();var a=r.originalEvent,u=a.clientX,h=a.clientY;this._startPoint.call(this,u,h)}},_startPoint:function(r,a){this._mouseDownOrigin=L.point(r,a)},_onMouseUp:function(r){var a=r.originalEvent,u=a.clientX,h=a.clientY;this._endPoint.call(this,u,h,r),this._clickHandled=null},_endPoint:function(r,a,u){if(this._mouseDownOrigin){var h=L.point(r,a).distanceTo(this._mouseDownOrigin),p=this._calculateFinishDistance(u.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(u.latlng),this._finishShape()):p<10&&L.Browser.touch?this._finishShape():Math.abs(h)<9*(n.devicePixelRatio||1)&&this.addVertex(u.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(r){var a,u,h=r.originalEvent;!h.touches||!h.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(a=h.touches[0].clientX,u=h.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,a,u),this._endPoint.call(this,a,u,r),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(r){var a;if(this._markers.length>0){var u;if(this.type===L.Draw.Polyline.TYPE)u=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;u=this._markers[0]}var h=this._map.latLngToContainerPoint(u.getLatLng()),p=new L.Marker(r,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),m=this._map.latLngToContainerPoint(p.getLatLng());a=h.distanceTo(m)}else a=1/0;return a},_updateFinishHandler:function(){var r=this._markers.length;r>1&&this._markers[r-1].on("click",this._finishShape,this),r>2&&this._markers[r-2].off("click",this._finishShape,this)},_createMarker:function(r){var a=new L.Marker(r,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(a),a},_updateGuide:function(r){var a=this._markers?this._markers.length:0;a>0&&(r=r||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[a-1].getLatLng()),r))},_updateTooltip:function(r){var a=this._getTooltipText();r&&this._tooltip.updatePosition(r),this._errorShown||this._tooltip.updateContent(a)},_drawGuide:function(r,a){var u,h,p,m=Math.floor(Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2))),_=this.options.guidelineDistance,g=this.options.maxGuideLineLength,b=m>g?m-g:_;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));b<m;b+=this.options.guidelineDistance)u=b/m,h={x:Math.floor(r.x*(1-u)+u*a.x),y:Math.floor(r.y*(1-u)+u*a.y)},p=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),p.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(p,h)},_updateGuideColor:function(r){if(this._guidesContainer)for(var a=0,u=this._guidesContainer.childNodes.length;a<u;a++)this._guidesContainer.childNodes[a].style.backgroundColor=r},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var r,a,u=this.options.showLength;return this._markers.length===0?r={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(a=u?this._getMeasurementString():"",r=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:a}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:a}),r},_updateRunningMeasure:function(r,a){var u,h,p=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(u=p-(a?2:1),h=L.GeometryUtil.isVersion07x()?r.distanceTo(this._markers[u].getLatLng())*(this.options.factor||1):this._map.distance(r,this._markers[u].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=h*(a?1:-1))},_getMeasurementString:function(){var r,a=this._currentLatLng,u=this._markers[this._markers.length-1].getLatLng();return r=L.GeometryUtil.isVersion07x()?u&&a&&a.distanceTo?this._measurementRunningTotal+a.distanceTo(u)*(this.options.factor||1):this._measurementRunningTotal||0:u&&a?this._measurementRunningTotal+this._map.distance(a,u)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(r,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var r=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(r,a){L.Draw.Polyline.prototype.initialize.call(this,r,a),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var r=this._markers.length;r===1&&this._markers[0].on("click",this._finishShape,this),r>2&&(this._markers[r-1].on("dblclick",this._finishShape,this),r>3&&this._markers[r-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var r,a;return this._markers.length===0?r=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(r=L.drawLocal.draw.handlers.polygon.tooltip.cont,a=this._getMeasurementString()):(r=L.drawLocal.draw.handlers.polygon.tooltip.end,a=this._getMeasurementString()),{text:r,subtext:a}},_getMeasurementString:function(){var r=this._area,a="";return r||this.options.showLength?(this.options.showLength&&(a=L.Draw.Polyline.prototype._getMeasurementString.call(this)),r&&(a+="<br>"+L.GeometryUtil.readableArea(r,this.options.metric,this.options.precision)),a):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(r,a){var u;!this.options.allowIntersection&&this.options.showArea&&(u=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(u)),L.Draw.Polyline.prototype._vertexChanged.call(this,r,a)},_cleanUpShape:function(){var r=this._markers.length;r>0&&(this._markers[0].off("click",this._finishShape,this),r>2&&this._markers[r-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(r,a){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,r,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),t.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(t,"mouseup",this._onMouseUp,this),L.DomEvent.off(t,"touchend",this._onMouseUp,this),t.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(r){this._isDrawing=!0,this._startLatLng=r.latlng,L.DomEvent.on(t,"mouseup",this._onMouseUp,this).on(t,"touchend",this._onMouseUp,this).preventDefault(r.originalEvent)},_onMouseMove:function(r){var a=r.latlng;this._tooltip.updatePosition(a),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(a))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(r,a){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,r,a)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(r){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!s(r.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(r){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,r)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,r),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var r=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,r)},_getTooltipText:function(){var r,a,u,h=L.Draw.SimpleShape.prototype._getTooltipText.call(this),p=this._shape,m=this.options.showArea;return p&&(r=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),a=L.GeometryUtil.geodesicArea(r),u=m?L.GeometryUtil.readableArea(a,this.options.metric):""),{text:h.text,subtext:u}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(r,a){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,r,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(r){var a=r.latlng;this._tooltip.updatePosition(a),this._mouseMarker.setLatLng(a),this._marker?(a=this._mouseMarker.getLatLng(),this._marker.setLatLng(a)):(this._marker=this._createMarker(a),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(r){return new L.Marker(r,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(r){this._onMouseMove(r),this._onClick()},_fireCreatedEvent:function(){var r=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(r,a){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,r,a)},_fireCreatedEvent:function(){var r=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)},_createMarker:function(r){return new L.CircleMarker(r,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(r,a){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,r,a)},_drawShape:function(r){if(L.GeometryUtil.isVersion07x())var a=this._startLatLng.distanceTo(r);else var a=this._map.distance(this._startLatLng,r);this._shape?this._shape.setRadius(a):(this._shape=new L.Circle(this._startLatLng,a,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var r=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,r)},_onMouseMove:function(r){var a,u=r.latlng,h=this.options.showRadius,p=this.options.metric;if(this._tooltip.updatePosition(u),this._isDrawing){this._drawShape(u),a=this._shape.getRadius().toFixed(1);var m="";h&&(m=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(a,p,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:m})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(r,a){this._marker=r,L.setOptions(this,a)},addHooks:function(){var r=this._marker;r.dragging.enable(),r.on("dragend",this._onDragEnd,r),this._toggleMarkerHighlight()},removeHooks:function(){var r=this._marker;r.dragging.disable(),r.off("dragend",this._onDragEnd,r),this._toggleMarkerHighlight()},_onDragEnd:function(r){var a=r.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_toggleMarkerHighlight:function(){var r=this._marker._icon;r&&(r.style.display="none",L.DomUtil.hasClass(r,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(r,"leaflet-edit-marker-selected"),this._offsetMarker(r,-4)):(L.DomUtil.addClass(r,"leaflet-edit-marker-selected"),this._offsetMarker(r,4)),r.style.display="")},_offsetMarker:function(r,a){var u=parseInt(r.style.marginTop,10)-a,h=parseInt(r.style.marginLeft,10)-a;r.style.marginTop=u+"px",r.style.marginLeft=h+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(r){this.latlngs=[r._latlngs],r._holes&&(this.latlngs=this.latlngs.concat(r._holes)),this._poly=r,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(r){for(var a=0;a<this._verticesHandlers.length;a++)r(this._verticesHandlers[a])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(r){r.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(r){r.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(r){r.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var r=0;r<this.latlngs.length;r++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[r],this._poly.options.poly))},_updateLatLngs:function(r){this.latlngs=[r.layer._latlngs],r.layer._holes&&(this.latlngs=this.latlngs.concat(r.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(r,a,u){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=r,u&&u.drawError&&(u.drawError=L.Util.extend({},this.options.drawError,u.drawError)),this._latlngs=a,L.setOptions(this,u)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var r=this._poly,a=r._path;r instanceof L.Polygon||(r.options.fill=!1,r.options.editing&&(r.options.editing.fill=!1)),a&&r.options.editing&&r.options.editing.className&&(r.options.original.className&&r.options.original.className.split(" ").forEach(function(u){L.DomUtil.removeClass(a,u)}),r.options.editing.className.split(" ").forEach(function(u){L.DomUtil.addClass(a,u)})),r.setStyle(r.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var r=this._poly,a=r._path;a&&r.options.editing&&r.options.editing.className&&(r.options.editing.className.split(" ").forEach(function(u){L.DomUtil.removeClass(a,u)}),r.options.original.className&&r.options.original.className.split(" ").forEach(function(u){L.DomUtil.addClass(a,u)})),r.setStyle(r.options.original),r._map&&(r._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var r,a,u,h,p=this._defaultShape();for(r=0,u=p.length;r<u;r++)h=this._createMarker(p[r],r),h.on("click",this._onMarkerClick,this),h.on("contextmenu",this._onContextMenu,this),this._markers.push(h);var m,_;for(r=0,a=u-1;r<u;a=r++)(r!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(m=this._markers[a],_=this._markers[r],this._createMiddleMarker(m,_),this._updatePrevNext(m,_))},_createMarker:function(r,a){var u=new L.Marker.Touch(r,{draggable:!0,icon:this.options.icon});return u._origLatLng=r,u._index=a,u.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(u),u},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var r=this._defaultShape(),a=[].splice.apply(r,arguments);return this._poly._convertLatLngs(r,!0),this._poly.redraw(),a},_removeMarker:function(r){var a=r._index;this._markerGroup.removeLayer(r),this._markers.splice(a,1),this._spliceLatLngs(a,1),this._updateIndexes(a,-1),r.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(r){var a=r.target,u=this._poly,h=L.LatLngUtil.cloneLatLng(a._origLatLng);if(L.extend(a._origLatLng,a._latlng),u.options.poly){var p=u._map._editTooltip;if(!u.options.poly.allowIntersection&&u.intersects()){L.extend(a._origLatLng,h),a.setLatLng(h);var m=u.options.color;u.setStyle({color:this.options.drawError.color}),p&&p.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){u.setStyle({color:m}),p&&p.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}a._middleLeft&&a._middleLeft.setLatLng(this._getMiddleLatLng(a._prev,a)),a._middleRight&&a._middleRight.setLatLng(this._getMiddleLatLng(a,a._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var _=this._poly.getLatLngs();this._poly._convertLatLngs(_,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(r){var a=L.Polygon&&this._poly instanceof L.Polygon?4:3,u=r.target;this._defaultShape().length<a||(this._removeMarker(u),this._updatePrevNext(u._prev,u._next),u._middleLeft&&this._markerGroup.removeLayer(u._middleLeft),u._middleRight&&this._markerGroup.removeLayer(u._middleRight),u._prev&&u._next?this._createMiddleMarker(u._prev,u._next):u._prev?u._next||(u._prev._middleRight=null):u._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(r){var a=r.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:a,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(r){var a=this._map.mouseEventToLayerPoint(r.originalEvent.touches[0]),u=this._map.layerPointToLatLng(a),h=r.target;L.extend(h._origLatLng,u),h._middleLeft&&h._middleLeft.setLatLng(this._getMiddleLatLng(h._prev,h)),h._middleRight&&h._middleRight.setLatLng(this._getMiddleLatLng(h,h._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(r,a){this._markerGroup.eachLayer(function(u){u._index>r&&(u._index+=a)})},_createMiddleMarker:function(r,a){var u,h,p,m=this._getMiddleLatLng(r,a),_=this._createMarker(m);_.setOpacity(.6),r._middleRight=a._middleLeft=_,h=function(){_.off("touchmove",h,this);var g=a._index;_._index=g,_.off("click",u,this).on("click",this._onMarkerClick,this),m.lat=_.getLatLng().lat,m.lng=_.getLatLng().lng,this._spliceLatLngs(g,0,m),this._markers.splice(g,0,_),_.setOpacity(1),this._updateIndexes(g,1),a._index++,this._updatePrevNext(r,_),this._updatePrevNext(_,a),this._poly.fire("editstart")},p=function(){_.off("dragstart",h,this),_.off("dragend",p,this),_.off("touchmove",h,this),this._createMiddleMarker(r,_),this._createMiddleMarker(_,a)},u=function(){h.call(this),p.call(this),this._fireEdit()},_.on("click",u,this).on("dragstart",h,this).on("dragend",p,this).on("touchmove",h,this),this._markerGroup.addLayer(_)},_updatePrevNext:function(r,a){r&&(r._next=a),a&&(a._prev=r)},_getMiddleLatLng:function(r,a){var u=this._poly._map,h=u.project(r.getLatLng()),p=u.project(a.getLatLng());return u.unproject(h._add(p)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(r,a){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=r,L.Util.setOptions(this,a)},addHooks:function(){var r=this._shape;this._shape._map&&(this._map=this._shape._map,r.setStyle(r.options.editing),r._map&&(this._map=r._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var r=this._shape;if(r.setStyle(r.options.original),r._map){this._unbindMarker(this._moveMarker);for(var a=0,u=this._resizeMarkers.length;a<u;a++)this._unbindMarker(this._resizeMarkers[a]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(r,a){var u=new L.Marker.Touch(r,{draggable:!0,icon:a,zIndexOffset:10});return this._bindMarker(u),this._markerGroup.addLayer(u),u},_bindMarker:function(r){r.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(r){r.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(r){r.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(r){var a=r.target,u=a.getLatLng();a===this._moveMarker?this._move(u):this._resize(u),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(r){r.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(r){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,r),typeof this._getCorners=="function"){var a=this._getCorners(),u=r.target,h=u._cornerIndex;u.setOpacity(0),this._oppositeCorner=a[(h+2)%4],this._toggleCornerMarkers(0,h)}this._shape.fire("editstart")},_onTouchMove:function(r){var a=this._map.mouseEventToLayerPoint(r.originalEvent.touches[0]),u=this._map.layerPointToLatLng(a);return r.target===this._moveMarker?this._move(u):this._resize(u),this._shape.redraw(),!1},_onTouchEnd:function(r){r.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var r=this._shape.getBounds(),a=r.getCenter();this._moveMarker=this._createMarker(a,this.options.moveIcon)},_createResizeMarker:function(){var r=this._getCorners();this._resizeMarkers=[];for(var a=0,u=r.length;a<u;a++)this._resizeMarkers.push(this._createMarker(r[a],this.options.resizeIcon)),this._resizeMarkers[a]._cornerIndex=a},_onMarkerDragStart:function(r){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,r);var a=this._getCorners(),u=r.target,h=u._cornerIndex;this._oppositeCorner=a[(h+2)%4],this._toggleCornerMarkers(0,h)},_onMarkerDragEnd:function(r){var a,u,h=r.target;h===this._moveMarker&&(a=this._shape.getBounds(),u=a.getCenter(),h.setLatLng(u)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,r)},_move:function(r){for(var a,u=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),h=this._shape.getBounds(),p=h.getCenter(),m=[],_=0,g=u.length;_<g;_++)a=[u[_].lat-p.lat,u[_].lng-p.lng],m.push([r.lat+a[0],r.lng+a[1]]);this._shape.setLatLngs(m),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(r){var a;this._shape.setBounds(L.latLngBounds(r,this._oppositeCorner)),a=this._shape.getBounds(),this._moveMarker.setLatLng(a.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var r=this._shape.getBounds();return[r.getNorthWest(),r.getNorthEast(),r.getSouthEast(),r.getSouthWest()]},_toggleCornerMarkers:function(r){for(var a=0,u=this._resizeMarkers.length;a<u;a++)this._resizeMarkers[a].setOpacity(r)},_repositionCornerMarkers:function(){for(var r=this._getCorners(),a=0,u=this._resizeMarkers.length;a<u;a++)this._resizeMarkers[a].setLatLng(r[a])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var r=this._shape.getLatLng();this._moveMarker=this._createMarker(r,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(r){if(this._resizeMarkers.length){var a=this._getResizeMarkerPoint(r);this._resizeMarkers[0].setLatLng(a)}this._shape.setLatLng(r),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var r=this._shape.getLatLng(),a=this._getResizeMarkerPoint(r);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(a,this.options.resizeIcon))},_getResizeMarkerPoint:function(r){var a=this._shape._radius*Math.cos(Math.PI/4),u=this._map.project(r);return this._map.unproject([u.x+a,u.y-a])},_resize:function(r){var a=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=a.distanceTo(r):radius=this._map.distance(a,r),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(r,a){var u={};if(r.touches!==void 0){if(!r.touches.length)return;u=r.touches[0]}else if(r.pointerType!=="touch"||(u=r,!this._filterClick(r)))return;var h=this._map.mouseEventToContainerPoint(u),p=this._map.mouseEventToLayerPoint(u),m=this._map.layerPointToLatLng(p);this._map.fire(a,{latlng:m,layerPoint:p,containerPoint:h,pageX:u.pageX,pageY:u.pageY,originalEvent:r})},_filterClick:function(r){var a=r.timeStamp||r.originalEvent.timeStamp,u=L.DomEvent._lastClick&&a-L.DomEvent._lastClick;return u&&u>100&&u<500||r.target._simulatedClick&&!r._simulated?(L.DomEvent.stop(r),!1):(L.DomEvent._lastClick=a,!0)},_onTouchStart:function(r){this._map._loaded&&this._touchEvent(r,"touchstart")},_onTouchEnd:function(r){this._map._loaded&&this._touchEvent(r,"touchend")},_onTouchCancel:function(r){if(this._map._loaded){var a="touchcancel";this._detectIE()&&(a="pointercancel"),this._touchEvent(r,a)}},_onTouchLeave:function(r){this._map._loaded&&this._touchEvent(r,"touchleave")},_onTouchMove:function(r){this._map._loaded&&this._touchEvent(r,"touchmove")},_detectIE:function(){var r=n.navigator.userAgent,a=r.indexOf("MSIE ");if(a>0)return parseInt(r.substring(a+5,r.indexOf(".",a)),10);if(r.indexOf("Trident/")>0){var u=r.indexOf("rv:");return parseInt(r.substring(u+3,r.indexOf(".",u)),10)}var h=r.indexOf("Edge/");return h>0&&parseInt(r.substring(h+5,r.indexOf(".",h)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var r=this._icon,a=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?a.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):a.concat(["touchcancel"]),L.DomUtil.addClass(r,"leaflet-clickable"),L.DomEvent.on(r,"click",this._onMouseClick,this),L.DomEvent.on(r,"keypress",this._onKeyPress,this);for(var u=0;u<a.length;u++)L.DomEvent.on(r,a[u],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var r=n.navigator.userAgent,a=r.indexOf("MSIE ");if(a>0)return parseInt(r.substring(a+5,r.indexOf(".",a)),10);if(r.indexOf("Trident/")>0){var u=r.indexOf("rv:");return parseInt(r.substring(u+3,r.indexOf(".",u)),10)}var h=r.indexOf("Edge/");return h>0&&parseInt(r.substring(h+5,r.indexOf(".",h)),10)}}),L.LatLngUtil={cloneLatLngs:function(r){for(var a=[],u=0,h=r.length;u<h;u++)Array.isArray(r[u])?a.push(L.LatLngUtil.cloneLatLngs(r[u])):a.push(this.cloneLatLng(r[u]));return a},cloneLatLng:function(r){return L.latLng(r.lat,r.lng)}},(function(){var r={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(a){var u,h,p=a.length,m=0,_=Math.PI/180;if(p>2){for(var g=0;g<p;g++)u=a[g],h=a[(g+1)%p],m+=(h.lng-u.lng)*_*(2+Math.sin(u.lat*_)+Math.sin(h.lat*_));m=6378137*m*6378137/2}return Math.abs(m)},formattedNumber:function(a,u){var h=parseFloat(a).toFixed(u),p=L.drawLocal.format&&L.drawLocal.format.numeric,m=p&&p.delimiters,_=m&&m.thousands,g=m&&m.decimal;if(_||g){var b=h.split(".");h=_?b[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+_):b[0],g=g||".",b.length>1&&(h=h+g+b[1])}return h},readableArea:function(a,u,_){var p,m,_=L.Util.extend({},r,_);return u?(m=["ha","m"],type=typeof u,type==="string"?m=[u]:type!=="boolean"&&(m=u),p=a>=1e6&&m.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*a,_.km)+" km":a>=1e4&&m.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*a,_.ha)+" ha":L.GeometryUtil.formattedNumber(a,_.m)+" m"):(a/=.836127,p=a>=3097600?L.GeometryUtil.formattedNumber(a/3097600,_.mi)+" mi":a>=4840?L.GeometryUtil.formattedNumber(a/4840,_.ac)+" acres":L.GeometryUtil.formattedNumber(a,_.yd)+" yd"),p},readableDistance:function(a,u,h,p,g){var _,g=L.Util.extend({},r,g);switch(u?typeof u=="string"?u:"metric":h?"feet":p?"nauticalMile":"yards"){case"metric":_=a>1e3?L.GeometryUtil.formattedNumber(a/1e3,g.km)+" km":L.GeometryUtil.formattedNumber(a,g.m)+" m";break;case"feet":a*=3.28083,_=L.GeometryUtil.formattedNumber(a,g.ft)+" ft";break;case"nauticalMile":a*=.53996,_=L.GeometryUtil.formattedNumber(a/1e3,g.nm)+" nm";break;default:a*=1.09361,_=a>1760?L.GeometryUtil.formattedNumber(a/1760,g.mi)+" miles":L.GeometryUtil.formattedNumber(a,g.yd)+" yd"}return _},isVersion07x:function(){var a=L.version.split(".");return parseInt(a[0],10)===0&&parseInt(a[1],10)===7}})})(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(r,a,u,h){return this._checkCounterclockwise(r,u,h)!==this._checkCounterclockwise(a,u,h)&&this._checkCounterclockwise(r,a,u)!==this._checkCounterclockwise(r,a,h)},_checkCounterclockwise:function(r,a,u){return(u.y-r.y)*(a.x-r.x)>(a.y-r.y)*(u.x-r.x)}}),L.Polyline.include({intersects:function(){var r,a,u,h=this._getProjectedPoints(),p=h?h.length:0;if(this._tooFewPointsForIntersection())return!1;for(r=p-1;r>=3;r--)if(a=h[r-1],u=h[r],this._lineSegmentsIntersectsRange(a,u,r-2))return!0;return!1},newLatLngIntersects:function(r,a){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(r),a)},newPointIntersects:function(r,a){var u=this._getProjectedPoints(),h=u?u.length:0,p=u?u[h-1]:null,m=h-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(p,r,m,a?1:0)},_tooFewPointsForIntersection:function(r){var a=this._getProjectedPoints(),u=a?a.length:0;return u+=r||0,!a||u<=3},_lineSegmentsIntersectsRange:function(r,a,u,h){var p,m,_=this._getProjectedPoints();h=h||0;for(var g=u;g>h;g--)if(p=_[g-1],m=_[g],L.LineUtil.segmentsIntersect(r,a,p,m))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var r=[],a=this._defaultShape(),u=0;u<a.length;u++)r.push(this._map.latLngToLayerPoint(a[u]));return r}}),L.Polygon.include({intersects:function(){var r,a,u,h,p=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(r=p.length,a=p[0],u=p[r-1],h=r-2,this._lineSegmentsIntersectsRange(u,a,h,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(r){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,r);var a;this._toolbars={},L.DrawToolbar&&this.options.draw&&(a=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=a,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(a=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=a,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(r){var a,u=L.DomUtil.create("div","leaflet-draw"),h=!1;for(var p in this._toolbars)this._toolbars.hasOwnProperty(p)&&(a=this._toolbars[p].addToolbar(r))&&(h||(L.DomUtil.hasClass(a,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(a.childNodes[0],"leaflet-draw-toolbar-top"),h=!0),u.appendChild(a));return u},onRemove:function(){for(var r in this._toolbars)this._toolbars.hasOwnProperty(r)&&this._toolbars[r].removeToolbar()},setDrawingOptions:function(r){for(var a in this._toolbars)this._toolbars[a]instanceof L.DrawToolbar&&this._toolbars[a].setOptions(r)},_toolbarEnabled:function(r){var a=r.target;for(var u in this._toolbars)this._toolbars[u]!==a&&this._toolbars[u].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(r){L.setOptions(this,r),this._modes={},this._actionButtons=[],this._activeMode=null;var a=L.version.split(".");parseInt(a[0],10)===1&&parseInt(a[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(r){var a,u=L.DomUtil.create("div","leaflet-draw-section"),h=0,p=this._toolbarClass||"",m=this.getModeHandlers(r);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=r,a=0;a<m.length;a++)m[a].enabled&&this._initModeHandler(m[a].handler,this._toolbarContainer,h++,p,m[a].title);if(h)return this._lastButtonIndex=--h,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),u.appendChild(this._toolbarContainer),u.appendChild(this._actionsContainer),u},removeToolbar:function(){for(var r in this._modes)this._modes.hasOwnProperty(r)&&(this._disposeButton(this._modes[r].button,this._modes[r].handler.enable,this._modes[r].handler),this._modes[r].handler.disable(),this._modes[r].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var a=0,u=this._actionButtons.length;a<u;a++)this._disposeButton(this._actionButtons[a].button,this._actionButtons[a].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(r,a,u,h,p){var m=r.type;this._modes[m]={},this._modes[m].handler=r,this._modes[m].button=this._createButton({type:m,title:p,className:h+"-"+m,container:a,callback:this._modes[m].handler.enable,context:this._modes[m].handler}),this._modes[m].buttonIndex=u,this._modes[m].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!n.MSStream},_createButton:function(r){var a=L.DomUtil.create("a",r.className||"",r.container),u=L.DomUtil.create("span","sr-only",r.container);a.href="#",a.appendChild(u),r.title&&(a.title=r.title,u.innerHTML=r.title),r.text&&(a.innerHTML=r.text,u.innerHTML=r.text);var h=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(a,"click",L.DomEvent.stopPropagation).on(a,"mousedown",L.DomEvent.stopPropagation).on(a,"dblclick",L.DomEvent.stopPropagation).on(a,"touchstart",L.DomEvent.stopPropagation).on(a,"click",L.DomEvent.preventDefault).on(a,h,r.callback,r.context),a},_disposeButton:function(r,a){var u=this._detectIOS()?"touchstart":"click";L.DomEvent.off(r,"click",L.DomEvent.stopPropagation).off(r,"mousedown",L.DomEvent.stopPropagation).off(r,"dblclick",L.DomEvent.stopPropagation).off(r,"touchstart",L.DomEvent.stopPropagation).off(r,"click",L.DomEvent.preventDefault).off(r,u,a)},_handlerActivated:function(r){this.disable(),this._activeMode=this._modes[r.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(r){var a,u,h,p,m=this._actionsContainer,_=this.getActions(r),g=_.length;for(u=0,h=this._actionButtons.length;u<h;u++)this._disposeButton(this._actionButtons[u].button,this._actionButtons[u].callback);for(this._actionButtons=[];m.firstChild;)m.removeChild(m.firstChild);for(var b=0;b<g;b++)"enabled"in _[b]&&!_[b].enabled||(a=L.DomUtil.create("li","",m),p=this._createButton({title:_[b].title,text:_[b].text,container:a,callback:_[b].callback,context:_[b].context}),this._actionButtons.push({button:p,callback:_[b].callback}))},_showActionsToolbar:function(){var r=this._activeMode.buttonIndex,a=this._lastButtonIndex,u=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=u+"px",r===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),r===a&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(r){this._map=r,this._popupPane=r._panes.popupPane,this._visible=!1,this._container=r.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(r){return this._container?(r.subtext=r.subtext||"",r.subtext.length!==0||this._singleLineLabel?r.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(r.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+r.subtext+"</span><br />":"")+"<span>"+r.text+"</span>",r.text||r.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(r){var a=this._map.latLngToLayerPoint(r),u=this._container;return this._container&&(this._visible&&(u.style.visibility="inherit"),L.DomUtil.setPosition(u,a)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(r){for(var a in this.options)this.options.hasOwnProperty(a)&&r[a]&&(r[a]=L.extend({},this.options[a],r[a]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,r)},getModeHandlers:function(r){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(r,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(r,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(r,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(r,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(r,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(r,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(r){return[{enabled:r.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:r.completeShape,context:r},{enabled:r.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:r.deleteLastVertex,context:r},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(r){L.setOptions(this,r);for(var a in this._modes)this._modes.hasOwnProperty(a)&&r.hasOwnProperty(a)&&this._modes[a].handler.setOptions(r[a])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(r){r.edit&&(r.edit.selectedPathOptions===void 0&&(r.edit.selectedPathOptions=this.options.edit.selectedPathOptions),r.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,r.edit.selectedPathOptions)),r.remove&&(r.remove=L.extend({},this.options.remove,r.remove)),r.poly&&(r.poly=L.extend({},this.options.poly,r.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,r),this._selectedFeatureCount=0},getModeHandlers:function(r){var a=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(r,{featureGroup:a,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(r,{featureGroup:a}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(r){var a=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return r.removeAllLayers&&a.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),a},addToolbar:function(r){var a=L.Toolbar.prototype.addToolbar.call(this,r);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),a},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var r,a=this.options.featureGroup,u=a.getLayers().length!==0;this.options.edit&&(r=this._modes[L.EditToolbar.Edit.TYPE].button,u?L.DomUtil.removeClass(r,"leaflet-disabled"):L.DomUtil.addClass(r,"leaflet-disabled"),r.setAttribute("title",u?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(r=this._modes[L.EditToolbar.Delete.TYPE].button,u?L.DomUtil.removeClass(r,"leaflet-disabled"):L.DomUtil.addClass(r,"leaflet-disabled"),r.setAttribute("title",u?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(r,a){if(L.Handler.prototype.initialize.call(this,r),L.setOptions(this,a),this._featureGroup=a.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var u=L.version.split(".");parseInt(u[0],10)===1&&parseInt(u[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(r.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),r._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(r){this._revertLayer(r)},this)},save:function(){var r=new L.LayerGroup;this._featureGroup.eachLayer(function(a){a.edited&&(r.addLayer(a),a.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:r})},_backupLayer:function(r){var a=L.Util.stamp(r);this._uneditedLayerProps[a]||(r instanceof L.Polyline||r instanceof L.Polygon||r instanceof L.Rectangle?this._uneditedLayerProps[a]={latlngs:L.LatLngUtil.cloneLatLngs(r.getLatLngs())}:r instanceof L.Circle?this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(r.getLatLng()),radius:r.getRadius()}:(r instanceof L.Marker||r instanceof L.CircleMarker)&&(this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(r.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(r){var a=L.Util.stamp(r);r.edited=!1,this._uneditedLayerProps.hasOwnProperty(a)&&(r instanceof L.Polyline||r instanceof L.Polygon||r instanceof L.Rectangle?r.setLatLngs(this._uneditedLayerProps[a].latlngs):r instanceof L.Circle?(r.setLatLng(this._uneditedLayerProps[a].latlng),r.setRadius(this._uneditedLayerProps[a].radius)):(r instanceof L.Marker||r instanceof L.CircleMarker)&&r.setLatLng(this._uneditedLayerProps[a].latlng),r.fire("revert-edited",{layer:r}))},_enableLayerEdit:function(r){var a,u,h=r.layer||r.target||r;this._backupLayer(h),this.options.poly&&(u=L.Util.extend({},this.options.poly),h.options.poly=u),this.options.selectedPathOptions&&(a=L.Util.extend({},this.options.selectedPathOptions),a.maintainColor&&(a.color=h.options.color,a.fillColor=h.options.fillColor),h.options.original=L.extend({},h.options),h.options.editing=a),h instanceof L.Marker?(h.editing&&h.editing.enable(),h.dragging.enable(),h.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):h.editing.enable()},_disableLayerEdit:function(r){var a=r.layer||r.target||r;a.edited=!1,a.editing&&a.editing.disable(),delete a.options.editing,delete a.options.original,this._selectedPathOptions&&(a instanceof L.Marker?this._toggleMarkerHighlight(a):(a.setStyle(a.options.previousOptions),delete a.options.previousOptions)),a instanceof L.Marker?(a.dragging.disable(),a.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):a.editing.disable()},_onMouseMove:function(r){this._tooltip.updatePosition(r.latlng)},_onMarkerDragEnd:function(r){var a=r.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_onTouchMove:function(r){var a=r.originalEvent.changedTouches[0],u=this._map.mouseEventToLayerPoint(a),h=this._map.layerPointToLatLng(u);r.target.setLatLng(h)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(r,a){if(L.Handler.prototype.initialize.call(this,r),L.Util.setOptions(this,a),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var u=L.version.split(".");parseInt(u[0],10)===1&&parseInt(u[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(r.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(r){this._deletableLayers.addLayer(r),r.fire("revert-deleted",{layer:r})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(r){this._removeLayer({layer:r})},this),this.save()},_enableLayerDelete:function(r){(r.layer||r.target||r).on("click",this._removeLayer,this)},_disableLayerDelete:function(r){var a=r.layer||r.target||r;a.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(a)},_removeLayer:function(r){var a=r.layer||r.target||r;this._deletableLayers.removeLayer(a),this._deletedLayers.addLayer(a),a.fire("deleted")},_onMouseMove:function(r){this._tooltip.updatePosition(r.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);var jg,wx;function qL(){if(wx)return jg;wx=1;const n=1e-6;return jg={DP_TOL:n,EQ_0:function(t){return t<n&&t>-n},EQ:function(t,e){return t-e<n&&t-e>-n},GT:(t,e)=>t-e>n,GE:(t,e)=>t-e>-n,LT:(t,e)=>t-e<-n,LE:(t,e)=>t-e<n},jg}var qg,xx;function GL(){return xx||(xx=1,qg={ILLEGAL_PARAMETERS:new ReferenceError("Illegal Parameters"),ZERO_DIVISION:new Error("Zero division")}),qg}var Gg,Sx;function ZL(){return Sx||(Sx=1,Gg=function(n){n.Matrix=class qc{constructor(e=1,s=0,r=0,a=1,u=0,h=0){this.a=e,this.b=s,this.c=r,this.d=a,this.tx=u,this.ty=h}clone(){return new qc(this.a,this.b,this.c,this.d,this.tx,this.ty)}transform(e){return[e[0]*this.a+e[1]*this.c+this.tx,e[0]*this.b+e[1]*this.d+this.ty]}multiply(e){return new qc(this.a*e.a+this.c*e.b,this.b*e.a+this.d*e.b,this.a*e.c+this.c*e.d,this.b*e.c+this.d*e.d,this.a*e.tx+this.c*e.ty+this.tx,this.b*e.tx+this.d*e.ty+this.ty)}translate(...e){let s,r;if(e.length==1&&e[0]instanceof n.Vector)s=e[0].x,r=e[0].y;else if(e.length==2&&typeof e[0]=="number"&&typeof e[1]=="number")s=e[0],r=e[1];else throw n.Errors.ILLEGAL_PARAMETERS;return this.multiply(new qc(1,0,0,1,s,r))}rotate(e){let s=Math.cos(e),r=Math.sin(e);return this.multiply(new qc(s,r,-r,s,0,0))}scale(e,s){return this.multiply(new qc(e,0,0,s,0,0))}equalTo(e){return!(!n.Utils.EQ(this.tx,e.tx)||!n.Utils.EQ(this.ty,e.ty)||!n.Utils.EQ(this.a,e.a)||!n.Utils.EQ(this.b,e.b)||!n.Utils.EQ(this.c,e.c)||!n.Utils.EQ(this.d,e.d))}},n.matrix=(...t)=>new n.Matrix(...t)}),Gg}var Zg,Tx;function WL(){return Tx||(Tx=1,Zg=class j0{constructor(e,s){this.low=e,this.high=s}get max(){return this.high}interval(e,s){return new j0(e,s)}clone(){return new j0(this.low,this.high)}less_than(e){return this.low<e.low||this.low==e.low&&this.high<e.high}equal_to(e){return this.low==e.low&&this.high==e.high}intersect(e){return!this.not_intersect(e)}not_intersect(e){return this.high<e.low||e.high<this.low}output(){return[this.low,this.high]}maximal_val(e,s){return Math.max(e,s)}val_less_than(e,s){return e<s}}),Zg}var Wg,Ax;function I2(){return Ax||(Ax=1,Wg={RB_TREE_COLOR_RED:0,RB_TREE_COLOR_BLACK:1}),Wg}var Fg,Ex;function FL(){if(Ex)return Fg;Ex=1;let n=WL(),{RB_TREE_COLOR_RED:t,RB_TREE_COLOR_BLACK:e}=I2();return Fg=class{constructor(a=void 0,u=void 0,h=null,p=null,m=null,_=e){this.left=h,this.right=p,this.parent=m,this.color=_,this.item={key:a,value:u},a&&a instanceof Array&&a.length==2&&!Number.isNaN(a[0])&&!Number.isNaN(a[1])&&(this.item.key=new n(Math.min(a[0],a[1]),Math.max(a[0],a[1]))),this.max=this.item.key?this.item.key.max:void 0}isNil(){return this.item.key===void 0&&this.item.value===void 0&&this.left===null&&this.right===null&&this.color===e}less_than(a){return this.item.key.less_than(a.item.key)}equal_to(a){let u=!0;return this.item.value&&a.item.value&&(u=this.item.value.equal_to?this.item.value.equal_to(a.item.value):this.item.value==a.item.value),this.item.key.equal_to(a.item.key)&&u}intersect(a){return this.item.key.intersect(a.item.key)}copy_data(a){this.item.key=a.item.key.clone(),this.item.value=a.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){let a=this.item.key.maximal_val;this.max=a(this.max,this.right.max)}if(this.left&&this.left.max){let a=this.item.key.maximal_val;this.max=a(this.max,this.left.max)}}not_intersect_left_subtree(a){let u=this.item.key.val_less_than,h=this.left.max.high?this.left.max.high:this.left.max;return u(h,a.item.key.low)}not_intersect_right_subtree(a){let u=this.item.key.val_less_than,h=this.right.max.low?this.right.max.low:this.right.item.key.low;return u(a.item.key.high,h)}},Fg}var Yg,Cx;function P2(){if(Cx)return Yg;Cx=1;let n=FL(),{RB_TREE_COLOR_RED:t,RB_TREE_COLOR_BLACK:e}=I2(),s=new n;return Yg=class N2{constructor(){this.root=null}get size(){let u=0;return this.tree_walk(this.root,()=>u++),u}get keys(){let u=[];return this.tree_walk(this.root,h=>u.push(h.item.key.output())),u}get values(){let u=[];return this.tree_walk(this.root,h=>u.push(h.item.value)),u}get items(){let u=[];return this.tree_walk(this.root,h=>u.push({key:h.item.key.output(),value:h.item.value})),u}get isEmpty(){return this.root==null||this.root==s}insert(u,h=u){if(u===void 0)return;let p=new n(u,h,s,s,null,t);return this.tree_insert(p),this.recalc_max(p),p}exist(u,h){let p=new n(u,h);return!!this.tree_search(this.root,p)}remove(u,h){let p=new n(u,h),m=this.tree_search(this.root,p);return m&&this.tree_delete(m),m}search(u){let h=new n(u),p=[];this.tree_search_interval(this.root,h,p);let m=[];return p.forEach(_=>{_.item.value?m.push(_.item.value):m.push(_.item.key.output())},[]),m}forEach(u){this.tree_walk(this.root,h=>u(h.item.key,h.item.value))}map(u){const h=new N2;return this.tree_walk(this.root,p=>h.insert(p.item.key,u(p.item.value,p.item.key))),h}recalc_max(u){let h=u;for(;h.parent!=null;)h.parent.update_max(),h=h.parent}tree_insert(u){let h=this.root,p=null;if(this.root==null||this.root==s)this.root=u;else{for(;h!=s;)p=h,u.less_than(h)?h=h.left:h=h.right;u.parent=p,u.less_than(p)?p.left=u:p.right=u}this.insert_fixup(u)}insert_fixup(u){let h,p;for(h=u;h!=this.root&&h.parent.color==t;)h.parent==h.parent.parent.left?(p=h.parent.parent.right,p.color==t?(h.parent.color=e,p.color=e,h.parent.parent.color=t,h=h.parent.parent):(h==h.parent.right&&(h=h.parent,this.rotate_left(h)),h.parent.color=e,h.parent.parent.color=t,this.rotate_right(h.parent.parent))):(p=h.parent.parent.left,p.color==t?(h.parent.color=e,p.color=e,h.parent.parent.color=t,h=h.parent.parent):(h==h.parent.left&&(h=h.parent,this.rotate_right(h)),h.parent.color=e,h.parent.parent.color=t,this.rotate_left(h.parent.parent)));this.root.color=e}tree_delete(u){let h,p;u.left==s||u.right==s?h=u:h=this.tree_successor(u),h.left!=s?p=h.left:p=h.right,p.parent=h.parent,h==this.root?this.root=p:(h==h.parent.left?h.parent.left=p:h.parent.right=p,h.parent.update_max()),this.recalc_max(p),h!=u&&(u.copy_data(h),u.update_max(),this.recalc_max(u)),h.color==e&&this.delete_fixup(p)}delete_fixup(u){let h=u,p;for(;h!=this.root&&h.parent!=null&&h.color==e;)h==h.parent.left?(p=h.parent.right,p.color==t&&(p.color=e,h.parent.color=t,this.rotate_left(h.parent),p=h.parent.right),p.left.color==e&&p.right.color==e?(p.color=t,h=h.parent):(p.right.color==e&&(p.color=t,p.left.color=e,this.rotate_right(p),p=h.parent.right),p.color=h.parent.color,h.parent.color=e,p.right.color=e,this.rotate_left(h.parent),h=this.root)):(p=h.parent.left,p.color==t&&(p.color=e,h.parent.color=t,this.rotate_right(h.parent),p=h.parent.left),p.left.color==e&&p.right.color==e?(p.color=t,h=h.parent):(p.left.color==e&&(p.color=t,p.right.color=e,this.rotate_left(p),p=h.parent.left),p.color=h.parent.color,h.parent.color=e,p.left.color=e,this.rotate_right(h.parent),h=this.root));h.color=e}tree_search(u,h){if(!(u==null||u==s))return h.equal_to(u)?u:h.less_than(u)?this.tree_search(u.left,h):this.tree_search(u.right,h)}tree_search_interval(u,h,p){u!=null&&u!=s&&(u.left!=s&&!u.not_intersect_left_subtree(h)&&this.tree_search_interval(u.left,h,p),u.intersect(h)&&p.push(u),u.right!=s&&!u.not_intersect_right_subtree(h)&&this.tree_search_interval(u.right,h,p))}local_minimum(u){let h=u;for(;h.left!=null&&h.left!=s;)h=h.left;return h}local_maximum(u){let h=u;for(;h.right!=null&&h.right!=s;)h=h.right;return h}tree_successor(u){let h,p,m;if(u.right!=s)h=this.local_minimum(u.right);else{for(p=u,m=u.parent;m!=null&&m.right==p;)p=m,m=m.parent;h=m}return h}rotate_left(u){let h=u.right;u.right=h.left,h.left!=s&&(h.left.parent=u),h.parent=u.parent,u==this.root?this.root=h:u==u.parent.left?u.parent.left=h:u.parent.right=h,h.left=u,u.parent=h,u!=null&&u!=s&&u.update_max(),h=u.parent,h!=null&&h!=s&&h.update_max()}rotate_right(u){let h=u.left;u.left=h.right,h.right!=s&&(h.right.parent=u),h.parent=u.parent,u==this.root?this.root=h:u==u.parent.left?u.parent.left=h:u.parent.right=h,h.right=u,u.parent=h,u!=null&&u!=s&&u.update_max(),h=u.parent,h!=null&&h!=s&&h.update_max()}tree_walk(u,h){u!=null&&u!=s&&(this.tree_walk(u.left,h),h(u),this.tree_walk(u.right,h))}testRedBlackProperty(){let u=!0;return this.tree_walk(this.root,function(h){h.color==t&&(h.left.color==e&&h.right.color==e||(u=!1))}),u}testBlackHeightProperty(u){let h=0,p=0,m=0;if(u.color==e&&h++,u.left!=s?p=this.testBlackHeightProperty(u.left):p=1,u.right!=s?m=this.testBlackHeightProperty(u.right):m=1,p!=m)throw new Error("Red-black height property violated");return h+=p,h}},Yg}var Xg,Lx;function YL(){if(Lx)return Xg;Lx=1;let n=P2();return Xg=function(t){t.PlanarSet=class extends Set{constructor(){super(),this.index=new n}add(s){let r=this.size;return super.add(s),this.size>r&&this.index.insert(s.box,s),this}delete(s){let r=super.delete(s);return r&&this.index.remove(s.box,s),r}clear(){super.clear(),this.index=new n}search(s){return this.index.search(s)}hit(s){let r=new t.Box(s.x-1,s.y-1,s.x+1,s.y+1);return this.index.search(r).filter(u=>s.on(u))}svg(){return[...this].reduce((r,a)=>r+a.svg(),"")}}},Xg}var Qg,Mx;function XL(){return Mx||(Mx=1,Qg=function(n){n.Point=class z2{constructor(...e){if(this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let s=e[0];if(typeof s[0]=="number"&&typeof s[1]=="number"){this.x=s[0],this.y=s[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="point"){let{x:s,y:r}=e[0];this.x=s,this.y=r;return}if(e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"){this.x=e[0],this.y=e[1];return}throw n.Errors.ILLEGAL_PARAMETERS}}get box(){return new n.Box(this.x,this.y,this.x,this.y)}clone(){return new n.Point(this.x,this.y)}get vertices(){return[this.clone()]}equalTo(e){return n.Utils.EQ(this.x,e.x)&&n.Utils.EQ(this.y,e.y)}lessThan(e){return!!(n.Utils.LT(this.y,e.y)||n.Utils.EQ(this.y,e.y)&&n.Utils.LT(this.x,e.x))}rotate(e,s={x:0,y:0}){var r=s.x+(this.x-s.x)*Math.cos(e)-(this.y-s.y)*Math.sin(e),a=s.y+(this.x-s.x)*Math.sin(e)+(this.y-s.y)*Math.cos(e);return new n.Point(r,a)}translate(...e){if(e.length==1&&e[0]instanceof n.Vector)return new n.Point(this.x+e[0].x,this.y+e[0].y);if(e.length==2&&typeof e[0]=="number"&&typeof e[1]=="number")return new n.Point(this.x+e[0],this.y+e[1]);throw n.Errors.ILLEGAL_PARAMETERS}transform(e){return new n.Point(e.transform([this.x,this.y]))}projectionOn(e){if(this.equalTo(e.pt))return this.clone();let s=new n.Vector(this,e.pt);if(n.Utils.EQ_0(s.cross(e.norm)))return e.pt.clone();let r=s.dot(e.norm),a=e.norm.multiply(r);return this.translate(a)}leftTo(e){let s=new n.Vector(e.pt,this);return n.Utils.GT(s.dot(e.norm),0)}distanceTo(e){let{Distance:s}=n;if(e instanceof z2){let r=e.x-this.x,a=e.y-this.y;return[Math.sqrt(r*r+a*a),new n.Segment(this,e)]}if(e instanceof n.Line)return s.point2line(this,e);if(e instanceof n.Circle)return s.point2circle(this,e);if(e instanceof n.Segment)return s.point2segment(this,e);if(e instanceof n.Arc)return s.point2arc(this,e);if(e instanceof n.Polygon)return s.point2polygon(this,e);if(e instanceof n.PlanarSet)return s.shape2planarSet(this,e)}on(e){if(e instanceof n.Point)return this.equalTo(e);if(e instanceof n.Line)return e.contains(this);if(e instanceof n.Circle)return e.contains(this);if(e instanceof n.Segment)return e.contains(this);if(e instanceof n.Arc)return e.contains(this);if(e instanceof n.Polygon)return e.contains(this)}svg(e={}){let{r:s,stroke:r,strokeWidth:a,fill:u,id:h,className:p}=e,m=h&&h.length>0?`id="${h}"`:"",_=p&&p.length>0?`class="${p}"`:"";return`
<circle cx="${this.x}" cy="${this.y}" r="${s||3}" stroke="${r||"black"}" stroke-width="${a||1}" fill="${u||"red"}" ${m} ${_} />`}toJSON(){return Object.assign({},this,{name:"point"})}},n.point=(...t)=>new n.Point(...t)}),Qg}var $g,kx;function QL(){return kx||(kx=1,$g=function(n){n.Vector=class cp{constructor(...e){if(this.x=0,this.y=0,e.length!==0){if(e.length===1&&e[0]instanceof Array&&e[0].length===2){let s=e[0];if(typeof s[0]=="number"&&typeof s[1]=="number"){this.x=s[0],this.y=s[1];return}}if(e.length===1&&e[0]instanceof Object&&e[0].name==="vector"){let{x:s,y:r}=e[0];this.x=s,this.y=r;return}if(e.length===2){let s=e[0],r=e[1];if(typeof s=="number"&&typeof r=="number"){this.x=s,this.y=r;return}if(s instanceof n.Point&&r instanceof n.Point){this.x=r.x-s.x,this.y=r.y-s.y;return}}throw n.Errors.ILLEGAL_PARAMETERS}}clone(){return new cp(this.x,this.y)}get slope(){let e=Math.atan2(this.y,this.x);return e<0&&(e=2*Math.PI+e),e}get length(){return Math.sqrt(this.dot(this))}equalTo(e){return n.Utils.EQ(this.x,e.x)&&n.Utils.EQ(this.y,e.y)}multiply(e){return new cp(e*this.x,e*this.y)}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}normalize(){if(!n.Utils.EQ_0(this.length))return new cp(this.x/this.length,this.y/this.length);throw n.Errors.ZERO_DIVISION}rotate(e){let r=new n.Point(this.x,this.y).rotate(e);return new n.Vector(r.x,r.y)}rotate90CCW(){return new n.Vector(-this.y,this.x)}rotate90CW(){return new n.Vector(this.y,-this.x)}invert(){return new n.Vector(-this.x,-this.y)}add(e){return new n.Vector(this.x+e.x,this.y+e.y)}subtract(e){return new n.Vector(this.x-e.x,this.y-e.y)}angleTo(e){let s=this.normalize(),r=e.normalize(),a=Math.atan2(s.cross(r),s.dot(r));return a<0&&(a+=2*Math.PI),a}projectionOn(e){let s=e.normalize(),r=this.dot(s);return s.multiply(r)}toJSON(){return Object.assign({},this,{name:"vector"})}},n.vector=(...t)=>new n.Vector(...t)}),$g}var Kg,Ox;function $L(){return Ox||(Ox=1,Kg=function(n){n.Line=class Al{constructor(...e){if(this.pt=new n.Point,this.norm=new n.Vector(0,1),e.length!=0){if(e.length==1&&e[0]instanceof Object&&e[0].name==="line"){let{pt:s,norm:r}=e[0];this.pt=new n.Point(s),this.norm=new n.Vector(r);return}if(e.length==2){let s=e[0],r=e[1];if(s instanceof n.Point&&r instanceof n.Point){this.pt=s,this.norm=Al.points2norm(s,r);return}if(s instanceof n.Point&&r instanceof n.Vector){if(n.Utils.EQ_0(r.x)&&n.Utils.EQ_0(r.y))throw n.Errors.ILLEGAL_PARAMETERS;this.pt=s.clone(),this.norm=r.clone(),this.norm=this.norm.normalize();return}if(s instanceof n.Vector&&r instanceof n.Point){if(n.Utils.EQ_0(s.x)&&n.Utils.EQ_0(s.y))throw n.Errors.ILLEGAL_PARAMETERS;this.pt=r.clone(),this.norm=s.clone(),this.norm=this.norm.normalize();return}}throw n.Errors.ILLEGAL_PARAMETERS}}clone(){return new n.Line(this.pt,this.norm)}get slope(){return new n.Vector(this.norm.y,-this.norm.x).slope}get standard(){let e=this.norm.x,s=this.norm.y,r=this.norm.dot(this.pt);return[e,s,r]}parallelTo(e){return n.Utils.EQ_0(this.norm.cross(e.norm))}incidentTo(e){return this.parallelTo(e)&&this.pt.on(e)}contains(e){if(this.pt.equalTo(e))return!0;let s=new n.Vector(this.pt,e);return n.Utils.EQ_0(this.norm.dot(s))}intersect(e){if(e instanceof n.Point)return this.contains(e)?[e]:[];if(e instanceof n.Line)return Al.intersectLine2Line(this,e);if(e instanceof n.Circle)return Al.intersectLine2Circle(this,e);if(e instanceof n.Segment)return e.intersect(this);if(e instanceof n.Arc)return Al.intersectLine2Arc(this,e);if(e instanceof n.Polygon)return n.Polygon.intersectLine2Polygon(this,e)}distanceTo(e){let{Distance:s}=n;if(e instanceof n.Point){let[r,a]=s.point2line(e,this);return a=a.reverse(),[r,a]}if(e instanceof n.Circle){let[r,a]=s.circle2line(e,this);return a=a.reverse(),[r,a]}if(e instanceof n.Segment){let[r,a]=s.segment2line(e,this);return[r,a.reverse()]}if(e instanceof n.Arc){let[r,a]=s.arc2line(e,this);return[r,a.reverse()]}if(e instanceof n.Polygon){let[r,a]=s.shape2polygon(this,e);return[r,a]}}svg(e,s={}){let r=Al.intersectLine2Box(this,e);if(r.length===0)return"";let a=r[0],u=r.length==2?r[1]:r.find(p=>!p.equalTo(a));return u===void 0&&(u=a),new n.Segment(a,u).svg(s)}toJSON(){return Object.assign({},this,{name:"line"})}static points2norm(e,s){if(e.equalTo(s))throw n.Errors.ILLEGAL_PARAMETERS;return new n.Vector(e,s).normalize().rotate90CCW()}static intersectLine2Line(e,s){let r=[],[a,u,h]=e.standard,[p,m,_]=s.standard,g=a*m-u*p,b=h*m-u*_,x=a*_-h*p;if(!n.Utils.EQ_0(g)){let S=new n.Point(b/g,x/g);r.push(S)}return r}static intersectLine2Circle(e,s){let r=[],a=s.pc.projectionOn(e),u=s.pc.distanceTo(a)[0];if(n.Utils.EQ(u,s.r))r.push(a);else if(n.Utils.LT(u,s.r)){let h=Math.sqrt(s.r*s.r-u*u),p,m;p=e.norm.rotate90CCW().multiply(h),m=a.translate(p),r.push(m),p=e.norm.rotate90CW().multiply(h),m=a.translate(p),r.push(m)}return r}static intersectLine2Box(e,s){let r=[new n.Point(s.xmin,s.ymin),new n.Point(s.xmax,s.ymin),new n.Point(s.xmax,s.ymax),new n.Point(s.xmin,s.ymax)],a=[new n.Segment(r[0],r[1]),new n.Segment(r[1],r[2]),new n.Segment(r[2],r[3]),new n.Segment(r[3],r[0])],u=[];for(let h of a){let p=h.intersect(e);for(let m of p)u.push(m)}return u}static intersectLine2Arc(e,s){let r=[];if(Al.intersectLine2Box(e,s.box).length==0)return r;let a=new n.Circle(s.pc,s.r),u=e.intersect(a);for(let h of u)h.on(s)&&r.push(h);return r}},n.line=(...t)=>new n.Line(...t)}),Kg}var Jg,Dx;function KL(){return Dx||(Dx=1,Jg=function(n){let{Arc:t,vector:e}=n;n.Circle=class U2{constructor(...r){if(this.pc=new n.Point,this.r=1,r.length==1&&r[0]instanceof Object&&r[0].name==="circle"){let{pc:a,r:u}=r[0];this.pc=new n.Point(a),this.r=u;return}else{let[a,u]=[...r];a&&a instanceof n.Point&&(this.pc=a.clone()),u!==void 0&&(this.r=u);return}}clone(){return new n.Circle(this.pc.clone(),this.r)}get center(){return this.pc}get box(){return new n.Box(this.pc.x-this.r,this.pc.y-this.r,this.pc.x+this.r,this.pc.y+this.r)}contains(r){return n.Utils.LE(r.distanceTo(this.center)[0],this.r)}toArc(r=!0){return new n.Arc(this.center,this.r,Math.PI,-Math.PI,r)}intersect(r){if(r instanceof n.Point)return this.contains(r)?[r]:[];if(r instanceof n.Line)return r.intersect(this);if(r instanceof n.Segment)return r.intersect(this);if(r instanceof n.Circle)return U2.intersectCirle2Circle(this,r);if(r instanceof n.Arc)return r.intersect(this);if(r instanceof n.Polygon)return n.Polygon.intersectShape2Polygon(this,r)}distanceTo(r){let{Distance:a}=n,{point2circle:u,circle2circle:h,circle2line:p,segment2circle:m,arc2circle:_}=a;if(r instanceof n.Point){let[g,b]=u(r,this);return b=b.reverse(),[g,b]}if(r instanceof n.Circle){let[g,b]=h(this,r);return[g,b]}if(r instanceof n.Line){let[g,b]=p(this,r);return[g,b]}if(r instanceof n.Segment){let[g,b]=m(r,this);return b=b.reverse(),[g,b]}if(r instanceof n.Arc){let[g,b]=_(r,this);return b=b.reverse(),[g,b]}if(r instanceof n.Polygon){let[g,b]=a.shape2polygon(this,r);return[g,b]}if(r instanceof n.PlanarSet){let[g,b]=a.shape2planarSet(this,r);return[g,b]}}static intersectCirle2Circle(r,a){let u=[];if(r.box.not_intersect(a.box))return u;let h=new n.Vector(r.pc,a.pc),p=r.r,m=a.r;if(n.Utils.EQ_0(p)||n.Utils.EQ_0(m))return u;if(n.Utils.EQ_0(h.x)&&n.Utils.EQ_0(h.y)&&n.Utils.EQ(p,m))return u.push(r.pc.translate(-p,0)),u;let _=r.pc.distanceTo(a.pc)[0];if(n.Utils.GT(_,p+m)||n.Utils.LT(_,Math.abs(p-m)))return u;h.x/=_,h.y/=_;let g;if(n.Utils.EQ(_,p+m)||n.Utils.EQ(_,Math.abs(p-m)))return g=r.pc.translate(p*h.x,p*h.y),u.push(g),u;let b=p*p/(2*_)-m*m/(2*_)+_/2,x=r.pc.translate(b*h.x,b*h.y),S=Math.sqrt(p*p-b*b);return g=x.translate(h.rotate90CCW().multiply(S)),u.push(g),g=x.translate(h.rotate90CW().multiply(S)),u.push(g),u}svg(r={}){let{stroke:a,strokeWidth:u,fill:h,fillOpacity:p,id:m,className:_}=r,g=m&&m.length>0?`id="${m}"`:"",b=_&&_.length>0?`class="${_}"`:"";return`
<circle cx="${this.pc.x}" cy="${this.pc.y}" r="${this.r}" stroke="${a||"black"}" stroke-width="${u||1}" fill="${h||"none"}" fill-opacity="${p||1}" ${g} ${b} />`}toJSON(){return Object.assign({},this,{name:"circle"})}},n.circle=(...s)=>new n.Circle(...s)}),Jg}var t0,Rx;function JL(){return Rx||(Rx=1,t0=function(n){n.Segment=class Ea{constructor(...e){if(this.ps=new n.Point,this.pe=new n.Point,e.length!=0){if(e.length==1&&e[0]instanceof Array&&e[0].length==4){let s=e[0];this.ps=new n.Point(s[0],s[1]),this.pe=new n.Point(s[2],s[3]);return}if(e.length==1&&e[0]instanceof Object&&e[0].name==="segment"){let{ps:s,pe:r}=e[0];this.ps=new n.Point(s.x,s.y),this.pe=new n.Point(r.x,r.y);return}if(e.length==2&&e[0]instanceof n.Point&&e[1]instanceof n.Point){this.ps=e[0].clone(),this.pe=e[1].clone();return}if(e.length==4){this.ps=new n.Point(e[0],e[1]),this.pe=new n.Point(e[2],e[3]);return}throw n.Errors.ILLEGAL_PARAMETERS}}clone(){return new n.Segment(this.start,this.end)}get start(){return this.ps}get end(){return this.pe}get vertices(){return[this.ps.clone(),this.pe.clone()]}get length(){return this.start.distanceTo(this.end)[0]}get slope(){return new n.Vector(this.start,this.end).slope}get box(){return new n.Box(Math.min(this.start.x,this.end.x),Math.min(this.start.y,this.end.y),Math.max(this.start.x,this.end.x),Math.max(this.start.y,this.end.y))}equalTo(e){return this.ps.equalTo(e.ps)&&this.pe.equalTo(e.pe)}contains(e){return n.Utils.EQ_0(this.distanceToPoint(e))}intersect(e){if(e instanceof n.Point)return this.contains(e)?[e]:[];if(e instanceof n.Line)return Ea.intersectSegment2Line(this,e);if(e instanceof n.Segment)return Ea.intersectSegment2Segment(this,e);if(e instanceof n.Circle)return Ea.intersectSegment2Circle(this,e);if(e instanceof n.Arc)return Ea.intersectSegment2Arc(this,e);if(e instanceof n.Polygon)return n.Polygon.intersectShape2Polygon(this,e)}distanceTo(e){let{Distance:s}=n;if(e instanceof n.Point){let[r,a]=s.point2segment(e,this);return a=a.reverse(),[r,a]}if(e instanceof n.Circle){let[r,a]=s.segment2circle(this,e);return[r,a]}if(e instanceof n.Line){let[r,a]=s.segment2line(this,e);return[r,a]}if(e instanceof n.Segment){let[r,a]=s.segment2segment(this,e);return[r,a]}if(e instanceof n.Arc){let[r,a]=s.segment2arc(this,e);return[r,a]}if(e instanceof n.Polygon){let[r,a]=s.shape2polygon(this,e);return[r,a]}if(e instanceof n.PlanarSet){let[r,a]=s.shape2planarSet(this,e);return[r,a]}}tangentInStart(){return new n.Vector(this.start,this.end).normalize()}tangentInEnd(){return new n.Vector(this.end,this.start).normalize()}reverse(){return new Ea(this.end,this.start)}split(e){return this.contains(e)?this.start.equalTo(this.end)?[this.clone()]:this.start.equalTo(e)||this.end.equalTo(e)?[this]:[new n.Segment(this.start,e),new n.Segment(e,this.end)]:[]}middle(){return new n.Point((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}distanceToPoint(e){let[s,...r]=n.Distance.point2segment(e,this);return s}definiteIntegral(e=0){let s=this.end.x-this.start.x,r=this.start.y-e,a=this.end.y-e;return s*(r+a)/2}translate(...e){return new Ea(this.ps.translate(...e),this.pe.translate(...e))}rotate(e=0,s=new n.Point){let r=new n.Matrix;return r=r.translate(s.x,s.y).rotate(e).translate(-s.x,-s.y),this.transform(r)}transform(e=new n.Matrix){return new Ea(this.ps.transform(e),this.pe.transform(e))}isZeroLength(){return this.ps.equalTo(this.pe)}static intersectSegment2Line(e,s){let r=[];return e.ps.on(s)&&r.push(e.ps),e.pe.on(s)&&!e.isZeroLength()&&r.push(e.pe),r.length>0||e.isZeroLength()||e.ps.leftTo(s)&&e.pe.leftTo(s)||!e.ps.leftTo(s)&&!e.pe.leftTo(s)?r:new n.Line(e.ps,e.pe).intersect(s)}static intersectSegment2Segment(e,s){let r=[];if(e.box.not_intersect(s.box))return r;if(e.isZeroLength())return e.ps.on(s)&&r.push(e.ps),r;if(s.isZeroLength())return s.ps.on(e)&&r.push(s.ps),r;let a=new n.Line(e.ps,e.pe),u=new n.Line(s.ps,s.pe);if(a.incidentTo(u))e.ps.on(s)&&r.push(e.ps),e.pe.on(s)&&r.push(e.pe),s.ps.on(e)&&!s.ps.equalTo(e.ps)&&!s.ps.equalTo(e.pe)&&r.push(s.ps),s.pe.on(e)&&!s.pe.equalTo(e.ps)&&!s.pe.equalTo(e.pe)&&r.push(s.pe);else{let h=a.intersect(u);h.length>0&&h[0].on(e)&&h[0].on(s)&&r.push(h[0])}return r}static intersectSegment2Circle(e,s){let r=[];if(e.box.not_intersect(s.box))return r;if(e.isZeroLength()){let[h,p]=e.ps.distanceTo(s.pc);return n.Utils.EQ(h,s.r)&&r.push(e.ps),r}let u=new n.Line(e.ps,e.pe).intersect(s);for(let h of u)h.on(e)&&r.push(h);return r}static intersectSegment2Arc(e,s){let r=[];if(e.box.not_intersect(s.box))return r;if(e.isZeroLength())return e.ps.on(s)&&r.push(e.ps),r;let a=new n.Line(e.ps,e.pe),u=new n.Circle(s.pc,s.r),h=a.intersect(u);for(let p of h)p.on(e)&&p.on(s)&&r.push(p);return r}svg(e={}){let{stroke:s,strokeWidth:r,id:a,className:u}=e,h=a&&a.length>0?`id="${a}"`:"",p=u&&u.length>0?`class="${u}"`:"";return`
<line x1="${this.start.x}" y1="${this.start.y}" x2="${this.end.x}" y2="${this.end.y}" stroke="${s||"black"}" stroke-width="${r||1}" ${h} ${p} />`}toJSON(){return Object.assign({},this,{name:"segment"})}},n.segment=(...t)=>new n.Segment(...t)}),t0}var e0,Ix;function t3(){return Ix||(Ix=1,e0=function(n){n.Arc=class Gc{constructor(...e){if(this.pc=new n.Point,this.r=1,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=n.CCW,e.length!=0)if(e.length==1&&e[0]instanceof Object&&e[0].name==="arc"){let{pc:s,r,startAngle:a,endAngle:u,counterClockwise:h}=e[0];this.pc=new n.Point(s.x,s.y),this.r=r,this.startAngle=a,this.endAngle=u,this.counterClockwise=h;return}else{let[s,r,a,u,h]=[...e];s&&s instanceof n.Point&&(this.pc=s.clone()),r!==void 0&&(this.r=r),a!==void 0&&(this.startAngle=a),u!==void 0&&(this.endAngle=u),h!==void 0&&(this.counterClockwise=h);return}}clone(){return new n.Arc(this.pc.clone(),this.r,this.startAngle,this.endAngle,this.counterClockwise)}get sweep(){if(n.Utils.EQ(this.startAngle,this.endAngle))return 0;if(n.Utils.EQ(Math.abs(this.startAngle-this.endAngle),n.PIx2))return n.PIx2;let e;return this.counterClockwise?e=n.Utils.GT(this.endAngle,this.startAngle)?this.endAngle-this.startAngle:this.endAngle-this.startAngle+n.PIx2:e=n.Utils.GT(this.startAngle,this.endAngle)?this.startAngle-this.endAngle:this.startAngle-this.endAngle+n.PIx2,n.Utils.GT(e,n.PIx2)&&(e-=n.PIx2),n.Utils.LT(e,0)&&(e+=n.PIx2),e}get start(){return new n.Point(this.pc.x+this.r,this.pc.y).rotate(this.startAngle,this.pc)}get end(){return new n.Point(this.pc.x+this.r,this.pc.y).rotate(this.endAngle,this.pc)}get center(){return this.pc.clone()}get vertices(){return[this.start.clone(),this.end.clone()]}get length(){return Math.abs(this.sweep*this.r)}get box(){let s=this.breakToFunctional().reduce((r,a)=>r.merge(a.start.box),new n.Box);return s=s.merge(this.end.box),s}contains(e){if(!n.Utils.EQ(this.pc.distanceTo(e)[0],this.r))return!1;if(e.equalTo(this.start))return!0;let s=new n.Vector(this.pc,e).slope,r=new n.Arc(this.pc,this.r,this.startAngle,s,this.counterClockwise);return n.Utils.LE(r.length,this.length)}split(e){if(!this.contains(e))return[];if(n.Utils.EQ_0(this.sweep))return[this.clone()];if(this.start.equalTo(e)||this.end.equalTo(e))return[this.clone()];let s=new n.Vector(this.pc,e).slope;return[new n.Arc(this.pc,this.r,this.startAngle,s,this.counterClockwise),new n.Arc(this.pc,this.r,s,this.endAngle,this.counterClockwise)]}middle(){let e=this.counterClockwise?this.startAngle+this.sweep/2:this.startAngle-this.sweep/2;return new n.Arc(this.pc,this.r,this.startAngle,e,this.counterClockwise).end}chordHeight(){return(1-Math.cos(Math.abs(this.sweep/2)))*this.r}intersect(e){if(e instanceof n.Point)return this.contains(e)?[e]:[];if(e instanceof n.Line)return e.intersect(this);if(e instanceof n.Circle)return Gc.intersectArc2Circle(this,e);if(e instanceof n.Segment)return e.intersect(this);if(e instanceof n.Arc)return Gc.intersectArc2Arc(this,e);if(e instanceof n.Polygon)return n.Polygon.intersectShape2Polygon(this,e)}distanceTo(e){let{Distance:s}=n;if(e instanceof n.Point){let[r,a]=s.point2arc(e,this);return a=a.reverse(),[r,a]}if(e instanceof n.Circle){let[r,a]=s.arc2circle(this,e);return[r,a]}if(e instanceof n.Line){let[r,a]=s.arc2line(this,e);return[r,a]}if(e instanceof n.Segment){let[r,a]=s.segment2arc(e,this);return a=a.reverse(),[r,a]}if(e instanceof n.Arc){let[r,a]=s.arc2arc(this,e);return[r,a]}if(e instanceof n.Polygon){let[r,a]=s.shape2polygon(this,e);return[r,a]}if(e instanceof n.PlanarSet){let[r,a]=s.shape2planarSet(this,e);return[r,a]}}breakToFunctional(){let e=[],s=[0,Math.PI/2,2*Math.PI/2,3*Math.PI/2],r=[this.pc.translate(this.r,0),this.pc.translate(0,this.r),this.pc.translate(-this.r,0),this.pc.translate(0,-this.r)],a=[];for(let u=0;u<4;u++)r[u].on(this)&&a.push(new n.Arc(this.pc,this.r,this.startAngle,s[u],this.counterClockwise));if(a.length==0)e.push(this.clone());else{a.sort((p,m)=>p.length-m.length);for(let p=0;p<a.length;p++){let m=e.length>0?e[e.length-1]:void 0,_;m?_=new n.Arc(this.pc,this.r,m.endAngle,a[p].endAngle,this.counterClockwise):_=new n.Arc(this.pc,this.r,this.startAngle,a[p].endAngle,this.counterClockwise),n.Utils.EQ_0(_.length)||e.push(_.clone())}let u=e.length>0?e[e.length-1]:void 0,h;u?h=new n.Arc(this.pc,this.r,u.endAngle,this.endAngle,this.counterClockwise):h=new n.Arc(this.pc,this.r,this.startAngle,this.endAngle,this.counterClockwise),n.Utils.EQ_0(h.length)||e.push(h.clone())}return e}tangentInStart(){let e=new n.Vector(this.pc,this.start),s=this.counterClockwise?Math.PI/2:-Math.PI/2;return e.rotate(s).normalize()}tangentInEnd(){let e=new n.Vector(this.pc,this.end),s=this.counterClockwise?-Math.PI/2:Math.PI/2;return e.rotate(s).normalize()}reverse(){return new Gc(this.pc,this.r,this.endAngle,this.startAngle,!this.counterClockwise)}translate(...e){let s=this.clone();return s.pc=this.pc.translate(...e),s}rotate(e=0,s=new n.Point){let r=new n.Matrix;return r=r.translate(s.x,s.y).rotate(e).translate(-s.x,-s.y),this.transform(r)}transform(e=new n.Matrix){let s=this.start.transform(e),r=this.end.transform(e),a=this.pc.transform(e);return Gc.arcSE(a,s,r,this.counterClockwise)}static arcSE(e,s,r,a){let{vector:u}=n,h=u(e,s).slope,p=u(e,r).slope;n.Utils.EQ(h,p)&&(p+=2*Math.PI,a=!0);let m=u(e,s).length;return new Gc(e,m,h,p,a)}static intersectArc2Arc(e,s){var r=[];if(e.box.not_intersect(s.box))return r;if(e.pc.equalTo(s.pc)&&n.Utils.EQ(e.r,s.r)){let p;return p=e.start,p.on(s)&&r.push(p),p=e.end,p.on(s)&&r.push(p),p=s.start,p.on(e)&&r.push(p),p=s.end,p.on(e)&&r.push(p),r}let a=new n.Circle(e.pc,e.r),u=new n.Circle(s.pc,s.r),h=a.intersect(u);for(let p of h)p.on(e)&&p.on(s)&&r.push(p);return r}static intersectArc2Circle(e,s){let r=[];if(e.box.not_intersect(s.box))return r;if(s.pc.equalTo(e.pc)&&n.Utils.EQ(s.r,e.r))return r.push(e.start),r.push(e.end),r;let a=s,u=new n.Circle(e.pc,e.r),h=a.intersect(u);for(let p of h)p.on(e)&&r.push(p);return r}definiteIntegral(e=0){return this.breakToFunctional().reduce((a,u)=>a+u.circularSegmentDefiniteIntegral(e),0)}circularSegmentDefiniteIntegral(e){let s=new n.Line(this.start,this.end),r=this.pc.leftTo(s),u=new n.Segment(this.start,this.end).definiteIntegral(e),h=this.circularSegmentArea();return r?u-h:u+h}circularSegmentArea(){return .5*this.r*this.r*(this.sweep-Math.sin(this.sweep))}svg(e={}){let s=this.sweep<=Math.PI?"0":"1",r=this.counterClockwise?"1":"0",{stroke:a,strokeWidth:u,fill:h,id:p,className:m}=e,_=p&&p.length>0?`id="${p}"`:"",g=m&&m.length>0?`class="${m}"`:"";return n.Utils.EQ(this.sweep,2*Math.PI)?new n.Circle(this.pc,this.r).svg(e):`
<path d="M${this.start.x},${this.start.y}
                             A${this.r},${this.r} 0 ${s},${r} ${this.end.x},${this.end.y}"
                    stroke="${a||"black"}" stroke-width="${u||1}" fill="${h||"none"}" ${_} ${g} />`}toJSON(){return Object.assign({},this,{name:"arc"})}},n.arc=(...t)=>new n.Arc(...t)}),e0}var n0,Nx;function e3(){return Nx||(Nx=1,n0=function(n){n.Box=class q0{constructor(e=void 0,s=void 0,r=void 0,a=void 0){this.xmin=e,this.ymin=s,this.xmax=r,this.ymax=a}clone(){return new q0(this.xmin,this.ymin,this.xmax,this.ymax)}get low(){return new n.Point(this.xmin,this.ymin)}get high(){return new n.Point(this.xmax,this.ymax)}get max(){return this.clone()}get center(){return new n.Point((this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)}not_intersect(e){return this.xmax<e.xmin||this.xmin>e.xmax||this.ymax<e.ymin||this.ymin>e.ymax}intersect(e){return!this.not_intersect(e)}merge(e){return new q0(this.xmin===void 0?e.xmin:Math.min(this.xmin,e.xmin),this.ymin===void 0?e.ymin:Math.min(this.ymin,e.ymin),this.xmax===void 0?e.xmax:Math.max(this.xmax,e.xmax),this.ymax===void 0?e.ymax:Math.max(this.ymax,e.ymax))}less_than(e){return!!(this.low.lessThan(e.low)||this.low.equalTo(e.low)&&this.high.lessThan(e.high))}equal_to(e){return this.low.equalTo(e.low)&&this.high.equalTo(e.high)}output(){return this.clone()}maximal_val(e,s){return e.merge(s)}val_less_than(e,s){return e.lessThan(s)}set(e,s,r,a){this.xmin=e,this.ymin=s,this.xmax=r,this.ymax=a}svg(e={}){let{stroke:s,strokeWidth:r,fill:a,id:u,className:h}=e,p=u&&u.length>0?`id="${u}"`:"",m=h&&h.length>0?`class="${h}"`:"",_=this.xmax-this.xmin,g=this.ymax-this.ymin;return`
<rect x="${this.xmin}" y="${this.ymin}" width=${_} height=${g} stroke="${s||"black"}" stroke-width="${r||1}" fill="${a||"none"}" ${p} ${m} />`}},n.box=(...t)=>new n.Box(...t)}),n0}var i0,Px;function n3(){return Px||(Px=1,i0=function(n){n.Edge=class{constructor(e){this.shape=e,this.next,this.prev,this.face,this.arc_length=0,this.bvStart=void 0,this.bvEnd=void 0,this.bv=void 0,this.overlap=void 0}get start(){return this.shape.start}get end(){return this.shape.end}get length(){return this.shape.length}get box(){return this.shape.box}isSegment(){return this.shape instanceof n.Segment}isArc(){return this.shape instanceof n.Arc}middle(){return this.shape.middle()}contains(e){return this.shape.contains(e)}setInclusion(e){if(this.bv!==void 0)return this.bv;if(this.bvStart===void 0&&(this.bvStart=n.ray_shoot(e,this.start)),this.bvEnd===void 0&&(this.bvEnd=n.ray_shoot(e,this.end)),this.bvStart===n.OUTSIDE||this.bvEnd==n.OUTSIDE)this.bv=n.OUTSIDE;else if(this.bvStart===n.INSIDE||this.bvEnd==n.INSIDE)this.bv=n.INSIDE;else{let s=n.ray_shoot(e,this.middle());this.bv=s}return this.bv}setOverlap(e){let s,r=this.shape,a=e.shape;r instanceof n.Segment&&a instanceof n.Segment?r.start.equalTo(a.start)&&r.end.equalTo(a.end)?s=n.OVERLAP_SAME:r.start.equalTo(a.end)&&r.end.equalTo(a.start)&&(s=n.OVERLAP_OPPOSITE):(r instanceof n.Arc&&a instanceof n.Arc||r instanceof n.Segment&&a instanceof n.Arc||r instanceof n.Arc&&a instanceof n.Segment)&&(r.start.equalTo(a.start)&&r.end.equalTo(a.end)&&r.middle().equalTo(a.middle())?s=n.OVERLAP_SAME:r.start.equalTo(a.end)&&r.end.equalTo(a.start)&&r.middle().equalTo(a.middle())&&(s=n.OVERLAP_OPPOSITE)),this.overlap===void 0&&(this.overlap=s),e.overlap===void 0&&(e.overlap=s)}svg(){if(this.shape instanceof n.Segment)return` L${this.shape.end.x},${this.shape.end.y}`;if(this.shape instanceof n.Arc){let e=this.shape,s,r=e.counterClockwise?"1":"0";if(n.Utils.EQ(e.sweep,2*Math.PI)){let a=e.counterClockwise?1:-1,u=new n.Arc(e.pc,e.r,e.startAngle,e.startAngle+a*Math.PI,e.counterClockwise),h=new n.Arc(e.pc,e.r,e.startAngle+a*Math.PI,e.endAngle,e.counterClockwise);return s="0",` A${u.r},${u.r} 0 ${s},${r} ${u.end.x},${u.end.y}
                    A${h.r},${h.r} 0 ${s},${r} ${h.end.x},${h.end.y}`}else return s=e.sweep<=Math.PI?"0":"1",` A${e.r},${e.r} 0 ${s},${r} ${e.end.x},${e.end.y}`}}toJSON(){return this.shape.toJSON()}}}),i0}var s0,zx;function i3(){return zx||(zx=1,s0=function(n){let{Point:t,point:e,Segment:s,segment:r,Arc:a,Box:u,Edge:h,Circle:p}=n;n.Face=class up{constructor(_,...g){if(this.first,this.last,this._box=void 0,this._orientation=void 0,g.length!=0){if(g.length==1){if(g[0]instanceof Array){let b=g[0];if(b.length==0)return;if(b.every(x=>x instanceof t)){let x=up.points2segments(b);this.shapes2face(_.edges,x)}else if(b.every(x=>x instanceof s||x instanceof a))this.shapes2face(_.edges,b);else if(b.every(x=>x.name==="segment"||x.name==="arc")){let x=[];for(let S of b){let A;S.name==="segment"?A=new s(S):A=new a(S),x.push(A)}this.shapes2face(_.edges,x)}}else if(g[0]instanceof up){let b=g[0];this.first=b.first,this.last=b.last;for(let x of b)_.edges.add(x)}else if(g[0]instanceof p)this.shapes2face(_.edges,[g[0].toArc(n.CCW)]);else if(g[0]instanceof u){let b=g[0];this.shapes2face(_.edges,[r(e(b.xmin,b.ymin),e(b.xmax,b.ymin)),r(e(b.xmax,b.ymin),e(b.xmax,b.ymax)),r(e(b.xmax,b.ymax),e(b.xmin,b.ymax)),r(e(b.xmin,b.ymax),e(b.xmin,b.ymin))])}}g.length==2&&g[0]instanceof h&&g[1]instanceof h&&(this.first=g[0],this.last=g[1],this.last.next=this.first,this.first.prev=this.last,this.setArcLength())}}[Symbol.iterator](){let _;return{next:()=>{let g=_||this.first,b=this.first?_?_===this.first:!1:!0;return _=g?g.next:void 0,{value:g,done:b}}}}get edges(){let _=[];for(let g of this)_.push(g);return _}get size(){let _=0;for(let g of this)_++;return _}get box(){if(this._box===void 0){let _=new n.Box;for(let g of this)_=_.merge(g.box);this._box=_}return this._box}static points2segments(_){let g=[];for(let b=0;b<_.length;b++)g.push(new s(_[b],_[(b+1)%_.length]));return g}shapes2face(_,g){for(let b of g){let x=new h(b);this.append(_,x)}}isEmpty(){return this.first===void 0&&this.last===void 0}append(_,g){this.first===void 0?(g.prev=g,g.next=g,this.first=g,this.last=g,g.arc_length=0):(g.prev=this.last,this.last.next=g,this.last=g,this.last.next=this.first,this.first.prev=this.last,g.arc_length=g.prev.arc_length+g.prev.length),g.face=this,_.add(g)}insert(_,g,b){if(this.first===void 0)g.prev=g,g.next=g,this.first=g,this.last=g;else{let x=b.next;b.next=g,x.prev=g,g.prev=b,g.next=x,this.last===b&&(this.first=g)}g.face=this,g.prev===this.last?g.arc_length=0:g.arc_length=g.prev.arc_length+g.prev.length,_.add(g)}remove(_,g){g===this.first&&g===this.last?(this.first=void 0,this.last=void 0):(g.prev.next=g.next,g.next.prev=g.prev,g===this.first&&(this.first=g.next),g===this.last&&(this.last=g.prev)),_.delete(g)}reverse(){let _=[],g=this.last;do g.shape=g.shape.reverse(),_.push(g),g=g.prev;while(g!==this.last);this.first=void 0,this.last=void 0;for(let b of _)this.first===void 0?(b.prev=b,b.next=b,this.first=b,this.last=b,b.arc_length=0):(b.prev=this.last,this.last.next=b,this.last=b,this.last.next=this.first,this.first.prev=this.last,b.arc_length=b.prev.arc_length+b.prev.length);this._orientation!==void 0&&(this._orientation=void 0,this._orientation=this.orientation())}setArcLength(){for(let _ of this)_===this.first?_.arc_length=0:_.arc_length=_.prev.arc_length+_.prev.length,_.face=this}area(){return Math.abs(this.signedArea())}signedArea(){let _=0,g=this.box.ymin;for(let b of this)_+=b.shape.definiteIntegral(g);return _}orientation(){if(this._orientation===void 0){let _=this.signedArea();n.Utils.EQ_0(_)?this._orientation=n.ORIENTATION.NOT_ORIENTABLE:n.Utils.LT(_,0)?this._orientation=n.ORIENTATION.CCW:this._orientation=n.ORIENTATION.CW}return this._orientation}isSimple(_){return up.getSelfIntersections(this,_,!0).length==0}static getSelfIntersections(_,g,b=!1){let x=[];for(let S of _){let A=g.search(S.box);for(let E of A){if(S===E||S.shape instanceof n.Segment&&E.shape instanceof n.Segment&&(S.next===E||S.prev===E))continue;let R=S.shape.intersect(E.shape);for(let z of R)if(!(z.equalTo(S.start)&&z.equalTo(E.end)&&E===S.prev)&&!(z.equalTo(S.end)&&z.equalTo(E.start)&&E===S.next)&&(x.push(z),b))break;if(x.length>0&&b)break}if(x.length>0&&b)break}return x}toJSON(){return this.edges.map(_=>_.toJSON())}svg(){let _=`
M${this.first.start.x},${this.first.start.y}`;for(let g of this)_+=g.svg();return _+=" z",_}}}),s0}var r0,Ux;function s3(){return Ux||(Ux=1,r0=function(n){let{Point:t,Segment:e,Line:s,Circle:r,Arc:a,Box:u,Vector:h}=n;n.Ray=class B2{constructor(...m){if(this.pt=new t,m.length!=0){if(m.length==1&&m[0]instanceof t){this.pt=m[0].clone();return}if(m.length==2&&typeof m[0]=="number"&&typeof m[1]=="number"){this.pt=new t(m[0],m[1]);return}throw n.Errors.ILLEGAL_PARAMETERS}}clone(){return new B2(this.pt)}get box(){return new u(this.pt.x,this.pt.y,Number.POSITIVE_INFINITY,this.pt.y)}get start(){return this.pt}get norm(){return new h(0,1)}intersect(m){if(m instanceof e)return this.intersectRay2Segment(this,m);if(m instanceof a)return this.intersectRay2Arc(this,m)}intersectRay2Segment(m,_){let g=[];if(m.box.not_intersect(_.box))return g;let b=new s(m.start,m.norm),x=b.intersect(_);for(let S of x)n.Utils.GE(S.x,m.start.x)&&g.push(S);return x.length==2&&g.length==1&&m.start.on(b)&&g.push(m.start),g}intersectRay2Arc(m,_){let g=[];if(m.box.not_intersect(_.box))return g;let x=new s(m.start,m.norm).intersect(_);for(let S of x)n.Utils.GE(S.x,m.start.x)&&g.push(S);return g}},n.ray=(...p)=>new n.Ray(...p)}),r0}var o0,Bx;function r3(){return Bx||(Bx=1,o0=function(n){let{Polygon:t,Point:e,Segment:s,Arc:r,Line:a,Ray:u}=n;n.ray_shoot=function(h,p){let m;if(h.box.not_intersect(p.box))return n.OUTSIDE;let _=new u(p),g=new a(_.pt,_.norm),b=h.edges.search(_.box);if(b.length==0)return n.OUTSIDE;let x=[];for(let A of b)for(let E of _.intersect(A.shape)){if(E.equalTo(p))return n.BOUNDARY;x.push({pt:E,edge:A})}x.sort((A,E)=>n.Utils.LT(A.pt.x,E.pt.x)?-1:n.Utils.GT(A.pt.x,E.pt.x)?1:0);let S=0;for(let A=0;A<x.length;A++){let E=x[A];if(E.pt.equalTo(E.edge.shape.start)){if(A>0&&E.pt.equalTo(x[A-1].pt)&&E.edge.prev===x[A-1].edge)continue;let R=E.edge.prev;for(;n.Utils.EQ_0(R.length);)R=R.prev;let z=R.shape.tangentInEnd(),O=E.pt.translate(z),Q=E.edge.shape.tangentInStart(),N=E.pt.translate(Q),j=O.leftTo(g),Y=N.leftTo(g);(j&&!Y||!j&&Y)&&S++}else if(E.pt.equalTo(E.edge.shape.end)){if(A>0&&E.pt.equalTo(x[A-1].pt)&&E.edge.next===x[A-1].edge)continue;let R=E.edge.next;for(;n.Utils.EQ_0(R.length);)R=R.next;let z=R.shape.tangentInStart(),O=E.pt.translate(z),Q=E.edge.shape.tangentInEnd(),N=E.pt.translate(Q),j=O.leftTo(g),Y=N.leftTo(g);(j&&!Y||!j&&Y)&&S++}else if(E.edge.shape instanceof s)S++;else{let R=E.edge.shape.box;n.Utils.EQ(E.pt.y,R.ymin)||n.Utils.EQ(E.pt.y,R.ymax)||S++}}return m=S%2==1?n.INSIDE:n.OUTSIDE,m}}),o0}var a0,Hx;function o3(){return Hx||(Hx=1,a0=function(n){let{Edge:t,Face:e,PlanarSet:s,Box:r}=n,{ray_shoot:a}=n;n.Polygon=class Eo{constructor(){this.faces=new s,this.edges=new s}get box(){return[...this.faces].reduce((h,p)=>h.merge(p.box),new r)}get vertices(){return[...this.edges].map(h=>h.start)}isEmpty(){return this.edges.size===0}addFace(...h){let p=new e(this,...h);return this.faces.add(p),p}deleteFace(h){for(let m of h)this.edges.delete(m);return this.faces.delete(h)}removeChain(h,p,m){if(m.next===p){this.deleteFace(h);return}for(let _=p;_!==m.next;_=_.next)if(h.remove(this.edges,_),h.isEmpty()){this.deleteFace(h);break}}addVertex(h,p){let m=p.shape.split(h);if(m.length<2)return;let _=new n.Edge(m[0]),g=p.prev;return p.face.insert(this.edges,_,g),this.edges.delete(p),p.shape=m[1],this.edges.add(p),_}reverse(){for(let h of this.faces)h.reverse();return this}clone(){let h=new Eo;for(let p of this.faces){let m=[];for(let _ of p)m.push(_.shape.clone());h.addFace(m)}return h}area(){let h=[...this.faces].reduce((p,m)=>p+m.signedArea(),0);return Math.abs(h)}contains(h){let p=a(this,h);return p==n.INSIDE||p==n.BOUNDARY}distanceTo(h){let{Distance:p}=n;if(h instanceof n.Point){let[m,_]=p.point2polygon(h,this);return _=_.reverse(),[m,_]}if(h instanceof n.Circle||h instanceof n.Line||h instanceof n.Segment||h instanceof n.Arc){let[m,_]=p.shape2polygon(h,this);return _=_.reverse(),[m,_]}if(h instanceof n.Polygon){let m=[Number.POSITIVE_INFINITY,new n.Segment],_,g;for(let b of this.edges){let x=m[0];[_,g]=p.shape2planarSet(b.shape,h.edges,x),n.Utils.LT(_,x)&&(m=[_,g])}return m}}intersect(h){if(h instanceof n.Point)return this.contains(h)?[h]:[];if(h instanceof n.Line)return Eo.intersectLine2Polygon(h,this);if(h instanceof n.Circle||h instanceof n.Segment||h instanceof n.Arc)return Eo.intersectShape2Polygon(h,this);if(h instanceof n.Polygon)return Eo.intersectPolygon2Polygon(h,this)}isValid(){let h=!0;for(let p of this.faces)if(!p.isSimple(this.edges)){h=!1;break}return h}translate(h){let p=new Eo;for(let m of this.faces){let _=[];for(let g of m)_.push(g.shape.translate(h));p.addFace(_)}return p}rotate(h=0,p=new n.Point){let m=new Eo;for(let _ of this.faces){let g=[];for(let b of _)g.push(b.shape.rotate(h,p));m.addFace(g)}return m}transform(h=new n.Matrix){let p=new Eo;for(let m of this.faces){let _=[];for(let g of m)_.push(g.shape.transform(h));p.addFace(_)}return p}static intersectShape2Polygon(h,p){let m=[];if(p.isEmpty()||h.box.not_intersect(p.box))return m;let _=p.edges.search(h.box);for(let g of _)for(let b of h.intersect(g.shape))m.push(b);return m}static intersectLine2Polygon(h,p){let m=[];if(p.isEmpty())return m;for(let _ of p.edges)for(let g of h.intersect(_.shape))m.push(g);return m}static intersectPolygon2Polygon(h,p){let m=[];if(h.isEmpty()||p.isEmpty()||h.box.not_intersect(p.box))return m;for(let _ of h.edges)for(let g of Eo.intersectShape2Polygon(_.shape,p))m.push(g);return m}svg(h={}){let{stroke:p,strokeWidth:m,fill:_,fillRule:g,fillOpacity:b,id:x,className:S}=h,A=x&&x.length>0?`id="${x}"`:"",E=S&&S.length>0?`class="${S}"`:"",R=`
<path stroke="${p||"black"}" stroke-width="${m||1}" fill="${_||"lightcyan"}" fill-rule="${g||"evenodd"}" fill-opacity="${b||1}" ${A} ${E} d="`;for(let z of this.faces)R+=z.svg();return R+=`" >
</path>`,R}toJSON(){return[...this.faces].map(h=>h.toJSON())}}}),a0}var l0,Vx;function a3(){if(Vx)return l0;Vx=1;let n=P2();return l0=function(t){let{Polygon:e,Point:s,Segment:r,Arc:a,Circle:u,Line:h,Ray:p,Vector:m}=t,{vector:_}=t;t.Distance=class jt{static point2point(b,x){return b.distanceTo(x)}static point2line(b,x){let S=b.projectionOn(x);return[_(b,S).length,new r(b,S)]}static point2circle(b,x){let[S,A]=b.distanceTo(x.center);if(t.Utils.EQ_0(S))return[x.r,new r(b,x.toArc().start)];{let E=Math.abs(S-x.r),R=_(x.pc,b).normalize().multiply(x.r),z=x.pc.translate(R);return[E,new r(b,z)]}}static point2segment(b,x){if(x.start.equalTo(x.end))return jt.point2point(b,x.start);let S=new t.Vector(x.start,x.end),A=new t.Vector(x.start,b),E=new t.Vector(x.end,b),R=S.dot(A),z=-S.dot(E),O,Q;if(t.Utils.GE(R,0)&&t.Utils.GE(z,0)){let N=x.tangentInStart();return O=Math.abs(N.cross(A)),Q=x.start.translate(N.multiply(N.dot(A))),[O,new r(b,Q)]}else return R<0?b.distanceTo(x.start):b.distanceTo(x.end)}static point2arc(b,x){let S=new t.Circle(x.pc,x.r),A=[],E,R;return[E,R]=jt.point2circle(b,S),R.end.on(x)&&A.push(jt.point2circle(b,S)),A.push(jt.point2point(b,x.start)),A.push(jt.point2point(b,x.end)),jt.sort(A),A[0]}static segment2line(b,x){let S=b.intersect(x);if(S.length>0)return[0,new r(S[0],S[0])];let A=[];return A.push(jt.point2line(b.start,x)),A.push(jt.point2line(b.end,x)),jt.sort(A),A[0]}static segment2segment(b,x){let S=r.intersectSegment2Segment(b,x);if(S.length>0)return[0,new r(S[0],S[0])];let A=[];return A.push(jt.point2segment(x.start,b)),A.push(jt.point2segment(x.end,b)),A.push(jt.point2segment(b.start,x)),A.push(jt.point2segment(b.end,x)),jt.sort(A),A[0]}static segment2circle(b,x){let S=b.intersect(x);if(S.length>0)return[0,new r(S[0],S[0])];let A=new t.Line(b.ps,b.pe),[E,R]=jt.point2line(x.center,A);if(t.Utils.GE(E,x.r)&&R.end.on(b))return jt.point2circle(R.end,x);{let[z,O]=jt.point2circle(b.start,x),[Q,N]=jt.point2circle(b.end,x);return t.Utils.LT(z,Q)?[z,O]:[Q,N]}}static segment2arc(b,x){let S=b.intersect(x);if(S.length>0)return[0,new r(S[0],S[0])];let A=new t.Line(b.ps,b.pe),E=new t.Circle(x.pc,x.r),[R,z]=jt.point2line(E.center,A);if(t.Utils.GE(R,E.r)&&z.end.on(b)){let[j,Y]=jt.point2circle(z.end,E);if(Y.end.on(x))return[j,Y]}let O=[];O.push(jt.point2arc(b.start,x)),O.push(jt.point2arc(b.end,x));let Q,N;return[Q,N]=jt.point2segment(x.start,b),O.push([Q,N.reverse()]),[Q,N]=jt.point2segment(x.end,b),O.push([Q,N.reverse()]),jt.sort(O),O[0]}static circle2circle(b,x){let S=b.intersect(x);if(S.length>0)return[0,new r(S[0],S[0])];if(b.center.equalTo(x.center)){let A=b.toArc(),E=x.toArc();return jt.point2point(A.start,E.start)}else{let A=new h(b.center,x.center),E=A.intersect(b),R=A.intersect(x),z=[];return z.push(jt.point2point(E[0],R[0])),z.push(jt.point2point(E[0],R[1])),z.push(jt.point2point(E[1],R[0])),z.push(jt.point2point(E[1],R[1])),jt.sort(z),z[0]}}static circle2line(b,x){let S=b.intersect(x);if(S.length>0)return[0,new r(S[0],S[0])];let[A,E]=jt.point2line(b.center,x),[R,z]=jt.point2circle(E.end,b);return z=z.reverse(),[R,z]}static arc2line(b,x){let S=x.intersect(b);if(S.length>0)return[0,new r(S[0],S[0])];let A=new t.Circle(b.center,b.r),[E,R]=jt.point2line(A.center,x);if(t.Utils.GE(E,A.r)){let[z,O]=jt.point2circle(R.end,A);if(O.end.on(b))return[z,O]}else{let z=[];return z.push(jt.point2line(b.start,x)),z.push(jt.point2line(b.end,x)),jt.sort(z),z[0]}}static arc2circle(b,x){let S=b.intersect(x);if(S.length>0)return[0,new r(S[0],S[0])];let A=new t.Circle(b.center,b.r),[E,R]=jt.circle2circle(A,x);if(R.start.on(b))return[E,R];{let z=[];return z.push(jt.point2circle(b.start,x)),z.push(jt.point2circle(b.end,x)),jt.sort(z),z[0]}}static arc2arc(b,x){let S=b.intersect(x);if(S.length>0)return[0,new r(S[0],S[0])];let A=new t.Circle(b.center,b.r),E=new t.Circle(x.center,x.r),[R,z]=jt.circle2circle(A,E);if(z.start.on(b)&&z.end.on(x))return[R,z];{let O=[],Q,N;return[Q,N]=jt.point2arc(b.start,x),N.end.on(x)&&O.push([Q,N]),[Q,N]=jt.point2arc(b.end,x),N.end.on(x)&&O.push([Q,N]),[Q,N]=jt.point2arc(x.start,b),N.end.on(b)&&O.push([Q,N.reverse()]),[Q,N]=jt.point2arc(x.end,b),N.end.on(b)&&O.push([Q,N.reverse()]),[Q,N]=jt.point2point(b.start,x.start),O.push([Q,N]),[Q,N]=jt.point2point(b.start,x.end),O.push([Q,N]),[Q,N]=jt.point2point(b.end,x.start),O.push([Q,N]),[Q,N]=jt.point2point(b.end,x.end),O.push([Q,N]),jt.sort(O),O[0]}}static point2polygon(b,x){let S=[Number.POSITIVE_INFINITY,new r];for(let A of x.edges){let[E,R]=A.shape instanceof r?jt.point2segment(b,A.shape):jt.point2arc(b,A.shape);t.Utils.LT(E,S[0])&&(S=[E,R])}return S}static shape2polygon(b,x){let S=[Number.POSITIVE_INFINITY,new r];for(let A of x.edges){let[E,R]=b.distanceTo(A.shape);t.Utils.LT(E,S[0])&&(S=[E,R])}return S}static polygon2polygon(b,x){let S=[Number.POSITIVE_INFINITY,new t.Segment];for(let A of b.edges)for(let E of x.edges){let[R,z]=A.shape.distanceTo(E.shape);t.Utils.LT(R,S[0])&&(S=[R,z])}return S}static box2box_minmax(b,x){let S=Math.max(Math.max(b.xmin-x.xmax,0),Math.max(x.xmin-b.xmax,0)),A=Math.max(Math.max(b.ymin-x.ymax,0),Math.max(x.ymin-b.ymax,0)),E=S*S+A*A,R=b.merge(x),z=R.xmax-R.xmin,O=R.ymax-R.ymin,Q=z*z+O*O;return[E,Q]}static minmax_tree_process_level(b,x,S,A){let E,R;for(let N of x)[E,R]=jt.box2box_minmax(b.box,N.item.key),N.item.value instanceof t.Edge?A.insert([E,R],N.item.value.shape):A.insert([E,R],N.item.value),t.Utils.LT(R,S)&&(S=R);if(x.length===0)return S;let z=x.map(N=>N.left.isNil()?void 0:N.left).filter(N=>N!==void 0),O=x.map(N=>N.right.isNil()?void 0:N.right).filter(N=>N!==void 0),Q=[...z,...O].filter(N=>{let[j,Y]=jt.box2box_minmax(b.box,N.max);return t.Utils.LE(j,S)});return S=jt.minmax_tree_process_level(b,Q,S,A),S}static minmax_tree(b,x,S){let A=new n,E=[x.index.root],R=S<Number.POSITIVE_INFINITY?S*S:Number.POSITIVE_INFINITY;return R=jt.minmax_tree_process_level(b,E,R,A),A}static minmax_tree_calc_distance(b,x,S){let A,E;if(x!=null&&!x.isNil()){if([A,E]=jt.minmax_tree_calc_distance(b,x.left,S),E)return[A,E];if(t.Utils.LT(A[0],Math.sqrt(x.item.key.low)))return[A,!0];let[R,z]=jt.distance(b,x.item.value);return t.Utils.LT(R,A[0])&&(A=[R,z]),[A,E]=jt.minmax_tree_calc_distance(b,x.right,A),[A,E]}return[S,!1]}static shape2planarSet(b,x,S=Number.POSITIVE_INFINITY){let A=[S,new t.Segment],E=!1;if(x instanceof t.PlanarSet){let R=jt.minmax_tree(b,x,S);[A,E]=jt.minmax_tree_calc_distance(b,R.root,A)}return A}static sort(b){b.sort((x,S)=>t.Utils.LT(x[0],S[0])?-1:t.Utils.GT(x[0],S[0])?1:0)}static distance(b,x){return b.distanceTo(x)}}},l0}var c0,jx;function l3(){if(jx)return c0;jx=1;let n=qL(),t=GL(),e=class{constructor(){this.DP_TOL=n.DP_TOL,this.CCW=!0,this.CW=!1,this.ORIENTATION={CCW:-1,CW:1,NOT_ORIENTABLE:0},this.PIx2=2*Math.PI,this.INSIDE=1,this.OUTSIDE=0,this.BOUNDARY=2,this.CONTAINS=3,this.INTERLACE=4,this.OVERLAP_SAME=1,this.OVERLAP_OPPOSITE=2,this.Utils=n,this.Errors=t}},s=new e;return ZL()(s),YL()(s),XL()(s),QL()(s),$L()(s),KL()(s),JL()(s),t3()(s),e3()(s),n3()(s),i3()(s),s3()(s),r3()(s),o3()(s),a3()(s),c0=s,c0}var c3=l3();const xa=tf(c3),H2="15.1.22",qx=(n,t,e)=>({endTime:t,insertTime:e,type:"exponentialRampToValue",value:n}),Gx=(n,t,e)=>({endTime:t,insertTime:e,type:"linearRampToValue",value:n}),G0=(n,t)=>({startTime:t,type:"setValue",value:n}),V2=(n,t,e)=>({duration:e,startTime:t,type:"setValueCurve",values:n}),j2=(n,t,{startTime:e,target:s,timeConstant:r})=>s+(t-s)*Math.exp((e-n)/r),Xc=n=>n.type==="exponentialRampToValue",Tp=n=>n.type==="linearRampToValue",La=n=>Xc(n)||Tp(n),Ly=n=>n.type==="setValue",Lo=n=>n.type==="setValueCurve",Ap=(n,t,e,s)=>{const r=n[t];return r===void 0?s:La(r)||Ly(r)?r.value:Lo(r)?r.values[r.values.length-1]:j2(e,Ap(n,t-1,r.startTime,s),r)},Zx=(n,t,e,s,r)=>e===void 0?[s.insertTime,r]:La(e)?[e.endTime,e.value]:Ly(e)?[e.startTime,e.value]:Lo(e)?[e.startTime+e.duration,e.values[e.values.length-1]]:[e.startTime,Ap(n,t-1,e.startTime,r)],Z0=n=>n.type==="cancelAndHold",W0=n=>n.type==="cancelScheduledValues",Sa=n=>Z0(n)||W0(n)?n.cancelTime:Xc(n)||Tp(n)?n.endTime:n.startTime,Wx=(n,t,e,{endTime:s,value:r})=>e===r?r:0<e&&0<r||e<0&&r<0?e*(r/e)**((n-t)/(s-t)):0,Fx=(n,t,e,{endTime:s,value:r})=>e+(n-t)/(s-t)*(r-e),u3=(n,t)=>{const e=Math.floor(t),s=Math.ceil(t);return e===s?n[e]:(1-(t-e))*n[e]+(1-(s-t))*n[s]},h3=(n,{duration:t,startTime:e,values:s})=>{const r=(n-e)/t*(s.length-1);return u3(s,r)},Zd=n=>n.type==="setTarget";class f3{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const e=Sa(t);if(Z0(t)||W0(t)){const s=this._automationEvents.findIndex(a=>W0(t)&&Lo(a)?a.startTime+a.duration>=e:Sa(a)>=e),r=this._automationEvents[s];if(s!==-1&&(this._automationEvents=this._automationEvents.slice(0,s)),Z0(t)){const a=this._automationEvents[this._automationEvents.length-1];if(r!==void 0&&La(r)){if(a!==void 0&&Zd(a))throw new Error("The internal list is malformed.");const u=a===void 0?r.insertTime:Lo(a)?a.startTime+a.duration:Sa(a),h=a===void 0?this._defaultValue:Lo(a)?a.values[a.values.length-1]:a.value,p=Xc(r)?Wx(e,u,h,r):Fx(e,u,h,r),m=Xc(r)?qx(p,e,this._currenTime):Gx(p,e,this._currenTime);this._automationEvents.push(m)}if(a!==void 0&&Zd(a)&&this._automationEvents.push(G0(this.getValue(e),e)),a!==void 0&&Lo(a)&&a.startTime+a.duration>e){const u=e-a.startTime,h=(a.values.length-1)/a.duration,p=Math.max(2,1+Math.ceil(u*h)),m=u/(p-1)*h,_=a.values.slice(0,p);if(m<1)for(let g=1;g<p;g+=1){const b=m*g%1;_[g]=a.values[g-1]*(1-b)+a.values[g]*b}this._automationEvents[this._automationEvents.length-1]=V2(_,a.startTime,u)}}}else{const s=this._automationEvents.findIndex(u=>Sa(u)>e),r=s===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[s-1];if(r!==void 0&&Lo(r)&&Sa(r)+r.duration>e)return!1;const a=Xc(t)?qx(t.value,t.endTime,this._currenTime):Tp(t)?Gx(t.value,e,this._currenTime):t;if(s===-1)this._automationEvents.push(a);else{if(Lo(t)&&e+t.duration>Sa(this._automationEvents[s]))return!1;this._automationEvents.splice(s,0,a)}}return!0}flush(t){const e=this._automationEvents.findIndex(s=>Sa(s)>t);if(e>1){const s=this._automationEvents.slice(e-1),r=s[0];Zd(r)&&s.unshift(G0(Ap(this._automationEvents,e-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=s}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const e=this._automationEvents.findIndex(u=>Sa(u)>t),s=this._automationEvents[e],r=(e===-1?this._automationEvents.length:e)-1,a=this._automationEvents[r];if(a!==void 0&&Zd(a)&&(s===void 0||!La(s)||s.insertTime>t))return j2(t,Ap(this._automationEvents,r-1,a.startTime,this._defaultValue),a);if(a!==void 0&&Ly(a)&&(s===void 0||!La(s)))return a.value;if(a!==void 0&&Lo(a)&&(s===void 0||!La(s)||a.startTime+a.duration>t))return t<a.startTime+a.duration?h3(t,a):a.values[a.values.length-1];if(a!==void 0&&La(a)&&(s===void 0||!La(s)))return a.value;if(s!==void 0&&Xc(s)){const[u,h]=Zx(this._automationEvents,r,a,s,this._defaultValue);return Wx(t,u,h,s)}if(s!==void 0&&Tp(s)){const[u,h]=Zx(this._automationEvents,r,a,s,this._defaultValue);return Fx(t,u,h,s)}return this._defaultValue}}const d3=n=>({cancelTime:n,type:"cancelAndHold"}),p3=n=>({cancelTime:n,type:"cancelScheduledValues"}),m3=(n,t)=>({endTime:t,type:"exponentialRampToValue",value:n}),_3=(n,t)=>({endTime:t,type:"linearRampToValue",value:n}),g3=(n,t,e)=>({startTime:t,target:n,timeConstant:e,type:"setTarget"}),y3=()=>new DOMException("","AbortError"),v3=n=>(t,e,[s,r,a],u)=>{n(t[r],[e,s,a],h=>h[0]===e&&h[1]===s,u)},b3=n=>(t,e,s)=>{const r=[];for(let a=0;a<s.numberOfInputs;a+=1)r.push(new Set);n.set(t,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:e})},w3=n=>(t,e)=>{n.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})},tu=new WeakSet,q2=new WeakMap,My=new WeakMap,G2=new WeakMap,ky=new WeakMap,Jp=new WeakMap,Z2=new WeakMap,F0=new WeakMap,Y0=new WeakMap,X0=new WeakMap,W2={construct(){return W2}},x3=n=>{try{const t=new Proxy(n,W2);new t}catch{return!1}return!0},Yx=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Xx=(n,t)=>{const e=[];let s=n.replace(/^[\s]+/,""),r=s.match(Yx);for(;r!==null;){const a=r[1].slice(1,-1),u=r[0].replace(/([\s]+)?;?$/,"").replace(a,new URL(a,t).toString());e.push(u),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(Yx)}return[e.join(";"),s]},Qx=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},$x=n=>{if(!x3(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},S3=(n,t,e,s,r,a,u,h,p,m,_,g,b)=>{let x=0;return(S,A,E={credentials:"omit"})=>{const R=_.get(S);if(R!==void 0&&R.has(A))return Promise.resolve();const z=m.get(S);if(z!==void 0){const N=z.get(A);if(N!==void 0)return N}const O=a(S),Q=O.audioWorklet===void 0?r(A).then(([N,j])=>{const[Y,G]=Xx(N,j),Z=`${Y};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${G}
})})(window,'_AWGS')`;return e(Z)}).then(()=>{const N=b._AWGS.pop();if(N===void 0)throw new SyntaxError;s(O.currentTime,O.sampleRate,()=>N(class{},void 0,(j,Y)=>{if(j.trim()==="")throw t();const G=Y0.get(O);if(G!==void 0){if(G.has(j))throw t();$x(Y),Qx(Y.parameterDescriptors),G.set(j,Y)}else $x(Y),Qx(Y.parameterDescriptors),Y0.set(O,new Map([[j,Y]]))},O.sampleRate,void 0,void 0))}):Promise.all([r(A),Promise.resolve(n(g,g))]).then(([[N,j],Y])=>{const G=x+1;x=G;const[Z,F]=Xx(N,j),X=`${Z};((AudioWorkletProcessor,registerProcessor)=>{${F}
})(${Y?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${Y?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${Y?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${G}',class extends AudioWorkletProcessor{process(){return !1}})`,W=new Blob([X],{type:"application/javascript; charset=utf-8"}),P=URL.createObjectURL(W);return O.audioWorklet.addModule(P,E).then(()=>{if(h(O))return O;const U=u(O);return U.audioWorklet.addModule(P,E).then(()=>U)}).then(U=>{if(p===null)throw new SyntaxError;try{new p(U,`__sac${G}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(P))});return z===void 0?m.set(S,new Map([[A,Q]])):z.set(A,Q),Q.then(()=>{const N=_.get(S);N===void 0?_.set(S,new Set([A])):N.add(A)}).finally(()=>{const N=m.get(S);N!==void 0&&N.delete(A)}),Q}},lr=(n,t)=>{const e=n.get(t);if(e===void 0)throw new Error("A value with the given key could not be found.");return e},tm=(n,t)=>{const e=Array.from(n).filter(t);if(e.length>1)throw Error("More than one element was found.");if(e.length===0)throw Error("No element was found.");const[s]=e;return n.delete(s),s},F2=(n,t,e,s)=>{const r=lr(n,t),a=tm(r,u=>u[0]===e&&u[1]===s);return r.size===0&&n.delete(t),a},sf=n=>lr(Z2,n),eu=n=>{if(tu.has(n))throw new Error("The AudioNode is already stored.");tu.add(n),sf(n).forEach(t=>t(!0))},Y2=n=>"port"in n,rf=n=>{if(!tu.has(n))throw new Error("The AudioNode is not stored.");tu.delete(n),sf(n).forEach(t=>t(!1))},Q0=(n,t)=>{!Y2(n)&&t.every(e=>e.size===0)&&rf(n)},T3=(n,t,e,s,r,a,u,h,p,m,_,g,b)=>{const x=new WeakMap;return(S,A,E,R,z)=>{const{activeInputs:O,passiveInputs:Q}=a(A),{outputs:N}=a(S),j=h(S),Y=G=>{const Z=p(A),F=p(S);if(G){const $=F2(Q,S,E,R);n(O,S,$,!1),!z&&!g(S)&&e(F,Z,E,R),b(A)&&eu(A)}else{const $=s(O,S,E,R);t(Q,R,$,!1),!z&&!g(S)&&r(F,Z,E,R);const et=u(A);if(et===0)_(A)&&Q0(A,O);else{const k=x.get(A);k!==void 0&&clearTimeout(k),x.set(A,setTimeout(()=>{_(A)&&Q0(A,O)},et*1e3))}}};return m(N,[A,E,R],G=>G[0]===A&&G[1]===E&&G[2]===R,!0)?(j.add(Y),_(S)?n(O,S,[E,R,Y],!0):t(Q,R,[S,E,Y],!0),!0):!1}},A3=n=>(t,e,[s,r,a],u)=>{const h=t.get(s);h===void 0?t.set(s,new Set([[r,e,a]])):n(h,[r,e,a],p=>p[0]===r&&p[1]===e,u)},E3=n=>(t,e)=>{const s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});e.connect(s).connect(t.destination);const r=()=>{e.removeEventListener("ended",r),e.disconnect(s),s.disconnect()};e.addEventListener("ended",r)},C3=n=>(t,e)=>{n(t).add(e)},L3={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},M3=(n,t,e,s,r,a)=>class extends n{constructor(h,p){const m=r(h),_={...L3,...p},g=s(m,_),b=a(m)?t():null;super(h,!1,g,b),this._nativeAnalyserNode=g}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(h){this._nativeAnalyserNode.fftSize=h}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(h){const p=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=h,!(h>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=p,e()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(h){const p=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=h,!(this._nativeAnalyserNode.maxDecibels>h))throw this._nativeAnalyserNode.minDecibels=p,e()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(h){this._nativeAnalyserNode.smoothingTimeConstant=h}getByteFrequencyData(h){this._nativeAnalyserNode.getByteFrequencyData(h)}getByteTimeDomainData(h){this._nativeAnalyserNode.getByteTimeDomainData(h)}getFloatFrequencyData(h){this._nativeAnalyserNode.getFloatFrequencyData(h)}getFloatTimeDomainData(h){this._nativeAnalyserNode.getFloatTimeDomainData(h)}},mi=(n,t)=>n.context===t,k3=(n,t,e)=>()=>{const s=new WeakMap,r=async(a,u)=>{let h=t(a);if(!mi(h,u)){const m={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,fftSize:h.fftSize,maxDecibels:h.maxDecibels,minDecibels:h.minDecibels,smoothingTimeConstant:h.smoothingTimeConstant};h=n(u,m)}return s.set(u,h),await e(a,u,h),h};return{render(a,u){const h=s.get(u);return h!==void 0?Promise.resolve(h):r(a,u)}}},Ep=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Gr=()=>new DOMException("","IndexSizeError"),Oy=n=>{n.getChannelData=(t=>e=>{try{return t.call(n,e)}catch(s){throw s.code===12?Gr():s}})(n.getChannelData)},O3={numberOfChannels:1},D3=(n,t,e,s,r,a,u,h)=>{let p=null;return class X2{constructor(_){if(r===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:g,numberOfChannels:b,sampleRate:x}={...O3,..._};p===null&&(p=new r(1,1,44100));const S=s!==null&&t(a,a)?new s({length:g,numberOfChannels:b,sampleRate:x}):p.createBuffer(b,g,x);if(S.numberOfChannels===0)throw e();return typeof S.copyFromChannel!="function"?(u(S),Oy(S)):t(Ep,()=>Ep(S))||h(S),n.add(S),S}static[Symbol.hasInstance](_){return _!==null&&typeof _=="object"&&Object.getPrototypeOf(_)===X2.prototype||n.has(_)}}},Vi=-34028234663852886e22,wi=-Vi,Oo=n=>tu.has(n),R3={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},I3=(n,t,e,s,r,a,u,h)=>class extends n{constructor(m,_){const g=a(m),b={...R3,..._},x=r(g,b),S=u(g),A=S?t():null;super(m,!1,x,A),this._audioBufferSourceNodeRenderer=A,this._isBufferNullified=!1,this._isBufferSet=b.buffer!==null,this._nativeAudioBufferSourceNode=x,this._onended=null,this._playbackRate=e(this,S,x.playbackRate,wi,Vi)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(m){if(this._nativeAudioBufferSourceNode.buffer=m,m!==null){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(m){this._nativeAudioBufferSourceNode.loop=m}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(m){this._nativeAudioBufferSourceNode.loopEnd=m}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(m){this._nativeAudioBufferSourceNode.loopStart=m}get onended(){return this._onended}set onended(m){const _=typeof m=="function"?h(this,m):null;this._nativeAudioBufferSourceNode.onended=_;const g=this._nativeAudioBufferSourceNode.onended;this._onended=g!==null&&g===_?m:g}get playbackRate(){return this._playbackRate}start(m=0,_=0,g){if(this._nativeAudioBufferSourceNode.start(m,_,g),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=g===void 0?[m,_]:[m,_,g]),this.context.state!=="closed"){eu(this);const b=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",b),Oo(this)&&rf(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",b)}}stop(m=0){this._nativeAudioBufferSourceNode.stop(m),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=m)}},N3=(n,t,e,s,r)=>()=>{const a=new WeakMap;let u=null,h=null;const p=async(m,_)=>{let g=e(m);const b=mi(g,_);if(!b){const x={buffer:g.buffer,channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,loop:g.loop,loopEnd:g.loopEnd,loopStart:g.loopStart,playbackRate:g.playbackRate.value};g=t(_,x),u!==null&&g.start(...u),h!==null&&g.stop(h)}return a.set(_,g),b?await n(_,m.playbackRate,g.playbackRate):await s(_,m.playbackRate,g.playbackRate),await r(m,_,g),g};return{set start(m){u=m},set stop(m){h=m},render(m,_){const g=a.get(_);return g!==void 0?Promise.resolve(g):p(m,_)}}},P3=n=>"playbackRate"in n,z3=n=>"frequency"in n&&"gain"in n,U3=n=>"offset"in n,B3=n=>!("frequency"in n)&&"gain"in n,H3=n=>"detune"in n&&"frequency"in n&&!("gain"in n),V3=n=>"pan"in n,xi=n=>lr(q2,n),of=n=>lr(G2,n),$0=(n,t)=>{const{activeInputs:e}=xi(n);e.forEach(r=>r.forEach(([a])=>{t.includes(n)||$0(a,[...t,n])}));const s=P3(n)?[n.playbackRate]:Y2(n)?Array.from(n.parameters.values()):z3(n)?[n.Q,n.detune,n.frequency,n.gain]:U3(n)?[n.offset]:B3(n)?[n.gain]:H3(n)?[n.detune,n.frequency]:V3(n)?[n.pan]:[];for(const r of s){const a=of(r);a!==void 0&&a.activeInputs.forEach(([u])=>$0(u,t))}Oo(n)&&rf(n)},Q2=n=>{$0(n.destination,[])},j3=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback"),q3=(n,t,e,s,r,a,u,h,p)=>class extends n{constructor(_={}){if(p===null)throw new Error("Missing the native AudioContext constructor.");let g;try{g=new p(_)}catch(S){throw S.code===12&&S.message==="sampleRate is not in range"?e():S}if(g===null)throw s();if(!j3(_.latencyHint))throw new TypeError(`The provided value '${_.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(_.sampleRate!==void 0&&g.sampleRate!==_.sampleRate)throw e();super(g,2);const{latencyHint:b}=_,{sampleRate:x}=g;if(this._baseLatency=typeof g.baseLatency=="number"?g.baseLatency:b==="balanced"?512/x:b==="interactive"||b===void 0?256/x:b==="playback"?1024/x:Math.max(2,Math.min(128,Math.round(b*x/128)))*128/x,this._nativeAudioContext=g,p.name==="webkitAudioContext"?(this._nativeGainNode=g.createGain(),this._nativeOscillatorNode=g.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(g.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,g.state==="running"){this._state="suspended";const S=()=>{this._state==="suspended"&&(this._state=null),g.removeEventListener("statechange",S)};g.addEventListener("statechange",S)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Q2(this)}))}createMediaElementSource(_){return new r(this,{mediaElement:_})}createMediaStreamDestination(){return new a(this)}createMediaStreamSource(_){return new u(this,{mediaStream:_})}createMediaStreamTrackSource(_){return new h(this,{mediaStreamTrack:_})}resume(){return this._state==="suspended"?new Promise((_,g)=>{const b=()=>{this._nativeAudioContext.removeEventListener("statechange",b),this._nativeAudioContext.state==="running"?_():this.resume().then(_,g)};this._nativeAudioContext.addEventListener("statechange",b)}):this._nativeAudioContext.resume().catch(_=>{throw _===void 0||_.code===15?t():_})}suspend(){return this._nativeAudioContext.suspend().catch(_=>{throw _===void 0?t():_})}},G3=(n,t,e,s,r,a,u,h)=>class extends n{constructor(m,_){const g=a(m),b=u(g),x=r(g,_,b),S=b?t(h):null;super(m,!1,x,S),this._isNodeOfNativeOfflineAudioContext=b,this._nativeAudioDestinationNode=x}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(m){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(m>this._nativeAudioDestinationNode.maxChannelCount)throw e();this._nativeAudioDestinationNode.channelCount=m}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(m){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=m}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},Z3=n=>{const t=new WeakMap,e=async(s,r)=>{const a=r.destination;return t.set(r,a),await n(s,r,a),a};return{render(s,r){const a=t.get(r);return a!==void 0?Promise.resolve(a):e(s,r)}}},W3=(n,t,e,s,r,a,u,h)=>(p,m)=>{const _=m.listener,g=()=>{const N=new Float32Array(1),j=t(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),Y=u(m);let G=!1,Z=[0,0,-1,0,1,0],F=[0,0,0];const $=()=>{if(G)return;G=!0;const W=s(m,256,9,0);W.onaudioprocess=({inputBuffer:P})=>{const U=[a(P,N,0),a(P,N,1),a(P,N,2),a(P,N,3),a(P,N,4),a(P,N,5)];U.some((D,V)=>D!==Z[V])&&(_.setOrientation(...U),Z=U);const K=[a(P,N,6),a(P,N,7),a(P,N,8)];K.some((D,V)=>D!==F[V])&&(_.setPosition(...K),F=K)},j.connect(W)},et=W=>P=>{P!==Z[W]&&(Z[W]=P,_.setOrientation(...Z))},k=W=>P=>{P!==F[W]&&(F[W]=P,_.setPosition(...F))},X=(W,P,U)=>{const K=e(m,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:P});K.connect(j,0,W),K.start(),Object.defineProperty(K.offset,"defaultValue",{get(){return P}});const D=n({context:p},Y,K.offset,wi,Vi);return h(D,"value",V=>()=>V.call(D),V=>I=>{try{V.call(D,I)}catch(q){if(q.code!==9)throw q}$(),Y&&U(I)}),D.cancelAndHoldAtTime=(V=>Y?()=>{throw r()}:(...I)=>{const q=V.apply(D,I);return $(),q})(D.cancelAndHoldAtTime),D.cancelScheduledValues=(V=>Y?()=>{throw r()}:(...I)=>{const q=V.apply(D,I);return $(),q})(D.cancelScheduledValues),D.exponentialRampToValueAtTime=(V=>Y?()=>{throw r()}:(...I)=>{const q=V.apply(D,I);return $(),q})(D.exponentialRampToValueAtTime),D.linearRampToValueAtTime=(V=>Y?()=>{throw r()}:(...I)=>{const q=V.apply(D,I);return $(),q})(D.linearRampToValueAtTime),D.setTargetAtTime=(V=>Y?()=>{throw r()}:(...I)=>{const q=V.apply(D,I);return $(),q})(D.setTargetAtTime),D.setValueAtTime=(V=>Y?()=>{throw r()}:(...I)=>{const q=V.apply(D,I);return $(),q})(D.setValueAtTime),D.setValueCurveAtTime=(V=>Y?()=>{throw r()}:(...I)=>{const q=V.apply(D,I);return $(),q})(D.setValueCurveAtTime),D};return{forwardX:X(0,0,et(0)),forwardY:X(1,0,et(1)),forwardZ:X(2,-1,et(2)),positionX:X(6,0,k(0)),positionY:X(7,0,k(1)),positionZ:X(8,0,k(2)),upX:X(3,0,et(3)),upY:X(4,1,et(4)),upZ:X(5,0,et(5))}},{forwardX:b,forwardY:x,forwardZ:S,positionX:A,positionY:E,positionZ:R,upX:z,upY:O,upZ:Q}=_.forwardX===void 0?g():_;return{get forwardX(){return b},get forwardY(){return x},get forwardZ(){return S},get positionX(){return A},get positionY(){return E},get positionZ(){return R},get upX(){return z},get upY(){return O},get upZ(){return Q}}},Cp=n=>"context"in n,af=n=>Cp(n[0]),jl=(n,t,e,s)=>{for(const r of n)if(e(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(t),!0},Kx=(n,t,[e,s],r)=>{jl(n,[t,e,s],a=>a[0]===t&&a[1]===e,r)},Jx=(n,[t,e,s],r)=>{const a=n.get(t);a===void 0?n.set(t,new Set([[e,s]])):jl(a,[e,s],u=>u[0]===e,r)},au=n=>"inputs"in n,Lp=(n,t,e,s)=>{if(au(t)){const r=t.inputs[s];return n.connect(r,e,0),[r,e,0]}return n.connect(t,e,s),[t,e,s]},$2=(n,t,e)=>{for(const s of n)if(s[0]===t&&s[1]===e)return n.delete(s),s;return null},F3=(n,t,e)=>tm(n,s=>s[0]===t&&s[1]===e),K2=(n,t)=>{if(!sf(n).delete(t))throw new Error("Missing the expected event listener.")},J2=(n,t,e)=>{const s=lr(n,t),r=tm(s,a=>a[0]===e);return s.size===0&&n.delete(t),r},Mp=(n,t,e,s)=>{au(t)?n.disconnect(t.inputs[s],e,0):n.disconnect(t,e,s)},on=n=>lr(My,n),Hh=n=>lr(ky,n),Ul=n=>F0.has(n),hp=n=>!tu.has(n),tS=(n,t)=>new Promise(e=>{if(t!==null)e(!0);else{const s=n.createScriptProcessor(256,1,1),r=n.createGain(),a=n.createBuffer(1,2,44100),u=a.getChannelData(0);u[0]=1,u[1]=1;const h=n.createBufferSource();h.buffer=a,h.loop=!0,h.connect(s).connect(n.destination),h.connect(r),h.disconnect(r),s.onaudioprocess=p=>{const m=p.inputBuffer.getChannelData(0);Array.prototype.some.call(m,_=>_===1)?e(!0):e(!1),h.stop(),s.onaudioprocess=null,h.disconnect(s),s.disconnect(n.destination)},h.start()}}),u0=(n,t)=>{const e=new Map;for(const s of n)for(const r of s){const a=e.get(r);e.set(r,a===void 0?1:a+1)}e.forEach((s,r)=>t(r,s))},kp=n=>"context"in n,Y3=n=>{const t=new Map;n.connect=(e=>(s,r=0,a=0)=>{const u=kp(s)?e(s,r,a):e(s,r),h=t.get(s);return h===void 0?t.set(s,[{input:a,output:r}]):h.every(p=>p.input!==a||p.output!==r)&&h.push({input:a,output:r}),u})(n.connect.bind(n)),n.disconnect=(e=>(s,r,a)=>{if(e.apply(n),s===void 0)t.clear();else if(typeof s=="number")for(const[u,h]of t){const p=h.filter(m=>m.output!==s);p.length===0?t.delete(u):t.set(u,p)}else if(t.has(s))if(r===void 0)t.delete(s);else{const u=t.get(s);if(u!==void 0){const h=u.filter(p=>p.output!==r&&(p.input!==a||a===void 0));h.length===0?t.delete(s):t.set(s,h)}}for(const[u,h]of t)h.forEach(p=>{kp(u)?n.connect(u,p.output,p.input):n.connect(u,p.output)})})(n.disconnect)},X3=(n,t,e,s)=>{const{activeInputs:r,passiveInputs:a}=of(t),{outputs:u}=xi(n),h=sf(n),p=m=>{const _=on(n),g=Hh(t);if(m){const b=J2(a,n,e);Kx(r,n,b,!1),!s&&!Ul(n)&&_.connect(g,e)}else{const b=F3(r,n,e);Jx(a,b,!1),!s&&!Ul(n)&&_.disconnect(g,e)}};return jl(u,[t,e],m=>m[0]===t&&m[1]===e,!0)?(h.add(p),Oo(n)?Kx(r,n,[e,p],!0):Jx(a,[n,e,p],!0),!0):!1},Q3=(n,t,e,s)=>{const{activeInputs:r,passiveInputs:a}=xi(t),u=$2(r[s],n,e);return u===null?[F2(a,n,e,s)[2],!1]:[u[2],!0]},$3=(n,t,e)=>{const{activeInputs:s,passiveInputs:r}=of(t),a=$2(s,n,e);return a===null?[J2(r,n,e)[1],!1]:[a[2],!0]},Dy=(n,t,e,s,r)=>{const[a,u]=Q3(n,e,s,r);if(a!==null&&(K2(n,a),u&&!t&&!Ul(n)&&Mp(on(n),on(e),s,r)),Oo(e)){const{activeInputs:h}=xi(e);Q0(e,h)}},Ry=(n,t,e,s)=>{const[r,a]=$3(n,e,s);r!==null&&(K2(n,r),a&&!t&&!Ul(n)&&on(n).disconnect(Hh(e),s))},K3=(n,t)=>{const e=xi(n),s=[];for(const r of e.outputs)af(r)?Dy(n,t,...r):Ry(n,t,...r),s.push(r[0]);return e.outputs.clear(),s},J3=(n,t,e)=>{const s=xi(n),r=[];for(const a of s.outputs)a[1]===e&&(af(a)?Dy(n,t,...a):Ry(n,t,...a),r.push(a[0]),s.outputs.delete(a));return r},tM=(n,t,e,s,r)=>{const a=xi(n);return Array.from(a.outputs).filter(u=>u[0]===e&&(s===void 0||u[1]===s)&&(r===void 0||u[2]===r)).map(u=>(af(u)?Dy(n,t,...u):Ry(n,t,...u),a.outputs.delete(u),u[0]))},eM=(n,t,e,s,r,a,u,h,p,m,_,g,b,x,S,A)=>class extends m{constructor(R,z,O,Q){super(O),this._context=R,this._nativeAudioNode=O;const N=_(R);g(N)&&e(tS,()=>tS(N,A))!==!0&&Y3(O),My.set(this,O),Z2.set(this,new Set),R.state!=="closed"&&z&&eu(this),n(this,Q,O)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(R){this._nativeAudioNode.channelCount=R}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(R){this._nativeAudioNode.channelCountMode=R}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(R){this._nativeAudioNode.channelInterpretation=R}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(R,z=0,O=0){if(z<0||z>=this._nativeAudioNode.numberOfOutputs)throw r();const Q=_(this._context),N=S(Q);if(b(R)||x(R))throw a();if(Cp(R)){const G=on(R);try{const F=Lp(this._nativeAudioNode,G,z,O),$=hp(this);(N||$)&&this._nativeAudioNode.disconnect(...F),this.context.state!=="closed"&&!$&&hp(R)&&eu(R)}catch(F){throw F.code===12?a():F}if(t(this,R,z,O,N)){const F=p([this],R);u0(F,s(N))}return R}const j=Hh(R);if(j.name==="playbackRate"&&j.maxValue===1024)throw u();try{this._nativeAudioNode.connect(j,z),(N||hp(this))&&this._nativeAudioNode.disconnect(j,z)}catch(G){throw G.code===12?a():G}if(X3(this,R,z,N)){const G=p([this],R);u0(G,s(N))}}disconnect(R,z,O){let Q;const N=_(this._context),j=S(N);if(R===void 0)Q=K3(this,j);else if(typeof R=="number"){if(R<0||R>=this.numberOfOutputs)throw r();Q=J3(this,j,R)}else{if(z!==void 0&&(z<0||z>=this.numberOfOutputs)||Cp(R)&&O!==void 0&&(O<0||O>=R.numberOfInputs))throw r();if(Q=tM(this,j,R,z,O),Q.length===0)throw a()}for(const Y of Q){const G=p([this],Y);u0(G,h)}}},nM=(n,t,e,s,r,a,u,h,p,m,_,g,b)=>(x,S,A,E=null,R=null)=>{const z=A.value,O=new f3(z),Q=S?s(O):null,N={get defaultValue(){return z},get maxValue(){return E===null?A.maxValue:E},get minValue(){return R===null?A.minValue:R},get value(){return A.value},set value(j){A.value=j,N.setValueAtTime(j,x.context.currentTime)},cancelAndHoldAtTime(j){if(typeof A.cancelAndHoldAtTime=="function")Q===null&&O.flush(x.context.currentTime),O.add(r(j)),A.cancelAndHoldAtTime(j);else{const Y=Array.from(O).pop();Q===null&&O.flush(x.context.currentTime),O.add(r(j));const G=Array.from(O).pop();A.cancelScheduledValues(j),Y!==G&&G!==void 0&&(G.type==="exponentialRampToValue"?A.exponentialRampToValueAtTime(G.value,G.endTime):G.type==="linearRampToValue"?A.linearRampToValueAtTime(G.value,G.endTime):G.type==="setValue"?A.setValueAtTime(G.value,G.startTime):G.type==="setValueCurve"&&A.setValueCurveAtTime(G.values,G.startTime,G.duration))}return N},cancelScheduledValues(j){return Q===null&&O.flush(x.context.currentTime),O.add(a(j)),A.cancelScheduledValues(j),N},exponentialRampToValueAtTime(j,Y){if(j===0)throw new RangeError;if(!Number.isFinite(Y)||Y<0)throw new RangeError;const G=x.context.currentTime;return Q===null&&O.flush(G),Array.from(O).length===0&&(O.add(m(z,G)),A.setValueAtTime(z,G)),O.add(u(j,Y)),A.exponentialRampToValueAtTime(j,Y),N},linearRampToValueAtTime(j,Y){const G=x.context.currentTime;return Q===null&&O.flush(G),Array.from(O).length===0&&(O.add(m(z,G)),A.setValueAtTime(z,G)),O.add(h(j,Y)),A.linearRampToValueAtTime(j,Y),N},setTargetAtTime(j,Y,G){return Q===null&&O.flush(x.context.currentTime),O.add(p(j,Y,G)),A.setTargetAtTime(j,Y,G),N},setValueAtTime(j,Y){return Q===null&&O.flush(x.context.currentTime),O.add(m(j,Y)),A.setValueAtTime(j,Y),N},setValueCurveAtTime(j,Y,G){const Z=j instanceof Float32Array?j:new Float32Array(j);if(g!==null&&g.name==="webkitAudioContext"){const F=Y+G,$=x.context.sampleRate,et=Math.ceil(Y*$),k=Math.floor(F*$),X=k-et,W=new Float32Array(X);for(let U=0;U<X;U+=1){const K=(Z.length-1)/G*((et+U)/$-Y),D=Math.floor(K),V=Math.ceil(K);W[U]=D===V?Z[D]:(1-(K-D))*Z[D]+(1-(V-K))*Z[V]}Q===null&&O.flush(x.context.currentTime),O.add(_(W,Y,G)),A.setValueCurveAtTime(W,Y,G);const P=k/$;P<F&&b(N,W[W.length-1],P),b(N,Z[Z.length-1],F)}else Q===null&&O.flush(x.context.currentTime),O.add(_(Z,Y,G)),A.setValueCurveAtTime(Z,Y,G);return N}};return e.set(N,A),t.set(N,x),n(N,Q),N},iM=n=>({replay(t){for(const e of n)if(e.type==="exponentialRampToValue"){const{endTime:s,value:r}=e;t.exponentialRampToValueAtTime(r,s)}else if(e.type==="linearRampToValue"){const{endTime:s,value:r}=e;t.linearRampToValueAtTime(r,s)}else if(e.type==="setTarget"){const{startTime:s,target:r,timeConstant:a}=e;t.setTargetAtTime(r,s,a)}else if(e.type==="setValue"){const{startTime:s,value:r}=e;t.setValueAtTime(r,s)}else if(e.type==="setValueCurve"){const{duration:s,startTime:r,values:a}=e;t.setValueCurveAtTime(a,r,s)}else throw new Error("Can't apply an unknown automation.")}});class tT{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach((s,r)=>t.call(e,s,r,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const sM={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},rM=(n,t,e,s,r,a,u,h,p,m,_,g,b,x)=>class extends t{constructor(A,E,R){var z;const O=h(A),Q=p(O),N=_({...sM,...R});b(N);const j=Y0.get(O),Y=j?.get(E),G=Q||O.state!=="closed"?O:(z=u(O))!==null&&z!==void 0?z:O,Z=r(G,Q?null:A.baseLatency,m,E,Y,N),F=Q?s(E,N,Y):null;super(A,!0,Z,F);const $=[];Z.parameters.forEach((k,X)=>{const W=e(this,Q,k);$.push([X,W])}),this._nativeAudioWorkletNode=Z,this._onprocessorerror=null,this._parameters=new tT($),Q&&n(O,this);const{activeInputs:et}=a(this);g(Z,et)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(A){const E=typeof A=="function"?x(this,A):null;this._nativeAudioWorkletNode.onprocessorerror=E;const R=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=R!==null&&R===E?A:R}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Op(n,t,e,s,r){if(typeof n.copyFromChannel=="function")t[e].byteLength===0&&(t[e]=new Float32Array(128)),n.copyFromChannel(t[e],s,r);else{const a=n.getChannelData(s);if(t[e].byteLength===0)t[e]=a.slice(r,r+128);else{const u=new Float32Array(a.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);t[e].set(u)}}}const eT=(n,t,e,s,r)=>{typeof n.copyToChannel=="function"?t[e].byteLength!==0&&n.copyToChannel(t[e],s,r):t[e].byteLength!==0&&n.getChannelData(s).set(t[e],r)},Dp=(n,t)=>{const e=[];for(let s=0;s<n;s+=1){const r=[],a=typeof t=="number"?t:t[s];for(let u=0;u<a;u+=1)r.push(new Float32Array(128));e.push(r)}return e},oM=(n,t)=>{const e=lr(X0,n),s=on(t);return lr(e,s)},aM=async(n,t,e,s,r,a,u)=>{const h=t===null?Math.ceil(n.context.length/128)*128:t.length,p=s.channelCount*s.numberOfInputs,m=r.reduce((E,R)=>E+R,0),_=m===0?null:e.createBuffer(m,h,e.sampleRate);if(a===void 0)throw new Error("Missing the processor constructor.");const g=xi(n),b=await oM(e,n),x=Dp(s.numberOfInputs,s.channelCount),S=Dp(s.numberOfOutputs,r),A=Array.from(n.parameters.keys()).reduce((E,R)=>({...E,[R]:new Float32Array(128)}),{});for(let E=0;E<h;E+=128){if(s.numberOfInputs>0&&t!==null)for(let R=0;R<s.numberOfInputs;R+=1)for(let z=0;z<s.channelCount;z+=1)Op(t,x[R],z,z,E);a.parameterDescriptors!==void 0&&t!==null&&a.parameterDescriptors.forEach(({name:R},z)=>{Op(t,A,R,p+z,E)});for(let R=0;R<s.numberOfInputs;R+=1)for(let z=0;z<r[R];z+=1)S[R][z].byteLength===0&&(S[R][z]=new Float32Array(128));try{const R=x.map((O,Q)=>g.activeInputs[Q].size===0?[]:O),z=u(E/e.sampleRate,e.sampleRate,()=>b.process(R,S,A));if(_!==null)for(let O=0,Q=0;O<s.numberOfOutputs;O+=1){for(let N=0;N<r[O];N+=1)eT(_,S[O],N,Q+N,E);Q+=r[O]}if(!z)break}catch(R){n.dispatchEvent(new ErrorEvent("processorerror",{colno:R.colno,filename:R.filename,lineno:R.lineno,message:R.message}));break}}return _},lM=(n,t,e,s,r,a,u,h,p,m,_,g,b,x,S,A)=>(E,R,z)=>{const O=new WeakMap;let Q=null;const N=async(j,Y)=>{let G=_(j),Z=null;const F=mi(G,Y),$=Array.isArray(R.outputChannelCount)?R.outputChannelCount:Array.from(R.outputChannelCount);if(g===null){const et=$.reduce((P,U)=>P+U,0),k=r(Y,{channelCount:Math.max(1,et),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,et)}),X=[];for(let P=0;P<j.numberOfOutputs;P+=1)X.push(s(Y,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:$[P]}));const W=u(Y,{channelCount:R.channelCount,channelCountMode:R.channelCountMode,channelInterpretation:R.channelInterpretation,gain:1});W.connect=t.bind(null,X),W.disconnect=p.bind(null,X),Z=[k,X,W]}else F||(G=new g(Y,E));if(O.set(Y,Z===null?G:Z[2]),Z!==null){if(Q===null){if(z===void 0)throw new Error("Missing the processor constructor.");if(b===null)throw new Error("Missing the native OfflineAudioContext constructor.");const U=j.channelCount*j.numberOfInputs,K=z.parameterDescriptors===void 0?0:z.parameterDescriptors.length,D=U+K;Q=aM(j,D===0?null:await(async()=>{const I=new b(D,Math.ceil(j.context.length/128)*128,Y.sampleRate),q=[],at=[];for(let gt=0;gt<R.numberOfInputs;gt+=1)q.push(u(I,{channelCount:R.channelCount,channelCountMode:R.channelCountMode,channelInterpretation:R.channelInterpretation,gain:1})),at.push(r(I,{channelCount:R.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:R.channelCount}));const mt=await Promise.all(Array.from(j.parameters.values()).map(async gt=>{const Dt=a(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:gt.value});return await x(I,gt,Dt.offset),Dt})),vt=s(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,U+K)});for(let gt=0;gt<R.numberOfInputs;gt+=1){q[gt].connect(at[gt]);for(let Dt=0;Dt<R.channelCount;Dt+=1)at[gt].connect(vt,Dt,gt*R.channelCount+Dt)}for(const[gt,Dt]of mt.entries())Dt.connect(vt,0,U+gt),Dt.start(0);return vt.connect(I.destination),await Promise.all(q.map(gt=>S(j,I,gt))),A(I)})(),Y,R,$,z,m)}const et=await Q,k=e(Y,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[X,W,P]=Z;et!==null&&(k.buffer=et,k.start(0)),k.connect(X);for(let U=0,K=0;U<j.numberOfOutputs;U+=1){const D=W[U];for(let V=0;V<$[U];V+=1)X.connect(D,K+V,V);K+=$[U]}return P}if(F)for(const[et,k]of j.parameters.entries())await n(Y,k,G.parameters.get(et));else for(const[et,k]of j.parameters.entries())await x(Y,k,G.parameters.get(et));return await S(j,Y,G),G};return{render(j,Y){h(Y,j);const G=O.get(Y);return G!==void 0?Promise.resolve(G):N(j,Y)}}},cM=(n,t,e,s,r,a,u,h,p,m,_,g,b,x,S,A,E,R,z,O)=>class extends S{constructor(N,j){super(N,j),this._nativeContext=N,this._audioWorklet=n===void 0?void 0:{addModule:(Y,G)=>n(this,Y,G)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new r(this)}createBuffer(N,j,Y){return new e({length:j,numberOfChannels:N,sampleRate:Y})}createBufferSource(){return new s(this)}createChannelMerger(N=6){return new a(this,{numberOfInputs:N})}createChannelSplitter(N=6){return new u(this,{numberOfOutputs:N})}createConstantSource(){return new h(this)}createConvolver(){return new p(this)}createDelay(N=1){return new _(this,{maxDelayTime:N})}createDynamicsCompressor(){return new g(this)}createGain(){return new b(this)}createIIRFilter(N,j){return new x(this,{feedback:j,feedforward:N})}createOscillator(){return new A(this)}createPanner(){return new E(this)}createPeriodicWave(N,j,Y={disableNormalization:!1}){return new R(this,{...Y,imag:j,real:N})}createStereoPanner(){return new z(this)}createWaveShaper(){return new O(this)}decodeAudioData(N,j,Y){return m(this._nativeContext,N).then(G=>(typeof j=="function"&&j(G),G),G=>{throw typeof Y=="function"&&Y(G),G})}},uM={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},hM=(n,t,e,s,r,a,u,h)=>class extends n{constructor(m,_){const g=a(m),b={...uM,..._},x=r(g,b),S=u(g),A=S?e():null;super(m,!1,x,A),this._Q=t(this,S,x.Q,wi,Vi),this._detune=t(this,S,x.detune,1200*Math.log2(wi),-1200*Math.log2(wi)),this._frequency=t(this,S,x.frequency,m.sampleRate/2,0),this._gain=t(this,S,x.gain,40*Math.log10(wi),Vi),this._nativeBiquadFilterNode=x,h(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(m){this._nativeBiquadFilterNode.type=m}getFrequencyResponse(m,_,g){try{this._nativeBiquadFilterNode.getFrequencyResponse(m,_,g)}catch(b){throw b.code===11?s():b}if(m.length!==_.length||_.length!==g.length)throw s()}},fM=(n,t,e,s,r)=>()=>{const a=new WeakMap,u=async(h,p)=>{let m=e(h);const _=mi(m,p);if(!_){const g={Q:m.Q.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,detune:m.detune.value,frequency:m.frequency.value,gain:m.gain.value,type:m.type};m=t(p,g)}return a.set(p,m),_?(await n(p,h.Q,m.Q),await n(p,h.detune,m.detune),await n(p,h.frequency,m.frequency),await n(p,h.gain,m.gain)):(await s(p,h.Q,m.Q),await s(p,h.detune,m.detune),await s(p,h.frequency,m.frequency),await s(p,h.gain,m.gain)),await r(h,p,m),m};return{render(h,p){const m=a.get(p);return m!==void 0?Promise.resolve(m):u(h,p)}}},dM=(n,t)=>(e,s)=>{const r=t.get(e);if(r!==void 0)return r;const a=n.get(e);if(a!==void 0)return a;try{const u=s();return u instanceof Promise?(n.set(e,u),u.catch(()=>!1).then(h=>(n.delete(e),t.set(e,h),h))):(t.set(e,u),u)}catch{return t.set(e,!1),!1}},pM={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},mM=(n,t,e,s,r)=>class extends n{constructor(u,h){const p=s(u),m={...pM,...h},_=e(p,m),g=r(p)?t():null;super(u,!1,_,g)}},_M=(n,t,e)=>()=>{const s=new WeakMap,r=async(a,u)=>{let h=t(a);if(!mi(h,u)){const m={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,numberOfInputs:h.numberOfInputs};h=n(u,m)}return s.set(u,h),await e(a,u,h),h};return{render(a,u){const h=s.get(u);return h!==void 0?Promise.resolve(h):r(a,u)}}},gM={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},yM=(n,t,e,s,r,a)=>class extends n{constructor(h,p){const m=s(h),_=a({...gM,...p}),g=e(m,_),b=r(m)?t():null;super(h,!1,g,b)}},vM=(n,t,e)=>()=>{const s=new WeakMap,r=async(a,u)=>{let h=t(a);if(!mi(h,u)){const m={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,numberOfOutputs:h.numberOfOutputs};h=n(u,m)}return s.set(u,h),await e(a,u,h),h};return{render(a,u){const h=s.get(u);return h!==void 0?Promise.resolve(h):r(a,u)}}},bM=n=>(t,e,s)=>n(e,t,s),wM=n=>(t,e,s=0,r=0)=>{const a=t[s];if(a===void 0)throw n();return kp(e)?a.connect(e,0,r):a.connect(e,0)},xM=n=>(t,e)=>{const s=n(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=t.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(e),s.start(),()=>{s.stop(),s.disconnect(e)}},SM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},TM=(n,t,e,s,r,a,u)=>class extends n{constructor(p,m){const _=r(p),g={...SM,...m},b=s(_,g),x=a(_),S=x?e():null;super(p,!1,b,S),this._constantSourceNodeRenderer=S,this._nativeConstantSourceNode=b,this._offset=t(this,x,b.offset,wi,Vi),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(p){const m=typeof p=="function"?u(this,p):null;this._nativeConstantSourceNode.onended=m;const _=this._nativeConstantSourceNode.onended;this._onended=_!==null&&_===m?p:_}start(p=0){if(this._nativeConstantSourceNode.start(p),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=p),this.context.state!=="closed"){eu(this);const m=()=>{this._nativeConstantSourceNode.removeEventListener("ended",m),Oo(this)&&rf(this)};this._nativeConstantSourceNode.addEventListener("ended",m)}}stop(p=0){this._nativeConstantSourceNode.stop(p),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=p)}},AM=(n,t,e,s,r)=>()=>{const a=new WeakMap;let u=null,h=null;const p=async(m,_)=>{let g=e(m);const b=mi(g,_);if(!b){const x={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,offset:g.offset.value};g=t(_,x),u!==null&&g.start(u),h!==null&&g.stop(h)}return a.set(_,g),b?await n(_,m.offset,g.offset):await s(_,m.offset,g.offset),await r(m,_,g),g};return{set start(m){u=m},set stop(m){h=m},render(m,_){const g=a.get(_);return g!==void 0?Promise.resolve(g):p(m,_)}}},EM=n=>t=>(n[0]=t,n[0]),CM={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},LM=(n,t,e,s,r,a)=>class extends n{constructor(h,p){const m=s(h),_={...CM,...p},g=e(m,_),x=r(m)?t():null;super(h,!1,g,x),this._isBufferNullified=!1,this._nativeConvolverNode=g,_.buffer!==null&&a(this,_.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(h){if(this._nativeConvolverNode.buffer=h,h===null&&this._nativeConvolverNode.buffer!==null){const p=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=p.createBuffer(1,1,p.sampleRate),this._isBufferNullified=!0,a(this,0)}else this._isBufferNullified=!1,a(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(h){this._nativeConvolverNode.normalize=h}},MM=(n,t,e)=>()=>{const s=new WeakMap,r=async(a,u)=>{let h=t(a);if(!mi(h,u)){const m={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,disableNormalization:!h.normalize};h=n(u,m)}return s.set(u,h),au(h)?await e(a,u,h.inputs[0]):await e(a,u,h),h};return{render(a,u){const h=s.get(u);return h!==void 0?Promise.resolve(h):r(a,u)}}},kM=(n,t)=>(e,s,r)=>{if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(e,s,r)}catch(a){throw a.name==="SyntaxError"?n():a}},OM=()=>new DOMException("","DataCloneError"),eS=n=>{const{port1:t,port2:e}=new MessageChannel;return new Promise(s=>{const r=()=>{e.onmessage=null,t.close(),e.close(),s()};e.onmessage=()=>r();try{t.postMessage(n,[n])}catch{}finally{r()}})},DM=(n,t,e,s,r,a,u,h,p,m,_)=>(g,b)=>{const x=u(g)?g:a(g);if(r.has(b)){const S=e();return Promise.reject(S)}try{r.add(b)}catch{}return t(p,()=>p(x))?x.decodeAudioData(b).then(S=>(eS(b).catch(()=>{}),t(h,()=>h(S))||_(S),n.add(S),S)):new Promise((S,A)=>{const E=async()=>{try{await eS(b)}catch{}},R=z=>{A(z),E()};try{x.decodeAudioData(b,z=>{typeof z.copyFromChannel!="function"&&(m(z),Oy(z)),n.add(z),E().then(()=>S(z))},z=>{R(z===null?s():z)})}catch(z){R(z)}})},RM=(n,t,e,s,r,a,u,h)=>(p,m)=>{const _=t.get(p);if(_===void 0)throw new Error("Missing the expected cycle count.");const g=a(p.context),b=h(g);if(_===m){if(t.delete(p),!b&&u(p)){const x=s(p),{outputs:S}=e(p);for(const A of S)if(af(A)){const E=s(A[0]);n(x,E,A[1],A[2])}else{const E=r(A[0]);x.connect(E,A[1])}}}else t.set(p,_-m)},IM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},NM=(n,t,e,s,r,a,u)=>class extends n{constructor(p,m){const _=r(p),g={...IM,...m},b=s(_,g),x=a(_),S=x?e(g.maxDelayTime):null;super(p,!1,b,S),this._delayTime=t(this,x,b.delayTime),u(this,g.maxDelayTime)}get delayTime(){return this._delayTime}},PM=(n,t,e,s,r)=>a=>{const u=new WeakMap,h=async(p,m)=>{let _=e(p);const g=mi(_,m);if(!g){const b={channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,delayTime:_.delayTime.value,maxDelayTime:a};_=t(m,b)}return u.set(m,_),g?await n(m,p.delayTime,_.delayTime):await s(m,p.delayTime,_.delayTime),await r(p,m,_),_};return{render(p,m){const _=u.get(m);return _!==void 0?Promise.resolve(_):h(p,m)}}},zM=n=>(t,e,s,r)=>n(t[r],a=>a[0]===e&&a[1]===s),UM=n=>(t,e)=>{n(t).delete(e)},BM=n=>"delayTime"in n,HM=(n,t,e)=>function s(r,a){const u=Cp(a)?a:e(n,a);if(BM(u))return[];if(r[0]===u)return[r];if(r.includes(u))return[];const{outputs:h}=t(u);return Array.from(h).map(p=>s([...r,u],p[0])).reduce((p,m)=>p.concat(m),[])},Wd=(n,t,e)=>{const s=t[e];if(s===void 0)throw n();return s},VM=n=>(t,e=void 0,s=void 0,r=0)=>e===void 0?t.forEach(a=>a.disconnect()):typeof e=="number"?Wd(n,t,e).disconnect():kp(e)?s===void 0?t.forEach(a=>a.disconnect(e)):r===void 0?Wd(n,t,s).disconnect(e,0):Wd(n,t,s).disconnect(e,0,r):s===void 0?t.forEach(a=>a.disconnect(e)):Wd(n,t,s).disconnect(e,0),jM={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},qM=(n,t,e,s,r,a,u,h)=>class extends n{constructor(m,_){const g=a(m),b={...jM,..._},x=s(g,b),S=u(g),A=S?e():null;super(m,!1,x,A),this._attack=t(this,S,x.attack),this._knee=t(this,S,x.knee),this._nativeDynamicsCompressorNode=x,this._ratio=t(this,S,x.ratio),this._release=t(this,S,x.release),this._threshold=t(this,S,x.threshold),h(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(m){const _=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=m,m>2)throw this._nativeDynamicsCompressorNode.channelCount=_,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(m){const _=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=m,m==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=_,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},GM=(n,t,e,s,r)=>()=>{const a=new WeakMap,u=async(h,p)=>{let m=e(h);const _=mi(m,p);if(!_){const g={attack:m.attack.value,channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,knee:m.knee.value,ratio:m.ratio.value,release:m.release.value,threshold:m.threshold.value};m=t(p,g)}return a.set(p,m),_?(await n(p,h.attack,m.attack),await n(p,h.knee,m.knee),await n(p,h.ratio,m.ratio),await n(p,h.release,m.release),await n(p,h.threshold,m.threshold)):(await s(p,h.attack,m.attack),await s(p,h.knee,m.knee),await s(p,h.ratio,m.ratio),await s(p,h.release,m.release),await s(p,h.threshold,m.threshold)),await r(h,p,m),m};return{render(h,p){const m=a.get(p);return m!==void 0?Promise.resolve(m):u(h,p)}}},ZM=()=>new DOMException("","EncodingError"),WM=n=>t=>new Promise((e,s)=>{if(n===null){s(new SyntaxError);return}const r=n.document.head;if(r===null)s(new SyntaxError);else{const a=n.document.createElement("script"),u=new Blob([t],{type:"application/javascript"}),h=URL.createObjectURL(u),p=n.onerror,m=()=>{n.onerror=p,URL.revokeObjectURL(h)};n.onerror=(_,g,b,x,S)=>{if(g===h||g===n.location.href&&b===1&&x===1)return m(),s(S),!1;if(p!==null)return p(_,g,b,x,S)},a.onerror=()=>{m(),s(new SyntaxError)},a.onload=()=>{m(),e()},a.src=h,a.type="module",r.appendChild(a)}}),FM=n=>class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(e,s,r){if(s!==null){let a=this._listeners.get(s);a===void 0&&(a=n(this,s),typeof s=="function"&&this._listeners.set(s,a)),this._nativeEventTarget.addEventListener(e,a,r)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,s,r){const a=s===null?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(e,a===void 0?null:a,r)}},YM=n=>(t,e,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(t*e)}},currentTime:{configurable:!0,get(){return t}}});try{return s()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}},XM=n=>async t=>{try{const e=await fetch(t);if(e.ok)return[await e.text(),e.url]}catch{}throw n()},QM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},$M=(n,t,e,s,r,a)=>class extends n{constructor(h,p){const m=r(h),_={...QM,...p},g=s(m,_),b=a(m),x=b?e():null;super(h,!1,g,x),this._gain=t(this,b,g.gain,wi,Vi)}get gain(){return this._gain}},KM=(n,t,e,s,r)=>()=>{const a=new WeakMap,u=async(h,p)=>{let m=e(h);const _=mi(m,p);if(!_){const g={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:m.gain.value};m=t(p,g)}return a.set(p,m),_?await n(p,h.gain,m.gain):await s(p,h.gain,m.gain),await r(h,p,m),m};return{render(h,p){const m=a.get(p);return m!==void 0?Promise.resolve(m):u(h,p)}}},JM=(n,t)=>e=>t(n,e),tk=n=>t=>{const e=n(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return e.renderer},ek=n=>t=>{var e;return(e=n.get(t))!==null&&e!==void 0?e:0},nk=n=>t=>{const e=n(t);if(e.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return e.renderer},ik=n=>t=>n.get(t),Jn=()=>new DOMException("","InvalidStateError"),sk=n=>t=>{const e=n.get(t);if(e===void 0)throw Jn();return e},rk=(n,t)=>e=>{let s=n.get(e);if(s!==void 0)return s;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new t(1,1,44100),n.set(e,s),s},ok=n=>t=>{const e=n.get(t);if(e===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return e},em=()=>new DOMException("","InvalidAccessError"),ak=n=>{n.getFrequencyResponse=(t=>(e,s,r)=>{if(e.length!==s.length||s.length!==r.length)throw em();return t.call(n,e,s,r)})(n.getFrequencyResponse)},lk={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},ck=(n,t,e,s,r,a)=>class extends n{constructor(h,p){const m=s(h),_=r(m),g={...lk,...p},b=t(m,_?null:h.baseLatency,g),x=_?e(g.feedback,g.feedforward):null;super(h,!1,b,x),ak(b),this._nativeIIRFilterNode=b,a(this,1)}getFrequencyResponse(h,p,m){return this._nativeIIRFilterNode.getFrequencyResponse(h,p,m)}},nT=(n,t,e,s,r,a,u,h,p,m,_)=>{const g=m.length;let b=h;for(let x=0;x<g;x+=1){let S=e[0]*m[x];for(let A=1;A<r;A+=1){const E=b-A&p-1;S+=e[A]*a[E],S-=n[A]*u[E]}for(let A=r;A<s;A+=1)S+=e[A]*a[b-A&p-1];for(let A=r;A<t;A+=1)S-=n[A]*u[b-A&p-1];a[b]=m[x],u[b]=S,b=b+1&p-1,_[x]=S}return b},uk=(n,t,e,s)=>{const r=e instanceof Float64Array?e:new Float64Array(e),a=s instanceof Float64Array?s:new Float64Array(s),u=r.length,h=a.length,p=Math.min(u,h);if(r[0]!==1){for(let S=0;S<u;S+=1)a[S]/=r[0];for(let S=1;S<h;S+=1)r[S]/=r[0]}const m=32,_=new Float32Array(m),g=new Float32Array(m),b=t.createBuffer(n.numberOfChannels,n.length,n.sampleRate),x=n.numberOfChannels;for(let S=0;S<x;S+=1){const A=n.getChannelData(S),E=b.getChannelData(S);_.fill(0),g.fill(0),nT(r,u,a,h,p,_,g,0,m,A,E)}return b},hk=(n,t,e,s,r)=>(a,u)=>{const h=new WeakMap;let p=null;const m=async(_,g)=>{let b=null,x=t(_);const S=mi(x,g);if(g.createIIRFilter===void 0?b=n(g,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):S||(x=g.createIIRFilter(u,a)),h.set(g,b===null?x:b),b!==null){if(p===null){if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");const E=new e(_.context.destination.channelCount,_.context.length,g.sampleRate);p=(async()=>{await s(_,E,E.destination);const R=await r(E);return uk(R,g,a,u)})()}const A=await p;return b.buffer=A,b.start(0),b}return await s(_,g,x),x};return{render(_,g){const b=h.get(g);return b!==void 0?Promise.resolve(b):m(_,g)}}},fk=(n,t,e,s,r,a)=>u=>(h,p)=>{const m=n.get(h);if(m===void 0){if(!u&&a(h)){const _=s(h),{outputs:g}=e(h);for(const b of g)if(af(b)){const x=s(b[0]);t(_,x,b[1],b[2])}else{const x=r(b[0]);_.disconnect(x,b[1])}}n.set(h,p)}else n.set(h,m+p)},dk=(n,t)=>e=>{const s=n.get(e);return t(s)||t(e)},pk=(n,t)=>e=>n.has(e)||t(e),mk=(n,t)=>e=>n.has(e)||t(e),_k=(n,t)=>e=>{const s=n.get(e);return t(s)||t(e)},gk=n=>t=>n!==null&&t instanceof n,yk=n=>t=>n!==null&&typeof n.AudioNode=="function"&&t instanceof n.AudioNode,vk=n=>t=>n!==null&&typeof n.AudioParam=="function"&&t instanceof n.AudioParam,bk=(n,t)=>e=>n(e)||t(e),wk=n=>t=>n!==null&&t instanceof n,xk=n=>n!==null&&n.isSecureContext,Sk=(n,t,e,s)=>class extends n{constructor(a,u){const h=e(a),p=t(h,u);if(s(h))throw TypeError();super(a,!0,p,null),this._nativeMediaElementAudioSourceNode=p}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},Tk={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Ak=(n,t,e,s)=>class extends n{constructor(a,u){const h=e(a);if(s(h))throw new TypeError;const p={...Tk,...u},m=t(h,p);super(a,!1,m,null),this._nativeMediaStreamAudioDestinationNode=m}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},Ek=(n,t,e,s)=>class extends n{constructor(a,u){const h=e(a),p=t(h,u);if(s(h))throw new TypeError;super(a,!0,p,null),this._nativeMediaStreamAudioSourceNode=p}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},Ck=(n,t,e)=>class extends n{constructor(r,a){const u=e(r),h=t(u,a);super(r,!0,h,null)}},Lk=(n,t,e,s,r,a)=>class extends e{constructor(h,p){super(h),this._nativeContext=h,Jp.set(this,h),s(h)&&r.set(h,new Set),this._destination=new n(this,p),this._listener=t(this,h),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(h){const p=typeof h=="function"?a(this,h):null;this._nativeContext.onstatechange=p;const m=this._nativeContext.onstatechange;this._onstatechange=m!==null&&m===p?h:m}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Vh=n=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const e=n.decodeAudioData(t.buffer,()=>{});return e===void 0?!1:(e.catch(()=>{}),!0)}catch{}return!1},Mk=(n,t)=>(e,s,r)=>{const a=new Set;return e.connect=(u=>(h,p=0,m=0)=>{const _=a.size===0;if(t(h))return u.call(e,h,p,m),n(a,[h,p,m],g=>g[0]===h&&g[1]===p&&g[2]===m,!0),_&&s(),h;u.call(e,h,p),n(a,[h,p],g=>g[0]===h&&g[1]===p,!0),_&&s()})(e.connect),e.disconnect=(u=>(h,p,m)=>{const _=a.size>0;if(h===void 0)u.apply(e),a.clear();else if(typeof h=="number"){u.call(e,h);for(const b of a)b[1]===h&&a.delete(b)}else{t(h)?u.call(e,h,p,m):u.call(e,h,p);for(const b of a)b[0]===h&&(p===void 0||b[1]===p)&&(m===void 0||b[2]===m)&&a.delete(b)}const g=a.size===0;_&&g&&r()})(e.disconnect),e},cn=(n,t,e)=>{const s=t[e];s!==void 0&&s!==n[e]&&(n[e]=s)},Wn=(n,t)=>{cn(n,t,"channelCount"),cn(n,t,"channelCountMode"),cn(n,t,"channelInterpretation")},nS=n=>typeof n.getFloatTimeDomainData=="function",kk=n=>{n.getFloatTimeDomainData=t=>{const e=new Uint8Array(t.length);n.getByteTimeDomainData(e);const s=Math.max(e.length,n.fftSize);for(let r=0;r<s;r+=1)t[r]=(e[r]-128)*.0078125;return t}},Ok=(n,t)=>(e,s)=>{const r=e.createAnalyser();if(Wn(r,s),!(s.maxDecibels>s.minDecibels))throw t();return cn(r,s,"fftSize"),cn(r,s,"maxDecibels"),cn(r,s,"minDecibels"),cn(r,s,"smoothingTimeConstant"),n(nS,()=>nS(r))||kk(r),r},Dk=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null,wn=(n,t,e)=>{const s=t[e];s!==void 0&&s!==n[e].value&&(n[e].value=s)},Rk=n=>{n.start=(t=>{let e=!1;return(s=0,r=0,a)=>{if(e)throw Jn();t.call(n,s,r,a),e=!0}})(n.start)},Iy=n=>{n.start=(t=>(e=0,s=0,r)=>{if(typeof r=="number"&&r<0||s<0||e<0)throw new RangeError("The parameters can't be negative.");t.call(n,e,s,r)})(n.start)},Ny=n=>{n.stop=(t=>(e=0)=>{if(e<0)throw new RangeError("The parameter can't be negative.");t.call(n,e)})(n.stop)},Ik=(n,t,e,s,r,a,u,h,p,m,_)=>(g,b)=>{const x=g.createBufferSource();return Wn(x,b),wn(x,b,"playbackRate"),cn(x,b,"buffer"),cn(x,b,"loop"),cn(x,b,"loopEnd"),cn(x,b,"loopStart"),t(e,()=>e(g))||Rk(x),t(s,()=>s(g))||p(x),t(r,()=>r(g))||m(x,g),t(a,()=>a(g))||Iy(x),t(u,()=>u(g))||_(x,g),t(h,()=>h(g))||Ny(x),n(g,x),x},Nk=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null,Pk=(n,t)=>(e,s,r)=>{const a=e.destination;if(a.channelCount!==s)try{a.channelCount=s}catch{}r&&a.channelCountMode!=="explicit"&&(a.channelCountMode="explicit"),a.maxChannelCount===0&&Object.defineProperty(a,"maxChannelCount",{value:s});const u=n(e,{channelCount:s,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,gain:1});return t(u,"channelCount",h=>()=>h.call(u),h=>p=>{h.call(u,p);try{a.channelCount=p}catch(m){if(p>a.maxChannelCount)throw m}}),t(u,"channelCountMode",h=>()=>h.call(u),h=>p=>{h.call(u,p),a.channelCountMode=p}),t(u,"channelInterpretation",h=>()=>h.call(u),h=>p=>{h.call(u,p),a.channelInterpretation=p}),Object.defineProperty(u,"maxChannelCount",{get:()=>a.maxChannelCount}),u.connect(a),u},zk=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null,Uk=n=>{const{port1:t}=new MessageChannel;try{t.postMessage(n)}finally{t.close()}},Bk=(n,t,e,s,r)=>(a,u,h,p,m,_)=>{if(h!==null)try{const g=new h(a,p,_),b=new Map;let x=null;if(Object.defineProperties(g,{channelCount:{get:()=>_.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>x,set:S=>{typeof x=="function"&&g.removeEventListener("processorerror",x),x=typeof S=="function"?S:null,typeof x=="function"&&g.addEventListener("processorerror",x)}}}),g.addEventListener=(S=>(...A)=>{if(A[0]==="processorerror"){const E=typeof A[1]=="function"?A[1]:typeof A[1]=="object"&&A[1]!==null&&typeof A[1].handleEvent=="function"?A[1].handleEvent:null;if(E!==null){const R=b.get(A[1]);R!==void 0?A[1]=R:(A[1]=z=>{z.type==="error"?(Object.defineProperties(z,{type:{value:"processorerror"}}),E(z)):E(new ErrorEvent(A[0],{...z}))},b.set(E,A[1]))}}return S.call(g,"error",A[1],A[2]),S.call(g,...A)})(g.addEventListener),g.removeEventListener=(S=>(...A)=>{if(A[0]==="processorerror"){const E=b.get(A[1]);E!==void 0&&(b.delete(A[1]),A[1]=E)}return S.call(g,"error",A[1],A[2]),S.call(g,A[0],A[1],A[2])})(g.removeEventListener),_.numberOfOutputs!==0){const S=e(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return g.connect(S).connect(a.destination),r(g,()=>S.disconnect(),()=>S.connect(a.destination))}return g}catch(g){throw g.code===11?s():g}if(m===void 0)throw s();return Uk(_),t(a,u,m,_)},iT=(n,t)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*t))))),Hk=n=>new Promise((t,e)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:a})=>{s.close(),r.close(),t(a)},s.onmessageerror=({data:a})=>{s.close(),r.close(),e(a)},r.postMessage(n)}),Vk=async(n,t)=>{const e=await Hk(t);return new n(e)},jk=(n,t,e,s)=>{let r=X0.get(n);r===void 0&&(r=new WeakMap,X0.set(n,r));const a=Vk(e,s);return r.set(t,a),a},qk=(n,t,e,s,r,a,u,h,p,m,_,g,b)=>(x,S,A,E)=>{if(E.numberOfInputs===0&&E.numberOfOutputs===0)throw p();const R=Array.isArray(E.outputChannelCount)?E.outputChannelCount:Array.from(E.outputChannelCount);if(R.some(Nt=>Nt<1))throw p();if(R.length!==E.numberOfOutputs)throw t();if(E.channelCountMode!=="explicit")throw p();const z=E.channelCount*E.numberOfInputs,O=R.reduce((Nt,Xt)=>Nt+Xt,0),Q=A.parameterDescriptors===void 0?0:A.parameterDescriptors.length;if(z+Q>6||O>6)throw p();const N=new MessageChannel,j=[],Y=[];for(let Nt=0;Nt<E.numberOfInputs;Nt+=1)j.push(u(x,{channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,gain:1})),Y.push(r(x,{channelCount:E.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:E.channelCount}));const G=[];if(A.parameterDescriptors!==void 0)for(const{defaultValue:Nt,maxValue:Xt,minValue:Ve,name:Ee}of A.parameterDescriptors){const ue=a(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:E.parameterData[Ee]!==void 0?E.parameterData[Ee]:Nt===void 0?0:Nt});Object.defineProperties(ue.offset,{defaultValue:{get:()=>Nt===void 0?0:Nt},maxValue:{get:()=>Xt===void 0?wi:Xt},minValue:{get:()=>Ve===void 0?Vi:Ve}}),G.push(ue)}const Z=s(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,z+Q)}),F=iT(S,x.sampleRate),$=h(x,F,z+Q,Math.max(1,O)),et=r(x,{channelCount:Math.max(1,O),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,O)}),k=[];for(let Nt=0;Nt<E.numberOfOutputs;Nt+=1)k.push(s(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:R[Nt]}));for(let Nt=0;Nt<E.numberOfInputs;Nt+=1){j[Nt].connect(Y[Nt]);for(let Xt=0;Xt<E.channelCount;Xt+=1)Y[Nt].connect(Z,Xt,Nt*E.channelCount+Xt)}const X=new tT(A.parameterDescriptors===void 0?[]:A.parameterDescriptors.map(({name:Nt},Xt)=>{const Ve=G[Xt];return Ve.connect(Z,0,z+Xt),Ve.start(0),[Nt,Ve.offset]}));Z.connect($);let W=E.channelInterpretation,P=null;const U=E.numberOfOutputs===0?[$]:k,K={get bufferSize(){return F},get channelCount(){return E.channelCount},set channelCount(Nt){throw e()},get channelCountMode(){return E.channelCountMode},set channelCountMode(Nt){throw e()},get channelInterpretation(){return W},set channelInterpretation(Nt){for(const Xt of j)Xt.channelInterpretation=Nt;W=Nt},get context(){return $.context},get inputs(){return j},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get onprocessorerror(){return P},set onprocessorerror(Nt){typeof P=="function"&&K.removeEventListener("processorerror",P),P=typeof Nt=="function"?Nt:null,typeof P=="function"&&K.addEventListener("processorerror",P)},get parameters(){return X},get port(){return N.port2},addEventListener(...Nt){return $.addEventListener(Nt[0],Nt[1],Nt[2])},connect:n.bind(null,U),disconnect:m.bind(null,U),dispatchEvent(...Nt){return $.dispatchEvent(Nt[0])},removeEventListener(...Nt){return $.removeEventListener(Nt[0],Nt[1],Nt[2])}},D=new Map;N.port1.addEventListener=(Nt=>(...Xt)=>{if(Xt[0]==="message"){const Ve=typeof Xt[1]=="function"?Xt[1]:typeof Xt[1]=="object"&&Xt[1]!==null&&typeof Xt[1].handleEvent=="function"?Xt[1].handleEvent:null;if(Ve!==null){const Ee=D.get(Xt[1]);Ee!==void 0?Xt[1]=Ee:(Xt[1]=ue=>{_(x.currentTime,x.sampleRate,()=>Ve(ue))},D.set(Ve,Xt[1]))}}return Nt.call(N.port1,Xt[0],Xt[1],Xt[2])})(N.port1.addEventListener),N.port1.removeEventListener=(Nt=>(...Xt)=>{if(Xt[0]==="message"){const Ve=D.get(Xt[1]);Ve!==void 0&&(D.delete(Xt[1]),Xt[1]=Ve)}return Nt.call(N.port1,Xt[0],Xt[1],Xt[2])})(N.port1.removeEventListener);let V=null;Object.defineProperty(N.port1,"onmessage",{get:()=>V,set:Nt=>{typeof V=="function"&&N.port1.removeEventListener("message",V),V=typeof Nt=="function"?Nt:null,typeof V=="function"&&(N.port1.addEventListener("message",V),N.port1.start())}}),A.prototype.port=N.port1;let I=null;jk(x,K,A,E).then(Nt=>I=Nt);const at=Dp(E.numberOfInputs,E.channelCount),mt=Dp(E.numberOfOutputs,R),vt=A.parameterDescriptors===void 0?[]:A.parameterDescriptors.reduce((Nt,{name:Xt})=>({...Nt,[Xt]:new Float32Array(128)}),{});let gt=!0;const Dt=()=>{E.numberOfOutputs>0&&$.disconnect(et);for(let Nt=0,Xt=0;Nt<E.numberOfOutputs;Nt+=1){const Ve=k[Nt];for(let Ee=0;Ee<R[Nt];Ee+=1)et.disconnect(Ve,Xt+Ee,Ee);Xt+=R[Nt]}},Mt=new Map;$.onaudioprocess=({inputBuffer:Nt,outputBuffer:Xt})=>{if(I!==null){const Ve=g(K);for(let Ee=0;Ee<F;Ee+=128){for(let ue=0;ue<E.numberOfInputs;ue+=1)for(let ke=0;ke<E.channelCount;ke+=1)Op(Nt,at[ue],ke,ke,Ee);A.parameterDescriptors!==void 0&&A.parameterDescriptors.forEach(({name:ue},ke)=>{Op(Nt,vt,ue,z+ke,Ee)});for(let ue=0;ue<E.numberOfInputs;ue+=1)for(let ke=0;ke<R[ue];ke+=1)mt[ue][ke].byteLength===0&&(mt[ue][ke]=new Float32Array(128));try{const ue=at.map((un,ci)=>{if(Ve[ci].size>0)return Mt.set(ci,F/128),un;const hn=Mt.get(ci);return hn===void 0?[]:(un.every(Va=>Va.every(Gs=>Gs===0))&&(hn===1?Mt.delete(ci):Mt.set(ci,hn-1)),un)});gt=_(x.currentTime+Ee/x.sampleRate,x.sampleRate,()=>I.process(ue,mt,vt));for(let un=0,ci=0;un<E.numberOfOutputs;un+=1){for(let ms=0;ms<R[un];ms+=1)eT(Xt,mt[un],ms,ci+ms,Ee);ci+=R[un]}}catch(ue){gt=!1,K.dispatchEvent(new ErrorEvent("processorerror",{colno:ue.colno,filename:ue.filename,lineno:ue.lineno,message:ue.message}))}if(!gt){for(let ue=0;ue<E.numberOfInputs;ue+=1){j[ue].disconnect(Y[ue]);for(let ke=0;ke<E.channelCount;ke+=1)Y[Ee].disconnect(Z,ke,ue*E.channelCount+ke)}if(A.parameterDescriptors!==void 0){const ue=A.parameterDescriptors.length;for(let ke=0;ke<ue;ke+=1){const un=G[ke];un.disconnect(Z,0,z+ke),un.stop()}}Z.disconnect($),$.onaudioprocess=null,oe?Dt():tn();break}}}};let oe=!1;const Me=u(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ke=()=>$.connect(Me).connect(x.destination),tn=()=>{$.disconnect(Me),Me.disconnect()},Fn=()=>{if(gt){tn(),E.numberOfOutputs>0&&$.connect(et);for(let Nt=0,Xt=0;Nt<E.numberOfOutputs;Nt+=1){const Ve=k[Nt];for(let Ee=0;Ee<R[Nt];Ee+=1)et.connect(Ve,Xt+Ee,Ee);Xt+=R[Nt]}}oe=!0},Ai=()=>{gt&&(Ke(),Dt()),oe=!1};return Ke(),b(K,Fn,Ai)},sT=(n,t)=>{const e=n.createBiquadFilter();return Wn(e,t),wn(e,t,"Q"),wn(e,t,"detune"),wn(e,t,"frequency"),wn(e,t,"gain"),cn(e,t,"type"),e},Gk=(n,t)=>(e,s)=>{const r=e.createChannelMerger(s.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&t(e,r),Wn(r,s),r},Zk=n=>{const t=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>t,set:e=>{if(e!==t)throw Jn()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:e=>{if(e!=="explicit")throw Jn()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:e=>{if(e!=="discrete")throw Jn()}})},lf=(n,t)=>{const e=n.createChannelSplitter(t.numberOfOutputs);return Wn(e,t),Zk(e),e},Wk=(n,t,e,s,r)=>(a,u)=>{if(a.createConstantSource===void 0)return e(a,u);const h=a.createConstantSource();return Wn(h,u),wn(h,u,"offset"),t(s,()=>s(a))||Iy(h),t(r,()=>r(a))||Ny(h),n(a,h),h},lu=(n,t)=>(n.connect=t.connect.bind(t),n.disconnect=t.disconnect.bind(t),n),Fk=(n,t,e,s)=>(r,{offset:a,...u})=>{const h=r.createBuffer(1,2,44100),p=t(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),m=e(r,{...u,gain:a}),_=h.getChannelData(0);_[0]=1,_[1]=1,p.buffer=h,p.loop=!0;const g={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(S){m.channelCount=S},get channelCountMode(){return m.channelCountMode},set channelCountMode(S){m.channelCountMode=S},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(S){m.channelInterpretation=S},get context(){return m.context},get inputs(){return[]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get offset(){return m.gain},get onended(){return p.onended},set onended(S){p.onended=S},addEventListener(...S){return p.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return p.dispatchEvent(S[0])},removeEventListener(...S){return p.removeEventListener(S[0],S[1],S[2])},start(S=0){p.start.call(p,S)},stop(S=0){p.stop.call(p,S)}},b=()=>p.connect(m),x=()=>p.disconnect(m);return n(r,p),s(lu(g,m),b,x)},Yk=(n,t)=>(e,s)=>{const r=e.createConvolver();if(Wn(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),cn(r,s,"buffer"),s.channelCount>2||(t(r,"channelCount",a=>()=>a.call(r),a=>u=>{if(u>2)throw n();return a.call(r,u)}),s.channelCountMode==="max"))throw n();return t(r,"channelCountMode",a=>()=>a.call(r),a=>u=>{if(u==="max")throw n();return a.call(r,u)}),r},rT=(n,t)=>{const e=n.createDelay(t.maxDelayTime);return Wn(e,t),wn(e,t,"delayTime"),e},Xk=n=>(t,e)=>{const s=t.createDynamicsCompressor();if(Wn(s,e),e.channelCount>2||e.channelCountMode==="max")throw n();return wn(s,e,"attack"),wn(s,e,"knee"),wn(s,e,"ratio"),wn(s,e,"release"),wn(s,e,"threshold"),s},Fi=(n,t)=>{const e=n.createGain();return Wn(e,t),wn(e,t,"gain"),e},Qk=n=>(t,e,s)=>{if(t.createIIRFilter===void 0)return n(t,e,s);const r=t.createIIRFilter(s.feedforward,s.feedback);return Wn(r,s),r};function $k(n,t){const e=t[0]*t[0]+t[1]*t[1];return[(n[0]*t[0]+n[1]*t[1])/e,(n[1]*t[0]-n[0]*t[1])/e]}function Kk(n,t){return[n[0]*t[0]-n[1]*t[1],n[0]*t[1]+n[1]*t[0]]}function iS(n,t){let e=[0,0];for(let s=n.length-1;s>=0;s-=1)e=Kk(e,t),e[0]+=n[s];return e}const Jk=(n,t,e,s)=>(r,a,{channelCount:u,channelCountMode:h,channelInterpretation:p,feedback:m,feedforward:_})=>{const g=iT(a,r.sampleRate),b=m instanceof Float64Array?m:new Float64Array(m),x=_ instanceof Float64Array?_:new Float64Array(_),S=b.length,A=x.length,E=Math.min(S,A);if(S===0||S>20)throw s();if(b[0]===0)throw t();if(A===0||A>20)throw s();if(x[0]===0)throw t();if(b[0]!==1){for(let G=0;G<A;G+=1)x[G]/=b[0];for(let G=1;G<S;G+=1)b[G]/=b[0]}const R=e(r,g,u,u);R.channelCount=u,R.channelCountMode=h,R.channelInterpretation=p;const z=32,O=[],Q=[],N=[];for(let G=0;G<u;G+=1){O.push(0);const Z=new Float32Array(z),F=new Float32Array(z);Z.fill(0),F.fill(0),Q.push(Z),N.push(F)}R.onaudioprocess=G=>{const Z=G.inputBuffer,F=G.outputBuffer,$=Z.numberOfChannels;for(let et=0;et<$;et+=1){const k=Z.getChannelData(et),X=F.getChannelData(et);O[et]=nT(b,S,x,A,E,Q[et],N[et],O[et],z,k,X)}};const j=r.sampleRate/2;return lu({get bufferSize(){return g},get channelCount(){return R.channelCount},set channelCount(G){R.channelCount=G},get channelCountMode(){return R.channelCountMode},set channelCountMode(G){R.channelCountMode=G},get channelInterpretation(){return R.channelInterpretation},set channelInterpretation(G){R.channelInterpretation=G},get context(){return R.context},get inputs(){return[R]},get numberOfInputs(){return R.numberOfInputs},get numberOfOutputs(){return R.numberOfOutputs},addEventListener(...G){return R.addEventListener(G[0],G[1],G[2])},dispatchEvent(...G){return R.dispatchEvent(G[0])},getFrequencyResponse(G,Z,F){if(G.length!==Z.length||Z.length!==F.length)throw n();const $=G.length;for(let et=0;et<$;et+=1){const k=-Math.PI*(G[et]/j),X=[Math.cos(k),Math.sin(k)],W=iS(x,X),P=iS(b,X),U=$k(W,P);Z[et]=Math.sqrt(U[0]*U[0]+U[1]*U[1]),F[et]=Math.atan2(U[1],U[0])}},removeEventListener(...G){return R.removeEventListener(G[0],G[1],G[2])}},R)},tO=(n,t)=>n.createMediaElementSource(t.mediaElement),eO=(n,t)=>{const e=n.createMediaStreamDestination();return Wn(e,t),e.numberOfOutputs===1&&Object.defineProperty(e,"numberOfOutputs",{get:()=>0}),e},nO=(n,{mediaStream:t})=>{const e=t.getAudioTracks();e.sort((a,u)=>a.id<u.id?-1:a.id>u.id?1:0);const s=e.slice(0,1),r=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:t}),r},iO=(n,t)=>(e,{mediaStreamTrack:s})=>{if(typeof e.createMediaStreamTrackSource=="function")return e.createMediaStreamTrackSource(s);const r=new MediaStream([s]),a=e.createMediaStreamSource(r);if(s.kind!=="audio")throw n();if(t(e))throw new TypeError;return a},sO=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null,rO=(n,t,e,s,r,a)=>(u,h)=>{const p=u.createOscillator();return Wn(p,h),wn(p,h,"detune"),wn(p,h,"frequency"),h.periodicWave!==void 0?p.setPeriodicWave(h.periodicWave):cn(p,h,"type"),t(e,()=>e(u))||Iy(p),t(s,()=>s(u))||a(p,u),t(r,()=>r(u))||Ny(p),n(u,p),p},oO=n=>(t,e)=>{const s=t.createPanner();return s.orientationX===void 0?n(t,e):(Wn(s,e),wn(s,e,"orientationX"),wn(s,e,"orientationY"),wn(s,e,"orientationZ"),wn(s,e,"positionX"),wn(s,e,"positionY"),wn(s,e,"positionZ"),cn(s,e,"coneInnerAngle"),cn(s,e,"coneOuterAngle"),cn(s,e,"coneOuterGain"),cn(s,e,"distanceModel"),cn(s,e,"maxDistance"),cn(s,e,"panningModel"),cn(s,e,"refDistance"),cn(s,e,"rolloffFactor"),s)},aO=(n,t,e,s,r,a,u,h,p,m)=>(_,{coneInnerAngle:g,coneOuterAngle:b,coneOuterGain:x,distanceModel:S,maxDistance:A,orientationX:E,orientationY:R,orientationZ:z,panningModel:O,positionX:Q,positionY:N,positionZ:j,refDistance:Y,rolloffFactor:G,...Z})=>{const F=_.createPanner();if(Z.channelCount>2||Z.channelCountMode==="max")throw u();Wn(F,Z);const $={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},et=e(_,{...$,channelInterpretation:"speakers",numberOfInputs:6}),k=s(_,{...Z,gain:1}),X=s(_,{...$,gain:1}),W=s(_,{...$,gain:0}),P=s(_,{...$,gain:0}),U=s(_,{...$,gain:0}),K=s(_,{...$,gain:0}),D=s(_,{...$,gain:0}),V=r(_,256,6,1),I=a(_,{...$,curve:new Float32Array([1,1]),oversample:"none"});let q=[E,R,z],at=[Q,N,j];const mt=new Float32Array(1);V.onaudioprocess=({inputBuffer:Mt})=>{const oe=[p(Mt,mt,0),p(Mt,mt,1),p(Mt,mt,2)];oe.some((Ke,tn)=>Ke!==q[tn])&&(F.setOrientation(...oe),q=oe);const Me=[p(Mt,mt,3),p(Mt,mt,4),p(Mt,mt,5)];Me.some((Ke,tn)=>Ke!==at[tn])&&(F.setPosition(...Me),at=Me)},Object.defineProperty(W.gain,"defaultValue",{get:()=>0}),Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(U.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"defaultValue",{get:()=>0}),Object.defineProperty(D.gain,"defaultValue",{get:()=>0});const vt={get bufferSize(){},get channelCount(){return F.channelCount},set channelCount(Mt){if(Mt>2)throw u();k.channelCount=Mt,F.channelCount=Mt},get channelCountMode(){return F.channelCountMode},set channelCountMode(Mt){if(Mt==="max")throw u();k.channelCountMode=Mt,F.channelCountMode=Mt},get channelInterpretation(){return F.channelInterpretation},set channelInterpretation(Mt){k.channelInterpretation=Mt,F.channelInterpretation=Mt},get coneInnerAngle(){return F.coneInnerAngle},set coneInnerAngle(Mt){F.coneInnerAngle=Mt},get coneOuterAngle(){return F.coneOuterAngle},set coneOuterAngle(Mt){F.coneOuterAngle=Mt},get coneOuterGain(){return F.coneOuterGain},set coneOuterGain(Mt){if(Mt<0||Mt>1)throw t();F.coneOuterGain=Mt},get context(){return F.context},get distanceModel(){return F.distanceModel},set distanceModel(Mt){F.distanceModel=Mt},get inputs(){return[k]},get maxDistance(){return F.maxDistance},set maxDistance(Mt){if(Mt<0)throw new RangeError;F.maxDistance=Mt},get numberOfInputs(){return F.numberOfInputs},get numberOfOutputs(){return F.numberOfOutputs},get orientationX(){return X.gain},get orientationY(){return W.gain},get orientationZ(){return P.gain},get panningModel(){return F.panningModel},set panningModel(Mt){F.panningModel=Mt},get positionX(){return U.gain},get positionY(){return K.gain},get positionZ(){return D.gain},get refDistance(){return F.refDistance},set refDistance(Mt){if(Mt<0)throw new RangeError;F.refDistance=Mt},get rolloffFactor(){return F.rolloffFactor},set rolloffFactor(Mt){if(Mt<0)throw new RangeError;F.rolloffFactor=Mt},addEventListener(...Mt){return k.addEventListener(Mt[0],Mt[1],Mt[2])},dispatchEvent(...Mt){return k.dispatchEvent(Mt[0])},removeEventListener(...Mt){return k.removeEventListener(Mt[0],Mt[1],Mt[2])}};g!==vt.coneInnerAngle&&(vt.coneInnerAngle=g),b!==vt.coneOuterAngle&&(vt.coneOuterAngle=b),x!==vt.coneOuterGain&&(vt.coneOuterGain=x),S!==vt.distanceModel&&(vt.distanceModel=S),A!==vt.maxDistance&&(vt.maxDistance=A),E!==vt.orientationX.value&&(vt.orientationX.value=E),R!==vt.orientationY.value&&(vt.orientationY.value=R),z!==vt.orientationZ.value&&(vt.orientationZ.value=z),O!==vt.panningModel&&(vt.panningModel=O),Q!==vt.positionX.value&&(vt.positionX.value=Q),N!==vt.positionY.value&&(vt.positionY.value=N),j!==vt.positionZ.value&&(vt.positionZ.value=j),Y!==vt.refDistance&&(vt.refDistance=Y),G!==vt.rolloffFactor&&(vt.rolloffFactor=G),(q[0]!==1||q[1]!==0||q[2]!==0)&&F.setOrientation(...q),(at[0]!==0||at[1]!==0||at[2]!==0)&&F.setPosition(...at);const gt=()=>{k.connect(F),n(k,I,0,0),I.connect(X).connect(et,0,0),I.connect(W).connect(et,0,1),I.connect(P).connect(et,0,2),I.connect(U).connect(et,0,3),I.connect(K).connect(et,0,4),I.connect(D).connect(et,0,5),et.connect(V).connect(_.destination)},Dt=()=>{k.disconnect(F),h(k,I,0,0),I.disconnect(X),X.disconnect(et),I.disconnect(W),W.disconnect(et),I.disconnect(P),P.disconnect(et),I.disconnect(U),U.disconnect(et),I.disconnect(K),K.disconnect(et),I.disconnect(D),D.disconnect(et),et.disconnect(V),V.disconnect(_.destination)};return m(lu(vt,F),gt,Dt)},lO=n=>(t,{disableNormalization:e,imag:s,real:r})=>{const a=s instanceof Float32Array?s:new Float32Array(s),u=r instanceof Float32Array?r:new Float32Array(r),h=t.createPeriodicWave(u,a,{disableNormalization:e});if(Array.from(s).length<2)throw n();return h},cf=(n,t,e,s)=>n.createScriptProcessor(t,e,s),cO=(n,t)=>(e,s)=>{const r=s.channelCountMode;if(r==="clamped-max")throw t();if(e.createStereoPanner===void 0)return n(e,s);const a=e.createStereoPanner();return Wn(a,s),wn(a,s,"pan"),Object.defineProperty(a,"channelCountMode",{get:()=>r,set:u=>{if(u!==r)throw t()}}),a},uO=(n,t,e,s,r,a)=>{const h=new Float32Array([1,1]),p=Math.PI/2,m={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},_={...m,oversample:"none"},g=(S,A,E,R)=>{const z=new Float32Array(16385),O=new Float32Array(16385);for(let Z=0;Z<16385;Z+=1){const F=Z/16384*p;z[Z]=Math.cos(F),O[Z]=Math.sin(F)}const Q=e(S,{...m,gain:0}),N=s(S,{..._,curve:z}),j=s(S,{..._,curve:h}),Y=e(S,{...m,gain:0}),G=s(S,{..._,curve:O});return{connectGraph(){A.connect(Q),A.connect(j.inputs===void 0?j:j.inputs[0]),A.connect(Y),j.connect(E),E.connect(N.inputs===void 0?N:N.inputs[0]),E.connect(G.inputs===void 0?G:G.inputs[0]),N.connect(Q.gain),G.connect(Y.gain),Q.connect(R,0,0),Y.connect(R,0,1)},disconnectGraph(){A.disconnect(Q),A.disconnect(j.inputs===void 0?j:j.inputs[0]),A.disconnect(Y),j.disconnect(E),E.disconnect(N.inputs===void 0?N:N.inputs[0]),E.disconnect(G.inputs===void 0?G:G.inputs[0]),N.disconnect(Q.gain),G.disconnect(Y.gain),Q.disconnect(R,0,0),Y.disconnect(R,0,1)}}},b=(S,A,E,R)=>{const z=new Float32Array(16385),O=new Float32Array(16385),Q=new Float32Array(16385),N=new Float32Array(16385),j=Math.floor(16385/2);for(let U=0;U<16385;U+=1)if(U>j){const K=(U-j)/(16384-j)*p;z[U]=Math.cos(K),O[U]=Math.sin(K),Q[U]=0,N[U]=1}else{const K=U/(16384-j)*p;z[U]=1,O[U]=0,Q[U]=Math.cos(K),N[U]=Math.sin(K)}const Y=t(S,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),G=e(S,{...m,gain:0}),Z=s(S,{..._,curve:z}),F=e(S,{...m,gain:0}),$=s(S,{..._,curve:O}),et=s(S,{..._,curve:h}),k=e(S,{...m,gain:0}),X=s(S,{..._,curve:Q}),W=e(S,{...m,gain:0}),P=s(S,{..._,curve:N});return{connectGraph(){A.connect(Y),A.connect(et.inputs===void 0?et:et.inputs[0]),Y.connect(G,0),Y.connect(F,0),Y.connect(k,1),Y.connect(W,1),et.connect(E),E.connect(Z.inputs===void 0?Z:Z.inputs[0]),E.connect($.inputs===void 0?$:$.inputs[0]),E.connect(X.inputs===void 0?X:X.inputs[0]),E.connect(P.inputs===void 0?P:P.inputs[0]),Z.connect(G.gain),$.connect(F.gain),X.connect(k.gain),P.connect(W.gain),G.connect(R,0,0),k.connect(R,0,0),F.connect(R,0,1),W.connect(R,0,1)},disconnectGraph(){A.disconnect(Y),A.disconnect(et.inputs===void 0?et:et.inputs[0]),Y.disconnect(G,0),Y.disconnect(F,0),Y.disconnect(k,1),Y.disconnect(W,1),et.disconnect(E),E.disconnect(Z.inputs===void 0?Z:Z.inputs[0]),E.disconnect($.inputs===void 0?$:$.inputs[0]),E.disconnect(X.inputs===void 0?X:X.inputs[0]),E.disconnect(P.inputs===void 0?P:P.inputs[0]),Z.disconnect(G.gain),$.disconnect(F.gain),X.disconnect(k.gain),P.disconnect(W.gain),G.disconnect(R,0,0),k.disconnect(R,0,0),F.disconnect(R,0,1),W.disconnect(R,0,1)}}},x=(S,A,E,R,z)=>{if(A===1)return g(S,E,R,z);if(A===2)return b(S,E,R,z);throw r()};return(S,{channelCount:A,channelCountMode:E,pan:R,...z})=>{if(E==="max")throw r();const O=n(S,{...z,channelCount:1,channelCountMode:E,numberOfInputs:2}),Q=e(S,{...z,channelCount:A,channelCountMode:E,gain:1}),N=e(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:R});let{connectGraph:j,disconnectGraph:Y}=x(S,A,Q,N,O);Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"maxValue",{get:()=>1}),Object.defineProperty(N.gain,"minValue",{get:()=>-1});const G={get bufferSize(){},get channelCount(){return Q.channelCount},set channelCount(et){Q.channelCount!==et&&(Z&&Y(),{connectGraph:j,disconnectGraph:Y}=x(S,et,Q,N,O),Z&&j()),Q.channelCount=et},get channelCountMode(){return Q.channelCountMode},set channelCountMode(et){if(et==="clamped-max"||et==="max")throw r();Q.channelCountMode=et},get channelInterpretation(){return Q.channelInterpretation},set channelInterpretation(et){Q.channelInterpretation=et},get context(){return Q.context},get inputs(){return[Q]},get numberOfInputs(){return Q.numberOfInputs},get numberOfOutputs(){return Q.numberOfOutputs},get pan(){return N.gain},addEventListener(...et){return Q.addEventListener(et[0],et[1],et[2])},dispatchEvent(...et){return Q.dispatchEvent(et[0])},removeEventListener(...et){return Q.removeEventListener(et[0],et[1],et[2])}};let Z=!1;const F=()=>{j(),Z=!0},$=()=>{Y(),Z=!1};return a(lu(G,O),F,$)}},hO=(n,t,e,s,r,a,u)=>(h,p)=>{const m=h.createWaveShaper();if(a!==null&&a.name==="webkitAudioContext"&&h.createGain().gain.automationRate===void 0)return e(h,p);Wn(m,p);const _=p.curve===null||p.curve instanceof Float32Array?p.curve:new Float32Array(p.curve);if(_!==null&&_.length<2)throw t();cn(m,{curve:_},"curve"),cn(m,p,"oversample");let g=null,b=!1;return u(m,"curve",A=>()=>A.call(m),A=>E=>(A.call(m,E),b&&(s(E)&&g===null?g=n(h,m):!s(E)&&g!==null&&(g(),g=null)),E)),r(m,()=>{b=!0,s(m.curve)&&(g=n(h,m))},()=>{b=!1,g!==null&&(g(),g=null)})},fO=(n,t,e,s,r)=>(a,{curve:u,oversample:h,...p})=>{const m=a.createWaveShaper(),_=a.createWaveShaper();Wn(m,p),Wn(_,p);const g=e(a,{...p,gain:1}),b=e(a,{...p,gain:-1}),x=e(a,{...p,gain:1}),S=e(a,{...p,gain:-1});let A=null,E=!1,R=null;const z={get bufferSize(){},get channelCount(){return m.channelCount},set channelCount(N){g.channelCount=N,b.channelCount=N,m.channelCount=N,x.channelCount=N,_.channelCount=N,S.channelCount=N},get channelCountMode(){return m.channelCountMode},set channelCountMode(N){g.channelCountMode=N,b.channelCountMode=N,m.channelCountMode=N,x.channelCountMode=N,_.channelCountMode=N,S.channelCountMode=N},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(N){g.channelInterpretation=N,b.channelInterpretation=N,m.channelInterpretation=N,x.channelInterpretation=N,_.channelInterpretation=N,S.channelInterpretation=N},get context(){return m.context},get curve(){return R},set curve(N){if(N!==null&&N.length<2)throw t();if(N===null)m.curve=N,_.curve=N;else{const j=N.length,Y=new Float32Array(j+2-j%2),G=new Float32Array(j+2-j%2);Y[0]=N[0],G[0]=-N[j-1];const Z=Math.ceil((j+1)/2),F=(j+1)/2-1;for(let $=1;$<Z;$+=1){const et=$/Z*F,k=Math.floor(et),X=Math.ceil(et);Y[$]=k===X?N[k]:(1-(et-k))*N[k]+(1-(X-et))*N[X],G[$]=k===X?-N[j-1-k]:-((1-(et-k))*N[j-1-k])-(1-(X-et))*N[j-1-X]}Y[Z]=j%2===1?N[Z-1]:(N[Z-2]+N[Z-1])/2,m.curve=Y,_.curve=G}R=N,E&&(s(R)&&A===null?A=n(a,g):A!==null&&(A(),A=null))},get inputs(){return[g]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},get oversample(){return m.oversample},set oversample(N){m.oversample=N,_.oversample=N},addEventListener(...N){return g.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return g.dispatchEvent(N[0])},removeEventListener(...N){return g.removeEventListener(N[0],N[1],N[2])}};u!==null&&(z.curve=u instanceof Float32Array?u:new Float32Array(u)),h!==z.oversample&&(z.oversample=h);const O=()=>{g.connect(m).connect(x),g.connect(b).connect(_).connect(S).connect(x),E=!0,s(R)&&(A=n(a,g))},Q=()=>{g.disconnect(m),m.disconnect(x),g.disconnect(b),b.disconnect(_),_.disconnect(S),S.disconnect(x),E=!1,A!==null&&(A(),A=null)};return r(lu(z,x),O,Q)},Ti=()=>new DOMException("","NotSupportedError"),dO={numberOfChannels:1},pO=(n,t,e,s,r)=>class extends n{constructor(u,h,p){let m;if(typeof u=="number"&&h!==void 0&&p!==void 0)m={length:h,numberOfChannels:u,sampleRate:p};else if(typeof u=="object")m=u;else throw new Error("The given parameters are not valid.");const{length:_,numberOfChannels:g,sampleRate:b}={...dO,...m},x=s(g,_,b);t(Vh,()=>Vh(x))||x.addEventListener("statechange",(()=>{let S=0;const A=E=>{this._state==="running"&&(S>0?(x.removeEventListener("statechange",A),E.stopImmediatePropagation(),this._waitForThePromiseToSettle(E)):S+=1)};return A})()),super(x,g),this._length=_,this._nativeOfflineAudioContext=x,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Q2(this)}))}_waitForThePromiseToSettle(u){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(u):setTimeout(()=>this._waitForThePromiseToSettle(u))}},mO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},_O=(n,t,e,s,r,a,u)=>class extends n{constructor(p,m){const _=r(p),g={...mO,...m},b=e(_,g),x=a(_),S=x?s():null,A=p.sampleRate/2;super(p,!1,b,S),this._detune=t(this,x,b.detune,153600,-153600),this._frequency=t(this,x,b.frequency,A,-A),this._nativeOscillatorNode=b,this._onended=null,this._oscillatorNodeRenderer=S,this._oscillatorNodeRenderer!==null&&g.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=g.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(p){const m=typeof p=="function"?u(this,p):null;this._nativeOscillatorNode.onended=m;const _=this._nativeOscillatorNode.onended;this._onended=_!==null&&_===m?p:_}get type(){return this._nativeOscillatorNode.type}set type(p){this._nativeOscillatorNode.type=p,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(p){this._nativeOscillatorNode.setPeriodicWave(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=p)}start(p=0){if(this._nativeOscillatorNode.start(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=p),this.context.state!=="closed"){eu(this);const m=()=>{this._nativeOscillatorNode.removeEventListener("ended",m),Oo(this)&&rf(this)};this._nativeOscillatorNode.addEventListener("ended",m)}}stop(p=0){this._nativeOscillatorNode.stop(p),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=p)}},gO=(n,t,e,s,r)=>()=>{const a=new WeakMap;let u=null,h=null,p=null;const m=async(_,g)=>{let b=e(_);const x=mi(b,g);if(!x){const S={channelCount:b.channelCount,channelCountMode:b.channelCountMode,channelInterpretation:b.channelInterpretation,detune:b.detune.value,frequency:b.frequency.value,periodicWave:u===null?void 0:u,type:b.type};b=t(g,S),h!==null&&b.start(h),p!==null&&b.stop(p)}return a.set(g,b),x?(await n(g,_.detune,b.detune),await n(g,_.frequency,b.frequency)):(await s(g,_.detune,b.detune),await s(g,_.frequency,b.frequency)),await r(_,g,b),b};return{set periodicWave(_){u=_},set start(_){h=_},set stop(_){p=_},render(_,g){const b=a.get(g);return b!==void 0?Promise.resolve(b):m(_,g)}}},yO={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},vO=(n,t,e,s,r,a,u)=>class extends n{constructor(p,m){const _=r(p),g={...yO,...m},b=e(_,g),x=a(_),S=x?s():null;super(p,!1,b,S),this._nativePannerNode=b,this._orientationX=t(this,x,b.orientationX,wi,Vi),this._orientationY=t(this,x,b.orientationY,wi,Vi),this._orientationZ=t(this,x,b.orientationZ,wi,Vi),this._positionX=t(this,x,b.positionX,wi,Vi),this._positionY=t(this,x,b.positionY,wi,Vi),this._positionZ=t(this,x,b.positionZ,wi,Vi),u(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(p){this._nativePannerNode.coneInnerAngle=p}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(p){this._nativePannerNode.coneOuterAngle=p}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(p){this._nativePannerNode.coneOuterGain=p}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(p){this._nativePannerNode.distanceModel=p}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(p){this._nativePannerNode.maxDistance=p}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(p){this._nativePannerNode.panningModel=p}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(p){this._nativePannerNode.refDistance=p}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(p){this._nativePannerNode.rolloffFactor=p}},bO=(n,t,e,s,r,a,u,h,p,m)=>()=>{const _=new WeakMap;let g=null;const b=async(x,S)=>{let A=null,E=a(x);const R={channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation},z={...R,coneInnerAngle:E.coneInnerAngle,coneOuterAngle:E.coneOuterAngle,coneOuterGain:E.coneOuterGain,distanceModel:E.distanceModel,maxDistance:E.maxDistance,panningModel:E.panningModel,refDistance:E.refDistance,rolloffFactor:E.rolloffFactor},O=mi(E,S);if("bufferSize"in E)A=s(S,{...R,gain:1});else if(!O){const Q={...z,orientationX:E.orientationX.value,orientationY:E.orientationY.value,orientationZ:E.orientationZ.value,positionX:E.positionX.value,positionY:E.positionY.value,positionZ:E.positionZ.value};E=r(S,Q)}if(_.set(S,A===null?E:A),A!==null){if(g===null){if(u===null)throw new Error("Missing the native OfflineAudioContext constructor.");const $=new u(6,x.context.length,S.sampleRate),et=t($,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});et.connect($.destination),g=(async()=>{const k=await Promise.all([x.orientationX,x.orientationY,x.orientationZ,x.positionX,x.positionY,x.positionZ].map(async(X,W)=>{const P=e($,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:W===0?1:0});return await h($,X,P.offset),P}));for(let X=0;X<6;X+=1)k[X].connect(et,0,X),k[X].start(0);return m($)})()}const Q=await g,N=s(S,{...R,gain:1});await p(x,S,N);const j=[];for(let $=0;$<Q.numberOfChannels;$+=1)j.push(Q.getChannelData($));let Y=[j[0][0],j[1][0],j[2][0]],G=[j[3][0],j[4][0],j[5][0]],Z=s(S,{...R,gain:1}),F=r(S,{...z,orientationX:Y[0],orientationY:Y[1],orientationZ:Y[2],positionX:G[0],positionY:G[1],positionZ:G[2]});N.connect(Z).connect(F.inputs[0]),F.connect(A);for(let $=128;$<Q.length;$+=128){const et=[j[0][$],j[1][$],j[2][$]],k=[j[3][$],j[4][$],j[5][$]];if(et.some((X,W)=>X!==Y[W])||k.some((X,W)=>X!==G[W])){Y=et,G=k;const X=$/S.sampleRate;Z.gain.setValueAtTime(0,X),Z=s(S,{...R,gain:0}),F=r(S,{...z,orientationX:Y[0],orientationY:Y[1],orientationZ:Y[2],positionX:G[0],positionY:G[1],positionZ:G[2]}),Z.gain.setValueAtTime(1,X),N.connect(Z).connect(F.inputs[0]),F.connect(A)}}return A}return O?(await n(S,x.orientationX,E.orientationX),await n(S,x.orientationY,E.orientationY),await n(S,x.orientationZ,E.orientationZ),await n(S,x.positionX,E.positionX),await n(S,x.positionY,E.positionY),await n(S,x.positionZ,E.positionZ)):(await h(S,x.orientationX,E.orientationX),await h(S,x.orientationY,E.orientationY),await h(S,x.orientationZ,E.orientationZ),await h(S,x.positionX,E.positionX),await h(S,x.positionY,E.positionY),await h(S,x.positionZ,E.positionZ)),au(E)?await p(x,S,E.inputs[0]):await p(x,S,E),E};return{render(x,S){const A=_.get(S);return A!==void 0?Promise.resolve(A):b(x,S)}}},wO={disableNormalization:!1},xO=(n,t,e,s)=>class oT{constructor(a,u){const h=t(a),p=s({...wO,...u}),m=n(h,p);return e.add(m),m}static[Symbol.hasInstance](a){return a!==null&&typeof a=="object"&&Object.getPrototypeOf(a)===oT.prototype||e.has(a)}},SO=(n,t)=>(e,s,r)=>(n(s).replay(r),t(s,e,r)),TO=(n,t,e)=>async(s,r,a)=>{const u=n(s);await Promise.all(u.activeInputs.map((h,p)=>Array.from(h).map(async([m,_])=>{const b=await t(m).render(m,r),x=s.context.destination;!e(m)&&(s!==x||!e(s))&&b.connect(a,_,p)})).reduce((h,p)=>[...h,...p],[]))},AO=(n,t,e)=>async(s,r,a)=>{const u=t(s);await Promise.all(Array.from(u.activeInputs).map(async([h,p])=>{const _=await n(h).render(h,r);e(h)||_.connect(a,p)}))},EO=(n,t,e,s)=>r=>n(Vh,()=>Vh(r))?Promise.resolve(n(s,s)).then(a=>{if(!a){const u=e(r,512,0,1);r.oncomplete=()=>{u.onaudioprocess=null,u.disconnect()},u.onaudioprocess=()=>r.currentTime,u.connect(r.destination)}return r.startRendering()}):new Promise(a=>{const u=t(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=h=>{u.disconnect(),a(h.renderedBuffer)},u.connect(r.destination),r.startRendering()}),CO=n=>(t,e)=>{n.set(t,e)},LO=n=>(t,e)=>n.set(t,e),MO=(n,t,e,s,r,a,u,h)=>(p,m)=>e(p).render(p,m).then(()=>Promise.all(Array.from(s(m)).map(_=>e(_).render(_,m)))).then(()=>r(m)).then(_=>(typeof _.copyFromChannel!="function"?(u(_),Oy(_)):t(a,()=>a(_))||h(_),n.add(_),_)),kO={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},OO=(n,t,e,s,r,a)=>class extends n{constructor(h,p){const m=r(h),_={...kO,...p},g=e(m,_),b=a(m),x=b?s():null;super(h,!1,g,x),this._pan=t(this,b,g.pan)}get pan(){return this._pan}},DO=(n,t,e,s,r)=>()=>{const a=new WeakMap,u=async(h,p)=>{let m=e(h);const _=mi(m,p);if(!_){const g={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,pan:m.pan.value};m=t(p,g)}return a.set(p,m),_?await n(p,h.pan,m.pan):await s(p,h.pan,m.pan),au(m)?await r(h,p,m.inputs[0]):await r(h,p,m),m};return{render(h,p){const m=a.get(p);return m!==void 0?Promise.resolve(m):u(h,p)}}},RO=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0},IO=(n,t)=>async()=>{if(n===null)return!0;if(t===null)return!1;const e=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new t(1,128,44100),r=URL.createObjectURL(e);let a=!1,u=!1;try{await s.audioWorklet.addModule(r);const h=new n(s,"a",{numberOfOutputs:0}),p=s.createOscillator();h.port.onmessage=()=>a=!0,h.onprocessorerror=()=>u=!0,p.connect(h),p.start(0),await s.startRendering(),await new Promise(m=>setTimeout(m))}catch{}finally{URL.revokeObjectURL(r)}return a&&!u},NO=(n,t)=>()=>{if(t===null)return Promise.resolve(!1);const e=new t(1,1,44100),s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{e.oncomplete=()=>{s.disconnect(),r(e.currentTime!==0)},e.startRendering()})},PO=()=>new DOMException("","UnknownError"),zO={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},UO=(n,t,e,s,r,a,u)=>class extends n{constructor(p,m){const _=r(p),g={...zO,...m},b=e(_,g),S=a(_)?s():null;super(p,!0,b,S),this._isCurveNullified=!1,this._nativeWaveShaperNode=b,u(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(p){if(p===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(p.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=p}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(p){this._nativeWaveShaperNode.oversample=p}},BO=(n,t,e)=>()=>{const s=new WeakMap,r=async(a,u)=>{let h=t(a);if(!mi(h,u)){const m={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,curve:h.curve,oversample:h.oversample};h=n(u,m)}return s.set(u,h),au(h)?await e(a,u,h.inputs[0]):await e(a,u,h),h};return{render(a,u){const h=s.get(u);return h!==void 0?Promise.resolve(h):r(a,u)}}},HO=()=>typeof window>"u"?null:window,VO=(n,t)=>e=>{e.copyFromChannel=(s,r,a=0)=>{const u=n(a),h=n(r);if(h>=e.numberOfChannels)throw t();const p=e.length,m=e.getChannelData(h),_=s.length;for(let g=u<0?-u:0;g+u<p&&g<_;g+=1)s[g]=m[g+u]},e.copyToChannel=(s,r,a=0)=>{const u=n(a),h=n(r);if(h>=e.numberOfChannels)throw t();const p=e.length,m=e.getChannelData(h),_=s.length;for(let g=u<0?-u:0;g+u<p&&g<_;g+=1)m[g+u]=s[g]}},jO=n=>t=>{t.copyFromChannel=(e=>(s,r,a=0)=>{const u=n(a),h=n(r);if(u<t.length)return e.call(t,s,h,u)})(t.copyFromChannel),t.copyToChannel=(e=>(s,r,a=0)=>{const u=n(a),h=n(r);if(u<t.length)return e.call(t,s,h,u)})(t.copyToChannel)},qO=n=>(t,e)=>{const s=e.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=s),n(t,"buffer",r=>()=>{const a=r.call(t);return a===s?null:a},r=>a=>r.call(t,a===null?s:a))},GO=(n,t)=>(e,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const r=e.createBufferSource();t(s,()=>{const h=s.numberOfInputs;for(let p=0;p<h;p+=1)r.connect(s,0,p)},()=>r.disconnect(s))},aT=(n,t,e)=>n.copyFromChannel===void 0?n.getChannelData(e)[0]:(n.copyFromChannel(t,e),t[0]),lT=n=>{if(n===null)return!1;const t=n.length;return t%2!==0?n[Math.floor(t/2)]!==0:n[t/2-1]+n[t/2]!==0},uf=(n,t,e,s)=>{let r=n;for(;!r.hasOwnProperty(t);)r=Object.getPrototypeOf(r);const{get:a,set:u}=Object.getOwnPropertyDescriptor(r,t);Object.defineProperty(n,t,{get:e(a),set:s(u)})},ZO=n=>({...n,outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}),WO=n=>({...n,channelCount:n.numberOfOutputs}),FO=n=>{const{imag:t,real:e}=n;return t===void 0?e===void 0?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(e,()=>0),real:e}:e===void 0?{...n,imag:t,real:Array.from(t,()=>0)}:{...n,imag:t,real:e}},cT=(n,t,e)=>{try{n.setValueAtTime(t,e)}catch(s){if(s.code!==9)throw s;cT(n,t,e+1e-7)}},YO=n=>{const t=n.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},XO=n=>{const t=n.createBufferSource(),e=n.createBuffer(1,1,44100);t.buffer=e;try{t.start(0,1)}catch{return!1}return!0},QO=n=>{const t=n.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},Py=n=>{const t=n.createOscillator();try{t.start(-1)}catch(e){return e instanceof RangeError}return!1},uT=n=>{const t=n.createBuffer(1,1,44100),e=n.createBufferSource();e.buffer=t,e.start(),e.stop();try{return e.stop(),!0}catch{return!1}},zy=n=>{const t=n.createOscillator();try{t.stop(-1)}catch(e){return e instanceof RangeError}return!1},$O=n=>{const{port1:t,port2:e}=new MessageChannel;try{t.postMessage(n)}finally{t.close(),e.close()}},KO=n=>{n.start=(t=>(e=0,s=0,r)=>{const a=n.buffer,u=a===null?s:Math.min(a.duration,s);a!==null&&u>a.duration-.5/n.context.sampleRate?t.call(n,e,0,0):t.call(n,e,u,r)})(n.start)},hT=(n,t)=>{const e=t.createGain();n.connect(e);const s=(r=>()=>{r.call(n,e),n.removeEventListener("ended",s)})(n.disconnect);n.addEventListener("ended",s),lu(n,e),n.stop=(r=>{let a=!1;return(u=0)=>{if(a)try{r.call(n,u)}catch{e.gain.setValueAtTime(0,u)}else r.call(n,u),a=!0}})(n.stop)},cu=(n,t)=>e=>{const s={value:n};return Object.defineProperties(e,{currentTarget:s,target:s}),typeof t=="function"?t.call(n,e):t.handleEvent.call(n,e)},JO=v3(jl),t4=A3(jl),e4=zM(tm),fT=new WeakMap,n4=ek(fT),ur=dM(new Map,new WeakMap),Hr=HO(),dT=Ok(ur,Gr),Uy=tk(xi),li=TO(xi,Uy,Ul),i4=k3(dT,on,li),Je=sk(Jp),Ro=sO(Hr),We=wk(Ro),pT=new WeakMap,mT=FM(cu),hf=Nk(Hr),By=gk(hf),Hy=yk(Hr),_T=vk(Hr),jh=zk(Hr),En=eM(b3(q2),T3(JO,t4,Lp,e4,Mp,xi,n4,sf,on,jl,Oo,Ul,hp),ur,fk(F0,Mp,xi,on,Hh,Oo),Gr,em,Ti,RM(Lp,F0,xi,on,Hh,Je,Oo,We),HM(pT,xi,lr),mT,Je,By,Hy,_T,We,jh),s4=M3(En,i4,Gr,dT,Je,We),Vy=new WeakSet,sS=Dk(Hr),gT=EM(new Uint32Array(1)),jy=VO(gT,Gr),qy=jO(gT),yT=D3(Vy,ur,Ti,sS,Ro,RO(sS),jy,qy),nm=E3(Fi),vT=AO(Uy,of,Ul),Zr=bM(vT),uu=Ik(nm,ur,YO,XO,QO,Py,uT,zy,KO,qO(uf),hT),Wr=SO(nk(of),vT),r4=N3(Zr,uu,on,Wr,li),hr=nM(w3(G2),pT,ky,iM,d3,p3,m3,_3,g3,G0,V2,hf,cT),o4=I3(En,r4,hr,Jn,uu,Je,We,cu),a4=G3(En,Z3,Gr,Jn,Pk(Fi,uf),Je,We,li),l4=fM(Zr,sT,on,Wr,li),ql=LO(fT),c4=hM(En,hr,l4,em,sT,Je,We,ql),Ba=Mk(jl,Hy),u4=GO(Jn,Ba),Ha=Gk(hf,u4),h4=_M(Ha,on,li),f4=mM(En,h4,Ha,Je,We),d4=vM(lf,on,li),p4=yM(En,d4,lf,Je,We,WO),m4=Fk(nm,uu,Fi,Ba),hu=Wk(nm,ur,m4,Py,zy),_4=AM(Zr,hu,on,Wr,li),g4=TM(En,hr,_4,hu,Je,We,cu),bT=Yk(Ti,uf),y4=MM(bT,on,li),v4=LM(En,y4,bT,Je,We,ql),b4=PM(Zr,rT,on,Wr,li),w4=NM(En,hr,b4,rT,Je,We,ql),wT=Xk(Ti),x4=GM(Zr,wT,on,Wr,li),S4=qM(En,hr,x4,wT,Ti,Je,We,ql),T4=KM(Zr,Fi,on,Wr,li),A4=$M(En,hr,T4,Fi,Je,We),E4=Jk(em,Jn,cf,Ti),im=EO(ur,Fi,cf,NO(Fi,Ro)),C4=hk(uu,on,Ro,li,im),L4=Qk(E4),M4=ck(En,L4,C4,Je,We,ql),k4=W3(hr,Ha,hu,cf,Ti,aT,We,uf),xT=new WeakMap,O4=Lk(a4,k4,mT,We,xT,cu),ST=rO(nm,ur,Py,uT,zy,hT),D4=gO(Zr,ST,on,Wr,li),R4=_O(En,hr,ST,D4,Je,We,cu),TT=xM(uu),I4=fO(TT,Jn,Fi,lT,Ba),sm=hO(TT,Jn,I4,lT,Ba,hf,uf),N4=aO(Lp,Jn,Ha,Fi,cf,sm,Ti,Mp,aT,Ba),AT=oO(N4),P4=bO(Zr,Ha,hu,Fi,AT,on,Ro,Wr,li,im),z4=vO(En,hr,AT,P4,Je,We,ql),U4=lO(Gr),B4=xO(U4,Je,new WeakSet,FO),H4=uO(Ha,lf,Fi,sm,Ti,Ba),ET=cO(H4,Ti),V4=DO(Zr,ET,on,Wr,li),j4=OO(En,hr,ET,V4,Je,We),q4=BO(sm,on,li),G4=UO(En,Jn,sm,q4,Je,We,ql),CT=xk(Hr),Gy=YM(Hr),LT=new WeakMap,Z4=rk(LT,Ro),W4=CT?S3(ur,Ti,WM(Hr),Gy,XM(y3),Je,Z4,We,jh,new WeakMap,new WeakMap,IO(jh,Ro),Hr):void 0,F4=bk(By,We),Y4=DM(Vy,ur,OM,ZM,new WeakSet,Je,F4,Ep,Vh,jy,qy),MT=cM(W4,s4,yT,o4,c4,f4,p4,g4,v4,Y4,w4,S4,A4,M4,O4,R4,z4,B4,j4,G4),X4=Sk(En,tO,Je,We),Q4=Ak(En,eO,Je,We),$4=Ek(En,nO,Je,We),K4=iO(Jn,We),J4=Ck(En,K4,Je),tD=q3(MT,Jn,Ti,PO,X4,Q4,$4,J4,hf),Zy=ok(xT),eD=C3(Zy),kT=wM(Gr),nD=UM(Zy),OT=VM(Gr),DT=new WeakMap,iD=JM(DT,lr),sD=qk(kT,Gr,Jn,Ha,lf,hu,Fi,cf,Ti,OT,Gy,iD,Ba),rD=Bk(Jn,sD,Fi,Ti,Ba),oD=lM(Zr,kT,uu,Ha,lf,hu,Fi,nD,OT,Gy,on,jh,Ro,Wr,li,im),aD=ik(LT),lD=CO(DT),rS=CT?rM(eD,En,hr,oD,rD,xi,aD,Je,We,jh,ZO,lD,$O,cu):void 0,cD=kM(Ti,Ro),uD=MO(Vy,ur,Uy,Zy,im,Ep,jy,qy),hD=pO(MT,ur,Jn,cD,uD),fD=dk(Jp,By),dD=pk(My,Hy),pD=mk(ky,_T),mD=_k(Jp,We);function js(n){return n===void 0}function we(n){return n!==void 0}function _D(n){return typeof n=="function"}function Vr(n){return typeof n=="number"}function Il(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function RT(n){return typeof n=="boolean"}function ar(n){return Array.isArray(n)}function Do(n){return typeof n=="string"}function Fd(n){return Do(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function ie(n,t){if(!n)throw new Error(t)}function ds(n,t,e=1/0){if(!(t<=n&&n<=e))throw new RangeError(`Value must be within [${t}, ${e}], got: ${n}`)}function IT(n){!n.isOffline&&n.state!=="running"&&Wy('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let NT=!1,oS=!1;function aS(n){NT=n}function gD(n){js(n)&&NT&&!oS&&(oS=!0,Wy("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let PT=console;function yD(...n){PT.log(...n)}function Wy(...n){PT.warn(...n)}function vD(n){return new tD(n)}function bD(n,t,e){return new hD(n,t,e)}const us=typeof self=="object"?self:null,wD=us&&(us.hasOwnProperty("AudioContext")||us.hasOwnProperty("webkitAudioContext"));function xD(n,t,e){return ie(we(rS),"AudioWorkletNode only works in a secure context (https or localhost)"),new(n instanceof us?.BaseAudioContext?us?.AudioWorkletNode:rS)(n,t,e)}function fr(n,t,e,s){var r=arguments.length,a=r<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,e):s,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(n,t,e,s);else for(var h=n.length-1;h>=0;h--)(u=n[h])&&(a=(r<3?u(a):r>3?u(t,e,a):u(t,e))||a);return r>3&&a&&Object.defineProperty(t,e,a),a}function An(n,t,e,s){function r(a){return a instanceof e?a:new e(function(u){u(a)})}return new(e||(e=Promise))(function(a,u){function h(_){try{m(s.next(_))}catch(g){u(g)}}function p(_){try{m(s.throw(_))}catch(g){u(g)}}function m(_){_.done?a(_.value):r(_.value).then(h,p)}m((s=s.apply(n,t||[])).next())})}class SD{constructor(t,e,s,r){this._callback=t,this._type=e,this._minimumUpdateInterval=Math.max(128/(r||44100),.001),this.updateInterval=s,this._createClock()}_createWorker(){const t=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),e=URL.createObjectURL(t),s=new Worker(e);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){var e;this._updateInterval=Math.max(t,this._minimumUpdateInterval),this._type==="worker"&&((e=this._worker)===null||e===void 0||e.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function Bl(n){return pD(n)}function ka(n){return dD(n)}function fp(n){return mD(n)}function Zc(n){return fD(n)}function TD(n){return n instanceof yT}function AD(n,t){return n==="value"||Bl(t)||ka(t)||TD(t)}function Br(n,...t){if(!t.length)return n;const e=t.shift();if(Il(n)&&Il(e))for(const s in e)AD(s,e[s])?n[s]=e[s]:Il(e[s])?(n[s]||Object.assign(n,{[s]:{}}),Br(n[s],e[s])):Object.assign(n,{[s]:e[s]});return Br(n,...t)}function ED(n,t){return n.length===t.length&&n.every((e,s)=>t[s]===e)}function Bt(n,t,e=[],s){const r={},a=Array.from(t);if(Il(a[0])&&s&&!Reflect.has(a[0],s)&&(Object.keys(a[0]).some(h=>Reflect.has(n,h))||(Br(r,{[s]:a[0]}),e.splice(e.indexOf(s),1),a.shift())),a.length===1&&Il(a[0]))Br(r,a[0]);else for(let u=0;u<e.length;u++)we(a[u])&&(r[e[u]]=a[u]);return Br(n,r)}function CD(n){return n.constructor.getDefaults()}function Nl(n,t){return js(n)?t:n}function Bs(n,t){return t.forEach(e=>{Reflect.has(n,e)&&delete n[e]}),n}class Io{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||us&&this.toString()===us.TONE_DEBUG_CLASS)&&yD(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Io.version=H2;const Fy=1e-6;function nu(n,t){return n>t+Fy}function K0(n,t){return nu(n,t)||ir(n,t)}function Rp(n,t){return n+Fy<t}function ir(n,t){return Math.abs(n-t)<Fy}function Gl(n,t,e){return Math.max(Math.min(n,e),t)}class qs extends Io{constructor(){super(),this.name="Timeline",this._timeline=[];const t=Bt(qs.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(ie(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];ie(K0(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const e=this.length-this.memory;this._timeline.splice(0,e)}return this}remove(t){const e=this._timeline.indexOf(t);return e!==-1&&this._timeline.splice(e,1),this}get(t,e="time"){const s=this._search(t,e);return s!==-1?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const s=this._search(t,e);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const s=this._search(t);return s-1>=0?this._timeline[s-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(ir(this._timeline[e].time,t)){for(let s=e;s>=0&&ir(this._timeline[s].time,t);s--)e=s;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else this._timeline.length===1&&K0(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(this._timeline.length===0)return-1;let s=0;const r=this._timeline.length;let a=r;if(r>0&&this._timeline[r-1][e]<=t)return r-1;for(;s<a;){let u=Math.floor(s+(a-s)/2);const h=this._timeline[u],p=this._timeline[u+1];if(ir(h[e],t)){for(let m=u;m<this._timeline.length;m++){const _=this._timeline[m];if(ir(_[e],t))u=m;else break}return u}else{if(Rp(h[e],t)&&nu(p[e],t))return u;nu(h[e],t)?a=u:s=u+1}}return-1}_iterate(t,e=0,s=this._timeline.length-1){this._timeline.slice(e,s+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const s=this._search(t);return s!==-1&&this._iterate(e,0,s),this}forEachAfter(t,e){const s=this._search(t);return this._iterate(e,s+1),this}forEachBetween(t,e,s){let r=this._search(t),a=this._search(e);return r!==-1&&a!==-1?(this._timeline[r].time!==t&&(r+=1),this._timeline[a].time===e&&(a-=1),this._iterate(s,r,a)):r===-1&&this._iterate(s,0,a),this}forEachFrom(t,e){let s=this._search(t);for(;s>=0&&this._timeline[s].time>=t;)s--;return this._iterate(e,s+1),this}forEachAtTime(t,e){const s=this._search(t);if(s!==-1&&ir(this._timeline[s].time,t)){let r=s;for(let a=s;a>=0&&ir(this._timeline[a].time,t);a--)r=a;this._iterate(a=>{e(a)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const zT=[];function rm(n){zT.push(n)}function LD(n){zT.forEach(t=>t(n))}const UT=[];function om(n){UT.push(n)}function MD(n){UT.forEach(t=>t(n))}class ff extends Io{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach(r=>{js(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(e)}),this}once(t,e){const s=(...r)=>{e(...r),this.off(t,s)};return this.on(t,s),this}off(t,e){return t.split(/\W+/).forEach(r=>{if(js(this._events)&&(this._events={}),this._events.hasOwnProperty(r))if(js(e))this._events[r]=[];else{const a=this._events[r];for(let u=a.length-1;u>=0;u--)a[u]===e&&a.splice(u,1)}}),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const s=this._events[t].slice(0);for(let r=0,a=s.length;r<a;r++)s[r].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach(e=>{const s=Object.getOwnPropertyDescriptor(ff.prototype,e);Object.defineProperty(t.prototype,e,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class BT extends ff{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class df extends BT{constructor(){var t,e;super(),this.name="Context",this._constants=new Map,this._timeouts=new qs,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const s=Bt(df.getDefaults(),arguments,["context"]);s.context?(this._context=s.context,this._latencyHint=((t=arguments[0])===null||t===void 0?void 0:t.latencyHint)||""):(this._context=vD({latencyHint:s.latencyHint}),this._latencyHint=s.latencyHint),this._ticker=new SD(this.emit.bind(this,"tick"),s.clockSource,s.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((e=arguments[0])===null||e===void 0)&&e.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=s.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(LD(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,s){return this._context.createBuffer(t,e,s)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,s){return this._context.createPeriodicWave(t,e,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return ie(Zc(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaElementSource(t){return ie(Zc(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(t)}createMediaStreamDestination(){return ie(Zc(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){ie(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){ie(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){ie(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){ie(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return xD(this.rawContext,t,e)}addAudioWorkletModule(t){return An(this,void 0,void 0,function*(){ie(we(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(t)),yield this._workletPromise})}workletsAreReady(){return An(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get lookAhead(){return this._lookAhead}set lookAhead(t){this._lookAhead=t,this.updateInterval=t?t/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return Zc(this._context)?this._context.resume():Promise.resolve()}close(){return An(this,void 0,void 0,function*(){Zc(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&MD(this)})}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),s=e.getChannelData(0);for(let a=0;a<s.length;a++)s[a]=t;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants.set(t,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(t=>this._constants[t].disconnect()),this.close(),this}_timeoutLoop(){const t=this.now();this._timeouts.forEachBefore(t,e=>{e.callback(),this._timeouts.remove(e)})}setTimeout(t,e){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:s+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach(e=>{e.id===t&&this._timeouts.remove(e)}),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const s=++this._timeoutIds,r=()=>{const a=this.now();this._timeouts.add({callback:()=>{t(),r()},id:s,time:a+e})};return r(),s}}class kD extends BT{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,s){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaElementSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t){return An(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}}function xe(n,t){ar(t)?t.forEach(e=>xe(n,e)):Object.defineProperty(n,t,{enumerable:!0,writable:!1})}function Yy(n,t){ar(t)?t.forEach(e=>Yy(n,e)):Object.defineProperty(n,t,{writable:!0})}const Le=()=>{};class $e extends Io{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Le;const t=Bt($e.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,Do(t.url)?this.load(t.url).catch(t.onerror):t.url&&this.set(t.url)}static getDefaults(){return{onerror:Le,onload:Le,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Gi().sampleRate}set(t){return t instanceof $e?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return An(this,void 0,void 0,function*(){const e=$e.load(t).then(s=>{this.set(s),this.onload(this)});$e.downloads.push(e);try{yield e}finally{const s=$e.downloads.indexOf(e);$e.downloads.splice(s,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=ar(t)&&t[0].length>0,s=e?t.length:1,r=e?t[0].length:t.length,a=Gi(),u=a.createBuffer(s,r,a.sampleRate),h=!e&&s===1?[t]:t;for(let p=0;p<s;p++)u.copyToChannel(h[p],p);return this._buffer=u,this}toMono(t){if(Vr(t))this.fromArray(this.toArray(t));else{let e=new Float32Array(this.length);const s=this.numberOfChannels;for(let r=0;r<s;r++){const a=this.toArray(r);for(let u=0;u<a.length;u++)e[u]+=a[u]}e=e.map(r=>r/s),this.fromArray(e)}return this}toArray(t){if(Vr(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{const e=[];for(let s=0;s<this.numberOfChannels;s++)e[s]=this.getChannelData(s);return e}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){ie(this.loaded,"Buffer is not loaded");const s=Math.floor(t*this.sampleRate),r=Math.floor(e*this.sampleRate);ie(s<r,"The start time must be less than the end time");const a=r-s,u=Gi().createBuffer(this.numberOfChannels,a,this.sampleRate);for(let h=0;h<this.numberOfChannels;h++)u.copyToChannel(this.getChannelData(h).subarray(s,r),h);return new $e(u)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new $e().fromArray(t)}static fromUrl(t){return An(this,void 0,void 0,function*(){return yield new $e().load(t)})}static load(t){return An(this,void 0,void 0,function*(){const e=$e.baseUrl===""||$e.baseUrl.endsWith("/")?$e.baseUrl:$e.baseUrl+"/",s=yield fetch(e+t);if(!s.ok)throw new Error(`could not load url: ${t}`);const r=yield s.arrayBuffer();return yield Gi().decodeAudioData(r)})}static supportsType(t){const e=t.split("."),s=e[e.length-1];return document.createElement("audio").canPlayType("audio/"+s)!==""}static loaded(){return An(this,void 0,void 0,function*(){for(yield Promise.resolve();$e.downloads.length;)yield $e.downloads[0]})}}$e.baseUrl="";$e.downloads=[];class am extends df{constructor(){super({clockSource:"offline",context:fp(arguments[0])?arguments[0]:bD(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:fp(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=fp(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return An(this,void 0,void 0,function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const s=Math.floor(this.sampleRate/128);t&&e%s===0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(){return An(this,arguments,void 0,function*(t=!0){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new $e(e)})}close(){return Promise.resolve()}}const HT=new kD;let Ml=HT;function Gi(){return Ml===HT&&wD&&OD(new df),Ml}function OD(n,t=!1){t&&Ml.dispose(),Zc(n)?Ml=new df(n):fp(n)?Ml=new am(n):Ml=n}function Yd(){return Ml.resume()}if(us&&!us.TONE_SILENCE_LOGGING){const t=` * Tone.js v${H2} * `;console.log(`%c${t}`,"background: #000; color: #fff")}function DD(n){return Math.pow(10,n/20)}function RD(n){return 20*(Math.log(n)/Math.LN10)}function VT(n){return Math.pow(2,n/12)}let lm=440;function ID(){return lm}function ND(n){lm=n}function J0(n){return Math.round(jT(n))}function jT(n){return 69+12*Math.log2(n/lm)}function PD(n){return lm*Math.pow(2,(n-69)/12)}class Xy extends Io{constructor(t,e,s){super(),this.defaultUnits="s",this._val=e,this._units=s,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const s=parseInt(t,10),r=e==="."?1.5:1;return s===1?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(Math.floor(e)*3))},regexp:/^(\d+)t$/i},tr:{method:(t,e,s)=>{let r=0;return t&&t!=="0"&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(r+=this._beatsToUnits(parseFloat(e))),s&&s!=="0"&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof Xy&&this.fromType(this._val),js(this._val))return this._noArg();if(Do(this._val)&&js(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(Il(this._val)){let t=0;for(const e in this._val)if(we(this._val[e])){const s=this._val[e],r=new this.constructor(this.context,e).valueOf()*s;t+=r}return t}if(we(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}else return Do(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class Hs extends Xy{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new Hs(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const s=new this.constructor(this.context,t).valueOf(),r=this.valueOf(),h=Math.round(r/s)*s-r;return r+h*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let a=1;a<9;a++){const u=Math.pow(2,a);e.push(u+"n."),e.push(u+"n"),e.push(u+"t")}e.push("0");let s=e[0],r=new Hs(this.context,e[0]).toSeconds();return e.forEach(a=>{const u=new Hs(this.context,a).toSeconds();Math.abs(u-t)<Math.abs(r-t)&&(s=a,r=u)}),s}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const s=Math.floor(e/this._getTimeSignature());let r=e%1*4;e=Math.floor(e)%this._getTimeSignature();const a=r.toString();return a.length>3&&(r=parseFloat(parseFloat(a).toFixed(3))),[s,e,r].join(":")}toTicks(){const t=this._beatsToUnits(1);return this.valueOf()/t*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return J0(this.toFrequency())}_now(){return this.context.now()}}function zD(n,t){return new Hs(Gi(),n,t)}class Vs extends Hs{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return ID()}static set A4(t){ND(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return this.defaultUnits==="midi"?t:Vs.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(t,e){const r=UD[t.toLowerCase()]+(parseInt(e,10)+1)*12;return this.defaultUnits==="midi"?r:Vs.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,s){let r=1;return t&&t!=="0"&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&e!=="0"&&(r*=this._beatsToUnits(parseFloat(e))),s&&s!=="0"&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(t){return new Vs(this.context,this.valueOf()*VT(t))}harmonize(t){return t.map(e=>this.transpose(e))}toMidi(){return J0(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/Vs.A4);let s=Math.round(12*e)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),BD[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(t*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return PD(t)}static ftom(t){return J0(t)}}const UD={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},BD=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Mh extends Hs{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class ti extends Io{constructor(){super();const t=Bt(ti.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Gi()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return gD(t),new Hs(this.context,t).toSeconds()}toFrequency(t){return new Vs(this.context,t).toFrequency()}toTicks(t){return new Mh(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach(s=>{js(t[s])&&delete e[s]}),e}get(){const t=CD(this);return Object.keys(t).forEach(e=>{if(Reflect.has(this,e)){const s=this[e];we(s)&&we(s.value)&&we(s.setValueAtTime)?t[e]=s.value:s instanceof ti?t[e]=s._getPartialProperties(t[e]):ar(s)||Vr(s)||Do(s)||RT(s)?t[e]=s:delete t[e]}}),t}set(t){return Object.keys(t).forEach(e=>{Reflect.has(this,e)&&we(this[e])&&(this[e]&&we(this[e].value)&&we(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof ti?this[e].set(t[e]):this[e]=t[e])}),this}}class cm extends qs{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return e!==null?e.state:this._initial}setStateAtTime(t,e,s){return ds(e,0),this.add(Object.assign({},s,{state:t,time:e})),this}getLastState(t,e){const s=this._search(e);for(let r=s;r>=0;r--){const a=this._timeline[r];if(a.state===t)return a}}getNextState(t,e){const s=this._search(e);if(s!==-1)for(let r=s;r<this._timeline.length;r++){const a=this._timeline[r];if(a.state===t)return a}}}class Ae extends ti{constructor(){const t=Bt(Ae.getDefaults(),arguments,["param","units","convert"]);for(super(t),this.name="Param",this.overridden=!1,this._minOutput=1e-7,ie(we(t.param)&&(Bl(t.param)||t.param instanceof Ae),"param must be an AudioParam");!Bl(t.param);)t.param=t.param._param;this._swappable=we(t.swappable)?t.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new qs(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,we(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(ti.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return we(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return we(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return we(this.maxValue)&&we(this.minValue)&&ds(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?DD(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&this.units==="decibels"?RD(t):t}setValueAtTime(t,e){const s=this.toSeconds(e),r=this._fromType(t);return ie(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",t,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),s=this._events.getAfter(e),r=this._events.get(e);let a=this._initialValue;if(r===null)a=this._initialValue;else if(r.type==="setTargetAtTime"&&(s===null||s.type==="setValueAtTime")){const u=this._events.getBefore(r.time);let h;u===null?h=this._initialValue:h=u.value,r.type==="setTargetAtTime"&&(a=this._exponentialApproach(r.time,h,r.value,r.constant,e))}else if(s===null)a=r.value;else if(s.type==="linearRampToValueAtTime"||s.type==="exponentialRampToValueAtTime"){let u=r.value;if(r.type==="setTargetAtTime"){const h=this._events.getBefore(r.time);h===null?u=this._initialValue:u=h.value}s.type==="linearRampToValueAtTime"?a=this._linearInterpolate(r.time,u,s.time,s.value,e):a=this._exponentialInterpolate(r.time,u,s.time,s.value,e)}else a=r.value;return this._toType(a)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),this._fromType(e)===0&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const s=this._fromType(t),r=this.toSeconds(e);return ie(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",t,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(t,e){let s=this._fromType(t);s=ir(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(e);return ie(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",t,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(t,s+this.toSeconds(e)),this}linearRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(t,s+this.toSeconds(e)),this}targetRampTo(t,e,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(t,s,e),this}exponentialApproachValueAtTime(t,e,s){e=this.toSeconds(e),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(t,e,r),this.cancelAndHoldAtTime(e+s*.9),this.linearRampToValueAtTime(t,e+s),this}setTargetAtTime(t,e,s){const r=this._fromType(t);ie(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const a=this.toSeconds(e);return this._assertRange(r),ie(isFinite(r)&&isFinite(a),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:s,time:a,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",t,a,s),this._param.setTargetAtTime(r,a,s),this}setValueCurveAtTime(t,e,s,r=1){s=this.toSeconds(s),e=this.toSeconds(e);const a=this._fromType(t[0])*r;this.setValueAtTime(this._toType(a),e);const u=s/(t.length-1);for(let h=1;h<t.length;h++){const p=this._fromType(t[h])*r;this.linearRampToValueAtTime(this._toType(p),e+h*u)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return ie(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),s=this._fromType(this.getValueAtTime(e));ie(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+s);const r=this._events.get(e),a=this._events.getAfter(e);return r&&ir(r.time,e)?a?(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):a&&(this._param.cancelScheduledValues(a.time),this._events.cancel(a.time),a.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(s),e):a.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(s),e)),this._events.add({time:e,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,e),this}rampTo(t,e=.1,s){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(t,e,s):this.linearRampTo(t,e,s),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const s=this._events.get(e);if(s&&s.type==="setTargetAtTime"){const r=this._events.getAfter(s.time),a=r?r.time:e+2,u=(a-e)/10;for(let h=e;h<a;h+=u)t.linearRampToValueAtTime(this.getValueAtTime(h),h)}return this._events.forEachAfter(this.context.currentTime,r=>{r.type==="cancelScheduledValues"?t.cancelScheduledValues(r.time):r.type==="setTargetAtTime"?t.setTargetAtTime(r.value,r.time,r.constant):t[r.type](r.value,r.time)}),this}setParam(t){ie(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,s,r,a){return s+(e-s)*Math.exp(-(a-t)/r)}_linearInterpolate(t,e,s,r,a){return e+(r-e)*((a-t)/(s-t))}_exponentialInterpolate(t,e,s,r,a){return e*Math.pow(r/e,(a-t)/(s-t))}}class Vt extends ti{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return we(this.input)?Bl(this.input)||this.input instanceof Ae?1:this.input.numberOfInputs:0}get numberOfOutputs(){return we(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return we(t)&&(t instanceof Vt||ka(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach(s=>{s.channelCount=t.channelCount,s.channelCountMode=t.channelCountMode,s.channelInterpretation=t.channelInterpretation})}_getChannelProperties(){const t=this._getInternalNodes();ie(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,s=0){return cr(this,t,e,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Wy("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,s=0){return qT(this,t,e,s),this}chain(...t){return Oa(this,...t),this}fan(...t){return t.forEach(e=>this.connect(e)),this}dispose(){return super.dispose(),we(this.input)&&(this.input instanceof Vt?this.input.dispose():ka(this.input)&&this.input.disconnect()),we(this.output)&&(this.output instanceof Vt?this.output.dispose():ka(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Oa(...n){const t=n.shift();n.reduce((e,s)=>(e instanceof Vt?e.connect(s):ka(e)&&cr(e,s),s),t)}function cr(n,t,e=0,s=0){for(ie(we(n),"Cannot connect from undefined node"),ie(we(t),"Cannot connect to undefined node"),(t instanceof Vt||ka(t))&&ie(t.numberOfInputs>0,"Cannot connect to node with no inputs"),ie(n.numberOfOutputs>0,"Cannot connect from node with no outputs");t instanceof Vt||t instanceof Ae;)we(t.input)&&(t=t.input);for(;n instanceof Vt;)we(n.output)&&(n=n.output);Bl(t)?n.connect(t,e):n.connect(t,e,s)}function qT(n,t,e=0,s=0){if(we(t))for(;t instanceof Vt;)t=t.input;for(;!ka(n);)we(n.output)&&(n=n.output);Bl(t)?n.disconnect(t,e):ka(t)?n.disconnect(t,e,s):n.disconnect()}class he extends Vt{constructor(){const t=Bt(he.getDefaults(),arguments,["gain","units"]);super(t),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Ae({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),xe(this,"gain")}static getDefaults(){return Object.assign(Vt.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class iu extends Vt{constructor(t){super(t),this.onended=Le,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new he({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(e){const s=this.toSeconds(e);return this._startTime!==-1&&s>=this._startTime&&(this._stopTime===-1||s<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(Vt.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Le})}_startGain(t,e=1){ie(this._startTime===-1,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=t+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,t),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(e,t+s):this._gainNode.gain.exponentialApproachValueAtTime(e,t,s)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){ie(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.now()),e>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s=this._curve==="exponential"?e*2:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Le&&(this.onended(this),this.onended=Le,!this.context.isOffline)){const t=()=>this.dispose();typeof requestIdleCallback<"u"?requestIdleCallback(t):setTimeout(t,10)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),ie(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=Le,this}}class Qy extends iu{constructor(){const t=Bt(Qy.getDefaults(),arguments,["offset"]);super(t),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),cr(this._source,this._gainNode),this.offset=new Ae({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(iu.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Ne extends Vt{constructor(){const t=Bt(Ne.getDefaults(),arguments,["value","units"]);super(t),this.name="Signal",this.override=!0,this.output=this._constantSource=new Qy({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(Vt.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,s=0){return um(this,t,e,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,s){return this._param.exponentialRampTo(t,e,s),this}linearRampTo(t,e,s){return this._param.linearRampTo(t,e,s),this}targetRampTo(t,e,s){return this._param.targetRampTo(t,e,s),this}exponentialApproachValueAtTime(t,e,s){return this._param.exponentialApproachValueAtTime(t,e,s),this}setTargetAtTime(t,e,s){return this._param.setTargetAtTime(t,e,s),this}setValueCurveAtTime(t,e,s,r){return this._param.setValueCurveAtTime(t,e,s,r),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,s){return this._param.rampTo(t,e,s),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function um(n,t,e,s){(t instanceof Ae||Bl(t)||t instanceof Ne&&t.override)&&(t.cancelScheduledValues(0),t.setValueAtTime(0,0),t instanceof Ne&&(t.overridden=!0)),cr(n,t,e,s)}class $y extends Ae{constructor(){const t=Bt($y.getDefaults(),arguments,["value"]);super(t),this.name="TickParam",this._events=new qs(1/0),this._multiplier=1,this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ae.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,s){e=this.toSeconds(e),this.setRampPoint(e);const r=this._fromType(t),a=this._events.get(e),u=Math.round(Math.max(1/s,1));for(let h=0;h<=u;h++){const p=s*h+e,m=this._exponentialApproach(a.time,a.value,r,s,p);this.linearRampToValueAtTime(this._toType(m),p)}return this}setValueAtTime(t,e){const s=this.toSeconds(e);super.setValueAtTime(t,e);const r=this._events.get(s),a=this._events.previousEvent(r),u=this._getTicksUntilEvent(a,s);return r.ticks=Math.max(u,0),this}linearRampToValueAtTime(t,e){const s=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const r=this._events.get(s),a=this._events.previousEvent(r),u=this._getTicksUntilEvent(a,s);return r.ticks=Math.max(u,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const s=this._fromType(t),r=this._events.get(e),a=Math.round(Math.max((e-r.time)*10,1)),u=(e-r.time)/a;for(let h=0;h<=a;h++){const p=u*h+r.time,m=this._exponentialInterpolate(r.time,r.value,e,s,p);this.linearRampToValueAtTime(this._toType(m),p)}return this}_getTicksUntilEvent(t,e){if(t===null)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(js(t.ticks)){const u=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(u,t.time)}const s=this._fromType(this.getValueAtTime(t.time));let r=this._fromType(this.getValueAtTime(e));const a=this._events.get(e);return a&&a.time===e&&a.type==="setValueAtTime"&&(r=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(s+r)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),s=this._events.get(e);return Math.max(this._getTicksUntilEvent(s,e),0)}getDurationOfTicks(t,e){const s=this.toSeconds(e),r=this.getTicksAtTime(e);return this.getTimeOfTick(r+t)-s}getTimeOfTick(t){const e=this._events.get(t,"ticks"),s=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&s&&s.type==="linearRampToValueAtTime"&&e.value!==s.value){const r=this._fromType(this.getValueAtTime(e.time)),u=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-e.time),h=Math.sqrt(Math.pow(r,2)-2*u*(e.ticks-t)),p=(-r+h)/u,m=(-r-h)/u;return(p>0?p:m)+e.time}else return e?e.value===0?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const s=this.toSeconds(e),r=this.toSeconds(t),a=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-a}_fromType(t){return this.units==="bpm"&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return this.units==="bpm"&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class Ky extends Ne{constructor(){const t=Bt(Ky.getDefaults(),arguments,["value"]);super(t),this.name="TickSignal",this.input=this._param=new $y({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(Ne.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class Jy extends ti{constructor(){const t=Bt(Jy.getDefaults(),arguments,["frequency"]);super(t),this.name="TickSource",this._state=new cm,this._tickOffset=new qs,this._ticksAtTime=new qs,this._secondsAtTime=new qs,this.frequency=new Ky({context:this.context,units:t.units,value:t.frequency}),xe(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ti.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const s=this.toSeconds(t);return this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),we(e)&&this.setTicksAtTime(e,s),this._ticksAtTime.cancel(s),this._secondsAtTime.cancel(s)),this}stop(t){const e=this.toSeconds(t);if(this._state.getValueAtTime(e)==="stopped"){const s=this._state.get(e);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e)),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this._ticksAtTime.cancel(t),this._secondsAtTime.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),s=this._state.getLastState("stopped",e),r=this._ticksAtTime.get(e),a={state:"paused",time:e};this._state.add(a);let u=r||s,h=r?r.ticks:0,p=null;return this._state.forEachBetween(u.time,e+this.sampleTime,m=>{let _=u.time;const g=this._tickOffset.get(m.time);g&&g.time>=u.time&&(h=g.ticks,_=g.time),u.state==="started"&&m.state!=="started"&&(h+=this.frequency.getTicksAtTime(m.time)-this.frequency.getTicksAtTime(_),m.time!==a.time&&(p={state:m.state,time:m.time,ticks:h})),u=m}),this._state.remove(a),p&&this._ticksAtTime.add(p),h}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),s=this.frequency.timeToTicks(t,e);this.setTicksAtTime(s,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),s={state:"paused",time:t};this._state.add(s);const r=this._secondsAtTime.get(t);let a=r||e,u=r?r.seconds:0,h=null;return this._state.forEachBetween(a.time,t+this.sampleTime,p=>{let m=a.time;const _=this._tickOffset.get(p.time);_&&_.time>=a.time&&(u=_.seconds,m=_.time),a.state==="started"&&p.state!=="started"&&(u+=p.time-m,p.time!==s.time&&(h={state:p.state,time:p.time,seconds:u})),a=p}),this._state.remove(s),h&&this._secondsAtTime.add(h),u}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this._ticksAtTime.cancel(e),this._secondsAtTime.cancel(e),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const s=this._tickOffset.get(e),r=this._state.get(e),a=Math.max(s.time,r.time),u=this.frequency.getTicksAtTime(a)+t-s.ticks;return this.frequency.getTimeOfTick(u)}forEachTickBetween(t,e,s){let r=this._state.get(t);this._state.forEachBetween(t,e,u=>{r&&r.state==="started"&&u.state!=="started"&&this.forEachTickBetween(Math.max(r.time,t),u.time-this.sampleTime,s),r=u});let a=null;if(r&&r.state==="started"){const u=Math.max(r.time,t),h=this.frequency.getTicksAtTime(u),p=this.frequency.getTicksAtTime(r.time),m=h-p;let _=Math.ceil(m)-m;_=ir(_,1)?0:_;let g=this.frequency.getTimeOfTick(h+_);for(;g<e;){try{s(g,Math.round(this.getTicksAtTime(g)))}catch(b){a=b;break}g+=this.frequency.getDurationOfTicks(1,g)}}if(a)throw a;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class hm extends ti{constructor(){const t=Bt(hm.getDefaults(),arguments,["callback","frequency"]);super(t),this.name="Clock",this.callback=Le,this._lastUpdate=0,this._state=new cm("stopped"),this._boundLoop=this._loop.bind(this),this.callback=t.callback,this._tickSource=new Jy({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,xe(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ti.getDefaults(),{callback:Le,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){IT(this.context);const s=this.toSeconds(t);return this.log("start",s),this._state.getValueAtTime(s)!=="started"&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,e),s<this._lastUpdate&&this.emit("start",s,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)==="started"&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const s=this.toSeconds(e),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+t,s)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":s.time!==0&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time);break}}),this._tickSource.forEachTickBetween(t,e,(s,r)=>{this.callback(s,r)}))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}ff.mixin(hm);class qh extends Vt{constructor(){const t=Bt(qh.getDefaults(),arguments,["delayTime","maxDelay"]);super(t),this.name="Delay";const e=this.toSeconds(t.maxDelay);this._maxDelay=Math.max(e,this.toSeconds(t.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(e),this.delayTime=new Ae({context:this.context,param:this._delayNode.delayTime,units:"time",value:t.delayTime,minValue:0,maxValue:this.maxDelay}),xe(this,"delayTime")}static getDefaults(){return Object.assign(Vt.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class fu extends Vt{constructor(){const t=Bt(fu.getDefaults(),arguments,["volume"]);super(t),this.name="Volume",this.input=this.output=new he({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,xe(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(Vt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class tv extends Vt{constructor(){const t=Bt(tv.getDefaults(),arguments);super(t),this.name="Destination",this.input=new fu({context:this.context}),this.output=new he({context:this.context}),this.volume=this.input.volume,Oa(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(Vt.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),Oa(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}rm(n=>{n.destination=new tv({context:n})});om(n=>{n.destination.dispose()});class HD extends Vt{constructor(){super(...arguments),this.name="Listener",this.positionX=new Ae({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Ae({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Ae({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Ae({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Ae({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Ae({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Ae({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Ae({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Ae({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(Vt.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}rm(n=>{n.listener=new HD({context:n})});om(n=>{n.listener.dispose()});class ev extends Io{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=Bt(ev.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach(e=>{this._loadingCount++;const s=t.urls[e];this.add(e,s,this._bufferLoaded.bind(this,t.onload),t.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Le,onload:Le,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return ie(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,this._loadingCount===0&&t&&t()}get loaded(){return Array.from(this._buffers).every(([t,e])=>e.loaded)}add(t,e,s=Le,r=Le){return Do(e)?(this.baseUrl&&e.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(t.toString(),new $e(this.baseUrl+e,s,r))):this._buffers.set(t.toString(),new $e(e,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(t=>t.dispose()),this._buffers.clear(),this}}class Rs extends Mh{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class VD extends ti{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new qs,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;this._events.forEachBefore(t+this.anticipation,e=>{t-e.time<=this.expiration&&e.callback(),this._events.remove(e)}),this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}rm(n=>{n.draw=new VD({context:n})});om(n=>{n.draw.dispose()});class jD extends Io{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){ie(we(t.time),"Events must have a time property"),ie(we(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new qD(t.time,t.time+t.duration,t);for(this._root===null?this._root=e:this._root.insert(e),this._length++;e!==null;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(this._root!==null){const e=[];this._root.search(t.time,e);for(const s of e)if(s.event===t){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,e=>this.remove(e)),this}_setRoot(t){this._root=t,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(t,e){t.parent!==null?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(t.left===null&&t.right===null)this._replaceNodeInParent(t,null);else if(t.right===null)this._replaceNodeInParent(t,t.left);else if(t.left===null)this._replaceNodeInParent(t,t.right);else{const e=t.getBalance();let s,r=null;if(e>0)if(t.left.right===null)s=t.left,s.right=t.right,r=s;else{for(s=t.left.right;s.right!==null;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=t.left,s.right=t.right)}else if(t.right.left===null)s=t.right,s.left=t.left,r=s;else{for(s=t.right.left;s.left!==null;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=t.left,s.right=t.right)}t.parent!==null?t.isLeftChild()?t.parent.left=s:t.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}t.dispose()}_rotateLeft(t){const e=t.parent,s=t.isLeftChild(),r=t.right;r&&(t.right=r.left,r.left=t),e!==null?s?e.left=r:e.right=r:this._setRoot(r)}_rotateRight(t){const e=t.parent,s=t.isLeftChild(),r=t.left;r&&(t.left=r.right,r.right=t),e!==null?s?e.left=r:e.right=r:this._setRoot(r)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(this._root!==null){const e=[];if(this._root.search(t,e),e.length>0){let s=e[0];for(let r=1;r<e.length;r++)e[r].low>s.low&&(s=e[r]);return s.event}}return null}forEach(t){if(this._root!==null){const e=[];this._root.traverse(s=>e.push(s)),e.forEach(s=>{s.event&&t(s.event)})}return this}forEachAtTime(t,e){if(this._root!==null){const s=[];this._root.search(t,s),s.forEach(r=>{r.event&&e(r.event)})}return this}forEachFrom(t,e){if(this._root!==null){const s=[];this._root.searchAfter(t,s),s.forEach(r=>{r.event&&e(r.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(t=>t.dispose()),this._root=null,this}}class qD{constructor(t,e,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?this.left===null?this.left=t:this.left.insert(t):this.right===null?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(this.left!==null&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),!(this.low>t)&&this.right!==null&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),this.left!==null&&this.left.searchAfter(t,e)),this.right!==null&&this.right.searchAfter(t,e)}traverse(t){t(this),this.left!==null&&this.left.traverse(t),this.right!==null&&this.right.traverse(t)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return this.left!==null&&this.right!==null?t=this.left.height-this.right.height:this.left!==null?t=this.left.height+1:this.right!==null&&(t=-(this.right.height+1)),t}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,t!==null&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class GD extends Io{constructor(t){super(),this.name="TimelineValue",this._timeline=new qs({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class jr extends Vt{constructor(){super(Bt(jr.getDefaults(),arguments,["context"]))}connect(t,e=0,s=0){return um(this,t,e,s),this}}class du extends jr{constructor(){const t=Bt(du.getDefaults(),arguments,["mapping","length"]);super(t),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,ar(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):_D(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(Ne.getDefaults(),{length:1024})}setMap(t,e=1024){const s=new Float32Array(e);for(let r=0,a=e;r<a;r++){const u=r/(a-1)*2-1;s[r]=t(u,r)}return this.curve=s,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){const e=["none","2x","4x"].some(s=>s.includes(t));ie(e,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class fm extends jr{constructor(){const t=Bt(fm.getDefaults(),arguments,["value"]);super(t),this.name="Pow",this._exponentScaler=this.input=this.output=new du({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(jr.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class Da{constructor(t,e){this.id=Da._eventId++,this._remainderTime=0;const s=Object.assign(Da.getDefaults(),e);this.transport=t,this.callback=s.callback,this._once=s.once,this.time=Math.floor(s.time),this._remainderTime=s.time-this.time}static getDefaults(){return{callback:Le,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(t){if(this.callback){const e=this.transport.bpm.getDurationOfTicks(1,t);this.callback(t+this._remainderTime*e),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}Da._eventId=0;class nv extends Da{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(nv.getDefaults(),e);this.duration=s.duration,this._interval=s.interval,this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Da.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvent(){return Rp(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new Rs(this.context,this._nextTick).toSeconds()):-1}_createEvents(t){Rp(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Rs(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const e=this.transport.getTicksAtTime(t);nu(e,this.time)&&(this._nextTick=this.floatTime+Math.ceil((e-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class dm extends ti{constructor(){const t=Bt(dm.getDefaults(),arguments);super(t),this.name="Transport",this._loop=new GD(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new qs,this._repeatedEvents=new jD,this._syncedSignals=[],this._swingAmount=0,this._ppq=t.ppq,this._clock=new hm({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),xe(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(ti.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._swingAmount>0&&e%this._ppq!==0&&e%(this._swingTicks*2)!==0){const s=e%(this._swingTicks*2)/(this._swingTicks*2),r=Math.sin(s*Math.PI)*this._swingAmount;t+=new Rs(this.context,this._swingTicks*2/3).toSeconds()*r}aS(!0),this._timeline.forEachAtTime(e,s=>s.invoke(t)),aS(!1)}schedule(t,e){const s=new Da(this,{callback:t,time:new Mh(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(t,e,s,r=1/0){const a=new nv(this,{callback:t,duration:new Hs(this.context,r).toTicks(),interval:new Hs(this.context,e).toTicks(),time:new Mh(this.context,s).toTicks()});return this._addEvent(a,this._repeatedEvents)}scheduleOnce(t,e){const s=new Da(this,{callback:t,once:!0,time:new Mh(this.context,e).toTicks()});return this._addEvent(s,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(e,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(t,e)=>{e=new Rs(this.context,e).toSeconds(),this.emit("start",t,e)}),this._clock.on("stop",t=>{this.emit("stop",t)}),this._clock.on("pause",t=>{this.emit("pause",t)})}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){this.context.resume();let s;return we(e)&&(s=this.toTicks(e)),this._clock.start(t,s),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),this._clock.getStateAtTime(t)!=="started"?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){ar(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Hs(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Hs(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new Rs(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new Rs(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),s=this._clock.frequency.timeToTicks(t,e);this.ticks=s}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if(this.state==="started"){const s=this._clock.getTicksAtTime(e),r=this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,e),a=e+r;this.emit("stop",a),this._clock.setTicksAtTime(t,a),this.emit("start",a,this._clock.getSecondsAtTime(a))}else this.emit("ticks",e),this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return this._clock.getTicksAtTime(t)}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),this.state!=="started")return 0;{const e=this.now(),s=this.getTicksAtTime(e),r=t-s%t;return this._clock.nextTickTime(r,e)}}syncSignal(t,e){const s=this.now();let r=this.bpm,a=1/(60/r.getValueAtTime(s)/this.PPQ),u=[];if(t.units==="time"){const p=.015625/a,m=new he(p),_=new fm(-1),g=new he(p);r.chain(m,_,g),r=g,a=1/a,u=[m,_,g]}e||(t.getValueAtTime(s)!==0?e=t.getValueAtTime(s)/a:e=0);const h=new he(e);return r.connect(h),h.connect(t._param),u.push(h),this._syncedSignals.push({initial:t.value,nodes:u,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const s=this._syncedSignals[e];s.signal===t&&(s.nodes.forEach(r=>r.dispose()),s.signal.value=s.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Yy(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}ff.mixin(dm);rm(n=>{n.transport=new dm({context:n})});om(n=>{n.transport.dispose()});class ei extends Vt{constructor(t){super(t),this.input=void 0,this._state=new cm("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Le,this._syncedStop=Le,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new fu({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,xe(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(Vt.getDefaults(),{mute:!1,onstop:Le,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,s){let r=js(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(r=this._clampToCurrentTime(r),!this._synced&&this._state.getValueAtTime(r)==="started")ie(nu(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,e,s);else if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const a=this._state.get(r);a&&(a.offset=this.toSeconds(Nl(e,0)),a.duration=s?this.toSeconds(s):void 0);const u=this.context.transport.schedule(h=>{this._start(h,e,s)},r);this._scheduled.push(u),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else IT(this.context),this._start(r,e,s);return this}stop(t){let e=js(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),this._state.getValueAtTime(e)==="started"||we(this._state.getNextState("started",e))){if(this.log("stop",e),!this._synced)this._stop(e);else{const s=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(s)}this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,s){return t=this.toSeconds(t),this._state.getValueAtTime(t)==="started"&&(this._state.cancel(t),this._restart(t,e,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(nu(e,0)){const s=this._state.get(e);if(s&&s.state==="started"&&s.time!==e){const r=e-this.toSeconds(s.time);let a;s.duration&&(a=this.toSeconds(s.duration)-r),this._start(t,this.toSeconds(s.offset)+r,a)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));this._state.getValueAtTime(e)==="started"&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(t=>this.context.transport.clear(t)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Le,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class pf extends iu{constructor(){const t=Bt(pf.getDefaults(),arguments,["url","onload"]);super(t),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,cr(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Ae({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new $e(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(iu.getDefaults(),{url:new $e,loop:!1,loopEnd:0,loopStart:0,onload:Le,onerror:Le,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,s,r=1){ie(this.buffer.loaded,"buffer is either not set or not loaded");const a=this.toSeconds(t);this._startGain(a,r),this.loop?e=Nl(e,this.loopStart):e=Nl(e,0);let u=Math.max(this.toSeconds(e),0);if(this.loop){const h=this.toSeconds(this.loopEnd)||this.buffer.duration,p=this.toSeconds(this.loopStart),m=h-p;K0(u,h)&&(u=(u-p)%m+p),ir(u,this.buffer.duration)&&(u=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Rp(u,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(a,u)),we(s)){let h=this.toSeconds(s);h=Math.max(h,0),this.stop(a+h)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Ra extends ei{constructor(){const t=Bt(Ra.getDefaults(),arguments,["type"]);super(t),this.name="Noise",this._source=null,this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(ei.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(t){if(ie(t in lS,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,this.state==="started")){const e=this.now();this._stop(e),this._start(e)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}_start(t){const e=lS[this._type];this._source=new pf({url:e,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(e.duration-.001))}_stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Uc=44100*5,h0=2,So={brown:null,pink:null,white:null},lS={get brown(){if(!So.brown){const n=[];for(let t=0;t<h0;t++){const e=new Float32Array(Uc);n[t]=e;let s=0;for(let r=0;r<Uc;r++){const a=Math.random()*2-1;e[r]=(s+.02*a)/1.02,s=e[r],e[r]*=3.5}}So.brown=new $e().fromArray(n)}return So.brown},get pink(){if(!So.pink){const n=[];for(let t=0;t<h0;t++){const e=new Float32Array(Uc);n[t]=e;let s,r,a,u,h,p,m;s=r=a=u=h=p=m=0;for(let _=0;_<Uc;_++){const g=Math.random()*2-1;s=.99886*s+g*.0555179,r=.99332*r+g*.0750759,a=.969*a+g*.153852,u=.8665*u+g*.3104856,h=.55*h+g*.5329522,p=-.7616*p-g*.016898,e[_]=s+r+a+u+h+p+m+g*.5362,e[_]*=.11,m=g*.115926}}So.pink=new $e().fromArray(n)}return So.pink},get white(){if(!So.white){const n=[];for(let t=0;t<h0;t++){const e=new Float32Array(Uc);n[t]=e;for(let s=0;s<Uc;s++)e[s]=Math.random()*2-1}So.white=new $e().fromArray(n)}return So.white}};function Zl(n,t){return An(this,void 0,void 0,function*(){const e=t/n.context.sampleRate,s=new am(1,e,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/e,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class iv extends iu{constructor(){const t=Bt(iv.getDefaults(),arguments,["frequency","type"]);super(t),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],cr(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new Ae({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new Ae({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),xe(this,["frequency","detune"])}static getDefaults(){return Object.assign(iu.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class xn extends ei{constructor(){const t=Bt(xn.getDefaults(),arguments,["frequency","type"]);super(t),this.name="Oscillator",this._oscillator=null,this.frequency=new Ne({context:this.context,units:"frequency",value:t.frequency}),xe(this,"frequency"),this.detune=new Ne({context:this.context,units:"cents",value:t.detune}),xe(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(ei.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),s=new iv({context:this.context,onended:()=>this.onstop(this)});this._oscillator=s,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return xn._periodicWaveCache.find(e=>e.phase===this._phase&&ED(e.partials,this._partials));{const t=xn._periodicWaveCache.find(e=>e.type===this._type&&e.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&e)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{const s=this._getCachedPeriodicWave();if(we(s)){const{partials:r,wave:a}=s;this._wave=a,this._partials=r,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[r,a]=this._getRealImaginary(t,this._phase),u=this.context.createPeriodicWave(r,a);this._wave=u,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),xn._periodicWaveCache.push({imag:a,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:r,type:this._type,wave:this._wave}),xn._periodicWaveCache.length>100&&xn._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){ds(t,0);let e=this._type;const s=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(s&&(e=s[1]),this._type!=="custom")t===0?this.type=e:this.type=e+t.toString();else{const r=new Float32Array(t);this._partials.forEach((a,u)=>r[u]=a),this._partials=Array.from(r),this.type=this._type}}_getRealImaginary(t,e){let r=2048;const a=new Float32Array(r),u=new Float32Array(r);let h=1;if(t==="custom"){if(h=this._partials.length+1,this._partialCount=this._partials.length,r=h,this._partials.length===0)return[a,u]}else{const p=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);p?(h=parseInt(p[2],10)+1,this._partialCount=parseInt(p[2],10),t=p[1],h=Math.max(h,2),r=h):this._partialCount=0,this._partials=[]}for(let p=1;p<r;++p){const m=2/(p*Math.PI);let _;switch(t){case"sine":_=p<=h?1:0,this._partials[p-1]=_;break;case"square":_=p&1?2*m:0,this._partials[p-1]=_;break;case"sawtooth":_=m*(p&1?1:-1),this._partials[p-1]=_;break;case"triangle":p&1?_=2*(m*m)*(p-1>>1&1?-1:1):_=0,this._partials[p-1]=_;break;case"custom":_=this._partials[p-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}_!==0?(a[p]=-_*Math.sin(e*p),u[p]=_*Math.cos(e*p)):(a[p]=0,u[p]=0)}return[a,u]}_inverseFFT(t,e,s){let r=0;const a=t.length;for(let u=0;u<a;u++)r+=t[u]*Math.cos(u*s)+e[u]*Math.sin(u*s);return r}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let s=0;const r=Math.PI*2,a=32;for(let u=0;u<a;u++)s=Math.max(this._inverseFFT(t,e,u/a*r),s);return Gl(-this._inverseFFT(t,e,this._phase)/s,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(){return An(this,arguments,void 0,function*(t=1024){return Zl(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}xn._periodicWaveCache=[];class sv extends jr{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new du({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class qr extends Ne{constructor(){const t=Bt(qr.getDefaults(),arguments,["value"]);super(t),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new he({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(Ne.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class pm extends ei{constructor(){const t=Bt(pm.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="AMOscillator",this._modulationScale=new sv({context:this.context}),this._modulationNode=new he({context:this.context}),this._carrier=new xn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new xn({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new qr({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),xe(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(xn.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return An(this,arguments,void 0,function*(t=1024){return Zl(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class mm extends ei{constructor(){const t=Bt(mm.getDefaults(),arguments,["frequency","type","modulationType"]);super(t),this.name="FMOscillator",this._modulationNode=new he({context:this.context,gain:0}),this._carrier=new xn({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new Ne({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new xn({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new qr({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new qr({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),xe(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(xn.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(){return An(this,arguments,void 0,function*(t=1024){return Zl(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class mf extends ei{constructor(){const t=Bt(mf.getDefaults(),arguments,["frequency","width"]);super(t),this.name="PulseOscillator",this._widthGate=new he({context:this.context,gain:0}),this._thresh=new du({context:this.context,mapping:e=>e<=0?-1:1}),this.width=new Ne({context:this.context,units:"audioRange",value:t.width}),this._triangle=new xn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),xe(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(ei.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(){return An(this,arguments,void 0,function*(t=1024){return Zl(this,t)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class _m extends ei{constructor(){const t=Bt(_m.getDefaults(),arguments,["frequency","type","spread"]);super(t),this.name="FatOscillator",this._oscillators=[],this.frequency=new Ne({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ne({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,xe(this,["frequency","detune"])}static getDefaults(){return Object.assign(xn.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach(e=>e.start(t))}_stop(t){t=this.toSeconds(t),this._forEach(e=>e.stop(t))}_restart(t){this._forEach(e=>e.restart(t))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach(e=>e.type=t)}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,s=t/(this._oscillators.length-1);this._forEach((r,a)=>r.detune.value=e+s*a)}}get count(){return this._oscillators.length}set count(t){if(ds(t,1),this._oscillators.length!==t){this._forEach(e=>e.dispose()),this._oscillators=[];for(let e=0;e<t;e++){const s=new xn({context:this.context,volume:-6-t*1.1,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:e===0?()=>this.onstop(this):Le});this.type==="custom"&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[e]=s}this.spread=this._spread,this.state==="started"&&this._forEach(e=>e.start())}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach((e,s)=>e.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach(e=>e.baseType=t),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(e=>e.partials=t))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach(e=>e.partialCount=t),this._type=this._oscillators[0].type}asArray(){return An(this,arguments,void 0,function*(t=1024){return Zl(this,t)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(t=>t.dispose()),this}}class gm extends ei{constructor(){const t=Bt(gm.getDefaults(),arguments,["frequency","modulationFrequency"]);super(t),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new qr({context:this.context,value:2}),this._pulse=new mf({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new xn({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),xe(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(ei.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(){return An(this,arguments,void 0,function*(t=1024){return Zl(this,t)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const cS={am:pm,fat:_m,fm:mm,oscillator:xn,pulse:mf,pwm:gm};class Ia extends ei{constructor(){const t=Bt(Ia.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OmniOscillator",this.frequency=new Ne({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ne({context:this.context,units:"cents",value:t.detune}),xe(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(xn.getDefaults(),mm.getDefaults(),pm.getDefaults(),_m.getDefaults(),mf.getDefaults(),gm.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some(e=>this._sourceType===e)&&(t=this._sourceType),t+this._oscillator.type}set type(t){t.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):t.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):t==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):t==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=cS[t],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(e=this._oscillator.type),t==="fm"?this.type="fm"+e:t==="am"?this.type="am"+e:t==="fat"?this.type="fat"+e:t==="oscillator"?this.type=e:t==="pulse"?this.type="pulse":t==="pwm"&&(this.type="pwm")}_getOscType(t,e){return t instanceof cS[e]}get baseType(){return this._oscillator.baseType}set baseType(t){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&t!=="pulse"&&t!=="pwm"&&(this._oscillator.baseType=t)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(t){this._getOscType(this._oscillator,"fat")&&Vr(t)&&(this._oscillator.count=t)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(t){this._getOscType(this._oscillator,"fat")&&Vr(t)&&(this._oscillator.spread=t)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Do(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return An(this,arguments,void 0,function*(t=1024){return Zl(this,t)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class rv extends Ne{constructor(){super(Bt(rv.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new he({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Oa(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Ne.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class ym extends jr{constructor(){const t=Bt(ym.getDefaults(),arguments,["min","max"]);super(t),this.name="Scale",this._mult=this.input=new qr({context:this.context,value:t.max-t.min}),this._add=this.output=new rv({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(jr.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class ov extends jr{constructor(){super(Bt(ov.getDefaults(),arguments)),this.name="Zero",this._gain=new he({context:this.context}),this.output=this._gain,this.input=void 0,cr(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),qT(this.context.getConstant(0),this._gain),this}}class Gh extends Vt{constructor(){const t=Bt(Gh.getDefaults(),arguments,["frequency","min","max"]);super(t),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Ae.prototype._fromType,this._toType=Ae.prototype._toType,this._is=Ae.prototype._is,this._clampValue=Ae.prototype._clampValue,this._oscillator=new xn(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new he({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Ne({context:this.context,units:"audioRange",value:0}),this._zeros=new ov({context:this.context}),this._a2g=new sv({context:this.context}),this._scaler=this.output=new ym({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),xe(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(xn.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const e=this.min,s=this.max;this._units=t,this.min=e,this.max=s}get state(){return this._oscillator.state}connect(t,e,s){return(t instanceof Ae||t instanceof Ne)&&(this.convert=t.convert,this.units=t.units),um(this,t,e,s),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function GT(n,t=1/0){const e=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(a){ds(a,n,t),e.set(this,a)}})}}function No(n,t=1/0){const e=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return e.get(this)},set:function(a){ds(this.toSeconds(a),n,t),e.set(this,a)}})}}class Na extends ei{constructor(){const t=Bt(Na.getDefaults(),arguments,["url","onload"]);super(t),this.name="Player",this._activeSources=new Set,this._buffer=new $e({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(ei.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Le,onerror:Le,playbackRate:1,reverse:!1})}load(t){return An(this,void 0,void 0,function*(){return yield this._buffer.load(t),this._onload(),this})}_onload(t=Le){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,s){return super.start(t,e,s),this}_start(t,e,s){this._loop?e=Nl(e,this._loopStart):e=Nl(e,0);const r=this.toSeconds(e),a=s;s=Nl(s,Math.max(this._buffer.duration-r,0));let u=this.toSeconds(s);u=u/this._playbackRate,t=this.toSeconds(t);const h=new pf({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(t+u),this._state.setStateAtTime("stopped",t+u,{implicitEnd:!0})),this._activeSources.add(h),this._loop&&js(a)?h.start(t,r):h.start(t,r,u-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach(s=>s.stop(e))}restart(t,e,s){return super.restart(t,e,s),this}_restart(t,e,s){var r;(r=[...this._activeSources].pop())===null||r===void 0||r.stop(t),this._start(t,e,s)}seek(t,e){const s=this.toSeconds(e);if(this._state.getValueAtTime(s)==="started"){const r=this.toSeconds(t);this._stop(s),this._start(s,r)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&ds(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopStart=t})}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&ds(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(e=>{e.loopEnd=t})}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(e=>{e.loop=t}),t)){const e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),s=this._state.getNextState("stopped",e);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(t,e)})}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(t=>t.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}fr([No(0)],Na.prototype,"fadeIn",void 0);fr([No(0)],Na.prototype,"fadeOut",void 0);class ZD extends jr{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new du({context:this.context,mapping:t=>Math.abs(t)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class ps extends Vt{constructor(){const t=Bt(ps.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="Envelope",this._sig=new Ne({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(Vt.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(Do(t))return t;{let s;for(s in Xd)if(Xd[s][e]===t)return s;return t}}_setCurve(t,e,s){if(Do(s)&&Reflect.has(Xd,s)){const r=Xd[s];Il(r)?t!=="_decayCurve"&&(this[t]=r[e]):this[t]=r}else if(ar(s)&&t!=="_decayCurve")this[t]=s;else throw new Error("Envelope: invalid curve: "+s)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(t){this._setCurve("_decayCurve","Out",t)}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let r=this.toSeconds(this.attack);const a=this.toSeconds(this.decay),u=this.getValueAtTime(t);if(u>0){const h=1/r;r=(1-u)/h}if(r<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if(this._attackCurve==="linear")this._sig.linearRampTo(e,r,t);else if(this._attackCurve==="exponential")this._sig.targetRampTo(e,r,t);else{this._sig.cancelAndHoldAtTime(t);let h=this._attackCurve;for(let p=1;p<h.length;p++)if(h[p-1]<=u&&u<=h[p]){h=this._attackCurve.slice(p),h[0]=u;break}this._sig.setValueCurveAtTime(h,t,r,e)}if(a&&this.sustain<1){const h=e*this.sustain,p=t+r;this.log("decay",p),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(h,a+p):this._sig.exponentialApproachValueAtTime(h,p,a)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,t):this._releaseCurve==="linear"?this._sig.linearRampTo(0,s,t):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,s,t):(ie(ar(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,s,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,s=1){return e=this.toSeconds(e),this.triggerAttack(e,s),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,s=0){return um(this,t,e,s),this}asArray(){return An(this,arguments,void 0,function*(t=1024){const e=t/this.context.sampleRate,s=new am(1,e,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),a=r+this.toSeconds(this.release),u=a*.1,h=a+u,p=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/h,decay:e*this.toSeconds(this.decay)/h,release:e*this.toSeconds(this.release)/h,context:s}));return p._sig.toDestination(),p.triggerAttackRelease(e*(r+u)/h,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}fr([No(0)],ps.prototype,"attack",void 0);fr([No(0)],ps.prototype,"decay",void 0);fr([GT(0,1)],ps.prototype,"sustain",void 0);fr([No(0)],ps.prototype,"release",void 0);const Xd=(()=>{let t,e;const s=[];for(t=0;t<128;t++)s[t]=Math.sin(t/127*(Math.PI/2));const r=[],a=6.4;for(t=0;t<127;t++){e=t/127;const b=Math.sin(e*(Math.PI*2)*a-Math.PI/2)+1;r[t]=b/10+e*.83}r[127]=1;const u=[],h=5;for(t=0;t<128;t++)u[t]=Math.ceil(t/127*h)/h;const p=[];for(t=0;t<128;t++)e=t/127,p[t]=.5*(1-Math.cos(Math.PI*e));const m=[];for(t=0;t<128;t++){e=t/127;const b=Math.pow(e,3)*4+.2,x=Math.cos(b*Math.PI*2*e);m[t]=Math.abs(x*(1-e))}function _(b){const x=new Array(b.length);for(let S=0;S<b.length;S++)x[S]=1-b[S];return x}function g(b){return b.slice(0).reverse()}return{bounce:{In:_(m),Out:m},cosine:{In:s,Out:g(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:_(r)},sine:{In:p,Out:_(p)},step:{In:u,Out:_(u)}}})();class Pa extends Vt{constructor(){const t=Bt(Pa.getDefaults(),arguments);super(t),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=e=>this._original_triggerRelease(e),this._volume=this.output=new fu({context:this.context,volume:t.volume}),this.volume=this._volume.volume,xe(this,"volume")}static getDefaults(){return Object.assign(Vt.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const s=this["_original_"+t]=this[t];this[t]=(...r)=>{const a=r[e],u=this.context.transport.schedule(h=>{r[e]=h,s.apply(this,r)},a);this._scheduledEvents.push(u)}}unsync(){return this._scheduledEvents.forEach(t=>this.context.transport.clear(t)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(t,e,s,r){const a=this.toSeconds(s),u=this.toSeconds(e);return this.triggerAttack(t,a,r),this.triggerRelease(a+u),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Zi extends Pa{constructor(){const t=Bt(Zi.getDefaults(),arguments);super(t),this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(Pa.getDefaults(),{detune:0,onsilence:Le,portamento:0})}triggerAttack(t,e,s=1){this.log("triggerAttack",t,e,s);const r=this.toSeconds(e);return this._triggerEnvelopeAttack(r,s),this.setNote(t,r),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const s=this.toSeconds(e),r=t instanceof Vs?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const a=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,a,s)}else this.frequency.setValueAtTime(r,s);return this}}fr([No(0)],Zi.prototype,"portamento",void 0);class vm extends ps{constructor(){super(Bt(vm.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new he({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class hs extends Zi{constructor(){const t=Bt(hs.getDefaults(),arguments);super(t),this.name="Synth",this.oscillator=new Ia(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new vm(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),xe(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Zi.getDefaults(),{envelope:Object.assign(Bs(ps.getDefaults(),Object.keys(Vt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(Bs(Ia.getDefaults(),[...Object.keys(ei.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+s+r)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Zh extends Zi{constructor(){const t=Bt(Zh.getDefaults(),arguments);super(t),this.name="ModulationSynth",this._carrier=new hs({context:this.context,oscillator:t.oscillator,envelope:t.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new hs({context:this.context,oscillator:t.modulation,envelope:t.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new Ne({context:this.context,units:"frequency"}),this.detune=new Ne({context:this.context,value:t.detune,units:"cents"}),this.harmonicity=new qr({context:this.context,value:t.harmonicity,minValue:0}),this._modulationNode=new he({context:this.context,gain:0}),xe(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(Zi.getDefaults(),{harmonicity:3,oscillator:Object.assign(Bs(Ia.getDefaults(),[...Object.keys(ei.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(Bs(ps.getDefaults(),Object.keys(Vt.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(Bs(Ia.getDefaults(),[...Object.keys(ei.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(Bs(ps.getDefaults(),Object.keys(Vt.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(t,e){this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class Cl extends Zh{constructor(){super(Bt(Cl.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new sv({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class Ip extends Vt{constructor(){const t=Bt(Ip.getDefaults(),arguments,["frequency","type"]);super(t),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Ae({context:this.context,units:"number",value:t.Q,param:this._filter.Q}),this.frequency=new Ae({context:this.context,units:"frequency",value:t.frequency,param:this._filter.frequency}),this.detune=new Ae({context:this.context,units:"cents",value:t.detune,param:this._filter.detune}),this.gain=new Ae({context:this.context,units:"decibels",convert:!1,value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(Vt.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){ie(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t)!==-1,`Invalid filter type: ${t}`),this._filter.type=t}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let u=0;u<t;u++){const p=Math.pow(u/t,2)*19980+20;e[u]=p}const s=new Float32Array(t),r=new Float32Array(t),a=this.context.createBiquadFilter();return a.type=this.type,a.Q.value=this.Q.value,a.frequency.value=this.frequency.value,a.gain.value=this.gain.value,a.getFrequencyResponse(e,s,r),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Np extends Vt{constructor(){const t=Bt(Np.getDefaults(),arguments,["frequency","type","rolloff"]);super(t),this.name="Filter",this.input=new he({context:this.context}),this.output=new he({context:this.context}),this._filters=[],this._filters=[],this.Q=new Ne({context:this.context,units:"positive",value:t.Q}),this.frequency=new Ne({context:this.context,units:"frequency",value:t.frequency}),this.detune=new Ne({context:this.context,units:"cents",value:t.detune}),this.gain=new Ne({context:this.context,units:"decibels",convert:!1,value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,xe(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(Vt.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(t){ie(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t)!==-1,`Invalid filter type: ${t}`),this._type=t,this._filters.forEach(s=>s.type=t)}get rolloff(){return this._rolloff}set rolloff(t){const e=Vr(t)?t:parseInt(t,10),s=[-12,-24,-48,-96];let r=s.indexOf(e);ie(r!==-1,`rolloff can only be ${s.join(", ")}`),r+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach(a=>a.disconnect()),this._filters=new Array(r);for(let a=0;a<r;a++){const u=new Ip({context:this.context});u.type=this._type,this.frequency.connect(u.frequency),this.detune.connect(u.detune),this.Q.connect(u.Q),this.gain.connect(u.gain),this._filters[a]=u}this._internalChannels=this._filters,Oa(this.input,...this._internalChannels,this.output)}getFrequencyResponse(t=128){const e=new Ip({context:this.context,frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(t).map(()=>1);return this._filters.forEach(()=>{e.getFrequencyResponse(t).forEach((a,u)=>s[u]*=a)}),e.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(t=>{t.dispose()}),Yy(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Pp extends ps{constructor(){const t=Bt(Pp.getDefaults(),arguments,["attack","decay","sustain","release"]);super(t),this.name="FrequencyEnvelope",this._octaves=t.octaves,this._baseFrequency=this.toFrequency(t.baseFrequency),this._exponent=this.input=new fm({context:this.context,value:t.exponent}),this._scale=this.output=new ym({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(ps.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){const e=this.toFrequency(t);ds(e,0),this._baseFrequency=e,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)}get exponent(){return this._exponent.value}set exponent(t){this._exponent.value=t}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class kl extends Zi{constructor(){const t=Bt(kl.getDefaults(),arguments);super(t),this.name="MonoSynth",this.oscillator=new Ia(Object.assign(t.oscillator,{context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Np(Object.assign(t.filter,{context:this.context})),this.filterEnvelope=new Pp(Object.assign(t.filterEnvelope,{context:this.context})),this.envelope=new vm(Object.assign(t.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),xe(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Zi.getDefaults(),{envelope:Object.assign(Bs(ps.getDefaults(),Object.keys(Vt.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(Bs(Np.getDefaults(),Object.keys(Vt.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(Bs(Pp.getDefaults(),Object.keys(Vt.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(Bs(Ia.getDefaults(),Object.keys(ei.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(t,e=1){if(this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),this.envelope.sustain===0){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+s+r)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class kh extends Zi{constructor(){const t=Bt(kh.getDefaults(),arguments);super(t),this.name="DuoSynth",this.voice0=new kl(Object.assign(t.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new kl(Object.assign(t.voice1,{context:this.context})),this.harmonicity=new qr({context:this.context,units:"positive",value:t.harmonicity}),this._vibrato=new Gh({frequency:t.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new he({context:this.context,units:"normalRange",gain:t.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new Ne({context:this.context,units:"frequency",value:440}),this.detune=new Ne({context:this.context,units:"cents",value:t.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),xe(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(t){return t=this.toSeconds(t),this.voice0.envelope.getValueAtTime(t)+this.voice1.envelope.getValueAtTime(t)}static getDefaults(){return Br(Zi.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:Br(Bs(kl.getDefaults(),Object.keys(Zi.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:Br(Bs(kl.getDefaults(),Object.keys(Zi.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(t,e){this.voice0._triggerEnvelopeAttack(t,e),this.voice1._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class Oh extends Zh{constructor(){const t=Bt(Oh.getDefaults(),arguments);super(t),this.name="FMSynth",this.modulationIndex=new qr({context:this.context,value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(Zh.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}class _f extends hs{constructor(){const t=Bt(_f.getDefaults(),arguments);super(t),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,xe(this,["oscillator","envelope"])}static getDefaults(){return Br(Zi.getDefaults(),hs.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const s=this.toSeconds(e),r=this.toFrequency(t instanceof Vs?t.toFrequency():t),a=r*this.octaves;return this.oscillator.frequency.setValueAtTime(a,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}fr([GT(0)],_f.prototype,"octaves",void 0);fr([No(0)],_f.prototype,"pitchDecay",void 0);const av=new Set;function lv(n){av.add(n)}function ZT(n,t){const e=`registerProcessor("${n}", ${t})`;av.add(e)}function WD(){return Array.from(av).join(`
`)}class FD extends Vt{constructor(t){super(t),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=Le;const e=URL.createObjectURL(new Blob([WD()],{type:"text/javascript"})),s=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(e).then(()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(s,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))})}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}const YD=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;lv(YD);const XD=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;lv(XD);const QD=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;lv(QD);const WT="feedback-comb-filter",$D=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;ZT(WT,$D);class cv extends FD{constructor(){const t=Bt(cv.getDefaults(),arguments,["delayTime","resonance"]);super(t),this.name="FeedbackCombFilter",this.input=new he({context:this.context}),this.output=new he({context:this.context}),this.delayTime=new Ae({context:this.context,value:t.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new Ae({context:this.context,value:t.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),xe(this,["resonance","delayTime"])}_audioWorkletName(){return WT}static getDefaults(){return Object.assign(Vt.getDefaults(),{delayTime:.1,resonance:.5})}onReady(t){Oa(this.input,t,this.output);const e=t.parameters.get("delayTime");this.delayTime.setParam(e);const s=t.parameters.get("feedback");this.resonance.setParam(s)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class uv extends Vt{constructor(){const t=Bt(uv.getDefaults(),arguments,["frequency","type"]);super(t),this.name="OnePoleFilter",this._frequency=t.frequency,this._type=t.type,this.input=new he({context:this.context}),this.output=new he({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(Vt.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const t=this._filter,e=this.toFrequency(this._frequency),s=1/(2*Math.PI*e);if(this._type==="lowpass"){const r=1/(s*this.context.sampleRate),a=r-1;this._filter=this.context.createIIRFilter([r,0],[1,a])}else{const r=1/(s*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,r])}this.input.chain(this._filter,this.output),t&&this.context.setTimeout(()=>{this.disposed||(this.input.disconnect(t),t.disconnect())},this.blockTime)}get frequency(){return this._frequency}set frequency(t){this._frequency=t,this._createFilter()}get type(){return this._type}set type(t){this._type=t,this._createFilter()}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let a=0;a<t;a++){const h=Math.pow(a/t,2)*19980+20;e[a]=h}const s=new Float32Array(t),r=new Float32Array(t);return this._filter.getFrequencyResponse(e,s,r),s}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class hv extends Vt{constructor(){const t=Bt(hv.getDefaults(),arguments,["delayTime","resonance","dampening"]);super(t),this.name="LowpassCombFilter",this._combFilter=this.output=new cv({context:this.context,delayTime:t.delayTime,resonance:t.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new uv({context:this.context,frequency:t.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(Vt.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(t){this._lowpass.frequency=t}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class fv extends Pa{constructor(){const t=Bt(fv.getDefaults(),arguments);super(t),this.name="PluckSynth",this._noise=new Ra({context:this.context,type:"pink"}),this.attackNoise=t.attackNoise,this._lfcf=new hv({context:this.context,dampening:t.dampening,resonance:t.resonance}),this.resonance=t.resonance,this.release=t.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return Br(Pa.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(t){this._lfcf.dampening=t}triggerAttack(t,e){const s=this.toFrequency(t);e=this.toSeconds(e);const r=1/s;return this._lfcf.delayTime.setValueAtTime(r,e),this._noise.start(e),this._noise.stop(e+r*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(e),this._lfcf.resonance.setValueAtTime(this.resonance,e),this}triggerRelease(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class bm extends Pa{constructor(){const t=Bt(bm.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(t),this.name="Sampler",this._activeSources=new Map;const e={};Object.keys(t.urls).forEach(s=>{const r=parseInt(s,10);if(ie(Fd(s)||Vr(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),Fd(s)){const a=new Vs(this.context,s).toMidi();e[a]=t.urls[s]}else Vr(r)&&isFinite(r)&&(e[r]=t.urls[r])}),this._buffers=new ev({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(Pa.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Le,onerror:Le,release:.1,urls:{}})}_findClosest(t){let s=0;for(;s<96;){if(this._buffers.has(t+s))return-s;if(this._buffers.has(t-s))return s;s++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,s=1){return this.log("triggerAttack",t,e,s),Array.isArray(t)||(t=[t]),t.forEach(r=>{const a=jT(new Vs(this.context,r).toFrequency()),u=Math.round(a),h=a-u,p=this._findClosest(u),m=u-p,_=this._buffers.get(m),g=VT(p+h),b=new pf({url:_,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:g}).connect(this.output);b.start(e,0,_.duration/g,s),ar(this._activeSources.get(u))||this._activeSources.set(u,[]),this._activeSources.get(u).push(b),b.onended=()=>{if(this._activeSources&&this._activeSources.has(u)){const x=this._activeSources.get(u),S=x.indexOf(b);S!==-1&&x.splice(S,1)}}}),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach(s=>{const r=new Vs(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const a=this._activeSources.get(r);e=this.toSeconds(e),a.forEach(u=>{u.stop(e)}),this._activeSources.set(r,[])}}),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(e)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,s,r=1){const a=this.toSeconds(s);return this.triggerAttack(t,a,r),ar(e)?(ie(ar(t),"notes must be an array when duration is array"),t.forEach((u,h)=>{const p=e[Math.min(h,e.length-1)];this.triggerRelease(u,a+this.toSeconds(p))})):this.triggerRelease(t,a+this.toSeconds(e)),this}add(t,e,s){if(ie(Fd(t)||isFinite(t),`note must be a pitch or midi: ${t}`),Fd(t)){const r=new Vs(this.context,t).toMidi();this._buffers.add(r,e,s)}else this._buffers.add(t,e,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(t=>{t.forEach(e=>e.dispose())}),this._activeSources.clear(),this}}fr([No(0)],bm.prototype,"attack",void 0);fr([No(0)],bm.prototype,"release",void 0);class dv extends ti{constructor(){const t=Bt(dv.getDefaults(),arguments,["callback","value"]);super(t),this.name="ToneEvent",this._state=new cm("stopped"),this._startOffset=0,this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(ti.getDefaults(),{callback:Le,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,e=>{let s;if(e.state==="started"){e.id!==-1&&this.context.transport.clear(e.id);const r=e.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||Vr(this._loop)&&this._loop>1){s=1/0,Vr(this._loop)&&(s=this._loop*this._getLoopDuration());const a=this._state.getAfter(r);a!==null&&(s=Math.min(s,a.time-r)),s!==1/0&&(s=new Rs(this.context,s));const u=new Rs(this.context,this._getLoopDuration());e.id=this.context.transport.scheduleRepeat(this._tick.bind(this),u,new Rs(this.context,r),s)}else e.id=this.context.transport.schedule(this._tick.bind(this),new Rs(this.context,r))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return this._state.getValueAtTime(e)==="stopped"&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if(this._state.getValueAtTime(e)==="started"){this._state.setStateAtTime("stopped",e,{id:-1});const s=this._state.getBefore(e);let r=e;s!==null&&(r=s.time),this._rescheduleEvents(r)}return this}cancel(t){t=Nl(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,s=>{this.context.transport.clear(s.id)}),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&this._state.getValueAtTime(e)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let s=.02;RT(this.humanize)||(s=this.toSeconds(this.humanize)),t+=(Math.random()*2-1)*s}this.callback(t,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new Rs(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new Rs(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(e!==null&&e.state==="started"){const s=this._getLoopDuration();return(t-e.time)%s/s}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class za extends ti{constructor(){const t=Bt(za.getDefaults(),arguments,["callback","interval"]);super(t),this.name="Loop",this._event=new dv({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:t.interval,playbackRate:t.playbackRate,probability:t.probability,humanize:t.humanize}),this.callback=t.callback,this.iterations=t.iterations}static getDefaults(){return Object.assign(ti.getDefaults(),{interval:"4n",callback:Le,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(t){return this._event.start(t),this}stop(t){return this._event.stop(t),this}cancel(t){return this._event.cancel(t),this}_tick(t){this.callback(t)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(t){this._event.loopEnd=t}get playbackRate(){return this._event.playbackRate}set playbackRate(t){this._event.playbackRate=t}get humanize(){return this._event.humanize}set humanize(t){this._event.humanize=t}get probability(){return this._event.probability}set probability(t){this._event.probability=t}get mute(){return this._event.mute}set mute(t){this._event.mute=t}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(t){t===1/0?this._event.loop=!0:this._event.loop=t}dispose(){return super.dispose(),this._event.dispose(),this}}function*KD(n){let t=0;for(;t<n;)t=Gl(t,0,n-1),yield t,t++}function*JD(n){let t=n-1;for(;t>=0;)t=Gl(t,0,n-1),yield t,t--}function*xh(n,t){for(;;)yield*t(n)}function*uS(n,t){let e=t?0:n-1;for(;;)e=Gl(e,0,n-1),yield e,t?(e++,e>=n-1&&(t=!1)):(e--,e<=0&&(t=!0))}function*t8(n){let t=0,e=0;for(;t<n;)t=Gl(t,0,n-1),yield t,e++,t+=e%2?2:-1}function*e8(n){let t=n-1,e=0;for(;t>=0;)t=Gl(t,0,n-1),yield t,e++,t+=e%2?-2:1}function*n8(n){for(;;)yield Math.floor(Math.random()*n)}function*i8(n){const t=[];for(let e=0;e<n;e++)t.push(e);for(;t.length>0;){const e=t.splice(Math.floor(t.length*Math.random()),1);yield Gl(e[0],0,n-1)}}function*s8(n){let t=Math.floor(Math.random()*n);for(;;)t===0?t++:t===n-1||Math.random()<.5?t--:t++,yield t}function*hS(n,t="up",e=0){switch(ie(n>=1,"The number of values must be at least one"),t){case"up":yield*xh(n,KD);case"down":yield*xh(n,JD);case"upDown":yield*uS(n,!0);case"downUp":yield*uS(n,!1);case"alternateUp":yield*xh(n,t8);case"alternateDown":yield*xh(n,e8);case"random":yield*n8(n);case"randomOnce":yield*xh(n,i8);case"randomWalk":yield*s8(n)}}class ls extends za{constructor(){const t=Bt(ls.getDefaults(),arguments,["callback","values","pattern"]);super(t),this.name="Pattern",this.callback=t.callback,this._values=t.values,this._pattern=hS(t.values.length,t.pattern),this._type=t.pattern}static getDefaults(){return Object.assign(za.getDefaults(),{pattern:"up",values:[],callback:Le})}_tick(t){const e=this._pattern.next();this._index=e.value,this._value=this._values[e.value],this.callback(t,this._value)}get values(){return this._values}set values(t){this._values=t,this.pattern=this._type}get value(){return this._value}get index(){return this._index}get pattern(){return this._type}set pattern(t){this._type=t,this._pattern=hS(this._values.length,this._type)}}class wm extends Vt{constructor(){const t=Bt(wm.getDefaults(),arguments,["fade"]);super(t),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new ZD({context:this.context}),this.a=new he({context:this.context,gain:0}),this.b=new he({context:this.context,gain:0}),this.output=new he({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new Ne({context:this.context,units:"normalRange",value:t.fade}),xe(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",cr(this._split,this.a.gain,0),cr(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(Vt.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class zp extends Vt{constructor(t){super(t),this.name="Effect",this._dryWet=new wm({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new he({context:this.context}),this.effectReturn=new he({context:this.context}),this.input=new he({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(t.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],xe(this,"wet")}static getDefaults(){return Object.assign(Vt.getDefaults(),{wet:1})}connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class pv extends Vt{constructor(){const t=Bt(pv.getDefaults(),arguments,["pan"]);super(t),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Ae({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",xe(this,"pan")}static getDefaults(){return Object.assign(Vt.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const r8="bit-crusher",o8=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;ZT(r8,o8);class xm extends Vt{constructor(){const t=Bt(xm.getDefaults(),arguments,["channels"]);super(t),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(Vt.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class pu extends Vt{constructor(){const t=Bt(pu.getDefaults(),arguments,["channels"]);super(t),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(t.channels)}static getDefaults(){return Object.assign(Vt.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class fS extends Vt{constructor(t){super(t),this.name="StereoEffect",this.input=new he({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new wm({context:this.context,fade:t.wet}),this.wet=this._dryWet.fade,this._split=new xm({context:this.context,channels:2}),this._merge=new pu({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),xe(this,["wet"])}connectEffectLeft(...t){this._split.connect(t[0],0,0),Oa(...t),cr(t[t.length-1],this._merge,0,0)}connectEffectRight(...t){this._split.connect(t[0],1,0),Oa(...t),cr(t[t.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(Vt.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class dS extends fS{constructor(t){super(t),this.feedback=new Ne({context:this.context,value:t.feedback,units:"normalRange"}),this._feedbackL=new he({context:this.context}),this._feedbackR=new he({context:this.context}),this._feedbackSplit=new xm({context:this.context,channels:2}),this._feedbackMerge=new pu({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),xe(this,["feedback"])}static getDefaults(){return Object.assign(fS.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Dh extends dS{constructor(){const t=Bt(Dh.getDefaults(),arguments,["frequency","delayTime","depth"]);super(t),this.name="Chorus",this._depth=t.depth,this._delayTime=t.delayTime/1e3,this._lfoL=new Gh({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new Gh({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._delayNodeL=new qh({context:this.context}),this._delayNodeR=new qh({context:this.context}),this.frequency=this._lfoL.frequency,xe(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=t.type,this.spread=t.spread}static getDefaults(){return Object.assign(dS.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(t){this._depth=t;const e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}get delayTime(){return this._delayTime*1e3}set delayTime(t){this._delayTime=t/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class pS extends zp{constructor(t){super(t),this.name="FeedbackEffect",this._feedbackGain=new he({context:this.context,gain:t.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,xe(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(zp.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Rh extends pS{constructor(){const t=Bt(Rh.getDefaults(),arguments,["delayTime","feedback"]);super(t),this.name="FeedbackDelay",this._delayNode=new qh({context:this.context,delayTime:t.delayTime,maxDelay:t.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),xe(this,"delayTime")}static getDefaults(){return Object.assign(pS.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class Rr extends zp{constructor(){const t=Bt(Rr.getDefaults(),arguments,["decay"]);super(t),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const e=this.toSeconds(t.decay);ds(e,.001),this._decay=e;const s=this.toSeconds(t.preDelay);ds(s,0),this._preDelay=s,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(zp.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(t){t=this.toSeconds(t),ds(t,.001),this._decay=t,this.generate()}get preDelay(){return this._preDelay}set preDelay(t){t=this.toSeconds(t),ds(t,0),this._preDelay=t,this.generate()}generate(){return An(this,void 0,void 0,function*(){const t=this.ready,e=new am(2,this._decay+this._preDelay,this.context.sampleRate),s=new Ra({context:e}),r=new Ra({context:e}),a=new pu({context:e});s.connect(a,0,0),r.connect(a,0,1);const u=new he({context:e}).toDestination();a.connect(u),s.start(0),r.start(0),u.gain.setValueAtTime(0,0),u.gain.setValueAtTime(1,this._preDelay),u.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const h=e.render();return this.ready=h.then(Le),yield t,this._convolver.buffer=(yield h).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Nn extends Vt{constructor(){const t=Bt(Nn.getDefaults(),arguments,["solo"]);super(t),this.name="Solo",this.input=this.output=new he({context:this.context}),Nn._allSolos.has(this.context)||Nn._allSolos.set(this.context,new Set),Nn._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(Vt.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),Nn._allSolos.get(this.context).forEach(e=>e._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Nn._soloed.has(this.context)||Nn._soloed.set(this.context,new Set),Nn._soloed.get(this.context).add(this)}_removeSolo(){Nn._soloed.has(this.context)&&Nn._soloed.get(this.context).delete(this)}_isSoloed(){return Nn._soloed.has(this.context)&&Nn._soloed.get(this.context).has(this)}_noSolos(){return!Nn._soloed.has(this.context)||Nn._soloed.has(this.context)&&Nn._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Nn._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Nn._allSolos=new Map;Nn._soloed=new Map;class mv extends Vt{constructor(){const t=Bt(mv.getDefaults(),arguments,["pan","volume"]);super(t),this.name="PanVol",this._panner=this.input=new pv({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new fu({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,xe(this,["pan","volume"])}static getDefaults(){return Object.assign(Vt.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Qc extends Vt{constructor(){const t=Bt(Qc.getDefaults(),arguments,["volume","pan"]);super(t),this.name="Channel",this._solo=this.input=new Nn({solo:t.solo,context:this.context}),this._panVol=this.output=new mv({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),xe(this,["pan","volume"])}static getDefaults(){return Object.assign(Vt.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return Qc.buses.has(t)||Qc.buses.set(t,new he({context:this.context})),Qc.buses.get(t)}send(t,e=0){const s=this._getBus(t),r=new he({context:this.context,units:"decibels",gain:e});return this.connect(r),r.connect(s),r}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Qc.buses=new Map;function f0(){return Gi().now()}Gi().transport;function Co(){return Gi().transport}const Ms=Gi().destination;Gi().destination;Gi().listener;Gi().draw;Gi();const _v=[{id:"fm-synth",name:"FM Synth",defaultNote:"C4",create:()=>new Oh().toDestination()},{id:"am-synth",name:"AM Synth",defaultNote:"G4",create:()=>new Cl().toDestination()},{id:"bass",name:"Bass",defaultNote:"C2",create:()=>new kl({oscillator:{type:"sawtooth"},envelope:{attack:.1,decay:.3,sustain:.3,release:.8}}).toDestination()},{id:"lead",name:"Lead",defaultNote:"C5",create:()=>new hs({oscillator:{type:"square"},envelope:{attack:.05,decay:.2,sustain:.2,release:.4}}).toDestination()},{id:"drum",name:"Drum Hit",defaultNote:"C3",create:()=>new _f().toDestination()},{id:"beat_loop",name:"Beat Loop",defaultNote:"C4",create:()=>{const n=new Na("https://tonejs.github.io/audio/drum-samples/loops/blueyellow.mp3").toDestination();return n.loop=!0,n.sync().start(0),n}},{id:"organ_loop",name:"Organ Loop",defaultNote:"C4",create:()=>{const n=new Na("https://tonejs.github.io/audio/drum-samples/loops/organ-echo-chords.mp3").toDestination();return n.loop=!0,n.sync().start(0),n}},{id:"combo_synth",name:"Combo Synth",defaultNote:"C4",create:()=>{const n=new Oh().toDestination(),t=new Cl().toDestination(),e=new za(r=>{n.triggerAttackRelease("D2","8n",r)},"4n").start(0),s=new za(r=>{t.triggerAttackRelease("A2","8n",r)},"4n").start("8n");return[e,s]}},{id:"noise",name:"Noise",defaultNote:"D6",create:()=>{const n=new Ra({type:"pink",volume:-15,fadeIn:.5,fadeOut:.5}).toDestination();return n.sync().start(0),n}},{id:"arp",name:"Arpeggiator",defaultNote:"C4",create:()=>{const n=new pu,t=new Rr({wet:.3});n.chain(t,Ms);const e=new hs({oscillator:{type:"custom",partials:[1,.5,.3,.25,.2,.15,.1]},envelope:{attack:.005,decay:.3,sustain:.2,release:1},portamento:.01,volume:-20}).connect(n,0,0),s=new hs({oscillator:{type:"custom",partials:[1,.5,.3,.25,.2,.15,.1]},envelope:{attack:.005,decay:.3,sustain:.2,release:1},portamento:.01,volume:-20}).connect(n,0,1),r=new ls((u,h)=>{e.triggerAttackRelease(h,"8n",u)},["G2","D3","E2","A3"],"upDown"),a=new ls((u,h)=>{s.triggerAttackRelease(h,"8n",u)},["G2","D3","E2","A3"],"upDown");return r.interval="4n",a.interval="4n",a.playbackRate=.985,r.start(0),a.start(0),[r,a]}},{id:"generative",name:"Self-Playing Generative",defaultNote:"C4",create:()=>{const n=new Rr({wet:.9}),t=new Rh("8n",.8),e=["C3","E3","G3","B3","D4","F#4","A4"];let s=0,r=0;const a=new hs({oscillator:{type:"triangle"},envelope:{attack:.01,decay:.3,sustain:.5,release:1},volume:-10,onsilence:()=>{s=(s+1)%e.length,s%4===0&&(r=Math.random()>.5?1:-1);let u=e[s];const h=parseInt(u.match(/\d+/)?.[0]||"3");u=(u.match(/[A-G]#?/)?.[0]||"C")+(h+r);const m=["8n","4n","16n"],_=m[Math.floor(Math.random()*m.length)];a.triggerAttackRelease(u,_),console.log(`Next note: ${u}, duration: ${_}`)}}).chain(n,t,Ms);return a.triggerAttackRelease(e[0],"4n"),a}},{id:"dual_voices",name:"Dual Generative Voices",defaultNote:"C4",create:()=>{const n=new Rr({wet:.99}),t=new Rh("8n",.6),e=["C4","D4","E4","G4","A4"],s=["E3","G3","B3","D4"];let r=0,a=0;const u=new hs({oscillator:{type:"sine"},envelope:{attack:.04,decay:.2,sustain:.15,release:1},volume:-15,onsilence:()=>{a=(a+1)%s.length,h.triggerAttackRelease(s[a],"8n")}}).chain(t,Ms),h=new Oh({harmonicity:3,modulationIndex:10,envelope:{attack:.01,decay:.5,sustain:.1,release:.5},volume:-3,onsilence:()=>{r=(r+1)%e.length,u.triggerAttackRelease(e[r],"4n")}}).chain(n,Ms);return u.triggerAttackRelease(e[0],"4n"),[u,h]}},{id:"pattern_accent",name:"Pattern + Accent Hybrid",defaultNote:"C4",create:()=>{const n=new Rr({wet:.8}),t=new Rh("8n",.5),e=new fv({attackNoise:1,dampening:4e3,resonance:.9,volume:-10}).chain(n,t,Ms),s=new ls((p,m)=>{e.triggerAttackRelease(m,"8n",p)},["C3","E3","G3","B3"],"upDown");s.interval="8n",s.start(0);const r=["C3","D3","E3","G3","A3","E3"];let a=0;const u=new Rr({wet:.99}),h=new hs({oscillator:{type:"custom",partials:[1,.5,1,1]},envelope:{attack:.01,decay:.3,sustain:.3,release:1.5},volume:-24,portamento:.05,onsilence:()=>{const p=["2n","4n","8n","16n"],m=p[Math.floor(Math.random()*p.length)],_=zD(m).toMilliseconds();setTimeout(()=>{a=Math.floor(Math.random()*r.length),h.triggerAttackRelease(r[a],"16n")},_)}}).chain(t,u,Ms);return[s,h]}},{id:"tintinnabular",name:"Tintinnabular (Prt Style)",defaultNote:"C4",create:()=>{const n=new Rr({wet:.6,decay:4}),t=new Dh({frequency:1.5,delayTime:3.5,depth:.7,wet:.3}).start(),e=new kh({vibratoAmount:.2,vibratoRate:3,harmonicity:1.5,voice0:{oscillator:{type:"sine"},envelope:{attack:.2,decay:.3,sustain:.8,release:2}},voice1:{oscillator:{type:"sine"},envelope:{attack:.2,decay:.3,sustain:.8,release:2}},volume:-18}).chain(t,n,Ms),s=new Cl({harmonicity:2,oscillator:{type:"sine"},envelope:{attack:.3,decay:.2,sustain:.8,release:2.5},modulation:{type:"sine"},modulationEnvelope:{attack:.5,decay:.3,sustain:.7,release:2},volume:-16}).chain(t,n,Ms),r=new ls((u,h)=>{e.triggerAttackRelease(h,"4n",u)},["C3","E3","G3"],"up");r.interval="2n";const a=new ls((u,h)=>{s.triggerAttackRelease(h,"2n",u)},["C4","D4","E4","F4","E4","D4"],"upDown");return a.interval="1n",r.start(0),a.start(0),[r,a]}},{id:"tintinnabular_harmony",name:"Tintinnabular Harmony (Thirds & Sixths)",defaultNote:"C4",create:()=>{const n=new Rr({wet:.6,decay:4}),t=new Dh({frequency:1.5,delayTime:3.5,depth:.7,wet:.3}).start(),e=new kh({vibratoAmount:.2,vibratoRate:3,harmonicity:1.5,voice0:{oscillator:{type:"sine"},envelope:{attack:.2,decay:.3,sustain:.8,release:2}},voice1:{oscillator:{type:"sine"},envelope:{attack:.2,decay:.3,sustain:.8,release:2}},volume:-20}).chain(t,n,Ms),s=new Cl({harmonicity:2,oscillator:{type:"sine"},envelope:{attack:.3,decay:.2,sustain:.8,release:2.5},modulation:{type:"sine"},modulationEnvelope:{attack:.5,decay:.3,sustain:.7,release:2},volume:-18}).chain(t,n,Ms),r=new ls((u,h)=>{e.triggerAttackRelease(h,"4n",u)},["E4","G4","B4"],"up");r.interval="2n";const a=new ls((u,h)=>{s.triggerAttackRelease(h,"2n",u)},["A5","B5","C6","D6","C6","B5"],"upDown");return a.interval="1n",r.start("8n"),a.start("4n"),[r,a]}},{id:"tintinnabular_dissonance",name:"Tintinnabular Dissonance (Tension)",defaultNote:"C4",create:()=>{const n=new Rr({wet:.3,decay:2}),t=new Dh({frequency:.5,delayTime:2,depth:.4,wet:.2}).start(),e=new kh({vibratoAmount:.3,vibratoRate:4.5,harmonicity:1.2,voice0:{oscillator:{type:"sine"},envelope:{attack:.15,decay:.4,sustain:.7,release:1.8}},voice1:{oscillator:{type:"sine"},envelope:{attack:.15,decay:.4,sustain:.7,release:1.8}},volume:-19}).chain(t,n,Ms),s=new Cl({harmonicity:1.8,oscillator:{type:"sine"},envelope:{attack:.25,decay:.3,sustain:.7,release:2},modulation:{type:"sine"},modulationEnvelope:{attack:.4,decay:.4,sustain:.6,release:1.8},volume:-17}).chain(t,n,Ms),r=new ls((u,h)=>{e.triggerAttackRelease(h,"4n",u)},["Db4","F4","Ab4"],"up");r.interval="2n";const a=new ls((u,h)=>{s.triggerAttackRelease(h,"2n",u)},["B5","C#6","F5","B5","F5","C#6"],"upDown");return a.interval="1n",r.start("16n"),a.start("8n."),[r,a]}}];function a8(n){return _v.find(t=>t.id===n)}const l8=({show:n,shapeId:t,position:e,onSoundSelect:s,onClose:r,selectedsoundId:a})=>{const u=h=>{s(h),r()};return n?Ct.jsxs("div",{style:{position:"absolute",left:e.x,top:e.y,backgroundColor:"white",border:"2px solid #333",borderRadius:"8px",boxShadow:"0 8px 24px rgba(0,0,0,0.3)",zIndex:1e4,minWidth:"200px",padding:"8px 0",fontFamily:"Arial, sans-serif"},children:[Ct.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #ddd",fontWeight:"bold",fontSize:"14px",color:"#333",backgroundColor:"#f8f8f8"},children:["Select Sound for ",t]}),Ct.jsx("div",{style:{maxHeight:"300px",overflowY:"auto",overflowX:"hidden"},children:_v.map(h=>Ct.jsxs("button",{onClick:()=>u(h.id),style:{width:"100%",padding:"10px 12px",border:"none",backgroundColor:"white",textAlign:"left",cursor:"pointer",fontSize:"14px",color:"#333",transition:"background-color 0.2s",display:"block",position:"relative"},onMouseOver:p=>{p.target.style.backgroundColor="#e3f2fd",p.target.style.color="#1976d2"},onMouseOut:p=>{p.target.style.backgroundColor="white",p.target.style.color="#333"},children:[h.name,a===h.id&&Ct.jsx("span",{style:{position:"absolute",right:"12px",color:"#10b981",fontWeight:"bold",fontSize:"16px"},children:""})]},h.id))}),Ct.jsx("div",{style:{borderTop:"1px solid #ddd",padding:"8px"},children:Ct.jsx("button",{onClick:r,style:{width:"100%",padding:"8px",border:"1px solid #ccc",backgroundColor:"#f0f0f0",color:"#666",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"bold"},onMouseOver:h=>h.target.style.backgroundColor="#e0e0e0",onMouseOut:h=>h.target.style.backgroundColor="#f0f0f0",children:"Cancel"})})]}):null};class sr{static instance;activeSounds=[];soundMap=new Map;static getInstance(){return sr.instance||(sr.instance=new sr),sr.instance}async playSingle(t,e){await Yd();const s=8e3,r=this.createSound(t);this.activeSounds.push(r),this.triggerSound(r,e),setTimeout(()=>{this.destroySound(r);const a=this.activeSounds.indexOf(r);a>-1&&this.activeSounds.splice(a,1)},s)}async playMultiple(t){await Yd(),this.stopAll();const e=t.map(({soundId:r,note:a})=>{const u=this.createSound(r);return this.activeSounds.push(u),{sound:u,note:a}}),s=f0()+.1;e.forEach(({sound:r,note:a})=>{this.triggerSound(r,a,s)})}async playMultipleWithVolume(t){await Yd();const e=new Set(t.map(r=>r.soundId)),s=[];for(const r of this.soundMap.keys())e.has(r)||s.push(r);s.forEach(r=>this.stopSound(r));for(const{soundId:r,note:a,volume:u}of t)if(this.soundMap.has(r)){const h=this.soundMap.get(r);this.setSoundGain(h,u)}else{const h=this.createSound(r);this.soundMap.set(r,h),this.activeSounds.push(h),this.setSoundGain(h,u,0);const p=f0()+.1;this.triggerSound(h,a,p)}}setSoundGain(t,e,s=.1){(Array.isArray(t)?t:[t]).forEach(a=>{if("volume"in a){const u=e<=0?-1/0:20*Math.log10(e);s>0?a.volume.rampTo(u,s):a.volume.value=u}})}async startSound(t,e="C4"){if(this.soundMap.has(t))return;await Yd();const s=this.createSound(t);this.soundMap.set(t,s),this.activeSounds.push(s),this.triggerSound(s,e)}stopSound(t){const e=this.soundMap.get(t);e&&(this.setSoundGain(e,0,.1),setTimeout(()=>{this.destroySound(e),this.soundMap.delete(t);const s=this.activeSounds.indexOf(e);s>-1&&this.activeSounds.splice(s,1)},150))}isSoundPlaying(t){return this.soundMap.has(t)}stopAll(){this.activeSounds.forEach(t=>{this.destroySound(t)}),this.activeSounds=[],this.soundMap.clear()}createSound(t){const e=a8(t);return e?e.create():new hs().toDestination()}triggerSound(t,e,s){const r=Array.isArray(t)?t:[t],a=s||f0();r.forEach(u=>{u instanceof za||u instanceof ls||u instanceof Na||u instanceof Ra||this.isSynthInstrument(u)&&u.triggerAttackRelease(e,"8n",a)})}destroySound(t){(Array.isArray(t)?t:[t]).forEach(s=>{try{s instanceof za||s instanceof ls||s instanceof Na||s instanceof Ra?s.stop():this.isSynthInstrument(s)&&(s.triggerRelease(),"onsilence"in s&&(s.onsilence=()=>{})),s.dispose()}catch(r){console.warn("Error disposing sound:",r)}})}isSynthInstrument(t){return"triggerAttackRelease"in t}initializeTransport(t=120){const e=Co();e.bpm.value=t,e.loop=!1}}class ks{static instance=null;updateInterval=null;isInitialized=!1;onBpmChangeCallback=null;currentState={startTime:null,bpm:120,isPlaying:!1,pausedPosition:0};constructor(){}static getInstance(){return ks.instance||(ks.instance=new ks),ks.instance}async initialize(t=120){if(this.isInitialized){console.log("TimingSync already initialized");return}console.log("Initializing TimingSync with timestamp-based sync"),this.currentState.bpm=t,this.isInitialized=!0;const e=Co();e.bpm.value=t,this.startSyncLoop(),console.log("TimingSync ready!")}syncFromRemote(t){if(!this.isInitialized)return;const e=Co(),s=this.currentState.bpm;if(this.currentState={...t},Math.abs(s-t.bpm)>.1&&this.onBpmChangeCallback&&this.onBpmChangeCallback(Math.round(t.bpm)),e.bpm.value=t.bpm,t.isPlaying&&t.startTime){const a=(Date.now()-t.startTime)/1e3;e.seconds=a,e.state!=="started"&&(console.log("[TimingSync] Starting Transport"),e.start())}else e.state==="started"&&(console.log("[TimingSync] Pausing Transport"),e.pause())}syncToTransport(){if(!this.isInitialized||!this.currentState.isPlaying||!this.currentState.startTime)return;const t=Co(),s=(Date.now()-this.currentState.startTime)/1e3,r=t.seconds,a=Math.abs(r-s);a>.05&&(console.log(`[TimingSync] Correcting drift: ${(a*1e3).toFixed(1)}ms`),t.seconds=s)}startSyncLoop(){const t=()=>{this.syncToTransport();const e=250,s=50,r=e+(Math.random()*s*2-s);this.updateInterval=window.setTimeout(t,r)};t()}setBPM(t){if(!this.isInitialized)return console.warn("TimingSync not initialized"),this.currentState;this.currentState.bpm=t;const e=Co();return e.bpm.value=t,console.log("Updated BPM:",t),{...this.currentState}}start(){if(!this.isInitialized)return console.warn("TimingSync not initialized"),this.currentState;const t=Co();return t.seconds=0,this.currentState.startTime=Date.now(),this.currentState.isPlaying=!0,this.currentState.pausedPosition=0,t.start(),console.log("Started playback from 0 at:",this.currentState.startTime),{...this.currentState}}resume(){if(!this.isInitialized)return console.warn("TimingSync not initialized"),this.currentState;if(this.currentState.isPlaying)return console.log("Already playing"),{...this.currentState};const t=Co(),e=this.currentState.pausedPosition;return t.seconds=e,this.currentState.startTime=Date.now()-e*1e3,this.currentState.isPlaying=!0,t.start(),console.log("Resumed playback from",e.toFixed(2),"s"),{...this.currentState}}pause(){return this.isInitialized?(this.currentState.startTime&&(this.currentState.pausedPosition=(Date.now()-this.currentState.startTime)/1e3),this.currentState.isPlaying=!1,this.currentState.startTime=null,Co().pause(),console.log("Paused at",this.currentState.pausedPosition.toFixed(2),"s"),{...this.currentState}):(console.warn("TimingSync not initialized"),this.currentState)}reset(){if(!this.isInitialized)return console.warn("TimingSync not initialized"),this.currentState;const t=Co();return t.seconds=0,this.currentState.pausedPosition=0,this.currentState.isPlaying&&(this.currentState.startTime=Date.now()),console.log("Reset position to 0"),{...this.currentState}}getState(){return{...this.currentState}}onBpmChange(t){this.onBpmChangeCallback=t}destroy(){this.updateInterval!==null&&(clearTimeout(this.updateInterval),this.updateInterval=null),this.isInitialized=!1,this.onBpmChangeCallback=null}}const c8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",u8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";let h8=yn.icon({iconUrl:c8,shadowUrl:u8,iconSize:[25,41],iconAnchor:[12,41]});yn.Marker.prototype.options.icon=h8;const f8=({connectedUsers:n,currentUserId:t,updateUserPosition:e,syncedShapes:s,addShape:r,updateShapeSound:a,updateShapeCoordinates:u,deleteShape:h,clearAllShapes:p,locationMode:m,transportState:_,updateTransportState:g})=>{const b=zt.useRef(null),x=zt.useRef(null),[S]=zt.useState([42.308606,-83.747036]),A=zt.useRef(null),[E,R]=zt.useState([]),z=zt.useRef(new Map),O=zt.useRef(new Map),[Q,N]=zt.useState({show:!1,position:{x:0,y:0},shapeId:null,soundId:null}),[j,Y]=zt.useState(!1),[G,Z]=zt.useState(!1),[F,$]=zt.useState(new Set);let{point:et}=xa;const k=zt.useRef(new Map),X=zt.useRef(!1),[W,P]=zt.useState(!1),U=zt.useRef(""),K=zt.useRef(new Map),D=zt.useRef(new Map),V=zt.useRef(new Set),I=zt.useRef(new Set),[q,at]=zt.useState(!1),[mt,vt]=zt.useState(null),gt=zt.useRef(0),Dt=500,Mt=zt.useRef(r),oe=zt.useRef(h),Me=zt.useRef(s);zt.useEffect(()=>{Mt.current=r,oe.current=h,Me.current=s},[r,h,s]),zt.useEffect(()=>{if(!W||q)return;(async()=>{try{const kt=ks.getInstance();console.log("Initializing TimingSync with timestamp-based sync..."),await kt.initialize(120),at(!0),console.log("TimingSync ready!"),await sr.getInstance().initializeTransport(120),_&&(kt.syncFromRemote(_),tn(_.bpm),console.log("Synced to existing transport state:",_)),kt.onBpmChange(Ot=>{console.log("BPM changed remotely to:",Ot),tn(Ot)})}catch(kt){console.error("Failed to initialize TimingSync:",kt),vt("Failed to initialize timing sync")}})()},[W,q,_]),zt.useEffect(()=>{if(!W||!q||!_)return;ks.getInstance().syncFromRemote(_),tn(_.bpm)},[_,W,q]);const[Ke,tn]=zt.useState(120),[Fn,Ai]=zt.useState(!1),[Nt,Xt]=zt.useState(!1),Ve=(Et,kt)=>{z.current.set(Et,kt)},Ee=Et=>{z.current.delete(Et),R(kt=>kt.filter(Yt=>Yt!==Et))},ue=Et=>{for(const[kt,Yt]of z.current.entries())if(Yt.id===Et)return kt;return null};zt.useEffect(()=>{if(!b.current||x.current)return;const Et=yn.map(b.current,{maxZoom:23}).setView(S,13);yn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:23,maxNativeZoom:19}).addTo(Et),yn.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:"Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community",maxZoom:23,maxNativeZoom:19}).addTo(Et);const kt=new yn.FeatureGroup;Et.addLayer(kt);const Yt=new yn.Control.Draw({draw:{polyline:!1,marker:!1},edit:{featureGroup:kt}});return Et.addControl(Yt),yn.control.scale().addTo(Et),x.current=Et,A.current=kt,Et.on(yn.Draw.Event.CREATED,function(Ot){const Pt=Ot.layer,Ut=Ot.layerType;if(Ut==="marker")return;kt.addLayer(Pt);const Wt=ms(Pt,Ut),Qt=Gs(Ut,Wt),te=Mt.current(Ut,Wt,null);K.current.set(te,Pt),D.current.set(Pt,te),V.current.add(te),I.current.add(te);const Ce={id:yn.stamp(Pt),type:Ut,coordinates:Wt,soundId:null};(Qt instanceof xa.Circle||Qt instanceof xa.Polygon)&&(Ve(Qt,Ce),R(It=>[...It,Qt])),Qt!==null&&(Pt.on("click",function(It){if(!x.current)return;const Ei=Et.mouseEventToContainerPoint(It.originalEvent),Ln=Me.current.find(ze=>ze.id===te)?.soundId||null;N({show:!0,position:{x:Ei.x,y:Ei.y},shapeId:te,soundId:Ln})}),console.log("Shape created and synced:",te,Ut))}),Et.on(yn.Draw.Event.DELETED,function(Ot){var Pt=Ot.layers;Pt.eachLayer(function(Ut){const Wt=D.current.get(Ut);Wt&&(oe.current(Wt),K.current.delete(Wt),D.current.delete(Ut),V.current.delete(Wt),I.current.delete(Wt),console.log("Shape deleted and synced:",Wt));const Qt=yn.stamp(Ut),te=ue(Qt);te&&Ee(te)})}),Et.on("click",function(Ot){Ot.originalEvent.target.closest(".leaflet-interactive")||N(Pt=>({...Pt,show:!1}))}),()=>{x.current&&(x.current.remove(),x.current=null)}},[]);const ke=(Et,kt,Yt)=>{const Ot=kt?"#3b82f6":"#10b981",Pt=kt?"#fbbf24":"white",Ut=kt&&Yt==="gps",Wt=`
            <div style="position: relative;">
                <div style="
                    width: 30px;
                    height: 30px;
                    border-radius: 50%;
                    background-color: ${Ot};
                    border: 3px solid ${Pt};
                    box-shadow: 0 2px 4px rgba(0,0,0,0.3);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-weight: bold;
                    color: white;
                    font-size: 14px;
                ">
                    ${Et.substring(0,1).toUpperCase()}
                </div>
                ${Ut?`
                <div style="
                    position: absolute;
                    top: -4px;
                    right: -4px;
                    width: 14px;
                    height: 14px;
                    background-color: #22c55e;
                    border-radius: 50%;
                    border: 2px solid white;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 8px;
                ">
                    
                </div>
                `:""}
                <div style="
                    position: absolute;
                    top: 35px;
                    left: 50%;
                    transform: translateX(-50%);
                    background-color: rgba(0, 0, 0, 0.75);
                    color: white;
                    padding: 2px 6px;
                    border-radius: 3px;
                    font-size: 11px;
                    white-space: nowrap;
                    pointer-events: none;
                ">
                    ${Et}${kt?" (you)":""}${Ut?" ":""}
                </div>
            </div>
        `;return yn.divIcon({html:Wt,className:"user-marker-icon",iconSize:[30,30],iconAnchor:[15,15]})};zt.useEffect(()=>{if(!x.current)return;const Et=x.current,kt=k.current,Yt=new Set;n.forEach(Ot=>{Yt.add(Ot.id);const Pt=Ot.id===t,Ut=Ot.name||"Anonymous",Wt=Pt&&m==="manual";let Qt=kt.get(Ot.id);if(Qt)Pt&&X.current||(Ot.position&&Qt.setLatLng([Ot.position.lat,Ot.position.lng]),Qt.setIcon(ke(Ut,Pt,m)),Pt&&(Wt&&!Qt.dragging?.enabled()?Qt.dragging?.enable():!Wt&&Qt.dragging?.enabled()&&Qt.dragging?.disable()));else{const te=Ot.position?[Ot.position.lat,Ot.position.lng]:[S[0],S[1]];Qt=yn.marker(te,{icon:ke(Ut,Pt,m),draggable:Wt}).addTo(Et),Pt&&(Qt.on("dragstart",()=>{X.current=!0}),Qt.on("dragend",Ce=>{X.current=!1;const It=Ce.target.getLatLng();e(It.lat,It.lng)}),!Ot.position&&m==="manual"&&e(te[0],te[1])),kt.set(Ot.id,Qt)}});for(const[Ot,Pt]of kt.entries())Yt.has(Ot)||(Et.removeLayer(Pt),kt.delete(Ot))},[n,t,e,S,m]),zt.useEffect(()=>{if(!x.current||!A.current)return;const Et=x.current,kt=A.current,Yt=new Set;s.forEach(Ot=>{if(Yt.add(Ot.id),I.current.has(Ot.id)&&(I.current.delete(Ot.id),console.log("Local shape confirmed by Automerge:",Ot.id)),V.current.has(Ot.id))return;let Pt=null;const Ut=Ot.coordinates;switch(Ot.type){case"circle":Pt=yn.circle(Ut.center,{radius:Ut.radius});break;case"rectangle":Pt=yn.rectangle(Ut);break;case"polygon":Pt=yn.polygon(Ut);break;case"circlemarker":Pt=yn.circleMarker(Ut.center,{radius:Ut.radius});break;default:console.log("Unknown shape type:",Ot.type);break}if(Pt){kt.addLayer(Pt),K.current.set(Ot.id,Pt),D.current.set(Pt,Ot.id),V.current.add(Ot.id);const Wt=Gs(Ot.type,Ut);if(Wt instanceof xa.Circle||Wt instanceof xa.Polygon){const te={id:yn.stamp(Pt),type:Ot.type,coordinates:Ut,soundId:Ot.soundId};Ve(Wt,te),R(Ce=>[...Ce,Wt])}const Qt=Ot.id;Pt.on("click",function(te){if(!x.current)return;const Ce=Et.mouseEventToContainerPoint(te.originalEvent),Ei=Me.current.find(gs=>gs.id===Qt)?.soundId||null;N({show:!0,position:{x:Ce.x,y:Ce.y},shapeId:Qt,soundId:Ei})}),console.log("Synced shape from another user:",Ot.id,Ot.type)}});for(const[Ot,Pt]of K.current.entries())if(!Yt.has(Ot)&&!I.current.has(Ot)){kt.removeLayer(Pt),K.current.delete(Ot),D.current.delete(Pt),V.current.delete(Ot);const Ut=yn.stamp(Pt),Wt=ue(Ut);Wt&&Ee(Wt),console.log("Removed shape (deleted by another user):",Ot)}},[s]);const un=()=>{const Et=n.find(Wt=>Wt.id===t);if(!Et?.position)return null;const{lat:kt,lng:Yt}=Et.position,Ot=S[0],Pt=S[1],Ut=_s(kt,Yt,Ot,Pt);return et(Ut.x,Ut.y)},ci=(()=>{const Et=n.find(kt=>kt.id===t);return Et?.position?`${Et.position.lat},${Et.position.lng}`:null})();zt.useEffect(()=>{const Et=Date.now();if(Et-gt.current<Dt){console.log("throttled...");return}if(gt.current=Et,!W||!_?.isPlaying){U.current!==""&&(sr.getInstance().stopAll(),U.current="");return}if(E.length===0||!ci)return;const kt=un();if(!kt)return;let Yt=new xa.PlanarSet;E.forEach(te=>{Yt.add(te)});const Ot=Yt.hit(kt),Pt=300,Ut=Yl({threshold:Pt}),Wt=[];Ot.forEach(te=>{const Ce=z.current.get(te);if(Ce){let It;for(const[Ln,ze]of K.current.entries())if(yn.stamp(ze)===Ce.id){It=Ln;break}const gs=s.find(Ln=>Ln.id===It)?.soundId;gs&&Wt.push({soundId:gs,note:"C4",volume:1})}}),Ut&&Ut.length>0&&Ut.forEach(({shape:te,dist:Ce})=>{if(Ot.includes(te))return;const It=z.current.get(te);if(It){let Ei;for(const[ze,Mn]of K.current.entries())if(yn.stamp(Mn)===It.id){Ei=ze;break}const Ln=s.find(ze=>ze.id===Ei)?.soundId;if(Ln){const ze=Math.max(0,1-Ce/Pt);Wt.push({soundId:Ln,note:"C4",volume:ze})}}});const Qt=Wt.map(te=>te.soundId).sort().join(",");if(Qt!==U.current){U.current=Qt;const te=sr.getInstance();Wt.length>0?(console.log("Updating sounds with volumes:",Wt),te.playMultipleWithVolume(Wt)):(console.log("Stopping all sounds"),te.stopAll())}else Wt.length>0&&sr.getInstance().playMultipleWithVolume(Wt)},[W,_?.isPlaying,ci,E,S,et,s]);const ms=function(Et,kt){switch(kt){case"marker":const Yt=Et.getLatLng();return[Yt.lat,Yt.lng];case"circle":const Ot=Et.getLatLng();return{center:[Ot.lat,Ot.lng],radius:Et.getRadius()};case"rectangle":case"polygon":return Et.getLatLngs()[0].map(Ut=>[Ut.lat,Ut.lng]);case"circlemarker":const Pt=Et.getLatLng();return{center:[Pt.lat,Pt.lng],radius:Et.getRadius()};default:return null}},hn=()=>{A.current&&(A.current.clearLayers(),R([]),z.current.clear(),O.current.clear(),K.current.clear(),D.current.clear(),V.current.clear(),I.current.clear(),N(Et=>({...Et,show:!1})),p())},Va=()=>{let Et=null;if(x.current){const Qt=x.current.getCenter(),te=x.current.getZoom();Et={center:[Qt.lat,Qt.lng],zoom:te}}const Yt={shapes:Me.current.map(Qt=>({id:Qt.id,type:Qt.type,coordinates:Qt.coordinates,soundId:Qt.soundId})),mapView:Et},Ot=JSON.stringify(Yt,null,2),Pt=new Blob([Ot],{type:"application/json"}),Ut=URL.createObjectURL(Pt),Wt=document.createElement("a");Wt.href=Ut,Wt.download="arrangement.json",document.body.appendChild(Wt),Wt.click(),document.body.removeChild(Wt),URL.revokeObjectURL(Ut)},Gs=(Et,kt)=>{const Yt=S[0],Ot=S[1];let{point:Pt,circle:Ut,Polygon:Wt}=xa;switch(Et){case"marker":{const Qt=_s(kt[0],kt[1],Yt,Ot);return Pt(Qt.x,Qt.y)}case"circle":{const Qt=_s(kt.center[0],kt.center[1],Yt,Ot);return Ut(Pt(Qt.x,Qt.y),kt.radius)}case"rectangle":{const Qt=[];kt.forEach(Ce=>{const It=_s(Ce[0],Ce[1],Yt,Ot);Qt.push(Pt(It.x,It.y))});const te=new Wt;return te.addFace(Qt),te}case"polygon":{const Qt=[];kt.forEach(Ce=>{const It=_s(Ce[0],Ce[1],Yt,Ot);Qt.push(Pt(It.x,It.y))});const te=new Wt;return te.addFace(Qt),te}case"circlemarker":{const Qt=_s(kt.center[0],kt.center[1],Yt,Ot);return Ut(Pt(Qt.x,Qt.y),kt.radius)}default:throw new Error(`Unknown shape type: ${Et}`)}},_s=(Et,kt,Yt,Ot)=>{const Ut=(Et-Yt)*Math.PI/180,Qt=(kt-Ot)*Math.PI/180*Math.cos(Yt*Math.PI/180)*6371e3,te=Ut*6371e3;return{x:Qt,y:te}},Yr=Et=>{if(!Et){console.log("no marker selected");return}if(E.length===0)return console.log("No shapes to check collisions"),[];let kt=new xa.PlanarSet;E.forEach(Ot=>{kt.add(Ot)});const Yt=kt.hit(Et);return Yt.length>0?Yt:null},Yl=({threshold:Et})=>{if(E.length===0)return console.log("No shapes to check collisions"),[];const kt=un();if(!kt)return console.log("No user position available"),[];const Yt=Yr(kt),Ot=E.filter(Ut=>!Yt?.includes(Ut)),Pt=[];return Ot.forEach(Ut=>{const Wt=kt.distanceTo(Ut)[0];Et==null?Pt.push({shape:Ut,dist:Wt}):Wt<=Et&&Pt.push({shape:Ut,dist:Wt})}),Pt.sort((Ut,Wt)=>Ut.dist-Wt.dist),Pt},ja=Et=>{const kt=Et.target.files?.[0];if(!kt)return;const Yt=new FileReader;Yt.onload=Ot=>{try{const Pt=JSON.parse(Ot.target?.result);if(Pt&&Array.isArray(Pt.shapes)){if(hn(),Pt.shapes.forEach(Ut=>{Ut.type!=="marker"&&Mt.current(Ut.type,Ut.coordinates,Ut.soundId)}),Pt.mapView&&x.current){const{center:Ut,zoom:Wt}=Pt.mapView;Array.isArray(Ut)&&Ut.length===2&&typeof Ut[0]=="number"&&typeof Ut[1]=="number"&&typeof Wt=="number"&&x.current.setView([Ut[0],Ut[1]],Wt)}console.log("Imported",Pt.shapes.length,"shapes to Automerge")}else Array.isArray(Pt)&&(console.log("Importing old format (no sound data)"),hn(),Pt.forEach(Ut=>{Ut.type&&Ut.coordinates&&Mt.current(Ut.type,Ut.coordinates,null)}))}catch(Pt){console.log(Pt),alert("Invalid JSON file")}},Yt.readAsText(kt),Et.target.value=""},Xl=Et=>{const kt=Q.shapeId;kt&&(a(kt,Et),console.log(`Synced sound "${Et}" to shape ${kt}`)),N(Yt=>({...Yt,soundId:Et}))},_u=()=>{N({show:!1,position:{x:0,y:0},shapeId:null,soundId:null})},dr=()=>{P(!0)},Cn=()=>{P(!1),U.current="",sr.getInstance().stopAll()},Xi=()=>{Y(!j)},ni=async Et=>{const kt=sr.getInstance();F.has(Et)?(console.log(`Stopping debug instrument: ${Et}`),kt.stopSound(Et),$(Yt=>{const Ot=new Set(Yt);return Ot.delete(Et),Ot})):(console.log(`Starting debug instrument: ${Et}`),await kt.startSound(Et,"C4"),$(Yt=>new Set(Yt).add(Et)))},Xr=()=>{Y(!1)},gu=()=>{Xt(!1)},yu=()=>{Ai(!1)},Qr=()=>{if(!q)return;const kt=ks.getInstance().start();g(kt),console.log("Transport started from 0, syncing to Automerge")},$r=()=>{if(!q)return;const kt=ks.getInstance().resume();g(kt),console.log("Transport resumed, syncing to Automerge")},Kr=()=>{if(!q)return;const kt=ks.getInstance().pause();g(kt),console.log("Transport paused, syncing to Automerge")},Zs=()=>{if(!q)return;const kt=ks.getInstance().reset();g(kt),console.log("Transport reset to 0, syncing to Automerge")},zo=Et=>{if(!q)return;const Yt=ks.getInstance().setBPM(Et);g(Yt),tn(Et),console.log("BPM changed, syncing to Automerge")};return Ct.jsxs("div",{style:{height:"100vh",width:"100vw",position:"relative"},children:[Ct.jsx("div",{ref:b,style:{height:"100%",width:"100%"}}),Ct.jsx("button",{onClick:()=>Xt(!Nt),style:{position:"absolute",top:"600px",left:"10px",backgroundColor:"#8b5cf6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:Nt?" Hide Zones":" Zone Management"}),Nt&&Ct.jsxs(Ct.Fragment,{children:[Ct.jsx("div",{onClick:gu,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backgroundColor:"transparent"}}),Ct.jsxs("div",{style:{position:"absolute",top:"540px",left:"10px",backgroundColor:"rgba(255, 255, 255, 0.95)",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",zIndex:1001,minWidth:"200px"},children:[Ct.jsx("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"12px",color:"#374151"},children:"Zone Management"}),Ct.jsx("button",{onClick:Va,style:{width:"100%",backgroundColor:"#3b82f6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",marginBottom:"8px",fontWeight:"500"},children:" Export Arrangement"}),Ct.jsxs("label",{htmlFor:"importArrangement",style:{display:"block",width:"100%",backgroundColor:"#10b981",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",marginBottom:"8px",textAlign:"center",fontWeight:"500",boxSizing:"border-box"},children:[" Import Arrangement",Ct.jsx("input",{id:"importArrangement",type:"file",accept:"application/json",style:{display:"none"},onChange:ja})]}),Ct.jsx("button",{onClick:hn,style:{width:"100%",backgroundColor:"#ef4444",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",fontWeight:"500"},children:" Clear Arrangement"})]})]}),Ct.jsx("button",{onClick:()=>Z(!G),style:{position:"absolute",bottom:"10px",right:"10px",backgroundColor:G?"#6b7280":"#8b5cf6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:G?"hide experimental":"experimental"}),G&&Ct.jsxs(Ct.Fragment,{children:[Ct.jsx("button",{onClick:Xi,style:{position:"absolute",bottom:"100px",right:"10px",backgroundColor:"#3b82f6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"sound bank"}),Ct.jsx("button",{onClick:()=>Yl({threshold:100}),style:{position:"absolute",bottom:"55px",right:"10px",backgroundColor:"#3b82f6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"get nearest (debug)"}),Ct.jsx("button",{onClick:Cn,style:{position:"absolute",bottom:"145px",right:"10px",backgroundColor:"#f63b3bff",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:"stop all audio"})]}),j&&Ct.jsxs(Ct.Fragment,{children:[Ct.jsx("div",{onClick:Xr,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backgroundColor:"transparent"}}),Ct.jsxs("div",{style:{position:"absolute",bottom:"145px",right:"10px",backgroundColor:"white",border:"1px solid #ccc",borderRadius:"4px",boxShadow:"0 4px 8px rgba(0,0,0,0.2)",zIndex:1001,maxHeight:"300px",overflowY:"auto",minWidth:"200px"},children:[Ct.jsx("div",{style:{padding:"8px",borderBottom:"1px solid #e5e5e5",fontWeight:"bold",color:"#111"},children:"Select sounds"}),_v.map(Et=>{const kt=F.has(Et.id);return Ct.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #f0f0f0",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"12px"},children:[Ct.jsxs("div",{style:{flex:1},children:[Ct.jsx("div",{style:{fontWeight:"500",color:"#111"},children:Et.name}),Ct.jsxs("div",{style:{fontSize:"12px",color:"#1f34b8ff"},children:["ID: ",Et.id]})]}),Ct.jsx("button",{onClick:()=>ni(Et.id),style:{padding:"6px 12px",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"600",backgroundColor:kt?"#ef4444":"#10b981",color:"white",transition:"all 0.2s",minWidth:"60px"},onMouseEnter:Yt=>{Yt.currentTarget.style.backgroundColor=kt?"#dc2626":"#059669"},onMouseLeave:Yt=>{Yt.currentTarget.style.backgroundColor=kt?"#ef4444":"#10b981"},children:kt?" Stop":" Play"})]},Et.id)})]})]}),Ct.jsx("button",{onClick:W?()=>Ai(!Fn):dr,style:{position:"absolute",top:"325px",left:"10px",backgroundColor:W?"#3b82f6":"#10b981",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:"pointer",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:W?Fn?" Hide Transport":" Transport Controls":"Enable Audio"}),Ct.jsx("button",{onClick:Cn,disabled:!W,style:{position:"absolute",top:"360px",left:"10px",backgroundColor:W?"#f63b3bff":"#6b7280",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:W?"pointer":"not-allowed",zIndex:1e3,boxShadow:"0 2px 4px rgba(0,0,0,0.2)",opacity:W?1:.6},children:"Disable Audio"}),Fn&&Ct.jsxs(Ct.Fragment,{children:[Ct.jsx("div",{onClick:yu,style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1e3,backgroundColor:"transparent"}}),Ct.jsxs("div",{style:{position:"absolute",top:"400px",left:"10px",backgroundColor:"rgba(255, 255, 255, 0.95)",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",zIndex:1001,minWidth:"200px"},children:[Ct.jsxs("div",{style:{fontSize:"12px",fontWeight:"bold",marginBottom:"8px",color:"#374151",display:"flex",alignItems:"center",gap:"6px"},children:[" Transport Controls",q?Ct.jsx("span",{style:{fontSize:"10px",backgroundColor:"#10b981",color:"white",padding:"2px 6px",borderRadius:"3px",fontWeight:"normal"},children:"Synced"}):mt?Ct.jsx("span",{style:{fontSize:"10px",backgroundColor:"#ef4444",color:"white",padding:"2px 6px",borderRadius:"3px",fontWeight:"normal"},children:"Error"}):Ct.jsx("span",{style:{fontSize:"10px",backgroundColor:"#f59e0b",color:"white",padding:"2px 6px",borderRadius:"3px",fontWeight:"normal"},children:"Connecting..."})]}),mt&&Ct.jsx("div",{style:{fontSize:"10px",color:"#ef4444",marginBottom:"8px",padding:"4px",backgroundColor:"#fee2e2",borderRadius:"3px"},children:mt}),Ct.jsx("button",{onClick:Qr,disabled:!q||_?.isPlaying,style:{width:"100%",backgroundColor:!q||_?.isPlaying?"#6b7280":"#10b981",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:!q||_?.isPlaying?"not-allowed":"pointer",marginBottom:"8px",fontWeight:"500",opacity:!q||_?.isPlaying?.6:1},children:" Start"}),Ct.jsx("button",{onClick:$r,disabled:!q||_?.isPlaying||!(_?.pausedPosition&&_.pausedPosition>0),style:{width:"100%",backgroundColor:!q||_?.isPlaying||!(_?.pausedPosition&&_.pausedPosition>0)?"#6b7280":"#3b82f6",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:!q||_?.isPlaying||!(_?.pausedPosition&&_.pausedPosition>0)?"not-allowed":"pointer",marginBottom:"8px",fontWeight:"500",opacity:!q||_?.isPlaying||!(_?.pausedPosition&&_.pausedPosition>0)?.6:1},children:" Resume"}),Ct.jsx("button",{onClick:Kr,disabled:!q||!_?.isPlaying,style:{width:"100%",backgroundColor:!q||!_?.isPlaying?"#6b7280":"#f59e0b",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:!q||!_?.isPlaying?"not-allowed":"pointer",marginBottom:"8px",fontWeight:"500",opacity:!q||!_?.isPlaying?.6:1},children:" Pause"}),Ct.jsx("button",{onClick:Zs,disabled:!q||!_?.isPlaying&&!(_?.pausedPosition&&_.pausedPosition>0),style:{width:"100%",backgroundColor:!q||!_?.isPlaying&&!(_?.pausedPosition&&_.pausedPosition>0)?"#6b7280":"#ef4444",color:"white",padding:"8px 12px",border:"none",borderRadius:"4px",fontSize:"14px",cursor:!q||!_?.isPlaying&&!(_?.pausedPosition&&_.pausedPosition>0)?"not-allowed":"pointer",marginBottom:"8px",fontWeight:"500",opacity:!q||!_?.isPlaying&&!(_?.pausedPosition&&_.pausedPosition>0)?.6:1},children:" Reset"}),Ct.jsxs("div",{style:{marginTop:"12px"},children:[Ct.jsxs("label",{style:{fontSize:"11px",fontWeight:"bold",color:"#374151",display:"block",marginBottom:"4px"},children:["BPM: ",Ke]}),Ct.jsx("input",{type:"range",min:"60",max:"180",value:Ke,onChange:Et=>zo(parseInt(Et.target.value)),disabled:!q,style:{width:"100%",cursor:q?"pointer":"not-allowed",opacity:q?1:.6}})]})]})]}),Ct.jsx(l8,{show:Q.show,shapeId:Q.shapeId,position:Q.position,onSoundSelect:Xl,onClose:_u,selectedsoundId:Q.soundId})]})},Sm=Symbol.for("_am_meta"),Wh=Symbol.for("_am_trace"),Fh=Symbol.for("_am_objectId"),gv=Symbol.for("_am_isProxy"),yv=Symbol.for("_am_clearCache"),d8=Symbol.for("_am_uint"),p8=Symbol.for("_am_int"),m8=Symbol.for("_am_f64"),FT=Symbol.for("_am_counter"),YT=Symbol.for("_am_immutableString");class ty{constructor(t){this.value=t||0,Reflect.defineProperty(this,FT,{value:!0})}valueOf(){return this.value}toString(){return this.valueOf().toString()}toJSON(){return this.value}increment(t){throw new Error("Counters should not be incremented outside of a change callback")}decrement(t){throw new Error("Counters should not be decremented outside of a change callback")}}class _8 extends ty{constructor(t,e,s,r,a){super(t),this.context=e,this.path=s,this.objectId=r,this.key=a}increment(t){return t=typeof t=="number"?t:1,this.context.increment(this.objectId,this.key,t),this.value+=t,this.value}decrement(t){return this.increment(typeof t=="number"?-t:-1)}}function g8(n,t,e,s,r){return new _8(n,t,e,s,r)}var XT;class QT{constructor(t){this[XT]=!0,this.val=t}toString(){return this.val}toJSON(){return this.val}}XT=YT;const y8=BigInt("9223372036854775807");function Mo(n){if(typeof n=="string"&&/^[0-9]+$/.test(n)&&(n=parseInt(n,10)),typeof n!="number")return n;if(n<0||isNaN(n)||n===1/0||n===-1/0)throw new RangeError("A list index must be positive, but you passed "+n);return n}function as(n,t){const{context:e,objectId:s,path:r}=n,a=e.getWithType(s,t);if(a===null)return;const u=a[0],h=a[1];switch(u){case void 0:return;case"map":return gf(e,h,[...r,t]);case"list":return Am(e,h,[...r,t]);case"text":return e.text(h);case"str":return new QT(h);case"uint":return h;case"int":return h;case"f64":return h;case"boolean":return h;case"null":return null;case"bytes":return h;case"timestamp":return h;case"counter":return g8(h,e,r,s,t);default:throw RangeError(`datatype ${u} unimplemented`)}}function Up(n,t,e){const s=typeof n;switch(s){case"object":if(n==null)return[null,"null"];if(n[d8])return[n.value,"uint"];if(n[p8])return[n.value,"int"];if(n[m8])return[n.value,"f64"];if(n[FT])return[n.value,"counter"];if(n instanceof Date)return[n.getTime(),"timestamp"];if($T(n))return[n.toString(),"str"];if(n instanceof Uint8Array)return[n,"bytes"];if(n instanceof Array)return[n,"list"];if(Object.prototype.toString.call(n)==="[object Object]")return[n,"map"];throw Tm(n,e)?new RangeError("Cannot create a reference to an existing document object"):new RangeError(`Cannot assign unknown object: ${n}`);case"boolean":return[n,"boolean"];case"bigint":return n>y8?[n,"uint"]:[n,"int"];case"number":return Number.isInteger(n)?[n,"int"]:[n,"f64"];case"string":return[n,"text"];case"undefined":throw new RangeError([`Cannot assign undefined value at ${mS(t)}, `,"because `undefined` is not a valid JSON data type. ","You might consider setting the property's value to `null`, ","or using `delete` to remove it altogether."].join(""));default:throw new RangeError([`Cannot assign ${s} value at ${mS(t)}. `,"All JSON primitive datatypes (object, array, string, number, boolean, null) ",`are supported in an Automerge document; ${s} values are not. `].join(""))}}function Tm(n,t){var e,s;return n instanceof Date?!1:!!(n&&((s=(e=n[Sm])===null||e===void 0?void 0:e.handle)===null||s===void 0?void 0:s.__wbg_ptr)===t.__wbg_ptr)}const v8={get(n,t){const{context:e,objectId:s,cache:r}=n;return t===Symbol.toStringTag?n[Symbol.toStringTag]:t===Fh?s:t===gv?!0:t===Wh?n.trace:t===Sm?{handle:e}:(r[t]||(r[t]=as(n,t)),r[t])},set(n,t,e){const{context:s,objectId:r,path:a}=n;if(n.cache={},Tm(e,s))throw new RangeError("Cannot create a reference to an existing document object");if(t===Wh)return n.trace=e,!0;if(t===yv)return!0;const[u,h]=Up(e,[...a,t],s);switch(h){case"list":{const p=s.putObject(r,t,[]),m=Am(s,p,[...a,t]);for(let _=0;_<u.length;_++)m[_]=u[_];break}case"text":{s.putObject(r,t,u);break}case"map":{const p=s.putObject(r,t,{}),m=gf(s,p,[...a,t]);for(const _ in u)m[_]=u[_];break}default:s.put(r,t,u,h)}return!0},deleteProperty(n,t){const{context:e,objectId:s}=n;return n.cache={},e.delete(s,t),!0},has(n,t){return this.get(n,t)!==void 0},getOwnPropertyDescriptor(n,t){const e=this.get(n,t);if(typeof e<"u")return{configurable:!0,enumerable:!0,value:e}},ownKeys(n){const{context:t,objectId:e}=n,s=t.keys(e);return[...new Set(s)]}},b8={get(n,t){const{context:e,objectId:s}=n;return t=Mo(t),t===Symbol.hasInstance?r=>Array.isArray(r):t===Symbol.toStringTag?n[Symbol.toStringTag]:t===Fh?s:t===gv?!0:t===Wh?n.trace:t===Sm?{handle:e}:t==="length"?e.length(s):typeof t=="number"?as(n,t):x8(n)[t]},set(n,t,e){const{context:s,objectId:r,path:a}=n;if(t=Mo(t),Tm(e,s))throw new RangeError("Cannot create a reference to an existing document object");if(t===yv)return!0;if(t===Wh)return n.trace=e,!0;if(typeof t=="string")throw new RangeError("list index must be a number");const[u,h]=Up(e,[...a,t],s);switch(h){case"list":{let p;t>=s.length(r)?p=s.insertObject(r,t,[]):p=s.putObject(r,t,[]),Am(s,p,[...a,t]).splice(0,0,...u);break}case"text":{t>=s.length(r)?s.insertObject(r,t,u):s.putObject(r,t,u);break}case"map":{let p;t>=s.length(r)?p=s.insertObject(r,t,{}):p=s.putObject(r,t,{});const m=gf(s,p,[...a,t]);for(const _ in u)m[_]=u[_];break}default:t>=s.length(r)?s.insert(r,t,u,h):s.put(r,t,u,h)}return!0},deleteProperty(n,t){const{context:e,objectId:s}=n;t=Mo(t);const r=e.get(s,t);if(r!=null&&r[0]=="counter")throw new TypeError("Unsupported operation: deleting a counter from a list");return e.delete(s,t),!0},has(n,t){const{context:e,objectId:s}=n;return t=Mo(t),typeof t=="number"?t<e.length(s):t==="length"},getOwnPropertyDescriptor(n,t){const{context:e,objectId:s}=n;return t==="length"?{writable:!0,value:e.length(s)}:t===Fh?{configurable:!1,enumerable:!1,value:s}:(t=Mo(t),{configurable:!0,enumerable:!0,value:as(n,t)})},getPrototypeOf(n){return Object.getPrototypeOf(n)},ownKeys(){const n=[];return n.push("length"),n}};function gf(n,t,e){const s={context:n,objectId:t,path:e||[],cache:{}},r={};return Object.assign(r,s),new Proxy(r,v8)}function Am(n,t,e){const s={context:n,objectId:t,path:e||[],cache:{}},r=[];return Object.assign(r,s),new Proxy(r,b8)}function w8(n){return gf(n,"_root",[])}function x8(n){const{context:t,objectId:e,path:s}=n;return{at(a){return as(n,a)},deleteAt(a,u){return typeof u=="number"?t.splice(e,a,u):t.delete(e,a),this},fill(a,u,h){const[p,m]=Up(a,[...s,u],t),_=t.length(e);u=Mo(u||0),h=Mo(h||_);for(let g=u;g<Math.min(h,_);g++)m==="list"||m==="map"||m==="text"?t.putObject(e,g,p):t.put(e,g,p,m);return this},indexOf(a,u=0){const h=t.length(e);for(let p=u;p<h;p++){const m=t.getWithType(e,p);if(!m)continue;const[_,g]=m;if(!["map","list","text"].includes(_)){if(g===a)return p;continue}if(_==="text"&&typeof a=="string"&&a===as(n,p)||a[Fh]===g)return p}return-1},insertAt(a,...u){return this.splice(a,0,...u),this},pop(){const a=t.length(e);if(a==0)return;const u=as(n,a-1);return t.delete(e,a-1),u},push(...a){const u=t.length(e);return this.splice(u,0,...a),t.length(e)},shift(){if(t.length(e)==0)return;const a=as(n,0);return t.delete(e,0),a},splice(a,u,...h){a=Mo(a),typeof u!="number"&&(u=t.length(e)-a),u=Mo(u);for(const _ of h)if(Tm(_,t))throw new RangeError("Cannot create a reference to an existing document object");const p=[];for(let _=0;_<u;_++){const g=as(n,a);g!==void 0&&p.push(g),t.delete(e,a)}const m=h.map((_,g)=>{try{return Up(_,[...s],t)}catch(b){throw b instanceof RangeError?new RangeError(`${b.message} (at index ${g} in the input)`):b}});for(const[_,g]of m){switch(g){case"list":{const b=t.insertObject(e,a,[]);Am(t,b,[...s,a]).splice(0,0,..._);break}case"text":{t.insertObject(e,a,_);break}case"map":{const b=t.insertObject(e,a,{}),x=gf(t,b,[...s,a]);for(const S in _)x[S]=_[S];break}default:t.insert(e,a,_,g)}a+=1}return p},unshift(...a){return this.splice(0,0,...a),t.length(e)},entries(){let a=0;return{next:()=>{const h=as(n,a);return h===void 0?{value:void 0,done:!0}:{value:[a++,h],done:!1}},[Symbol.iterator](){return this}}},keys(){let a=0;const u=t.length(e);return{next:()=>a<u?{value:a++,done:!1}:{value:void 0,done:!0},[Symbol.iterator](){return this}}},values(){let a=0;return{next:()=>{const h=as(n,a++);return h===void 0?{value:void 0,done:!0}:{value:h,done:!1}},[Symbol.iterator](){return this}}},toArray(){const a=[];let u;do u=as(n,a.length),u!==void 0&&a.push(u);while(u!==void 0);return a},map(a){return this.toArray().map(a)},toString(){return this.toArray().toString()},toLocaleString(){return this.toArray().toLocaleString()},forEach(a){return this.toArray().forEach(a)},concat(a){return this.toArray().concat(a)},every(a){return this.toArray().every(a)},filter(a){return this.toArray().filter(a)},find(a){let u=0;for(const h of this){if(a(h,u))return h;u+=1}},findIndex(a){let u=0;for(const h of this){if(a(h,u))return u;u+=1}return-1},includes(a){return this.find(u=>u===a)!==void 0},join(a){return this.toArray().join(a)},reduce(a,u){return this.toArray().reduce(a,u)},reduceRight(a,u){return this.toArray().reduceRight(a,u)},lastIndexOf(a,u=1/0){return this.toArray().lastIndexOf(a,u)},slice(a,u){return this.toArray().slice(a,u)},some(a){let u=0;for(const h of this){if(a(h,u))return!0;u+=1}return!1},[Symbol.iterator]:function*(){let a=0,u=as(n,a);for(;u!==void 0;)yield u,a+=1,u=as(n,a)}}}function mS(n){const t=n.map(e=>{if(typeof e=="number")return e.toString();if(typeof e=="string")return e.replace(/~/g,"~0").replace(/\//g,"~1")});return n.length===0?"":"/"+t.join("/")}function $T(n){return typeof n=="object"&&n!==null&&Object.prototype.hasOwnProperty.call(n,YT)}typeof FinalizationRegistry>"u"||new FinalizationRegistry(n=>KT.__wbg_automerge_free(n>>>0,1));typeof FinalizationRegistry>"u"||new FinalizationRegistry(n=>KT.__wbg_syncstate_free(n>>>0,1));let S8=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});S8.decode();const d0=new TextEncoder;"encodeInto"in d0||(d0.encodeInto=function(n,t){const e=d0.encode(n);return t.set(e),{read:n.length,written:e.length}});let KT,T8=[];function A8(n){for(const t in n)Si[t]=n[t];for(const t of T8)t()}const Si={create(n){throw new RangeError("Automerge.use() not called")},load(n,t){throw new RangeError("Automerge.use() not called (load)")},encodeChange(n){throw new RangeError("Automerge.use() not called (encodeChange)")},decodeChange(n){throw new RangeError("Automerge.use() not called (decodeChange)")},initSyncState(){throw new RangeError("Automerge.use() not called (initSyncState)")},encodeSyncMessage(n){throw new RangeError("Automerge.use() not called (encodeSyncMessage)")},decodeSyncMessage(n){throw new RangeError("Automerge.use() not called (decodeSyncMessage)")},encodeSyncState(n){throw new RangeError("Automerge.use() not called (encodeSyncState)")},decodeSyncState(n){throw new RangeError("Automerge.use() not called (decodeSyncState)")},exportSyncState(n){throw new RangeError("Automerge.use() not called (exportSyncState)")},importSyncState(n){throw new RangeError("Automerge.use() not called (importSyncState)")},readBundle(n){throw new RangeError("Automerge.use() not called (readBundle)")},wasmReleaseInfo(){throw new RangeError("Automerge.use() not called (wasmReleaseInfo)")}},E8="b8dfc4845c50633f9d850a5d4e2a4219d518f8ad";function dn(n,t=!0){if(typeof n!="object")throw new RangeError("must be the document root");const e=Reflect.get(n,Sm);if(e===void 0||e==null||t&&eA(n)!=="_root")throw new RangeError("must be the document root");return e}function JT(n){Reflect.set(n,yv,!0)}function tA(n){return Reflect.get(n,Wh)}function eA(n){return typeof n!="object"||n===null?null:Reflect.get(n,Fh)}function mu(n){return!!Reflect.get(n,gv)}var C8=function(n,t){var e={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&t.indexOf(s)<0&&(e[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(e[s[r]]=n[s[r]]);return e};function vv(n){return typeof n=="object"?n:{actor:n}}function L8(n,t,e){if(typeof e=="string"){if(/^-?[0-9]+@[0-9a-zA-Z]+$|^[se]$/.test(e))return n.handle.getCursorPosition(t,e);throw new RangeError("index must be a number or cursor")}else return e}function zs(n){const t=vv(n),e=!!t.freeze,s=t.patchCallback,r=t.actor,a=Si.create({actor:r});return a.enableFreeze(!!t.freeze),rA(a),a.materialize("/",void 0,{handle:a,heads:void 0,freeze:e,patchCallback:s})}function M8(n,t){const e=dn(n),s=e.handle;return e.handle.materialize("/",t,Object.assign(Object.assign({},e),{handle:s,heads:t}))}function Bp(n,t){const e=dn(n),s=e.heads,r=vv(t),a=e.handle.fork(r.actor,s);a.updateDiffCursor();const{heads:u}=e,h=C8(e,["heads"]);return h.patchCallback=r.patchCallback,a.applyPatches(n,Object.assign(Object.assign({},h),{handle:a}))}function _S(n,t){return Yh(zs(t),"from",{},e=>Object.assign(e,n)).newDoc}function k8(n,t,e){if(typeof t=="function")return Yh(n,"change",{},t).newDoc;if(typeof e=="function")return typeof t=="string"&&(t={message:t}),Yh(n,"change",t,e).newDoc;throw RangeError("Invalid args for change")}function O8(n,t,e,s){if(typeof e=="function")return Yh(n,"changeAt",{},e,t);if(typeof s=="function")return typeof e=="string"&&(e={message:e}),Yh(n,"changeAt",e,s,t);throw RangeError("Invalid args for changeAt")}function yf(n,t,e,s){if(e==null)return n;const r=dn(n),a=Object.assign(Object.assign({},r),{heads:void 0}),{value:u,patches:h}=r.handle.applyAndReturnPatches(n,a);if(h.length>0){s?.(h,{before:n,after:u,source:t});const p=dn(u);p.mostRecentPatch={before:dn(n).heads,after:p.handle.getHeads(),patches:h}}return r.heads=e,u}function Yh(n,t,e,s,r){if(typeof s!="function")throw new RangeError("invalid change function");const a=dn(n);if(n===void 0||a===void 0)throw new RangeError("must be the document root");if(a.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(mu(n))throw new RangeError("Calls to Automerge.change cannot be nested");let u=a.handle.getHeads();r&&R8(r,u)&&(r=void 0),r&&(a.handle.isolate(r),u=r),"time"in e||(e.time=Math.floor(Date.now()/1e3));try{a.heads=u;const h=w8(a.handle);if(s(h),a.handle.pendingOps()===0)return a.heads=void 0,r&&a.handle.integrate(),{newDoc:n,newHeads:null};{const p=a.handle.commit(e.message,e.time);return a.handle.integrate(),{newDoc:yf(n,t,u,e.patchCallback||a.patchCallback),newHeads:p!=null?[p]:null}}}catch(h){throw a.heads=void 0,a.handle.rollback(),h}}function gS(n,t){t===void 0&&(t={}),typeof t=="string"&&(t={message:t}),"time"in t||(t.time=Math.floor(Date.now()/1e3));const e=dn(n);if(e.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(mu(n))throw new RangeError("Calls to Automerge.change cannot be nested");const s=e.handle.getHeads();return e.handle.emptyChange(t.message,t.time),yf(n,"emptyChange",s)}function D8(n,t){const e=vv(t);if(e.patchCallback)return bv(zs(e),n);const s=e.actor,r=e.patchCallback,a=e.unchecked||!1,u=e.allowMissingChanges||!1,h=e.convertImmutableStringsToText||!1,p=Si.load(n,{actor:s,unchecked:a,allowMissingDeps:u,convertImmutableStringsToText:h});return p.enableFreeze(!!e.freeze),rA(p),p.materialize("/",void 0,{handle:p,heads:void 0,patchCallback:r})}function bv(n,t,e){e||(e={});const s=dn(n);if(s.heads)throw new RangeError("Attempting to change an out of date document - set at: "+tA(n));if(mu(n))throw new RangeError("Calls to Automerge.change cannot be nested");const r=s.handle.getHeads();return s.handle.loadIncremental(t),yf(n,"loadIncremental",r,e.patchCallback||s.patchCallback)}function nA(n){return dn(n).handle.save()}function yS(n,t){const e=dn(n);if(e.heads)throw new RangeError("Attempting to change an out of date document - set at: "+tA(n));const s=e.handle.getHeads(),r=dn(t),a=e.handle.getChangesAdded(r.handle);return e.handle.applyChanges(a),yf(n,"merge",s,e.patchCallback)}function p0(n,t,e){vS(t,"before heads"),vS(e,"after heads");const s=dn(n);return s.mostRecentPatch&&ey(s.mostRecentPatch.before,t)&&ey(s.mostRecentPatch.after,e)?s.mostRecentPatch.patches:s.handle.diff(t,e)}function R8(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;e++)if(n[e]!==t[e])return!1;return!0}function vS(n,t){if(!Array.isArray(n))throw new Error(`invalid ${t}: must be an array`)}function ey(n,t){if(!bS(n)||!bS(t))return n===t;const e=Object.keys(n).sort(),s=Object.keys(t).sort();if(e.length!==s.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==s[r]||!ey(n[e[r]],t[s[r]]))return!1;return!0}function iA(n){const t=Si.importSyncState(n),e=Si.encodeSyncState(t);return t.free(),e}function sA(n){const t=Si.decodeSyncState(n),e=Si.exportSyncState(t);return t.free(),e}function I8(n,t){const e=dn(n),s=Si.importSyncState(t),r=e.handle.generateSyncMessage(s);return[Si.exportSyncState(s),r]}function N8(n,t,e,s){const r=Si.importSyncState(t);s||(s={});const a=dn(n);if(a.heads)throw new RangeError("Attempting to change an outdated document.  Use Automerge.clone() if you wish to make a writable copy.");if(mu(n))throw new RangeError("Calls to Automerge.change cannot be nested");const u=a.handle.getHeads();a.handle.receiveSyncMessage(r,e);const h=Si.exportSyncState(r);return[yf(n,"receiveSyncMessage",u,s.patchCallback||a.patchCallback),h,null]}function P8(){return Si.exportSyncState(Si.initSyncState())}function z8(n){return Si.decodeSyncMessage(n)}function Ur(n){const t=dn(n);return t.heads||t.handle.getHeads()}function bS(n){return typeof n=="object"&&n!==null}function U8(n,t){return dn(n).handle.saveSince(t)}function rA(n){n.registerDatatype("counter",t=>new ty(t),t=>{if(t instanceof ty)return t.value}),n.registerDatatype("str",t=>new QT(t),t=>{if($T(t))return t.val})}function B8(n){return dn(n).handle.topoHistoryTraversal()}function H8(n,t){return dn(n).handle.getDecodedChangeByHash(t)}function wv(n){var t,e,s,r,a,u;const p=dn(n).handle.stats(),m=V8();return Object.assign(Object.assign({},p),{cargoPackageName:(e=(t=m.wasm)===null||t===void 0?void 0:t.cargoPackageName)!==null&&e!==void 0?e:"unknown",cargoPackageVersion:(r=(s=m.wasm)===null||s===void 0?void 0:s.cargoPackageVersion)!==null&&r!==void 0?r:"unknown",rustcVersion:(u=(a=m.wasm)===null||a===void 0?void 0:a.rustcVersion)!==null&&u!==void 0?u:"unknown"})}function V8(){let n=null;try{n=Si.wasmReleaseInfo()}catch{}return{js:{gitHead:E8},wasm:n}}function oA(n,t,e,s,r){const a=Em(n,t,"splice");if(!mu(n))throw new RangeError("object cannot be modified outside of a change block");const u=dn(n,!1);JT(n),e=L8(u,a,e);try{return u.handle.splice(a,e,s,r)}catch(h){throw new RangeError(`Cannot splice: ${h}`)}}function j8(n,t,e){const s=Em(n,t,"updateText");if(!mu(n))throw new RangeError("object cannot be modified outside of a change block");const r=dn(n,!1);JT(n);try{return r.handle.updateText(s,e)}catch(a){throw new RangeError(`Cannot updateText: ${a}`)}}function wS(n,t,e,s){const r=Em(n,t,"getCursor"),a=dn(n,!1);try{return a.handle.getCursor(r,e,a.heads,s)}catch(u){throw new RangeError(`Cannot getCursor: ${u}`)}}function xS(n,t,e){const s=Em(n,t,"getCursorPosition"),r=dn(n,!1);try{return r.handle.getCursorPosition(s,e,r.heads)}catch(a){throw new RangeError(`Cannot getCursorPosition: ${a}`)}}function Em(n,t,e){t=t.slice();const s=eA(n);if(!s)throw new RangeError(`invalid object for ${e}`);return t.unshift(s),t.join("/")}var Qd={exports:{}},m0,SS;function q8(){if(SS)return m0;SS=1;var n=1e3,t=n*60,e=t*60,s=e*24,r=s*7,a=s*365.25;m0=function(_,g){g=g||{};var b=typeof _;if(b==="string"&&_.length>0)return u(_);if(b==="number"&&isFinite(_))return g.long?p(_):h(_);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(_))};function u(_){if(_=String(_),!(_.length>100)){var g=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(_);if(g){var b=parseFloat(g[1]),x=(g[2]||"ms").toLowerCase();switch(x){case"years":case"year":case"yrs":case"yr":case"y":return b*a;case"weeks":case"week":case"w":return b*r;case"days":case"day":case"d":return b*s;case"hours":case"hour":case"hrs":case"hr":case"h":return b*e;case"minutes":case"minute":case"mins":case"min":case"m":return b*t;case"seconds":case"second":case"secs":case"sec":case"s":return b*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function h(_){var g=Math.abs(_);return g>=s?Math.round(_/s)+"d":g>=e?Math.round(_/e)+"h":g>=t?Math.round(_/t)+"m":g>=n?Math.round(_/n)+"s":_+"ms"}function p(_){var g=Math.abs(_);return g>=s?m(_,g,s,"day"):g>=e?m(_,g,e,"hour"):g>=t?m(_,g,t,"minute"):g>=n?m(_,g,n,"second"):_+" ms"}function m(_,g,b,x){var S=g>=b*1.5;return Math.round(_/b)+" "+x+(S?"s":"")}return m0}var _0,TS;function G8(){if(TS)return _0;TS=1;function n(t){s.debug=s,s.default=s,s.coerce=m,s.disable=h,s.enable=a,s.enabled=p,s.humanize=q8(),s.destroy=_,Object.keys(t).forEach(g=>{s[g]=t[g]}),s.names=[],s.skips=[],s.formatters={};function e(g){let b=0;for(let x=0;x<g.length;x++)b=(b<<5)-b+g.charCodeAt(x),b|=0;return s.colors[Math.abs(b)%s.colors.length]}s.selectColor=e;function s(g){let b,x=null,S,A;function E(...R){if(!E.enabled)return;const z=E,O=Number(new Date),Q=O-(b||O);z.diff=Q,z.prev=b,z.curr=O,b=O,R[0]=s.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let N=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(Y,G)=>{if(Y==="%%")return"%";N++;const Z=s.formatters[G];if(typeof Z=="function"){const F=R[N];Y=Z.call(z,F),R.splice(N,1),N--}return Y}),s.formatArgs.call(z,R),(z.log||s.log).apply(z,R)}return E.namespace=g,E.useColors=s.useColors(),E.color=s.selectColor(g),E.extend=r,E.destroy=s.destroy,Object.defineProperty(E,"enabled",{enumerable:!0,configurable:!1,get:()=>x!==null?x:(S!==s.namespaces&&(S=s.namespaces,A=s.enabled(g)),A),set:R=>{x=R}}),typeof s.init=="function"&&s.init(E),E}function r(g,b){const x=s(this.namespace+(typeof b>"u"?":":b)+g);return x.log=this.log,x}function a(g){s.save(g),s.namespaces=g,s.names=[],s.skips=[];const b=(typeof g=="string"?g:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const x of b)x[0]==="-"?s.skips.push(x.slice(1)):s.names.push(x)}function u(g,b){let x=0,S=0,A=-1,E=0;for(;x<g.length;)if(S<b.length&&(b[S]===g[x]||b[S]==="*"))b[S]==="*"?(A=S,E=x,S++):(x++,S++);else if(A!==-1)S=A+1,E++,x=E;else return!1;for(;S<b.length&&b[S]==="*";)S++;return S===b.length}function h(){const g=[...s.names,...s.skips.map(b=>"-"+b)].join(",");return s.enable(""),g}function p(g){for(const b of s.skips)if(u(g,b))return!1;for(const b of s.names)if(u(g,b))return!0;return!1}function m(g){return g instanceof Error?g.stack||g.message:g}function _(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s.enable(s.load()),s}return _0=n,_0}var AS;function Z8(){return AS||(AS=1,(function(n,t){var e={};t.formatArgs=r,t.save=a,t.load=u,t.useColors=s,t.storage=h(),t.destroy=(()=>{let m=!1;return()=>{m||(m=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function s(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let m;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(m=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(m[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(m){if(m[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+m[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const _="color: "+this.color;m.splice(1,0,_,"color: inherit");let g=0,b=0;m[0].replace(/%[a-zA-Z%]/g,x=>{x!=="%%"&&(g++,x==="%c"&&(b=g))}),m.splice(b,0,_)}t.log=console.debug||console.log||(()=>{});function a(m){try{m?t.storage.setItem("debug",m):t.storage.removeItem("debug")}catch{}}function u(){let m;try{m=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!m&&typeof process<"u"&&"env"in process&&(m=e.DEBUG),m}function h(){try{return localStorage}catch{}}n.exports=G8()(t);const{formatters:p}=n.exports;p.j=function(m){try{return JSON.stringify(m)}catch(_){return"[UnexpectedJSONParseError]: "+_.message}}})(Qd,Qd.exports)),Qd.exports}var W8=Z8();const Po=tf(W8);var g0={exports:{}},ES;function F8(){return ES||(ES=1,(function(n){var t=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function r(p,m,_){this.fn=p,this.context=m,this.once=_||!1}function a(p,m,_,g,b){if(typeof _!="function")throw new TypeError("The listener must be a function");var x=new r(_,g||p,b),S=e?e+m:m;return p._events[S]?p._events[S].fn?p._events[S]=[p._events[S],x]:p._events[S].push(x):(p._events[S]=x,p._eventsCount++),p}function u(p,m){--p._eventsCount===0?p._events=new s:delete p._events[m]}function h(){this._events=new s,this._eventsCount=0}h.prototype.eventNames=function(){var m=[],_,g;if(this._eventsCount===0)return m;for(g in _=this._events)t.call(_,g)&&m.push(e?g.slice(1):g);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(_)):m},h.prototype.listeners=function(m){var _=e?e+m:m,g=this._events[_];if(!g)return[];if(g.fn)return[g.fn];for(var b=0,x=g.length,S=new Array(x);b<x;b++)S[b]=g[b].fn;return S},h.prototype.listenerCount=function(m){var _=e?e+m:m,g=this._events[_];return g?g.fn?1:g.length:0},h.prototype.emit=function(m,_,g,b,x,S){var A=e?e+m:m;if(!this._events[A])return!1;var E=this._events[A],R=arguments.length,z,O;if(E.fn){switch(E.once&&this.removeListener(m,E.fn,void 0,!0),R){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,_),!0;case 3:return E.fn.call(E.context,_,g),!0;case 4:return E.fn.call(E.context,_,g,b),!0;case 5:return E.fn.call(E.context,_,g,b,x),!0;case 6:return E.fn.call(E.context,_,g,b,x,S),!0}for(O=1,z=new Array(R-1);O<R;O++)z[O-1]=arguments[O];E.fn.apply(E.context,z)}else{var Q=E.length,N;for(O=0;O<Q;O++)switch(E[O].once&&this.removeListener(m,E[O].fn,void 0,!0),R){case 1:E[O].fn.call(E[O].context);break;case 2:E[O].fn.call(E[O].context,_);break;case 3:E[O].fn.call(E[O].context,_,g);break;case 4:E[O].fn.call(E[O].context,_,g,b);break;default:if(!z)for(N=1,z=new Array(R-1);N<R;N++)z[N-1]=arguments[N];E[O].fn.apply(E[O].context,z)}}return!0},h.prototype.on=function(m,_,g){return a(this,m,_,g,!1)},h.prototype.once=function(m,_,g){return a(this,m,_,g,!0)},h.prototype.removeListener=function(m,_,g,b){var x=e?e+m:m;if(!this._events[x])return this;if(!_)return u(this,x),this;var S=this._events[x];if(S.fn)S.fn===_&&(!b||S.once)&&(!g||S.context===g)&&u(this,x);else{for(var A=0,E=[],R=S.length;A<R;A++)(S[A].fn!==_||b&&!S[A].once||g&&S[A].context!==g)&&E.push(S[A]);E.length?this._events[x]=E.length===1?E[0]:E:u(this,x)}return this},h.prototype.removeAllListeners=function(m){var _;return m?(_=e?e+m:m,this._events[_]&&u(this,_)):(this._events=new s,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=e,h.EventEmitter=h,n.exports=h})(g0)),g0.exports}var Y8=F8();const Wl=tf(Y8);function X8(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}function Q8(){const n=X8();if(n.__xstate__)return n.__xstate__}const $8=n=>{if(typeof window>"u")return;const t=Q8();t&&t.register(n)};class CS{constructor(t){this._process=t,this._active=!1,this._current=null,this._last=null}start(){this._active=!0,this.flush()}clear(){this._current&&(this._current.next=null,this._last=this._current)}enqueue(t){const e={value:t,next:null};if(this._current){this._last.next=e,this._last=e;return}this._current=e,this._last=e,this._active&&this.flush()}flush(){for(;this._current;){const t=this._current;this._process(t.value),this._current=t.next}this._last=null}}const aA=".",K8="",lA="",J8="#",t5="*",cA="xstate.init",e5="xstate.error",ny="xstate.stop";function n5(n,t){return{type:`xstate.after.${n}.${t}`}}function iy(n,t){return{type:`xstate.done.state.${n}`,output:t}}function i5(n,t){return{type:`xstate.done.actor.${n}`,output:t,actorId:n}}function uA(n,t){return{type:`xstate.error.actor.${n}`,error:t,actorId:n}}function hA(n){return{type:cA,input:n}}function Or(n){setTimeout(()=>{throw n})}const s5=typeof Symbol=="function"&&Symbol.observable||"@@observable";function fA(n,t){const e=LS(n),s=LS(t);return typeof s=="string"?typeof e=="string"?s===e:!1:typeof e=="string"?e in s:Object.keys(e).every(r=>r in s?fA(e[r],s[r]):!1)}function xv(n){if(pA(n))return n;const t=[];let e="";for(let s=0;s<n.length;s++){switch(n.charCodeAt(s)){case 92:e+=n[s+1],s++;continue;case 46:t.push(e),e="";continue}e+=n[s]}return t.push(e),t}function LS(n){if(U5(n))return n.value;if(typeof n!="string")return n;const t=xv(n);return r5(t)}function r5(n){if(n.length===1)return n[0];const t={};let e=t;for(let s=0;s<n.length-1;s++)if(s===n.length-2)e[n[s]]=n[s+1];else{const r=e;e={},r[n[s]]=e}return t}function MS(n,t){const e={},s=Object.keys(n);for(let r=0;r<s.length;r++){const a=s[r];e[a]=t(n[a],a,n,r)}return e}function dA(n){return pA(n)?n:[n]}function ko(n){return n===void 0?[]:dA(n)}function sy(n,t,e,s){return typeof n=="function"?n({context:t,event:e,self:s}):n}function pA(n){return Array.isArray(n)}function o5(n){return n.type.startsWith("xstate.error.actor")}function Wc(n){return dA(n).map(t=>typeof t>"u"||typeof t=="string"?{target:t}:t)}function mA(n){if(!(n===void 0||n===K8))return ko(n)}function ry(n,t,e){const s=typeof n=="object",r=s?n:void 0;return{next:(s?n.next:n)?.bind(r),error:(s?n.error:t)?.bind(r),complete:(s?n.complete:e)?.bind(r)}}function kS(n,t){return`${t}.${n}`}function Sv(n,t){const e=t.match(/^xstate\.invoke\.(\d+)\.(.*)/);if(!e)return n.implementations.actors[t];const[,s,r]=e,u=n.getStateNodeById(r).config.invoke;return(Array.isArray(u)?u[s]:u).src}function _A(n,t){if(t===n||t===t5)return!0;if(!t.endsWith(".*"))return!1;const e=t.split("."),s=n.split(".");for(let r=0;r<e.length;r++){const a=e[r],u=s[r];if(a==="*")return r===e.length-1;if(a!==u)return!1}return!0}function OS(n,t){return`${n.sessionId}.${t}`}let a5=0;function l5(n,t){const e=new Map,s=new Map,r=new WeakMap,a=new Set,u={},{clock:h,logger:p}=t,m={schedule:(b,x,S,A,E=Math.random().toString(36).slice(2))=>{const R={source:b,target:x,event:S,delay:A,id:E,startedAt:Date.now()},z=OS(b,E);g._snapshot._scheduledEvents[z]=R;const O=h.setTimeout(()=>{delete u[z],delete g._snapshot._scheduledEvents[z],g._relay(b,x,S)},A);u[z]=O},cancel:(b,x)=>{const S=OS(b,x),A=u[S];delete u[S],delete g._snapshot._scheduledEvents[S],A!==void 0&&h.clearTimeout(A)},cancelAll:b=>{for(const x in g._snapshot._scheduledEvents){const S=g._snapshot._scheduledEvents[x];S.source===b&&m.cancel(b,S.id)}}},_=b=>{if(!a.size)return;const x={...b,rootId:n.sessionId};a.forEach(S=>S.next?.(x))},g={_snapshot:{_scheduledEvents:(t?.snapshot&&t.snapshot.scheduler)??{}},_bookId:()=>`x:${a5++}`,_register:(b,x)=>(e.set(b,x),b),_unregister:b=>{e.delete(b.sessionId);const x=r.get(b);x!==void 0&&(s.delete(x),r.delete(b))},get:b=>s.get(b),getAll:()=>Object.fromEntries(s.entries()),_set:(b,x)=>{const S=s.get(b);if(S&&S!==x)throw new Error(`Actor with system ID '${b}' already exists.`);s.set(b,x),r.set(x,b)},inspect:b=>{const x=ry(b);return a.add(x),{unsubscribe(){a.delete(x)}}},_sendInspectionEvent:_,_relay:(b,x,S)=>{g._sendInspectionEvent({type:"@xstate.event",sourceRef:b,actorRef:x,event:S}),x._send(S)},scheduler:m,getSnapshot:()=>({_scheduledEvents:{...g._snapshot._scheduledEvents}}),start:()=>{const b=g._snapshot._scheduledEvents;g._snapshot._scheduledEvents={};for(const x in b){const{source:S,target:A,event:E,delay:R,id:z}=b[x];m.schedule(S,A,E,R,z)}},_clock:h,_logger:p};return g}let y0=!1;const Tv=1;let Ui=(function(n){return n[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped",n})({});const c5={clock:{setTimeout:(n,t)=>setTimeout(n,t),clearTimeout:n=>clearTimeout(n)},logger:console.log.bind(console),devTools:!1};class u5{constructor(t,e){this.logic=t,this._snapshot=void 0,this.clock=void 0,this.options=void 0,this.id=void 0,this.mailbox=new CS(this._process.bind(this)),this.observers=new Set,this.eventListeners=new Map,this.logger=void 0,this._processingStatus=Ui.NotStarted,this._parent=void 0,this._syncSnapshot=void 0,this.ref=void 0,this._actorScope=void 0,this.systemId=void 0,this.sessionId=void 0,this.system=void 0,this._doneEvent=void 0,this.src=void 0,this._deferred=[];const s={...c5,...e},{clock:r,logger:a,parent:u,syncSnapshot:h,id:p,systemId:m,inspect:_}=s;this.system=u?u.system:l5(this,{clock:r,logger:a}),_&&!u&&this.system.inspect(ry(_)),this.sessionId=this.system._bookId(),this.id=p??this.sessionId,this.logger=e?.logger??this.system._logger,this.clock=e?.clock??this.system._clock,this._parent=u,this._syncSnapshot=h,this.options=s,this.src=s.src??t,this.ref=this,this._actorScope={self:this,id:this.id,sessionId:this.sessionId,logger:this.logger,defer:g=>{this._deferred.push(g)},system:this.system,stopChild:g=>{if(g._parent!==this)throw new Error(`Cannot stop child actor ${g.id} of ${this.id} because it is not a child`);g._stop()},emit:g=>{const b=this.eventListeners.get(g.type),x=this.eventListeners.get("*");if(!b&&!x)return;const S=[...b?b.values():[],...x?x.values():[]];for(const A of S)try{A(g)}catch(E){Or(E)}},actionExecutor:g=>{const b=()=>{if(this._actorScope.system._sendInspectionEvent({type:"@xstate.action",actorRef:this,action:{type:g.type,params:g.params}}),!g.exec)return;const x=y0;try{y0=!0,g.exec(g.info,g.params)}finally{y0=x}};this._processingStatus===Ui.Running?b():this._deferred.push(b)}},this.send=this.send.bind(this),this.system._sendInspectionEvent({type:"@xstate.actor",actorRef:this}),m&&(this.systemId=m,this.system._set(m,this)),this._initState(e?.snapshot??e?.state),m&&this._snapshot.status!=="active"&&this.system._unregister(this)}_initState(t){try{this._snapshot=t?this.logic.restoreSnapshot?this.logic.restoreSnapshot(t,this._actorScope):t:this.logic.getInitialSnapshot(this._actorScope,this.options?.input)}catch(e){this._snapshot={status:"error",output:void 0,error:e}}}update(t,e){this._snapshot=t;let s;for(;s=this._deferred.shift();)try{s()}catch(r){this._deferred.length=0,this._snapshot={...t,status:"error",error:r}}switch(this._snapshot.status){case"active":for(const r of this.observers)try{r.next?.(t)}catch(a){Or(a)}break;case"done":for(const r of this.observers)try{r.next?.(t)}catch(a){Or(a)}this._stopProcedure(),this._complete(),this._doneEvent=i5(this.id,this._snapshot.output),this._parent&&this.system._relay(this,this._parent,this._doneEvent);break;case"error":this._error(this._snapshot.error);break}this.system._sendInspectionEvent({type:"@xstate.snapshot",actorRef:this,event:e,snapshot:t})}subscribe(t,e,s){const r=ry(t,e,s);if(this._processingStatus!==Ui.Stopped)this.observers.add(r);else switch(this._snapshot.status){case"done":try{r.complete?.()}catch(a){Or(a)}break;case"error":{const a=this._snapshot.error;if(!r.error)Or(a);else try{r.error(a)}catch(u){Or(u)}break}}return{unsubscribe:()=>{this.observers.delete(r)}}}on(t,e){let s=this.eventListeners.get(t);s||(s=new Set,this.eventListeners.set(t,s));const r=e.bind(void 0);return s.add(r),{unsubscribe:()=>{s.delete(r)}}}start(){if(this._processingStatus===Ui.Running)return this;this._syncSnapshot&&this.subscribe({next:s=>{s.status==="active"&&this.system._relay(this,this._parent,{type:`xstate.snapshot.${this.id}`,snapshot:s})},error:()=>{}}),this.system._register(this.sessionId,this),this.systemId&&this.system._set(this.systemId,this),this._processingStatus=Ui.Running;const t=hA(this.options.input);switch(this.system._sendInspectionEvent({type:"@xstate.event",sourceRef:this._parent,actorRef:this,event:t}),this._snapshot.status){case"done":return this.update(this._snapshot,t),this;case"error":return this._error(this._snapshot.error),this}if(this._parent||this.system.start(),this.logic.start)try{this.logic.start(this._snapshot,this._actorScope)}catch(s){return this._snapshot={...this._snapshot,status:"error",error:s},this._error(s),this}return this.update(this._snapshot,t),this.options.devTools&&this.attachDevTools(),this.mailbox.start(),this}_process(t){let e,s;try{e=this.logic.transition(this._snapshot,t,this._actorScope)}catch(r){s={err:r}}if(s){const{err:r}=s;this._snapshot={...this._snapshot,status:"error",error:r},this._error(r);return}this.update(e,t),t.type===ny&&(this._stopProcedure(),this._complete())}_stop(){return this._processingStatus===Ui.Stopped?this:(this.mailbox.clear(),this._processingStatus===Ui.NotStarted?(this._processingStatus=Ui.Stopped,this):(this.mailbox.enqueue({type:ny}),this))}stop(){if(this._parent)throw new Error("A non-root actor cannot be stopped directly.");return this._stop()}_complete(){for(const t of this.observers)try{t.complete?.()}catch(e){Or(e)}this.observers.clear(),this.eventListeners.clear()}_reportError(t){if(!this.observers.size){this._parent||Or(t),this.eventListeners.clear();return}let e=!1;for(const s of this.observers){const r=s.error;e||=!r;try{r?.(t)}catch(a){Or(a)}}this.observers.clear(),this.eventListeners.clear(),e&&Or(t)}_error(t){this._stopProcedure(),this._reportError(t),this._parent&&this.system._relay(this,this._parent,uA(this.id,t))}_stopProcedure(){return this._processingStatus!==Ui.Running?this:(this.system.scheduler.cancelAll(this),this.mailbox.clear(),this.mailbox=new CS(this._process.bind(this)),this._processingStatus=Ui.Stopped,this.system._unregister(this),this)}_send(t){this._processingStatus!==Ui.Stopped&&this.mailbox.enqueue(t)}send(t){this.system._relay(void 0,this,t)}attachDevTools(){const{devTools:t}=this.options;t&&(typeof t=="function"?t:$8)(this)}toJSON(){return{xstate$$type:Tv,id:this.id}}getPersistedSnapshot(t){return this.logic.getPersistedSnapshot(this._snapshot,t)}[s5](){return this}getSnapshot(){return this._snapshot}}function Xh(n,...[t]){return new u5(n,t)}function h5(n,t,e,s,{sendId:r}){const a=typeof r=="function"?r(e,s):r;return[t,{sendId:a},void 0]}function f5(n,t){n.defer(()=>{n.system.scheduler.cancel(n.self,t.sendId)})}function Av(n){function t(e,s){}return t.type="xstate.cancel",t.sendId=n,t.resolve=h5,t.execute=f5,t}function d5(n,t,e,s,{id:r,systemId:a,src:u,input:h,syncSnapshot:p}){const m=typeof u=="string"?Sv(t.machine,u):u,_=typeof r=="function"?r(e):r;let g,b;return m&&(b=typeof h=="function"?h({context:t.context,event:e.event,self:n.self}):h,g=Xh(m,{id:_,src:u,parent:n.self,syncSnapshot:p,systemId:a,input:b})),[Hl(t,{children:{...t.children,[_]:g}}),{id:r,systemId:a,actorRef:g,src:u,input:b},void 0]}function p5(n,{actorRef:t}){t&&n.defer(()=>{t._processingStatus!==Ui.Stopped&&t.start()})}function Ev(...[n,{id:t,systemId:e,input:s,syncSnapshot:r=!1}={}]){function a(u,h){}return a.type="xstate.spawnChild",a.id=t,a.systemId=e,a.src=n,a.input=s,a.syncSnapshot=r,a.resolve=d5,a.execute=p5,a}function m5(n,t,e,s,{actorRef:r}){const a=typeof r=="function"?r(e,s):r,u=typeof a=="string"?t.children[a]:a;let h=t.children;return u&&(h={...h},delete h[u.id]),[Hl(t,{children:h}),u,void 0]}function gA(n,t){const e=t.getSnapshot();if(e&&"children"in e)for(const s of Object.values(e.children))gA(n,s);n.system._unregister(t)}function _5(n,t){if(t){if(gA(n,t),t._processingStatus!==Ui.Running){n.stopChild(t);return}n.defer(()=>{n.stopChild(t)})}}function Cm(n){function t(e,s){}return t.type="xstate.stopChild",t.actorRef=n,t.resolve=m5,t.execute=_5,t}function Lm(n,t,e,s){const{machine:r}=s,a=typeof n=="function",u=a?n:r.implementations.guards[typeof n=="string"?n:n.type];if(!a&&!u)throw new Error(`Guard '${typeof n=="string"?n:n.type}' is not implemented.'.`);if(typeof u!="function")return Lm(u,t,e,s);const h={context:t,event:e},p=a||typeof n=="string"?void 0:"params"in n?typeof n.params=="function"?n.params({context:t,event:e}):n.params:void 0;return"check"in u?u.check(s,h,u):u(h,p)}function Cv(n){return n.type==="atomic"||n.type==="final"}function su(n){return Object.values(n.states).filter(t=>t.type!=="history")}function vf(n,t){const e=[];if(t===n)return e;let s=n.parent;for(;s&&s!==t;)e.push(s),s=s.parent;return e}function Hp(n){const t=new Set(n),e=vA(t);for(const s of t)if(s.type==="compound"&&(!e.get(s)||!e.get(s).length))DS(s).forEach(r=>t.add(r));else if(s.type==="parallel"){for(const r of su(s))if(r.type!=="history"&&!t.has(r)){const a=DS(r);for(const u of a)t.add(u)}}for(const s of t){let r=s.parent;for(;r;)t.add(r),r=r.parent}return t}function yA(n,t){const e=t.get(n);if(!e)return{};if(n.type==="compound"){const r=e[0];if(r){if(Cv(r))return r.key}else return{}}const s={};for(const r of e)s[r.key]=yA(r,t);return s}function vA(n){const t=new Map;for(const e of n)t.has(e)||t.set(e,[]),e.parent&&(t.has(e.parent)||t.set(e.parent,[]),t.get(e.parent).push(e));return t}function bA(n,t){const e=Hp(t);return yA(n,vA(e))}function Lv(n,t){return t.type==="compound"?su(t).some(e=>e.type==="final"&&n.has(e)):t.type==="parallel"?su(t).every(e=>Lv(n,e)):t.type==="final"}const Mm=n=>n[0]===J8;function g5(n,t){return n.transitions.get(t)||[...n.transitions.keys()].filter(s=>_A(t,s)).sort((s,r)=>r.length-s.length).flatMap(s=>n.transitions.get(s))}function y5(n){const t=n.config.after;if(!t)return[];const e=r=>{const a=n5(r,n.id),u=a.type;return n.entry.push(Ov(a,{id:u,delay:r})),n.exit.push(Av(u)),u};return Object.keys(t).flatMap(r=>{const a=t[r],u=typeof a=="string"?{target:a}:a,h=Number.isNaN(+r)?r:+r,p=e(h);return ko(u).map(m=>({...m,event:p,delay:h}))}).map(r=>{const{delay:a}=r;return{...Ma(n,r.event,r),delay:a}})}function Ma(n,t,e){const s=mA(e.target),r=e.reenter??!1,a=x5(n,s),u={...e,actions:ko(e.actions),guard:e.guard,target:a,source:n,reenter:r,eventType:t,toJSON:()=>({...u,source:`#${n.id}`,target:a?a.map(h=>`#${h.id}`):void 0})};return u}function v5(n){const t=new Map;if(n.config.on)for(const e of Object.keys(n.config.on)){if(e===lA)throw new Error('Null events ("") cannot be specified as a transition key. Use `always: { ... }` instead.');const s=n.config.on[e];t.set(e,Wc(s).map(r=>Ma(n,e,r)))}if(n.config.onDone){const e=`xstate.done.state.${n.id}`;t.set(e,Wc(n.config.onDone).map(s=>Ma(n,e,s)))}for(const e of n.invoke){if(e.onDone){const s=`xstate.done.actor.${e.id}`;t.set(s,Wc(e.onDone).map(r=>Ma(n,s,r)))}if(e.onError){const s=`xstate.error.actor.${e.id}`;t.set(s,Wc(e.onError).map(r=>Ma(n,s,r)))}if(e.onSnapshot){const s=`xstate.snapshot.${e.id}`;t.set(s,Wc(e.onSnapshot).map(r=>Ma(n,s,r)))}}for(const e of n.after){let s=t.get(e.eventType);s||(s=[],t.set(e.eventType,s)),s.push(e)}return t}function b5(n){const t=[],e=s=>{Object.values(s).forEach(r=>{if(r.config.route&&r.config.id){const a=r.config.id,u=r.config.route.guard,h=(m,_)=>m.event.to!==`#${a}`?!1:u&&typeof u=="function"?u(m,_):!0,p={...r.config.route,guard:h,target:`#${a}`};t.push(Ma(n,"xstate.route",p))}r.states&&e(r.states)})};e(n.states),t.length>0&&n.transitions.set("xstate.route",t)}function w5(n,t){const e=typeof t=="string"?n.states[t]:t?n.states[t.target]:void 0;if(!e&&t)throw new Error(`Initial state node "${t}" not found on parent state node #${n.id}`);const s={source:n,actions:!t||typeof t=="string"?[]:ko(t.actions),eventType:null,reenter:!1,target:e?[e]:[],toJSON:()=>({...s,source:`#${n.id}`,target:e?[`#${e.id}`]:[]})};return s}function x5(n,t){if(t!==void 0)return t.map(e=>{if(typeof e!="string")return e;if(Mm(e))return n.machine.getStateNodeById(e);const s=e[0]===aA;if(s&&!n.parent)return Vp(n,e.slice(1));const r=s?n.key+e:e;if(n.parent)try{return Vp(n.parent,r)}catch(a){throw new Error(`Invalid transition definition for state node '${n.id}':
${a.message}`)}else throw new Error(`Invalid target: "${e}" is not a valid target from the root node. Did you mean ".${e}"?`)})}function wA(n){const t=mA(n.config.target);return t?{target:t.map(e=>typeof e=="string"?Vp(n.parent,e):e)}:n.parent.initial}function Ol(n){return n.type==="history"}function DS(n){const t=xA(n);for(const e of t)for(const s of vf(e,n))t.add(s);return t}function xA(n){const t=new Set;function e(s){if(!t.has(s)){if(t.add(s),s.type==="compound")e(s.initial.target[0]);else if(s.type==="parallel")for(const r of su(s))e(r)}}return e(n),t}function ru(n,t){if(Mm(t))return n.machine.getStateNodeById(t);if(!n.states)throw new Error(`Unable to retrieve child state '${t}' from '${n.id}'; no child states exist.`);const e=n.states[t];if(!e)throw new Error(`Child state '${t}' does not exist on '${n.id}'`);return e}function Vp(n,t){if(typeof t=="string"&&Mm(t))try{return n.machine.getStateNodeById(t)}catch{}const e=xv(t).slice();let s=n;for(;e.length;){const r=e.shift();if(!r.length)break;s=ru(s,r)}return s}function jp(n,t){if(typeof t=="string"){const r=n.states[t];if(!r)throw new Error(`State '${t}' does not exist on '${n.id}'`);return[n,r]}const e=Object.keys(t),s=e.map(r=>ru(n,r)).filter(Boolean);return[n.machine.root,n].concat(s,e.reduce((r,a)=>{const u=ru(n,a);if(!u)return r;const h=jp(u,t[a]);return r.concat(h)},[]))}function S5(n,t,e,s){const a=ru(n,t).next(e,s);return!a||!a.length?n.next(e,s):a}function T5(n,t,e,s){const r=Object.keys(t),a=ru(n,r[0]),u=Mv(a,t[r[0]],e,s);return!u||!u.length?n.next(e,s):u}function A5(n,t,e,s){const r=[];for(const a of Object.keys(t)){const u=t[a];if(!u)continue;const h=ru(n,a),p=Mv(h,u,e,s);p&&r.push(...p)}return r.length?r:n.next(e,s)}function Mv(n,t,e,s){return typeof t=="string"?S5(n,t,e,s):Object.keys(t).length===1?T5(n,t,e,s):A5(n,t,e,s)}function E5(n){return Object.keys(n.states).map(t=>n.states[t]).filter(t=>t.type==="history")}function Ua(n,t){let e=n;for(;e.parent&&e.parent!==t;)e=e.parent;return e.parent===t}function C5(n,t){const e=new Set(n),s=new Set(t);for(const r of e)if(s.has(r))return!0;for(const r of s)if(e.has(r))return!0;return!1}function SA(n,t,e){const s=new Set;for(const r of n){let a=!1;const u=new Set;for(const h of s)if(C5(oy([r],t,e),oy([h],t,e)))if(Ua(r.source,h.source))u.add(h);else{a=!0;break}if(!a){for(const h of u)s.delete(h);s.add(r)}}return Array.from(s)}function L5(n){const[t,...e]=n;for(const s of vf(t,void 0))if(e.every(r=>Ua(r,s)))return s}function kv(n,t){if(!n.target)return[];const e=new Set;for(const s of n.target)if(Ol(s))if(t[s.id])for(const r of t[s.id])e.add(r);else for(const r of kv(wA(s),t))e.add(r);else e.add(s);return[...e]}function TA(n,t){const e=kv(n,t);if(!e)return;if(!n.reenter&&e.every(r=>r===n.source||Ua(r,n.source)))return n.source;const s=L5(e.concat(n.source));if(s)return s;if(!n.reenter)return n.source.machine.root}function oy(n,t,e){const s=new Set;for(const r of n)if(r.target?.length){const a=TA(r,e);r.reenter&&r.source===a&&s.add(a);for(const u of t)Ua(u,a)&&s.add(u)}return[...s]}function M5(n,t){if(n.length!==t.size)return!1;for(const e of n)if(!t.has(e))return!1;return!0}function k5(n,t,e,s,r){return ay([{target:[...xA(n)],source:n,reenter:!0,actions:[],eventType:null,toJSON:null}],t,e,s,!0,r)}function ay(n,t,e,s,r,a){const u=[];if(!n.length)return[t,u];const h=e.actionExecutor;e.actionExecutor=p=>{u.push(p),h(p)};try{const p=new Set(t._nodes);let m=t.historyValue;const _=SA(n,p,m);let g=t;r||([g,m]=I5(g,s,e,_,p,m,a,e.actionExecutor)),g=ou(g,s,e,_.flatMap(x=>x.actions),a,void 0),g=D5(g,s,e,_,p,a,m,r);const b=[...p];g.status==="done"&&(g=ou(g,s,e,b.sort((x,S)=>S.order-x.order).flatMap(x=>x.exit),a,void 0));try{return m===t.historyValue&&M5(t._nodes,p)?[g,u]:[Hl(g,{_nodes:b,historyValue:m}),u]}catch(x){throw x}}finally{e.actionExecutor=h}}function O5(n,t,e,s,r){if(s.output===void 0)return;const a=iy(r.id,r.output!==void 0&&r.parent?sy(r.output,n.context,t,e.self):void 0);return sy(s.output,n.context,a,e.self)}function D5(n,t,e,s,r,a,u,h){let p=n;const m=new Set,_=new Set;R5(s,u,_,m),h&&_.add(n.machine.root);const g=new Set;for(const b of[...m].sort((x,S)=>x.order-S.order)){r.add(b);const x=[];x.push(...b.entry);for(const S of b.invoke)x.push(Ev(S.src,{...S,syncSnapshot:!!S.onSnapshot}));if(_.has(b)){const S=b.initial.actions;x.push(...S)}if(p=ou(p,t,e,x,a,b.invoke.map(S=>S.id)),b.type==="final"){const S=b.parent;let A=S?.type==="parallel"?S:S?.parent,E=A||b;for(S?.type==="compound"&&a.push(iy(S.id,b.output!==void 0?sy(b.output,p.context,t,e.self):void 0));A?.type==="parallel"&&!g.has(A)&&Lv(r,A);)g.add(A),a.push(iy(A.id)),E=A,A=A.parent;if(A)continue;p=Hl(p,{status:"done",output:O5(p,t,e,p.machine.root,E)})}}return p}function R5(n,t,e,s){for(const r of n){const a=TA(r,t);for(const h of r.target||[])!Ol(h)&&(r.source!==h||r.source!==a||r.reenter)&&(s.add(h),e.add(h)),$c(h,t,e,s);const u=kv(r,t);for(const h of u){const p=vf(h,a);a?.type==="parallel"&&p.push(a),AA(s,t,e,p,!r.source.parent&&r.reenter?void 0:a)}}}function $c(n,t,e,s){if(Ol(n))if(t[n.id]){const r=t[n.id];for(const a of r)s.add(a),$c(a,t,e,s);for(const a of r)v0(a,n.parent,s,t,e)}else{const r=wA(n);for(const a of r.target)s.add(a),r===n.parent?.initial&&e.add(n.parent),$c(a,t,e,s);for(const a of r.target)v0(a,n.parent,s,t,e)}else if(n.type==="compound"){const[r]=n.initial.target;Ol(r)||(s.add(r),e.add(r)),$c(r,t,e,s),v0(r,n,s,t,e)}else if(n.type==="parallel")for(const r of su(n).filter(a=>!Ol(a)))[...s].some(a=>Ua(a,r))||(Ol(r)||(s.add(r),e.add(r)),$c(r,t,e,s))}function AA(n,t,e,s,r){for(const a of s)if((!r||Ua(a,r))&&n.add(a),a.type==="parallel")for(const u of su(a).filter(h=>!Ol(h)))[...n].some(h=>Ua(h,u))||(n.add(u),$c(u,t,e,n))}function v0(n,t,e,s,r){AA(e,s,r,vf(n,t))}function I5(n,t,e,s,r,a,u,h){let p=n;const m=oy(s,r,a);m.sort((g,b)=>b.order-g.order);let _;for(const g of m)for(const b of E5(g)){let x;b.history==="deep"?x=S=>Cv(S)&&Ua(S,g):x=S=>S.parent===g,_??={...a},_[b.id]=Array.from(r).filter(x)}for(const g of m)p=ou(p,t,e,[...g.exit,...g.invoke.map(b=>Cm(b.id))],u,void 0),r.delete(g);return[p,_||a]}function N5(n,t){return n.implementations.actions[t]}function EA(n,t,e,s,r,a){const{machine:u}=n;let h=n;for(const p of s){const m=typeof p=="function",_=m?p:N5(u,typeof p=="string"?p:p.type),g={context:h.context,event:t,self:e.self,system:e.system},b=m||typeof p=="string"?void 0:"params"in p?typeof p.params=="function"?p.params({context:h.context,event:t}):p.params:void 0;if(!_||!("resolve"in _)){e.actionExecutor({type:typeof p=="string"?p:typeof p=="object"?p.type:p.name||"(anonymous)",info:g,params:b,exec:_});continue}const x=_,[S,A,E]=x.resolve(e,h,g,b,_,r);h=S,"retryResolve"in x&&a?.push([x,A]),"execute"in x&&e.actionExecutor({type:x.type,info:g,params:A,exec:x.execute.bind(null,e,A)}),E&&(h=EA(h,t,e,E,r,a))}return h}function ou(n,t,e,s,r,a){const u=a?[]:void 0,h=EA(n,t,e,s,{internalQueue:r,deferredActorIds:a},u);return u?.forEach(([p,m])=>{p.retryResolve(e,h,m)}),h}function b0(n,t,e,s){let r=n;const a=[];function u(m,_,g){e.system._sendInspectionEvent({type:"@xstate.microstep",actorRef:e.self,event:_,snapshot:m[0],_transitions:g}),a.push(m)}if(t.type===ny)return r=Hl(RS(r,t,e),{status:"stopped"}),u([r,[]],t,[]),{snapshot:r,microsteps:a};let h=t;if(h.type!==cA){const m=h,_=o5(m),g=IS(m,r);if(_&&!g.length)return r=Hl(n,{status:"error",error:m.error}),u([r,[]],m,[]),{snapshot:r,microsteps:a};const b=ay(g,n,e,h,!1,s);r=b[0],u(b,m,g)}let p=!0;for(;r.status==="active";){let m=p?P5(r,h):[];const _=m.length?r:void 0;if(!m.length){if(!s.length)break;h=s.shift(),m=IS(h,r)}const g=ay(m,r,e,h,!1,s);r=g[0],p=r!==_,u(g,h,m)}return r.status!=="active"&&RS(r,h,e),{snapshot:r,microsteps:a}}function RS(n,t,e){return ou(n,t,e,Object.values(n.children).map(s=>Cm(s)),[],void 0)}function IS(n,t){return t.machine.getTransitionData(t,n)}function P5(n,t){const e=new Set,s=n._nodes.filter(Cv);for(const r of s)t:for(const a of[r].concat(vf(r,void 0)))if(a.always){for(const u of a.always)if(u.guard===void 0||Lm(u.guard,n.context,t,n)){e.add(u);break t}}return SA(Array.from(e),new Set(n._nodes),n.historyValue)}function z5(n,t){const e=Hp(jp(n,t));return bA(n,[...e])}function U5(n){return!!n&&typeof n=="object"&&"machine"in n&&"value"in n}const B5=function(t){return fA(t,this.value)},H5=function(t){return this.tags.has(t)},V5=function(t){const e=this.machine.getTransitionData(this,t);return!!e?.length&&e.some(s=>s.target!==void 0||s.actions.length)},j5=function(){const{_nodes:t,tags:e,machine:s,getMeta:r,toJSON:a,can:u,hasTag:h,matches:p,...m}=this;return{...m,tags:Array.from(e)}},q5=function(){return this._nodes.reduce((t,e)=>(e.meta!==void 0&&(t[e.id]=e.meta),t),{})};function dp(n,t){return{status:n.status,output:n.output,error:n.error,machine:t,context:n.context,_nodes:n._nodes,value:bA(t.root,n._nodes),tags:new Set(n._nodes.flatMap(e=>e.tags)),children:n.children,historyValue:n.historyValue||{},matches:B5,hasTag:H5,can:V5,getMeta:q5,toJSON:j5}}function Hl(n,t={}){return dp({...n,...t},n.machine)}function G5(n){if(typeof n!="object"||n===null)return{};const t={};for(const e in n){const s=n[e];Array.isArray(s)&&(t[e]=s.map(r=>({id:r.id})))}return t}function Z5(n,t){const{_nodes:e,tags:s,machine:r,children:a,context:u,can:h,hasTag:p,matches:m,getMeta:_,toJSON:g,...b}=n,x={};for(const A in a){const E=a[A];x[A]={snapshot:E.getPersistedSnapshot(t),src:E.src,systemId:E.systemId,syncSnapshot:E._syncSnapshot}}return{...b,context:CA(u),children:x,historyValue:G5(b.historyValue)}}function CA(n){let t;for(const e in n){const s=n[e];if(s&&typeof s=="object")if("sessionId"in s&&"send"in s&&"ref"in s)t??=Array.isArray(n)?n.slice():{...n},t[e]={xstate$$type:Tv,id:s.id};else{const r=CA(s);r!==s&&(t??=Array.isArray(n)?n.slice():{...n},t[e]=r)}}return t??n}function W5(n,t,e,s,{event:r,id:a,delay:u},{internalQueue:h}){const p=t.machine.implementations.delays;if(typeof r=="string")throw new Error(`Only event objects may be used with raise; use raise({ type: "${r}" }) instead`);const m=typeof r=="function"?r(e,s):r;let _;if(typeof u=="string"){const g=p&&p[u];_=typeof g=="function"?g(e,s):g}else _=typeof u=="function"?u(e,s):u;return typeof _!="number"&&h.push(m),[t,{event:m,id:a,delay:_},void 0]}function F5(n,t){const{event:e,delay:s,id:r}=t;if(typeof s=="number"){n.defer(()=>{const a=n.self;n.system.scheduler.schedule(a,a,e,s,r)});return}}function Ov(n,t){function e(s,r){}return e.type="xstate.raise",e.event=n,e.id=t?.id,e.delay=t?.delay,e.resolve=W5,e.execute=F5,e}function Y5(n,{machine:t,context:e},s,r){const a=(u,h)=>{if(typeof u=="string"){const p=Sv(t,u);if(!p)throw new Error(`Actor logic '${u}' not implemented in machine '${t.id}'`);const m=Xh(p,{id:h?.id,parent:n.self,syncSnapshot:h?.syncSnapshot,input:typeof h?.input=="function"?h.input({context:e,event:s,self:n.self}):h?.input,src:u,systemId:h?.systemId});return r[m.id]=m,m}else return Xh(u,{id:h?.id,parent:n.self,syncSnapshot:h?.syncSnapshot,input:h?.input,src:u,systemId:h?.systemId})};return(u,h)=>{const p=a(u,h);return r[p.id]=p,n.defer(()=>{p._processingStatus!==Ui.Stopped&&p.start()}),p}}function X5(n,t,e,s,{assignment:r}){if(!t.context)throw new Error("Cannot assign to undefined `context`. Ensure that `context` is defined in the machine config.");const a={},u={context:t.context,event:e.event,spawn:Y5(n,t,e.event,a),self:n.self,system:n.system};let h={};if(typeof r=="function")h=r(u,s);else for(const m of Object.keys(r)){const _=r[m];h[m]=typeof _=="function"?_(u,s):_}const p=Object.assign({},t.context,h);return[Hl(t,{context:p,children:Object.keys(a).length?{...t.children,...a}:t.children}),void 0,void 0]}function Dl(n){function t(e,s){}return t.type="xstate.assign",t.assignment=n,t.resolve=X5,t}const NS=new WeakMap;function Bc(n,t,e){let s=NS.get(n);return s?t in s||(s[t]=e()):(s={[t]:e()},NS.set(n,s)),s[t]}const Q5={},Sh=n=>typeof n=="string"?{type:n}:typeof n=="function"?"resolve"in n?{type:n.type}:{type:n.name}:n;class qp{constructor(t,e){if(this.config=t,this.key=void 0,this.id=void 0,this.type=void 0,this.path=void 0,this.states=void 0,this.history=void 0,this.entry=void 0,this.exit=void 0,this.parent=void 0,this.machine=void 0,this.meta=void 0,this.output=void 0,this.order=-1,this.description=void 0,this.tags=[],this.transitions=void 0,this.always=void 0,this.parent=e._parent,this.key=e._key,this.machine=e._machine,this.path=this.parent?this.parent.path.concat(this.key):[],this.id=this.config.id||[this.machine.id,...this.path].join(aA),this.type=this.config.type||(this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.description=this.config.description,this.order=this.machine.idMap.size,this.machine.idMap.set(this.id,this),this.states=this.config.states?MS(this.config.states,(s,r)=>new qp(s,{_parent:this,_key:r,_machine:this.machine})):Q5,this.type==="compound"&&!this.config.initial)throw new Error(`No initial state specified for compound state node "#${this.id}". Try adding { initial: "${Object.keys(this.states)[0]}" } to the state config.`);this.history=this.config.history===!0?"shallow":this.config.history||!1,this.entry=ko(this.config.entry).slice(),this.exit=ko(this.config.exit).slice(),this.meta=this.config.meta,this.output=this.type==="final"||!this.parent?this.config.output:void 0,this.tags=ko(t.tags).slice()}_initialize(){this.transitions=v5(this),this.config.always&&(this.always=Wc(this.config.always).map(t=>Ma(this,lA,t))),Object.keys(this.states).forEach(t=>{this.states[t]._initialize()})}get definition(){return{id:this.id,key:this.key,version:this.machine.version,type:this.type,initial:this.initial?{target:this.initial.target,source:this,actions:this.initial.actions.map(Sh),eventType:null,reenter:!1,toJSON:()=>({target:this.initial.target.map(t=>`#${t.id}`),source:`#${this.id}`,actions:this.initial.actions.map(Sh),eventType:null})}:void 0,history:this.history,states:MS(this.states,t=>t.definition),on:this.on,transitions:[...this.transitions.values()].flat().map(t=>({...t,actions:t.actions.map(Sh)})),entry:this.entry.map(Sh),exit:this.exit.map(Sh),meta:this.meta,order:this.order||-1,output:this.output,invoke:this.invoke,description:this.description,tags:this.tags}}toJSON(){return this.definition}get invoke(){return Bc(this,"invoke",()=>ko(this.config.invoke).map((t,e)=>{const{src:s,systemId:r}=t,a=t.id??kS(this.id,e),u=typeof s=="string"?s:`xstate.invoke.${kS(this.id,e)}`;return{...t,src:u,id:a,systemId:r,toJSON(){const{onDone:h,onError:p,...m}=t;return{...m,type:"xstate.invoke",src:u,id:a}}}}))}get on(){return Bc(this,"on",()=>[...this.transitions].flatMap(([e,s])=>s.map(r=>[e,r])).reduce((e,[s,r])=>(e[s]=e[s]||[],e[s].push(r),e),{}))}get after(){return Bc(this,"delayedTransitions",()=>y5(this))}get initial(){return Bc(this,"initial",()=>w5(this,this.config.initial))}next(t,e){const s=e.type,r=[];let a;const u=Bc(this,`candidates-${s}`,()=>g5(this,s));for(const h of u){const{guard:p}=h,m=t.context;let _=!1;try{_=!p||Lm(p,m,e,t)}catch(g){const b=typeof p=="string"?p:typeof p=="object"?p.type:void 0;throw new Error(`Unable to evaluate guard ${b?`'${b}' `:""}in transition for event '${s}' in state node '${this.id}':
${g.message}`)}if(_){r.push(...h.actions),a=h;break}}return a?[a]:void 0}get events(){return Bc(this,"events",()=>{const{states:t}=this,e=new Set(this.ownEvents);if(t)for(const s of Object.keys(t)){const r=t[s];if(r.states)for(const a of r.events)e.add(`${a}`)}return Array.from(e)})}get ownEvents(){const t=Object.keys(Object.fromEntries(this.transitions)),e=new Set(t.filter(s=>this.transitions.get(s).some(r=>!(!r.target&&!r.actions.length&&!r.reenter))));return Array.from(e)}}const $5="#";class Dv{constructor(t,e){this.config=t,this.version=void 0,this.schemas=void 0,this.implementations=void 0,this.__xstatenode=!0,this.idMap=new Map,this.root=void 0,this.id=void 0,this.states=void 0,this.events=void 0,this.id=t.id||"(machine)",this.implementations={actors:e?.actors??{},actions:e?.actions??{},delays:e?.delays??{},guards:e?.guards??{}},this.version=this.config.version,this.schemas=this.config.schemas,this.transition=this.transition.bind(this),this.getInitialSnapshot=this.getInitialSnapshot.bind(this),this.getPersistedSnapshot=this.getPersistedSnapshot.bind(this),this.restoreSnapshot=this.restoreSnapshot.bind(this),this.start=this.start.bind(this),this.root=new qp(t,{_key:this.id,_machine:this}),this.root._initialize(),b5(this.root),this.states=this.root.states,this.events=this.root.events}provide(t){const{actions:e,guards:s,actors:r,delays:a}=this.implementations;return new Dv(this.config,{actions:{...e,...t.actions},guards:{...s,...t.guards},actors:{...r,...t.actors},delays:{...a,...t.delays}})}resolveState(t){const e=z5(this.root,t.value),s=Hp(jp(this.root,e));return dp({_nodes:[...s],context:t.context||{},children:{},status:Lv(s,this.root)?"done":t.status||"active",output:t.output,error:t.error,historyValue:t.historyValue},this)}transition(t,e,s){return b0(t,e,s,[]).snapshot}microstep(t,e,s){return b0(t,e,s,[]).microsteps.map(([r])=>r)}getTransitionData(t,e){return Mv(this.root,t.value,t,e)||[]}_getPreInitialState(t,e,s){const{context:r}=this.config,a=dp({context:typeof r!="function"&&r?r:{},_nodes:[this.root],children:{},status:"active"},this);return typeof r=="function"?ou(a,e,t,[Dl(({spawn:h,event:p,self:m})=>r({spawn:h,input:p.input,self:m}))],s,void 0):a}getInitialSnapshot(t,e){const s=hA(e),r=[],a=this._getPreInitialState(t,s,r),[u]=k5(this.root,a,t,s,r),{snapshot:h}=b0(u,s,t,r);return h}start(t){Object.values(t.children).forEach(e=>{e.getSnapshot().status==="active"&&e.start()})}getStateNodeById(t){const e=xv(t),s=e.slice(1),r=Mm(e[0])?e[0].slice($5.length):e[0],a=this.idMap.get(r);if(!a)throw new Error(`Child state node '#${r}' does not exist on machine '${this.id}'`);return Vp(a,s)}get definition(){return this.root.definition}toJSON(){return this.definition}getPersistedSnapshot(t,e){return Z5(t,e)}restoreSnapshot(t,e){const s={},r=t.children;Object.keys(r).forEach(g=>{const b=r[g],x=b.snapshot,S=b.src,A=typeof S=="string"?Sv(this,S):S;if(!A)return;const E=Xh(A,{id:g,parent:e.self,syncSnapshot:b.syncSnapshot,snapshot:x,src:S,systemId:b.systemId});s[g]=E});function a(g,b){if(b instanceof qp)return b;try{return g.machine.getStateNodeById(b.id)}catch{}}function u(g,b){if(!b||typeof b!="object")return{};const x={};for(const S in b){const A=b[S];for(const E of A){const R=a(g,E);R&&(x[S]??=[],x[S].push(R))}}return x}const h=u(this.root,t.historyValue),p=dp({...t,children:s,_nodes:Array.from(Hp(jp(this.root,t.value))),historyValue:h},this),m=new Set;function _(g,b){if(!m.has(g)){m.add(g);for(const x in g){const S=g[x];if(S&&typeof S=="object"){if("xstate$$type"in S&&S.xstate$$type===Tv){g[x]=b[S.id];continue}_(S,b)}}}}return _(p.context,s),p}}function K5(n,t,e,s,{event:r}){const a=typeof r=="function"?r(e,s):r;return[t,{event:a},void 0]}function J5(n,{event:t}){n.defer(()=>n.emit(t))}function LA(n){function t(e,s){}return t.type="xstate.emit",t.event=n,t.resolve=K5,t.execute=J5,t}let ly=(function(n){return n.Parent="#_parent",n.Internal="#_internal",n})({});function t6(n,t,e,s,{to:r,event:a,id:u,delay:h},p){const m=t.machine.implementations.delays;if(typeof a=="string")throw new Error(`Only event objects may be used with sendTo; use sendTo({ type: "${a}" }) instead`);const _=typeof a=="function"?a(e,s):a;let g;if(typeof h=="string"){const S=m&&m[h];g=typeof S=="function"?S(e,s):S}else g=typeof h=="function"?h(e,s):h;const b=typeof r=="function"?r(e,s):r;let x;if(typeof b=="string"){if(b===ly.Parent?x=n.self._parent:b===ly.Internal?x=n.self:b.startsWith("#_")?x=t.children[b.slice(2)]:x=p.deferredActorIds?.includes(b)?b:t.children[b],!x)throw new Error(`Unable to send event to actor '${b}' from machine '${t.machine.id}'.`)}else x=b||n.self;return[t,{to:x,targetId:typeof b=="string"?b:void 0,event:_,id:u,delay:g},void 0]}function e6(n,t,e){typeof e.to=="string"&&(e.to=t.children[e.to])}function n6(n,t){n.defer(()=>{const{to:e,event:s,delay:r,id:a}=t;if(typeof r=="number"){n.system.scheduler.schedule(n.self,e,s,r,a);return}n.system._relay(n.self,e,s.type===e5?uA(n.self.id,s.data):s)})}function Rv(n,t,e){function s(r,a){}return s.type="xstate.sendTo",s.to=n,s.event=t,s.id=e?.id,s.delay=e?.delay,s.resolve=t6,s.retryResolve=e6,s.execute=n6,s}function i6(n,t){return Rv(ly.Parent,n,t)}function s6(n,t,e,s,{collect:r}){const a=[],u=function(p){a.push(p)};return u.assign=(...h)=>{a.push(Dl(...h))},u.cancel=(...h)=>{a.push(Av(...h))},u.raise=(...h)=>{a.push(Ov(...h))},u.sendTo=(...h)=>{a.push(Rv(...h))},u.sendParent=(...h)=>{a.push(i6(...h))},u.spawnChild=(...h)=>{a.push(Ev(...h))},u.stopChild=(...h)=>{a.push(Cm(...h))},u.emit=(...h)=>{a.push(LA(...h))},r({context:e.context,event:e.event,enqueue:u,check:h=>Lm(h,t.context,e.event,t),self:n.self,system:n.system},s),[t,void 0,a]}function r6(n){function t(e,s){}return t.type="xstate.enqueueActions",t.collect=n,t.resolve=s6,t}function o6(n,t,e,s,{value:r,label:a}){return[t,{value:typeof r=="function"?r(e,s):r,label:a},void 0]}function a6({logger:n},{value:t,label:e}){e?n(e,t):n(t)}function l6(n=({context:e,event:s})=>({context:e,event:s}),t){function e(s,r){}return e.type="xstate.log",e.value=n,e.label=t,e.resolve=o6,e.execute=a6,e}function c6(n,t){const e=ko(t);if(!e.some(r=>_A(n.type,r))){const r=e.length===1?`type matching "${e[0]}"`:`one of types matching "${e.join('", "')}"`;throw new Error(`Expected event ${JSON.stringify(n)} to have ${r}`)}}function u6(n,t){return new Dv(n,t)}function MA({schemas:n,actors:t,actions:e,guards:s,delays:r}){return{assign:Dl,sendTo:Rv,raise:Ov,log:l6,cancel:Av,stopChild:Cm,enqueueActions:r6,emit:LA,spawnChild:Ev,createStateConfig:a=>a,createAction:a=>a,createMachine:a=>u6({...a,schemas:n},{actors:t,actions:e,guards:s,delays:r}),extend:a=>MA({schemas:n,actors:t,actions:{...e,...a.actions},guards:{...s,...a.guards},delays:{...r,...a.delays}})}}const h6={timeout:1/0};function f6(n,t,e){const s={...h6,...e};return new Promise((r,a)=>{const{signal:u}=s;if(u?.aborted){a(u.reason);return}let h=!1;const p=s.timeout===1/0?void 0:setTimeout(()=>{m(),a(new Error(`Timeout of ${s.timeout} ms exceeded`))},s.timeout),m=()=>{clearTimeout(p),h=!0,b?.unsubscribe(),g&&u.removeEventListener("abort",g)};function _(x){t(x)&&(m(),r(x))}let g,b;_(n.getSnapshot()),!h&&(u&&(g=()=>{m(),a(u.reason)},u.addEventListener("abort",g)),b=n.subscribe({next:_,error:x=>{m(),a(x)},complete:()=>{m(),a(new Error("Actor terminated without satisfying predicate"))}}),h&&b.unsubscribe())})}let $d;const d6=new Uint8Array(16);function p6(){if(!$d&&($d=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$d))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $d(d6)}const m6=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function kA(n){return typeof n=="string"&&m6.test(n)}const ai=[];for(let n=0;n<256;++n)ai.push((n+256).toString(16).slice(1));function _6(n,t=0){return ai[n[t+0]]+ai[n[t+1]]+ai[n[t+2]]+ai[n[t+3]]+"-"+ai[n[t+4]]+ai[n[t+5]]+"-"+ai[n[t+6]]+ai[n[t+7]]+"-"+ai[n[t+8]]+ai[n[t+9]]+"-"+ai[n[t+10]]+ai[n[t+11]]+ai[n[t+12]]+ai[n[t+13]]+ai[n[t+14]]+ai[n[t+15]]}function g6(n){if(!kA(n))throw TypeError("Invalid UUID");let t;const e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}const y6=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),PS={randomUUID:y6};function OA(n,t,e){if(PS.randomUUID&&!t&&!n)return PS.randomUUID();n=n||{};const s=n.random||(n.rng||p6)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=s[r];return t}return _6(s)}var nr={},Qe={},pi={},w0={},Th={},zS;function v6(){return zS||(zS=1,Object.defineProperty(Th,"__esModule",{value:!0}),Th.crypto=void 0,Th.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0),Th}var US;function DA(){return US||(US=1,(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.wrapXOFConstructorWithOpts=n.wrapConstructorWithOpts=n.wrapConstructor=n.Hash=n.nextTick=n.swap32IfBE=n.byteSwapIfBE=n.swap8IfBE=n.isLE=void 0,n.isBytes=e,n.anumber=s,n.abytes=r,n.ahash=a,n.aexists=u,n.aoutput=h,n.u8=p,n.u32=m,n.clean=_,n.createView=g,n.rotr=b,n.rotl=x,n.byteSwap=S,n.byteSwap32=A,n.bytesToHex=z,n.hexToBytes=N,n.asyncLoop=Y,n.utf8ToBytes=G,n.bytesToUtf8=Z,n.toBytes=F,n.kdfInputToBytes=$,n.concatBytes=et,n.checkOpts=k,n.createHasher=W,n.createOptHasher=P,n.createXOFer=U,n.randomBytes=K;const t=v6();function e(D){return D instanceof Uint8Array||ArrayBuffer.isView(D)&&D.constructor.name==="Uint8Array"}function s(D){if(!Number.isSafeInteger(D)||D<0)throw new Error("positive integer expected, got "+D)}function r(D,...V){if(!e(D))throw new Error("Uint8Array expected");if(V.length>0&&!V.includes(D.length))throw new Error("Uint8Array expected of length "+V+", got length="+D.length)}function a(D){if(typeof D!="function"||typeof D.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");s(D.outputLen),s(D.blockLen)}function u(D,V=!0){if(D.destroyed)throw new Error("Hash instance has been destroyed");if(V&&D.finished)throw new Error("Hash#digest() has already been called")}function h(D,V){r(D);const I=V.outputLen;if(D.length<I)throw new Error("digestInto() expects output buffer of length at least "+I)}function p(D){return new Uint8Array(D.buffer,D.byteOffset,D.byteLength)}function m(D){return new Uint32Array(D.buffer,D.byteOffset,Math.floor(D.byteLength/4))}function _(...D){for(let V=0;V<D.length;V++)D[V].fill(0)}function g(D){return new DataView(D.buffer,D.byteOffset,D.byteLength)}function b(D,V){return D<<32-V|D>>>V}function x(D,V){return D<<V|D>>>32-V>>>0}n.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function S(D){return D<<24&4278190080|D<<8&16711680|D>>>8&65280|D>>>24&255}n.swap8IfBE=n.isLE?D=>D:D=>S(D),n.byteSwapIfBE=n.swap8IfBE;function A(D){for(let V=0;V<D.length;V++)D[V]=S(D[V]);return D}n.swap32IfBE=n.isLE?D=>D:A;const E=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",R=Array.from({length:256},(D,V)=>V.toString(16).padStart(2,"0"));function z(D){if(r(D),E)return D.toHex();let V="";for(let I=0;I<D.length;I++)V+=R[D[I]];return V}const O={_0:48,_9:57,A:65,F:70,a:97,f:102};function Q(D){if(D>=O._0&&D<=O._9)return D-O._0;if(D>=O.A&&D<=O.F)return D-(O.A-10);if(D>=O.a&&D<=O.f)return D-(O.a-10)}function N(D){if(typeof D!="string")throw new Error("hex string expected, got "+typeof D);if(E)return Uint8Array.fromHex(D);const V=D.length,I=V/2;if(V%2)throw new Error("hex string expected, got unpadded hex of length "+V);const q=new Uint8Array(I);for(let at=0,mt=0;at<I;at++,mt+=2){const vt=Q(D.charCodeAt(mt)),gt=Q(D.charCodeAt(mt+1));if(vt===void 0||gt===void 0){const Dt=D[mt]+D[mt+1];throw new Error('hex string expected, got non-hex character "'+Dt+'" at index '+mt)}q[at]=vt*16+gt}return q}const j=async()=>{};n.nextTick=j;async function Y(D,V,I){let q=Date.now();for(let at=0;at<D;at++){I(at);const mt=Date.now()-q;mt>=0&&mt<V||(await(0,n.nextTick)(),q+=mt)}}function G(D){if(typeof D!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(D))}function Z(D){return new TextDecoder().decode(D)}function F(D){return typeof D=="string"&&(D=G(D)),r(D),D}function $(D){return typeof D=="string"&&(D=G(D)),r(D),D}function et(...D){let V=0;for(let q=0;q<D.length;q++){const at=D[q];r(at),V+=at.length}const I=new Uint8Array(V);for(let q=0,at=0;q<D.length;q++){const mt=D[q];I.set(mt,at),at+=mt.length}return I}function k(D,V){if(V!==void 0&&{}.toString.call(V)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(D,V)}class X{}n.Hash=X;function W(D){const V=q=>D().update(F(q)).digest(),I=D();return V.outputLen=I.outputLen,V.blockLen=I.blockLen,V.create=()=>D(),V}function P(D){const V=(q,at)=>D(at).update(F(q)).digest(),I=D({});return V.outputLen=I.outputLen,V.blockLen=I.blockLen,V.create=q=>D(q),V}function U(D){const V=(q,at)=>D(at).update(F(q)).digest(),I=D({});return V.outputLen=I.outputLen,V.blockLen=I.blockLen,V.create=q=>D(q),V}n.wrapConstructor=W,n.wrapConstructorWithOpts=P,n.wrapXOFConstructorWithOpts=U;function K(D=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(D));if(t.crypto&&typeof t.crypto.randomBytes=="function")return Uint8Array.from(t.crypto.randomBytes(D));throw new Error("crypto.getRandomValues must be defined")}})(w0)),w0}var BS;function b6(){if(BS)return pi;BS=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.SHA512_IV=pi.SHA384_IV=pi.SHA224_IV=pi.SHA256_IV=pi.HashMD=void 0,pi.setBigUint64=t,pi.Chi=e,pi.Maj=s;const n=DA();function t(a,u,h,p){if(typeof a.setBigUint64=="function")return a.setBigUint64(u,h,p);const m=BigInt(32),_=BigInt(4294967295),g=Number(h>>m&_),b=Number(h&_),x=p?4:0,S=p?0:4;a.setUint32(u+x,g,p),a.setUint32(u+S,b,p)}function e(a,u,h){return a&u^~a&h}function s(a,u,h){return a&u^a&h^u&h}class r extends n.Hash{constructor(u,h,p,m){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=u,this.outputLen=h,this.padOffset=p,this.isLE=m,this.buffer=new Uint8Array(u),this.view=(0,n.createView)(this.buffer)}update(u){(0,n.aexists)(this),u=(0,n.toBytes)(u),(0,n.abytes)(u);const{view:h,buffer:p,blockLen:m}=this,_=u.length;for(let g=0;g<_;){const b=Math.min(m-this.pos,_-g);if(b===m){const x=(0,n.createView)(u);for(;m<=_-g;g+=m)this.process(x,g);continue}p.set(u.subarray(g,g+b),this.pos),this.pos+=b,g+=b,this.pos===m&&(this.process(h,0),this.pos=0)}return this.length+=u.length,this.roundClean(),this}digestInto(u){(0,n.aexists)(this),(0,n.aoutput)(u,this),this.finished=!0;const{buffer:h,view:p,blockLen:m,isLE:_}=this;let{pos:g}=this;h[g++]=128,(0,n.clean)(this.buffer.subarray(g)),this.padOffset>m-g&&(this.process(p,0),g=0);for(let E=g;E<m;E++)h[E]=0;t(p,m-8,BigInt(this.length*8),_),this.process(p,0);const b=(0,n.createView)(u),x=this.outputLen;if(x%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const S=x/4,A=this.get();if(S>A.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<S;E++)b.setUint32(4*E,A[E],_)}digest(){const{buffer:u,outputLen:h}=this;this.digestInto(u);const p=u.slice(0,h);return this.destroy(),p}_cloneInto(u){u||(u=new this.constructor),u.set(...this.get());const{blockLen:h,buffer:p,length:m,finished:_,destroyed:g,pos:b}=this;return u.destroyed=g,u.finished=_,u.length=m,u.pos=b,m%h&&u.buffer.set(p),u}clone(){return this._cloneInto()}}return pi.HashMD=r,pi.SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),pi.SHA224_IV=Uint32Array.from([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]),pi.SHA384_IV=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),pi.SHA512_IV=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),pi}var ne={},HS;function w6(){if(HS)return ne;HS=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.toBig=ne.shrSL=ne.shrSH=ne.rotrSL=ne.rotrSH=ne.rotrBL=ne.rotrBH=ne.rotr32L=ne.rotr32H=ne.rotlSL=ne.rotlSH=ne.rotlBL=ne.rotlBH=ne.add5L=ne.add5H=ne.add4L=ne.add4H=ne.add3L=ne.add3H=void 0,ne.add=R,ne.fromBig=e,ne.split=s;const n=BigInt(2**32-1),t=BigInt(32);function e(Z,F=!1){return F?{h:Number(Z&n),l:Number(Z>>t&n)}:{h:Number(Z>>t&n)|0,l:Number(Z&n)|0}}function s(Z,F=!1){const $=Z.length;let et=new Uint32Array($),k=new Uint32Array($);for(let X=0;X<$;X++){const{h:W,l:P}=e(Z[X],F);[et[X],k[X]]=[W,P]}return[et,k]}const r=(Z,F)=>BigInt(Z>>>0)<<t|BigInt(F>>>0);ne.toBig=r;const a=(Z,F,$)=>Z>>>$;ne.shrSH=a;const u=(Z,F,$)=>Z<<32-$|F>>>$;ne.shrSL=u;const h=(Z,F,$)=>Z>>>$|F<<32-$;ne.rotrSH=h;const p=(Z,F,$)=>Z<<32-$|F>>>$;ne.rotrSL=p;const m=(Z,F,$)=>Z<<64-$|F>>>$-32;ne.rotrBH=m;const _=(Z,F,$)=>Z>>>$-32|F<<64-$;ne.rotrBL=_;const g=(Z,F)=>F;ne.rotr32H=g;const b=(Z,F)=>Z;ne.rotr32L=b;const x=(Z,F,$)=>Z<<$|F>>>32-$;ne.rotlSH=x;const S=(Z,F,$)=>F<<$|Z>>>32-$;ne.rotlSL=S;const A=(Z,F,$)=>F<<$-32|Z>>>64-$;ne.rotlBH=A;const E=(Z,F,$)=>Z<<$-32|F>>>64-$;ne.rotlBL=E;function R(Z,F,$,et){const k=(F>>>0)+(et>>>0);return{h:Z+$+(k/2**32|0)|0,l:k|0}}const z=(Z,F,$)=>(Z>>>0)+(F>>>0)+($>>>0);ne.add3L=z;const O=(Z,F,$,et)=>F+$+et+(Z/2**32|0)|0;ne.add3H=O;const Q=(Z,F,$,et)=>(Z>>>0)+(F>>>0)+($>>>0)+(et>>>0);ne.add4L=Q;const N=(Z,F,$,et,k)=>F+$+et+k+(Z/2**32|0)|0;ne.add4H=N;const j=(Z,F,$,et,k)=>(Z>>>0)+(F>>>0)+($>>>0)+(et>>>0)+(k>>>0);ne.add5L=j;const Y=(Z,F,$,et,k,X)=>F+$+et+k+X+(Z/2**32|0)|0;ne.add5H=Y;const G={fromBig:e,split:s,toBig:r,shrSH:a,shrSL:u,rotrSH:h,rotrSL:p,rotrBH:m,rotrBL:_,rotr32H:g,rotr32L:b,rotlSH:x,rotlSL:S,rotlBH:A,rotlBL:E,add:R,add3L:z,add3H:O,add4L:Q,add4H:N,add5H:Y,add5L:j};return ne.default=G,ne}var VS;function x6(){if(VS)return Qe;VS=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.sha512_224=Qe.sha512_256=Qe.sha384=Qe.sha512=Qe.sha224=Qe.sha256=Qe.SHA512_256=Qe.SHA512_224=Qe.SHA384=Qe.SHA512=Qe.SHA224=Qe.SHA256=void 0;const n=b6(),t=w6(),e=DA(),s=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),r=new Uint32Array(64);class a extends n.HashMD{constructor(O=32){super(64,O,8,!1),this.A=n.SHA256_IV[0]|0,this.B=n.SHA256_IV[1]|0,this.C=n.SHA256_IV[2]|0,this.D=n.SHA256_IV[3]|0,this.E=n.SHA256_IV[4]|0,this.F=n.SHA256_IV[5]|0,this.G=n.SHA256_IV[6]|0,this.H=n.SHA256_IV[7]|0}get(){const{A:O,B:Q,C:N,D:j,E:Y,F:G,G:Z,H:F}=this;return[O,Q,N,j,Y,G,Z,F]}set(O,Q,N,j,Y,G,Z,F){this.A=O|0,this.B=Q|0,this.C=N|0,this.D=j|0,this.E=Y|0,this.F=G|0,this.G=Z|0,this.H=F|0}process(O,Q){for(let k=0;k<16;k++,Q+=4)r[k]=O.getUint32(Q,!1);for(let k=16;k<64;k++){const X=r[k-15],W=r[k-2],P=(0,e.rotr)(X,7)^(0,e.rotr)(X,18)^X>>>3,U=(0,e.rotr)(W,17)^(0,e.rotr)(W,19)^W>>>10;r[k]=U+r[k-7]+P+r[k-16]|0}let{A:N,B:j,C:Y,D:G,E:Z,F,G:$,H:et}=this;for(let k=0;k<64;k++){const X=(0,e.rotr)(Z,6)^(0,e.rotr)(Z,11)^(0,e.rotr)(Z,25),W=et+X+(0,n.Chi)(Z,F,$)+s[k]+r[k]|0,U=((0,e.rotr)(N,2)^(0,e.rotr)(N,13)^(0,e.rotr)(N,22))+(0,n.Maj)(N,j,Y)|0;et=$,$=F,F=Z,Z=G+W|0,G=Y,Y=j,j=N,N=W+U|0}N=N+this.A|0,j=j+this.B|0,Y=Y+this.C|0,G=G+this.D|0,Z=Z+this.E|0,F=F+this.F|0,$=$+this.G|0,et=et+this.H|0,this.set(N,j,Y,G,Z,F,$,et)}roundClean(){(0,e.clean)(r)}destroy(){this.set(0,0,0,0,0,0,0,0),(0,e.clean)(this.buffer)}}Qe.SHA256=a;class u extends a{constructor(){super(28),this.A=n.SHA224_IV[0]|0,this.B=n.SHA224_IV[1]|0,this.C=n.SHA224_IV[2]|0,this.D=n.SHA224_IV[3]|0,this.E=n.SHA224_IV[4]|0,this.F=n.SHA224_IV[5]|0,this.G=n.SHA224_IV[6]|0,this.H=n.SHA224_IV[7]|0}}Qe.SHA224=u;const h=t.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(z=>BigInt(z))),p=h[0],m=h[1],_=new Uint32Array(80),g=new Uint32Array(80);class b extends n.HashMD{constructor(O=64){super(128,O,16,!1),this.Ah=n.SHA512_IV[0]|0,this.Al=n.SHA512_IV[1]|0,this.Bh=n.SHA512_IV[2]|0,this.Bl=n.SHA512_IV[3]|0,this.Ch=n.SHA512_IV[4]|0,this.Cl=n.SHA512_IV[5]|0,this.Dh=n.SHA512_IV[6]|0,this.Dl=n.SHA512_IV[7]|0,this.Eh=n.SHA512_IV[8]|0,this.El=n.SHA512_IV[9]|0,this.Fh=n.SHA512_IV[10]|0,this.Fl=n.SHA512_IV[11]|0,this.Gh=n.SHA512_IV[12]|0,this.Gl=n.SHA512_IV[13]|0,this.Hh=n.SHA512_IV[14]|0,this.Hl=n.SHA512_IV[15]|0}get(){const{Ah:O,Al:Q,Bh:N,Bl:j,Ch:Y,Cl:G,Dh:Z,Dl:F,Eh:$,El:et,Fh:k,Fl:X,Gh:W,Gl:P,Hh:U,Hl:K}=this;return[O,Q,N,j,Y,G,Z,F,$,et,k,X,W,P,U,K]}set(O,Q,N,j,Y,G,Z,F,$,et,k,X,W,P,U,K){this.Ah=O|0,this.Al=Q|0,this.Bh=N|0,this.Bl=j|0,this.Ch=Y|0,this.Cl=G|0,this.Dh=Z|0,this.Dl=F|0,this.Eh=$|0,this.El=et|0,this.Fh=k|0,this.Fl=X|0,this.Gh=W|0,this.Gl=P|0,this.Hh=U|0,this.Hl=K|0}process(O,Q){for(let I=0;I<16;I++,Q+=4)_[I]=O.getUint32(Q),g[I]=O.getUint32(Q+=4);for(let I=16;I<80;I++){const q=_[I-15]|0,at=g[I-15]|0,mt=t.rotrSH(q,at,1)^t.rotrSH(q,at,8)^t.shrSH(q,at,7),vt=t.rotrSL(q,at,1)^t.rotrSL(q,at,8)^t.shrSL(q,at,7),gt=_[I-2]|0,Dt=g[I-2]|0,Mt=t.rotrSH(gt,Dt,19)^t.rotrBH(gt,Dt,61)^t.shrSH(gt,Dt,6),oe=t.rotrSL(gt,Dt,19)^t.rotrBL(gt,Dt,61)^t.shrSL(gt,Dt,6),Me=t.add4L(vt,oe,g[I-7],g[I-16]),Ke=t.add4H(Me,mt,Mt,_[I-7],_[I-16]);_[I]=Ke|0,g[I]=Me|0}let{Ah:N,Al:j,Bh:Y,Bl:G,Ch:Z,Cl:F,Dh:$,Dl:et,Eh:k,El:X,Fh:W,Fl:P,Gh:U,Gl:K,Hh:D,Hl:V}=this;for(let I=0;I<80;I++){const q=t.rotrSH(k,X,14)^t.rotrSH(k,X,18)^t.rotrBH(k,X,41),at=t.rotrSL(k,X,14)^t.rotrSL(k,X,18)^t.rotrBL(k,X,41),mt=k&W^~k&U,vt=X&P^~X&K,gt=t.add5L(V,at,vt,m[I],g[I]),Dt=t.add5H(gt,D,q,mt,p[I],_[I]),Mt=gt|0,oe=t.rotrSH(N,j,28)^t.rotrBH(N,j,34)^t.rotrBH(N,j,39),Me=t.rotrSL(N,j,28)^t.rotrBL(N,j,34)^t.rotrBL(N,j,39),Ke=N&Y^N&Z^Y&Z,tn=j&G^j&F^G&F;D=U|0,V=K|0,U=W|0,K=P|0,W=k|0,P=X|0,{h:k,l:X}=t.add($|0,et|0,Dt|0,Mt|0),$=Z|0,et=F|0,Z=Y|0,F=G|0,Y=N|0,G=j|0;const Fn=t.add3L(Mt,Me,tn);N=t.add3H(Fn,Dt,oe,Ke),j=Fn|0}({h:N,l:j}=t.add(this.Ah|0,this.Al|0,N|0,j|0)),{h:Y,l:G}=t.add(this.Bh|0,this.Bl|0,Y|0,G|0),{h:Z,l:F}=t.add(this.Ch|0,this.Cl|0,Z|0,F|0),{h:$,l:et}=t.add(this.Dh|0,this.Dl|0,$|0,et|0),{h:k,l:X}=t.add(this.Eh|0,this.El|0,k|0,X|0),{h:W,l:P}=t.add(this.Fh|0,this.Fl|0,W|0,P|0),{h:U,l:K}=t.add(this.Gh|0,this.Gl|0,U|0,K|0),{h:D,l:V}=t.add(this.Hh|0,this.Hl|0,D|0,V|0),this.set(N,j,Y,G,Z,F,$,et,k,X,W,P,U,K,D,V)}roundClean(){(0,e.clean)(_,g)}destroy(){(0,e.clean)(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}Qe.SHA512=b;class x extends b{constructor(){super(48),this.Ah=n.SHA384_IV[0]|0,this.Al=n.SHA384_IV[1]|0,this.Bh=n.SHA384_IV[2]|0,this.Bl=n.SHA384_IV[3]|0,this.Ch=n.SHA384_IV[4]|0,this.Cl=n.SHA384_IV[5]|0,this.Dh=n.SHA384_IV[6]|0,this.Dl=n.SHA384_IV[7]|0,this.Eh=n.SHA384_IV[8]|0,this.El=n.SHA384_IV[9]|0,this.Fh=n.SHA384_IV[10]|0,this.Fl=n.SHA384_IV[11]|0,this.Gh=n.SHA384_IV[12]|0,this.Gl=n.SHA384_IV[13]|0,this.Hh=n.SHA384_IV[14]|0,this.Hl=n.SHA384_IV[15]|0}}Qe.SHA384=x;const S=Uint32Array.from([2352822216,424955298,1944164710,2312950998,502970286,855612546,1738396948,1479516111,258812777,2077511080,2011393907,79989058,1067287976,1780299464,286451373,2446758561]),A=Uint32Array.from([573645204,4230739756,2673172387,3360449730,596883563,1867755857,2520282905,1497426621,2519219938,2827943907,3193839141,1401305490,721525244,746961066,246885852,2177182882]);class E extends b{constructor(){super(28),this.Ah=S[0]|0,this.Al=S[1]|0,this.Bh=S[2]|0,this.Bl=S[3]|0,this.Ch=S[4]|0,this.Cl=S[5]|0,this.Dh=S[6]|0,this.Dl=S[7]|0,this.Eh=S[8]|0,this.El=S[9]|0,this.Fh=S[10]|0,this.Fl=S[11]|0,this.Gh=S[12]|0,this.Gl=S[13]|0,this.Hh=S[14]|0,this.Hl=S[15]|0}}Qe.SHA512_224=E;class R extends b{constructor(){super(32),this.Ah=A[0]|0,this.Al=A[1]|0,this.Bh=A[2]|0,this.Bl=A[3]|0,this.Ch=A[4]|0,this.Cl=A[5]|0,this.Dh=A[6]|0,this.Dl=A[7]|0,this.Eh=A[8]|0,this.El=A[9]|0,this.Fh=A[10]|0,this.Fl=A[11]|0,this.Gh=A[12]|0,this.Gl=A[13]|0,this.Hh=A[14]|0,this.Hl=A[15]|0}}return Qe.SHA512_256=R,Qe.sha256=(0,e.createHasher)(()=>new a),Qe.sha224=(0,e.createHasher)(()=>new u),Qe.sha512=(0,e.createHasher)(()=>new b),Qe.sha384=(0,e.createHasher)(()=>new x),Qe.sha512_256=(0,e.createHasher)(()=>new R),Qe.sha512_224=(0,e.createHasher)(()=>new E),Qe}var jS;function S6(){if(jS)return nr;jS=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.sha224=nr.SHA224=nr.sha256=nr.SHA256=void 0;const n=x6();return nr.SHA256=n.SHA256,nr.sha256=n.sha256,nr.SHA224=n.SHA224,nr.sha224=n.sha224,nr}var x0,qS;function T6(){if(qS)return x0;qS=1;function n(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),s=0;s<e.length;s++)e[s]=255;for(var r=0;r<t.length;r++){var a=t.charAt(r),u=a.charCodeAt(0);if(e[u]!==255)throw new TypeError(a+" is ambiguous");e[u]=r}var h=t.length,p=t.charAt(0),m=Math.log(h)/Math.log(256),_=Math.log(256)/Math.log(h);function g(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var A=0,E=0,R=0,z=S.length;R!==z&&S[R]===0;)R++,A++;for(var O=(z-R)*_+1>>>0,Q=new Uint8Array(O);R!==z;){for(var N=S[R],j=0,Y=O-1;(N!==0||j<E)&&Y!==-1;Y--,j++)N+=256*Q[Y]>>>0,Q[Y]=N%h>>>0,N=N/h>>>0;if(N!==0)throw new Error("Non-zero carry");E=j,R++}for(var G=O-E;G!==O&&Q[G]===0;)G++;for(var Z=p.repeat(A);G<O;++G)Z+=t.charAt(Q[G]);return Z}function b(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;for(var A=0,E=0,R=0;S[A]===p;)E++,A++;for(var z=(S.length-A)*m+1>>>0,O=new Uint8Array(z);S[A];){var Q=S.charCodeAt(A);if(Q>255)return;var N=e[Q];if(N===255)return;for(var j=0,Y=z-1;(N!==0||j<R)&&Y!==-1;Y--,j++)N+=h*O[Y]>>>0,O[Y]=N%256>>>0,N=N/256>>>0;if(N!==0)throw new Error("Non-zero carry");R=j,A++}for(var G=z-R;G!==z&&O[G]===0;)G++;for(var Z=new Uint8Array(E+(z-G)),F=E;G!==z;)Z[F++]=O[G++];return Z}function x(S){var A=b(S);if(A)return A;throw new Error("Non-base"+h+" character")}return{encode:g,decodeUnsafe:b,decode:x}}return x0=n,x0}var S0,GS;function A6(){return GS||(GS=1,S0=T6()("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),S0}var T0,ZS;function E6(){if(ZS)return T0;ZS=1;var n=A6();return T0=function(t){function e(u){var h=Uint8Array.from(u),p=t(h),m=h.length+4,_=new Uint8Array(m);return _.set(h,0),_.set(p.subarray(0,4),h.length),n.encode(_,m)}function s(u){var h=u.slice(0,-4),p=u.slice(-4),m=t(h);if(!(p[0]^m[0]|p[1]^m[1]|p[2]^m[2]|p[3]^m[3]))return h}function r(u){var h=n.decodeUnsafe(u);if(h)return s(h)}function a(u){var h=n.decode(u),p=s(h);if(!p)throw new Error("Invalid checksum");return p}return{encode:e,decode:a,decodeUnsafe:r}},T0}var A0,WS;function C6(){if(WS)return A0;WS=1;var{sha256:n}=S6(),t=E6();function e(s){return n(n(s))}return A0=t(e),A0}var L6=C6();const Fl=tf(L6),M6=n=>{if(n.length%2!==0)throw new Error("Hex string must have an even length");const t=new Uint8Array(n.length/2);for(let e=0;e<n.length;e+=2)t[e>>1]=parseInt(n.slice(e,e+2),16);return t},RA=n=>Array.from(n,t=>t.toString(16).padStart(2,"0")).join(""),Gp="automerge:",Jc=n=>{const[t,e,...s]=n.split("#");if(s.length>0)throw new Error("Invalid URL: contains multiple heads sections");const r=new RegExp(`^${Gp}(\\w+)$`),[,a]=t.match(r)||[],u=a,h=zA(u);if(!h)throw new Error("Invalid document URL: "+n);if(e===void 0)return{binaryDocumentId:h,documentId:u};const p=e===""?[]:e.split("|"),m=p.map(_=>{try{return RA(Fl.decode(_))}catch{throw new Error(`Invalid head in URL: ${_}`)}});return{binaryDocumentId:h,hexHeads:m,documentId:u,heads:p}},IA=n=>{if(n instanceof Uint8Array||typeof n=="string")return Gp+(n instanceof Uint8Array?Qh(n):n);const{documentId:t,heads:e=void 0}=n;if(t===void 0)throw new Error("Invalid documentId: "+t);const s=t instanceof Uint8Array?Qh(t):t;let r=`${Gp}${s}`;return e!==void 0&&(e.forEach(a=>{try{Fl.decode(a)}catch{throw new Error(`Invalid head: ${a}`)}}),r+="#"+e.join("|")),r},NA=n=>{if(typeof n!="string"||!n||!n.startsWith(Gp))return!1;try{const{documentId:t,heads:e}=Jc(n);return!(!PA(t)||e&&!e.every(s=>{try{return Fl.decode(s),!0}catch{return!1}}))}catch{return!1}},PA=n=>typeof n!="string"?!1:zA(n)!==void 0,k6=n=>typeof n=="string"&&kA(n),FS=()=>{const n=OA(null,new Uint8Array(16));return IA({documentId:n})},zA=n=>Fl.decodeUnsafe(n),Qh=n=>Fl.encode(n),rr=n=>n.map(t=>Fl.encode(M6(t))),Ca=n=>n.map(t=>RA(Fl.decode(t))),Kd=n=>{if(n instanceof Uint8Array)return Qh(n);if(NA(n))return Jc(n).documentId;if(PA(n))return n;if(k6(n)){console.warn("Future versions will not support UUIDs as document IDs; use Automerge URLs instead.");const t=g6(n);return Qh(t)}throw new Error(`Invalid AutomergeUrl: '${n}'`)};let cy;try{cy=new TextDecoder}catch{}let Gt,Pl,wt=0;const O6=105,D6=57342,R6=57343,YS=57337,XS=6,Hc={};let Ah=11281e4,To=1681e4,be={},bn,Zp,Wp=0,$h=0,Zn,Is,Un=[],uy=[],qi,bi,Lh,QS={useRecords:!1,mapsAsObjects:!0},Kh=!1,UA=2;try{new Function("")}catch{UA=1/0}class Jh{constructor(t){if(t&&((t.keyMap||t._keyMap)&&!t.useRecords&&(t.useRecords=!1,t.mapsAsObjects=!0),t.useRecords===!1&&t.mapsAsObjects===void 0&&(t.mapsAsObjects=!0),t.getStructures&&(t.getShared=t.getStructures),t.getShared&&!t.structures&&((t.structures=[]).uninitialized=!0),t.keyMap)){this.mapKey=new Map;for(let[e,s]of Object.entries(t.keyMap))this.mapKey.set(s,e)}Object.assign(this,t)}decodeKey(t){return this.keyMap&&this.mapKey.get(t)||t}encodeKey(t){return this.keyMap&&this.keyMap.hasOwnProperty(t)?this.keyMap[t]:t}encodeKeys(t){if(!this._keyMap)return t;let e=new Map;for(let[s,r]of Object.entries(t))e.set(this._keyMap.hasOwnProperty(s)?this._keyMap[s]:s,r);return e}decodeKeys(t){if(!this._keyMap||t.constructor.name!="Map")return t;if(!this._mapKey){this._mapKey=new Map;for(let[s,r]of Object.entries(this._keyMap))this._mapKey.set(r,s)}let e={};return t.forEach((s,r)=>e[Ns(this._mapKey.has(r)?this._mapKey.get(r):r)]=s),e}mapDecode(t,e){let s=this.decode(t);return this._keyMap&&s.constructor.name==="Array"?s.map(r=>this.decodeKeys(r)):s}decode(t,e){if(Gt)return jA(()=>(py(),this?this.decode(t,e):Jh.prototype.decode.call(QS,t,e)));Pl=e>-1?e:t.length,wt=0,$h=0,Zp=null,Zn=null,Gt=t;try{bi=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(s){throw Gt=null,t instanceof Uint8Array?s:new Error("Source must be a Uint8Array or Buffer but was a "+(t&&typeof t=="object"?t.constructor.name:typeof t))}if(this instanceof Jh){if(be=this,qi=this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),this.structures)return bn=this.structures,Jd();(!bn||bn.length>0)&&(bn=[])}else be=QS,(!bn||bn.length>0)&&(bn=[]),qi=null;return Jd()}decodeMultiple(t,e){let s,r=0;try{let a=t.length;Kh=!0;let u=this?this.decode(t,a):Pv.decode(t,a);if(e){if(e(u)===!1)return;for(;wt<a;)if(r=wt,e(Jd())===!1)return}else{for(s=[u];wt<a;)r=wt,s.push(Jd());return s}}catch(a){throw a.lastPosition=r,a.values=s,a}finally{Kh=!1,py()}}}function Jd(){try{let n=Te();if(Zn){if(wt>=Zn.postBundlePosition){let t=new Error("Unexpected bundle position");throw t.incomplete=!0,t}wt=Zn.postBundlePosition,Zn=null}if(wt==Pl)bn=null,Gt=null,Is&&(Is=null);else if(wt>Pl){let t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}else if(!Kh)throw new Error("Data read, but end of buffer not reached");return n}catch(n){throw py(),(n instanceof RangeError||n.message.startsWith("Unexpected end of buffer"))&&(n.incomplete=!0),n}}function Te(){let n=Gt[wt++],t=n>>5;if(n=n&31,n>23)switch(n){case 24:n=Gt[wt++];break;case 25:if(t==7)return z6();n=bi.getUint16(wt),wt+=2;break;case 26:if(t==7){let e=bi.getFloat32(wt);if(be.useFloat32>2){let s=Nv[(Gt[wt]&127)<<1|Gt[wt+1]>>7];return wt+=4,(s*e+(e>0?.5:-.5)>>0)/s}return wt+=4,e}n=bi.getUint32(wt),wt+=4;break;case 27:if(t==7){let e=bi.getFloat64(wt);return wt+=8,e}if(t>1){if(bi.getUint32(wt)>0)throw new Error("JavaScript does not support arrays, maps, or strings with length over 4294967295");n=bi.getUint32(wt+4)}else be.int64AsNumber?(n=bi.getUint32(wt)*4294967296,n+=bi.getUint32(wt+4)):n=bi.getBigUint64(wt);wt+=8;break;case 31:switch(t){case 2:case 3:throw new Error("Indefinite length not supported for byte or text strings");case 4:let e=[],s,r=0;for(;(s=Te())!=Hc;){if(r>=Ah)throw new Error(`Array length exceeds ${Ah}`);e[r++]=s}return t==4?e:t==3?e.join(""):Buffer.concat(e);case 5:let a;if(be.mapsAsObjects){let u={},h=0;if(be.keyMap)for(;(a=Te())!=Hc;){if(h++>=To)throw new Error(`Property count exceeds ${To}`);u[Ns(be.decodeKey(a))]=Te()}else for(;(a=Te())!=Hc;){if(h++>=To)throw new Error(`Property count exceeds ${To}`);u[Ns(a)]=Te()}return u}else{Lh&&(be.mapsAsObjects=!0,Lh=!1);let u=new Map;if(be.keyMap){let h=0;for(;(a=Te())!=Hc;){if(h++>=To)throw new Error(`Map size exceeds ${To}`);u.set(be.decodeKey(a),Te())}}else{let h=0;for(;(a=Te())!=Hc;){if(h++>=To)throw new Error(`Map size exceeds ${To}`);u.set(a,Te())}}return u}case 7:return Hc;default:throw new Error("Invalid major type for indefinite length "+t)}default:throw new Error("Unknown token "+n)}switch(t){case 0:return n;case 1:return~n;case 2:return P6(n);case 3:if($h>=wt)return Zp.slice(wt-Wp,(wt+=n)-Wp);if($h==0&&Pl<140&&n<32){let r=n<16?BA(n):N6(n);if(r!=null)return r}return I6(n);case 4:if(n>=Ah)throw new Error(`Array length exceeds ${Ah}`);let e=new Array(n);for(let r=0;r<n;r++)e[r]=Te();return e;case 5:if(n>=To)throw new Error(`Map size exceeds ${Ah}`);if(be.mapsAsObjects){let r={};if(be.keyMap)for(let a=0;a<n;a++)r[Ns(be.decodeKey(Te()))]=Te();else for(let a=0;a<n;a++)r[Ns(Te())]=Te();return r}else{Lh&&(be.mapsAsObjects=!0,Lh=!1);let r=new Map;if(be.keyMap)for(let a=0;a<n;a++)r.set(be.decodeKey(Te()),Te());else for(let a=0;a<n;a++)r.set(Te(),Te());return r}case 6:if(n>=YS){let r=bn[n&8191];if(r)return r.read||(r.read=hy(r)),r.read();if(n<65536){if(n==R6){let a=Kc(),u=Te(),h=Te();dy(u,h);let p={};if(be.keyMap)for(let m=2;m<a;m++){let _=be.decodeKey(h[m-2]);p[Ns(_)]=Te()}else for(let m=2;m<a;m++){let _=h[m-2];p[Ns(_)]=Te()}return p}else if(n==D6){let a=Kc(),u=Te();for(let h=2;h<a;h++)dy(u++,Te());return Te()}else if(n==YS)return q6();if(be.getShared&&(Iv(),r=bn[n&8191],r))return r.read||(r.read=hy(r)),r.read()}}let s=Un[n];if(s)return s.handlesRead?s(Te):s(Te());{let r=Te();for(let a=0;a<uy.length;a++){let u=uy[a](n,r);if(u!==void 0)return u}return new Vl(r,n)}case 7:switch(n){case 20:return!1;case 21:return!0;case 22:return null;case 23:return;default:let r=(qi||El())[n];if(r!==void 0)return r;throw new Error("Unknown token "+n)}default:if(isNaN(n)){let r=new Error("Unexpected end of CBOR data");throw r.incomplete=!0,r}throw new Error("Unknown CBOR token "+n)}}const $S=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function hy(n){if(!n)throw new Error("Structure is required in record definition");function t(){let e=Gt[wt++];if(e=e&31,e>23)switch(e){case 24:e=Gt[wt++];break;case 25:e=bi.getUint16(wt),wt+=2;break;case 26:e=bi.getUint32(wt),wt+=4;break;default:throw new Error("Expected array header, but got "+Gt[wt-1])}let s=this.compiledReader;for(;s;){if(s.propertyCount===e)return s(Te);s=s.next}if(this.slowReads++>=UA){let a=this.length==e?this:this.slice(0,e);return s=be.keyMap?new Function("r","return {"+a.map(u=>be.decodeKey(u)).map(u=>$S.test(u)?Ns(u)+":r()":"["+JSON.stringify(u)+"]:r()").join(",")+"}"):new Function("r","return {"+a.map(u=>$S.test(u)?Ns(u)+":r()":"["+JSON.stringify(u)+"]:r()").join(",")+"}"),this.compiledReader&&(s.next=this.compiledReader),s.propertyCount=e,this.compiledReader=s,s(Te)}let r={};if(be.keyMap)for(let a=0;a<e;a++)r[Ns(be.decodeKey(this[a]))]=Te();else for(let a=0;a<e;a++)r[Ns(this[a])]=Te();return r}return n.slowReads=0,t}function Ns(n){if(typeof n=="string")return n==="__proto__"?"__proto_":n;if(typeof n=="number"||typeof n=="boolean"||typeof n=="bigint")return n.toString();if(n==null)return n+"";throw new Error("Invalid property name type "+typeof n)}let I6=fy;function fy(n){let t;if(n<16&&(t=BA(n)))return t;if(n>64&&cy)return cy.decode(Gt.subarray(wt,wt+=n));const e=wt+n,s=[];for(t="";wt<e;){const r=Gt[wt++];if((r&128)===0)s.push(r);else if((r&224)===192){const a=Gt[wt++]&63;s.push((r&31)<<6|a)}else if((r&240)===224){const a=Gt[wt++]&63,u=Gt[wt++]&63;s.push((r&31)<<12|a<<6|u)}else if((r&248)===240){const a=Gt[wt++]&63,u=Gt[wt++]&63,h=Gt[wt++]&63;let p=(r&7)<<18|a<<12|u<<6|h;p>65535&&(p-=65536,s.push(p>>>10&1023|55296),p=56320|p&1023),s.push(p)}else s.push(r);s.length>=4096&&(t+=Kn.apply(String,s),s.length=0)}return s.length>0&&(t+=Kn.apply(String,s)),t}let Kn=String.fromCharCode;function N6(n){let t=wt,e=new Array(n);for(let s=0;s<n;s++){const r=Gt[wt++];if((r&128)>0){wt=t;return}e[s]=r}return Kn.apply(String,e)}function BA(n){if(n<4)if(n<2){if(n===0)return"";{let t=Gt[wt++];if((t&128)>1){wt-=1;return}return Kn(t)}}else{let t=Gt[wt++],e=Gt[wt++];if((t&128)>0||(e&128)>0){wt-=2;return}if(n<3)return Kn(t,e);let s=Gt[wt++];if((s&128)>0){wt-=3;return}return Kn(t,e,s)}else{let t=Gt[wt++],e=Gt[wt++],s=Gt[wt++],r=Gt[wt++];if((t&128)>0||(e&128)>0||(s&128)>0||(r&128)>0){wt-=4;return}if(n<6){if(n===4)return Kn(t,e,s,r);{let a=Gt[wt++];if((a&128)>0){wt-=5;return}return Kn(t,e,s,r,a)}}else if(n<8){let a=Gt[wt++],u=Gt[wt++];if((a&128)>0||(u&128)>0){wt-=6;return}if(n<7)return Kn(t,e,s,r,a,u);let h=Gt[wt++];if((h&128)>0){wt-=7;return}return Kn(t,e,s,r,a,u,h)}else{let a=Gt[wt++],u=Gt[wt++],h=Gt[wt++],p=Gt[wt++];if((a&128)>0||(u&128)>0||(h&128)>0||(p&128)>0){wt-=8;return}if(n<10){if(n===8)return Kn(t,e,s,r,a,u,h,p);{let m=Gt[wt++];if((m&128)>0){wt-=9;return}return Kn(t,e,s,r,a,u,h,p,m)}}else if(n<12){let m=Gt[wt++],_=Gt[wt++];if((m&128)>0||(_&128)>0){wt-=10;return}if(n<11)return Kn(t,e,s,r,a,u,h,p,m,_);let g=Gt[wt++];if((g&128)>0){wt-=11;return}return Kn(t,e,s,r,a,u,h,p,m,_,g)}else{let m=Gt[wt++],_=Gt[wt++],g=Gt[wt++],b=Gt[wt++];if((m&128)>0||(_&128)>0||(g&128)>0||(b&128)>0){wt-=12;return}if(n<14){if(n===12)return Kn(t,e,s,r,a,u,h,p,m,_,g,b);{let x=Gt[wt++];if((x&128)>0){wt-=13;return}return Kn(t,e,s,r,a,u,h,p,m,_,g,b,x)}}else{let x=Gt[wt++],S=Gt[wt++];if((x&128)>0||(S&128)>0){wt-=14;return}if(n<15)return Kn(t,e,s,r,a,u,h,p,m,_,g,b,x,S);let A=Gt[wt++];if((A&128)>0){wt-=15;return}return Kn(t,e,s,r,a,u,h,p,m,_,g,b,x,S,A)}}}}}function P6(n){return be.copyBuffers?Uint8Array.prototype.slice.call(Gt,wt,wt+=n):Gt.subarray(wt,wt+=n)}let HA=new Float32Array(1),tp=new Uint8Array(HA.buffer,0,4);function z6(){let n=Gt[wt++],t=Gt[wt++],e=(n&127)>>2;if(e===31)return t||n&3?NaN:n&128?-1/0:1/0;if(e===0){let s=((n&3)<<8|t)/16777216;return n&128?-s:s}return tp[3]=n&128|(e>>1)+56,tp[2]=(n&7)<<5|t>>3,tp[1]=t<<5,tp[0]=0,HA[0]}new Array(4096);class Vl{constructor(t,e){this.value=t,this.tag=e}}Un[0]=n=>new Date(n);Un[1]=n=>new Date(Math.round(n*1e3));Un[2]=n=>{let t=BigInt(0);for(let e=0,s=n.byteLength;e<s;e++)t=BigInt(n[e])+(t<<BigInt(8));return t};Un[3]=n=>BigInt(-1)-Un[2](n);Un[4]=n=>+(n[1]+"e"+n[0]);Un[5]=n=>n[1]*Math.exp(n[0]*Math.log(2));const dy=(n,t)=>{n=n-57344;let e=bn[n];e&&e.isShared&&((bn.restoreStructures||(bn.restoreStructures=[]))[n]=e),bn[n]=t,t.read=hy(t)};Un[O6]=n=>{let t=n.length,e=n[1];dy(n[0],e);let s={};for(let r=2;r<t;r++){let a=e[r-2];s[Ns(a)]=n[r]}return s};Un[14]=n=>Zn?Zn[0].slice(Zn.position0,Zn.position0+=n):new Vl(n,14);Un[15]=n=>Zn?Zn[1].slice(Zn.position1,Zn.position1+=n):new Vl(n,15);let U6={Error,RegExp};Un[27]=n=>(U6[n[0]]||Error)(n[1],n[2]);const VA=n=>{if(Gt[wt++]!=132){let e=new Error("Packed values structure must be followed by a 4 element array");throw Gt.length<wt&&(e.incomplete=!0),e}let t=n();if(!t||!t.length){let e=new Error("Packed values structure must be followed by a 4 element array");throw e.incomplete=!0,e}return qi=qi?t.concat(qi.slice(t.length)):t,qi.prefixes=n(),qi.suffixes=n(),n()};VA.handlesRead=!0;Un[51]=VA;Un[XS]=n=>{if(!qi)if(be.getShared)Iv();else return new Vl(n,XS);if(typeof n=="number")return qi[16+(n>=0?2*n:-2*n-1)];let t=new Error("No support for non-integer packed references yet");throw n===void 0&&(t.incomplete=!0),t};Un[28]=n=>{Is||(Is=new Map,Is.id=0);let t=Is.id++,e=wt,s=Gt[wt],r;s>>5==4?r=[]:r={};let a={target:r};Is.set(t,a);let u=n();return a.used?(Object.getPrototypeOf(r)!==Object.getPrototypeOf(u)&&(wt=e,r=u,Is.set(t,{target:r}),u=n()),Object.assign(r,u)):(a.target=u,u)};Un[28].handlesRead=!0;Un[29]=n=>{let t=Is.get(n);return t.used=!0,t.target};Un[258]=n=>new Set(n);(Un[259]=n=>(be.mapsAsObjects&&(be.mapsAsObjects=!1,Lh=!0),n())).handlesRead=!0;function Vc(n,t){return typeof n=="string"?n+t:n instanceof Array?n.concat(t):Object.assign({},n,t)}function El(){if(!qi)if(be.getShared)Iv();else throw new Error("No packed values available");return qi}const B6=1399353956;uy.push((n,t)=>{if(n>=225&&n<=255)return Vc(El().prefixes[n-224],t);if(n>=28704&&n<=32767)return Vc(El().prefixes[n-28672],t);if(n>=1879052288&&n<=2147483647)return Vc(El().prefixes[n-1879048192],t);if(n>=216&&n<=223)return Vc(t,El().suffixes[n-216]);if(n>=27647&&n<=28671)return Vc(t,El().suffixes[n-27639]);if(n>=1811940352&&n<=1879048191)return Vc(t,El().suffixes[n-1811939328]);if(n==B6)return{packedValues:qi,structures:bn.slice(0),version:t};if(n==55799)return t});const H6=new Uint8Array(new Uint16Array([1]).buffer)[0]==1,KS=[Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?{name:"BigUint64Array"}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?{name:"BigInt64Array"}:BigInt64Array,Float32Array,Float64Array],V6=[64,68,69,70,71,72,77,78,79,85,86];for(let n=0;n<KS.length;n++)j6(KS[n],V6[n]);function j6(n,t){let e="get"+n.name.slice(0,-5),s;typeof n=="function"?s=n.BYTES_PER_ELEMENT:n=null;for(let r=0;r<2;r++){if(!r&&s==1)continue;let a=s==2?1:s==4?2:s==8?3:0;Un[r?t:t-4]=s==1||r==H6?u=>{if(!n)throw new Error("Could not find typed array for code "+t);return!be.copyBuffers&&(s===1||s===2&&!(u.byteOffset&1)||s===4&&!(u.byteOffset&3)||s===8&&!(u.byteOffset&7))?new n(u.buffer,u.byteOffset,u.byteLength>>a):new n(Uint8Array.prototype.slice.call(u,0).buffer)}:u=>{if(!n)throw new Error("Could not find typed array for code "+t);let h=new DataView(u.buffer,u.byteOffset,u.byteLength),p=u.length>>a,m=new n(p),_=h[e];for(let g=0;g<p;g++)m[g]=_.call(h,g<<a,r);return m}}}function q6(){let n=Kc(),t=wt+Te();for(let s=2;s<n;s++){let r=Kc();wt+=r}let e=wt;return wt=t,Zn=[fy(Kc()),fy(Kc())],Zn.position0=0,Zn.position1=0,Zn.postBundlePosition=wt,wt=e,Te()}function Kc(){let n=Gt[wt++]&31;if(n>23)switch(n){case 24:n=Gt[wt++];break;case 25:n=bi.getUint16(wt),wt+=2;break;case 26:n=bi.getUint32(wt),wt+=4;break}return n}function Iv(){if(be.getShared){let n=jA(()=>(Gt=null,be.getShared()))||{},t=n.structures||[];be.sharedVersion=n.version,qi=be.sharedValues=n.packedValues,bn===!0?be.structures=bn=t:bn.splice.apply(bn,[0,t.length].concat(t))}}function jA(n){let t=Pl,e=wt,s=Wp,r=$h,a=Zp,u=Is,h=Zn,p=new Uint8Array(Gt.slice(0,Pl)),m=bn,_=be,g=Kh,b=n();return Pl=t,wt=e,Wp=s,$h=r,Zp=a,Is=u,Zn=h,Gt=p,Kh=g,bn=m,be=_,bi=new DataView(Gt.buffer,Gt.byteOffset,Gt.byteLength),b}function py(){Gt=null,Is=null,bn=null}const Nv=new Array(147);for(let n=0;n<256;n++)Nv[n]=+("1e"+Math.floor(45.15-n*.30103));let Pv=new Jh({useRecords:!1});const qA=Pv.decode;Pv.decodeMultiple;let pp;try{pp=new TextEncoder}catch{}let my,GA;const km=typeof globalThis=="object"&&globalThis.Buffer,bf=typeof km<"u",E0=bf?km.allocUnsafeSlow:Uint8Array,JS=bf?km:Uint8Array,t2=256,e2=bf?4294967296:2144337920;let C0,ut,rn,it=0,Ta,qn=null;const G6=61440,Z6=/[\u0080-\uFFFF]/,os=Symbol("record-id");class ZA extends Jh{constructor(t){super(t),this.offset=0;let e,s,r,a,u;t=t||{};let h=JS.prototype.utf8Write?function(k,X,W){return ut.utf8Write(k,X,W)}:pp&&pp.encodeInto?function(k,X){return pp.encodeInto(k,ut.subarray(X)).written}:!1,p=this,m=t.structures||t.saveStructures,_=t.maxSharedStructures;if(_==null&&(_=m?128:0),_>8190)throw new Error("Maximum maxSharedStructure is 8190");let g=t.sequential;g&&(_=0),this.structures||(this.structures=[]),this.saveStructures&&(this.saveShared=this.saveStructures);let b,x,S=t.sharedValues,A;if(S){A=Object.create(null);for(let k=0,X=S.length;k<X;k++)A[S[k]]=k}let E=[],R=0,z=0;this.mapEncode=function(k,X){return this._keyMap&&!this._mapped&&k.constructor.name==="Array"&&(k=k.map(W=>this.encodeKeys(W))),this.encode(k,X)},this.encode=function(k,X){if(ut||(ut=new E0(8192),rn=new DataView(ut.buffer,0,8192),it=0),Ta=ut.length-10,Ta-it<2048?(ut=new E0(ut.length),rn=new DataView(ut.buffer,0,ut.length),Ta=ut.length-10,it=0):X===s2&&(it=it+7&2147483640),e=it,p.useSelfDescribedHeader&&(rn.setUint32(it,3654940416),it+=3),u=p.structuredClone?new Map:null,p.bundleStrings&&typeof k!="string"?(qn=[],qn.size=1/0):qn=null,s=p.structures,s){if(s.uninitialized){let P=p.getShared()||{};p.structures=s=P.structures||[],p.sharedVersion=P.version;let U=p.sharedValues=P.packedValues;if(U){A={};for(let K=0,D=U.length;K<D;K++)A[U[K]]=K}}let W=s.length;if(W>_&&!g&&(W=_),!s.transitions){s.transitions=Object.create(null);for(let P=0;P<W;P++){let U=s[P];if(!U)continue;let K,D=s.transitions;for(let V=0,I=U.length;V<I;V++){D[os]===void 0&&(D[os]=P);let q=U[V];K=D[q],K||(K=D[q]=Object.create(null)),D=K}D[os]=P|1048576}}g||(s.nextId=W)}if(r&&(r=!1),a=s||[],x=A,t.pack){let W=new Map;if(W.values=[],W.encoder=p,W.maxValues=t.maxPrivatePackedValues||(A?16:1/0),W.objectMap=A||!1,W.samplingPackedValues=b,mp(k,W),W.values.length>0){ut[it++]=216,ut[it++]=51,Nr(4);let P=W.values;O(P),Nr(0),Nr(0),x=Object.create(A||null);for(let U=0,K=P.length;U<K;U++)x[P[U]]=U}}C0=X&M0;try{if(C0)return;if(O(k),qn&&i2(e,O),p.offset=it,u&&u.idsToInsert){it+=u.idsToInsert.length*2,it>Ta&&N(it),p.offset=it;let W=Y6(ut.subarray(e,it),u.idsToInsert);return u=null,W}return X&s2?(ut.start=e,ut.end=it,ut):ut.subarray(e,it)}finally{if(s){if(z<10&&z++,s.length>_&&(s.length=_),R>1e4)s.transitions=null,z=0,R=0,E.length>0&&(E=[]);else if(E.length>0&&!g){for(let W=0,P=E.length;W<P;W++)E[W][os]=void 0;E=[]}}if(r&&p.saveShared){p.structures.length>_&&(p.structures=p.structures.slice(0,_));let W=ut.subarray(e,it);return p.updateSharedData()===!1?p.encode(k):W}X&X6&&(it=e)}},this.findCommonStringsToPack=()=>(b=new Map,A||(A=Object.create(null)),k=>{let X=k&&k.threshold||4,W=this.pack?k.maxPrivatePackedValues||16:0;S||(S=this.sharedValues=[]);for(let[P,U]of b)U.count>X&&(A[P]=W++,S.push(P),r=!0);for(;this.saveShared&&this.updateSharedData()===!1;);b=null});const O=k=>{it>Ta&&(ut=N(it));var X=typeof k,W;if(X==="string"){if(x){let D=x[k];if(D>=0){D<16?ut[it++]=D+224:(ut[it++]=198,D&1?O(15-D>>1):O(D-16>>1));return}else if(b&&!t.pack){let V=b.get(k);V?V.count++:b.set(k,{count:1})}}let P=k.length;if(qn&&P>=4&&P<1024){if((qn.size+=P)>G6){let V,I=(qn[0]?qn[0].length*3+qn[1].length:0)+10;it+I>Ta&&(ut=N(it+I)),ut[it++]=217,ut[it++]=223,ut[it++]=249,ut[it++]=qn.position?132:130,ut[it++]=26,V=it-e,it+=4,qn.position&&i2(e,O),qn=["",""],qn.size=0,qn.position=V}let D=Z6.test(k);qn[D?0:1]+=k,ut[it++]=D?206:207,O(P);return}let U;P<32?U=1:P<256?U=2:P<65536?U=3:U=5;let K=P*3;if(it+K>Ta&&(ut=N(it+K)),P<64||!h){let D,V,I,q=it+U;for(D=0;D<P;D++)V=k.charCodeAt(D),V<128?ut[q++]=V:V<2048?(ut[q++]=V>>6|192,ut[q++]=V&63|128):(V&64512)===55296&&((I=k.charCodeAt(D+1))&64512)===56320?(V=65536+((V&1023)<<10)+(I&1023),D++,ut[q++]=V>>18|240,ut[q++]=V>>12&63|128,ut[q++]=V>>6&63|128,ut[q++]=V&63|128):(ut[q++]=V>>12|224,ut[q++]=V>>6&63|128,ut[q++]=V&63|128);W=q-it-U}else W=h(k,it+U,K);W<24?ut[it++]=96|W:W<256?(U<2&&ut.copyWithin(it+2,it+1,it+1+W),ut[it++]=120,ut[it++]=W):W<65536?(U<3&&ut.copyWithin(it+3,it+2,it+2+W),ut[it++]=121,ut[it++]=W>>8,ut[it++]=W&255):(U<5&&ut.copyWithin(it+5,it+3,it+3+W),ut[it++]=122,rn.setUint32(it,W),it+=4),it+=W}else if(X==="number")if(!this.alwaysUseFloat&&k>>>0===k)k<24?ut[it++]=k:k<256?(ut[it++]=24,ut[it++]=k):k<65536?(ut[it++]=25,ut[it++]=k>>8,ut[it++]=k&255):(ut[it++]=26,rn.setUint32(it,k),it+=4);else if(!this.alwaysUseFloat&&k>>0===k)k>=-24?ut[it++]=31-k:k>=-256?(ut[it++]=56,ut[it++]=~k):k>=-65536?(ut[it++]=57,rn.setUint16(it,~k),it+=2):(ut[it++]=58,rn.setUint32(it,~k),it+=4);else{let P;if((P=this.useFloat32)>0&&k<4294967296&&k>=-2147483648){ut[it++]=250,rn.setFloat32(it,k);let U;if(P<4||(U=k*Nv[(ut[it]&127)<<1|ut[it+1]>>7])>>0===U){it+=4;return}else it--}ut[it++]=251,rn.setFloat64(it,k),it+=8}else if(X==="object")if(!k)ut[it++]=246;else{if(u){let U=u.get(k);if(U){if(ut[it++]=216,ut[it++]=29,ut[it++]=25,!U.references){let K=u.idsToInsert||(u.idsToInsert=[]);U.references=[],K.push(U)}U.references.push(it-e),it+=2;return}else u.set(k,{offset:it-e})}let P=k.constructor;if(P===Object)Q(k);else if(P===Array){W=k.length,W<24?ut[it++]=128|W:Nr(W);for(let U=0;U<W;U++)O(k[U])}else if(P===Map)if((this.mapsAsObjects?this.useTag259ForMaps!==!1:this.useTag259ForMaps)&&(ut[it++]=217,ut[it++]=1,ut[it++]=3),W=k.size,W<24?ut[it++]=160|W:W<256?(ut[it++]=184,ut[it++]=W):W<65536?(ut[it++]=185,ut[it++]=W>>8,ut[it++]=W&255):(ut[it++]=186,rn.setUint32(it,W),it+=4),p.keyMap)for(let[U,K]of k)O(p.encodeKey(U)),O(K);else for(let[U,K]of k)O(U),O(K);else{for(let U=0,K=my.length;U<K;U++){let D=GA[U];if(k instanceof D){let V=my[U],I=V.tag;I==null&&(I=V.getTag&&V.getTag.call(this,k)),I<24?ut[it++]=192|I:I<256?(ut[it++]=216,ut[it++]=I):I<65536?(ut[it++]=217,ut[it++]=I>>8,ut[it++]=I&255):I>-1&&(ut[it++]=218,rn.setUint32(it,I),it+=4),V.encode.call(this,k,O,N);return}}if(k[Symbol.iterator]){if(C0){let U=new Error("Iterable should be serialized as iterator");throw U.iteratorNotHandled=!0,U}ut[it++]=159;for(let U of k)O(U);ut[it++]=255;return}if(k[Symbol.asyncIterator]||L0(k)){let U=new Error("Iterable/blob should be serialized as iterator");throw U.iteratorNotHandled=!0,U}if(this.useToJSON&&k.toJSON){const U=k.toJSON();if(U!==k)return O(U)}Q(k)}}else if(X==="boolean")ut[it++]=k?245:244;else if(X==="bigint"){if(k<BigInt(1)<<BigInt(64)&&k>=0)ut[it++]=27,rn.setBigUint64(it,k);else if(k>-(BigInt(1)<<BigInt(64))&&k<0)ut[it++]=59,rn.setBigUint64(it,-k-BigInt(1));else if(this.largeBigIntToFloat)ut[it++]=251,rn.setFloat64(it,Number(k));else{k>=BigInt(0)?ut[it++]=194:(ut[it++]=195,k=BigInt(-1)-k);let P=[];for(;k;)P.push(Number(k&BigInt(255))),k>>=BigInt(8);_y(new Uint8Array(P.reverse()),N);return}it+=8}else if(X==="undefined")ut[it++]=247;else throw new Error("Unknown type: "+X)},Q=this.useRecords===!1?this.variableMapSize?k=>{let X=Object.keys(k),W=Object.values(k),P=X.length;if(P<24?ut[it++]=160|P:P<256?(ut[it++]=184,ut[it++]=P):P<65536?(ut[it++]=185,ut[it++]=P>>8,ut[it++]=P&255):(ut[it++]=186,rn.setUint32(it,P),it+=4),p.keyMap)for(let U=0;U<P;U++)O(p.encodeKey(X[U])),O(W[U]);else for(let U=0;U<P;U++)O(X[U]),O(W[U])}:k=>{ut[it++]=185;let X=it-e;it+=2;let W=0;if(p.keyMap)for(let P in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(P))&&(O(p.encodeKey(P)),O(k[P]),W++);else for(let P in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(P))&&(O(P),O(k[P]),W++);ut[X+++e]=W>>8,ut[X+e]=W&255}:(k,X)=>{let W,P=a.transitions||(a.transitions=Object.create(null)),U=0,K=0,D,V;if(this.keyMap){V=Object.keys(k).map(q=>this.encodeKey(q)),K=V.length;for(let q=0;q<K;q++){let at=V[q];W=P[at],W||(W=P[at]=Object.create(null),U++),P=W}}else for(let q in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(q))&&(W=P[q],W||(P[os]&1048576&&(D=P[os]&65535),W=P[q]=Object.create(null),U++),P=W,K++);let I=P[os];if(I!==void 0)I&=65535,ut[it++]=217,ut[it++]=I>>8|224,ut[it++]=I&255;else if(V||(V=P.__keys__||(P.__keys__=Object.keys(k))),D===void 0?(I=a.nextId++,I||(I=0,a.nextId=1),I>=t2&&(a.nextId=(I=_)+1)):I=D,a[I]=V,I<_){ut[it++]=217,ut[it++]=I>>8|224,ut[it++]=I&255,P=a.transitions;for(let q=0;q<K;q++)(P[os]===void 0||P[os]&1048576)&&(P[os]=I),P=P[V[q]];P[os]=I|1048576,r=!0}else{if(P[os]=I,rn.setUint32(it,3655335680),it+=3,U&&(R+=z*U),E.length>=t2-_&&(E.shift()[os]=void 0),E.push(P),Nr(K+2),O(57344+I),O(V),X)return;for(let q in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(q))&&O(k[q]);return}if(K<24?ut[it++]=128|K:Nr(K),!X)for(let q in k)(typeof k.hasOwnProperty!="function"||k.hasOwnProperty(q))&&O(k[q])},N=k=>{let X;if(k>16777216){if(k-e>e2)throw new Error("Encoded buffer would be larger than maximum buffer size");X=Math.min(e2,Math.round(Math.max((k-e)*(k>67108864?1.25:2),4194304)/4096)*4096)}else X=(Math.max(k-e<<2,ut.length-1)>>12)+1<<12;let W=new E0(X);return rn=new DataView(W.buffer,0,X),ut.copy?ut.copy(W,0,e,k):W.set(ut.slice(e,k)),it-=e,e=0,Ta=W.length-10,ut=W};let j=100,Y=1e3;this.encodeAsIterable=function(k,X){return $(k,X,G)},this.encodeAsAsyncIterable=function(k,X){return $(k,X,et)};function*G(k,X,W){let P=k.constructor;if(P===Object){let U=p.useRecords!==!1;U?Q(k,!0):n2(Object.keys(k).length,160);for(let K in k){let D=k[K];U||O(K),D&&typeof D=="object"?X[K]?yield*G(D,X[K]):yield*Z(D,X,K):O(D)}}else if(P===Array){let U=k.length;Nr(U);for(let K=0;K<U;K++){let D=k[K];D&&(typeof D=="object"||it-e>j)?X.element?yield*G(D,X.element):yield*Z(D,X,"element"):O(D)}}else if(k[Symbol.iterator]&&!k.buffer){ut[it++]=159;for(let U of k)U&&(typeof U=="object"||it-e>j)?X.element?yield*G(U,X.element):yield*Z(U,X,"element"):O(U);ut[it++]=255}else L0(k)?(n2(k.size,64),yield ut.subarray(e,it),yield k,F()):k[Symbol.asyncIterator]?(ut[it++]=159,yield ut.subarray(e,it),yield k,F(),ut[it++]=255):O(k);W&&it>e?yield ut.subarray(e,it):it-e>j&&(yield ut.subarray(e,it),F())}function*Z(k,X,W){let P=it-e;try{O(k),it-e>j&&(yield ut.subarray(e,it),F())}catch(U){if(U.iteratorNotHandled)X[W]={},it=e+P,yield*G.call(this,k,X[W]);else throw U}}function F(){j=Y,p.encode(null,M0)}function $(k,X,W){return X&&X.chunkThreshold?j=Y=X.chunkThreshold:j=100,k&&typeof k=="object"?(p.encode(null,M0),W(k,p.iterateProperties||(p.iterateProperties={}),!0)):[p.encode(k)]}async function*et(k,X){for(let W of G(k,X,!0)){let P=W.constructor;if(P===JS||P===Uint8Array)yield W;else if(L0(W)){let U=W.stream().getReader(),K;for(;!(K=await U.read()).done;)yield K.value}else if(W[Symbol.asyncIterator])for await(let U of W)F(),U?yield*et(U,X.async||(X.async={})):yield p.encode(U);else yield W}}}useBuffer(t){ut=t,rn=new DataView(ut.buffer,ut.byteOffset,ut.byteLength),it=0}clearSharedData(){this.structures&&(this.structures=[]),this.sharedValues&&(this.sharedValues=void 0)}updateSharedData(){let t=this.sharedVersion||0;this.sharedVersion=t+1;let e=this.structures.slice(0),s=new WA(e,this.sharedValues,this.sharedVersion),r=this.saveShared(s,a=>(a&&a.version||0)==t);return r===!1?(s=this.getShared()||{},this.structures=s.structures||[],this.sharedValues=s.packedValues,this.sharedVersion=s.version,this.structures.nextId=this.structures.length):e.forEach((a,u)=>this.structures[u]=a),r}}function n2(n,t){n<24?ut[it++]=t|n:n<256?(ut[it++]=t|24,ut[it++]=n):n<65536?(ut[it++]=t|25,ut[it++]=n>>8,ut[it++]=n&255):(ut[it++]=t|26,rn.setUint32(it,n),it+=4)}class WA{constructor(t,e,s){this.structures=t,this.packedValues=e,this.version=s}}function Nr(n){n<24?ut[it++]=128|n:n<256?(ut[it++]=152,ut[it++]=n):n<65536?(ut[it++]=153,ut[it++]=n>>8,ut[it++]=n&255):(ut[it++]=154,rn.setUint32(it,n),it+=4)}const W6=typeof Blob>"u"?function(){}:Blob;function L0(n){if(n instanceof W6)return!0;let t=n[Symbol.toStringTag];return t==="Blob"||t==="File"}function mp(n,t){switch(typeof n){case"string":if(n.length>3){if(t.objectMap[n]>-1||t.values.length>=t.maxValues)return;let s=t.get(n);if(s)++s.count==2&&t.values.push(n);else if(t.set(n,{count:1}),t.samplingPackedValues){let r=t.samplingPackedValues.get(n);r?r.count++:t.samplingPackedValues.set(n,{count:1})}}break;case"object":if(n)if(n instanceof Array)for(let s=0,r=n.length;s<r;s++)mp(n[s],t);else{let s=!t.encoder.useRecords;for(var e in n)n.hasOwnProperty(e)&&(s&&mp(e,t),mp(n[e],t))}break;case"function":console.log(n)}}const F6=new Uint8Array(new Uint16Array([1]).buffer)[0]==1;GA=[Date,Set,Error,RegExp,Vl,ArrayBuffer,Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,typeof BigUint64Array>"u"?function(){}:BigUint64Array,Int8Array,Int16Array,Int32Array,typeof BigInt64Array>"u"?function(){}:BigInt64Array,Float32Array,Float64Array,WA];my=[{tag:1,encode(n,t){let e=n.getTime()/1e3;(this.useTimestamp32||n.getMilliseconds()===0)&&e>=0&&e<4294967296?(ut[it++]=26,rn.setUint32(it,e),it+=4):(ut[it++]=251,rn.setFloat64(it,e),it+=8)}},{tag:258,encode(n,t){let e=Array.from(n);t(e)}},{tag:27,encode(n,t){t([n.name,n.message])}},{tag:27,encode(n,t){t(["RegExp",n.source,n.flags])}},{getTag(n){return n.tag},encode(n,t){t(n.value)}},{encode(n,t,e){_y(n,e)}},{getTag(n){if(n.constructor===Uint8Array&&(this.tagUint8Array||bf&&this.tagUint8Array!==!1))return 64},encode(n,t,e){_y(n,e)}},Dr(68,1),Dr(69,2),Dr(70,4),Dr(71,8),Dr(72,1),Dr(77,2),Dr(78,4),Dr(79,8),Dr(85,4),Dr(86,8),{encode(n,t){let e=n.packedValues||[],s=n.structures||[];if(e.values.length>0){ut[it++]=216,ut[it++]=51,Nr(4);let r=e.values;t(r),Nr(0),Nr(0),packedObjectMap=Object.create(sharedPackedObjectMap||null);for(let a=0,u=r.length;a<u;a++)packedObjectMap[r[a]]=a}if(s){rn.setUint32(it,3655335424),it+=3;let r=s.slice(0);r.unshift(57344),r.push(new Vl(n.version,1399353956)),t(r)}else t(new Vl(n.version,1399353956))}}];function Dr(n,t){return!F6&&t>1&&(n-=4),{tag:n,encode:function(s,r){let a=s.byteLength,u=s.byteOffset||0,h=s.buffer||s;r(bf?km.from(h,u,a):new Uint8Array(h,u,a))}}}function _y(n,t){let e=n.byteLength;e<24?ut[it++]=64+e:e<256?(ut[it++]=88,ut[it++]=e):e<65536?(ut[it++]=89,ut[it++]=e>>8,ut[it++]=e&255):(ut[it++]=90,rn.setUint32(it,e),it+=4),it+e>=ut.length&&t(it+e),ut.set(n.buffer?n:new Uint8Array(n),it),it+=e}function Y6(n,t){let e,s=t.length*2,r=n.length-s;t.sort((a,u)=>a.offset>u.offset?1:-1);for(let a=0;a<t.length;a++){let u=t[a];u.id=a;for(let h of u.references)n[h++]=a>>8,n[h]=a&255}for(;e=t.pop();){let a=e.offset;n.copyWithin(a+s,a,r),s-=2;let u=a+s;n[u++]=216,n[u++]=28,r=a}return n}function i2(n,t){rn.setUint32(qn.position+n,it-qn.position-n+1);let e=qn;qn=null,t(e[0]),t(e[1])}let zv=new ZA({useRecords:!1});zv.encode;zv.encodeAsIterable;zv.encodeAsAsyncIterable;const s2=512,X6=1024,M0=2048;function FA(n){return new ZA({tagUint8Array:!1,useRecords:!1}).encode(n)}function Q6(n){return qA(n)}const $6=(n,t)=>n.length===t.length&&n.every((e,s)=>e===t[s]),Uv=(n,t)=>$6(n,t),K6=async(n,t)=>{let e;const s=new Promise((r,a)=>{e=setTimeout(()=>a(new J6(`withTimeout: timed out after ${t}ms`)),t)});try{return await Promise.race([n,s])}finally{clearTimeout(e)}};class J6 extends Error{constructor(t){super(t),this.name="TimeoutError"}}class Om extends DOMException{constructor(t){super(t??"Operation aborted","AbortError")}}const tR=n=>n instanceof Om||(n instanceof Error||DOMException&&n instanceof DOMException)&&n.name==="AbortError";function r2(n,t){let e=!1;return new Promise((s,r)=>{t?.addEventListener("abort",()=>{e||r(new Om)},{once:!0}),n.then(a=>{s(a)}).catch(a=>{r(a)}).finally(()=>{e=!0})})}const Pn="AUTOMERGE_REF_KIND",eR="AUTOMERGE_REF_CURSOR_MARKER",nR="automerge:",_p="\\",ep="%5C",YA="@",gp="[",k0="]",o2="-",a2=[_p,YA,"{",gp],l2=/^@(\d+)$/,iR={kind:"index",match:n=>l2.test(n),parse:n=>{const t=n.match(l2);if(!t)throw new Error(`Invalid index: ${n}`);return{[Pn]:"index",index:parseInt(t[1],10)}},serialize:n=>`${YA}${n.index}`},sR={kind:"match",match:n=>n.startsWith("{")||n.startsWith("%7B"),parse:n=>{try{const t=decodeURIComponent(n),e=JSON.parse(t);if(typeof e!="object"||e===null||Array.isArray(e))throw new Error("Match pattern must be a plain object");return{[Pn]:"match",match:e}}catch(t){throw new Error(`Invalid match pattern: ${n}. ${t instanceof Error?t.message:""}`)}},serialize:n=>encodeURIComponent(JSON.stringify(n.match))},rR={kind:"cursors",match:n=>n.startsWith(gp)&&n.endsWith(k0),parse:n=>{const t=n.slice(1,-1);if(!t)throw new Error("Invalid cursor range: empty brackets");const e=t.indexOf(o2);if(e===-1){const a=t;return{[Pn]:"cursors",start:a,end:a}}const s=t.slice(0,e),r=t.slice(e+1);if(!s||!r)throw new Error(`Invalid cursor range: ${n}. Expected format: [cursor] or [start-end]`);return{[Pn]:"cursors",start:s,end:r}},serialize:n=>n.start===n.end?`${gp}${n.start}${k0}`:`${gp}${n.start}${o2}${n.end}${k0}`},oR={kind:"key",match:n=>{if(n.startsWith(ep)||n.startsWith(_p))return!0;const t=aR(n);return!a2.some(e=>n.startsWith(e)||t.startsWith(e))},parse:n=>n.startsWith(ep)?{[Pn]:"key",key:decodeURIComponent(n.slice(ep.length))}:n.startsWith(_p)?{[Pn]:"key",key:decodeURIComponent(n.slice(_p.length))}:{[Pn]:"key",key:decodeURIComponent(n)},serialize:n=>{const t=a2.some(s=>n.key.startsWith(s)),e=encodeURIComponent(n.key);return t?`${ep}${e}`:e}};function aR(n){try{return decodeURIComponent(n)}catch{return n}}const lR=[iR,sR,rR,oR];function cR(n){for(const t of lR)if(n[Pn]===t.kind)return t.serialize(n);throw new Error(`No codec found for segment kind: ${n[Pn]}`)}function uR(n){return n.map(cR).join("/")}function hR(n){return n.length>0?`#${n.join("|")}`:""}function fR(n,t,e){const s=uR(t),r=e?hR(e):"";return`${nR}${n}/${s}${r}`}function Bv(n){return n!==null&&typeof n=="object"&&!Array.isArray(n)}function XA(n){return Bv(n)&&Pn in n}function QA(n){return Bv(n)&&eR in n}function dR(n){return Bv(n)&&!XA(n)&&!QA(n)}function c2(n,t){return Object.entries(t).every(([e,s])=>n[e]===s)}function pR(n,t,e){const s={splice(r,a,u){oA(n,t,r,a,u)},updateText(r){j8(n,t,r)}};return new Proxy(s,{get(r,a){if(a in r)return r[a];const h=e[a];return typeof h=="function"?h.bind(e):h},getPrototypeOf(){return String.prototype}})}const mR=new FinalizationRegistry(n=>n());class _R{docHandle;path;range;#t=new Set;#e;constructor(t,e){this.docHandle=t;const s=t.doc(),{path:r,range:a}=this.#r(s,e);this.path=r,this.range=a,this.#e=()=>{const u=this.docHandle.doc();this.#l(u)},this.docHandle.on("change",this.#e),mR.register(this,()=>this.#i(),this)}#i(){this.docHandle.off("change",this.#e);for(const t of this.#t)this.docHandle.off("change",t);this.#t.clear()}get rangePositions(){if(!this.range)return;const t=this.#c();if(!t)return;const e=this.doc();return this.#d(e,t,this.range)}viewAt(t){return this.docHandle.view(rr(t)).ref(...this.path)}value(){const t=this.doc(),e=this.#c();if(!e)return;const s=this.#h(t,e);return this.range?this.#m(t,e,s,this.range):s}doc(){return this.docHandle.doc()}change(t){if(this.docHandle.isReadOnly())throw new Error("Cannot change a Ref on a read-only handle");const e=typeof t=="function"?t:()=>t;this.docHandle.change(s=>{if(this.path.length===0&&!this.range){e(s);return}const r=this.#c();if(!r)throw new Error("Cannot resolve path");let a;if(this.range){const p=this.#h(s,r);if(typeof p!="string")throw new Error("Range refs can only be used on string values");a=this.#m(s,r,p,this.range)}else a=this.#h(s,r);const u=typeof a=="string"?pR(s,r,a):a,h=e(u);h!==void 0&&(h===null||typeof h=="string"||typeof h=="number"||typeof h=="boolean"||typeof h=="bigint"||console.warn("Ref.change() returned a non-primitive value. For objects and arrays, you should mutate them in place rather than returning a new instance. Returning new instances loses granular change tracking."),this.range?this.#_(s,r,this.range,h):this.#f(s,r,h))})}remove(){if(this.docHandle.isReadOnly())throw new Error("Cannot remove from a Ref on a read-only handle");if(this.path.length===0&&!this.range)throw new Error("Cannot remove the root document");this.docHandle.change(t=>{const e=this.#c();if(!e||e.length===0)throw new Error("Cannot resolve path for removal");if(this.range){this.#_(t,e,this.range,"");return}const s=e.slice(0,-1),r=e[e.length-1],a=s.length===0?t:this.#h(t,s);if(a==null)throw new Error("Cannot remove: parent is null or undefined");if(Array.isArray(a)){if(typeof r!="number")throw new Error("Cannot remove from array: key is not a number");a.splice(r,1)}else delete a[r]})}onChange(t){const e=r=>{if(this.#y(r.patches)){const a=this.value();t(a,r)}};return this.docHandle.on("change",e),this.#t.add(e),()=>{this.docHandle.off("change",e),this.#t.delete(e)}}get url(){const t=this.range?[...this.path,this.range]:this.path,e=this.docHandle.isReadOnly()?Ca(this.docHandle.heads()):void 0;return fR(this.docHandle.documentId,t,e)}equals(t){return this.url===t.url}contains(t){if(this.docHandle.documentId!==t.docHandle.documentId||this.docHandle.url!==t.docHandle.url||this.path.length>=t.path.length)return!1;for(let e=0;e<this.path.length;e++)if(!this.#s(this.path[e],t.path[e]))return!1;return!0}isChildOf(t){if(this.docHandle.documentId!==t.docHandle.documentId||this.docHandle.url!==t.docHandle.url||this.path.length<t.path.length)return!1;for(let e=0;e<t.path.length;e++)if(!this.#s(this.path[e],t.path[e]))return!1;return this.path.length===t.path.length?this.range!==void 0&&t.range===void 0:this.path.length===t.path.length+1}overlaps(t){if(this.docHandle.documentId!==t.docHandle.documentId||this.docHandle.url!==t.docHandle.url||!this.range||!t.range||this.path.length!==t.path.length)return!1;for(let _=0;_<this.path.length;_++)if(!this.#s(this.path[_],t.path[_]))return!1;const e=this.doc(),s=this.#c();if(!s)return!1;const r=this.#d(e,s,this.range),a=this.#d(e,s,t.range);if(!r||!a)return!1;const[u,h]=r,[p,m]=a;return u<m&&p<h}isEquivalent(t){if(this===t)return!0;if(this.docHandle.documentId!==t.docHandle.documentId||!this.#n(t)||this.path.length!==t.path.length||this.range===void 0!=(t.range===void 0))return!1;let e=!0;for(let s=0;s<this.path.length;s++)if(!this.#s(this.path[s],t.path[s])){e=!1;break}if(e)return!this.range&&!t.range?!0:this.range.start===t.range.start&&this.range.end===t.range.end;for(let s=0;s<this.path.length;s++){const r=this.path[s].prop,a=t.path[s].prop;if(r===void 0||a===void 0||r!==a)return!1}return!this.range&&!t.range?!0:this.range.start===t.range.start&&this.range.end===t.range.end}valueOf(){return this.url}toString(){return this.url}#n(t){if(this.docHandle.url===t.docHandle.url)return!0;const e=this.docHandle.heads().join(","),s=t.docHandle.heads().join(",");return e===s}#r(t,e){const s=[],r=[];let a=t,u;for(let h=0;h<e.length;h++){const p=e[h];if(QA(p)){if(h<e.length-1)throw new Error("cursor() must be the last segment in a ref path. Segments after cursor() are not allowed.");u=this.#u(t,r,a,p);break}const m=XA(p)?this.#o(a,p):this.#p(a,p);if(m[Pn]==="cursors"){if(h<e.length-1)throw new Error("Cursor range must be the last segment in a ref path. Segments after cursor range are not allowed.");u=m;break}s.push(m),m.prop!==void 0&&a!==void 0&&a!==null&&(r.push(m.prop),a=a[m.prop])}return{path:s,range:u}}#o(t,e){const s=this.#a(t,e);return{...e,prop:s}}#a(t,e){if(t!=null)switch(e[Pn]){case"key":return e.key;case"index":return e.index;case"match":{if(!Array.isArray(t))return;const s=t.findIndex(r=>c2(r,e.match));return s!==-1?s:void 0}case"cursors":return;default:return}}#l(t){let e=t;for(const s of this.path){const r=this.#a(e,s);if(s.prop=r,r!==void 0&&e!==void 0&&e!==null)e=e[r];else break}}#s(t,e){if(t[Pn]!==e[Pn])return!1;switch(t[Pn]){case"key":return t.key===e.key;case"index":return t.index===e.index;case"match":{const s=Object.keys(t.match),r=Object.keys(e.match);return s.length!==r.length?!1:s.every(a=>t.match[a]===e.match[a])}default:return!1}}#p(t,e){if(typeof e=="string")return{[Pn]:"key",key:e,prop:e};if(typeof e=="number")return{[Pn]:"index",index:e,prop:e};if(dR(e)){if(!Array.isArray(t))return{[Pn]:"match",match:e,prop:void 0};const s=t.findIndex(r=>c2(r,e));return{[Pn]:"match",match:e,prop:s!==-1?s:void 0}}throw new Error(`Unsupported path input type: ${typeof e}. Expected string, number, or plain object.`)}#u(t,e,s,r){const{start:a,end:u}=r;if(typeof s!="string")throw new Error(`cursor() can only be used on string values, got ${typeof s}`);const h=wS(t,e,a),p=wS(t,e,u);if(!h||!p)throw new Error(`Failed to create cursors at positions ${a}-${u}.`);return{[Pn]:"cursors",start:h,end:p}}#c(){const t=[];for(const e of this.path){if(e.prop===void 0)return;t.push(e.prop)}return t}#h(t,e){let s=t;for(const r of e){if(s==null)return;s=s[r]}return s}#m(t,e,s,r){const a=this.#d(t,e,r);if(a)return s.slice(a[0],a[1])}#f(t,e,s){if(e.length===0)throw new Error("Internal error: #setValueAt called with empty path. Root document changes should be handled by the caller.");const r=this.#h(t,e.slice(0,-1));if(r==null)throw new Error("Cannot set value: parent is null or undefined");r[e[e.length-1]]=s}#_(t,e,s,r){const a=this.#d(t,e,s);if(!a)throw new Error("Cannot resolve range positions");const[u,h]=a;oA(t,e,u,h-u,r)}#d(t,e,s){const r=xS(t,e,s.start),a=xS(t,e,s.end);return r!==void 0&&a!==void 0?[r,a]:void 0}#y(t){const e=[];for(const s of this.path){if(s.prop===void 0)break;e.push(s.prop)}return e.length===0?!1:t.some(s=>this.#v(s.path,e))}#v(t,e){const s=Math.min(t.length,e.length);return t.slice(0,s).every((r,a)=>r===e[a])}}class Fp extends Wl{documentId;#t;#e;#i;#n=zs();#r=6e4;#o={};#a=new Map;#l=new Map;constructor(t,e={}){super(),this.documentId=t,"timeoutDelay"in e&&e.timeoutDelay&&(this.#r=e.timeoutDelay),"heads"in e&&(this.#i=e.heads);const s=zs();this.#t=Po(`automerge-repo:dochandle:${this.documentId.slice(0,5)}`);const r=this.#r,a=MA({actions:{onUpdate:Dl(({context:u,event:h})=>{const p=u.doc;c6(h,h2);const{callback:m}=h.payload;return{doc:m(p)}}),onDelete:Dl(()=>(this.emit("delete",{handle:this}),{doc:zs()})),onUnavailable:Dl(()=>({doc:zs()})),onUnload:Dl(()=>({doc:zs()}))}}).createMachine({initial:"idle",context:{documentId:t,doc:s},on:{UPDATE:{actions:"onUpdate"},UNLOAD:".unloaded",DELETE:".deleted"},states:{idle:{on:{BEGIN:"loading"}},loading:{on:{REQUEST:"requesting",DOC_READY:"ready"},after:{[r]:"unavailable"}},requesting:{on:{DOC_UNAVAILABLE:"unavailable",DOC_READY:"ready"},after:{[r]:"unavailable"}},unavailable:{entry:"onUnavailable",on:{DOC_READY:"ready"}},ready:{},unloaded:{entry:"onUnload",on:{RELOAD:"loading"}},deleted:{entry:"onDelete",type:"final"}}});this.#e=Xh(a),this.#e.subscribe(u=>{const h=this.#n,p=u.context.doc;this.#t(` ${u.value} %o`,p),this.#h(h,p)}),this.#e.start(),this.begin()}get#s(){return this.#e?.getSnapshot().context.doc}get#p(){return this.#e?.getSnapshot().value}#u(t,e){const s=Array.isArray(t)?t:[t];return f6(this.#e,r=>s.some(a=>r.matches(a)),{timeout:this.#r*2,...e})}#c(t){let e=null;if(this.#e.send({type:h2,payload:{callback:s=>{try{return t(s)}catch(r){return e=r,s}}}}),e)throw e}#h(t,e){const s=Ur(t),r=Ur(e);if(!Uv(rr(r),rr(s))){this.emit("heads-changed",{handle:this,doc:e});const u=p0(e,s,r);u.length>0&&this.emit("change",{handle:this,doc:e,patches:u,patchInfo:{before:t,after:e,source:"change"}}),this.isReady()||this.#e.send({type:u2})}this.#n=e}get url(){return IA({documentId:this.documentId,heads:this.#i})}isReady=()=>this.inState(["ready"]);isUnloaded=()=>this.inState(["unloaded"]);isDeleted=()=>this.inState(["deleted"]);isUnavailable=()=>this.inState(["unavailable"]);inState=t=>t.some(e=>this.#e.getSnapshot().matches(e));get state(){return this.#e.getSnapshot().value}async whenReady(t=["ready"],e){try{await K6(this.#u(t,e),this.#r)}catch(s){throw tR(s)?new Om:(console.log(`error waiting for ${this.documentId} to be in one of states: ${t.join(", ")}`),s)}}doc(){if(!this.isReady())throw new Error("DocHandle is not ready");return this.#i?M8(this.#s,Ca(this.#i)):this.#s}docSync(){return console.warn("docSync is deprecated. Use doc() instead. This function will be removed as part of the 2.0 release."),this.doc()}heads(){if(!this.isReady())throw new Error("DocHandle is not ready");return this.#i?this.#i:rr(Ur(this.#s))}begin(){this.#e.send({type:vR})}history(){if(this.isReady())return B8(this.#s).map(t=>rr([t]))}view(t){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before calling view().`);const e=JSON.stringify(t),s=this.#a.get(e);if(s)return s;const r=new Fp(this.documentId,{heads:t,timeoutDelay:this.#r});return r.update(()=>Bp(this.#s)),r.doneLoading(),this.#a.set(e,r),r}diff(t,e){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before calling diff().`);const s=this.#s;if(!s)throw new Error("Document not available");if(t instanceof Fp){if(!t.isReady())throw new Error("Cannot diff against a handle that isn't ready");const u=t.heads();if(!u)throw new Error("Other document's heads not available");const h=yS(Bp(s),t.doc());return p0(h,Ca(this.heads()),Ca(u))}const r=e?t:this.heads()||[],a=e||t;return p0(s,Ca(r),Ca(a))}metadata(t){if(this.isReady())return t||(t=this.heads()[0]),H8(this.#s,Ca([t])[0])||void 0}update(t){this.#c(t)}doneLoading(){this.#e.send({type:u2})}setSyncInfo(t,e){this.#o[t]=e,this.emit("remote-heads",{storageId:t,heads:e.lastHeads,timestamp:e.lastSyncTimestamp})}getRemoteHeads(t){return this.#o[t]?.lastHeads}getSyncInfo(t){return this.#o[t]}change(t,e={}){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is in ${this.state} and not ready. Check \`handle.isReady()\` before accessing the document.`);if(this.#i)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);this.#c(s=>k8(s,e,t))}changeAt(t,e,s={}){if(!this.isReady())throw new Error(`DocHandle#${this.documentId} is not ready. Check \`handle.isReady()\` before accessing the document.`);if(this.#i)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);let r;return this.#c(a=>{const u=O8(a,Ca(t),s,e);return r=u.newHeads?rr(u.newHeads):void 0,u.newDoc}),r}isReadOnly(){return!!this.#i}merge(t){if(!this.isReady()||!t.isReady())throw new Error("Both handles must be ready to merge");if(this.#i)throw new Error(`DocHandle#${this.documentId} is in view-only mode at specific heads. Use clone() to create a new document from this state.`);const e=t.doc();this.update(s=>yS(s,e))}unavailable(){this.#e.send({type:TR})}request(){this.#p==="loading"&&this.#e.send({type:bR})}unload(){this.#e.send({type:wR})}reload(){this.#e.send({type:xR})}delete(){this.#e.send({type:SR})}broadcast(t){this.emit("ephemeral-message-outbound",{handle:this,data:new Uint8Array(FA(t))})}metrics(){return wv(this.#s)}ref(...t){const e=this.#m(t),s=this.#l.get(e)?.deref();if(s)return s;const r=new _R(this,t);return this.#l.set(e,new WeakRef(r)),r}#m(t){return t.map(e=>typeof e=="string"?`s:${e}`:typeof e=="number"?`n:${e}`:typeof e=="object"&&e!==null?`o:${JSON.stringify(e)}`:`?:${String(e)}`).join("/")}}const gR={REQUESTING:"requesting",READY:"ready",UNLOADED:"unloaded",DELETED:"deleted",UNAVAILABLE:"unavailable"},{REQUESTING:np,READY:Pr,UNLOADED:yR,DELETED:ip,UNAVAILABLE:cs}=gR,vR="BEGIN",bR="REQUEST",u2="DOC_READY",h2="UPDATE",wR="UNLOAD",xR="RELOAD",SR="DELETE",TR="DOC_UNAVAILABLE";class AR extends Wl{#t=new Map;#e=new Set;#i=new Map;#n=new Set;#r=new Map;#o=Po("automerge-repo:remote-heads-subscriptions");subscribeToRemotes(t){this.#o("subscribeToRemotes",t);const e=[];for(const s of t)this.#e.has(s)||(this.#e.add(s),e.push(s));e.length>0&&this.emit("change-remote-subs",{add:e,peers:Array.from(this.#n)})}unsubscribeFromRemotes(t){this.#o("subscribeToRemotes",t);const e=[];for(const s of t)this.#e.has(s)&&(this.#e.delete(s),this.#i.has(s)||e.push(s));e.length>0&&this.emit("change-remote-subs",{remove:e,peers:Array.from(this.#n)})}handleControlMessage(t){const e=[],s=[],r=[];if(this.#o("handleControlMessage",t),t.add)for(const a of t.add){let u=this.#i.get(a);(this.#e.has(a)||u)&&r.push(a),u||(u=new Set,this.#i.set(a,u),this.#e.has(a)||e.push(a)),u.add(t.senderId)}if(t.remove)for(const a of t.remove){const u=this.#i.get(a);u&&(u.delete(t.senderId),u.size==0&&!this.#e.has(a)&&s.push(a))}(e.length>0||s.length>0)&&this.emit("change-remote-subs",{peers:Array.from(this.#n),add:e,remove:s});for(const a of r){const u=this.#r.get(t.senderId);if(u)for(const h of u){const p=this.#t.get(h);if(!p)continue;const m=p.get(a);m&&this.emit("notify-remote-heads",{targetId:t.senderId,documentId:h,heads:m.lastHeads,timestamp:m.lastSyncTimestamp,storageId:a})}}}handleRemoteHeads(t){this.#o("handleRemoteHeads",t);const e=this.#l(t);for(const s of e)this.#e.has(s.storageId)&&this.emit("remote-heads-changed",s);for(const s of e)for(const r of this.#n)r!==t.senderId&&this.emit("notify-remote-heads",{targetId:r,documentId:s.documentId,heads:s.remoteHeads,timestamp:s.timestamp,storageId:s.storageId});for(const s of e){const r=this.#i.get(s.storageId);if(r)for(const a of r)this.#a(a,s.documentId)&&this.emit("notify-remote-heads",{targetId:a,documentId:s.documentId,heads:s.remoteHeads,timestamp:s.timestamp,storageId:s.storageId})}}handleImmediateRemoteHeadsChanged(t,e,s){this.#o("handleLocalHeadsChanged",t,e,s);const r=this.#t.get(t),a=Date.now();if(!r)this.#t.set(t,new Map([[e,{lastSyncTimestamp:a,lastHeads:s}]]));else{const h=r.get(e);(!h||h.lastSyncTimestamp<Date.now())&&r.set(e,{lastSyncTimestamp:Date.now(),lastHeads:s})}const u=this.#i.get(e);if(u)for(const h of u)this.#a(h,t)&&this.emit("notify-remote-heads",{targetId:h,documentId:t,heads:s,timestamp:a,storageId:e})}addGenerousPeer(t){this.#o("addGenerousPeer",t),this.#n.add(t),this.#e.size>0&&this.emit("change-remote-subs",{add:Array.from(this.#e),peers:[t]});for(const[e,s]of this.#t)for(const[r,{lastHeads:a,lastSyncTimestamp:u}]of s)this.emit("notify-remote-heads",{targetId:t,documentId:e,heads:a,timestamp:u,storageId:r})}removePeer(t){this.#o("removePeer",t);const e=[];this.#n.delete(t),this.#r.delete(t);for(const[s,r]of this.#i)r.has(t)&&(r.delete(t),r.size==0&&(e.push(s),this.#i.delete(s)));e.length>0&&this.emit("change-remote-subs",{remove:e,peers:Array.from(this.#n)})}subscribePeerToDoc(t,e){let s=this.#r.get(t);s||(s=new Set,this.#r.set(t,s)),s.add(e);const r=this.#t.get(e);if(r)for(const[a,u]of r){const h=this.#i.get(a);h&&h.has(t)&&this.emit("notify-remote-heads",{targetId:t,documentId:e,heads:u.lastHeads,timestamp:u.lastSyncTimestamp,storageId:a})}}#a(t,e){const s=this.#r.get(t);return s&&s.has(e)}#l(t){const e=[],{documentId:s,newHeads:r}=t;for(const[a,{heads:u,timestamp:h}]of Object.entries(r)){if(!this.#e.has(a)&&!this.#i.has(a))continue;let p=this.#t.get(s);p||(p=new Map,this.#t.set(s,p));const m=p.get(a);m&&m.lastSyncTimestamp>=h||(p.set(a,{lastSyncTimestamp:h,lastHeads:u}),e.push({documentId:s,storageId:a,remoteHeads:u,timestamp:h}))}return e}}const gy=(n,t)=>{let e=Date.now(),s,r;return function(...a){s=e+t-Date.now(),clearTimeout(r),r=setTimeout(()=>{n(...a),e=Date.now()},s)}},ER=n=>LR(n)||KA(n)||$A(n)||CR(n)||MR(n)||kR(n),CR=n=>n.type==="doc-unavailable",$A=n=>n.type==="request",LR=n=>n.type==="sync",KA=n=>n.type==="ephemeral",MR=n=>n.type==="remote-subscription-change",kR=n=>n.type==="remote-heads-changed",OR=n=>`${n.senderId}:${n.sessionId}`;class DR extends Wl{peerId;peerMetadata;#t;#e={};#i=0;#n=Math.random().toString(36).slice(2);#r={};adapters=[];constructor(t,e,s){super(),this.peerId=e,this.peerMetadata=s,this.#t=Po(`automerge-repo:network:${this.peerId}`),t.forEach(r=>this.addNetworkAdapter(r))}disconnect(){this.adapters.forEach(t=>t.disconnect())}reconnect(){this.adapters.forEach(t=>t.connect(this.peerId))}addNetworkAdapter(t){this.adapters.push(t),t.on("peer-candidate",({peerId:e,peerMetadata:s})=>{this.#t(`peer candidate: ${e} `),this.#e[e]||(this.#e[e]=t),this.emit("peer",{peerId:e,peerMetadata:s})}),t.on("peer-disconnected",({peerId:e})=>{this.#t(`peer disconnected: ${e} `),delete this.#e[e],this.emit("peer-disconnected",{peerId:e})}),t.on("message",e=>{if(!ER(e)){this.#t(`invalid message: ${JSON.stringify(e)}`);return}if(this.#t(`message from ${e.senderId}`),KA(e)){const s=OR(e);(this.#r[s]===void 0||e.count>this.#r[s])&&(this.#r[s]=e.count,this.emit("message",e));return}this.emit("message",e)}),t.on("close",()=>{this.#t("adapter closed"),Object.entries(this.#e).forEach(([e,s])=>{s===t&&delete this.#e[e]}),this.adapters=this.adapters.filter(e=>e!==t)}),this.peerMetadata.then(e=>{t.connect(this.peerId,e)}).catch(e=>{this.#t("error connecting to network",e)})}removeNetworkAdapter(t){this.adapters=this.adapters.filter(e=>e!==t),t.disconnect()}send(t){const e=this.#e[t.targetId];if(!e){this.#t(`Tried to send message but peer not found: ${t.targetId}`);return}const r=(a=>a.type==="ephemeral"?"count"in a?a:{...a,count:++this.#i,sessionId:this.#n,senderId:this.peerId}:{...a,senderId:this.peerId})(t);this.#t("sending message %o",r),e.send(r)}isReady=()=>this.adapters.every(t=>t.isReady());whenReady=async()=>Promise.all(this.adapters.map(t=>t.whenReady()))}function JA(n){let t=0;n.forEach(r=>{t+=r.length});const e=new Uint8Array(t);let s=0;return n.forEach(r=>{e.set(r,s),s+=r.length}),e}var yp={exports:{}},RR=yp.exports,f2;function IR(){return f2||(f2=1,(function(n){(function(t,e){var s={};e(s);var r=s.default;for(var a in s)r[a]=s[a];n.exports=r})(RR,function(t){t.__esModule=!0,t.digestLength=32,t.blockSize=64;var e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function s(b,x,S,A,E){for(var R,z,O,Q,N,j,Y,G,Z,F,$,et,k;E>=64;){for(R=x[0],z=x[1],O=x[2],Q=x[3],N=x[4],j=x[5],Y=x[6],G=x[7],F=0;F<16;F++)$=A+F*4,b[F]=(S[$]&255)<<24|(S[$+1]&255)<<16|(S[$+2]&255)<<8|S[$+3]&255;for(F=16;F<64;F++)Z=b[F-2],et=(Z>>>17|Z<<15)^(Z>>>19|Z<<13)^Z>>>10,Z=b[F-15],k=(Z>>>7|Z<<25)^(Z>>>18|Z<<14)^Z>>>3,b[F]=(et+b[F-7]|0)+(k+b[F-16]|0);for(F=0;F<64;F++)et=(((N>>>6|N<<26)^(N>>>11|N<<21)^(N>>>25|N<<7))+(N&j^~N&Y)|0)+(G+(e[F]+b[F]|0)|0)|0,k=((R>>>2|R<<30)^(R>>>13|R<<19)^(R>>>22|R<<10))+(R&z^R&O^z&O)|0,G=Y,Y=j,j=N,N=Q+et|0,Q=O,O=z,z=R,R=et+k|0;x[0]+=R,x[1]+=z,x[2]+=O,x[3]+=Q,x[4]+=N,x[5]+=j,x[6]+=Y,x[7]+=G,A+=64,E-=64}return A}var r=(function(){function b(){this.digestLength=t.digestLength,this.blockSize=t.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return b.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},b.prototype.clean=function(){for(var x=0;x<this.buffer.length;x++)this.buffer[x]=0;for(var x=0;x<this.temp.length;x++)this.temp[x]=0;this.reset()},b.prototype.update=function(x,S){if(S===void 0&&(S=x.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var A=0;if(this.bytesHashed+=S,this.bufferLength>0){for(;this.bufferLength<64&&S>0;)this.buffer[this.bufferLength++]=x[A++],S--;this.bufferLength===64&&(s(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(S>=64&&(A=s(this.temp,this.state,x,A,S),S%=64);S>0;)this.buffer[this.bufferLength++]=x[A++],S--;return this},b.prototype.finish=function(x){if(!this.finished){var S=this.bytesHashed,A=this.bufferLength,E=S/536870912|0,R=S<<3,z=S%64<56?64:128;this.buffer[A]=128;for(var O=A+1;O<z-8;O++)this.buffer[O]=0;this.buffer[z-8]=E>>>24&255,this.buffer[z-7]=E>>>16&255,this.buffer[z-6]=E>>>8&255,this.buffer[z-5]=E>>>0&255,this.buffer[z-4]=R>>>24&255,this.buffer[z-3]=R>>>16&255,this.buffer[z-2]=R>>>8&255,this.buffer[z-1]=R>>>0&255,s(this.temp,this.state,this.buffer,0,z),this.finished=!0}for(var O=0;O<8;O++)x[O*4+0]=this.state[O]>>>24&255,x[O*4+1]=this.state[O]>>>16&255,x[O*4+2]=this.state[O]>>>8&255,x[O*4+3]=this.state[O]>>>0&255;return this},b.prototype.digest=function(){var x=new Uint8Array(this.digestLength);return this.finish(x),x},b.prototype._saveState=function(x){for(var S=0;S<this.state.length;S++)x[S]=this.state[S]},b.prototype._restoreState=function(x,S){for(var A=0;A<this.state.length;A++)this.state[A]=x[A];this.bytesHashed=S,this.finished=!1,this.bufferLength=0},b})();t.Hash=r;var a=(function(){function b(x){this.inner=new r,this.outer=new r,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var S=new Uint8Array(this.blockSize);if(x.length>this.blockSize)new r().update(x).finish(S).clean();else for(var A=0;A<x.length;A++)S[A]=x[A];for(var A=0;A<S.length;A++)S[A]^=54;this.inner.update(S);for(var A=0;A<S.length;A++)S[A]^=106;this.outer.update(S),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate);for(var A=0;A<S.length;A++)S[A]=0}return b.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},b.prototype.clean=function(){for(var x=0;x<this.istate.length;x++)this.ostate[x]=this.istate[x]=0;this.inner.clean(),this.outer.clean()},b.prototype.update=function(x){return this.inner.update(x),this},b.prototype.finish=function(x){return this.outer.finished?this.outer.finish(x):(this.inner.finish(x),this.outer.update(x,this.digestLength).finish(x)),this},b.prototype.digest=function(){var x=new Uint8Array(this.digestLength);return this.finish(x),x},b})();t.HMAC=a;function u(b){var x=new r().update(b),S=x.digest();return x.clean(),S}t.hash=u,t.default=u;function h(b,x){var S=new a(b).update(x),A=S.digest();return S.clean(),A}t.hmac=h;function p(b,x,S,A){var E=A[0];if(E===0)throw new Error("hkdf: cannot expand more");x.reset(),E>1&&x.update(b),S&&x.update(S),x.update(A),x.finish(b),A[0]++}var m=new Uint8Array(t.digestLength);function _(b,x,S,A){x===void 0&&(x=m),A===void 0&&(A=32);for(var E=new Uint8Array([1]),R=h(x,b),z=new a(R),O=new Uint8Array(z.digestLength),Q=O.length,N=new Uint8Array(A),j=0;j<A;j++)Q===O.length&&(p(O,z,S,E),Q=0),N[j]=O[Q++];return z.clean(),O.fill(0),E.fill(0),N}t.hkdf=_;function g(b,x,S,A){for(var E=new a(b),R=E.digestLength,z=new Uint8Array(4),O=new Uint8Array(R),Q=new Uint8Array(R),N=new Uint8Array(A),j=0;j*R<A;j++){var Y=j+1;z[0]=Y>>>24&255,z[1]=Y>>>16&255,z[2]=Y>>>8&255,z[3]=Y>>>0&255,E.reset(),E.update(x),E.update(z),E.finish(Q);for(var G=0;G<R;G++)O[G]=Q[G];for(var G=2;G<=S;G++){E.reset(),E.update(Q).finish(Q);for(var Z=0;Z<R;Z++)O[Z]^=Q[Z]}for(var G=0;G<R&&j*R+G<A;G++)N[j*R+G]=O[G]}for(var j=0;j<R;j++)O[j]=Q[j]=0;for(var j=0;j<4;j++)z[j]=0;return E.clean(),N}t.pbkdf2=g})})(yp)),yp.exports}var NR=IR();function tE(n){const t=NR.hash(n);return zR(t)}function PR(n){const t=new TextEncoder,e=JA(n.map(s=>t.encode(s)));return tE(e)}function zR(n){return Array.from(n,t=>t.toString(16).padStart(2,"0")).join("")}class UR extends Wl{#t;#e=new Map;#i=new Map;#n=!1;#r=Po("automerge-repo:storage-subsystem");constructor(t){super(),this.#t=t}async id(){const t=await this.#t.load(["storage-adapter-id"]);let e;return t?e=new TextDecoder().decode(t):(e=OA(),await this.#t.save(["storage-adapter-id"],new TextEncoder().encode(e))),e}async load(t,e){const s=[t,e];return await this.#t.load(s)}async save(t,e,s){const r=[t,e];await this.#t.save(r,s)}async remove(t,e){const s=[t,e];await this.#t.remove(s)}async loadDocData(t){const e=await this.#t.loadRange([t,"snapshot"]),s=await this.#t.loadRange([t,"incremental"]),r=[],a=[];for(const u of e)u.data!==void 0&&(a.push({key:u.key,type:"snapshot",size:u.data.length}),r.push(u.data));for(const u of s)u.data!==void 0&&(a.push({key:u.key,type:"incremental",size:u.data.length}),r.push(u.data));return this.#i.set(t,a),r.length===0?null:JA(r)}async loadDoc(t){const e=await this.loadDocData(t);if(!e)return null;const s=performance.now(),r=bv(zs(),e),a=performance.now();return this.emit("document-loaded",{documentId:t,durationMillis:a-s,...wv(r)}),this.#e.set(t,Ur(r)),r}async saveDoc(t,e){if(!this.#l(t,e))return;const s=this.#i.get(t)??[];this.#s(s)?await this.#a(t,e,s):await this.#o(t,e),this.#e.set(t,Ur(e))}async removeDoc(t){await this.#t.removeRange([t,"snapshot"]),await this.#t.removeRange([t,"incremental"]),await this.#t.removeRange([t,"sync-state"])}async#o(t,e){const s=this.#e.get(t)??[],r=performance.now(),a=U8(e,s),u=performance.now();if(this.emit("doc-saved",{documentId:t,durationMillis:u-r,sinceHeads:s}),a&&a.length>0){const h=[t,"incremental",tE(a)];this.#r(`Saving incremental ${h} for document ${t}`),await this.#t.save(h,a),this.#i.has(t)||this.#i.set(t,[]),this.#i.get(t).push({key:h,type:"incremental",size:a.length}),this.#e.set(t,Ur(e))}else return Promise.resolve()}async#a(t,e,s){this.#n=!0;const r=performance.now(),a=nA(e),u=performance.now();this.emit("doc-compacted",{documentId:t,durationMillis:u-r});const h=PR(Ur(e)),p=[t,"snapshot",h],m=new Set(s.map(g=>g.key).filter(g=>g[2]!==h));this.#r(`Saving snapshot ${p} for document ${t}`),this.#r(`deleting old chunks ${Array.from(m)}`),await this.#t.save(p,a);for(const g of m)await this.#t.remove(g);const _=this.#i.get(t)?.filter(g=>!m.has(g.key))??[];_.push({key:p,type:"snapshot",size:a.length}),this.#i.set(t,_),this.#n=!1}async loadSyncState(t,e){const s=[t,"sync-state",e];try{const r=await this.#t.load(s);return r?sA(r):void 0}catch{this.#r(`Error loading sync state for ${t} from ${e}`);return}}async saveSyncState(t,e,s){const r=[t,"sync-state",e];await this.#t.save(r,iA(s))}#l(t,e){const s=this.#e.get(t);if(!s)return!0;const r=Ur(e);return!Uv(rr(r),rr(s))}#s(t){if(this.#n)return!1;let e=0,s=0;for(const r of t)r.type==="snapshot"?e+=r.size:s+=r.size;return e<1024||s>=e}}class eE extends Wl{}class BR extends eE{#t;syncDebounceRate=100;#e=[];#i={};#n={};#r={};#o=[];#a;#l=!1;#s;#p;constructor({handle:t,peerId:e,onLoadSyncState:s}){super(),this.#a=e,this.#s=t,this.#p=s??(()=>Promise.resolve(void 0));const r=t.documentId.slice(0,5);this.#t=Po(`automerge-repo:docsync:${r}`),t.on("change",gy(()=>this.#u(),this.syncDebounceRate)),t.on("ephemeral-message-outbound",a=>this.#c(a)),(async()=>this.#b())()}get peerStates(){return this.#n}get documentId(){return this.#s.documentId}async#u(){try{await this.#s.whenReady();const t=this.#s.doc();this.#e.forEach(e=>this.#y(e,t))}catch{console.log("sync with peers threw an exception")}}async#c({data:t}){this.#t("broadcastToPeers",this.#e),this.#e.forEach(e=>this.#h(e,t))}#h(t,e){this.#t(`sendEphemeralMessage ->${t}`);const s={type:"ephemeral",targetId:t,documentId:this.#s.documentId,data:e};this.emit("message",s)}#m(t,e){this.#f(t),t in this.#n||(this.#n[t]="unknown");const s=this.#r[t];if(s){e(s);return}let r=this.#i[t];r||(this.#p(t).then(a=>{this.#_(t,a??P8())}).catch(a=>{this.#t(`Error loading sync state for ${t}: ${a}`)}),r=this.#i[t]=[]),r.push(e)}#f(t){this.#e.includes(t)||(this.#e.push(t),this.emit("open-doc",{documentId:this.documentId,peerId:t}))}#_(t,e){const s=this.#i[t];if(s)for(const r of s)r(e);delete this.#i[t],this.#r[t]=e}#d(t,e){this.#r[t]=e,this.emit("sync-state",{peerId:t,syncState:e,documentId:this.#s.documentId})}#y(t,e){this.#t(`sendSyncMessage ->${t}`),this.#m(t,s=>{const r=performance.now(),[a,u]=I8(e,s),h=performance.now();if(this.emit("metrics",{type:"generate-sync-message",documentId:this.#s.documentId,durationMillis:h-r,forPeer:t}),this.#d(t,a),u){const p=Ur(e).length===0;!this.#s.isReady()&&p&&a.sharedHeads.length===0&&!Object.values(this.#n).includes("has")&&this.#n[t]==="unknown"?this.emit("message",{type:"request",targetId:t,documentId:this.#s.documentId,data:u}):this.emit("message",{type:"sync",targetId:t,data:u,documentId:this.#s.documentId}),p||(this.#n[t]="has")}})}hasPeer(t){return this.#e.includes(t)}async beginSync(t){this.#s.whenReady([Pr,np,cs]).then(()=>{this.#l=!0,this.#g()}).catch(s=>{console.log("caught whenready",s),this.#l=!0,this.#g()}),this.#e.some(s=>this.#n[s]=="has")&&await this.#s.whenReady(),t.forEach(s=>{this.#m(s,r=>{const a=sA(iA(r));this.#d(s,a),this.#s.whenReady([Pr,np,cs]).then(()=>{const u=this.#s.isReady()?this.#s.doc():zs(),h=t.every(m=>this.#n[m]in["unavailable","wants"]);u===void 0&&h||this.#y(s,u??zs())}).catch(u=>{this.#t(`Error loading doc for ${s}: ${u}`)})})})}endSync(t){this.#t(`removing peer ${t}`),this.#e=this.#e.filter(e=>e!==t),delete this.#n[t],this.#g()}receiveMessage(t){switch(t.type){case"sync":case"request":this.receiveSyncMessage(t);break;case"ephemeral":this.receiveEphemeralMessage(t);break;case"doc-unavailable":this.#n[t.senderId]="unavailable",this.#g();break;default:throw new Error(`unknown message type: ${t}`)}}receiveEphemeralMessage(t){if(t.documentId!==this.#s.documentId)throw new Error("channelId doesn't match documentId");const{senderId:e,data:s}=t,r=qA(new Uint8Array(s));this.#s.emit("ephemeral-message",{handle:this.#s,senderId:e,message:r}),this.#e.forEach(a=>{a!==e&&this.emit("message",{...t,targetId:a})})}receiveSyncMessage(t){if(t.documentId!==this.#s.documentId)throw new Error("channelId doesn't match documentId");if(!this.#s.inState([Pr,np,cs])){this.#o.push({message:t,received:new Date});return}this.#b(),this.#v(t)}#v(t){$A(t)&&(this.#n[t.senderId]="wants"),this.#g(),z8(t.data).heads.length>0&&(this.#n[t.senderId]="has"),this.#m(t.senderId,e=>{this.#s.update(s=>{const r=performance.now(),[a,u]=N8(s,e,t.data),h=performance.now();return this.emit("metrics",{type:"receive-sync-message",documentId:this.#s.documentId,durationMillis:h-r,fromPeer:t.senderId,...wv(s)}),this.#d(t.senderId,u),this.#y(t.senderId,s),a}),this.#g()})}#g(){this.#l&&this.#s.inState([np,cs])&&this.#e.every(t=>this.#n[t]==="unavailable"||this.#n[t]==="wants")&&(this.#e.filter(t=>this.#n[t]==="wants").forEach(t=>{this.#n[t]="unavailable";const e={type:"doc-unavailable",documentId:this.#s.documentId,targetId:t};this.emit("message",e)}),this.#s.unavailable())}#b(){for(const t of this.#o)this.#v(t.message);this.#o=[]}metrics(){return{peers:this.#e,size:this.#s.metrics()}}}const Aa=Po("automerge-repo:collectionsync");class HR extends eE{repo;#t=new Set;docSynchronizers={};#e={};#i;#n=new Map;constructor(t,e=[]){super(),this.repo=t,this.#i=e.map(s=>Jc(s).documentId)}#r(t){return this.docSynchronizers[t.documentId]||(this.docSynchronizers[t.documentId]=this.#o(t)),this.docSynchronizers[t.documentId]}#o(t){const e=new BR({handle:t,peerId:this.repo.networkSubsystem.peerId,onLoadSyncState:async s=>{if(!this.repo.storageSubsystem)return;const{storageId:r,isEphemeral:a}=this.repo.peerMetadataByPeerId[s]||{};if(!(!r||a))return this.repo.storageSubsystem.loadSyncState(t.documentId,r)}});return e.on("message",s=>this.emit("message",s)),e.on("open-doc",s=>this.emit("open-doc",s)),e.on("sync-state",s=>this.emit("sync-state",s)),e.on("metrics",s=>this.emit("metrics",s)),e}async#a(t){const e=Array.from(this.#t),s=[];for(const r of e)await this.#l(r,t)&&s.push(r);return s}async receiveMessage(t){Aa(`onSyncMessage: ${t.senderId}, ${t.documentId}, ${"data"in t?t.data.byteLength+"bytes":""}`);const e=t.documentId;if(!e)throw new Error("received a message with an invalid documentId");if(this.#i.includes(e)){this.emit("metrics",{type:"doc-denied",documentId:e}),this.emit("message",{type:"doc-unavailable",documentId:e,targetId:t.senderId});return}if(t.type==="request"&&(this.#n.has(e)||this.#n.set(e,new Set),this.#n.get(e)?.add(t.senderId)),!await this.repo.shareConfig.access(t.senderId,e)){Aa("access denied"),this.emit("message",{type:"doc-unavailable",documentId:e,targetId:t.senderId});return}this.#e[e]=!0;const r=await this.repo.find(e,{allowableStates:["ready","unavailable","requesting"]}),a=this.#r(r);a.receiveMessage(t);const u=await this.#a(e);a.beginSync(u.filter(h=>!a.hasPeer(h)))}addDocument(t){if(this.#e[t.documentId])return;this.#e[t.documentId]=!0;const e=this.#r(t);this.#a(t.documentId).then(s=>{e.beginSync(s)})}removeDocument(t){Aa(`removing document ${t}`);const e=this.docSynchronizers[t];e!==void 0&&this.peers.forEach(s=>e.endSync(s)),delete this.docSynchronizers[t],delete this.#e[t]}addPeer(t){if(Aa(`adding ${t} & synchronizing with them`),!this.#t.has(t)){this.#t.add(t);for(const e of Object.values(this.docSynchronizers)){const{documentId:s}=e;this.#l(t,s).then(r=>{r&&e.beginSync([t])})}}}removePeer(t){Aa(`removing peer ${t}`),this.#t.delete(t);for(const e of this.#n.values())e.delete(t);for(const e of Object.values(this.docSynchronizers))e.endSync(t)}get peers(){return Array.from(this.#t)}async reevaluateDocumentShare(){const t=Array.from(this.#t),e=[];for(const s of Object.values(this.docSynchronizers)){const r=s.documentId;e.push((async()=>{for(const a of t){const u=await this.#l(a,r),h=s.hasPeer(a);Aa(`reevaluateDocumentShare: ${a} for ${r}, shouldShare: ${u}, isAlreadySyncing: ${h}`),u&&!h?(Aa(`reevaluateDocumentShare: starting sync with ${a} for ${r}`),s.beginSync([a])):!u&&h&&(Aa(`reevaluateDocumentShare: stopping sync with ${a} for ${r}`),s.endSync(a))}})().catch(a=>{console.log(`error reevaluating document share for ${r}: ${a}`)}))}await Promise.allSettled(e)}metrics(){return Object.fromEntries(Object.entries(this.docSynchronizers).map(([t,e])=>[t,e.metrics()]))}async#l(t,e){const[s,r]=await Promise.all([this.repo.shareConfig.announce(t,e),this.repo.shareConfig.access(t,e)]),a=this.#n.get(e)?.has(t)??!1;return s||r&&a}}function VR(){return"peer-"+Math.random().toString(36).slice(4)}class jR extends Wl{#t;networkSubsystem;storageSubsystem;#e;#i;#n={};synchronizer;#r={announce:async()=>!0,access:async()=>!0};peerMetadataByPeerId={};#o=new AR;#a=!1;#l={};#s={};#p;constructor({storage:t,network:e=[],peerId:s=VR(),sharePolicy:r,shareConfig:a,isEphemeral:u=t===void 0,enableRemoteHeadsGossiping:h=!1,denylist:p=[],saveDebounceRate:m=100,idFactory:_}={}){if(super(),this.#a=h,this.#t=Po("automerge-repo:repo"),this.#p=_||null,r!=null&&a!=null)throw new Error("cannot provide both sharePolicy and shareConfig at once");r&&(this.#r={announce:r,access:async()=>!0}),a&&(this.#r=a),this.on("delete-document",({documentId:S})=>{this.synchronizer.removeDocument(S),g&&g.removeDoc(S).catch(A=>{this.#t("error deleting document",{documentId:S,err:A})})}),this.synchronizer=new HR(this,p),this.synchronizer.on("message",S=>{this.#t(`sending ${S.type} message to ${S.targetId}`),x.send(S)}),this.synchronizer.on("metrics",S=>this.emit("doc-metrics",S)),this.#a&&this.synchronizer.on("open-doc",({peerId:S,documentId:A})=>{this.#o.subscribePeerToDoc(S,A)});const g=t?new UR(t):void 0;g&&(g.on("document-loaded",S=>this.emit("doc-metrics",{type:"doc-loaded",...S})),g.on("doc-compacted",S=>this.emit("doc-metrics",{type:"doc-compacted",...S})),g.on("doc-saved",S=>this.emit("doc-metrics",{type:"doc-saved",...S}))),this.storageSubsystem=g,this.#e=m,this.storageSubsystem?this.#i=({handle:S,doc:A})=>{let E=this.#s[S.documentId];E||(E=gy(({doc:R,handle:z})=>{this.storageSubsystem.saveDoc(z.documentId,R)},this.#e),this.#s[S.documentId]=E),E({handle:S,doc:A})}:this.#i=()=>{};const b=(async()=>({storageId:await g?.id(),isEphemeral:u}))(),x=new DR(e,s,b);this.networkSubsystem=x,x.on("peer",async({peerId:S,peerMetadata:A})=>{this.#t("peer connected",{peerId:S}),A&&(this.peerMetadataByPeerId[S]={...A}),this.#r.announce(S).then(E=>{E&&this.#a&&this.#o.addGenerousPeer(S)}).catch(E=>{console.log("error in share policy",{err:E})}),this.synchronizer.addPeer(S)}),x.on("peer-disconnected",({peerId:S})=>{this.synchronizer.removePeer(S),this.#o.removePeer(S)}),x.on("message",async S=>{this.#c(S)}),this.synchronizer.on("sync-state",S=>{this.#m(S);const A=this.#n[S.documentId],{storageId:E}=this.peerMetadataByPeerId[S.peerId]||{};if(!E)return;const R=A.getSyncInfo(E)?.lastHeads;S.syncState.theirHeads&&(!R||!Uv(R,rr(S.syncState.theirHeads)))&&S.syncState.theirHeads&&(A.setSyncInfo(E,{lastHeads:rr(S.syncState.theirHeads),lastSyncTimestamp:Date.now()}),E&&this.#a&&this.#o.handleImmediateRemoteHeadsChanged(S.documentId,E,rr(S.syncState.theirHeads)))}),this.#a&&(this.#o.on("notify-remote-heads",S=>{this.networkSubsystem.send({type:"remote-heads-changed",targetId:S.targetId,documentId:S.documentId,newHeads:{[S.storageId]:{heads:S.heads,timestamp:S.timestamp}}})}),this.#o.on("change-remote-subs",S=>{this.#t("change-remote-subs",S);for(const A of S.peers)this.networkSubsystem.send({type:"remote-subscription-change",targetId:A,add:S.add,remove:S.remove})}),this.#o.on("remote-heads-changed",({documentId:S,storageId:A,remoteHeads:E,timestamp:R})=>{this.#n[S].setSyncInfo(A,{lastHeads:E,lastSyncTimestamp:R})}))}#u(t){this.storageSubsystem&&(t.listeners("heads-changed").some(s=>s===this.#i)||t.on("heads-changed",this.#i)),this.synchronizer.addDocument(t)}#c(t){switch(t.type){case"remote-subscription-change":this.#a&&this.#o.handleControlMessage(t);break;case"remote-heads-changed":this.#a&&this.#o.handleRemoteHeads(t);break;case"sync":case"request":case"ephemeral":case"doc-unavailable":this.synchronizer.receiveMessage(t).catch(e=>{console.log("error receiving message",{err:e,message:t})})}}#h={};#m(t){if(!this.storageSubsystem)return;const{storageId:e,isEphemeral:s}=this.peerMetadataByPeerId[t.peerId]||{};if(!e||s)return;let r=this.#h[e];r||(r=this.#h[e]=gy(({documentId:a,syncState:u})=>{this.storageSubsystem.saveSyncState(a,e,u)},this.#e)),r(t)}#f({documentId:t}){if(this.#n[t])return this.#n[t];if(!t)throw new Error(`Invalid documentId ${t}`);const e=new Fp(t);return this.#n[t]=e,e}get handles(){return this.#n}get peers(){return this.synchronizer.peers}get peerId(){return this.networkSubsystem.peerId}get sharePolicy(){return this.#r.announce}set sharePolicy(t){this.#r.announce=t}get shareConfig(){return this.#r}set shareConfig(t){this.#r=t}getStorageIdOfPeer(t){return this.peerMetadataByPeerId[t]?.storageId}create(t){let e;t?e=_S(t):e=gS(zs());const{documentId:s}=Jc(FS()),r=this.#f({documentId:s});return this.#u(r),r.update(()=>e),r.doneLoading(),r}async create2(t){let e;t?e=_S(t):e=gS(zs());let{documentId:s}=Jc(FS());if(this.#p){const a=await this.#p(Ur(e));s=Qh(a)}const r=this.#f({documentId:s});return this.#u(r),r.update(()=>e),r.doneLoading(),r}clone(t){if(!t.isReady())throw new Error(`Cloned handle is not yet in ready state.
        (Try await handle.whenReady() first.)`);const e=t.doc(),s=this.create();return s.update(()=>Bp(e)),s}findWithProgress(t,e={}){const{signal:s}=e,{documentId:r,heads:a}=NA(t)?Jc(t):{documentId:Kd(t),heads:void 0};if(this.#n[r]){const g=this.#n[r];if(g.state===cs)return{state:"unavailable",error:new Error(`Document ${t} is unavailable`),handle:g};if(g.state===ip)return{state:"failed",error:new Error(`Document ${t} was deleted`),handle:g};if(g.state===Pr)return{state:"ready",handle:a?g.view(a):g}}const u=this.#l[r];if(u){const g=this.#n[r];if(g&&(g.state===Pr||g.state===cs||g.state===ip||g.state==="loading"))return u}const h=this.#f({documentId:r}),p={state:"loading",progress:0,handle:h},m={subscribers:new Set,currentProgress:void 0,notify:g=>{m.currentProgress=g,m.subscribers.forEach(b=>b(g)),this.#l[r]=g},peek:()=>m.currentProgress||p,subscribe:g=>(m.subscribers.add(g),()=>m.subscribers.delete(g))};m.notify(p),this.#_(t,r,h,m,s?r2(new Promise(()=>{}),s):new Promise(()=>{}));const _={...p,peek:m.peek,subscribe:m.subscribe};return this.#l[r]=_,_}async#_(t,e,s,r,a){try{r.notify({state:"loading",progress:25,handle:s});const u=await(this.storageSubsystem?this.storageSubsystem.loadDoc(s.documentId):Promise.resolve(null)),h=await Promise.race([u,a]);if(h?(s.update(()=>h),s.doneLoading(),r.notify({state:"loading",progress:50,handle:s})):(await Promise.race([this.networkSubsystem.whenReady(),a]),s.request(),r.notify({state:"loading",progress:75,handle:s})),this.#u(s),await Promise.race([s.whenReady([Pr,cs]),a]),s.state===cs){const p={state:"unavailable",handle:s};r.notify(p);return}if(s.state===ip)throw new Error(`Document ${t} was deleted`);r.notify({state:"ready",handle:s})}catch(u){r.notify({state:"failed",error:u instanceof Error||u instanceof DOMException?u:new Error(String(u)),handle:this.#f({documentId:e})})}}async find(t,e={}){const{allowableStates:s=["ready"],signal:r}=e;if(r?.aborted)throw new Om;const a=this.findWithProgress(t,{signal:r});if("subscribe"in a)return this.#u(a.handle),new Promise((u,h)=>{const p=a.subscribe(m=>{s.includes(m.handle.state)?(p(),u(m.handle)):m.state==="unavailable"?(p(),h(new Error(`Document ${t} is unavailable`))):m.state==="failed"&&(p(),h(m.error))})});if(a.handle.state===Pr)return a.handle;if(await a.handle.whenReady([Pr,cs]),a.handle.state==="unavailable"&&!s.includes(cs))throw new Error(`Document ${t} is unavailable`);return a.handle}async#d(t){if(this.#n[t])return this.#n[t];const e=this.#f({documentId:t}),s=await(this.storageSubsystem?this.storageSubsystem.loadDoc(e.documentId):Promise.resolve(null));return s?(e.update(()=>s),e.doneLoading()):(await this.networkSubsystem.whenReady(),e.request()),this.#u(e),e}async findClassic(t,e={}){const s=Kd(t),{allowableStates:r,signal:a}=e;return r2((async()=>{const u=await this.#d(s);if(!r&&(await u.whenReady([Pr,cs]),u.state===cs&&!a?.aborted))throw new Error(`Document ${t} is unavailable`);return u})(),a)}delete(t){const e=Kd(t);this.#f({documentId:e}).delete(),delete this.#n[e],delete this.#l[e],delete this.#s[e],this.emit("delete-document",{documentId:e})}async export(t){const e=Kd(t),r=(await this.find(e)).doc();return nA(r)}import(t,e){const s=e?.docId;if(s!=null){const r=this.#f({documentId:s});return r.update(a=>bv(a,t)),this.#u(r),r}else{const r=D8(t),a=this.create();return a.update(()=>Bp(r)),a}}subscribeToRemotes=t=>{this.#a?(this.#t("subscribeToRemotes",{remotes:t}),this.#o.subscribeToRemotes(t)):this.#t("WARN: subscribeToRemotes called but remote heads gossiping is not enabled")};storageId=async()=>{if(this.storageSubsystem)return this.storageSubsystem.id()};async flush(t){if(!this.storageSubsystem)return;const e=t?t.map(s=>this.#n[s]):Object.values(this.#n);await Promise.all(e.map(async s=>this.storageSubsystem.saveDoc(s.documentId,s.doc())))}async removeFromCache(t){if(!this.#n[t]){this.#t(`WARN: removeFromCache called but handle not found in handleCache for documentId: ${t}`);return}const e=this.#f({documentId:t});await e.whenReady([Pr,yR,ip,cs]),e.doc()?(e.isReady()?e.unload():this.#t(`WARN: removeFromCache called but handle for documentId: ${t} in unexpected state: ${e.state}`),delete this.#n[t],delete this.#l[t],delete this.#s[t],this.synchronizer.removeDocument(t)):this.#t(`WARN: removeFromCache called but doc undefined for documentId: ${t}`)}shutdown(){return this.networkSubsystem.adapters.forEach(t=>{t.disconnect()}),this.flush()}metrics(){return{documents:this.synchronizer.metrics()}}shareConfigChanged(){this.synchronizer.reevaluateDocumentShare()}}class qR extends Wl{peerId;peerMetadata}const GR="/build/feature/timelineSyncNTP/assets/automerge_wasm_bg-BQ4CNPIj.wasm",ZR=async(n={},t)=>{let e;if(t.startsWith("data:")){const s=t.replace(/^data:.*?base64,/,"");let r;if(typeof Buffer=="function"&&typeof Buffer.from=="function")r=Buffer.from(s,"base64");else if(typeof atob=="function"){const a=atob(s);r=new Uint8Array(a.length);for(let u=0;u<a.length;u++)r[u]=a.charCodeAt(u)}else throw new Error("Cannot decode base64-encoded data URL");e=await WebAssembly.instantiate(r,n)}else{const s=await fetch(t),r=s.headers.get("Content-Type")||"";if("instantiateStreaming"in WebAssembly&&r.startsWith("application/wasm"))e=await WebAssembly.instantiateStreaming(s,n);else{const a=await s.arrayBuffer();e=await WebAssembly.instantiate(a,n)}}return e.instance.exports};class Ps{static __wrap(t){t=t>>>0;const e=Object.create(Ps.prototype);return e.__wbg_ptr=t,d2.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,d2.unregister(this),t}free(){const t=this.__destroy_into_raw();_t.__wbg_automerge_free(t,0)}applyAndReturnPatches(t,e){const s=_t.automerge_applyAndReturnPatches(this.__wbg_ptr,t,e);if(s[2])throw Lt(s[1]);return Lt(s[0])}applyChanges(t){const e=_t.automerge_applyChanges(this.__wbg_ptr,t);if(e[1])throw Lt(e[0])}applyPatches(t,e){const s=_t.automerge_applyPatches(this.__wbg_ptr,t,e);if(s[2])throw Lt(s[1]);return Lt(s[0])}clone(t){var e=Hi(t)?0:or(t,_t.__wbindgen_malloc,_t.__wbindgen_realloc),s=fs;const r=_t.automerge_clone(this.__wbg_ptr,e,s);if(r[2])throw Lt(r[1]);return Ps.__wrap(r[0])}commit(t,e){var s=Hi(t)?0:or(t,_t.__wbindgen_malloc,_t.__wbindgen_realloc),r=fs;return _t.automerge_commit(this.__wbg_ptr,s,r,!Hi(e),Hi(e)?0:e)}delete(t,e){const s=_t.automerge_delete(this.__wbg_ptr,t,e);if(s[1])throw Lt(s[0])}diff(t,e){const s=_t.automerge_diff(this.__wbg_ptr,t,e);if(s[2])throw Lt(s[1]);return Lt(s[0])}diffIncremental(){const t=_t.automerge_diffIncremental(this.__wbg_ptr);if(t[2])throw Lt(t[1]);return Lt(t[0])}diffPath(t,e,s,r){const a=_t.automerge_diffPath(this.__wbg_ptr,t,e,s,r);if(a[2])throw Lt(a[1]);return Lt(a[0])}dump(){_t.automerge_dump(this.__wbg_ptr)}emptyChange(t,e){var s=Hi(t)?0:or(t,_t.__wbindgen_malloc,_t.__wbindgen_realloc),r=fs;return _t.automerge_emptyChange(this.__wbg_ptr,s,r,!Hi(e),Hi(e)?0:e)}enableFreeze(t){const e=_t.automerge_enableFreeze(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return e[0]!==0}fork(t,e){var s=Hi(t)?0:or(t,_t.__wbindgen_malloc,_t.__wbindgen_realloc),r=fs;const a=_t.automerge_fork(this.__wbg_ptr,s,r,e);if(a[2])throw Lt(a[1]);return Ps.__wrap(a[0])}generateSyncMessage(t){return Ll(t,Wi),_t.automerge_generateSyncMessage(this.__wbg_ptr,t.__wbg_ptr)}get(t,e,s){const r=_t.automerge_get(this.__wbg_ptr,t,e,s);if(r[2])throw Lt(r[1]);return Lt(r[0])}getActorId(){let t,e;try{const s=_t.automerge_getActorId(this.__wbg_ptr);return t=s[0],e=s[1],Us(s[0],s[1])}finally{_t.__wbindgen_free(t,e,1)}}getAll(t,e,s){const r=_t.automerge_getAll(this.__wbg_ptr,t,e,s);if(r[2])throw Lt(r[1]);return Lt(r[0])}getBlock(t,e,s){const r=_t.automerge_getBlock(this.__wbg_ptr,t,e,s);if(r[2])throw Lt(r[1]);return Lt(r[0])}getChangeByHash(t){const e=_t.automerge_getChangeByHash(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}getChangeMetaByHash(t){const e=_t.automerge_getChangeMetaByHash(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}getChanges(t){const e=_t.automerge_getChanges(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}getChangesAdded(t){return Ll(t,Ps),_t.automerge_getChangesAdded(this.__wbg_ptr,t.__wbg_ptr)}getChangesMeta(t){const e=_t.automerge_getChangesMeta(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}getCursor(t,e,s,r){let a,u;try{const m=_t.automerge_getCursor(this.__wbg_ptr,t,e,s,r);var h=m[0],p=m[1];if(m[3])throw h=0,p=0,Lt(m[2]);return a=h,u=p,Us(h,p)}finally{_t.__wbindgen_free(a,u,1)}}getCursorPosition(t,e,s){const r=_t.automerge_getCursorPosition(this.__wbg_ptr,t,e,s);if(r[2])throw Lt(r[1]);return r[0]}getDecodedChangeByHash(t){const e=_t.automerge_getDecodedChangeByHash(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}getHeads(){return _t.automerge_getHeads(this.__wbg_ptr)}getLastLocalChange(){return _t.automerge_getLastLocalChange(this.__wbg_ptr)}getMissingDeps(t){const e=_t.automerge_getMissingDeps(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}getWithType(t,e,s){const r=_t.automerge_getWithType(this.__wbg_ptr,t,e,s);if(r[2])throw Lt(r[1]);return Lt(r[0])}hasOurChanges(t){return Ll(t,Wi),_t.automerge_hasOurChanges(this.__wbg_ptr,t.__wbg_ptr)!==0}increment(t,e,s){const r=_t.automerge_increment(this.__wbg_ptr,t,e,s);if(r[1])throw Lt(r[0])}insert(t,e,s,r){const a=_t.automerge_insert(this.__wbg_ptr,t,e,s,r);if(a[1])throw Lt(a[0])}insertObject(t,e,s){let r,a;try{const p=_t.automerge_insertObject(this.__wbg_ptr,t,e,s);var u=p[0],h=p[1];if(p[3])throw u=0,h=0,Lt(p[2]);return r=u,a=h,Us(u,h)}finally{_t.__wbindgen_free(r,a,1)}}integrate(){_t.automerge_integrate(this.__wbg_ptr)}isolate(t){const e=_t.automerge_isolate(this.__wbg_ptr,t);if(e[1])throw Lt(e[0])}joinBlock(t,e){const s=_t.automerge_joinBlock(this.__wbg_ptr,t,e);if(s[1])throw Lt(s[0])}keys(t,e){const s=_t.automerge_keys(this.__wbg_ptr,t,e);if(s[2])throw Lt(s[1]);return Lt(s[0])}length(t,e){const s=_t.automerge_length(this.__wbg_ptr,t,e);if(s[2])throw Lt(s[1]);return s[0]}loadIncremental(t){const e=_t.automerge_loadIncremental(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return e[0]}mark(t,e,s,r,a){const u=_t.automerge_mark(this.__wbg_ptr,t,e,s,r,a);if(u[1])throw Lt(u[0])}marks(t,e){const s=_t.automerge_marks(this.__wbg_ptr,t,e);if(s[2])throw Lt(s[1]);return Lt(s[0])}marksAt(t,e,s){const r=_t.automerge_marksAt(this.__wbg_ptr,t,e,s);if(r[2])throw Lt(r[1]);return Lt(r[0])}materialize(t,e,s){const r=_t.automerge_materialize(this.__wbg_ptr,t,e,s);if(r[2])throw Lt(r[1]);return Lt(r[0])}merge(t){Ll(t,Ps);const e=_t.automerge_merge(this.__wbg_ptr,t.__wbg_ptr);if(e[2])throw Lt(e[1]);return Lt(e[0])}static new(t){var e=Hi(t)?0:or(t,_t.__wbindgen_malloc,_t.__wbindgen_realloc),s=fs;const r=_t.automerge_new(e,s);if(r[2])throw Lt(r[1]);return Ps.__wrap(r[0])}objInfo(t,e){const s=_t.automerge_objInfo(this.__wbg_ptr,t,e);if(s[2])throw Lt(s[1]);return Lt(s[0])}pendingOps(){return _t.automerge_pendingOps(this.__wbg_ptr)}push(t,e,s){const r=_t.automerge_push(this.__wbg_ptr,t,e,s);if(r[1])throw Lt(r[0])}pushObject(t,e){let s,r;try{const h=_t.automerge_pushObject(this.__wbg_ptr,t,e);var a=h[0],u=h[1];if(h[3])throw a=0,u=0,Lt(h[2]);return s=a,r=u,Us(a,u)}finally{_t.__wbindgen_free(s,r,1)}}put(t,e,s,r){const a=_t.automerge_put(this.__wbg_ptr,t,e,s,r);if(a[1])throw Lt(a[0])}putObject(t,e,s){const r=_t.automerge_putObject(this.__wbg_ptr,t,e,s);if(r[2])throw Lt(r[1]);return Lt(r[0])}receiveSyncMessage(t,e){Ll(t,Wi);const s=_t.automerge_receiveSyncMessage(this.__wbg_ptr,t.__wbg_ptr,e);if(s[1])throw Lt(s[0])}registerDatatype(t,e,s){const r=_t.automerge_registerDatatype(this.__wbg_ptr,t,e,s);if(r[1])throw Lt(r[0])}resetDiffCursor(){_t.automerge_resetDiffCursor(this.__wbg_ptr)}rollback(){return _t.automerge_rollback(this.__wbg_ptr)}save(){return _t.automerge_save(this.__wbg_ptr)}saveAndVerify(){const t=_t.automerge_saveAndVerify(this.__wbg_ptr);if(t[2])throw Lt(t[1]);return Lt(t[0])}saveBundle(t){const e=_t.automerge_saveBundle(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}saveIncremental(){return _t.automerge_saveIncremental(this.__wbg_ptr)}saveNoCompress(){return _t.automerge_saveNoCompress(this.__wbg_ptr)}saveSince(t){const e=_t.automerge_saveSince(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}spans(t,e){const s=_t.automerge_spans(this.__wbg_ptr,t,e);if(s[2])throw Lt(s[1]);return Lt(s[0])}splice(t,e,s,r){const a=_t.automerge_splice(this.__wbg_ptr,t,e,s,r);if(a[1])throw Lt(a[0])}splitBlock(t,e,s){const r=_t.automerge_splitBlock(this.__wbg_ptr,t,e,s);if(r[1])throw Lt(r[0])}stats(){return _t.automerge_stats(this.__wbg_ptr)}text(t,e){let s,r;try{const h=_t.automerge_text(this.__wbg_ptr,t,e);var a=h[0],u=h[1];if(h[3])throw a=0,u=0,Lt(h[2]);return s=a,r=u,Us(a,u)}finally{_t.__wbindgen_free(s,r,1)}}toJS(t){const e=_t.automerge_toJS(this.__wbg_ptr,t);if(e[2])throw Lt(e[1]);return Lt(e[0])}topoHistoryTraversal(){return _t.automerge_topoHistoryTraversal(this.__wbg_ptr)}unmark(t,e,s){const r=_t.automerge_unmark(this.__wbg_ptr,t,e,s);if(r[1])throw Lt(r[0])}updateBlock(t,e,s){const r=_t.automerge_updateBlock(this.__wbg_ptr,t,e,s);if(r[1])throw Lt(r[0])}updateDiffCursor(){_t.automerge_updateDiffCursor(this.__wbg_ptr)}updateSpans(t,e,s){const r=_t.automerge_updateSpans(this.__wbg_ptr,t,e,s);if(r[1])throw Lt(r[0])}updateText(t,e){const s=_t.automerge_updateText(this.__wbg_ptr,t,e);if(s[1])throw Lt(s[0])}}Symbol.dispose&&(Ps.prototype[Symbol.dispose]=Ps.prototype.free);class Wi{static __wrap(t){t=t>>>0;const e=Object.create(Wi.prototype);return e.__wbg_ptr=t,p2.register(e,e.__wbg_ptr,e),e}__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,p2.unregister(this),t}free(){const t=this.__destroy_into_raw();_t.__wbg_syncstate_free(t,0)}clone(){const t=_t.syncstate_clone(this.__wbg_ptr);return Wi.__wrap(t)}get lastSentHeads(){return _t.syncstate_lastSentHeads(this.__wbg_ptr)}set lastSentHeads(t){const e=_t.syncstate_set_lastSentHeads(this.__wbg_ptr,t);if(e[1])throw Lt(e[0])}set sentHashes(t){const e=_t.syncstate_set_sentHashes(this.__wbg_ptr,t);if(e[1])throw Lt(e[0])}get sharedHeads(){return _t.syncstate_sharedHeads(this.__wbg_ptr)}}Symbol.dispose&&(Wi.prototype[Symbol.dispose]=Wi.prototype.free);function WR(n){const t=_t.create(n);if(t[2])throw Lt(t[1]);return Ps.__wrap(t[0])}function FR(n){const t=_t.decodeChange(n);if(t[2])throw Lt(t[1]);return Lt(t[0])}function YR(n){const t=_t.decodeSyncMessage(n);if(t[2])throw Lt(t[1]);return Lt(t[0])}function XR(n){const t=_t.decodeSyncState(n);if(t[2])throw Lt(t[1]);return Wi.__wrap(t[0])}function QR(n){const t=_t.encodeChange(n);if(t[2])throw Lt(t[1]);return Lt(t[0])}function $R(n){const t=_t.encodeSyncMessage(n);if(t[2])throw Lt(t[1]);return Lt(t[0])}function KR(n){return Ll(n,Wi),_t.encodeSyncState(n.__wbg_ptr)}function JR(n){return Ll(n,Wi),_t.exportSyncState(n.__wbg_ptr)}function tI(n){const t=_t.importSyncState(n);if(t[2])throw Lt(t[1]);return Wi.__wrap(t[0])}function eI(){const n=_t.initSyncState();return Wi.__wrap(n)}function nI(n,t){const e=_t.load(n,t);if(e[2])throw Lt(e[1]);return Ps.__wrap(e[0])}function iI(n){const t=_t.readBundle(n);if(t[2])throw Lt(t[1]);return Lt(t[0])}function sI(){return _t.wasmReleaseInfo()}function rI(n){return BigInt(n)}function oI(n,t){return Error(Us(n,t))}function aI(n,t){const e=String(t),s=or(e,_t.__wbindgen_malloc,_t.__wbindgen_realloc),r=fs;Yi().setInt32(n+4,r,!0),Yi().setInt32(n+0,s,!0)}function lI(n){const t=n,e=typeof t=="boolean"?t:void 0;return Hi(e)?16777215:e?1:0}function cI(n,t){const e=yy(t),s=or(e,_t.__wbindgen_malloc,_t.__wbindgen_realloc),r=fs;Yi().setInt32(n+4,r,!0),Yi().setInt32(n+0,s,!0)}function uI(n,t){return n>t}function hI(n){return typeof n=="bigint"}function fI(n){return typeof n=="function"}function dI(n){return n===null}function pI(n){const t=n;return typeof t=="object"&&t!==null}function mI(n){return typeof n=="string"}function _I(n){return n===void 0}function gI(n,t){return n==t}function yI(n,t){return n<t}function vI(n){return-n}function bI(n,t){const e=t,s=typeof e=="number"?e:void 0;Yi().setFloat64(n+8,Hi(s)?0:s,!0),Yi().setInt32(n+0,!Hi(s),!0)}function wI(n,t){const e=t,s=typeof e=="string"?e:void 0;var r=Hi(s)?0:or(s,_t.__wbindgen_malloc,_t.__wbindgen_realloc),a=fs;Yi().setInt32(n+4,a,!0),Yi().setInt32(n+0,r,!0)}function xI(n,t){throw new Error(Us(n,t))}function SI(){return Fr(function(n,t,e){return Reflect.apply(n,t,e)},arguments)}function TI(n,t){return Object.assign(n,t)}function AI(){return Fr(function(n,t){return n.call(t)},arguments)}function EI(){return Fr(function(n,t,e){return n.call(t,e)},arguments)}function CI(n,t){return n.concat(t)}function LI(n,t,e){return Object.defineProperty(n,t,e)}function MI(){return Fr(function(n,t){return Reflect.deleteProperty(n,t)},arguments)}function kI(n){return n.done}function OI(n){return Object.entries(n)}function DI(n,t){let e,s;try{e=n,s=t,console.error(Us(n,t))}finally{_t.__wbindgen_free(e,s,1)}}function RI(n,t){return Symbol.for(Us(n,t))}function II(n){return Object.freeze(n)}function NI(n){return Array.from(n)}function PI(){return Fr(function(n,t){globalThis.crypto.getRandomValues(Hv(n,t))},arguments)}function zI(n){return n.getTime()}function UI(n,t){return n[t>>>0]}function BI(){return Fr(function(n,t){return Reflect.get(n,t)},arguments)}function HI(n){let t;try{t=n instanceof ArrayBuffer}catch{t=!1}return t}function VI(n){let t;try{t=n instanceof Date}catch{t=!1}return t}function jI(n){let t;try{t=n instanceof Object}catch{t=!1}return t}function qI(n){let t;try{t=n instanceof Uint8Array}catch{t=!1}return t}function GI(n){return Array.isArray(n)}function ZI(n){return Array.isArray(n)}function WI(){return Symbol.iterator}function FI(n){return Object.keys(n)}function YI(n){return n.length}function XI(n){return n.length}function QI(n){return n.length}function $I(n){console.log(n)}function KI(n,t){console.log(n,t)}function JI(n){return new Date(n)}function tN(){return new Object}function eN(){return new Array}function nN(n,t){return new Error(Us(n,t))}function iN(){return new Error}function sN(n,t){return new RangeError(Us(n,t))}function rN(n){return new Uint8Array(n)}function oN(n,t){return new Uint8Array(Hv(n,t))}function aN(){return Fr(function(n){return n.next()},arguments)}function lN(n){return n.next}function cN(){return Fr(function(n){return Reflect.ownKeys(n)},arguments)}function uN(n,t,e){Uint8Array.prototype.set.call(Hv(n,t),e)}function hN(n,t){return n.push(t)}function fN(n,t,e){n[t]=e}function dN(){return Fr(function(n,t,e){return Reflect.set(n,t,e)},arguments)}function pN(n,t,e){n[t>>>0]=e}function mN(n,t,e){return n.slice(t>>>0,e>>>0)}function _N(n,t){const e=t.stack,s=or(e,_t.__wbindgen_malloc,_t.__wbindgen_realloc),r=fs;Yi().setInt32(n+4,r,!0),Yi().setInt32(n+0,s,!0)}function gN(n,t){const e=JSON.stringify(t);var s=Hi(e)?0:or(e,_t.__wbindgen_malloc,_t.__wbindgen_realloc),r=fs;Yi().setInt32(n+4,r,!0),Yi().setInt32(n+0,s,!0)}function yN(){return Fr(function(n,t){return n.toString(t)},arguments)}function vN(n,t,e){const s=t.toString(e),r=or(s,_t.__wbindgen_malloc,_t.__wbindgen_realloc),a=fs;Yi().setInt32(n+4,a,!0),Yi().setInt32(n+0,r,!0)}function bN(n){return n.toString()}function wN(n,t){return n.unshift(t)}function xN(n){return n.value}function SN(n){return Object.values(n)}function TN(n){return n}function AN(n){return n}function EN(n,t){return Us(n,t)}function CN(n){return BigInt.asUintN(64,n)}function LN(){const n=_t.__wbindgen_externrefs,t=n.grow(4);n.set(0,void 0),n.set(t+0,void 0),n.set(t+1,null),n.set(t+2,!0),n.set(t+3,!1)}const d2=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_t.__wbg_automerge_free(n>>>0,1)),p2=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(n=>_t.__wbg_syncstate_free(n>>>0,1));function MN(n){const t=_t.__externref_table_alloc();return _t.__wbindgen_externrefs.set(t,n),t}function Ll(n,t){if(!(n instanceof t))throw new Error(`expected instance of ${t.name}`)}function yy(n){const t=typeof n;if(t=="number"||t=="boolean"||n==null)return`${n}`;if(t=="string")return`"${n}"`;if(t=="symbol"){const r=n.description;return r==null?"Symbol":`Symbol(${r})`}if(t=="function"){const r=n.name;return typeof r=="string"&&r.length>0?`Function(${r})`:"Function"}if(Array.isArray(n)){const r=n.length;let a="[";r>0&&(a+=yy(n[0]));for(let u=1;u<r;u++)a+=", "+yy(n[u]);return a+="]",a}const e=/\[object ([^\]]+)\]/.exec(toString.call(n));let s;if(e&&e.length>1)s=e[1];else return toString.call(n);if(s=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:s}function Hv(n,t){return n=n>>>0,Ih().subarray(n/1,n/1+t)}let jc=null;function Yi(){return(jc===null||jc.buffer.detached===!0||jc.buffer.detached===void 0&&jc.buffer!==_t.memory.buffer)&&(jc=new DataView(_t.memory.buffer)),jc}function Us(n,t){return n=n>>>0,ON(n,t)}let sp=null;function Ih(){return(sp===null||sp.byteLength===0)&&(sp=new Uint8Array(_t.memory.buffer)),sp}function Fr(n,t){try{return n.apply(this,t)}catch(e){const s=MN(e);_t.__wbindgen_exn_store(s)}}function Hi(n){return n==null}function or(n,t,e){if(e===void 0){const h=Nh.encode(n),p=t(h.length,1)>>>0;return Ih().subarray(p,p+h.length).set(h),fs=h.length,p}let s=n.length,r=t(s,1)>>>0;const a=Ih();let u=0;for(;u<s;u++){const h=n.charCodeAt(u);if(h>127)break;a[r+u]=h}if(u!==s){u!==0&&(n=n.slice(u)),r=e(r,s,s=u+n.length*3,1)>>>0;const h=Ih().subarray(r+u,r+s),p=Nh.encodeInto(n,h);u+=p.written,r=e(r,s,u,1)>>>0}return fs=u,r}function Lt(n){const t=_t.__wbindgen_externrefs.get(n);return _t.__externref_table_dealloc(n),t}let vp=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});vp.decode();const kN=2146435072;let O0=0;function ON(n,t){return O0+=t,O0>=kN&&(vp=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),vp.decode(),O0=t),vp.decode(Ih().subarray(n,n+t))}const Nh=new TextEncoder;"encodeInto"in Nh||(Nh.encodeInto=function(n,t){const e=Nh.encode(n);return t.set(e),{read:n.length,written:e.length}});let fs=0,_t;function DN(n){_t=n}URL=globalThis.URL;const At=await ZR({"./automerge_wasm_bg.js":{__wbg_new_8a6f238a6ece86ea:iN,__wbg_stack_0ed75d68575b0f3c:_N,__wbg_error_7534b8e9a36f1ab4:DI,__wbg_String_8f0eb39a4a4c2f66:aI,__wbg_set_3f1d0b984ed272ed:fN,__wbg_getRandomValues_1c61fac11405ffdc:PI,__wbg_log_6b5ca2e6124b2808:$I,__wbg_log_b948c93e3e66d64f:KI,__wbg_get_9b94d73e6221f75c:UI,__wbg_length_35a7bace40f36eac:XI,__wbg_new_3eb36ae241fe6f44:eN,__wbg_BigInt_b7bbccdff258c9f2:rI,__wbg_next_418f80d8f5303233:lN,__wbg_next_3482f54c49e8af19:aN,__wbg_done_57b39ecd9addfe81:kI,__wbg_value_0546255b415e96c1:xN,__wbg_iterator_6ff6560ca1568e55:WI,__wbg_get_b3ed3ad4be2bc8ac:BI,__wbg_call_389efe28435a9388:AI,__wbg_new_361308b2356cecd0:tN,__wbg_length_68dc7c5cf1b6d349:QI,__wbg_set_f43e577aea94465b:pN,__wbg_from_bddd64e7d5ff6941:NI,__wbg_isArray_d314bb98fcf08331:ZI,__wbg_push_8ffdcb2063340ba5:hN,__wbg_unshift_a4a28a3b4a2e621b:wN,__wbg_instanceof_ArrayBuffer_c367199e2fa2aa04:HI,__wbg_toString_3cadee6e7c22b39e:yN,__wbg_toString_56d946daff83867b:vN,__wbg_new_72b49615380db768:nN,__wbg_call_4708e0c13bdc8e95:EI,__wbg_instanceof_Date_1b9f15b87f10aa4c:VI,__wbg_getTime_1e3cd1391c5c3995:zI,__wbg_new_245cd5c49157e602:JI,__wbg_instanceof_Object_1c6af87502b733ed:jI,__wbg_assign_6170c0d04d5c26f4:TI,__wbg_defineProperty_fc8692a66be8fe2d:LI,__wbg_entries_58c7934c745daac7:OI,__wbg_freeze_661d9047fd889cd0:II,__wbg_keys_b50a709a76add04e:FI,__wbg_values_5da93bc719d272cf:SN,__wbg_new_911dabf69fa7eb20:sN,__wbg_apply_2e22c45cb4f12415:SI,__wbg_deleteProperty_8c8a05da881fea59:MI,__wbg_ownKeys_c7100fb5fa376c6f:cN,__wbg_set_6cb8631f80447a67:dN,__wbg_concat_f6e5ebc81f4917f1:CI,__wbg_slice_b0fa09b1e0041d42:mN,__wbg_for_c3adefd268cb6f1c:RI,__wbg_toString_b388ecd2d3c517c3:bN,__wbg_length_32ed9a279acd054c:YI,__wbg_prototypesetcall_bdcdcc5842e4d77d:uN,__wbg_new_dd2b680c8bf6ae29:rN,__wbg_instanceof_Uint8Array_9b9075935c74707c:qI,__wbg_new_from_slice_a3d2629dc1826784:oN,__wbg___wbindgen_string_get_72fb696202c56729:wI,__wbg___wbindgen_boolean_get_bbbb1c18aa2f5e25:lI,__wbg___wbindgen_number_get_8ff4255516ccad3e:bI,__wbg___wbindgen_is_undefined_9e4d92534c42d778:_I,__wbg___wbindgen_debug_string_0bc8482c6e3508ae:cI,__wbg_isArray_a2cef7634fcb7c0d:GI,__wbg_Error_8c4e43fe74559d73:oI,__wbg_stringify_e4a940b133e6b7d8:gN,__wbg___wbindgen_is_null_ac34f5003991759a:dI,__wbg___wbindgen_is_object_5ae8e5880f2c1fbd:pI,__wbg___wbindgen_is_function_0095a73b8b156f76:fI,__wbg___wbindgen_is_string_cd444516edc5b180:mI,__wbg___wbindgen_is_bigint_31b12575b56f32fc:hI,__wbg___wbindgen_neg_6b4d356dff49dcc6:vI,__wbg___wbindgen_lt_bb59cc3d23526e0d:yI,__wbg___wbindgen_gt_d7bb3629eac381f5:uI,__wbg___wbindgen_throw_be289d5034ed271b:xI,__wbg___wbindgen_jsval_loose_eq_9dd77d8cd6671811:gI,__wbindgen_init_externref_table:LN,__wbindgen_cast_0000000000000001:TN,__wbindgen_cast_0000000000000002:AN,__wbindgen_cast_0000000000000003:EN,__wbindgen_cast_0000000000000004:CN}},GR),RN=At.memory,IN=At.__wbg_syncstate_free,NN=At.syncstate_sharedHeads,PN=At.syncstate_lastSentHeads,zN=At.syncstate_set_lastSentHeads,UN=At.syncstate_set_sentHashes,BN=At.syncstate_clone,HN=At.__wbg_automerge_free,VN=At.automerge_new,jN=At.automerge_clone,qN=At.automerge_fork,GN=At.automerge_pendingOps,ZN=At.automerge_commit,WN=At.automerge_merge,FN=At.automerge_rollback,YN=At.automerge_keys,XN=At.automerge_text,QN=At.automerge_spans,$N=At.automerge_splice,KN=At.automerge_updateText,JN=At.automerge_updateSpans,tP=At.automerge_push,eP=At.automerge_pushObject,nP=At.automerge_insert,iP=At.automerge_splitBlock,sP=At.automerge_joinBlock,rP=At.automerge_updateBlock,oP=At.automerge_getBlock,aP=At.automerge_insertObject,lP=At.automerge_put,cP=At.automerge_putObject,uP=At.automerge_increment,hP=At.automerge_get,fP=At.automerge_getWithType,dP=At.automerge_objInfo,pP=At.automerge_getAll,mP=At.automerge_enableFreeze,_P=At.automerge_registerDatatype,gP=At.automerge_applyPatches,yP=At.automerge_applyAndReturnPatches,vP=At.automerge_diffIncremental,bP=At.automerge_updateDiffCursor,wP=At.automerge_resetDiffCursor,xP=At.automerge_diff,SP=At.automerge_diffPath,TP=At.automerge_isolate,AP=At.automerge_integrate,EP=At.automerge_length,CP=At.automerge_delete,LP=At.automerge_save,MP=At.automerge_saveIncremental,kP=At.automerge_saveSince,OP=At.automerge_saveNoCompress,DP=At.automerge_saveAndVerify,RP=At.automerge_loadIncremental,IP=At.automerge_applyChanges,NP=At.automerge_getChanges,PP=At.automerge_getChangesMeta,zP=At.automerge_getChangeByHash,UP=At.automerge_getChangeMetaByHash,BP=At.automerge_getDecodedChangeByHash,HP=At.automerge_getChangesAdded,VP=At.automerge_getHeads,jP=At.automerge_getActorId,qP=At.automerge_getLastLocalChange,GP=At.automerge_dump,ZP=At.automerge_getMissingDeps,WP=At.automerge_receiveSyncMessage,FP=At.automerge_generateSyncMessage,YP=At.automerge_toJS,XP=At.automerge_materialize,QP=At.automerge_getCursor,$P=At.automerge_getCursorPosition,KP=At.automerge_emptyChange,JP=At.automerge_mark,tz=At.automerge_unmark,ez=At.automerge_marks,nz=At.automerge_marksAt,iz=At.automerge_hasOurChanges,sz=At.automerge_topoHistoryTraversal,rz=At.automerge_stats,oz=At.automerge_saveBundle,az=At.create,lz=At.load,cz=At.wasmReleaseInfo,uz=At.encodeChange,hz=At.decodeChange,fz=At.initSyncState,dz=At.importSyncState,pz=At.exportSyncState,mz=At.encodeSyncMessage,_z=At.decodeSyncMessage,gz=At.encodeSyncState,yz=At.decodeSyncState,vz=At.readBundle,bz=At.__wbindgen_malloc,wz=At.__wbindgen_realloc,xz=At.__wbindgen_exn_store,Sz=At.__externref_table_alloc,Tz=At.__wbindgen_externrefs,Az=At.__wbindgen_free,Ez=At.__externref_table_dealloc,nE=At.__wbindgen_start,Cz=Object.freeze(Object.defineProperty({__proto__:null,__externref_table_alloc:Sz,__externref_table_dealloc:Ez,__wbg_automerge_free:HN,__wbg_syncstate_free:IN,__wbindgen_exn_store:xz,__wbindgen_externrefs:Tz,__wbindgen_free:Az,__wbindgen_malloc:bz,__wbindgen_realloc:wz,__wbindgen_start:nE,automerge_applyAndReturnPatches:yP,automerge_applyChanges:IP,automerge_applyPatches:gP,automerge_clone:jN,automerge_commit:ZN,automerge_delete:CP,automerge_diff:xP,automerge_diffIncremental:vP,automerge_diffPath:SP,automerge_dump:GP,automerge_emptyChange:KP,automerge_enableFreeze:mP,automerge_fork:qN,automerge_generateSyncMessage:FP,automerge_get:hP,automerge_getActorId:jP,automerge_getAll:pP,automerge_getBlock:oP,automerge_getChangeByHash:zP,automerge_getChangeMetaByHash:UP,automerge_getChanges:NP,automerge_getChangesAdded:HP,automerge_getChangesMeta:PP,automerge_getCursor:QP,automerge_getCursorPosition:$P,automerge_getDecodedChangeByHash:BP,automerge_getHeads:VP,automerge_getLastLocalChange:qP,automerge_getMissingDeps:ZP,automerge_getWithType:fP,automerge_hasOurChanges:iz,automerge_increment:uP,automerge_insert:nP,automerge_insertObject:aP,automerge_integrate:AP,automerge_isolate:TP,automerge_joinBlock:sP,automerge_keys:YN,automerge_length:EP,automerge_loadIncremental:RP,automerge_mark:JP,automerge_marks:ez,automerge_marksAt:nz,automerge_materialize:XP,automerge_merge:WN,automerge_new:VN,automerge_objInfo:dP,automerge_pendingOps:GN,automerge_push:tP,automerge_pushObject:eP,automerge_put:lP,automerge_putObject:cP,automerge_receiveSyncMessage:WP,automerge_registerDatatype:_P,automerge_resetDiffCursor:wP,automerge_rollback:FN,automerge_save:LP,automerge_saveAndVerify:DP,automerge_saveBundle:oz,automerge_saveIncremental:MP,automerge_saveNoCompress:OP,automerge_saveSince:kP,automerge_spans:QN,automerge_splice:$N,automerge_splitBlock:iP,automerge_stats:rz,automerge_text:XN,automerge_toJS:YP,automerge_topoHistoryTraversal:sz,automerge_unmark:tz,automerge_updateBlock:rP,automerge_updateDiffCursor:bP,automerge_updateSpans:JN,automerge_updateText:KN,create:az,decodeChange:hz,decodeSyncMessage:_z,decodeSyncState:yz,encodeChange:uz,encodeSyncMessage:mz,encodeSyncState:gz,exportSyncState:pz,importSyncState:dz,initSyncState:fz,load:lz,memory:RN,readBundle:vz,syncstate_clone:BN,syncstate_lastSentHeads:PN,syncstate_set_lastSentHeads:zN,syncstate_set_sentHashes:UN,syncstate_sharedHeads:NN,wasmReleaseInfo:cz},Symbol.toStringTag,{value:"Module"}));DN(Cz);nE();const Lz=Object.freeze(Object.defineProperty({__proto__:null,Automerge:Ps,SyncState:Wi,create:WR,decodeChange:FR,decodeSyncMessage:YR,decodeSyncState:XR,encodeChange:QR,encodeSyncMessage:$R,encodeSyncState:KR,exportSyncState:JR,importSyncState:tI,initSyncState:eI,load:nI,readBundle:iI,wasmReleaseInfo:sI},Symbol.toStringTag,{value:"Module"}));A8(Lz);var Fc=null;typeof WebSocket<"u"?Fc=WebSocket:typeof MozWebSocket<"u"?Fc=MozWebSocket:typeof global<"u"?Fc=global.WebSocket||global.MozWebSocket:typeof window<"u"?Fc=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Fc=self.WebSocket||self.MozWebSocket);const D0=Fc,Mz=n=>n.type==="peer",kz=n=>n.type==="error",Oz="1";function Ao(n,t="Assertion failed"){if(n===!1||n===null||n===void 0){const e=new Error(Dz(t));throw e.stack=Rz(e.stack,"assert.ts"),e}}const Dz=n=>n.split(`
`).map(t=>t.trim()).join(`
`),Rz=(n="",t)=>n.split(`
`).filter(e=>!e.includes(t)).join(`
`),Iz=n=>{const{buffer:t,byteOffset:e,byteLength:s}=n;return t.slice(e,e+s)};class Nz extends qR{socket}class Pz extends Nz{url;retryInterval;#t=!1;#e;#i=new Promise(t=>{this.#e=t});isReady(){return this.#t}whenReady(){return this.#i}#n(){this.#t||(this.#t=!0,this.#e?.())}#r;#o=Po("automerge-repo:websocket:browser");remotePeerId;constructor(t,e=5e3){super(),this.url=t,this.retryInterval=e,this.#o=this.#o.extend(t)}connect(t,e){!this.socket||!this.peerId?(this.#o("connecting"),this.peerId=t,this.peerMetadata=e??{}):(this.#o("reconnecting"),Ao(t===this.peerId),this.socket.removeEventListener("open",this.onOpen),this.socket.removeEventListener("close",this.onClose),this.socket.removeEventListener("message",this.onMessage),this.socket.removeEventListener("error",this.onError)),this.#r||(this.#r=setInterval(()=>{this.connect(t,e)},this.retryInterval)),this.socket=new D0(this.url),this.socket.binaryType="arraybuffer",this.socket.addEventListener("open",this.onOpen),this.socket.addEventListener("close",this.onClose),this.socket.addEventListener("message",this.onMessage),this.socket.addEventListener("error",this.onError),setTimeout(()=>this.#n(),1e3),this.join()}onOpen=()=>{this.#o("open"),clearInterval(this.#r),this.#r=void 0,this.join()};onClose=()=>{this.#o("close"),this.remotePeerId&&this.emit("peer-disconnected",{peerId:this.remotePeerId}),this.retryInterval>0&&!this.#r&&setTimeout(()=>(Ao(this.peerId),this.connect(this.peerId,this.peerMetadata)),this.retryInterval)};onMessage=t=>{this.receiveMessage(t.data)};onError=t=>{if("error"in t&&t.error.code!=="ECONNREFUSED")throw t.error;this.#o("Connection failed, retrying...")};join(){Ao(this.peerId),Ao(this.socket),this.socket.readyState===D0.OPEN&&this.send(zz(this.peerId,this.peerMetadata))}disconnect(){Ao(this.peerId),Ao(this.socket);const t=this.socket;t&&(t.removeEventListener("open",this.onOpen),t.removeEventListener("close",this.onClose),t.removeEventListener("message",this.onMessage),t.removeEventListener("error",this.onError),t.close()),clearInterval(this.#r),this.remotePeerId&&this.emit("peer-disconnected",{peerId:this.remotePeerId}),this.socket=void 0}send(t){if("data"in t&&t.data?.byteLength===0)throw new Error("Tried to send a zero-length message");if(Ao(this.peerId),!this.socket){this.#o("Tried to send on a disconnected socket.");return}if(this.socket.readyState!==D0.OPEN)throw new Error(`Websocket not ready (${this.socket.readyState})`);const e=FA(t);this.socket.send(Iz(e))}peerCandidate(t,e){Ao(this.socket),this.#n(),this.remotePeerId=t,this.emit("peer-candidate",{peerId:t,peerMetadata:e})}receiveMessage(t){let e;try{e=Q6(new Uint8Array(t))}catch(s){this.#o("error decoding message:",s);return}if(Ao(this.socket),t.byteLength===0)throw new Error("received a zero-length message");if(Mz(e)){const{peerMetadata:s}=e;this.#o(`peer: ${e.senderId}`),this.peerCandidate(e.senderId,s)}else kz(e)?this.#o(`error: ${e.message}`):this.emit("message",e)}}function zz(n,t){return{type:"join",senderId:n,peerMetadata:t,supportedProtocolVersions:[Oz]}}Po("WebsocketServer");const iE=new jR({network:[new Pz("wss://sync.automerge.org")]}),Uz=()=>`user-${Math.random().toString(36).substring(2,11)}`,Bz=()=>{let n=sessionStorage.getItem("automerge-user-id");return n||(n=Uz(),sessionStorage.setItem("automerge-user-id",n)),n},Hz=()=>{const[n,t]=zt.useState(null),[e]=zt.useState(()=>Bz());zt.useEffect(()=>{(async()=>{const z=new URLSearchParams(window.location.search).get("doc");if(z){const O=`automerge:${z}`;console.log("Joining existing document:",z),document.title=`HereHear! (${z.substring(0,8)})`,t(O)}else{console.log("Creating new document...");const O=iE.create();O.change(Y=>{Y.users={}});const Q=O.url;t(Q);const N=Q.split(":")[1],j=`${window.location.pathname}?doc=${N}`;window.history.pushState({},"",j),document.title=`HereHear! (${N.substring(0,8)})`,console.log("Created new document:",N),console.log("Share this URL with others to collaborate!")}})()},[]);const[s,r]=KC(n);zt.useEffect(()=>{if(!r)return;const E=()=>{r(O=>{O.users||(O.users={});const Q=Date.now(),N=!document.hidden;if(O.users[e])O.users[e].lastSeen=Q,N?O.users[e].hiddenSince!==void 0&&delete O.users[e].hiddenSince:O.users[e].hiddenSince===void 0&&(O.users[e].hiddenSince=Q);else{const j={id:e,connectedAt:Q,lastSeen:Q};N||(j.hiddenSince=Q),O.users[e]=j}})};E();const R=setInterval(E,5e3),z=()=>{E()};return document.addEventListener("visibilitychange",z),()=>{clearInterval(R),document.removeEventListener("visibilitychange",z)}},[r,e]);const a=zt.useMemo(()=>{if(!s?.users)return[];const E=Date.now(),R=9e4,z=3e4;return Object.values(s.users).filter(O=>E-O.lastSeen<R).map(O=>{const Q=O.hiddenSince===void 0||E-O.hiddenSince<z;return{...O,isActive:Q}})},[s?.users]),u=zt.useCallback(E=>{r&&r(R=>{R.users||(R.users={}),R.users[e]&&(R.users[e].name=E)})},[r,e]),h=zt.useCallback((E,R)=>{r&&r(z=>{z.users||(z.users={}),z.users[e]&&(z.users[e].position={lat:E,lng:R})})},[r,e]),p=zt.useMemo(()=>s?.shapes?Object.values(s.shapes):[],[s?.shapes]),m=zt.useCallback((E,R,z=null)=>{const O=`shape-${Date.now()}-${Math.random().toString(36).substring(2,9)}`;return r&&r(Q=>{Q.shapes||(Q.shapes={}),Q.shapes[O]={id:O,type:E,coordinates:R,soundId:z,createdBy:e,createdAt:Date.now()}}),O},[r,e]),_=zt.useCallback((E,R)=>{r&&r(z=>{z.shapes&&z.shapes[E]&&(z.shapes[E].soundId=R)})},[r]),g=zt.useCallback((E,R)=>{r&&r(z=>{z.shapes&&z.shapes[E]&&(z.shapes[E].coordinates=R)})},[r]),b=zt.useCallback(E=>{r&&r(R=>{R.shapes&&R.shapes[E]&&delete R.shapes[E]})},[r]),x=zt.useCallback(()=>{r&&r(E=>{E.shapes={}})},[r]),S=zt.useCallback(E=>{r&&r(R=>{R.transport=E})},[r]),A=zt.useCallback(()=>{r&&r(E=>{E.transport||(E.transport={startTime:null,bpm:120,isPlaying:!1,pausedPosition:0})})},[r]);return{doc:s,changeDoc:r,userId:e,connectedUsers:a,connectedUserCount:a.length,updateUserName:u,updateUserPosition:h,syncedShapes:p,addShape:m,updateShapeSound:_,updateShapeCoordinates:g,deleteShape:b,clearAllShapes:x,updateTransportState:S,initializeTransportIfNeeded:A,isReady:!!s}},rp={enableHighAccuracy:!0,timeout:1e4,maximumAge:0},Vz=(n=rp)=>{const[t,e]=zt.useState({latitude:null,longitude:null,accuracy:null,error:null,isWatching:!1}),s=zt.useRef(null),r=zt.useRef(n);r.current=n;const a=zt.useCallback(_=>{e({latitude:_.coords.latitude,longitude:_.coords.longitude,accuracy:_.coords.accuracy,error:null,isWatching:!0})},[]),u=zt.useCallback(_=>{let g;switch(_.code){case _.PERMISSION_DENIED:g="Location permission denied. Please enable location access in your browser settings.";break;case _.POSITION_UNAVAILABLE:g="Location information unavailable. Please check your device settings.";break;case _.TIMEOUT:g="Location request timed out. Please try again.";break;default:g="An unknown error occurred while getting location."}e(b=>({...b,error:g,isWatching:!1}))},[]),h=zt.useCallback(()=>{if(!navigator.geolocation){e(g=>({...g,error:"Geolocation is not supported by your browser.",isWatching:!1}));return}s.current!==null&&navigator.geolocation.clearWatch(s.current);const _=r.current;s.current=navigator.geolocation.watchPosition(a,u,{enableHighAccuracy:_.enableHighAccuracy??rp.enableHighAccuracy,timeout:_.timeout??rp.timeout,maximumAge:_.maximumAge??rp.maximumAge}),e(g=>({...g,isWatching:!0,error:null}))},[a,u]),p=zt.useCallback(()=>{s.current!==null&&(navigator.geolocation.clearWatch(s.current),s.current=null),e(_=>({..._,isWatching:!1}))},[]);zt.useEffect(()=>()=>{s.current!==null&&navigator.geolocation.clearWatch(s.current)},[]);const m=typeof navigator<"u"&&"geolocation"in navigator;return{...t,isSupported:m,startWatching:h,stopWatching:p}};window.type=!0;function jz(){const{connectedUserCount:n,connectedUsers:t,userId:e,updateUserName:s,updateUserPosition:r,syncedShapes:a,addShape:u,updateShapeSound:h,updateShapeCoordinates:p,deleteShape:m,clearAllShapes:_,updateTransportState:g,initializeTransportIfNeeded:b,doc:x,isReady:S}=Hz(),[A,E]=zt.useState(!1),[R,z]=zt.useState(""),[O,Q]=zt.useState(()=>{const D=localStorage.getItem("gpsound-location-mode");return D==="gps"||D==="manual"?D:"manual"}),[N,j]=zt.useState(!1),{latitude:Y,longitude:G,accuracy:Z,error:F,isWatching:$,isSupported:et,startWatching:k,stopWatching:X}=Vz({enableHighAccuracy:!0,timeout:15e3,maximumAge:5e3});zt.useEffect(()=>{O==="gps"&&Y!==null&&G!==null&&r(Y,G)},[O,Y,G,r]),zt.useEffect(()=>{O==="gps"?k():X()},[O,k,X]),zt.useEffect(()=>{localStorage.setItem("gpsound-location-mode",O)},[O]);const W=D=>{Q(D)},U=t.find(D=>D.id===e)?.name||"";R===""&&U!==""&&z(U);const K=D=>{const V=D.target.value;z(V),s(V)};return Ct.jsxs(Ct.Fragment,{children:[Ct.jsxs("div",{style:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,backgroundColor:"rgba(255, 255, 255, 0.95)",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",fontFamily:"system-ui, -apple-system, sans-serif",fontSize:"14px",color:"#1f2937",minWidth:"200px",overflow:"hidden"},children:[Ct.jsx("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e5e7eb",borderRadius:"12px 12px 0 0"},children:Ct.jsx("input",{type:"text",placeholder:"Enter your name...",value:R,onChange:K,disabled:!S,style:{width:"100%",padding:"6px 8px",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"13px",fontFamily:"inherit",outline:"none",transition:"border-color 0.2s",boxSizing:"border-box"},onFocus:D=>D.target.style.borderColor="#3b82f6",onBlur:D=>D.target.style.borderColor="#d1d5db"})}),Ct.jsxs("div",{style:{padding:"8px 12px",borderBottom:"1px solid #e5e7eb"},children:[Ct.jsxs("div",{onClick:()=>j(!N),style:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",userSelect:"none"},children:[Ct.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[Ct.jsx("span",{style:{fontSize:"14px"},children:O==="gps"?"":""}),Ct.jsx("span",{style:{fontSize:"13px",fontWeight:500},children:O==="gps"?"GPS Location":"Manual Location"}),O==="gps"&&$&&Ct.jsx("span",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#22c55e",animation:"pulse 2s infinite"}})]}),Ct.jsx("span",{style:{fontSize:"12px",transition:"transform 0.2s",transform:N?"rotate(180deg)":"rotate(0deg)"},children:""})]}),N&&Ct.jsxs("div",{style:{marginTop:"10px"},children:[Ct.jsxs("div",{style:{display:"flex",gap:"6px",marginBottom:"8px"},children:[Ct.jsx("button",{onClick:()=>W("manual"),style:{flex:1,padding:"6px 10px",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:500,cursor:"pointer",backgroundColor:O==="manual"?"#3b82f6":"#e5e7eb",color:O==="manual"?"white":"#4b5563",transition:"all 0.2s"},children:" Manual"}),Ct.jsx("button",{onClick:()=>W("gps"),disabled:!et,style:{flex:1,padding:"6px 10px",border:"none",borderRadius:"6px",fontSize:"12px",fontWeight:500,cursor:et?"pointer":"not-allowed",backgroundColor:O==="gps"?"#3b82f6":"#e5e7eb",color:O==="gps"?"white":"#4b5563",opacity:et?1:.5,transition:"all 0.2s"},children:" GPS"})]}),O==="gps"&&Ct.jsx("div",{style:{fontSize:"11px",color:"#6b7280",padding:"6px 8px",backgroundColor:"#f9fafb",borderRadius:"4px"},children:F?Ct.jsxs("div",{style:{color:"#ef4444"},children:[" ",F]}):$&&Y!==null?Ct.jsxs(Ct.Fragment,{children:[Ct.jsxs("div",{children:["Lat: ",Y.toFixed(6)]}),Ct.jsxs("div",{children:["Lng: ",G?.toFixed(6)]}),Z&&Ct.jsxs("div",{style:{marginTop:"2px",color:"#9ca3af"},children:["Accuracy: ",Z.toFixed(0),"m"]})]}):Ct.jsx("div",{children:"Acquiring location..."})}),Ct.jsx("div",{style:{fontSize:"10px",color:"#9ca3af",marginTop:"6px"},children:O==="manual"?"Drag your marker on the map to set position":"Your position updates automatically from GPS"}),!et&&Ct.jsx("div",{style:{fontSize:"10px",color:"#ef4444",marginTop:"4px"},children:"GPS not supported in this browser"})]})]}),Ct.jsxs("div",{onClick:()=>E(!A),style:{padding:"8px 12px",display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",userSelect:"none",transition:"background-color 0.2s",borderRadius:A?"0":"0 0 12px 12px"},onMouseEnter:D=>D.currentTarget.style.backgroundColor="#f3f4f6",onMouseLeave:D=>D.currentTarget.style.backgroundColor="transparent",children:[Ct.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:S?"#22c55e":"#94a3b8",animation:S?"pulse 2s infinite":"none"}}),Ct.jsx("span",{style:{fontWeight:500,flex:1},children:S?Ct.jsxs(Ct.Fragment,{children:[n," ",n===1?"user":"users"," connected"]}):"Connecting..."}),Ct.jsx("span",{style:{fontSize:"12px",transition:"transform 0.2s",transform:A?"rotate(180deg)":"rotate(0deg)"},children:""})]}),A&&S&&Ct.jsx("div",{style:{borderTop:"1px solid #e5e7eb",maxHeight:"300px",overflowY:"auto",borderRadius:"0 0 12px 12px"},children:t.map((D,V)=>{const I=D.id===e,q=V===t.length-1,at=D.isActive!==!1;return Ct.jsxs("div",{style:{padding:"8px 12px",backgroundColor:I?"#eff6ff":"transparent",borderLeft:I?"3px solid #3b82f6":"3px solid transparent",borderRadius:q?"0 0 12px 12px":"0",opacity:at?1:.7},children:[Ct.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[Ct.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:at?"#22c55e":"#94a3b8",flexShrink:0}}),Ct.jsxs("div",{style:{fontWeight:I?600:400,color:"#1f2937",flex:1},children:[D.name||"Anonymous",I&&Ct.jsx("span",{style:{marginLeft:"6px",fontSize:"11px",color:"#6b7280",fontWeight:400},children:"(you)"}),!at&&Ct.jsx("span",{style:{marginLeft:"6px",fontSize:"11px",color:"#9ca3af",fontWeight:400,fontStyle:"italic"},children:"away"})]})]}),Ct.jsxs("div",{style:{fontSize:"11px",color:"#9ca3af",marginTop:"2px",marginLeft:"12px"},children:[D.id.substring(0,12),"..."]})]},D.id)})})]}),Ct.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
      `}),Ct.jsx(f8,{connectedUsers:t,currentUserId:e,updateUserPosition:r,syncedShapes:a,addShape:u,updateShapeSound:h,updateShapeCoordinates:p,deleteShape:m,clearAllShapes:_,updateTransportState:g,initializeTransportIfNeeded:b,transportState:x?.transport,locationMode:O})]})}MC.createRoot(document.getElementById("root")).render(Ct.jsx(zt.StrictMode,{children:Ct.jsx(m2.Provider,{value:iE,children:Ct.jsx(jz,{})})}));
//# sourceMappingURL=index-CadDqrpz.js.map
